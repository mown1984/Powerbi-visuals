/*! jQuery v2.1.3 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.3",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=hb(),z=hb(),A=hb(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},eb=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fb){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function gb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+rb(o[l]);w=ab.test(a)&&pb(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function hb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ib(a){return a[u]=!0,a}function jb(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function kb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function lb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function nb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function ob(a){return ib(function(b){return b=+b,ib(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pb(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=gb.support={},f=gb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=gb.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",eb,!1):e.attachEvent&&e.attachEvent("onunload",eb)),p=!f(g),c.attributes=jb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=jb(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=jb(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(jb(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),jb(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&jb(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return lb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?lb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},gb.matches=function(a,b){return gb(a,null,null,b)},gb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return gb(b,n,null,[a]).length>0},gb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},gb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},gb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},gb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=gb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=gb.selectors={cacheLength:50,createPseudo:ib,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||gb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&gb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=gb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||gb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ib(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ib(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ib(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ib(function(a){return function(b){return gb(a,b).length>0}}),contains:ib(function(a){return a=a.replace(cb,db),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ib(function(a){return W.test(a||"")||gb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:ob(function(){return[0]}),last:ob(function(a,b){return[b-1]}),eq:ob(function(a,b,c){return[0>c?c+b:c]}),even:ob(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:ob(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:ob(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:ob(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=mb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=nb(b);function qb(){}qb.prototype=d.filters=d.pseudos,d.setFilters=new qb,g=gb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?gb.error(a):z(a,i).slice(0)};function rb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function tb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ub(a,b,c){for(var d=0,e=b.length;e>d;d++)gb(a,b[d],c);return c}function vb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wb(a,b,c,d,e,f){return d&&!d[u]&&(d=wb(d)),e&&!e[u]&&(e=wb(e,f)),ib(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ub(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:vb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=vb(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=vb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sb(function(a){return a===b},h,!0),l=sb(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sb(tb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wb(i>1&&tb(m),i>1&&rb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xb(a.slice(i,e)),f>e&&xb(a=a.slice(e)),f>e&&rb(a))}m.push(c)}return tb(m)}function yb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=vb(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&gb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ib(f):f}return h=gb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,yb(e,d)),f.selector=a}return f},i=gb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&pb(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&rb(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&pb(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=jb(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),jb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||kb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&jb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||kb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),jb(function(a){return null==a.getAttribute("disabled")})||kb(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),gb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)
},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td;function jb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c)){j=0;while(e=f[j++])fb.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(ob(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(ob(c,"script"),kb),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={};function sb(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function tb(a){var b=l,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}var ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];function Fb(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;while(e--)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?zb.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(n.cssHooks[a+b].set=Gb)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||tb(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?tb(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ub(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return n.map(k,Ub,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xb,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xb(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Lb=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))
},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||n.find.attr;$b[b]=function(a,b,d){var e,f;return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var ec=/#.*$/,fc=/([?&])_=[^&]*/,gc=/^(.*?):[ \t]*([^\r\n]*)$/gm,hc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ic=/^(?:GET|HEAD)$/,jc=/^\/\//,kc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lc={},mc={},nc="*/".concat("*"),oc=a.location.href,pc=kc.exec(oc.toLowerCase())||[];function qc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rc(a,b,c,d){var e={},f=a===mc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function sc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function uc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:oc,type:"GET",isLocal:hc.test(pc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sc(sc(a,n.ajaxSettings),b):sc(n.ajaxSettings,a)},ajaxPrefilter:qc(lc),ajaxTransport:qc(mc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=gc.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||oc)+"").replace(ec,"").replace(jc,pc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=kc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pc[1]&&h[2]===pc[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(pc[3]||("http:"===pc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rc(lc,k,b,v),2===t)return v;i=n.event&&k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!ic.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=fc.test(d)?d.replace(fc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+nc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rc(mc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tc(k,v,f)),u=uc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vc=/%20/g,wc=/\[\]$/,xc=/\r?\n/g,yc=/^(?:submit|button|image|reset|file)$/i,zc=/^(?:input|select|textarea|keygen)/i;function Ac(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wc.test(a)?d(a,e):Ac(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Ac(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ac(c,a[c],b,e);return d.join("&").replace(vc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&zc.test(this.nodeName)&&!yc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xc,"\r\n")}}):{name:b.name,value:c.replace(xc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bc=0,Cc={},Dc={0:200,1223:204},Ec=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cc)Cc[a]()}),k.cors=!!Ec&&"withCredentials"in Ec,k.ajax=Ec=!!Ec,n.ajaxTransport(function(a){var b;return k.cors||Ec&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Dc[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cc[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fc=[],Gc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fc.pop()||n.expando+"_"+cc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Gc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hc=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Hc)return Hc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ic=a.document.documentElement;function Jc(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Ic;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ic})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=yb(k.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kc=a.jQuery,Lc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lc),b&&a.jQuery===n&&(a.jQuery=Kc),n},typeof b===U&&(a.jQuery=a.$=n),n});

/*!
* D3 ver 3.5.5
*
* Copyright (c) 2010-2015, Michael Bostock
* All rights reserved.
*/

!function(){function n(n){return n&&(n.ownerDocument||n.document||n).documentElement}function t(n){return n&&(n.ownerDocument&&n.ownerDocument.defaultView||n.document&&n||n.defaultView)}function e(n,t){return t>n?-1:n>t?1:n>=t?0:0/0}function r(n){return null===n?0/0:+n}function u(n){return!isNaN(n)}function i(n){return{left:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)<0?r=i+1:u=i}return r},right:function(t,e,r,u){for(arguments.length<3&&(r=0),arguments.length<4&&(u=t.length);u>r;){var i=r+u>>>1;n(t[i],e)>0?u=i:r=i+1}return r}}}function o(n){return n.length}function a(n){for(var t=1;n*t%1;)t*=10;return t}function c(n,t){for(var e in t)Object.defineProperty(n.prototype,e,{value:t[e],enumerable:!1})}function l(){this._=Object.create(null)}function s(n){return(n+="")===pa||n[0]===va?va+n:n}function f(n){return(n+="")[0]===va?n.slice(1):n}function h(n){return s(n)in this._}function g(n){return(n=s(n))in this._&&delete this._[n]}function p(){var n=[];for(var t in this._)n.push(f(t));return n}function v(){var n=0;for(var t in this._)++n;return n}function d(){for(var n in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(n){return n}function M(n,t,e){return function(){var r=e.apply(t,arguments);return r===t?n:r}}function x(n,t){if(t in n)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e=0,r=da.length;r>e;++e){var u=da[e]+t;if(u in n)return u}}function b(){}function _(){}function w(n){function t(){for(var t,r=e,u=-1,i=r.length;++u<i;)(t=r[u].on)&&t.apply(this,arguments);return n}var e=[],r=new l;return t.on=function(t,u){var i,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(t)),u&&e.push(r.set(t,{on:u})),n)},t}function S(){ta.event.preventDefault()}function k(){for(var n,t=ta.event;n=t.sourceEvent;)t=n;return t}function E(n){for(var t=new _,e=0,r=arguments.length;++e<r;)t[arguments[e]]=w(t);return t.of=function(e,r){return function(u){try{var i=u.sourceEvent=ta.event;u.target=n,ta.event=u,t[u.type].apply(e,r)}finally{ta.event=i}}},t}function A(n){return ya(n,_a),n}function N(n){return"function"==typeof n?n:function(){return Ma(n,this)}}function C(n){return"function"==typeof n?n:function(){return xa(n,this)}}function z(n,t){function e(){this.removeAttribute(n)}function r(){this.removeAttributeNS(n.space,n.local)}function u(){this.setAttribute(n,t)}function i(){this.setAttributeNS(n.space,n.local,t)}function o(){var e=t.apply(this,arguments);null==e?this.removeAttribute(n):this.setAttribute(n,e)}function a(){var e=t.apply(this,arguments);null==e?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,e)}return n=ta.ns.qualify(n),null==t?n.local?r:e:"function"==typeof t?n.local?a:o:n.local?i:u}function q(n){return n.trim().replace(/\s+/g," ")}function L(n){return new RegExp("(?:^|\\s+)"+ta.requote(n)+"(?:\\s+|$)","g")}function T(n){return(n+"").trim().split(/^|\s+/)}function R(n,t){function e(){for(var e=-1;++e<u;)n[e](this,t)}function r(){for(var e=-1,r=t.apply(this,arguments);++e<u;)n[e](this,r)}n=T(n).map(D);var u=n.length;return"function"==typeof t?r:e}function D(n){var t=L(n);return function(e,r){if(u=e.classList)return r?u.add(n):u.remove(n);var u=e.getAttribute("class")||"";r?(t.lastIndex=0,t.test(u)||e.setAttribute("class",q(u+" "+n))):e.setAttribute("class",q(u.replace(t," ")))}}function P(n,t,e){function r(){this.style.removeProperty(n)}function u(){this.style.setProperty(n,t,e)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(n):this.style.setProperty(n,r,e)}return null==t?r:"function"==typeof t?i:u}function U(n,t){function e(){delete this[n]}function r(){this[n]=t}function u(){var e=t.apply(this,arguments);null==e?delete this[n]:this[n]=e}return null==t?e:"function"==typeof t?u:r}function j(n){function t(){var t=this.ownerDocument,e=this.namespaceURI;return e?t.createElementNS(e,n):t.createElement(n)}function e(){return this.ownerDocument.createElementNS(n.space,n.local)}return"function"==typeof n?n:(n=ta.ns.qualify(n)).local?e:t}function F(){var n=this.parentNode;n&&n.removeChild(this)}function H(n){return{__data__:n}}function O(n){return function(){return ba(this,n)}}function I(n){return arguments.length||(n=e),function(t,e){return t&&e?n(t.__data__,e.__data__):!t-!e}}function Y(n,t){for(var e=0,r=n.length;r>e;e++)for(var u,i=n[e],o=0,a=i.length;a>o;o++)(u=i[o])&&t(u,o,e);return n}function Z(n){return ya(n,Sa),n}function V(n){var t,e;return function(r,u,i){var o,a=n[i].update,c=a.length;for(i!=e&&(e=i,t=0),u>=t&&(t=u+1);!(o=a[t])&&++t<c;);return o}}function X(n,t,e){function r(){var t=this[o];t&&(this.removeEventListener(n,t,t.$),delete this[o])}function u(){var u=c(t,ra(arguments));r.call(this),this.addEventListener(n,this[o]=u,u.$=e),u._=t}function i(){var t,e=new RegExp("^__on([^.]+)"+ta.requote(n)+"$");for(var r in this)if(t=r.match(e)){var u=this[r];this.removeEventListener(t[1],u,u.$),delete this[r]}}var o="__on"+n,a=n.indexOf("."),c=$;a>0&&(n=n.slice(0,a));var l=ka.get(n);return l&&(n=l,c=B),a?t?u:r:t?b:i}function $(n,t){return function(e){var r=ta.event;ta.event=e,t[0]=this.__data__;try{n.apply(this,t)}finally{ta.event=r}}}function B(n,t){var e=$(n,t);return function(n){var t=this,r=n.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||e.call(t,n)}}function W(e){var r=".dragsuppress-"+ ++Aa,u="click"+r,i=ta.select(t(e)).on("touchmove"+r,S).on("dragstart"+r,S).on("selectstart"+r,S);if(null==Ea&&(Ea="onselectstart"in e?!1:x(e.style,"userSelect")),Ea){var o=n(e).style,a=o[Ea];o[Ea]="none"}return function(n){if(i.on(r,null),Ea&&(o[Ea]=a),n){var t=function(){i.on(u,null)};i.on(u,function(){S(),t()},!0),setTimeout(t,0)}}}function J(n,e){e.changedTouches&&(e=e.changedTouches[0]);var r=n.ownerSVGElement||n;if(r.createSVGPoint){var u=r.createSVGPoint();if(0>Na){var i=t(n);if(i.scrollX||i.scrollY){r=ta.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Na=!(o.f||o.e),r.remove()}}return Na?(u.x=e.pageX,u.y=e.pageY):(u.x=e.clientX,u.y=e.clientY),u=u.matrixTransform(n.getScreenCTM().inverse()),[u.x,u.y]}var a=n.getBoundingClientRect();return[e.clientX-a.left-n.clientLeft,e.clientY-a.top-n.clientTop]}function G(){return ta.event.changedTouches[0].identifier}function K(n){return n>0?1:0>n?-1:0}function Q(n,t,e){return(t[0]-n[0])*(e[1]-n[1])-(t[1]-n[1])*(e[0]-n[0])}function nt(n){return n>1?0:-1>n?qa:Math.acos(n)}function tt(n){return n>1?Ra:-1>n?-Ra:Math.asin(n)}function et(n){return((n=Math.exp(n))-1/n)/2}function rt(n){return((n=Math.exp(n))+1/n)/2}function ut(n){return((n=Math.exp(2*n))-1)/(n+1)}function it(n){return(n=Math.sin(n/2))*n}function ot(){}function at(n,t,e){return this instanceof at?(this.h=+n,this.s=+t,void(this.l=+e)):arguments.length<2?n instanceof at?new at(n.h,n.s,n.l):bt(""+n,_t,at):new at(n,t,e)}function ct(n,t,e){function r(n){return n>360?n-=360:0>n&&(n+=360),60>n?i+(o-i)*n/60:180>n?o:240>n?i+(o-i)*(240-n)/60:i}function u(n){return Math.round(255*r(n))}var i,o;return n=isNaN(n)?0:(n%=360)<0?n+360:n,t=isNaN(t)?0:0>t?0:t>1?1:t,e=0>e?0:e>1?1:e,o=.5>=e?e*(1+t):e+t-e*t,i=2*e-o,new mt(u(n+120),u(n),u(n-120))}function lt(n,t,e){return this instanceof lt?(this.h=+n,this.c=+t,void(this.l=+e)):arguments.length<2?n instanceof lt?new lt(n.h,n.c,n.l):n instanceof ft?gt(n.l,n.a,n.b):gt((n=wt((n=ta.rgb(n)).r,n.g,n.b)).l,n.a,n.b):new lt(n,t,e)}function st(n,t,e){return isNaN(n)&&(n=0),isNaN(t)&&(t=0),new ft(e,Math.cos(n*=Da)*t,Math.sin(n)*t)}function ft(n,t,e){return this instanceof ft?(this.l=+n,this.a=+t,void(this.b=+e)):arguments.length<2?n instanceof ft?new ft(n.l,n.a,n.b):n instanceof lt?st(n.h,n.c,n.l):wt((n=mt(n)).r,n.g,n.b):new ft(n,t,e)}function ht(n,t,e){var r=(n+16)/116,u=r+t/500,i=r-e/200;return u=pt(u)*Xa,r=pt(r)*$a,i=pt(i)*Ba,new mt(dt(3.2404542*u-1.5371385*r-.4985314*i),dt(-.969266*u+1.8760108*r+.041556*i),dt(.0556434*u-.2040259*r+1.0572252*i))}function gt(n,t,e){return n>0?new lt(Math.atan2(e,t)*Pa,Math.sqrt(t*t+e*e),n):new lt(0/0,0/0,n)}function pt(n){return n>.206893034?n*n*n:(n-4/29)/7.787037}function vt(n){return n>.008856?Math.pow(n,1/3):7.787037*n+4/29}function dt(n){return Math.round(255*(.00304>=n?12.92*n:1.055*Math.pow(n,1/2.4)-.055))}function mt(n,t,e){return this instanceof mt?(this.r=~~n,this.g=~~t,void(this.b=~~e)):arguments.length<2?n instanceof mt?new mt(n.r,n.g,n.b):bt(""+n,mt,ct):new mt(n,t,e)}function yt(n){return new mt(n>>16,n>>8&255,255&n)}function Mt(n){return yt(n)+""}function xt(n){return 16>n?"0"+Math.max(0,n).toString(16):Math.min(255,n).toString(16)}function bt(n,t,e){var r,u,i,o=0,a=0,c=0;if(r=/([a-z]+)\((.*)\)/i.exec(n))switch(u=r[2].split(","),r[1]){case"hsl":return e(parseFloat(u[0]),parseFloat(u[1])/100,parseFloat(u[2])/100);case"rgb":return t(kt(u[0]),kt(u[1]),kt(u[2]))}return(i=Ga.get(n.toLowerCase()))?t(i.r,i.g,i.b):(null==n||"#"!==n.charAt(0)||isNaN(i=parseInt(n.slice(1),16))||(4===n.length?(o=(3840&i)>>4,o=o>>4|o,a=240&i,a=a>>4|a,c=15&i,c=c<<4|c):7===n.length&&(o=(16711680&i)>>16,a=(65280&i)>>8,c=255&i)),t(o,a,c))}function _t(n,t,e){var r,u,i=Math.min(n/=255,t/=255,e/=255),o=Math.max(n,t,e),a=o-i,c=(o+i)/2;return a?(u=.5>c?a/(o+i):a/(2-o-i),r=n==o?(t-e)/a+(e>t?6:0):t==o?(e-n)/a+2:(n-t)/a+4,r*=60):(r=0/0,u=c>0&&1>c?0:r),new at(r,u,c)}function wt(n,t,e){n=St(n),t=St(t),e=St(e);var r=vt((.4124564*n+.3575761*t+.1804375*e)/Xa),u=vt((.2126729*n+.7151522*t+.072175*e)/$a),i=vt((.0193339*n+.119192*t+.9503041*e)/Ba);return ft(116*u-16,500*(r-u),200*(u-i))}function St(n){return(n/=255)<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4)}function kt(n){var t=parseFloat(n);return"%"===n.charAt(n.length-1)?Math.round(2.55*t):t}function Et(n){return"function"==typeof n?n:function(){return n}}function At(n){return function(t,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=null),Nt(t,e,n,r)}}function Nt(n,t,e,r){function u(){var n,t=c.status;if(!t&&zt(c)||t>=200&&300>t||304===t){try{n=e.call(i,c)}catch(r){return void o.error.call(i,r)}o.load.call(i,n)}else o.error.call(i,c)}var i={},o=ta.dispatch("beforesend","progress","load","error"),a={},c=new XMLHttpRequest,l=null;return!this.XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(n)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=u:c.onreadystatechange=function(){c.readyState>3&&u()},c.onprogress=function(n){var t=ta.event;ta.event=n;try{o.progress.call(i,c)}finally{ta.event=t}},i.header=function(n,t){return n=(n+"").toLowerCase(),arguments.length<2?a[n]:(null==t?delete a[n]:a[n]=t+"",i)},i.mimeType=function(n){return arguments.length?(t=null==n?null:n+"",i):t},i.responseType=function(n){return arguments.length?(l=n,i):l},i.response=function(n){return e=n,i},["get","post"].forEach(function(n){i[n]=function(){return i.send.apply(i,[n].concat(ra(arguments)))}}),i.send=function(e,r,u){if(2===arguments.length&&"function"==typeof r&&(u=r,r=null),c.open(e,n,!0),null==t||"accept"in a||(a.accept=t+",*/*"),c.setRequestHeader)for(var s in a)c.setRequestHeader(s,a[s]);return null!=t&&c.overrideMimeType&&c.overrideMimeType(t),null!=l&&(c.responseType=l),null!=u&&i.on("error",u).on("load",function(n){u(null,n)}),o.beforesend.call(i,c),c.send(null==r?null:r),i},i.abort=function(){return c.abort(),i},ta.rebind(i,o,"on"),null==r?i:i.get(Ct(r))}function Ct(n){return 1===n.length?function(t,e){n(null==t?e:null)}:n}function zt(n){var t=n.responseType;return t&&"text"!==t?n.response:n.responseText}function qt(){var n=Lt(),t=Tt()-n;t>24?(isFinite(t)&&(clearTimeout(tc),tc=setTimeout(qt,t)),nc=0):(nc=1,rc(qt))}function Lt(){var n=Date.now();for(ec=Ka;ec;)n>=ec.t&&(ec.f=ec.c(n-ec.t)),ec=ec.n;return n}function Tt(){for(var n,t=Ka,e=1/0;t;)t.f?t=n?n.n=t.n:Ka=t.n:(t.t<e&&(e=t.t),t=(n=t).n);return Qa=n,e}function Rt(n,t){return t-(n?Math.ceil(Math.log(n)/Math.LN10):1)}function Dt(n,t){var e=Math.pow(10,3*ga(8-t));return{scale:t>8?function(n){return n/e}:function(n){return n*e},symbol:n}}function Pt(n){var t=n.decimal,e=n.thousands,r=n.grouping,u=n.currency,i=r&&e?function(n,t){for(var u=n.length,i=[],o=0,a=r[0],c=0;u>0&&a>0&&(c+a+1>t&&(a=Math.max(1,t-c)),i.push(n.substring(u-=a,u+a)),!((c+=a+1)>t));)a=r[o=(o+1)%r.length];return i.reverse().join(e)}:y;return function(n){var e=ic.exec(n),r=e[1]||" ",o=e[2]||">",a=e[3]||"-",c=e[4]||"",l=e[5],s=+e[6],f=e[7],h=e[8],g=e[9],p=1,v="",d="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===o)&&(l=r="0",o="="),g){case"n":f=!0,g="g";break;case"%":p=100,d="%",g="f";break;case"p":p=100,d="%",g="r";break;case"b":case"o":case"x":case"X":"#"===c&&(v="0"+g.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,g="r"}"$"===c&&(v=u[0],d=u[1]),"r"!=g||h||(g="g"),null!=h&&("g"==g?h=Math.max(1,Math.min(21,h)):("e"==g||"f"==g)&&(h=Math.max(0,Math.min(20,h)))),g=oc.get(g)||Ut;var M=l&&f;return function(n){var e=d;if(m&&n%1)return"";var u=0>n||0===n&&0>1/n?(n=-n,"-"):"-"===a?"":a;if(0>p){var c=ta.formatPrefix(n,h);n=c.scale(n),e=c.symbol+d}else n*=p;n=g(n,h);var x,b,_=n.lastIndexOf(".");if(0>_){var w=y?n.lastIndexOf("e"):-1;0>w?(x=n,b=""):(x=n.substring(0,w),b=n.substring(w))}else x=n.substring(0,_),b=t+n.substring(_+1);!l&&f&&(x=i(x,1/0));var S=v.length+x.length+b.length+(M?0:u.length),k=s>S?new Array(S=s-S+1).join(r):"";return M&&(x=i(k+x,k.length?s-b.length:1/0)),u+=v,n=x+b,("<"===o?u+n+k:">"===o?k+u+n:"^"===o?k.substring(0,S>>=1)+u+n+k.substring(S):u+(M?n:k+n))+e}}}function Ut(n){return n+""}function jt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ft(n,t,e){function r(t){var e=n(t),r=i(e,1);return r-t>t-e?e:r}function u(e){return t(e=n(new cc(e-1)),1),e}function i(n,e){return t(n=new cc(+n),e),n}function o(n,r,i){var o=u(n),a=[];if(i>1)for(;r>o;)e(o)%i||a.push(new Date(+o)),t(o,1);else for(;r>o;)a.push(new Date(+o)),t(o,1);return a}function a(n,t,e){try{cc=jt;var r=new jt;return r._=n,o(r,t,e)}finally{cc=Date}}n.floor=n,n.round=r,n.ceil=u,n.offset=i,n.range=o;var c=n.utc=Ht(n);return c.floor=c,c.round=Ht(r),c.ceil=Ht(u),c.offset=Ht(i),c.range=a,n}function Ht(n){return function(t,e){try{cc=jt;var r=new jt;return r._=t,n(r,e)._}finally{cc=Date}}}function Ot(n){function t(n){function t(t){for(var e,u,i,o=[],a=-1,c=0;++a<r;)37===n.charCodeAt(a)&&(o.push(n.slice(c,a)),null!=(u=sc[e=n.charAt(++a)])&&(e=n.charAt(++a)),(i=N[e])&&(e=i(t,null==u?"e"===e?" ":"0":u)),o.push(e),c=a+1);return o.push(n.slice(c,a)),o.join("")}var r=n.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},u=e(r,n,t,0);if(u!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&cc!==jt,o=new(i?jt:cc);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?o._:o},t.toString=function(){return n},t}function e(n,t,e,r){for(var u,i,o,a=0,c=t.length,l=e.length;c>a;){if(r>=l)return-1;if(u=t.charCodeAt(a++),37===u){if(o=t.charAt(a++),i=C[o in sc?t.charAt(a++):o],!i||(r=i(n,e,r))<0)return-1}else if(u!=e.charCodeAt(r++))return-1}return r}function r(n,t,e){_.lastIndex=0;var r=_.exec(t.slice(e));return r?(n.w=w.get(r[0].toLowerCase()),e+r[0].length):-1}function u(n,t,e){x.lastIndex=0;var r=x.exec(t.slice(e));return r?(n.w=b.get(r[0].toLowerCase()),e+r[0].length):-1}function i(n,t,e){E.lastIndex=0;var r=E.exec(t.slice(e));return r?(n.m=A.get(r[0].toLowerCase()),e+r[0].length):-1}function o(n,t,e){S.lastIndex=0;var r=S.exec(t.slice(e));return r?(n.m=k.get(r[0].toLowerCase()),e+r[0].length):-1}function a(n,t,r){return e(n,N.c.toString(),t,r)}function c(n,t,r){return e(n,N.x.toString(),t,r)}function l(n,t,r){return e(n,N.X.toString(),t,r)}function s(n,t,e){var r=M.get(t.slice(e,e+=2).toLowerCase());return null==r?-1:(n.p=r,e)}var f=n.dateTime,h=n.date,g=n.time,p=n.periods,v=n.days,d=n.shortDays,m=n.months,y=n.shortMonths;t.utc=function(n){function e(n){try{cc=jt;var t=new cc;return t._=n,r(t)}finally{cc=Date}}var r=t(n);return e.parse=function(n){try{cc=jt;var t=r.parse(n);return t&&t._}finally{cc=Date}},e.toString=r.toString,e},t.multi=t.utc.multi=ae;var M=ta.map(),x=Yt(v),b=Zt(v),_=Yt(d),w=Zt(d),S=Yt(m),k=Zt(m),E=Yt(y),A=Zt(y);p.forEach(function(n,t){M.set(n.toLowerCase(),t)});var N={a:function(n){return d[n.getDay()]},A:function(n){return v[n.getDay()]},b:function(n){return y[n.getMonth()]},B:function(n){return m[n.getMonth()]},c:t(f),d:function(n,t){return It(n.getDate(),t,2)},e:function(n,t){return It(n.getDate(),t,2)},H:function(n,t){return It(n.getHours(),t,2)},I:function(n,t){return It(n.getHours()%12||12,t,2)},j:function(n,t){return It(1+ac.dayOfYear(n),t,3)},L:function(n,t){return It(n.getMilliseconds(),t,3)},m:function(n,t){return It(n.getMonth()+1,t,2)},M:function(n,t){return It(n.getMinutes(),t,2)},p:function(n){return p[+(n.getHours()>=12)]},S:function(n,t){return It(n.getSeconds(),t,2)},U:function(n,t){return It(ac.sundayOfYear(n),t,2)},w:function(n){return n.getDay()},W:function(n,t){return It(ac.mondayOfYear(n),t,2)},x:t(h),X:t(g),y:function(n,t){return It(n.getFullYear()%100,t,2)},Y:function(n,t){return It(n.getFullYear()%1e4,t,4)},Z:ie,"%":function(){return"%"}},C={a:r,A:u,b:i,B:o,c:a,d:Qt,e:Qt,H:te,I:te,j:ne,L:ue,m:Kt,M:ee,p:s,S:re,U:Xt,w:Vt,W:$t,x:c,X:l,y:Wt,Y:Bt,Z:Jt,"%":oe};return t}function It(n,t,e){var r=0>n?"-":"",u=(r?-n:n)+"",i=u.length;return r+(e>i?new Array(e-i+1).join(t)+u:u)}function Yt(n){return new RegExp("^(?:"+n.map(ta.requote).join("|")+")","i")}function Zt(n){for(var t=new l,e=-1,r=n.length;++e<r;)t.set(n[e].toLowerCase(),e);return t}function Vt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function Xt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e));return r?(n.U=+r[0],e+r[0].length):-1}function $t(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e));return r?(n.W=+r[0],e+r[0].length):-1}function Bt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Wt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.y=Gt(+r[0]),e+r[0].length):-1}function Jt(n,t,e){return/^[+-]\d{4}$/.test(t=t.slice(e,e+5))?(n.Z=-t,e+5):-1}function Gt(n){return n+(n>68?1900:2e3)}function Kt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function Qt(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function ne(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+3));return r?(n.j=+r[0],e+r[0].length):-1}function te(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function ee(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function re(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function ue(n,t,e){fc.lastIndex=0;var r=fc.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function ie(n){var t=n.getTimezoneOffset(),e=t>0?"-":"+",r=ga(t)/60|0,u=ga(t)%60;return e+It(r,"0",2)+It(u,"0",2)}function oe(n,t,e){hc.lastIndex=0;var r=hc.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function ae(n){for(var t=n.length,e=-1;++e<t;)n[e][0]=this(n[e][0]);return function(t){for(var e=0,r=n[e];!r[1](t);)r=n[++e];return r[0](t)}}function ce(){}function le(n,t,e){var r=e.s=n+t,u=r-n,i=r-u;e.t=n-i+(t-u)}function se(n,t){n&&dc.hasOwnProperty(n.type)&&dc[n.type](n,t)}function fe(n,t,e){var r,u=-1,i=n.length-e;for(t.lineStart();++u<i;)r=n[u],t.point(r[0],r[1],r[2]);t.lineEnd()}function he(n,t){var e=-1,r=n.length;for(t.polygonStart();++e<r;)fe(n[e],t,1);t.polygonEnd()}function ge(){function n(n,t){n*=Da,t=t*Da/2+qa/4;var e=n-r,o=e>=0?1:-1,a=o*e,c=Math.cos(t),l=Math.sin(t),s=i*l,f=u*c+s*Math.cos(a),h=s*o*Math.sin(a);yc.add(Math.atan2(h,f)),r=n,u=c,i=l}var t,e,r,u,i;Mc.point=function(o,a){Mc.point=n,r=(t=o)*Da,u=Math.cos(a=(e=a)*Da/2+qa/4),i=Math.sin(a)},Mc.lineEnd=function(){n(t,e)}}function pe(n){var t=n[0],e=n[1],r=Math.cos(e);return[r*Math.cos(t),r*Math.sin(t),Math.sin(e)]}function ve(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]}function de(n,t){return[n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]]}function me(n,t){n[0]+=t[0],n[1]+=t[1],n[2]+=t[2]}function ye(n,t){return[n[0]*t,n[1]*t,n[2]*t]}function Me(n){var t=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);n[0]/=t,n[1]/=t,n[2]/=t}function xe(n){return[Math.atan2(n[1],n[0]),tt(n[2])]}function be(n,t){return ga(n[0]-t[0])<Ca&&ga(n[1]-t[1])<Ca}function _e(n,t){n*=Da;var e=Math.cos(t*=Da);we(e*Math.cos(n),e*Math.sin(n),Math.sin(t))}function we(n,t,e){++xc,_c+=(n-_c)/xc,wc+=(t-wc)/xc,Sc+=(e-Sc)/xc}function Se(){function n(n,u){n*=Da;var i=Math.cos(u*=Da),o=i*Math.cos(n),a=i*Math.sin(n),c=Math.sin(u),l=Math.atan2(Math.sqrt((l=e*c-r*a)*l+(l=r*o-t*c)*l+(l=t*a-e*o)*l),t*o+e*a+r*c);bc+=l,kc+=l*(t+(t=o)),Ec+=l*(e+(e=a)),Ac+=l*(r+(r=c)),we(t,e,r)}var t,e,r;qc.point=function(u,i){u*=Da;var o=Math.cos(i*=Da);t=o*Math.cos(u),e=o*Math.sin(u),r=Math.sin(i),qc.point=n,we(t,e,r)}}function ke(){qc.point=_e}function Ee(){function n(n,t){n*=Da;var e=Math.cos(t*=Da),o=e*Math.cos(n),a=e*Math.sin(n),c=Math.sin(t),l=u*c-i*a,s=i*o-r*c,f=r*a-u*o,h=Math.sqrt(l*l+s*s+f*f),g=r*o+u*a+i*c,p=h&&-nt(g)/h,v=Math.atan2(h,g);Nc+=p*l,Cc+=p*s,zc+=p*f,bc+=v,kc+=v*(r+(r=o)),Ec+=v*(u+(u=a)),Ac+=v*(i+(i=c)),we(r,u,i)}var t,e,r,u,i;qc.point=function(o,a){t=o,e=a,qc.point=n,o*=Da;var c=Math.cos(a*=Da);r=c*Math.cos(o),u=c*Math.sin(o),i=Math.sin(a),we(r,u,i)},qc.lineEnd=function(){n(t,e),qc.lineEnd=ke,qc.point=_e}}function Ae(n,t){function e(e,r){return e=n(e,r),t(e[0],e[1])}return n.invert&&t.invert&&(e.invert=function(e,r){return e=t.invert(e,r),e&&n.invert(e[0],e[1])}),e}function Ne(){return!0}function Ce(n,t,e,r,u){var i=[],o=[];if(n.forEach(function(n){if(!((t=n.length-1)<=0)){var t,e=n[0],r=n[t];if(be(e,r)){u.lineStart();for(var a=0;t>a;++a)u.point((e=n[a])[0],e[1]);return void u.lineEnd()}var c=new qe(e,n,null,!0),l=new qe(e,null,c,!1);c.o=l,i.push(c),o.push(l),c=new qe(r,n,null,!1),l=new qe(r,null,c,!0),c.o=l,i.push(c),o.push(l)}}),o.sort(t),ze(i),ze(o),i.length){for(var a=0,c=e,l=o.length;l>a;++a)o[a].e=c=!c;for(var s,f,h=i[0];;){for(var g=h,p=!0;g.v;)if((g=g.n)===h)return;s=g.z,u.lineStart();do{if(g.v=g.o.v=!0,g.e){if(p)for(var a=0,l=s.length;l>a;++a)u.point((f=s[a])[0],f[1]);else r(g.x,g.n.x,1,u);g=g.n}else{if(p){s=g.p.z;for(var a=s.length-1;a>=0;--a)u.point((f=s[a])[0],f[1])}else r(g.x,g.p.x,-1,u);g=g.p}g=g.o,s=g.z,p=!p}while(!g.v);u.lineEnd()}}}function ze(n){if(t=n.length){for(var t,e,r=0,u=n[0];++r<t;)u.n=e=n[r],e.p=u,u=e;u.n=e=n[0],e.p=u}}function qe(n,t,e,r){this.x=n,this.z=t,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Le(n,t,e,r){return function(u,i){function o(t,e){var r=u(t,e);n(t=r[0],e=r[1])&&i.point(t,e)}function a(n,t){var e=u(n,t);d.point(e[0],e[1])}function c(){y.point=a,d.lineStart()}function l(){y.point=o,d.lineEnd()}function s(n,t){v.push([n,t]);var e=u(n,t);x.point(e[0],e[1])}function f(){x.lineStart(),v=[]}function h(){s(v[0][0],v[0][1]),x.lineEnd();var n,t=x.clean(),e=M.buffer(),r=e.length;if(v.pop(),p.push(v),v=null,r)if(1&t){n=e[0];var u,r=n.length-1,o=-1;if(r>0){for(b||(i.polygonStart(),b=!0),i.lineStart();++o<r;)i.point((u=n[o])[0],u[1]);i.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),g.push(e.filter(Te))}var g,p,v,d=t(i),m=u.invert(r[0],r[1]),y={point:o,lineStart:c,lineEnd:l,polygonStart:function(){y.point=s,y.lineStart=f,y.lineEnd=h,g=[],p=[]},polygonEnd:function(){y.point=o,y.lineStart=c,y.lineEnd=l,g=ta.merge(g);var n=Fe(m,p);g.length?(b||(i.polygonStart(),b=!0),Ce(g,De,n,e,i)):n&&(b||(i.polygonStart(),b=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),b&&(i.polygonEnd(),b=!1),g=p=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}},M=Re(),x=t(M),b=!1;return y}}function Te(n){return n.length>1}function Re(){var n,t=[];return{lineStart:function(){t.push(n=[])},point:function(t,e){n.push([t,e])},lineEnd:b,buffer:function(){var e=t;return t=[],n=null,e},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function De(n,t){return((n=n.x)[0]<0?n[1]-Ra-Ca:Ra-n[1])-((t=t.x)[0]<0?t[1]-Ra-Ca:Ra-t[1])}function Pe(n){var t,e=0/0,r=0/0,u=0/0;return{lineStart:function(){n.lineStart(),t=1},point:function(i,o){var a=i>0?qa:-qa,c=ga(i-e);ga(c-qa)<Ca?(n.point(e,r=(r+o)/2>0?Ra:-Ra),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),n.point(i,r),t=0):u!==a&&c>=qa&&(ga(e-u)<Ca&&(e-=u*Ca),ga(i-a)<Ca&&(i-=a*Ca),r=Ue(e,r,i,o),n.point(u,r),n.lineEnd(),n.lineStart(),n.point(a,r),t=0),n.point(e=i,r=o),u=a},lineEnd:function(){n.lineEnd(),e=r=0/0},clean:function(){return 2-t}}}function Ue(n,t,e,r){var u,i,o=Math.sin(n-e);return ga(o)>Ca?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(e)-Math.sin(r)*(u=Math.cos(t))*Math.sin(n))/(u*i*o)):(t+r)/2}function je(n,t,e,r){var u;if(null==n)u=e*Ra,r.point(-qa,u),r.point(0,u),r.point(qa,u),r.point(qa,0),r.point(qa,-u),r.point(0,-u),r.point(-qa,-u),r.point(-qa,0),r.point(-qa,u);else if(ga(n[0]-t[0])>Ca){var i=n[0]<t[0]?qa:-qa;u=e*i/2,r.point(-i,u),r.point(0,u),r.point(i,u)}else r.point(t[0],t[1])}function Fe(n,t){var e=n[0],r=n[1],u=[Math.sin(e),-Math.cos(e),0],i=0,o=0;yc.reset();for(var a=0,c=t.length;c>a;++a){var l=t[a],s=l.length;if(s)for(var f=l[0],h=f[0],g=f[1]/2+qa/4,p=Math.sin(g),v=Math.cos(g),d=1;;){d===s&&(d=0),n=l[d];var m=n[0],y=n[1]/2+qa/4,M=Math.sin(y),x=Math.cos(y),b=m-h,_=b>=0?1:-1,w=_*b,S=w>qa,k=p*M;if(yc.add(Math.atan2(k*_*Math.sin(w),v*x+k*Math.cos(w))),i+=S?b+_*La:b,S^h>=e^m>=e){var E=de(pe(f),pe(n));Me(E);var A=de(u,E);Me(A);var N=(S^b>=0?-1:1)*tt(A[2]);(r>N||r===N&&(E[0]||E[1]))&&(o+=S^b>=0?1:-1)}if(!d++)break;h=m,p=M,v=x,f=n}}return(-Ca>i||Ca>i&&0>yc)^1&o}function He(n){function t(n,t){return Math.cos(n)*Math.cos(t)>i}function e(n){var e,i,c,l,s;return{lineStart:function(){l=c=!1,s=1},point:function(f,h){var g,p=[f,h],v=t(f,h),d=o?v?0:u(f,h):v?u(f+(0>f?qa:-qa),h):0;if(!e&&(l=c=v)&&n.lineStart(),v!==c&&(g=r(e,p),(be(e,g)||be(p,g))&&(p[0]+=Ca,p[1]+=Ca,v=t(p[0],p[1]))),v!==c)s=0,v?(n.lineStart(),g=r(p,e),n.point(g[0],g[1])):(g=r(e,p),n.point(g[0],g[1]),n.lineEnd()),e=g;else if(a&&e&&o^v){var m;d&i||!(m=r(p,e,!0))||(s=0,o?(n.lineStart(),n.point(m[0][0],m[0][1]),n.point(m[1][0],m[1][1]),n.lineEnd()):(n.point(m[1][0],m[1][1]),n.lineEnd(),n.lineStart(),n.point(m[0][0],m[0][1])))}!v||e&&be(e,p)||n.point(p[0],p[1]),e=p,c=v,i=d},lineEnd:function(){c&&n.lineEnd(),e=null},clean:function(){return s|(l&&c)<<1}}}function r(n,t,e){var r=pe(n),u=pe(t),o=[1,0,0],a=de(r,u),c=ve(a,a),l=a[0],s=c-l*l;if(!s)return!e&&n;var f=i*c/s,h=-i*l/s,g=de(o,a),p=ye(o,f),v=ye(a,h);me(p,v);var d=g,m=ve(p,d),y=ve(d,d),M=m*m-y*(ve(p,p)-1);if(!(0>M)){var x=Math.sqrt(M),b=ye(d,(-m-x)/y);if(me(b,p),b=xe(b),!e)return b;var _,w=n[0],S=t[0],k=n[1],E=t[1];w>S&&(_=w,w=S,S=_);var A=S-w,N=ga(A-qa)<Ca,C=N||Ca>A;if(!N&&k>E&&(_=k,k=E,E=_),C?N?k+E>0^b[1]<(ga(b[0]-w)<Ca?k:E):k<=b[1]&&b[1]<=E:A>qa^(w<=b[0]&&b[0]<=S)){var z=ye(d,(-m+x)/y);return me(z,p),[b,xe(z)]}}}function u(t,e){var r=o?n:qa-n,u=0;return-r>t?u|=1:t>r&&(u|=2),-r>e?u|=4:e>r&&(u|=8),u}var i=Math.cos(n),o=i>0,a=ga(i)>Ca,c=gr(n,6*Da);return Le(t,e,c,o?[0,-n]:[-qa,n-qa])}function Oe(n,t,e,r){return function(u){var i,o=u.a,a=u.b,c=o.x,l=o.y,s=a.x,f=a.y,h=0,g=1,p=s-c,v=f-l;if(i=n-c,p||!(i>0)){if(i/=p,0>p){if(h>i)return;g>i&&(g=i)}else if(p>0){if(i>g)return;i>h&&(h=i)}if(i=e-c,p||!(0>i)){if(i/=p,0>p){if(i>g)return;i>h&&(h=i)}else if(p>0){if(h>i)return;g>i&&(g=i)}if(i=t-l,v||!(i>0)){if(i/=v,0>v){if(h>i)return;g>i&&(g=i)}else if(v>0){if(i>g)return;i>h&&(h=i)}if(i=r-l,v||!(0>i)){if(i/=v,0>v){if(i>g)return;i>h&&(h=i)}else if(v>0){if(h>i)return;g>i&&(g=i)}return h>0&&(u.a={x:c+h*p,y:l+h*v}),1>g&&(u.b={x:c+g*p,y:l+g*v}),u}}}}}}function Ie(n,t,e,r){function u(r,u){return ga(r[0]-n)<Ca?u>0?0:3:ga(r[0]-e)<Ca?u>0?2:1:ga(r[1]-t)<Ca?u>0?1:0:u>0?3:2}function i(n,t){return o(n.x,t.x)}function o(n,t){var e=u(n,1),r=u(t,1);return e!==r?e-r:0===e?t[1]-n[1]:1===e?n[0]-t[0]:2===e?n[1]-t[1]:t[0]-n[0]}return function(a){function c(n){for(var t=0,e=d.length,r=n[1],u=0;e>u;++u)for(var i,o=1,a=d[u],c=a.length,l=a[0];c>o;++o)i=a[o],l[1]<=r?i[1]>r&&Q(l,i,n)>0&&++t:i[1]<=r&&Q(l,i,n)<0&&--t,l=i;return 0!==t}function l(i,a,c,l){var s=0,f=0;if(null==i||(s=u(i,c))!==(f=u(a,c))||o(i,a)<0^c>0){do l.point(0===s||3===s?n:e,s>1?r:t);while((s=(s+c+4)%4)!==f)}else l.point(a[0],a[1])}function s(u,i){return u>=n&&e>=u&&i>=t&&r>=i}function f(n,t){s(n,t)&&a.point(n,t)}function h(){C.point=p,d&&d.push(m=[]),S=!0,w=!1,b=_=0/0}function g(){v&&(p(y,M),x&&w&&A.rejoin(),v.push(A.buffer())),C.point=f,w&&a.lineEnd()}function p(n,t){n=Math.max(-Tc,Math.min(Tc,n)),t=Math.max(-Tc,Math.min(Tc,t));var e=s(n,t);if(d&&m.push([n,t]),S)y=n,M=t,x=e,S=!1,e&&(a.lineStart(),a.point(n,t));else if(e&&w)a.point(n,t);else{var r={a:{x:b,y:_},b:{x:n,y:t}};N(r)?(w||(a.lineStart(),a.point(r.a.x,r.a.y)),a.point(r.b.x,r.b.y),e||a.lineEnd(),k=!1):e&&(a.lineStart(),a.point(n,t),k=!1)}b=n,_=t,w=e}var v,d,m,y,M,x,b,_,w,S,k,E=a,A=Re(),N=Oe(n,t,e,r),C={point:f,lineStart:h,lineEnd:g,polygonStart:function(){a=A,v=[],d=[],k=!0},polygonEnd:function(){a=E,v=ta.merge(v);var t=c([n,r]),e=k&&t,u=v.length;(e||u)&&(a.polygonStart(),e&&(a.lineStart(),l(null,null,1,a),a.lineEnd()),u&&Ce(v,i,t,l,a),a.polygonEnd()),v=d=m=null}};return C}}function Ye(n){var t=0,e=qa/3,r=ir(n),u=r(t,e);return u.parallels=function(n){return arguments.length?r(t=n[0]*qa/180,e=n[1]*qa/180):[t/qa*180,e/qa*180]},u}function Ze(n,t){function e(n,t){var e=Math.sqrt(i-2*u*Math.sin(t))/u;return[e*Math.sin(n*=u),o-e*Math.cos(n)]}var r=Math.sin(n),u=(r+Math.sin(t))/2,i=1+r*(2*u-r),o=Math.sqrt(i)/u;return e.invert=function(n,t){var e=o-t;return[Math.atan2(n,e)/u,tt((i-(n*n+e*e)*u*u)/(2*u))]},e}function Ve(){function n(n,t){Dc+=u*n-r*t,r=n,u=t}var t,e,r,u;Hc.point=function(i,o){Hc.point=n,t=r=i,e=u=o},Hc.lineEnd=function(){n(t,e)}}function Xe(n,t){Pc>n&&(Pc=n),n>jc&&(jc=n),Uc>t&&(Uc=t),t>Fc&&(Fc=t)}function $e(){function n(n,t){o.push("M",n,",",t,i)}function t(n,t){o.push("M",n,",",t),a.point=e}function e(n,t){o.push("L",n,",",t)}function r(){a.point=n}function u(){o.push("Z")}var i=Be(4.5),o=[],a={point:n,lineStart:function(){a.point=t},lineEnd:r,polygonStart:function(){a.lineEnd=u},polygonEnd:function(){a.lineEnd=r,a.point=n},pointRadius:function(n){return i=Be(n),a},result:function(){if(o.length){var n=o.join("");return o=[],n}}};return a}function Be(n){return"m0,"+n+"a"+n+","+n+" 0 1,1 0,"+-2*n+"a"+n+","+n+" 0 1,1 0,"+2*n+"z"}function We(n,t){_c+=n,wc+=t,++Sc}function Je(){function n(n,r){var u=n-t,i=r-e,o=Math.sqrt(u*u+i*i);kc+=o*(t+n)/2,Ec+=o*(e+r)/2,Ac+=o,We(t=n,e=r)}var t,e;Ic.point=function(r,u){Ic.point=n,We(t=r,e=u)}}function Ge(){Ic.point=We}function Ke(){function n(n,t){var e=n-r,i=t-u,o=Math.sqrt(e*e+i*i);kc+=o*(r+n)/2,Ec+=o*(u+t)/2,Ac+=o,o=u*n-r*t,Nc+=o*(r+n),Cc+=o*(u+t),zc+=3*o,We(r=n,u=t)}var t,e,r,u;Ic.point=function(i,o){Ic.point=n,We(t=r=i,e=u=o)},Ic.lineEnd=function(){n(t,e)}}function Qe(n){function t(t,e){n.moveTo(t+o,e),n.arc(t,e,o,0,La)}function e(t,e){n.moveTo(t,e),a.point=r}function r(t,e){n.lineTo(t,e)}function u(){a.point=t}function i(){n.closePath()}var o=4.5,a={point:t,lineStart:function(){a.point=e},lineEnd:u,polygonStart:function(){a.lineEnd=i},polygonEnd:function(){a.lineEnd=u,a.point=t},pointRadius:function(n){return o=n,a},result:b};return a}function nr(n){function t(n){return(a?r:e)(n)}function e(t){return rr(t,function(e,r){e=n(e,r),t.point(e[0],e[1])})}function r(t){function e(e,r){e=n(e,r),t.point(e[0],e[1])}function r(){M=0/0,S.point=i,t.lineStart()}function i(e,r){var i=pe([e,r]),o=n(e,r);u(M,x,y,b,_,w,M=o[0],x=o[1],y=e,b=i[0],_=i[1],w=i[2],a,t),t.point(M,x)}function o(){S.point=e,t.lineEnd()}function c(){r(),S.point=l,S.lineEnd=s}function l(n,t){i(f=n,h=t),g=M,p=x,v=b,d=_,m=w,S.point=i}function s(){u(M,x,y,b,_,w,g,p,f,v,d,m,a,t),S.lineEnd=o,o()}var f,h,g,p,v,d,m,y,M,x,b,_,w,S={point:e,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),S.lineStart=c
},polygonEnd:function(){t.polygonEnd(),S.lineStart=r}};return S}function u(t,e,r,a,c,l,s,f,h,g,p,v,d,m){var y=s-t,M=f-e,x=y*y+M*M;if(x>4*i&&d--){var b=a+g,_=c+p,w=l+v,S=Math.sqrt(b*b+_*_+w*w),k=Math.asin(w/=S),E=ga(ga(w)-1)<Ca||ga(r-h)<Ca?(r+h)/2:Math.atan2(_,b),A=n(E,k),N=A[0],C=A[1],z=N-t,q=C-e,L=M*z-y*q;(L*L/x>i||ga((y*z+M*q)/x-.5)>.3||o>a*g+c*p+l*v)&&(u(t,e,r,a,c,l,N,C,E,b/=S,_/=S,w,d,m),m.point(N,C),u(N,C,E,b,_,w,s,f,h,g,p,v,d,m))}}var i=.5,o=Math.cos(30*Da),a=16;return t.precision=function(n){return arguments.length?(a=(i=n*n)>0&&16,t):Math.sqrt(i)},t}function tr(n){var t=nr(function(t,e){return n([t*Pa,e*Pa])});return function(n){return or(t(n))}}function er(n){this.stream=n}function rr(n,t){return{point:t,sphere:function(){n.sphere()},lineStart:function(){n.lineStart()},lineEnd:function(){n.lineEnd()},polygonStart:function(){n.polygonStart()},polygonEnd:function(){n.polygonEnd()}}}function ur(n){return ir(function(){return n})()}function ir(n){function t(n){return n=a(n[0]*Da,n[1]*Da),[n[0]*h+c,l-n[1]*h]}function e(n){return n=a.invert((n[0]-c)/h,(l-n[1])/h),n&&[n[0]*Pa,n[1]*Pa]}function r(){a=Ae(o=lr(m,M,x),i);var n=i(v,d);return c=g-n[0]*h,l=p+n[1]*h,u()}function u(){return s&&(s.valid=!1,s=null),t}var i,o,a,c,l,s,f=nr(function(n,t){return n=i(n,t),[n[0]*h+c,l-n[1]*h]}),h=150,g=480,p=250,v=0,d=0,m=0,M=0,x=0,b=Lc,_=y,w=null,S=null;return t.stream=function(n){return s&&(s.valid=!1),s=or(b(o,f(_(n)))),s.valid=!0,s},t.clipAngle=function(n){return arguments.length?(b=null==n?(w=n,Lc):He((w=+n)*Da),u()):w},t.clipExtent=function(n){return arguments.length?(S=n,_=n?Ie(n[0][0],n[0][1],n[1][0],n[1][1]):y,u()):S},t.scale=function(n){return arguments.length?(h=+n,r()):h},t.translate=function(n){return arguments.length?(g=+n[0],p=+n[1],r()):[g,p]},t.center=function(n){return arguments.length?(v=n[0]%360*Da,d=n[1]%360*Da,r()):[v*Pa,d*Pa]},t.rotate=function(n){return arguments.length?(m=n[0]%360*Da,M=n[1]%360*Da,x=n.length>2?n[2]%360*Da:0,r()):[m*Pa,M*Pa,x*Pa]},ta.rebind(t,f,"precision"),function(){return i=n.apply(this,arguments),t.invert=i.invert&&e,r()}}function or(n){return rr(n,function(t,e){n.point(t*Da,e*Da)})}function ar(n,t){return[n,t]}function cr(n,t){return[n>qa?n-La:-qa>n?n+La:n,t]}function lr(n,t,e){return n?t||e?Ae(fr(n),hr(t,e)):fr(n):t||e?hr(t,e):cr}function sr(n){return function(t,e){return t+=n,[t>qa?t-La:-qa>t?t+La:t,e]}}function fr(n){var t=sr(n);return t.invert=sr(-n),t}function hr(n,t){function e(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*r+a*u;return[Math.atan2(c*i-s*o,a*r-l*u),tt(s*i+c*o)]}var r=Math.cos(n),u=Math.sin(n),i=Math.cos(t),o=Math.sin(t);return e.invert=function(n,t){var e=Math.cos(t),a=Math.cos(n)*e,c=Math.sin(n)*e,l=Math.sin(t),s=l*i-c*o;return[Math.atan2(c*i+l*o,a*r+s*u),tt(s*r-a*u)]},e}function gr(n,t){var e=Math.cos(n),r=Math.sin(n);return function(u,i,o,a){var c=o*t;null!=u?(u=pr(e,u),i=pr(e,i),(o>0?i>u:u>i)&&(u+=o*La)):(u=n+o*La,i=n-.5*c);for(var l,s=u;o>0?s>i:i>s;s-=c)a.point((l=xe([e,-r*Math.cos(s),-r*Math.sin(s)]))[0],l[1])}}function pr(n,t){var e=pe(t);e[0]-=n,Me(e);var r=nt(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Ca)%(2*Math.PI)}function vr(n,t,e){var r=ta.range(n,t-Ca,e).concat(t);return function(n){return r.map(function(t){return[n,t]})}}function dr(n,t,e){var r=ta.range(n,t-Ca,e).concat(t);return function(n){return r.map(function(t){return[t,n]})}}function mr(n){return n.source}function yr(n){return n.target}function Mr(n,t,e,r){var u=Math.cos(t),i=Math.sin(t),o=Math.cos(r),a=Math.sin(r),c=u*Math.cos(n),l=u*Math.sin(n),s=o*Math.cos(e),f=o*Math.sin(e),h=2*Math.asin(Math.sqrt(it(r-t)+u*o*it(e-n))),g=1/Math.sin(h),p=h?function(n){var t=Math.sin(n*=h)*g,e=Math.sin(h-n)*g,r=e*c+t*s,u=e*l+t*f,o=e*i+t*a;return[Math.atan2(u,r)*Pa,Math.atan2(o,Math.sqrt(r*r+u*u))*Pa]}:function(){return[n*Pa,t*Pa]};return p.distance=h,p}function xr(){function n(n,u){var i=Math.sin(u*=Da),o=Math.cos(u),a=ga((n*=Da)-t),c=Math.cos(a);Yc+=Math.atan2(Math.sqrt((a=o*Math.sin(a))*a+(a=r*i-e*o*c)*a),e*i+r*o*c),t=n,e=i,r=o}var t,e,r;Zc.point=function(u,i){t=u*Da,e=Math.sin(i*=Da),r=Math.cos(i),Zc.point=n},Zc.lineEnd=function(){Zc.point=Zc.lineEnd=b}}function br(n,t){function e(t,e){var r=Math.cos(t),u=Math.cos(e),i=n(r*u);return[i*u*Math.sin(t),i*Math.sin(e)]}return e.invert=function(n,e){var r=Math.sqrt(n*n+e*e),u=t(r),i=Math.sin(u),o=Math.cos(u);return[Math.atan2(n*i,r*o),Math.asin(r&&e*i/r)]},e}function _r(n,t){function e(n,t){o>0?-Ra+Ca>t&&(t=-Ra+Ca):t>Ra-Ca&&(t=Ra-Ca);var e=o/Math.pow(u(t),i);return[e*Math.sin(i*n),o-e*Math.cos(i*n)]}var r=Math.cos(n),u=function(n){return Math.tan(qa/4+n/2)},i=n===t?Math.sin(n):Math.log(r/Math.cos(t))/Math.log(u(t)/u(n)),o=r*Math.pow(u(n),i)/i;return i?(e.invert=function(n,t){var e=o-t,r=K(i)*Math.sqrt(n*n+e*e);return[Math.atan2(n,e)/i,2*Math.atan(Math.pow(o/r,1/i))-Ra]},e):Sr}function wr(n,t){function e(n,t){var e=i-t;return[e*Math.sin(u*n),i-e*Math.cos(u*n)]}var r=Math.cos(n),u=n===t?Math.sin(n):(r-Math.cos(t))/(t-n),i=r/u+n;return ga(u)<Ca?ar:(e.invert=function(n,t){var e=i-t;return[Math.atan2(n,e)/u,i-K(u)*Math.sqrt(n*n+e*e)]},e)}function Sr(n,t){return[n,Math.log(Math.tan(qa/4+t/2))]}function kr(n){var t,e=ur(n),r=e.scale,u=e.translate,i=e.clipExtent;return e.scale=function(){var n=r.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.translate=function(){var n=u.apply(e,arguments);return n===e?t?e.clipExtent(null):e:n},e.clipExtent=function(n){var o=i.apply(e,arguments);if(o===e){if(t=null==n){var a=qa*r(),c=u();i([[c[0]-a,c[1]-a],[c[0]+a,c[1]+a]])}}else t&&(o=null);return o},e.clipExtent(null)}function Er(n,t){return[Math.log(Math.tan(qa/4+t/2)),-n]}function Ar(n){return n[0]}function Nr(n){return n[1]}function Cr(n){for(var t=n.length,e=[0,1],r=2,u=2;t>u;u++){for(;r>1&&Q(n[e[r-2]],n[e[r-1]],n[u])<=0;)--r;e[r++]=u}return e.slice(0,r)}function zr(n,t){return n[0]-t[0]||n[1]-t[1]}function qr(n,t,e){return(e[0]-t[0])*(n[1]-t[1])<(e[1]-t[1])*(n[0]-t[0])}function Lr(n,t,e,r){var u=n[0],i=e[0],o=t[0]-u,a=r[0]-i,c=n[1],l=e[1],s=t[1]-c,f=r[1]-l,h=(a*(c-l)-f*(u-i))/(f*o-a*s);return[u+h*o,c+h*s]}function Tr(n){var t=n[0],e=n[n.length-1];return!(t[0]-e[0]||t[1]-e[1])}function Rr(){tu(this),this.edge=this.site=this.circle=null}function Dr(n){var t=el.pop()||new Rr;return t.site=n,t}function Pr(n){Xr(n),Qc.remove(n),el.push(n),tu(n)}function Ur(n){var t=n.circle,e=t.x,r=t.cy,u={x:e,y:r},i=n.P,o=n.N,a=[n];Pr(n);for(var c=i;c.circle&&ga(e-c.circle.x)<Ca&&ga(r-c.circle.cy)<Ca;)i=c.P,a.unshift(c),Pr(c),c=i;a.unshift(c),Xr(c);for(var l=o;l.circle&&ga(e-l.circle.x)<Ca&&ga(r-l.circle.cy)<Ca;)o=l.N,a.push(l),Pr(l),l=o;a.push(l),Xr(l);var s,f=a.length;for(s=1;f>s;++s)l=a[s],c=a[s-1],Kr(l.edge,c.site,l.site,u);c=a[0],l=a[f-1],l.edge=Jr(c.site,l.site,null,u),Vr(c),Vr(l)}function jr(n){for(var t,e,r,u,i=n.x,o=n.y,a=Qc._;a;)if(r=Fr(a,o)-i,r>Ca)a=a.L;else{if(u=i-Hr(a,o),!(u>Ca)){r>-Ca?(t=a.P,e=a):u>-Ca?(t=a,e=a.N):t=e=a;break}if(!a.R){t=a;break}a=a.R}var c=Dr(n);if(Qc.insert(t,c),t||e){if(t===e)return Xr(t),e=Dr(t.site),Qc.insert(c,e),c.edge=e.edge=Jr(t.site,c.site),Vr(t),void Vr(e);if(!e)return void(c.edge=Jr(t.site,c.site));Xr(t),Xr(e);var l=t.site,s=l.x,f=l.y,h=n.x-s,g=n.y-f,p=e.site,v=p.x-s,d=p.y-f,m=2*(h*d-g*v),y=h*h+g*g,M=v*v+d*d,x={x:(d*y-g*M)/m+s,y:(h*M-v*y)/m+f};Kr(e.edge,l,p,x),c.edge=Jr(l,n,null,x),e.edge=Jr(n,p,null,x),Vr(t),Vr(e)}}function Fr(n,t){var e=n.site,r=e.x,u=e.y,i=u-t;if(!i)return r;var o=n.P;if(!o)return-1/0;e=o.site;var a=e.x,c=e.y,l=c-t;if(!l)return a;var s=a-r,f=1/i-1/l,h=s/l;return f?(-h+Math.sqrt(h*h-2*f*(s*s/(-2*l)-c+l/2+u-i/2)))/f+r:(r+a)/2}function Hr(n,t){var e=n.N;if(e)return Fr(e,t);var r=n.site;return r.y===t?r.x:1/0}function Or(n){this.site=n,this.edges=[]}function Ir(n){for(var t,e,r,u,i,o,a,c,l,s,f=n[0][0],h=n[1][0],g=n[0][1],p=n[1][1],v=Kc,d=v.length;d--;)if(i=v[d],i&&i.prepare())for(a=i.edges,c=a.length,o=0;c>o;)s=a[o].end(),r=s.x,u=s.y,l=a[++o%c].start(),t=l.x,e=l.y,(ga(r-t)>Ca||ga(u-e)>Ca)&&(a.splice(o,0,new Qr(Gr(i.site,s,ga(r-f)<Ca&&p-u>Ca?{x:f,y:ga(t-f)<Ca?e:p}:ga(u-p)<Ca&&h-r>Ca?{x:ga(e-p)<Ca?t:h,y:p}:ga(r-h)<Ca&&u-g>Ca?{x:h,y:ga(t-h)<Ca?e:g}:ga(u-g)<Ca&&r-f>Ca?{x:ga(e-g)<Ca?t:f,y:g}:null),i.site,null)),++c)}function Yr(n,t){return t.angle-n.angle}function Zr(){tu(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vr(n){var t=n.P,e=n.N;if(t&&e){var r=t.site,u=n.site,i=e.site;if(r!==i){var o=u.x,a=u.y,c=r.x-o,l=r.y-a,s=i.x-o,f=i.y-a,h=2*(c*f-l*s);if(!(h>=-za)){var g=c*c+l*l,p=s*s+f*f,v=(f*g-l*p)/h,d=(c*p-s*g)/h,f=d+a,m=rl.pop()||new Zr;m.arc=n,m.site=u,m.x=v+o,m.y=f+Math.sqrt(v*v+d*d),m.cy=f,n.circle=m;for(var y=null,M=tl._;M;)if(m.y<M.y||m.y===M.y&&m.x<=M.x){if(!M.L){y=M.P;break}M=M.L}else{if(!M.R){y=M;break}M=M.R}tl.insert(y,m),y||(nl=m)}}}}function Xr(n){var t=n.circle;t&&(t.P||(nl=t.N),tl.remove(t),rl.push(t),tu(t),n.circle=null)}function $r(n){for(var t,e=Gc,r=Oe(n[0][0],n[0][1],n[1][0],n[1][1]),u=e.length;u--;)t=e[u],(!Br(t,n)||!r(t)||ga(t.a.x-t.b.x)<Ca&&ga(t.a.y-t.b.y)<Ca)&&(t.a=t.b=null,e.splice(u,1))}function Br(n,t){var e=n.b;if(e)return!0;var r,u,i=n.a,o=t[0][0],a=t[1][0],c=t[0][1],l=t[1][1],s=n.l,f=n.r,h=s.x,g=s.y,p=f.x,v=f.y,d=(h+p)/2,m=(g+v)/2;if(v===g){if(o>d||d>=a)return;if(h>p){if(i){if(i.y>=l)return}else i={x:d,y:c};e={x:d,y:l}}else{if(i){if(i.y<c)return}else i={x:d,y:l};e={x:d,y:c}}}else if(r=(h-p)/(v-g),u=m-r*d,-1>r||r>1)if(h>p){if(i){if(i.y>=l)return}else i={x:(c-u)/r,y:c};e={x:(l-u)/r,y:l}}else{if(i){if(i.y<c)return}else i={x:(l-u)/r,y:l};e={x:(c-u)/r,y:c}}else if(v>g){if(i){if(i.x>=a)return}else i={x:o,y:r*o+u};e={x:a,y:r*a+u}}else{if(i){if(i.x<o)return}else i={x:a,y:r*a+u};e={x:o,y:r*o+u}}return n.a=i,n.b=e,!0}function Wr(n,t){this.l=n,this.r=t,this.a=this.b=null}function Jr(n,t,e,r){var u=new Wr(n,t);return Gc.push(u),e&&Kr(u,n,t,e),r&&Kr(u,t,n,r),Kc[n.i].edges.push(new Qr(u,n,t)),Kc[t.i].edges.push(new Qr(u,t,n)),u}function Gr(n,t,e){var r=new Wr(n,null);return r.a=t,r.b=e,Gc.push(r),r}function Kr(n,t,e,r){n.a||n.b?n.l===e?n.b=r:n.a=r:(n.a=r,n.l=t,n.r=e)}function Qr(n,t,e){var r=n.a,u=n.b;this.edge=n,this.site=t,this.angle=e?Math.atan2(e.y-t.y,e.x-t.x):n.l===t?Math.atan2(u.x-r.x,r.y-u.y):Math.atan2(r.x-u.x,u.y-r.y)}function nu(){this._=null}function tu(n){n.U=n.C=n.L=n.R=n.P=n.N=null}function eu(n,t){var e=t,r=t.R,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function ru(n,t){var e=t,r=t.L,u=e.U;u?u.L===e?u.L=r:u.R=r:n._=r,r.U=u,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function uu(n){for(;n.L;)n=n.L;return n}function iu(n,t){var e,r,u,i=n.sort(ou).pop();for(Gc=[],Kc=new Array(n.length),Qc=new nu,tl=new nu;;)if(u=nl,i&&(!u||i.y<u.y||i.y===u.y&&i.x<u.x))(i.x!==e||i.y!==r)&&(Kc[i.i]=new Or(i),jr(i),e=i.x,r=i.y),i=n.pop();else{if(!u)break;Ur(u.arc)}t&&($r(t),Ir(t));var o={cells:Kc,edges:Gc};return Qc=tl=Gc=Kc=null,o}function ou(n,t){return t.y-n.y||t.x-n.x}function au(n,t,e){return(n.x-e.x)*(t.y-n.y)-(n.x-t.x)*(e.y-n.y)}function cu(n){return n.x}function lu(n){return n.y}function su(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function fu(n,t,e,r,u,i){if(!n(t,e,r,u,i)){var o=.5*(e+u),a=.5*(r+i),c=t.nodes;c[0]&&fu(n,c[0],e,r,o,a),c[1]&&fu(n,c[1],o,r,u,a),c[2]&&fu(n,c[2],e,a,o,i),c[3]&&fu(n,c[3],o,a,u,i)}}function hu(n,t,e,r,u,i,o){var a,c=1/0;return function l(n,s,f,h,g){if(!(s>i||f>o||r>h||u>g)){if(p=n.point){var p,v=t-n.x,d=e-n.y,m=v*v+d*d;if(c>m){var y=Math.sqrt(c=m);r=t-y,u=e-y,i=t+y,o=e+y,a=p}}for(var M=n.nodes,x=.5*(s+h),b=.5*(f+g),_=t>=x,w=e>=b,S=w<<1|_,k=S+4;k>S;++S)if(n=M[3&S])switch(3&S){case 0:l(n,s,f,x,b);break;case 1:l(n,x,f,h,b);break;case 2:l(n,s,b,x,g);break;case 3:l(n,x,b,h,g)}}}(n,r,u,i,o),a}function gu(n,t){n=ta.rgb(n),t=ta.rgb(t);var e=n.r,r=n.g,u=n.b,i=t.r-e,o=t.g-r,a=t.b-u;return function(n){return"#"+xt(Math.round(e+i*n))+xt(Math.round(r+o*n))+xt(Math.round(u+a*n))}}function pu(n,t){var e,r={},u={};for(e in n)e in t?r[e]=mu(n[e],t[e]):u[e]=n[e];for(e in t)e in n||(u[e]=t[e]);return function(n){for(e in r)u[e]=r[e](n);return u}}function vu(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function du(n,t){var e,r,u,i=il.lastIndex=ol.lastIndex=0,o=-1,a=[],c=[];for(n+="",t+="";(e=il.exec(n))&&(r=ol.exec(t));)(u=r.index)>i&&(u=t.slice(i,u),a[o]?a[o]+=u:a[++o]=u),(e=e[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,c.push({i:o,x:vu(e,r)})),i=ol.lastIndex;return i<t.length&&(u=t.slice(i),a[o]?a[o]+=u:a[++o]=u),a.length<2?c[0]?(t=c[0].x,function(n){return t(n)+""}):function(){return t}:(t=c.length,function(n){for(var e,r=0;t>r;++r)a[(e=c[r]).i]=e.x(n);return a.join("")})}function mu(n,t){for(var e,r=ta.interpolators.length;--r>=0&&!(e=ta.interpolators[r](n,t)););return e}function yu(n,t){var e,r=[],u=[],i=n.length,o=t.length,a=Math.min(n.length,t.length);for(e=0;a>e;++e)r.push(mu(n[e],t[e]));for(;i>e;++e)u[e]=n[e];for(;o>e;++e)u[e]=t[e];return function(n){for(e=0;a>e;++e)u[e]=r[e](n);return u}}function Mu(n){return function(t){return 0>=t?0:t>=1?1:n(t)}}function xu(n){return function(t){return 1-n(1-t)}}function bu(n){return function(t){return.5*(.5>t?n(2*t):2-n(2-2*t))}}function _u(n){return n*n}function wu(n){return n*n*n}function Su(n){if(0>=n)return 0;if(n>=1)return 1;var t=n*n,e=t*n;return 4*(.5>n?e:3*(n-t)+e-.75)}function ku(n){return function(t){return Math.pow(t,n)}}function Eu(n){return 1-Math.cos(n*Ra)}function Au(n){return Math.pow(2,10*(n-1))}function Nu(n){return 1-Math.sqrt(1-n*n)}function Cu(n,t){var e;return arguments.length<2&&(t=.45),arguments.length?e=t/La*Math.asin(1/n):(n=1,e=t/4),function(r){return 1+n*Math.pow(2,-10*r)*Math.sin((r-e)*La/t)}}function zu(n){return n||(n=1.70158),function(t){return t*t*((n+1)*t-n)}}function qu(n){return 1/2.75>n?7.5625*n*n:2/2.75>n?7.5625*(n-=1.5/2.75)*n+.75:2.5/2.75>n?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375}function Lu(n,t){n=ta.hcl(n),t=ta.hcl(t);var e=n.h,r=n.c,u=n.l,i=t.h-e,o=t.c-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return st(e+i*n,r+o*n,u+a*n)+""}}function Tu(n,t){n=ta.hsl(n),t=ta.hsl(t);var e=n.h,r=n.s,u=n.l,i=t.h-e,o=t.s-r,a=t.l-u;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,e=isNaN(e)?t.h:e):i>180?i-=360:-180>i&&(i+=360),function(n){return ct(e+i*n,r+o*n,u+a*n)+""}}function Ru(n,t){n=ta.lab(n),t=ta.lab(t);var e=n.l,r=n.a,u=n.b,i=t.l-e,o=t.a-r,a=t.b-u;return function(n){return ht(e+i*n,r+o*n,u+a*n)+""}}function Du(n,t){return t-=n,function(e){return Math.round(n+t*e)}}function Pu(n){var t=[n.a,n.b],e=[n.c,n.d],r=ju(t),u=Uu(t,e),i=ju(Fu(e,t,-u))||0;t[0]*e[1]<e[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,u*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-e[0],e[1]))*Pa,this.translate=[n.e,n.f],this.scale=[r,i],this.skew=i?Math.atan2(u,i)*Pa:0}function Uu(n,t){return n[0]*t[0]+n[1]*t[1]}function ju(n){var t=Math.sqrt(Uu(n,n));return t&&(n[0]/=t,n[1]/=t),t}function Fu(n,t,e){return n[0]+=e*t[0],n[1]+=e*t[1],n}function Hu(n,t){var e,r=[],u=[],i=ta.transform(n),o=ta.transform(t),a=i.translate,c=o.translate,l=i.rotate,s=o.rotate,f=i.skew,h=o.skew,g=i.scale,p=o.scale;return a[0]!=c[0]||a[1]!=c[1]?(r.push("translate(",null,",",null,")"),u.push({i:1,x:vu(a[0],c[0])},{i:3,x:vu(a[1],c[1])})):r.push(c[0]||c[1]?"translate("+c+")":""),l!=s?(l-s>180?s+=360:s-l>180&&(l+=360),u.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:vu(l,s)})):s&&r.push(r.pop()+"rotate("+s+")"),f!=h?u.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:vu(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),g[0]!=p[0]||g[1]!=p[1]?(e=r.push(r.pop()+"scale(",null,",",null,")"),u.push({i:e-4,x:vu(g[0],p[0])},{i:e-2,x:vu(g[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),e=u.length,function(n){for(var t,i=-1;++i<e;)r[(t=u[i]).i]=t.x(n);return r.join("")}}function Ou(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function Iu(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function Yu(n){for(var t=n.source,e=n.target,r=Vu(t,e),u=[t];t!==r;)t=t.parent,u.push(t);for(var i=u.length;e!==r;)u.splice(i,0,e),e=e.parent;return u}function Zu(n){for(var t=[],e=n.parent;null!=e;)t.push(n),n=e,e=e.parent;return t.push(n),t}function Vu(n,t){if(n===t)return n;for(var e=Zu(n),r=Zu(t),u=e.pop(),i=r.pop(),o=null;u===i;)o=u,u=e.pop(),i=r.pop();return o}function Xu(n){n.fixed|=2}function $u(n){n.fixed&=-7}function Bu(n){n.fixed|=4,n.px=n.x,n.py=n.y}function Wu(n){n.fixed&=-5}function Ju(n,t,e){var r=0,u=0;if(n.charge=0,!n.leaf)for(var i,o=n.nodes,a=o.length,c=-1;++c<a;)i=o[c],null!=i&&(Ju(i,t,e),n.charge+=i.charge,r+=i.charge*i.cx,u+=i.charge*i.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var l=t*e[n.point.index];n.charge+=n.pointCharge=l,r+=l*n.point.x,u+=l*n.point.y}n.cx=r/n.charge,n.cy=u/n.charge}function Gu(n,t){return ta.rebind(n,t,"sort","children","value"),n.nodes=n,n.links=ri,n}function Ku(n,t){for(var e=[n];null!=(n=e.pop());)if(t(n),(u=n.children)&&(r=u.length))for(var r,u;--r>=0;)e.push(u[r])}function Qu(n,t){for(var e=[n],r=[];null!=(n=e.pop());)if(r.push(n),(i=n.children)&&(u=i.length))for(var u,i,o=-1;++o<u;)e.push(i[o]);for(;null!=(n=r.pop());)t(n)}function ni(n){return n.children}function ti(n){return n.value}function ei(n,t){return t.value-n.value}function ri(n){return ta.merge(n.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}function ui(n){return n.x}function ii(n){return n.y}function oi(n,t,e){n.y0=t,n.y=e}function ai(n){return ta.range(n.length)}function ci(n){for(var t=-1,e=n[0].length,r=[];++t<e;)r[t]=0;return r}function li(n){for(var t,e=1,r=0,u=n[0][1],i=n.length;i>e;++e)(t=n[e][1])>u&&(r=e,u=t);return r}function si(n){return n.reduce(fi,0)}function fi(n,t){return n+t[1]}function hi(n,t){return gi(n,Math.ceil(Math.log(t.length)/Math.LN2+1))}function gi(n,t){for(var e=-1,r=+n[0],u=(n[1]-r)/t,i=[];++e<=t;)i[e]=u*e+r;return i}function pi(n){return[ta.min(n),ta.max(n)]}function vi(n,t){return n.value-t.value}function di(n,t){var e=n._pack_next;n._pack_next=t,t._pack_prev=n,t._pack_next=e,e._pack_prev=t}function mi(n,t){n._pack_next=t,t._pack_prev=n}function yi(n,t){var e=t.x-n.x,r=t.y-n.y,u=n.r+t.r;return.999*u*u>e*e+r*r}function Mi(n){function t(n){s=Math.min(n.x-n.r,s),f=Math.max(n.x+n.r,f),h=Math.min(n.y-n.r,h),g=Math.max(n.y+n.r,g)}if((e=n.children)&&(l=e.length)){var e,r,u,i,o,a,c,l,s=1/0,f=-1/0,h=1/0,g=-1/0;if(e.forEach(xi),r=e[0],r.x=-r.r,r.y=0,t(r),l>1&&(u=e[1],u.x=u.r,u.y=0,t(u),l>2))for(i=e[2],wi(r,u,i),t(i),di(r,i),r._pack_prev=i,di(i,u),u=r._pack_next,o=3;l>o;o++){wi(r,u,i=e[o]);var p=0,v=1,d=1;for(a=u._pack_next;a!==u;a=a._pack_next,v++)if(yi(a,i)){p=1;break}if(1==p)for(c=r._pack_prev;c!==a._pack_prev&&!yi(c,i);c=c._pack_prev,d++);p?(d>v||v==d&&u.r<r.r?mi(r,u=a):mi(r=c,u),o--):(di(r,i),u=i,t(i))}var m=(s+f)/2,y=(h+g)/2,M=0;for(o=0;l>o;o++)i=e[o],i.x-=m,i.y-=y,M=Math.max(M,i.r+Math.sqrt(i.x*i.x+i.y*i.y));n.r=M,e.forEach(bi)}}function xi(n){n._pack_next=n._pack_prev=n}function bi(n){delete n._pack_next,delete n._pack_prev}function _i(n,t,e,r){var u=n.children;if(n.x=t+=r*n.x,n.y=e+=r*n.y,n.r*=r,u)for(var i=-1,o=u.length;++i<o;)_i(u[i],t,e,r)}function wi(n,t,e){var r=n.r+e.r,u=t.x-n.x,i=t.y-n.y;if(r&&(u||i)){var o=t.r+e.r,a=u*u+i*i;o*=o,r*=r;var c=.5+(r-o)/(2*a),l=Math.sqrt(Math.max(0,2*o*(r+a)-(r-=a)*r-o*o))/(2*a);e.x=n.x+c*u+l*i,e.y=n.y+c*i-l*u}else e.x=n.x+r,e.y=n.y}function Si(n,t){return n.parent==t.parent?1:2}function ki(n){var t=n.children;return t.length?t[0]:n.t}function Ei(n){var t,e=n.children;return(t=e.length)?e[t-1]:n.t}function Ai(n,t,e){var r=e/(t.i-n.i);t.c-=r,t.s+=e,n.c+=r,t.z+=e,t.m+=e}function Ni(n){for(var t,e=0,r=0,u=n.children,i=u.length;--i>=0;)t=u[i],t.z+=e,t.m+=e,e+=t.s+(r+=t.c)}function Ci(n,t,e){return n.a.parent===t.parent?n.a:e}function zi(n){return 1+ta.max(n,function(n){return n.y})}function qi(n){return n.reduce(function(n,t){return n+t.x},0)/n.length}function Li(n){var t=n.children;return t&&t.length?Li(t[0]):n}function Ti(n){var t,e=n.children;return e&&(t=e.length)?Ti(e[t-1]):n}function Ri(n){return{x:n.x,y:n.y,dx:n.dx,dy:n.dy}}function Di(n,t){var e=n.x+t[3],r=n.y+t[0],u=n.dx-t[1]-t[3],i=n.dy-t[0]-t[2];return 0>u&&(e+=u/2,u=0),0>i&&(r+=i/2,i=0),{x:e,y:r,dx:u,dy:i}}function Pi(n){var t=n[0],e=n[n.length-1];return e>t?[t,e]:[e,t]}function Ui(n){return n.rangeExtent?n.rangeExtent():Pi(n.range())}function ji(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function Fi(n,t){var e,r=0,u=n.length-1,i=n[r],o=n[u];return i>o&&(e=r,r=u,u=e,e=i,i=o,o=e),n[r]=t.floor(i),n[u]=t.ceil(o),n}function Hi(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:ml}function Oi(n,t,e,r){var u=[],i=[],o=0,a=Math.min(n.length,t.length)-1;for(n[a]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<=a;)u.push(e(n[o-1],n[o])),i.push(r(t[o-1],t[o]));return function(t){var e=ta.bisect(n,t,1,a)-1;return i[e](u[e](t))}}function Ii(n,t,e,r){function u(){var u=Math.min(n.length,t.length)>2?Oi:ji,c=r?Iu:Ou;return o=u(n,t,c,e),a=u(t,n,c,mu),i}function i(n){return o(n)}var o,a;return i.invert=function(n){return a(n)},i.domain=function(t){return arguments.length?(n=t.map(Number),u()):n},i.range=function(n){return arguments.length?(t=n,u()):t},i.rangeRound=function(n){return i.range(n).interpolate(Du)},i.clamp=function(n){return arguments.length?(r=n,u()):r},i.interpolate=function(n){return arguments.length?(e=n,u()):e},i.ticks=function(t){return Xi(n,t)},i.tickFormat=function(t,e){return $i(n,t,e)},i.nice=function(t){return Zi(n,t),u()},i.copy=function(){return Ii(n,t,e,r)},u()}function Yi(n,t){return ta.rebind(n,t,"range","rangeRound","interpolate","clamp")}function Zi(n,t){return Fi(n,Hi(Vi(n,t)[2]))}function Vi(n,t){null==t&&(t=10);var e=Pi(n),r=e[1]-e[0],u=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*u;return.15>=i?u*=10:.35>=i?u*=5:.75>=i&&(u*=2),e[0]=Math.ceil(e[0]/u)*u,e[1]=Math.floor(e[1]/u)*u+.5*u,e[2]=u,e}function Xi(n,t){return ta.range.apply(ta,Vi(n,t))}function $i(n,t,e){var r=Vi(n,t);if(e){var u=ic.exec(e);if(u.shift(),"s"===u[8]){var i=ta.formatPrefix(Math.max(ga(r[0]),ga(r[1])));return u[7]||(u[7]="."+Bi(i.scale(r[2]))),u[8]="f",e=ta.format(u.join("")),function(n){return e(i.scale(n))+i.symbol}}u[7]||(u[7]="."+Wi(u[8],r)),e=u.join("")}else e=",."+Bi(r[2])+"f";return ta.format(e)}function Bi(n){return-Math.floor(Math.log(n)/Math.LN10+.01)}function Wi(n,t){var e=Bi(t[2]);return n in yl?Math.abs(e-Bi(Math.max(ga(t[0]),ga(t[1]))))+ +("e"!==n):e-2*("%"===n)}function Ji(n,t,e,r){function u(n){return(e?Math.log(0>n?0:n):-Math.log(n>0?0:-n))/Math.log(t)}function i(n){return e?Math.pow(t,n):-Math.pow(t,-n)}function o(t){return n(u(t))}return o.invert=function(t){return i(n.invert(t))},o.domain=function(t){return arguments.length?(e=t[0]>=0,n.domain((r=t.map(Number)).map(u)),o):r},o.base=function(e){return arguments.length?(t=+e,n.domain(r.map(u)),o):t},o.nice=function(){var t=Fi(r.map(u),e?Math:xl);return n.domain(t),r=t.map(i),o},o.ticks=function(){var n=Pi(r),o=[],a=n[0],c=n[1],l=Math.floor(u(a)),s=Math.ceil(u(c)),f=t%1?2:t;if(isFinite(s-l)){if(e){for(;s>l;l++)for(var h=1;f>h;h++)o.push(i(l)*h);o.push(i(l))}else for(o.push(i(l));l++<s;)for(var h=f-1;h>0;h--)o.push(i(l)*h);for(l=0;o[l]<a;l++);for(s=o.length;o[s-1]>c;s--);o=o.slice(l,s)}return o},o.tickFormat=function(n,t){if(!arguments.length)return Ml;arguments.length<2?t=Ml:"function"!=typeof t&&(t=ta.format(t));var r,a=Math.max(.1,n/o.ticks().length),c=e?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(n){return n/i(c(u(n)+r))<=a?t(n):""}},o.copy=function(){return Ji(n.copy(),t,e,r)},Yi(o,n)}function Gi(n,t,e){function r(t){return n(u(t))}var u=Ki(t),i=Ki(1/t);return r.invert=function(t){return i(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain((e=t.map(Number)).map(u)),r):e},r.ticks=function(n){return Xi(e,n)},r.tickFormat=function(n,t){return $i(e,n,t)},r.nice=function(n){return r.domain(Zi(e,n))},r.exponent=function(o){return arguments.length?(u=Ki(t=o),i=Ki(1/t),n.domain(e.map(u)),r):t},r.copy=function(){return Gi(n.copy(),t,e)},Yi(r,n)}function Ki(n){return function(t){return 0>t?-Math.pow(-t,n):Math.pow(t,n)}}function Qi(n,t){function e(e){return i[((u.get(e)||("range"===t.t?u.set(e,n.push(e)):0/0))-1)%i.length]}function r(t,e){return ta.range(n.length).map(function(n){return t+e*n})}var u,i,o;return e.domain=function(r){if(!arguments.length)return n;n=[],u=new l;for(var i,o=-1,a=r.length;++o<a;)u.has(i=r[o])||u.set(i,n.push(i));return e[t.t].apply(e,t.a)},e.range=function(n){return arguments.length?(i=n,o=0,t={t:"range",a:arguments},e):i},e.rangePoints=function(u,a){arguments.length<2&&(a=0);var c=u[0],l=u[1],s=n.length<2?(c=(c+l)/2,0):(l-c)/(n.length-1+a);return i=r(c+s*a/2,s),o=0,t={t:"rangePoints",a:arguments},e},e.rangeRoundPoints=function(u,a){arguments.length<2&&(a=0);var c=u[0],l=u[1],s=n.length<2?(c=l=Math.round((c+l)/2),0):(l-c)/(n.length-1+a)|0;return i=r(c+Math.round(s*a/2+(l-c-(n.length-1+a)*s)/2),s),o=0,t={t:"rangeRoundPoints",a:arguments},e},e.rangeBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=(f-s)/(n.length-a+2*c);return i=r(s+h*c,h),l&&i.reverse(),o=h*(1-a),t={t:"rangeBands",a:arguments},e},e.rangeRoundBands=function(u,a,c){arguments.length<2&&(a=0),arguments.length<3&&(c=a);var l=u[1]<u[0],s=u[l-0],f=u[1-l],h=Math.floor((f-s)/(n.length-a+2*c));return i=r(s+Math.round((f-s-(n.length-a)*h)/2),h),l&&i.reverse(),o=Math.round(h*(1-a)),t={t:"rangeRoundBands",a:arguments},e},e.rangeBand=function(){return o},e.rangeExtent=function(){return Pi(t.a[0])},e.copy=function(){return Qi(n,t)},e.domain(n)}function no(n,t){function i(){var e=0,r=t.length;for(a=[];++e<r;)a[e-1]=ta.quantile(n,e/r);return o}function o(n){return isNaN(n=+n)?void 0:t[ta.bisect(a,n)]}var a;return o.domain=function(t){return arguments.length?(n=t.map(r).filter(u).sort(e),i()):n},o.range=function(n){return arguments.length?(t=n,i()):t},o.quantiles=function(){return a},o.invertExtent=function(e){return e=t.indexOf(e),0>e?[0/0,0/0]:[e>0?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]},o.copy=function(){return no(n,t)},i()}function to(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),o=e.length-1,r}var i,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n,u()):e},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?0/0:t/i+n,[t,t+1/i]},r.copy=function(){return to(n,t,e)},u()}function eo(n,t){function e(e){return e>=e?t[ta.bisect(n,e)]:void 0}return e.domain=function(t){return arguments.length?(n=t,e):n},e.range=function(n){return arguments.length?(t=n,e):t},e.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},e.copy=function(){return eo(n,t)},e}function ro(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(t),t):n},t.ticks=function(t){return Xi(n,t)},t.tickFormat=function(t,e){return $i(n,t,e)},t.copy=function(){return ro(n)},t}function uo(){return 0}function io(n){return n.innerRadius}function oo(n){return n.outerRadius}function ao(n){return n.startAngle}function co(n){return n.endAngle}function lo(n){return n&&n.padAngle}function so(n,t,e,r){return(n-e)*t-(t-r)*n>0?0:1}function fo(n,t,e,r,u){var i=n[0]-t[0],o=n[1]-t[1],a=(u?r:-r)/Math.sqrt(i*i+o*o),c=a*o,l=-a*i,s=n[0]+c,f=n[1]+l,h=t[0]+c,g=t[1]+l,p=(s+h)/2,v=(f+g)/2,d=h-s,m=g-f,y=d*d+m*m,M=e-r,x=s*g-h*f,b=(0>m?-1:1)*Math.sqrt(M*M*y-x*x),_=(x*m-d*b)/y,w=(-x*d-m*b)/y,S=(x*m+d*b)/y,k=(-x*d+m*b)/y,E=_-p,A=w-v,N=S-p,C=k-v;return E*E+A*A>N*N+C*C&&(_=S,w=k),[[_-c,w-l],[_*e/M,w*e/M]]}function ho(n){function t(t){function o(){l.push("M",i(n(s),a))}for(var c,l=[],s=[],f=-1,h=t.length,g=Et(e),p=Et(r);++f<h;)u.call(this,c=t[f],f)?s.push([+g.call(this,c,f),+p.call(this,c,f)]):s.length&&(o(),s=[]);return s.length&&o(),l.length?l.join(""):null}var e=Ar,r=Nr,u=Ne,i=go,o=i.key,a=.7;return t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t.defined=function(n){return arguments.length?(u=n,t):u},t.interpolate=function(n){return arguments.length?(o="function"==typeof n?i=n:(i=El.get(n)||go).key,t):o},t.tension=function(n){return arguments.length?(a=n,t):a},t}function go(n){return n.join("L")}function po(n){return go(n)+"Z"}function vo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r[0]+(r=n[t])[0])/2,"V",r[1]);return e>1&&u.push("H",r[0]),u.join("")}function mo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("V",(r=n[t])[1],"H",r[0]);return u.join("")}function yo(n){for(var t=0,e=n.length,r=n[0],u=[r[0],",",r[1]];++t<e;)u.push("H",(r=n[t])[0],"V",r[1]);return u.join("")}function Mo(n,t){return n.length<4?go(n):n[1]+_o(n.slice(1,-1),wo(n,t))}function xo(n,t){return n.length<3?go(n):n[0]+_o((n.push(n[0]),n),wo([n[n.length-2]].concat(n,[n[1]]),t))}function bo(n,t){return n.length<3?go(n):n[0]+_o(n,wo(n,t))}function _o(n,t){if(t.length<1||n.length!=t.length&&n.length!=t.length+2)return go(n);var e=n.length!=t.length,r="",u=n[0],i=n[1],o=t[0],a=o,c=1;if(e&&(r+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],u=n[1],c=2),t.length>1){a=t[1],i=n[c],c++,r+="C"+(u[0]+o[0])+","+(u[1]+o[1])+","+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1];for(var l=2;l<t.length;l++,c++)i=n[c],a=t[l],r+="S"+(i[0]-a[0])+","+(i[1]-a[1])+","+i[0]+","+i[1]}if(e){var s=n[c];r+="Q"+(i[0]+2*a[0]/3)+","+(i[1]+2*a[1]/3)+","+s[0]+","+s[1]}return r}function wo(n,t){for(var e,r=[],u=(1-t)/2,i=n[0],o=n[1],a=1,c=n.length;++a<c;)e=i,i=o,o=n[a],r.push([u*(o[0]-e[0]),u*(o[1]-e[1])]);return r}function So(n){if(n.length<3)return go(n);var t=1,e=n.length,r=n[0],u=r[0],i=r[1],o=[u,u,u,(r=n[1])[0]],a=[i,i,i,r[1]],c=[u,",",i,"L",No(Cl,o),",",No(Cl,a)];for(n.push(n[e-1]);++t<=e;)r=n[t],o.shift(),o.push(r[0]),a.shift(),a.push(r[1]),Co(c,o,a);return n.pop(),c.push("L",r),c.join("")}function ko(n){if(n.length<4)return go(n);for(var t,e=[],r=-1,u=n.length,i=[0],o=[0];++r<3;)t=n[r],i.push(t[0]),o.push(t[1]);for(e.push(No(Cl,i)+","+No(Cl,o)),--r;++r<u;)t=n[r],i.shift(),i.push(t[0]),o.shift(),o.push(t[1]),Co(e,i,o);return e.join("")}function Eo(n){for(var t,e,r=-1,u=n.length,i=u+4,o=[],a=[];++r<4;)e=n[r%u],o.push(e[0]),a.push(e[1]);for(t=[No(Cl,o),",",No(Cl,a)],--r;++r<i;)e=n[r%u],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Co(t,o,a);return t.join("")}function Ao(n,t){var e=n.length-1;if(e)for(var r,u,i=n[0][0],o=n[0][1],a=n[e][0]-i,c=n[e][1]-o,l=-1;++l<=e;)r=n[l],u=l/e,r[0]=t*r[0]+(1-t)*(i+u*a),r[1]=t*r[1]+(1-t)*(o+u*c);return So(n)}function No(n,t){return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function Co(n,t,e){n.push("C",No(Al,t),",",No(Al,e),",",No(Nl,t),",",No(Nl,e),",",No(Cl,t),",",No(Cl,e))}function zo(n,t){return(t[1]-n[1])/(t[0]-n[0])}function qo(n){for(var t=0,e=n.length-1,r=[],u=n[0],i=n[1],o=r[0]=zo(u,i);++t<e;)r[t]=(o+(o=zo(u=i,i=n[t+1])))/2;return r[t]=o,r}function Lo(n){for(var t,e,r,u,i=[],o=qo(n),a=-1,c=n.length-1;++a<c;)t=zo(n[a],n[a+1]),ga(t)<Ca?o[a]=o[a+1]=0:(e=o[a]/t,r=o[a+1]/t,u=e*e+r*r,u>9&&(u=3*t/Math.sqrt(u),o[a]=u*e,o[a+1]=u*r));for(a=-1;++a<=c;)u=(n[Math.min(c,a+1)][0]-n[Math.max(0,a-1)][0])/(6*(1+o[a]*o[a])),i.push([u||0,o[a]*u||0]);return i}function To(n){return n.length<3?go(n):n[0]+_o(n,Lo(n))}function Ro(n){for(var t,e,r,u=-1,i=n.length;++u<i;)t=n[u],e=t[0],r=t[1]-Ra,t[0]=e*Math.cos(r),t[1]=e*Math.sin(r);return n}function Do(n){function t(t){function c(){v.push("M",a(n(m),f),s,l(n(d.reverse()),f),"Z")}for(var h,g,p,v=[],d=[],m=[],y=-1,M=t.length,x=Et(e),b=Et(u),_=e===r?function(){return g}:Et(r),w=u===i?function(){return p}:Et(i);++y<M;)o.call(this,h=t[y],y)?(d.push([g=+x.call(this,h,y),p=+b.call(this,h,y)]),m.push([+_.call(this,h,y),+w.call(this,h,y)])):d.length&&(c(),d=[],m=[]);return d.length&&c(),v.length?v.join(""):null}var e=Ar,r=Ar,u=0,i=Nr,o=Ne,a=go,c=a.key,l=a,s="L",f=.7;return t.x=function(n){return arguments.length?(e=r=n,t):r},t.x0=function(n){return arguments.length?(e=n,t):e},t.x1=function(n){return arguments.length?(r=n,t):r
},t.y=function(n){return arguments.length?(u=i=n,t):i},t.y0=function(n){return arguments.length?(u=n,t):u},t.y1=function(n){return arguments.length?(i=n,t):i},t.defined=function(n){return arguments.length?(o=n,t):o},t.interpolate=function(n){return arguments.length?(c="function"==typeof n?a=n:(a=El.get(n)||go).key,l=a.reverse||a,s=a.closed?"M":"L",t):c},t.tension=function(n){return arguments.length?(f=n,t):f},t}function Po(n){return n.radius}function Uo(n){return[n.x,n.y]}function jo(n){return function(){var t=n.apply(this,arguments),e=t[0],r=t[1]-Ra;return[e*Math.cos(r),e*Math.sin(r)]}}function Fo(){return 64}function Ho(){return"circle"}function Oo(n){var t=Math.sqrt(n/qa);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Io(n){return function(){var t,e;(t=this[n])&&(e=t[t.active])&&(--t.count?delete t[t.active]:delete this[n],t.active+=.5,e.event&&e.event.interrupt.call(this,this.__data__,e.index))}}function Yo(n,t,e){return ya(n,Pl),n.namespace=t,n.id=e,n}function Zo(n,t,e,r){var u=n.id,i=n.namespace;return Y(n,"function"==typeof e?function(n,o,a){n[i][u].tween.set(t,r(e.call(n,n.__data__,o,a)))}:(e=r(e),function(n){n[i][u].tween.set(t,e)}))}function Vo(n){return null==n&&(n=""),function(){this.textContent=n}}function Xo(n){return null==n?"__transition__":"__transition_"+n+"__"}function $o(n,t,e,r,u){var i=n[e]||(n[e]={active:0,count:0}),o=i[r];if(!o){var a=u.time;o=i[r]={tween:new l,time:a,delay:u.delay,duration:u.duration,ease:u.ease,index:t},u=null,++i.count,ta.timer(function(u){function c(e){if(i.active>r)return s();var u=i[i.active];u&&(--i.count,delete i[i.active],u.event&&u.event.interrupt.call(n,n.__data__,u.index)),i.active=r,o.event&&o.event.start.call(n,n.__data__,t),o.tween.forEach(function(e,r){(r=r.call(n,n.__data__,t))&&v.push(r)}),h=o.ease,f=o.duration,ta.timer(function(){return p.c=l(e||1)?Ne:l,1},0,a)}function l(e){if(i.active!==r)return 1;for(var u=e/f,a=h(u),c=v.length;c>0;)v[--c].call(n,a);return u>=1?(o.event&&o.event.end.call(n,n.__data__,t),s()):void 0}function s(){return--i.count?delete i[r]:delete n[e],1}var f,h,g=o.delay,p=ec,v=[];return p.t=g+a,u>=g?c(u-g):void(p.c=c)},0,a)}}function Bo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate("+(isFinite(r)?r:e(n))+",0)"})}function Wo(n,t,e){n.attr("transform",function(n){var r=t(n);return"translate(0,"+(isFinite(r)?r:e(n))+")"})}function Jo(n){return n.toISOString()}function Go(n,t,e){function r(t){return n(t)}function u(n,e){var r=n[1]-n[0],u=r/e,i=ta.bisect(Vl,u);return i==Vl.length?[t.year,Vi(n.map(function(n){return n/31536e6}),e)[2]]:i?t[u/Vl[i-1]<Vl[i]/u?i-1:i]:[Bl,Vi(n,e)[2]]}return r.invert=function(t){return Ko(n.invert(t))},r.domain=function(t){return arguments.length?(n.domain(t),r):n.domain().map(Ko)},r.nice=function(n,t){function e(e){return!isNaN(e)&&!n.range(e,Ko(+e+1),t).length}var i=r.domain(),o=Pi(i),a=null==n?u(o,10):"number"==typeof n&&u(o,n);return a&&(n=a[0],t=a[1]),r.domain(Fi(i,t>1?{floor:function(t){for(;e(t=n.floor(t));)t=Ko(t-1);return t},ceil:function(t){for(;e(t=n.ceil(t));)t=Ko(+t+1);return t}}:n))},r.ticks=function(n,t){var e=Pi(r.domain()),i=null==n?u(e,10):"number"==typeof n?u(e,n):!n.range&&[{range:n},t];return i&&(n=i[0],t=i[1]),n.range(e[0],Ko(+e[1]+1),1>t?1:t)},r.tickFormat=function(){return e},r.copy=function(){return Go(n.copy(),t,e)},Yi(r,n)}function Ko(n){return new Date(n)}function Qo(n){return JSON.parse(n.responseText)}function na(n){var t=ua.createRange();return t.selectNode(ua.body),t.createContextualFragment(n.responseText)}var ta={version:"3.5.5"},ea=[].slice,ra=function(n){return ea.call(n)},ua=this.document;if(ua)try{ra(ua.documentElement.childNodes)[0].nodeType}catch(ia){ra=function(n){for(var t=n.length,e=new Array(t);t--;)e[t]=n[t];return e}}if(Date.now||(Date.now=function(){return+new Date}),ua)try{ua.createElement("DIV").style.setProperty("opacity",0,"")}catch(oa){var aa=this.Element.prototype,ca=aa.setAttribute,la=aa.setAttributeNS,sa=this.CSSStyleDeclaration.prototype,fa=sa.setProperty;aa.setAttribute=function(n,t){ca.call(this,n,t+"")},aa.setAttributeNS=function(n,t,e){la.call(this,n,t,e+"")},sa.setProperty=function(n,t,e){fa.call(this,n,t+"",e)}}ta.ascending=e,ta.descending=function(n,t){return n>t?-1:t>n?1:t>=n?0:0/0},ta.min=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&e>r&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&e>r&&(e=r)}return e},ta.max=function(n,t){var e,r,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(r=n[u])&&r>=r){e=r;break}for(;++u<i;)null!=(r=n[u])&&r>e&&(e=r)}else{for(;++u<i;)if(null!=(r=t.call(n,n[u],u))&&r>=r){e=r;break}for(;++u<i;)null!=(r=t.call(n,n[u],u))&&r>e&&(e=r)}return e},ta.extent=function(n,t){var e,r,u,i=-1,o=n.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=n[i])&&r>=r){e=u=r;break}for(;++i<o;)null!=(r=n[i])&&(e>r&&(e=r),r>u&&(u=r))}else{for(;++i<o;)if(null!=(r=t.call(n,n[i],i))&&r>=r){e=u=r;break}for(;++i<o;)null!=(r=t.call(n,n[i],i))&&(e>r&&(e=r),r>u&&(u=r))}return[e,u]},ta.sum=function(n,t){var e,r=0,i=n.length,o=-1;if(1===arguments.length)for(;++o<i;)u(e=+n[o])&&(r+=e);else for(;++o<i;)u(e=+t.call(n,n[o],o))&&(r+=e);return r},ta.mean=function(n,t){var e,i=0,o=n.length,a=-1,c=o;if(1===arguments.length)for(;++a<o;)u(e=r(n[a]))?i+=e:--c;else for(;++a<o;)u(e=r(t.call(n,n[a],a)))?i+=e:--c;return c?i/c:void 0},ta.quantile=function(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),u=+n[r-1],i=e-r;return i?u+i*(n[r]-u):u},ta.median=function(n,t){var i,o=[],a=n.length,c=-1;if(1===arguments.length)for(;++c<a;)u(i=r(n[c]))&&o.push(i);else for(;++c<a;)u(i=r(t.call(n,n[c],c)))&&o.push(i);return o.length?ta.quantile(o.sort(e),.5):void 0},ta.variance=function(n,t){var e,i,o=n.length,a=0,c=0,l=-1,s=0;if(1===arguments.length)for(;++l<o;)u(e=r(n[l]))&&(i=e-a,a+=i/++s,c+=i*(e-a));else for(;++l<o;)u(e=r(t.call(n,n[l],l)))&&(i=e-a,a+=i/++s,c+=i*(e-a));return s>1?c/(s-1):void 0},ta.deviation=function(){var n=ta.variance.apply(this,arguments);return n?Math.sqrt(n):n};var ha=i(e);ta.bisectLeft=ha.left,ta.bisect=ta.bisectRight=ha.right,ta.bisector=function(n){return i(1===n.length?function(t,r){return e(n(t),r)}:n)},ta.shuffle=function(n,t,e){(i=arguments.length)<3&&(e=n.length,2>i&&(t=0));for(var r,u,i=e-t;i;)u=Math.random()*i--|0,r=n[i+t],n[i+t]=n[u+t],n[u+t]=r;return n},ta.permute=function(n,t){for(var e=t.length,r=new Array(e);e--;)r[e]=n[t[e]];return r},ta.pairs=function(n){for(var t,e=0,r=n.length-1,u=n[0],i=new Array(0>r?0:r);r>e;)i[e]=[t=u,u=n[++e]];return i},ta.zip=function(){if(!(r=arguments.length))return[];for(var n=-1,t=ta.min(arguments,o),e=new Array(t);++n<t;)for(var r,u=-1,i=e[n]=new Array(r);++u<r;)i[u]=arguments[u][n];return e},ta.transpose=function(n){return ta.zip.apply(ta,n)},ta.keys=function(n){var t=[];for(var e in n)t.push(e);return t},ta.values=function(n){var t=[];for(var e in n)t.push(n[e]);return t},ta.entries=function(n){var t=[];for(var e in n)t.push({key:e,value:n[e]});return t},ta.merge=function(n){for(var t,e,r,u=n.length,i=-1,o=0;++i<u;)o+=n[i].length;for(e=new Array(o);--u>=0;)for(r=n[u],t=r.length;--t>=0;)e[--o]=r[t];return e};var ga=Math.abs;ta.range=function(n,t,e){if(arguments.length<3&&(e=1,arguments.length<2&&(t=n,n=0)),(t-n)/e===1/0)throw new Error("infinite range");var r,u=[],i=a(ga(e)),o=-1;if(n*=i,t*=i,e*=i,0>e)for(;(r=n+e*++o)>t;)u.push(r/i);else for(;(r=n+e*++o)<t;)u.push(r/i);return u},ta.map=function(n,t){var e=new l;if(n instanceof l)n.forEach(function(n,t){e.set(n,t)});else if(Array.isArray(n)){var r,u=-1,i=n.length;if(1===arguments.length)for(;++u<i;)e.set(u,n[u]);else for(;++u<i;)e.set(t.call(n,r=n[u],u),r)}else for(var o in n)e.set(o,n[o]);return e};var pa="__proto__",va="\x00";c(l,{has:h,get:function(n){return this._[s(n)]},set:function(n,t){return this._[s(n)]=t},remove:g,keys:p,values:function(){var n=[];for(var t in this._)n.push(this._[t]);return n},entries:function(){var n=[];for(var t in this._)n.push({key:f(t),value:this._[t]});return n},size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t),this._[t])}}),ta.nest=function(){function n(t,o,a){if(a>=i.length)return r?r.call(u,o):e?o.sort(e):o;for(var c,s,f,h,g=-1,p=o.length,v=i[a++],d=new l;++g<p;)(h=d.get(c=v(s=o[g])))?h.push(s):d.set(c,[s]);return t?(s=t(),f=function(e,r){s.set(e,n(t,r,a))}):(s={},f=function(e,r){s[e]=n(t,r,a)}),d.forEach(f),s}function t(n,e){if(e>=i.length)return n;var r=[],u=o[e++];return n.forEach(function(n,u){r.push({key:n,values:t(u,e)})}),u?r.sort(function(n,t){return u(n.key,t.key)}):r}var e,r,u={},i=[],o=[];return u.map=function(t,e){return n(e,t,0)},u.entries=function(e){return t(n(ta.map,e,0),0)},u.key=function(n){return i.push(n),u},u.sortKeys=function(n){return o[i.length-1]=n,u},u.sortValues=function(n){return e=n,u},u.rollup=function(n){return r=n,u},u},ta.set=function(n){var t=new m;if(n)for(var e=0,r=n.length;r>e;++e)t.add(n[e]);return t},c(m,{has:h,add:function(n){return this._[s(n+="")]=!0,n},remove:g,values:p,size:v,empty:d,forEach:function(n){for(var t in this._)n.call(this,f(t))}}),ta.behavior={},ta.rebind=function(n,t){for(var e,r=1,u=arguments.length;++r<u;)n[e=arguments[r]]=M(n,t,t[e]);return n};var da=["webkit","ms","moz","Moz","o","O"];ta.dispatch=function(){for(var n=new _,t=-1,e=arguments.length;++t<e;)n[arguments[t]]=w(n);return n},_.prototype.on=function(n,t){var e=n.indexOf("."),r="";if(e>=0&&(r=n.slice(e+1),n=n.slice(0,e)),n)return arguments.length<2?this[n].on(r):this[n].on(r,t);if(2===arguments.length){if(null==t)for(n in this)this.hasOwnProperty(n)&&this[n].on(r,null);return this}},ta.event=null,ta.requote=function(n){return n.replace(ma,"\\$&")};var ma=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ya={}.__proto__?function(n,t){n.__proto__=t}:function(n,t){for(var e in t)n[e]=t[e]},Ma=function(n,t){return t.querySelector(n)},xa=function(n,t){return t.querySelectorAll(n)},ba=function(n,t){var e=n.matches||n[x(n,"matchesSelector")];return(ba=function(n,t){return e.call(n,t)})(n,t)};"function"==typeof Sizzle&&(Ma=function(n,t){return Sizzle(n,t)[0]||null},xa=Sizzle,ba=Sizzle.matchesSelector),ta.selection=function(){return ta.select(ua.documentElement)};var _a=ta.selection.prototype=[];_a.select=function(n){var t,e,r,u,i=[];n=N(n);for(var o=-1,a=this.length;++o<a;){i.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var c=-1,l=r.length;++c<l;)(u=r[c])?(t.push(e=n.call(u,u.__data__,c,o)),e&&"__data__"in u&&(e.__data__=u.__data__)):t.push(null)}return A(i)},_a.selectAll=function(n){var t,e,r=[];n=C(n);for(var u=-1,i=this.length;++u<i;)for(var o=this[u],a=-1,c=o.length;++a<c;)(e=o[a])&&(r.push(t=ra(n.call(e,e.__data__,a,u))),t.parentNode=e);return A(r)};var wa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ta.ns={prefix:wa,qualify:function(n){var t=n.indexOf(":"),e=n;return t>=0&&(e=n.slice(0,t),n=n.slice(t+1)),wa.hasOwnProperty(e)?{space:wa[e],local:n}:n}},_a.attr=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node();return n=ta.ns.qualify(n),n.local?e.getAttributeNS(n.space,n.local):e.getAttribute(n)}for(t in n)this.each(z(t,n[t]));return this}return this.each(z(n,t))},_a.classed=function(n,t){if(arguments.length<2){if("string"==typeof n){var e=this.node(),r=(n=T(n)).length,u=-1;if(t=e.classList){for(;++u<r;)if(!t.contains(n[u]))return!1}else for(t=e.getAttribute("class");++u<r;)if(!L(n[u]).test(t))return!1;return!0}for(t in n)this.each(R(t,n[t]));return this}return this.each(R(n,t))},_a.style=function(n,e,r){var u=arguments.length;if(3>u){if("string"!=typeof n){2>u&&(e="");for(r in n)this.each(P(r,n[r],e));return this}if(2>u){var i=this.node();return t(i).getComputedStyle(i,null).getPropertyValue(n)}r=""}return this.each(P(n,e,r))},_a.property=function(n,t){if(arguments.length<2){if("string"==typeof n)return this.node()[n];for(t in n)this.each(U(t,n[t]));return this}return this.each(U(n,t))},_a.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},_a.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},_a.append=function(n){return n=j(n),this.select(function(){return this.appendChild(n.apply(this,arguments))})},_a.insert=function(n,t){return n=j(n),t=N(t),this.select(function(){return this.insertBefore(n.apply(this,arguments),t.apply(this,arguments)||null)})},_a.remove=function(){return this.each(F)},_a.data=function(n,t){function e(n,e){var r,u,i,o=n.length,f=e.length,h=Math.min(o,f),g=new Array(f),p=new Array(f),v=new Array(o);if(t){var d,m=new l,y=new Array(o);for(r=-1;++r<o;)m.has(d=t.call(u=n[r],u.__data__,r))?v[r]=u:m.set(d,u),y[r]=d;for(r=-1;++r<f;)(u=m.get(d=t.call(e,i=e[r],r)))?u!==!0&&(g[r]=u,u.__data__=i):p[r]=H(i),m.set(d,!0);for(r=-1;++r<o;)m.get(y[r])!==!0&&(v[r]=n[r])}else{for(r=-1;++r<h;)u=n[r],i=e[r],u?(u.__data__=i,g[r]=u):p[r]=H(i);for(;f>r;++r)p[r]=H(e[r]);for(;o>r;++r)v[r]=n[r]}p.update=g,p.parentNode=g.parentNode=v.parentNode=n.parentNode,a.push(p),c.push(g),s.push(v)}var r,u,i=-1,o=this.length;if(!arguments.length){for(n=new Array(o=(r=this[0]).length);++i<o;)(u=r[i])&&(n[i]=u.__data__);return n}var a=Z([]),c=A([]),s=A([]);if("function"==typeof n)for(;++i<o;)e(r=this[i],n.call(r,r.parentNode.__data__,i));else for(;++i<o;)e(r=this[i],n);return c.enter=function(){return a},c.exit=function(){return s},c},_a.datum=function(n){return arguments.length?this.property("__data__",n):this.property("__data__")},_a.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]),t.parentNode=(e=this[i]).parentNode;for(var a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return A(u)},_a.order=function(){for(var n=-1,t=this.length;++n<t;)for(var e,r=this[n],u=r.length-1,i=r[u];--u>=0;)(e=r[u])&&(i&&i!==e.nextSibling&&i.parentNode.insertBefore(e,i),i=e);return this},_a.sort=function(n){n=I.apply(this,arguments);for(var t=-1,e=this.length;++t<e;)this[t].sort(n);return this.order()},_a.each=function(n){return Y(this,function(t,e,r){n.call(t,t.__data__,e,r)})},_a.call=function(n){var t=ra(arguments);return n.apply(t[0]=this,t),this},_a.empty=function(){return!this.node()},_a.node=function(){for(var n=0,t=this.length;t>n;n++)for(var e=this[n],r=0,u=e.length;u>r;r++){var i=e[r];if(i)return i}return null},_a.size=function(){var n=0;return Y(this,function(){++n}),n};var Sa=[];ta.selection.enter=Z,ta.selection.enter.prototype=Sa,Sa.append=_a.append,Sa.empty=_a.empty,Sa.node=_a.node,Sa.call=_a.call,Sa.size=_a.size,Sa.select=function(n){for(var t,e,r,u,i,o=[],a=-1,c=this.length;++a<c;){r=(u=this[a]).update,o.push(t=[]),t.parentNode=u.parentNode;for(var l=-1,s=u.length;++l<s;)(i=u[l])?(t.push(r[l]=e=n.call(u.parentNode,i.__data__,l,a)),e.__data__=i.__data__):t.push(null)}return A(o)},Sa.insert=function(n,t){return arguments.length<2&&(t=V(this)),_a.insert.call(this,n,t)},ta.select=function(t){var e;return"string"==typeof t?(e=[Ma(t,ua)],e.parentNode=ua.documentElement):(e=[t],e.parentNode=n(t)),A([e])},ta.selectAll=function(n){var t;return"string"==typeof n?(t=ra(xa(n,ua)),t.parentNode=ua.documentElement):(t=n,t.parentNode=null),A([t])},_a.on=function(n,t,e){var r=arguments.length;if(3>r){if("string"!=typeof n){2>r&&(t=!1);for(e in n)this.each(X(e,n[e],t));return this}if(2>r)return(r=this.node()["__on"+n])&&r._;e=!1}return this.each(X(n,t,e))};var ka=ta.map({mouseenter:"mouseover",mouseleave:"mouseout"});ua&&ka.forEach(function(n){"on"+n in ua&&ka.remove(n)});var Ea,Aa=0;ta.mouse=function(n){return J(n,k())};var Na=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ta.touch=function(n,t,e){if(arguments.length<3&&(e=t,t=k().changedTouches),t)for(var r,u=0,i=t.length;i>u;++u)if((r=t[u]).identifier===e)return J(n,r)},ta.behavior.drag=function(){function n(){this.on("mousedown.drag",i).on("touchstart.drag",o)}function e(n,t,e,i,o){return function(){function a(){var n,e,r=t(h,v);r&&(n=r[0]-M[0],e=r[1]-M[1],p|=n|e,M=r,g({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:n,dy:e}))}function c(){t(h,v)&&(m.on(i+d,null).on(o+d,null),y(p&&ta.event.target===f),g({type:"dragend"}))}var l,s=this,f=ta.event.target,h=s.parentNode,g=r.of(s,arguments),p=0,v=n(),d=".drag"+(null==v?"":"-"+v),m=ta.select(e(f)).on(i+d,a).on(o+d,c),y=W(f),M=t(h,v);u?(l=u.apply(s,arguments),l=[l.x-M[0],l.y-M[1]]):l=[0,0],g({type:"dragstart"})}}var r=E(n,"drag","dragstart","dragend"),u=null,i=e(b,ta.mouse,t,"mousemove","mouseup"),o=e(G,ta.touch,y,"touchmove","touchend");return n.origin=function(t){return arguments.length?(u=t,n):u},ta.rebind(n,r,"on")},ta.touches=function(n,t){return arguments.length<2&&(t=k().touches),t?ra(t).map(function(t){var e=J(n,t);return e.identifier=t.identifier,e}):[]};var Ca=1e-6,za=Ca*Ca,qa=Math.PI,La=2*qa,Ta=La-Ca,Ra=qa/2,Da=qa/180,Pa=180/qa,Ua=Math.SQRT2,ja=2,Fa=4;ta.interpolateZoom=function(n,t){function e(n){var t=n*y;if(m){var e=rt(v),o=i/(ja*h)*(e*ut(Ua*t+v)-et(v));return[r+o*l,u+o*s,i*e/rt(Ua*t+v)]}return[r+n*l,u+n*s,i*Math.exp(Ua*t)]}var r=n[0],u=n[1],i=n[2],o=t[0],a=t[1],c=t[2],l=o-r,s=a-u,f=l*l+s*s,h=Math.sqrt(f),g=(c*c-i*i+Fa*f)/(2*i*ja*h),p=(c*c-i*i-Fa*f)/(2*c*ja*h),v=Math.log(Math.sqrt(g*g+1)-g),d=Math.log(Math.sqrt(p*p+1)-p),m=d-v,y=(m||Math.log(c/i))/Ua;return e.duration=1e3*y,e},ta.behavior.zoom=function(){function n(n){n.on(q,f).on(Oa+".zoom",g).on("dblclick.zoom",p).on(R,h)}function e(n){return[(n[0]-k.x)/k.k,(n[1]-k.y)/k.k]}function r(n){return[n[0]*k.k+k.x,n[1]*k.k+k.y]}function u(n){k.k=Math.max(N[0],Math.min(N[1],n))}function i(n,t){t=r(t),k.x+=n[0]-t[0],k.y+=n[1]-t[1]}function o(t,e,r,o){t.__chart__={x:k.x,y:k.y,k:k.k},u(Math.pow(2,o)),i(d=e,r),t=ta.select(t),C>0&&(t=t.transition().duration(C)),t.call(n.event)}function a(){b&&b.domain(x.range().map(function(n){return(n-k.x)/k.k}).map(x.invert)),w&&w.domain(_.range().map(function(n){return(n-k.y)/k.k}).map(_.invert))}function c(n){z++||n({type:"zoomstart"})}function l(n){a(),n({type:"zoom",scale:k.k,translate:[k.x,k.y]})}function s(n){--z||n({type:"zoomend"}),d=null}function f(){function n(){f=1,i(ta.mouse(u),g),l(a)}function r(){h.on(L,null).on(T,null),p(f&&ta.event.target===o),s(a)}var u=this,o=ta.event.target,a=D.of(u,arguments),f=0,h=ta.select(t(u)).on(L,n).on(T,r),g=e(ta.mouse(u)),p=W(u);Dl.call(u),c(a)}function h(){function n(){var n=ta.touches(p);return g=k.k,n.forEach(function(n){n.identifier in d&&(d[n.identifier]=e(n))}),n}function t(){var t=ta.event.target;ta.select(t).on(x,r).on(b,a),_.push(t);for(var e=ta.event.changedTouches,u=0,i=e.length;i>u;++u)d[e[u].identifier]=null;var c=n(),l=Date.now();if(1===c.length){if(500>l-M){var s=c[0];o(p,s,d[s.identifier],Math.floor(Math.log(k.k)/Math.LN2)+1),S()}M=l}else if(c.length>1){var s=c[0],f=c[1],h=s[0]-f[0],g=s[1]-f[1];m=h*h+g*g}}function r(){var n,t,e,r,o=ta.touches(p);Dl.call(p);for(var a=0,c=o.length;c>a;++a,r=null)if(e=o[a],r=d[e.identifier]){if(t)break;n=e,t=r}if(r){var s=(s=e[0]-n[0])*s+(s=e[1]-n[1])*s,f=m&&Math.sqrt(s/m);n=[(n[0]+e[0])/2,(n[1]+e[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],u(f*g)}M=null,i(n,t),l(v)}function a(){if(ta.event.touches.length){for(var t=ta.event.changedTouches,e=0,r=t.length;r>e;++e)delete d[t[e].identifier];for(var u in d)return void n()}ta.selectAll(_).on(y,null),w.on(q,f).on(R,h),E(),s(v)}var g,p=this,v=D.of(p,arguments),d={},m=0,y=".zoom-"+ta.event.changedTouches[0].identifier,x="touchmove"+y,b="touchend"+y,_=[],w=ta.select(p),E=W(p);t(),c(v),w.on(q,null).on(R,t)}function g(){var n=D.of(this,arguments);y?clearTimeout(y):(v=e(d=m||ta.mouse(this)),Dl.call(this),c(n)),y=setTimeout(function(){y=null,s(n)},50),S(),u(Math.pow(2,.002*Ha())*k.k),i(d,v),l(n)}function p(){var n=ta.mouse(this),t=Math.log(k.k)/Math.LN2;o(this,n,e(n),ta.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var v,d,m,y,M,x,b,_,w,k={x:0,y:0,k:1},A=[960,500],N=Ia,C=250,z=0,q="mousedown.zoom",L="mousemove.zoom",T="mouseup.zoom",R="touchstart.zoom",D=E(n,"zoomstart","zoom","zoomend");return Oa||(Oa="onwheel"in ua?(Ha=function(){return-ta.event.deltaY*(ta.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ua?(Ha=function(){return ta.event.wheelDelta},"mousewheel"):(Ha=function(){return-ta.event.detail},"MozMousePixelScroll")),n.event=function(n){n.each(function(){var n=D.of(this,arguments),t=k;Tl?ta.select(this).transition().each("start.zoom",function(){k=this.__chart__||{x:0,y:0,k:1},c(n)}).tween("zoom:zoom",function(){var e=A[0],r=A[1],u=d?d[0]:e/2,i=d?d[1]:r/2,o=ta.interpolateZoom([(u-k.x)/k.k,(i-k.y)/k.k,e/k.k],[(u-t.x)/t.k,(i-t.y)/t.k,e/t.k]);return function(t){var r=o(t),a=e/r[2];this.__chart__=k={x:u-r[0]*a,y:i-r[1]*a,k:a},l(n)}}).each("interrupt.zoom",function(){s(n)}).each("end.zoom",function(){s(n)}):(this.__chart__=k,c(n),l(n),s(n))})},n.translate=function(t){return arguments.length?(k={x:+t[0],y:+t[1],k:k.k},a(),n):[k.x,k.y]},n.scale=function(t){return arguments.length?(k={x:k.x,y:k.y,k:+t},a(),n):k.k},n.scaleExtent=function(t){return arguments.length?(N=null==t?Ia:[+t[0],+t[1]],n):N},n.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],n):m},n.size=function(t){return arguments.length?(A=t&&[+t[0],+t[1]],n):A},n.duration=function(t){return arguments.length?(C=+t,n):C},n.x=function(t){return arguments.length?(b=t,x=t.copy(),k={x:0,y:0,k:1},n):b},n.y=function(t){return arguments.length?(w=t,_=t.copy(),k={x:0,y:0,k:1},n):w},ta.rebind(n,D,"on")};var Ha,Oa,Ia=[0,1/0];ta.color=ot,ot.prototype.toString=function(){return this.rgb()+""},ta.hsl=at;var Ya=at.prototype=new ot;Ya.brighter=function(n){return n=Math.pow(.7,arguments.length?n:1),new at(this.h,this.s,this.l/n)},Ya.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new at(this.h,this.s,n*this.l)},Ya.rgb=function(){return ct(this.h,this.s,this.l)},ta.hcl=lt;var Za=lt.prototype=new ot;Za.brighter=function(n){return new lt(this.h,this.c,Math.min(100,this.l+Va*(arguments.length?n:1)))},Za.darker=function(n){return new lt(this.h,this.c,Math.max(0,this.l-Va*(arguments.length?n:1)))},Za.rgb=function(){return st(this.h,this.c,this.l).rgb()},ta.lab=ft;var Va=18,Xa=.95047,$a=1,Ba=1.08883,Wa=ft.prototype=new ot;Wa.brighter=function(n){return new ft(Math.min(100,this.l+Va*(arguments.length?n:1)),this.a,this.b)},Wa.darker=function(n){return new ft(Math.max(0,this.l-Va*(arguments.length?n:1)),this.a,this.b)},Wa.rgb=function(){return ht(this.l,this.a,this.b)},ta.rgb=mt;var Ja=mt.prototype=new ot;Ja.brighter=function(n){n=Math.pow(.7,arguments.length?n:1);var t=this.r,e=this.g,r=this.b,u=30;return t||e||r?(t&&u>t&&(t=u),e&&u>e&&(e=u),r&&u>r&&(r=u),new mt(Math.min(255,t/n),Math.min(255,e/n),Math.min(255,r/n))):new mt(u,u,u)},Ja.darker=function(n){return n=Math.pow(.7,arguments.length?n:1),new mt(n*this.r,n*this.g,n*this.b)},Ja.hsl=function(){return _t(this.r,this.g,this.b)},Ja.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var Ga=ta.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ga.forEach(function(n,t){Ga.set(n,yt(t))}),ta.functor=Et,ta.xhr=At(y),ta.dsv=function(n,t){function e(n,e,i){arguments.length<3&&(i=e,e=null);var o=Nt(n,t,null==e?r:u(e),i);return o.row=function(n){return arguments.length?o.response(null==(e=n)?r:u(n)):e},o}function r(n){return e.parse(n.responseText)}function u(n){return function(t){return e.parse(t.responseText,n)}}function i(t){return t.map(o).join(n)}function o(n){return a.test(n)?'"'+n.replace(/\"/g,'""')+'"':n}var a=new RegExp('["'+n+"\n]"),c=n.charCodeAt(0);return e.parse=function(n,t){var r;return e.parseRows(n,function(n,e){if(r)return r(n,e-1);var u=new Function("d","return {"+n.map(function(n,t){return JSON.stringify(n)+": d["+t+"]"}).join(",")+"}");r=t?function(n,e){return t(u(n),e)}:u})},e.parseRows=function(n,t){function e(){if(s>=l)return o;if(u)return u=!1,i;var t=s;if(34===n.charCodeAt(t)){for(var e=t;e++<l;)if(34===n.charCodeAt(e)){if(34!==n.charCodeAt(e+1))break;++e}s=e+2;var r=n.charCodeAt(e+1);return 13===r?(u=!0,10===n.charCodeAt(e+2)&&++s):10===r&&(u=!0),n.slice(t+1,e).replace(/""/g,'"')}for(;l>s;){var r=n.charCodeAt(s++),a=1;if(10===r)u=!0;else if(13===r)u=!0,10===n.charCodeAt(s)&&(++s,++a);else if(r!==c)continue;return n.slice(t,s-a)}return n.slice(t)}for(var r,u,i={},o={},a=[],l=n.length,s=0,f=0;(r=e())!==o;){for(var h=[];r!==i&&r!==o;)h.push(r),r=e();t&&null==(h=t(h,f++))||a.push(h)}return a},e.format=function(t){if(Array.isArray(t[0]))return e.formatRows(t);var r=new m,u=[];return t.forEach(function(n){for(var t in n)r.has(t)||u.push(r.add(t))}),[u.map(o).join(n)].concat(t.map(function(t){return u.map(function(n){return o(t[n])}).join(n)})).join("\n")},e.formatRows=function(n){return n.map(i).join("\n")},e},ta.csv=ta.dsv(",","text/csv"),ta.tsv=ta.dsv("	","text/tab-separated-values");var Ka,Qa,nc,tc,ec,rc=this[x(this,"requestAnimationFrame")]||function(n){setTimeout(n,17)};ta.timer=function(n,t,e){var r=arguments.length;2>r&&(t=0),3>r&&(e=Date.now());var u=e+t,i={c:n,t:u,f:!1,n:null};Qa?Qa.n=i:Ka=i,Qa=i,nc||(tc=clearTimeout(tc),nc=1,rc(qt))},ta.timer.flush=function(){Lt(),Tt()},ta.round=function(n,t){return t?Math.round(n*(t=Math.pow(10,t)))/t:Math.round(n)};var uc=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(Dt);ta.formatPrefix=function(n,t){var e=0;return n&&(0>n&&(n*=-1),t&&(n=ta.round(n,Rt(n,t))),e=1+Math.floor(1e-12+Math.log(n)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),uc[8+e/3]};var ic=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,oc=ta.map({b:function(n){return n.toString(2)},c:function(n){return String.fromCharCode(n)},o:function(n){return n.toString(8)},x:function(n){return n.toString(16)},X:function(n){return n.toString(16).toUpperCase()},g:function(n,t){return n.toPrecision(t)},e:function(n,t){return n.toExponential(t)},f:function(n,t){return n.toFixed(t)},r:function(n,t){return(n=ta.round(n,Rt(n,t))).toFixed(Math.max(0,Math.min(20,Rt(n*(1+1e-15),t))))}}),ac=ta.time={},cc=Date;jt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){lc.setUTCDate.apply(this._,arguments)},setDay:function(){lc.setUTCDay.apply(this._,arguments)},setFullYear:function(){lc.setUTCFullYear.apply(this._,arguments)},setHours:function(){lc.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){lc.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){lc.setUTCMinutes.apply(this._,arguments)},setMonth:function(){lc.setUTCMonth.apply(this._,arguments)},setSeconds:function(){lc.setUTCSeconds.apply(this._,arguments)},setTime:function(){lc.setTime.apply(this._,arguments)}};var lc=Date.prototype;ac.year=Ft(function(n){return n=ac.day(n),n.setMonth(0,1),n},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n){return n.getFullYear()}),ac.years=ac.year.range,ac.years.utc=ac.year.utc.range,ac.day=Ft(function(n){var t=new cc(2e3,0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t},function(n,t){n.setDate(n.getDate()+t)},function(n){return n.getDate()-1}),ac.days=ac.day.range,ac.days.utc=ac.day.utc.range,ac.dayOfYear=function(n){var t=ac.year(n);return Math.floor((n-t-6e4*(n.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(n,t){t=7-t;var e=ac[n]=Ft(function(n){return(n=ac.day(n)).setDate(n.getDate()-(n.getDay()+t)%7),n},function(n,t){n.setDate(n.getDate()+7*Math.floor(t))},function(n){var e=ac.year(n).getDay();return Math.floor((ac.dayOfYear(n)+(e+t)%7)/7)-(e!==t)});ac[n+"s"]=e.range,ac[n+"s"].utc=e.utc.range,ac[n+"OfYear"]=function(n){var e=ac.year(n).getDay();return Math.floor((ac.dayOfYear(n)+(e+t)%7)/7)}}),ac.week=ac.sunday,ac.weeks=ac.sunday.range,ac.weeks.utc=ac.sunday.utc.range,ac.weekOfYear=ac.sundayOfYear;var sc={"-":"",_:" ",0:"0"},fc=/^\s*\d+/,hc=/^%/;ta.locale=function(n){return{numberFormat:Pt(n),timeFormat:Ot(n)}};var gc=ta.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ta.format=gc.numberFormat,ta.geo={},ce.prototype={s:0,t:0,add:function(n){le(n,this.t,pc),le(pc.s,this.s,this),this.s?this.t+=pc.t:this.s=pc.t
},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var pc=new ce;ta.geo.stream=function(n,t){n&&vc.hasOwnProperty(n.type)?vc[n.type](n,t):se(n,t)};var vc={Feature:function(n,t){se(n.geometry,t)},FeatureCollection:function(n,t){for(var e=n.features,r=-1,u=e.length;++r<u;)se(e[r].geometry,t)}},dc={Sphere:function(n,t){t.sphere()},Point:function(n,t){n=n.coordinates,t.point(n[0],n[1],n[2])},MultiPoint:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)n=e[r],t.point(n[0],n[1],n[2])},LineString:function(n,t){fe(n.coordinates,t,0)},MultiLineString:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)fe(e[r],t,0)},Polygon:function(n,t){he(n.coordinates,t)},MultiPolygon:function(n,t){for(var e=n.coordinates,r=-1,u=e.length;++r<u;)he(e[r],t)},GeometryCollection:function(n,t){for(var e=n.geometries,r=-1,u=e.length;++r<u;)se(e[r],t)}};ta.geo.area=function(n){return mc=0,ta.geo.stream(n,Mc),mc};var mc,yc=new ce,Mc={sphere:function(){mc+=4*qa},point:b,lineStart:b,lineEnd:b,polygonStart:function(){yc.reset(),Mc.lineStart=ge},polygonEnd:function(){var n=2*yc;mc+=0>n?4*qa+n:n,Mc.lineStart=Mc.lineEnd=Mc.point=b}};ta.geo.bounds=function(){function n(n,t){M.push(x=[s=n,h=n]),f>t&&(f=t),t>g&&(g=t)}function t(t,e){var r=pe([t*Da,e*Da]);if(m){var u=de(m,r),i=[u[1],-u[0],0],o=de(i,u);Me(o),o=xe(o);var c=t-p,l=c>0?1:-1,v=o[0]*Pa*l,d=ga(c)>180;if(d^(v>l*p&&l*t>v)){var y=o[1]*Pa;y>g&&(g=y)}else if(v=(v+360)%360-180,d^(v>l*p&&l*t>v)){var y=-o[1]*Pa;f>y&&(f=y)}else f>e&&(f=e),e>g&&(g=e);d?p>t?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t):h>=s?(s>t&&(s=t),t>h&&(h=t)):t>p?a(s,t)>a(s,h)&&(h=t):a(t,h)>a(s,h)&&(s=t)}else n(t,e);m=r,p=t}function e(){b.point=t}function r(){x[0]=s,x[1]=h,b.point=n,m=null}function u(n,e){if(m){var r=n-p;y+=ga(r)>180?r+(r>0?360:-360):r}else v=n,d=e;Mc.point(n,e),t(n,e)}function i(){Mc.lineStart()}function o(){u(v,d),Mc.lineEnd(),ga(y)>Ca&&(s=-(h=180)),x[0]=s,x[1]=h,m=null}function a(n,t){return(t-=n)<0?t+360:t}function c(n,t){return n[0]-t[0]}function l(n,t){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var s,f,h,g,p,v,d,m,y,M,x,b={point:n,lineStart:e,lineEnd:r,polygonStart:function(){b.point=u,b.lineStart=i,b.lineEnd=o,y=0,Mc.polygonStart()},polygonEnd:function(){Mc.polygonEnd(),b.point=n,b.lineStart=e,b.lineEnd=r,0>yc?(s=-(h=180),f=-(g=90)):y>Ca?g=90:-Ca>y&&(f=-90),x[0]=s,x[1]=h}};return function(n){g=h=-(s=f=1/0),M=[],ta.geo.stream(n,b);var t=M.length;if(t){M.sort(c);for(var e,r=1,u=M[0],i=[u];t>r;++r)e=M[r],l(e[0],u)||l(e[1],u)?(a(u[0],e[1])>a(u[0],u[1])&&(u[1]=e[1]),a(e[0],u[1])>a(u[0],u[1])&&(u[0]=e[0])):i.push(u=e);for(var o,e,p=-1/0,t=i.length-1,r=0,u=i[t];t>=r;u=e,++r)e=i[r],(o=a(u[1],e[0]))>p&&(p=o,s=e[0],h=u[1])}return M=x=null,1/0===s||1/0===f?[[0/0,0/0],[0/0,0/0]]:[[s,f],[h,g]]}}(),ta.geo.centroid=function(n){xc=bc=_c=wc=Sc=kc=Ec=Ac=Nc=Cc=zc=0,ta.geo.stream(n,qc);var t=Nc,e=Cc,r=zc,u=t*t+e*e+r*r;return za>u&&(t=kc,e=Ec,r=Ac,Ca>bc&&(t=_c,e=wc,r=Sc),u=t*t+e*e+r*r,za>u)?[0/0,0/0]:[Math.atan2(e,t)*Pa,tt(r/Math.sqrt(u))*Pa]};var xc,bc,_c,wc,Sc,kc,Ec,Ac,Nc,Cc,zc,qc={sphere:b,point:_e,lineStart:Se,lineEnd:ke,polygonStart:function(){qc.lineStart=Ee},polygonEnd:function(){qc.lineStart=Se}},Lc=Le(Ne,Pe,je,[-qa,-qa/2]),Tc=1e9;ta.geo.clipExtent=function(){var n,t,e,r,u,i,o={stream:function(n){return u&&(u.valid=!1),u=i(n),u.valid=!0,u},extent:function(a){return arguments.length?(i=Ie(n=+a[0][0],t=+a[0][1],e=+a[1][0],r=+a[1][1]),u&&(u.valid=!1,u=null),o):[[n,t],[e,r]]}};return o.extent([[0,0],[960,500]])},(ta.geo.conicEqualArea=function(){return Ye(Ze)}).raw=Ze,ta.geo.albers=function(){return ta.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ta.geo.albersUsa=function(){function n(n){var i=n[0],o=n[1];return t=null,e(i,o),t||(r(i,o),t)||u(i,o),t}var t,e,r,u,i=ta.geo.albers(),o=ta.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a=ta.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(n,e){t=[n,e]}};return n.invert=function(n){var t=i.scale(),e=i.translate(),r=(n[0]-e[0])/t,u=(n[1]-e[1])/t;return(u>=.12&&.234>u&&r>=-.425&&-.214>r?o:u>=.166&&.234>u&&r>=-.214&&-.115>r?a:i).invert(n)},n.stream=function(n){var t=i.stream(n),e=o.stream(n),r=a.stream(n);return{point:function(n,u){t.point(n,u),e.point(n,u),r.point(n,u)},sphere:function(){t.sphere(),e.sphere(),r.sphere()},lineStart:function(){t.lineStart(),e.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),e.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),e.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),e.polygonEnd(),r.polygonEnd()}}},n.precision=function(t){return arguments.length?(i.precision(t),o.precision(t),a.precision(t),n):i.precision()},n.scale=function(t){return arguments.length?(i.scale(t),o.scale(.35*t),a.scale(t),n.translate(i.translate())):i.scale()},n.translate=function(t){if(!arguments.length)return i.translate();var l=i.scale(),s=+t[0],f=+t[1];return e=i.translate(t).clipExtent([[s-.455*l,f-.238*l],[s+.455*l,f+.238*l]]).stream(c).point,r=o.translate([s-.307*l,f+.201*l]).clipExtent([[s-.425*l+Ca,f+.12*l+Ca],[s-.214*l-Ca,f+.234*l-Ca]]).stream(c).point,u=a.translate([s-.205*l,f+.212*l]).clipExtent([[s-.214*l+Ca,f+.166*l+Ca],[s-.115*l-Ca,f+.234*l-Ca]]).stream(c).point,n},n.scale(1070)};var Rc,Dc,Pc,Uc,jc,Fc,Hc={point:b,lineStart:b,lineEnd:b,polygonStart:function(){Dc=0,Hc.lineStart=Ve},polygonEnd:function(){Hc.lineStart=Hc.lineEnd=Hc.point=b,Rc+=ga(Dc/2)}},Oc={point:Xe,lineStart:b,lineEnd:b,polygonStart:b,polygonEnd:b},Ic={point:We,lineStart:Je,lineEnd:Ge,polygonStart:function(){Ic.lineStart=Ke},polygonEnd:function(){Ic.point=We,Ic.lineStart=Je,Ic.lineEnd=Ge}};ta.geo.path=function(){function n(n){return n&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=u(i)),ta.geo.stream(n,o)),i.result()}function t(){return o=null,n}var e,r,u,i,o,a=4.5;return n.area=function(n){return Rc=0,ta.geo.stream(n,u(Hc)),Rc},n.centroid=function(n){return _c=wc=Sc=kc=Ec=Ac=Nc=Cc=zc=0,ta.geo.stream(n,u(Ic)),zc?[Nc/zc,Cc/zc]:Ac?[kc/Ac,Ec/Ac]:Sc?[_c/Sc,wc/Sc]:[0/0,0/0]},n.bounds=function(n){return jc=Fc=-(Pc=Uc=1/0),ta.geo.stream(n,u(Oc)),[[Pc,Uc],[jc,Fc]]},n.projection=function(n){return arguments.length?(u=(e=n)?n.stream||tr(n):y,t()):e},n.context=function(n){return arguments.length?(i=null==(r=n)?new $e:new Qe(n),"function"!=typeof a&&i.pointRadius(a),t()):r},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),n):a},n.projection(ta.geo.albersUsa()).context(null)},ta.geo.transform=function(n){return{stream:function(t){var e=new er(t);for(var r in n)e[r]=n[r];return e}}},er.prototype={point:function(n,t){this.stream.point(n,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ta.geo.projection=ur,ta.geo.projectionMutator=ir,(ta.geo.equirectangular=function(){return ur(ar)}).raw=ar.invert=ar,ta.geo.rotation=function(n){function t(t){return t=n(t[0]*Da,t[1]*Da),t[0]*=Pa,t[1]*=Pa,t}return n=lr(n[0]%360*Da,n[1]*Da,n.length>2?n[2]*Da:0),t.invert=function(t){return t=n.invert(t[0]*Da,t[1]*Da),t[0]*=Pa,t[1]*=Pa,t},t},cr.invert=ar,ta.geo.circle=function(){function n(){var n="function"==typeof r?r.apply(this,arguments):r,t=lr(-n[0]*Da,-n[1]*Da,0).invert,u=[];return e(null,null,1,{point:function(n,e){u.push(n=t(n,e)),n[0]*=Pa,n[1]*=Pa}}),{type:"Polygon",coordinates:[u]}}var t,e,r=[0,0],u=6;return n.origin=function(t){return arguments.length?(r=t,n):r},n.angle=function(r){return arguments.length?(e=gr((t=+r)*Da,u*Da),n):t},n.precision=function(r){return arguments.length?(e=gr(t*Da,(u=+r)*Da),n):u},n.angle(90)},ta.geo.distance=function(n,t){var e,r=(t[0]-n[0])*Da,u=n[1]*Da,i=t[1]*Da,o=Math.sin(r),a=Math.cos(r),c=Math.sin(u),l=Math.cos(u),s=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((e=f*o)*e+(e=l*s-c*f*a)*e),c*s+l*f*a)},ta.geo.graticule=function(){function n(){return{type:"MultiLineString",coordinates:t()}}function t(){return ta.range(Math.ceil(i/d)*d,u,d).map(h).concat(ta.range(Math.ceil(l/m)*m,c,m).map(g)).concat(ta.range(Math.ceil(r/p)*p,e,p).filter(function(n){return ga(n%d)>Ca}).map(s)).concat(ta.range(Math.ceil(a/v)*v,o,v).filter(function(n){return ga(n%m)>Ca}).map(f))}var e,r,u,i,o,a,c,l,s,f,h,g,p=10,v=p,d=90,m=360,y=2.5;return n.lines=function(){return t().map(function(n){return{type:"LineString",coordinates:n}})},n.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(g(c).slice(1),h(u).reverse().slice(1),g(l).reverse().slice(1))]}},n.extent=function(t){return arguments.length?n.majorExtent(t).minorExtent(t):n.minorExtent()},n.majorExtent=function(t){return arguments.length?(i=+t[0][0],u=+t[1][0],l=+t[0][1],c=+t[1][1],i>u&&(t=i,i=u,u=t),l>c&&(t=l,l=c,c=t),n.precision(y)):[[i,l],[u,c]]},n.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],r>e&&(t=r,r=e,e=t),a>o&&(t=a,a=o,o=t),n.precision(y)):[[r,a],[e,o]]},n.step=function(t){return arguments.length?n.majorStep(t).minorStep(t):n.minorStep()},n.majorStep=function(t){return arguments.length?(d=+t[0],m=+t[1],n):[d,m]},n.minorStep=function(t){return arguments.length?(p=+t[0],v=+t[1],n):[p,v]},n.precision=function(t){return arguments.length?(y=+t,s=vr(a,o,90),f=dr(r,e,y),h=vr(l,c,90),g=dr(i,u,y),n):y},n.majorExtent([[-180,-90+Ca],[180,90-Ca]]).minorExtent([[-180,-80-Ca],[180,80+Ca]])},ta.geo.greatArc=function(){function n(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),e||u.apply(this,arguments)]}}var t,e,r=mr,u=yr;return n.distance=function(){return ta.geo.distance(t||r.apply(this,arguments),e||u.apply(this,arguments))},n.source=function(e){return arguments.length?(r=e,t="function"==typeof e?null:e,n):r},n.target=function(t){return arguments.length?(u=t,e="function"==typeof t?null:t,n):u},n.precision=function(){return arguments.length?n:0},n},ta.geo.interpolate=function(n,t){return Mr(n[0]*Da,n[1]*Da,t[0]*Da,t[1]*Da)},ta.geo.length=function(n){return Yc=0,ta.geo.stream(n,Zc),Yc};var Yc,Zc={sphere:b,point:b,lineStart:xr,lineEnd:b,polygonStart:b,polygonEnd:b},Vc=br(function(n){return Math.sqrt(2/(1+n))},function(n){return 2*Math.asin(n/2)});(ta.geo.azimuthalEqualArea=function(){return ur(Vc)}).raw=Vc;var Xc=br(function(n){var t=Math.acos(n);return t&&t/Math.sin(t)},y);(ta.geo.azimuthalEquidistant=function(){return ur(Xc)}).raw=Xc,(ta.geo.conicConformal=function(){return Ye(_r)}).raw=_r,(ta.geo.conicEquidistant=function(){return Ye(wr)}).raw=wr;var $c=br(function(n){return 1/n},Math.atan);(ta.geo.gnomonic=function(){return ur($c)}).raw=$c,Sr.invert=function(n,t){return[n,2*Math.atan(Math.exp(t))-Ra]},(ta.geo.mercator=function(){return kr(Sr)}).raw=Sr;var Bc=br(function(){return 1},Math.asin);(ta.geo.orthographic=function(){return ur(Bc)}).raw=Bc;var Wc=br(function(n){return 1/(1+n)},function(n){return 2*Math.atan(n)});(ta.geo.stereographic=function(){return ur(Wc)}).raw=Wc,Er.invert=function(n,t){return[-t,2*Math.atan(Math.exp(n))-Ra]},(ta.geo.transverseMercator=function(){var n=kr(Er),t=n.center,e=n.rotate;return n.center=function(n){return n?t([-n[1],n[0]]):(n=t(),[n[1],-n[0]])},n.rotate=function(n){return n?e([n[0],n[1],n.length>2?n[2]+90:90]):(n=e(),[n[0],n[1],n[2]-90])},e([0,0,90])}).raw=Er,ta.geom={},ta.geom.hull=function(n){function t(n){if(n.length<3)return[];var t,u=Et(e),i=Et(r),o=n.length,a=[],c=[];for(t=0;o>t;t++)a.push([+u.call(this,n[t],t),+i.call(this,n[t],t),t]);for(a.sort(zr),t=0;o>t;t++)c.push([a[t][0],-a[t][1]]);var l=Cr(a),s=Cr(c),f=s[0]===l[0],h=s[s.length-1]===l[l.length-1],g=[];for(t=l.length-1;t>=0;--t)g.push(n[a[l[t]][2]]);for(t=+f;t<s.length-h;++t)g.push(n[a[s[t]][2]]);return g}var e=Ar,r=Nr;return arguments.length?t(n):(t.x=function(n){return arguments.length?(e=n,t):e},t.y=function(n){return arguments.length?(r=n,t):r},t)},ta.geom.polygon=function(n){return ya(n,Jc),n};var Jc=ta.geom.polygon.prototype=[];Jc.area=function(){for(var n,t=-1,e=this.length,r=this[e-1],u=0;++t<e;)n=r,r=this[t],u+=n[1]*r[0]-n[0]*r[1];return.5*u},Jc.centroid=function(n){var t,e,r=-1,u=this.length,i=0,o=0,a=this[u-1];for(arguments.length||(n=-1/(6*this.area()));++r<u;)t=a,a=this[r],e=t[0]*a[1]-a[0]*t[1],i+=(t[0]+a[0])*e,o+=(t[1]+a[1])*e;return[i*n,o*n]},Jc.clip=function(n){for(var t,e,r,u,i,o,a=Tr(n),c=-1,l=this.length-Tr(this),s=this[l-1];++c<l;){for(t=n.slice(),n.length=0,u=this[c],i=t[(r=t.length-a)-1],e=-1;++e<r;)o=t[e],qr(o,s,u)?(qr(i,s,u)||n.push(Lr(i,o,s,u)),n.push(o)):qr(i,s,u)&&n.push(Lr(i,o,s,u)),i=o;a&&n.push(n[0]),s=u}return n};var Gc,Kc,Qc,nl,tl,el=[],rl=[];Or.prototype.prepare=function(){for(var n,t=this.edges,e=t.length;e--;)n=t[e].edge,n.b&&n.a||t.splice(e,1);return t.sort(Yr),t.length},Qr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nu.prototype={insert:function(n,t){var e,r,u;if(n){if(t.P=n,t.N=n.N,n.N&&(n.N.P=t),n.N=t,n.R){for(n=n.R;n.L;)n=n.L;n.L=t}else n.R=t;e=n}else this._?(n=uu(this._),t.P=null,t.N=n,n.P=n.L=t,e=n):(t.P=t.N=null,this._=t,e=null);for(t.L=t.R=null,t.U=e,t.C=!0,n=t;e&&e.C;)r=e.U,e===r.L?(u=r.R,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.R&&(eu(this,e),n=e,e=n.U),e.C=!1,r.C=!0,ru(this,r))):(u=r.L,u&&u.C?(e.C=u.C=!1,r.C=!0,n=r):(n===e.L&&(ru(this,e),n=e,e=n.U),e.C=!1,r.C=!0,eu(this,r))),e=n.U;this._.C=!1},remove:function(n){n.N&&(n.N.P=n.P),n.P&&(n.P.N=n.N),n.N=n.P=null;var t,e,r,u=n.U,i=n.L,o=n.R;if(e=i?o?uu(o):i:o,u?u.L===n?u.L=e:u.R=e:this._=e,i&&o?(r=e.C,e.C=n.C,e.L=i,i.U=e,e!==o?(u=e.U,e.U=n.U,n=e.R,u.L=n,e.R=o,o.U=e):(e.U=u,u=e,n=e.R)):(r=n.C,n=e),n&&(n.U=u),!r){if(n&&n.C)return void(n.C=!1);do{if(n===this._)break;if(n===u.L){if(t=u.R,t.C&&(t.C=!1,u.C=!0,eu(this,u),t=u.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ru(this,t),t=u.R),t.C=u.C,u.C=t.R.C=!1,eu(this,u),n=this._;break}}else if(t=u.L,t.C&&(t.C=!1,u.C=!0,ru(this,u),t=u.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,eu(this,t),t=u.L),t.C=u.C,u.C=t.L.C=!1,ru(this,u),n=this._;break}t.C=!0,n=u,u=u.U}while(!n.C);n&&(n.C=!1)}}},ta.geom.voronoi=function(n){function t(n){var t=new Array(n.length),r=a[0][0],u=a[0][1],i=a[1][0],o=a[1][1];return iu(e(n),a).cells.forEach(function(e,a){var c=e.edges,l=e.site,s=t[a]=c.length?c.map(function(n){var t=n.start();return[t.x,t.y]}):l.x>=r&&l.x<=i&&l.y>=u&&l.y<=o?[[r,o],[i,o],[i,u],[r,u]]:[];s.point=n[a]}),t}function e(n){return n.map(function(n,t){return{x:Math.round(i(n,t)/Ca)*Ca,y:Math.round(o(n,t)/Ca)*Ca,i:t}})}var r=Ar,u=Nr,i=r,o=u,a=ul;return n?t(n):(t.links=function(n){return iu(e(n)).edges.filter(function(n){return n.l&&n.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},t.triangles=function(n){var t=[];return iu(e(n)).cells.forEach(function(e,r){for(var u,i,o=e.site,a=e.edges.sort(Yr),c=-1,l=a.length,s=a[l-1].edge,f=s.l===o?s.r:s.l;++c<l;)u=s,i=f,s=a[c].edge,f=s.l===o?s.r:s.l,r<i.i&&r<f.i&&au(o,i,f)<0&&t.push([n[r],n[i.i],n[f.i]])}),t},t.x=function(n){return arguments.length?(i=Et(r=n),t):r},t.y=function(n){return arguments.length?(o=Et(u=n),t):u},t.clipExtent=function(n){return arguments.length?(a=null==n?ul:n,t):a===ul?null:a},t.size=function(n){return arguments.length?t.clipExtent(n&&[[0,0],n]):a===ul?null:a&&a[1]},t)};var ul=[[-1e6,-1e6],[1e6,1e6]];ta.geom.delaunay=function(n){return ta.geom.voronoi().triangles(n)},ta.geom.quadtree=function(n,t,e,r,u){function i(n){function i(n,t,e,r,u,i,o,a){if(!isNaN(e)&&!isNaN(r))if(n.leaf){var c=n.x,s=n.y;if(null!=c)if(ga(c-e)+ga(s-r)<.01)l(n,t,e,r,u,i,o,a);else{var f=n.point;n.x=n.y=n.point=null,l(n,f,c,s,u,i,o,a),l(n,t,e,r,u,i,o,a)}else n.x=e,n.y=r,n.point=t}else l(n,t,e,r,u,i,o,a)}function l(n,t,e,r,u,o,a,c){var l=.5*(u+a),s=.5*(o+c),f=e>=l,h=r>=s,g=h<<1|f;n.leaf=!1,n=n.nodes[g]||(n.nodes[g]=su()),f?u=l:a=l,h?o=s:c=s,i(n,t,e,r,u,o,a,c)}var s,f,h,g,p,v,d,m,y,M=Et(a),x=Et(c);if(null!=t)v=t,d=e,m=r,y=u;else if(m=y=-(v=d=1/0),f=[],h=[],p=n.length,o)for(g=0;p>g;++g)s=n[g],s.x<v&&(v=s.x),s.y<d&&(d=s.y),s.x>m&&(m=s.x),s.y>y&&(y=s.y),f.push(s.x),h.push(s.y);else for(g=0;p>g;++g){var b=+M(s=n[g],g),_=+x(s,g);v>b&&(v=b),d>_&&(d=_),b>m&&(m=b),_>y&&(y=_),f.push(b),h.push(_)}var w=m-v,S=y-d;w>S?y=d+w:m=v+S;var k=su();if(k.add=function(n){i(k,n,+M(n,++g),+x(n,g),v,d,m,y)},k.visit=function(n){fu(n,k,v,d,m,y)},k.find=function(n){return hu(k,n[0],n[1],v,d,m,y)},g=-1,null==t){for(;++g<p;)i(k,n[g],f[g],h[g],v,d,m,y);--g}else n.forEach(k.add);return f=h=n=s=null,k}var o,a=Ar,c=Nr;return(o=arguments.length)?(a=cu,c=lu,3===o&&(u=e,r=t,e=t=0),i(n)):(i.x=function(n){return arguments.length?(a=n,i):a},i.y=function(n){return arguments.length?(c=n,i):c},i.extent=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=+n[0][0],e=+n[0][1],r=+n[1][0],u=+n[1][1]),i):null==t?null:[[t,e],[r,u]]},i.size=function(n){return arguments.length?(null==n?t=e=r=u=null:(t=e=0,r=+n[0],u=+n[1]),i):null==t?null:[r-t,u-e]},i)},ta.interpolateRgb=gu,ta.interpolateObject=pu,ta.interpolateNumber=vu,ta.interpolateString=du;var il=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ol=new RegExp(il.source,"g");ta.interpolate=mu,ta.interpolators=[function(n,t){var e=typeof t;return("string"===e?Ga.has(t)||/^(#|rgb\(|hsl\()/.test(t)?gu:du:t instanceof ot?gu:Array.isArray(t)?yu:"object"===e&&isNaN(t)?pu:vu)(n,t)}],ta.interpolateArray=yu;var al=function(){return y},cl=ta.map({linear:al,poly:ku,quad:function(){return _u},cubic:function(){return wu},sin:function(){return Eu},exp:function(){return Au},circle:function(){return Nu},elastic:Cu,back:zu,bounce:function(){return qu}}),ll=ta.map({"in":y,out:xu,"in-out":bu,"out-in":function(n){return bu(xu(n))}});ta.ease=function(n){var t=n.indexOf("-"),e=t>=0?n.slice(0,t):n,r=t>=0?n.slice(t+1):"in";return e=cl.get(e)||al,r=ll.get(r)||y,Mu(r(e.apply(null,ea.call(arguments,1))))},ta.interpolateHcl=Lu,ta.interpolateHsl=Tu,ta.interpolateLab=Ru,ta.interpolateRound=Du,ta.transform=function(n){var t=ua.createElementNS(ta.ns.prefix.svg,"g");return(ta.transform=function(n){if(null!=n){t.setAttribute("transform",n);var e=t.transform.baseVal.consolidate()}return new Pu(e?e.matrix:sl)})(n)},Pu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var sl={a:1,b:0,c:0,d:1,e:0,f:0};ta.interpolateTransform=Hu,ta.layout={},ta.layout.bundle=function(){return function(n){for(var t=[],e=-1,r=n.length;++e<r;)t.push(Yu(n[e]));return t}},ta.layout.chord=function(){function n(){var n,l,f,h,g,p={},v=[],d=ta.range(i),m=[];for(e=[],r=[],n=0,h=-1;++h<i;){for(l=0,g=-1;++g<i;)l+=u[h][g];v.push(l),m.push(ta.range(i)),n+=l}for(o&&d.sort(function(n,t){return o(v[n],v[t])}),a&&m.forEach(function(n,t){n.sort(function(n,e){return a(u[t][n],u[t][e])})}),n=(La-s*i)/n,l=0,h=-1;++h<i;){for(f=l,g=-1;++g<i;){var y=d[h],M=m[y][g],x=u[y][M],b=l,_=l+=x*n;p[y+"-"+M]={index:y,subindex:M,startAngle:b,endAngle:_,value:x}}r[y]={index:y,startAngle:f,endAngle:l,value:(l-f)/n},l+=s}for(h=-1;++h<i;)for(g=h-1;++g<i;){var w=p[h+"-"+g],S=p[g+"-"+h];(w.value||S.value)&&e.push(w.value<S.value?{source:S,target:w}:{source:w,target:S})}c&&t()}function t(){e.sort(function(n,t){return c((n.source.value+n.target.value)/2,(t.source.value+t.target.value)/2)})}var e,r,u,i,o,a,c,l={},s=0;return l.matrix=function(n){return arguments.length?(i=(u=n)&&u.length,e=r=null,l):u},l.padding=function(n){return arguments.length?(s=n,e=r=null,l):s},l.sortGroups=function(n){return arguments.length?(o=n,e=r=null,l):o},l.sortSubgroups=function(n){return arguments.length?(a=n,e=null,l):a},l.sortChords=function(n){return arguments.length?(c=n,e&&t(),l):c},l.chords=function(){return e||n(),e},l.groups=function(){return r||n(),r},l},ta.layout.force=function(){function n(n){return function(t,e,r,u){if(t.point!==n){var i=t.cx-n.x,o=t.cy-n.y,a=u-e,c=i*i+o*o;if(c>a*a/d){if(p>c){var l=t.charge/c;n.px-=i*l,n.py-=o*l}return!0}if(t.point&&c&&p>c){var l=t.pointCharge/c;n.px-=i*l,n.py-=o*l}}return!t.charge}}function t(n){n.px=ta.event.x,n.py=ta.event.y,a.resume()}var e,r,u,i,o,a={},c=ta.dispatch("start","tick","end"),l=[1,1],s=.9,f=fl,h=hl,g=-30,p=gl,v=.1,d=.64,m=[],M=[];return a.tick=function(){if((r*=.99)<.005)return c.end({type:"end",alpha:r=0}),!0;var t,e,a,f,h,p,d,y,x,b=m.length,_=M.length;for(e=0;_>e;++e)a=M[e],f=a.source,h=a.target,y=h.x-f.x,x=h.y-f.y,(p=y*y+x*x)&&(p=r*i[e]*((p=Math.sqrt(p))-u[e])/p,y*=p,x*=p,h.x-=y*(d=f.weight/(h.weight+f.weight)),h.y-=x*d,f.x+=y*(d=1-d),f.y+=x*d);if((d=r*v)&&(y=l[0]/2,x=l[1]/2,e=-1,d))for(;++e<b;)a=m[e],a.x+=(y-a.x)*d,a.y+=(x-a.y)*d;if(g)for(Ju(t=ta.geom.quadtree(m),r,o),e=-1;++e<b;)(a=m[e]).fixed||t.visit(n(a));for(e=-1;++e<b;)a=m[e],a.fixed?(a.x=a.px,a.y=a.py):(a.x-=(a.px-(a.px=a.x))*s,a.y-=(a.py-(a.py=a.y))*s);c.tick({type:"tick",alpha:r})},a.nodes=function(n){return arguments.length?(m=n,a):m},a.links=function(n){return arguments.length?(M=n,a):M},a.size=function(n){return arguments.length?(l=n,a):l},a.linkDistance=function(n){return arguments.length?(f="function"==typeof n?n:+n,a):f},a.distance=a.linkDistance,a.linkStrength=function(n){return arguments.length?(h="function"==typeof n?n:+n,a):h},a.friction=function(n){return arguments.length?(s=+n,a):s},a.charge=function(n){return arguments.length?(g="function"==typeof n?n:+n,a):g},a.chargeDistance=function(n){return arguments.length?(p=n*n,a):Math.sqrt(p)},a.gravity=function(n){return arguments.length?(v=+n,a):v},a.theta=function(n){return arguments.length?(d=n*n,a):Math.sqrt(d)},a.alpha=function(n){return arguments.length?(n=+n,r?r=n>0?n:0:n>0&&(c.start({type:"start",alpha:r=n}),ta.timer(a.tick)),a):r},a.start=function(){function n(n,r){if(!e){for(e=new Array(c),a=0;c>a;++a)e[a]=[];for(a=0;s>a;++a){var u=M[a];e[u.source.index].push(u.target),e[u.target.index].push(u.source)}}for(var i,o=e[t],a=-1,l=o.length;++a<l;)if(!isNaN(i=o[a][n]))return i;return Math.random()*r}var t,e,r,c=m.length,s=M.length,p=l[0],v=l[1];for(t=0;c>t;++t)(r=m[t]).index=t,r.weight=0;for(t=0;s>t;++t)r=M[t],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;c>t;++t)r=m[t],isNaN(r.x)&&(r.x=n("x",p)),isNaN(r.y)&&(r.y=n("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(u=[],"function"==typeof f)for(t=0;s>t;++t)u[t]=+f.call(this,M[t],t);else for(t=0;s>t;++t)u[t]=f;if(i=[],"function"==typeof h)for(t=0;s>t;++t)i[t]=+h.call(this,M[t],t);else for(t=0;s>t;++t)i[t]=h;if(o=[],"function"==typeof g)for(t=0;c>t;++t)o[t]=+g.call(this,m[t],t);else for(t=0;c>t;++t)o[t]=g;return a.resume()},a.resume=function(){return a.alpha(.1)},a.stop=function(){return a.alpha(0)},a.drag=function(){return e||(e=ta.behavior.drag().origin(y).on("dragstart.force",Xu).on("drag.force",t).on("dragend.force",$u)),arguments.length?void this.on("mouseover.force",Bu).on("mouseout.force",Wu).call(e):e},ta.rebind(a,c,"on")};var fl=20,hl=1,gl=1/0;ta.layout.hierarchy=function(){function n(u){var i,o=[u],a=[];for(u.depth=0;null!=(i=o.pop());)if(a.push(i),(l=e.call(n,i,i.depth))&&(c=l.length)){for(var c,l,s;--c>=0;)o.push(s=l[c]),s.parent=i,s.depth=i.depth+1;r&&(i.value=0),i.children=l}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return Qu(u,function(n){var e,u;t&&(e=n.children)&&e.sort(t),r&&(u=n.parent)&&(u.value+=n.value)}),a}var t=ei,e=ni,r=ti;return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(Ku(t,function(n){n.children&&(n.value=0)}),Qu(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},ta.layout.partition=function(){function n(t,e,r,u){var i=t.children;if(t.x=e,t.y=t.depth*u,t.dx=r,t.dy=u,i&&(o=i.length)){var o,a,c,l=-1;for(r=t.value?r/t.value:0;++l<o;)n(a=i[l],e,c=a.value*r,u),e+=c}}function t(n){var e=n.children,r=0;if(e&&(u=e.length))for(var u,i=-1;++i<u;)r=Math.max(r,t(e[i]));return 1+r}function e(e,i){var o=r.call(this,e,i);return n(o[0],0,u[0],u[1]/t(o[0])),o}var r=ta.layout.hierarchy(),u=[1,1];return e.size=function(n){return arguments.length?(u=n,e):u},Gu(e,r)},ta.layout.pie=function(){function n(o){var a,c=o.length,l=o.map(function(e,r){return+t.call(n,e,r)}),s=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof u?u.apply(this,arguments):u)-s,h=Math.min(Math.abs(f)/c,+("function"==typeof i?i.apply(this,arguments):i)),g=h*(0>f?-1:1),p=(f-c*g)/ta.sum(l),v=ta.range(c),d=[];return null!=e&&v.sort(e===pl?function(n,t){return l[t]-l[n]}:function(n,t){return e(o[n],o[t])}),v.forEach(function(n){d[n]={data:o[n],value:a=l[n],startAngle:s,endAngle:s+=a*p+g,padAngle:h}}),d}var t=Number,e=pl,r=0,u=La,i=0;return n.value=function(e){return arguments.length?(t=e,n):t},n.sort=function(t){return arguments.length?(e=t,n):e},n.startAngle=function(t){return arguments.length?(r=t,n):r},n.endAngle=function(t){return arguments.length?(u=t,n):u},n.padAngle=function(t){return arguments.length?(i=t,n):i},n};var pl={};ta.layout.stack=function(){function n(a,c){if(!(h=a.length))return a;var l=a.map(function(e,r){return t.call(n,e,r)}),s=l.map(function(t){return t.map(function(t,e){return[i.call(n,t,e),o.call(n,t,e)]})}),f=e.call(n,s,c);l=ta.permute(l,f),s=ta.permute(s,f);var h,g,p,v,d=r.call(n,s,c),m=l[0].length;for(p=0;m>p;++p)for(u.call(n,l[0][p],v=d[p],s[0][p][1]),g=1;h>g;++g)u.call(n,l[g][p],v+=s[g-1][p][1],s[g][p][1]);return a}var t=y,e=ai,r=ci,u=oi,i=ui,o=ii;return n.values=function(e){return arguments.length?(t=e,n):t},n.order=function(t){return arguments.length?(e="function"==typeof t?t:vl.get(t)||ai,n):e},n.offset=function(t){return arguments.length?(r="function"==typeof t?t:dl.get(t)||ci,n):r},n.x=function(t){return arguments.length?(i=t,n):i},n.y=function(t){return arguments.length?(o=t,n):o},n.out=function(t){return arguments.length?(u=t,n):u},n};var vl=ta.map({"inside-out":function(n){var t,e,r=n.length,u=n.map(li),i=n.map(si),o=ta.range(r).sort(function(n,t){return u[n]-u[t]}),a=0,c=0,l=[],s=[];for(t=0;r>t;++t)e=o[t],c>a?(a+=i[e],l.push(e)):(c+=i[e],s.push(e));return s.reverse().concat(l)},reverse:function(n){return ta.range(n.length).reverse()},"default":ai}),dl=ta.map({silhouette:function(n){var t,e,r,u=n.length,i=n[0].length,o=[],a=0,c=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];r>a&&(a=r),o.push(r)}for(e=0;i>e;++e)c[e]=(a-o[e])/2;return c},wiggle:function(n){var t,e,r,u,i,o,a,c,l,s=n.length,f=n[0],h=f.length,g=[];for(g[0]=c=l=0,e=1;h>e;++e){for(t=0,u=0;s>t;++t)u+=n[t][e][1];for(t=0,i=0,a=f[e][0]-f[e-1][0];s>t;++t){for(r=0,o=(n[t][e][1]-n[t][e-1][1])/(2*a);t>r;++r)o+=(n[r][e][1]-n[r][e-1][1])/a;i+=o*n[t][e][1]}g[e]=c-=u?i/u*a:0,l>c&&(l=c)}for(e=0;h>e;++e)g[e]-=l;return g},expand:function(n){var t,e,r,u=n.length,i=n[0].length,o=1/u,a=[];for(e=0;i>e;++e){for(t=0,r=0;u>t;t++)r+=n[t][e][1];if(r)for(t=0;u>t;t++)n[t][e][1]/=r;else for(t=0;u>t;t++)n[t][e][1]=o}for(e=0;i>e;++e)a[e]=0;return a},zero:ci});ta.layout.histogram=function(){function n(n,i){for(var o,a,c=[],l=n.map(e,this),s=r.call(this,l,i),f=u.call(this,s,l,i),i=-1,h=l.length,g=f.length-1,p=t?1:1/h;++i<g;)o=c[i]=[],o.dx=f[i+1]-(o.x=f[i]),o.y=0;if(g>0)for(i=-1;++i<h;)a=l[i],a>=s[0]&&a<=s[1]&&(o=c[ta.bisect(f,a,1,g)-1],o.y+=p,o.push(n[i]));return c}var t=!0,e=Number,r=pi,u=hi;return n.value=function(t){return arguments.length?(e=t,n):e},n.range=function(t){return arguments.length?(r=Et(t),n):r},n.bins=function(t){return arguments.length?(u="number"==typeof t?function(n){return gi(n,t)}:Et(t),n):u},n.frequency=function(e){return arguments.length?(t=!!e,n):t},n},ta.layout.pack=function(){function n(n,i){var o=e.call(this,n,i),a=o[0],c=u[0],l=u[1],s=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(a.x=a.y=0,Qu(a,function(n){n.r=+s(n.value)}),Qu(a,Mi),r){var f=r*(t?1:Math.max(2*a.r/c,2*a.r/l))/2;Qu(a,function(n){n.r+=f}),Qu(a,Mi),Qu(a,function(n){n.r-=f})}return _i(a,c/2,l/2,t?1:1/Math.max(2*a.r/c,2*a.r/l)),o}var t,e=ta.layout.hierarchy().sort(vi),r=0,u=[1,1];return n.size=function(t){return arguments.length?(u=t,n):u},n.radius=function(e){return arguments.length?(t=null==e||"function"==typeof e?e:+e,n):t},n.padding=function(t){return arguments.length?(r=+t,n):r},Gu(n,e)},ta.layout.tree=function(){function n(n,u){var s=o.call(this,n,u),f=s[0],h=t(f);if(Qu(h,e),h.parent.m=-h.z,Ku(h,r),l)Ku(f,i);else{var g=f,p=f,v=f;Ku(f,function(n){n.x<g.x&&(g=n),n.x>p.x&&(p=n),n.depth>v.depth&&(v=n)});var d=a(g,p)/2-g.x,m=c[0]/(p.x+a(p,g)/2+d),y=c[1]/(v.depth||1);Ku(f,function(n){n.x=(n.x+d)*m,n.y=n.depth*y})}return s}function t(n){for(var t,e={A:null,children:[n]},r=[e];null!=(t=r.pop());)for(var u,i=t.children,o=0,a=i.length;a>o;++o)r.push((i[o]=u={_:i[o],parent:t,children:(u=i[o].children)&&u.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=u);return e.children[0]}function e(n){var t=n.children,e=n.parent.children,r=n.i?e[n.i-1]:null;if(t.length){Ni(n);var i=(t[0].z+t[t.length-1].z)/2;r?(n.z=r.z+a(n._,r._),n.m=n.z-i):n.z=i}else r&&(n.z=r.z+a(n._,r._));n.parent.A=u(n,r,n.parent.A||e[0])}function r(n){n._.x=n.z+n.parent.m,n.m+=n.parent.m}function u(n,t,e){if(t){for(var r,u=n,i=n,o=t,c=u.parent.children[0],l=u.m,s=i.m,f=o.m,h=c.m;o=Ei(o),u=ki(u),o&&u;)c=ki(c),i=Ei(i),i.a=n,r=o.z+f-u.z-l+a(o._,u._),r>0&&(Ai(Ci(o,n,e),n,r),l+=r,s+=r),f+=o.m,l+=u.m,h+=c.m,s+=i.m;o&&!Ei(i)&&(i.t=o,i.m+=f-s),u&&!ki(c)&&(c.t=u,c.m+=l-h,e=n)}return e}function i(n){n.x*=c[0],n.y=n.depth*c[1]}var o=ta.layout.hierarchy().sort(null).value(null),a=Si,c=[1,1],l=null;return n.separation=function(t){return arguments.length?(a=t,n):a},n.size=function(t){return arguments.length?(l=null==(c=t)?i:null,n):l?null:c},n.nodeSize=function(t){return arguments.length?(l=null==(c=t)?null:i,n):l?c:null},Gu(n,o)},ta.layout.cluster=function(){function n(n,i){var o,a=t.call(this,n,i),c=a[0],l=0;Qu(c,function(n){var t=n.children;t&&t.length?(n.x=qi(t),n.y=zi(t)):(n.x=o?l+=e(n,o):0,n.y=0,o=n)});var s=Li(c),f=Ti(c),h=s.x-e(s,f)/2,g=f.x+e(f,s)/2;return Qu(c,u?function(n){n.x=(n.x-c.x)*r[0],n.y=(c.y-n.y)*r[1]}:function(n){n.x=(n.x-h)/(g-h)*r[0],n.y=(1-(c.y?n.y/c.y:1))*r[1]}),a}var t=ta.layout.hierarchy().sort(null).value(null),e=Si,r=[1,1],u=!1;return n.separation=function(t){return arguments.length?(e=t,n):e},n.size=function(t){return arguments.length?(u=null==(r=t),n):u?null:r},n.nodeSize=function(t){return arguments.length?(u=null!=(r=t),n):u?r:null},Gu(n,t)},ta.layout.treemap=function(){function n(n,t){for(var e,r,u=-1,i=n.length;++u<i;)r=(e=n[u]).value*(0>t?0:t),e.area=isNaN(r)||0>=r?0:r}function t(e){var i=e.children;if(i&&i.length){var o,a,c,l=f(e),s=[],h=i.slice(),p=1/0,v="slice"===g?l.dx:"dice"===g?l.dy:"slice-dice"===g?1&e.depth?l.dy:l.dx:Math.min(l.dx,l.dy);for(n(h,l.dx*l.dy/e.value),s.area=0;(c=h.length)>0;)s.push(o=h[c-1]),s.area+=o.area,"squarify"!==g||(a=r(s,v))<=p?(h.pop(),p=a):(s.area-=s.pop().area,u(s,v,l,!1),v=Math.min(l.dx,l.dy),s.length=s.area=0,p=1/0);s.length&&(u(s,v,l,!0),s.length=s.area=0),i.forEach(t)}}function e(t){var r=t.children;if(r&&r.length){var i,o=f(t),a=r.slice(),c=[];for(n(a,o.dx*o.dy/t.value),c.area=0;i=a.pop();)c.push(i),c.area+=i.area,null!=i.z&&(u(c,i.z?o.dx:o.dy,o,!a.length),c.length=c.area=0);r.forEach(e)}}function r(n,t){for(var e,r=n.area,u=0,i=1/0,o=-1,a=n.length;++o<a;)(e=n[o].area)&&(i>e&&(i=e),e>u&&(u=e));return r*=r,t*=t,r?Math.max(t*u*p/r,r/(t*i*p)):1/0}function u(n,t,e,r){var u,i=-1,o=n.length,a=e.x,l=e.y,s=t?c(n.area/t):0;if(t==e.dx){for((r||s>e.dy)&&(s=e.dy);++i<o;)u=n[i],u.x=a,u.y=l,u.dy=s,a+=u.dx=Math.min(e.x+e.dx-a,s?c(u.area/s):0);u.z=!0,u.dx+=e.x+e.dx-a,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++i<o;)u=n[i],u.x=a,u.y=l,u.dx=s,l+=u.dy=Math.min(e.y+e.dy-l,s?c(u.area/s):0);u.z=!1,u.dy+=e.y+e.dy-l,e.x+=s,e.dx-=s}}function i(r){var u=o||a(r),i=u[0];return i.x=0,i.y=0,i.dx=l[0],i.dy=l[1],o&&a.revalue(i),n([i],i.dx*i.dy/i.value),(o?e:t)(i),h&&(o=u),u}var o,a=ta.layout.hierarchy(),c=Math.round,l=[1,1],s=null,f=Ri,h=!1,g="squarify",p=.5*(1+Math.sqrt(5));
return i.size=function(n){return arguments.length?(l=n,i):l},i.padding=function(n){function t(t){var e=n.call(i,t,t.depth);return null==e?Ri(t):Di(t,"number"==typeof e?[e,e,e,e]:e)}function e(t){return Di(t,n)}if(!arguments.length)return s;var r;return f=null==(s=n)?Ri:"function"==(r=typeof n)?t:"number"===r?(n=[n,n,n,n],e):e,i},i.round=function(n){return arguments.length?(c=n?Math.round:Number,i):c!=Number},i.sticky=function(n){return arguments.length?(h=n,o=null,i):h},i.ratio=function(n){return arguments.length?(p=n,i):p},i.mode=function(n){return arguments.length?(g=n+"",i):g},Gu(i,a)},ta.random={normal:function(n,t){var e=arguments.length;return 2>e&&(t=1),1>e&&(n=0),function(){var e,r,u;do e=2*Math.random()-1,r=2*Math.random()-1,u=e*e+r*r;while(!u||u>1);return n+t*e*Math.sqrt(-2*Math.log(u)/u)}},logNormal:function(){var n=ta.random.normal.apply(ta,arguments);return function(){return Math.exp(n())}},bates:function(n){var t=ta.random.irwinHall(n);return function(){return t()/n}},irwinHall:function(n){return function(){for(var t=0,e=0;n>e;e++)t+=Math.random();return t}}},ta.scale={};var ml={floor:y,ceil:y};ta.scale.linear=function(){return Ii([0,1],[0,1],mu,!1)};var yl={s:1,g:1,p:1,r:1,e:1};ta.scale.log=function(){return Ji(ta.scale.linear().domain([0,1]),10,!0,[1,10])};var Ml=ta.format(".0e"),xl={floor:function(n){return-Math.ceil(-n)},ceil:function(n){return-Math.floor(-n)}};ta.scale.pow=function(){return Gi(ta.scale.linear(),1,[0,1])},ta.scale.sqrt=function(){return ta.scale.pow().exponent(.5)},ta.scale.ordinal=function(){return Qi([],{t:"range",a:[[]]})},ta.scale.category10=function(){return ta.scale.ordinal().range(bl)},ta.scale.category20=function(){return ta.scale.ordinal().range(_l)},ta.scale.category20b=function(){return ta.scale.ordinal().range(wl)},ta.scale.category20c=function(){return ta.scale.ordinal().range(Sl)};var bl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Mt),_l=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Mt),wl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Mt),Sl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Mt);ta.scale.quantile=function(){return no([],[])},ta.scale.quantize=function(){return to(0,1,[0,1])},ta.scale.threshold=function(){return eo([.5],[0,1])},ta.scale.identity=function(){return ro([0,1])},ta.svg={},ta.svg.arc=function(){function n(){var n=Math.max(0,+e.apply(this,arguments)),l=Math.max(0,+r.apply(this,arguments)),s=o.apply(this,arguments)-Ra,f=a.apply(this,arguments)-Ra,h=Math.abs(f-s),g=s>f?0:1;if(n>l&&(p=l,l=n,n=p),h>=Ta)return t(l,g)+(n?t(n,1-g):"")+"Z";var p,v,d,m,y,M,x,b,_,w,S,k,E=0,A=0,N=[];if((m=(+c.apply(this,arguments)||0)/2)&&(d=i===kl?Math.sqrt(n*n+l*l):+i.apply(this,arguments),g||(A*=-1),l&&(A=tt(d/l*Math.sin(m))),n&&(E=tt(d/n*Math.sin(m)))),l){y=l*Math.cos(s+A),M=l*Math.sin(s+A),x=l*Math.cos(f-A),b=l*Math.sin(f-A);var C=Math.abs(f-s-2*A)<=qa?0:1;if(A&&so(y,M,x,b)===g^C){var z=(s+f)/2;y=l*Math.cos(z),M=l*Math.sin(z),x=b=null}}else y=M=0;if(n){_=n*Math.cos(f-E),w=n*Math.sin(f-E),S=n*Math.cos(s+E),k=n*Math.sin(s+E);var q=Math.abs(s-f+2*E)<=qa?0:1;if(E&&so(_,w,S,k)===1-g^q){var L=(s+f)/2;_=n*Math.cos(L),w=n*Math.sin(L),S=k=null}}else _=w=0;if((p=Math.min(Math.abs(l-n)/2,+u.apply(this,arguments)))>.001){v=l>n^g?0:1;var T=null==S?[_,w]:null==x?[y,M]:Lr([y,M],[S,k],[x,b],[_,w]),R=y-T[0],D=M-T[1],P=x-T[0],U=b-T[1],j=1/Math.sin(Math.acos((R*P+D*U)/(Math.sqrt(R*R+D*D)*Math.sqrt(P*P+U*U)))/2),F=Math.sqrt(T[0]*T[0]+T[1]*T[1]);if(null!=x){var H=Math.min(p,(l-F)/(j+1)),O=fo(null==S?[_,w]:[S,k],[y,M],l,H,g),I=fo([x,b],[_,w],l,H,g);p===H?N.push("M",O[0],"A",H,",",H," 0 0,",v," ",O[1],"A",l,",",l," 0 ",1-g^so(O[1][0],O[1][1],I[1][0],I[1][1]),",",g," ",I[1],"A",H,",",H," 0 0,",v," ",I[0]):N.push("M",O[0],"A",H,",",H," 0 1,",v," ",I[0])}else N.push("M",y,",",M);if(null!=S){var Y=Math.min(p,(n-F)/(j-1)),Z=fo([y,M],[S,k],n,-Y,g),V=fo([_,w],null==x?[y,M]:[x,b],n,-Y,g);p===Y?N.push("L",V[0],"A",Y,",",Y," 0 0,",v," ",V[1],"A",n,",",n," 0 ",g^so(V[1][0],V[1][1],Z[1][0],Z[1][1]),",",1-g," ",Z[1],"A",Y,",",Y," 0 0,",v," ",Z[0]):N.push("L",V[0],"A",Y,",",Y," 0 0,",v," ",Z[0])}else N.push("L",_,",",w)}else N.push("M",y,",",M),null!=x&&N.push("A",l,",",l," 0 ",C,",",g," ",x,",",b),N.push("L",_,",",w),null!=S&&N.push("A",n,",",n," 0 ",q,",",1-g," ",S,",",k);return N.push("Z"),N.join("")}function t(n,t){return"M0,"+n+"A"+n+","+n+" 0 1,"+t+" 0,"+-n+"A"+n+","+n+" 0 1,"+t+" 0,"+n}var e=io,r=oo,u=uo,i=kl,o=ao,a=co,c=lo;return n.innerRadius=function(t){return arguments.length?(e=Et(t),n):e},n.outerRadius=function(t){return arguments.length?(r=Et(t),n):r},n.cornerRadius=function(t){return arguments.length?(u=Et(t),n):u},n.padRadius=function(t){return arguments.length?(i=t==kl?kl:Et(t),n):i},n.startAngle=function(t){return arguments.length?(o=Et(t),n):o},n.endAngle=function(t){return arguments.length?(a=Et(t),n):a},n.padAngle=function(t){return arguments.length?(c=Et(t),n):c},n.centroid=function(){var n=(+e.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-Ra;return[Math.cos(t)*n,Math.sin(t)*n]},n};var kl="auto";ta.svg.line=function(){return ho(y)};var El=ta.map({linear:go,"linear-closed":po,step:vo,"step-before":mo,"step-after":yo,basis:So,"basis-open":ko,"basis-closed":Eo,bundle:Ao,cardinal:bo,"cardinal-open":Mo,"cardinal-closed":xo,monotone:To});El.forEach(function(n,t){t.key=n,t.closed=/-closed$/.test(n)});var Al=[0,2/3,1/3,0],Nl=[0,1/3,2/3,0],Cl=[0,1/6,2/3,1/6];ta.svg.line.radial=function(){var n=ho(Ro);return n.radius=n.x,delete n.x,n.angle=n.y,delete n.y,n},mo.reverse=yo,yo.reverse=mo,ta.svg.area=function(){return Do(y)},ta.svg.area.radial=function(){var n=Do(Ro);return n.radius=n.x,delete n.x,n.innerRadius=n.x0,delete n.x0,n.outerRadius=n.x1,delete n.x1,n.angle=n.y,delete n.y,n.startAngle=n.y0,delete n.y0,n.endAngle=n.y1,delete n.y1,n},ta.svg.chord=function(){function n(n,a){var c=t(this,i,n,a),l=t(this,o,n,a);return"M"+c.p0+r(c.r,c.p1,c.a1-c.a0)+(e(c,l)?u(c.r,c.p1,c.r,c.p0):u(c.r,c.p1,l.r,l.p0)+r(l.r,l.p1,l.a1-l.a0)+u(l.r,l.p1,c.r,c.p0))+"Z"}function t(n,t,e,r){var u=t.call(n,e,r),i=a.call(n,u,r),o=c.call(n,u,r)-Ra,s=l.call(n,u,r)-Ra;return{r:i,a0:o,a1:s,p0:[i*Math.cos(o),i*Math.sin(o)],p1:[i*Math.cos(s),i*Math.sin(s)]}}function e(n,t){return n.a0==t.a0&&n.a1==t.a1}function r(n,t,e){return"A"+n+","+n+" 0 "+ +(e>qa)+",1 "+t}function u(n,t,e,r){return"Q 0,0 "+r}var i=mr,o=yr,a=Po,c=ao,l=co;return n.radius=function(t){return arguments.length?(a=Et(t),n):a},n.source=function(t){return arguments.length?(i=Et(t),n):i},n.target=function(t){return arguments.length?(o=Et(t),n):o},n.startAngle=function(t){return arguments.length?(c=Et(t),n):c},n.endAngle=function(t){return arguments.length?(l=Et(t),n):l},n},ta.svg.diagonal=function(){function n(n,u){var i=t.call(this,n,u),o=e.call(this,n,u),a=(i.y+o.y)/2,c=[i,{x:i.x,y:a},{x:o.x,y:a},o];return c=c.map(r),"M"+c[0]+"C"+c[1]+" "+c[2]+" "+c[3]}var t=mr,e=yr,r=Uo;return n.source=function(e){return arguments.length?(t=Et(e),n):t},n.target=function(t){return arguments.length?(e=Et(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},ta.svg.diagonal.radial=function(){var n=ta.svg.diagonal(),t=Uo,e=n.projection;return n.projection=function(n){return arguments.length?e(jo(t=n)):t},n},ta.svg.symbol=function(){function n(n,r){return(zl.get(t.call(this,n,r))||Oo)(e.call(this,n,r))}var t=Ho,e=Fo;return n.type=function(e){return arguments.length?(t=Et(e),n):t},n.size=function(t){return arguments.length?(e=Et(t),n):e},n};var zl=ta.map({circle:Oo,cross:function(n){var t=Math.sqrt(n/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(n){var t=Math.sqrt(n/(2*Ll)),e=t*Ll;return"M0,"+-t+"L"+e+",0 0,"+t+" "+-e+",0Z"},square:function(n){var t=Math.sqrt(n)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(n){var t=Math.sqrt(n/ql),e=t*ql/2;return"M0,"+e+"L"+t+","+-e+" "+-t+","+-e+"Z"},"triangle-up":function(n){var t=Math.sqrt(n/ql),e=t*ql/2;return"M0,"+-e+"L"+t+","+e+" "+-t+","+e+"Z"}});ta.svg.symbolTypes=zl.keys();var ql=Math.sqrt(3),Ll=Math.tan(30*Da);_a.transition=function(n){for(var t,e,r=Tl||++Ul,u=Xo(n),i=[],o=Rl||{time:Date.now(),ease:Su,delay:0,duration:250},a=-1,c=this.length;++a<c;){i.push(t=[]);for(var l=this[a],s=-1,f=l.length;++s<f;)(e=l[s])&&$o(e,s,u,r,o),t.push(e)}return Yo(i,u,r)},_a.interrupt=function(n){return this.each(null==n?Dl:Io(Xo(n)))};var Tl,Rl,Dl=Io(Xo()),Pl=[],Ul=0;Pl.call=_a.call,Pl.empty=_a.empty,Pl.node=_a.node,Pl.size=_a.size,ta.transition=function(n,t){return n&&n.transition?Tl?n.transition(t):n:ta.selection().transition(n)},ta.transition.prototype=Pl,Pl.select=function(n){var t,e,r,u=this.id,i=this.namespace,o=[];n=N(n);for(var a=-1,c=this.length;++a<c;){o.push(t=[]);for(var l=this[a],s=-1,f=l.length;++s<f;)(r=l[s])&&(e=n.call(r,r.__data__,s,a))?("__data__"in r&&(e.__data__=r.__data__),$o(e,s,i,u,r[i][u]),t.push(e)):t.push(null)}return Yo(o,i,u)},Pl.selectAll=function(n){var t,e,r,u,i,o=this.id,a=this.namespace,c=[];n=C(n);for(var l=-1,s=this.length;++l<s;)for(var f=this[l],h=-1,g=f.length;++h<g;)if(r=f[h]){i=r[a][o],e=n.call(r,r.__data__,h,l),c.push(t=[]);for(var p=-1,v=e.length;++p<v;)(u=e[p])&&$o(u,p,a,o,i),t.push(u)}return Yo(c,a,o)},Pl.filter=function(n){var t,e,r,u=[];"function"!=typeof n&&(n=O(n));for(var i=0,o=this.length;o>i;i++){u.push(t=[]);for(var e=this[i],a=0,c=e.length;c>a;a++)(r=e[a])&&n.call(r,r.__data__,a,i)&&t.push(r)}return Yo(u,this.namespace,this.id)},Pl.tween=function(n,t){var e=this.id,r=this.namespace;return arguments.length<2?this.node()[r][e].tween.get(n):Y(this,null==t?function(t){t[r][e].tween.remove(n)}:function(u){u[r][e].tween.set(n,t)})},Pl.attr=function(n,t){function e(){this.removeAttribute(a)}function r(){this.removeAttributeNS(a.space,a.local)}function u(n){return null==n?e:(n+="",function(){var t,e=this.getAttribute(a);return e!==n&&(t=o(e,n),function(n){this.setAttribute(a,t(n))})})}function i(n){return null==n?r:(n+="",function(){var t,e=this.getAttributeNS(a.space,a.local);return e!==n&&(t=o(e,n),function(n){this.setAttributeNS(a.space,a.local,t(n))})})}if(arguments.length<2){for(t in n)this.attr(t,n[t]);return this}var o="transform"==n?Hu:mu,a=ta.ns.qualify(n);return Zo(this,"attr."+n,t,a.local?i:u)},Pl.attrTween=function(n,t){function e(n,e){var r=t.call(this,n,e,this.getAttribute(u));return r&&function(n){this.setAttribute(u,r(n))}}function r(n,e){var r=t.call(this,n,e,this.getAttributeNS(u.space,u.local));return r&&function(n){this.setAttributeNS(u.space,u.local,r(n))}}var u=ta.ns.qualify(n);return this.tween("attr."+n,u.local?r:e)},Pl.style=function(n,e,r){function u(){this.style.removeProperty(n)}function i(e){return null==e?u:(e+="",function(){var u,i=t(this).getComputedStyle(this,null).getPropertyValue(n);return i!==e&&(u=mu(i,e),function(t){this.style.setProperty(n,u(t),r)})})}var o=arguments.length;if(3>o){if("string"!=typeof n){2>o&&(e="");for(r in n)this.style(r,n[r],e);return this}r=""}return Zo(this,"style."+n,e,i)},Pl.styleTween=function(n,e,r){function u(u,i){var o=e.call(this,u,i,t(this).getComputedStyle(this,null).getPropertyValue(n));return o&&function(t){this.style.setProperty(n,o(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+n,u)},Pl.text=function(n){return Zo(this,"text",n,Vo)},Pl.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Pl.ease=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].ease:("function"!=typeof n&&(n=ta.ease.apply(ta,arguments)),Y(this,function(r){r[e][t].ease=n}))},Pl.delay=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].delay:Y(this,"function"==typeof n?function(r,u,i){r[e][t].delay=+n.call(r,r.__data__,u,i)}:(n=+n,function(r){r[e][t].delay=n}))},Pl.duration=function(n){var t=this.id,e=this.namespace;return arguments.length<1?this.node()[e][t].duration:Y(this,"function"==typeof n?function(r,u,i){r[e][t].duration=Math.max(1,n.call(r,r.__data__,u,i))}:(n=Math.max(1,n),function(r){r[e][t].duration=n}))},Pl.each=function(n,t){var e=this.id,r=this.namespace;if(arguments.length<2){var u=Rl,i=Tl;try{Tl=e,Y(this,function(t,u,i){Rl=t[r][e],n.call(t,t.__data__,u,i)})}finally{Rl=u,Tl=i}}else Y(this,function(u){var i=u[r][e];(i.event||(i.event=ta.dispatch("start","end","interrupt"))).on(n,t)});return this},Pl.transition=function(){for(var n,t,e,r,u=this.id,i=++Ul,o=this.namespace,a=[],c=0,l=this.length;l>c;c++){a.push(n=[]);for(var t=this[c],s=0,f=t.length;f>s;s++)(e=t[s])&&(r=e[o][u],$o(e,s,o,i,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),n.push(e)}return Yo(a,o,i)},ta.svg.axis=function(){function n(n){n.each(function(){var n,l=ta.select(this),s=this.__chart__||e,f=this.__chart__=e.copy(),h=null==c?f.ticks?f.ticks.apply(f,a):f.domain():c,g=null==t?f.tickFormat?f.tickFormat.apply(f,a):y:t,p=l.selectAll(".tick").data(h,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ca),d=ta.transition(p.exit()).style("opacity",Ca).remove(),m=ta.transition(p.order()).style("opacity",1),M=Math.max(u,0)+o,x=Ui(f),b=l.selectAll(".domain").data([0]),_=(b.enter().append("path").attr("class","domain"),ta.transition(b));v.append("line"),v.append("text");var w,S,k,E,A=v.select("line"),N=m.select("line"),C=p.select("text").text(g),z=v.select("text"),q=m.select("text"),L="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(n=Bo,w="x",k="y",S="x2",E="y2",C.attr("dy",0>L?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+L*i+"V0H"+x[1]+"V"+L*i)):(n=Wo,w="y",k="x",S="y2",E="x2",C.attr("dy",".32em").style("text-anchor",0>L?"end":"start"),_.attr("d","M"+L*i+","+x[0]+"H0V"+x[1]+"H"+L*i)),A.attr(E,L*u),z.attr(k,L*M),N.attr(S,0).attr(E,L*u),q.attr(w,0).attr(k,L*M),f.rangeBand){var T=f,R=T.rangeBand()/2;s=f=function(n){return T(n)+R}}else s.rangeBand?s=f:d.call(n,f,s);v.call(n,s,f),m.call(n,f,f)})}var t,e=ta.scale.linear(),r=jl,u=6,i=6,o=3,a=[10],c=null;return n.scale=function(t){return arguments.length?(e=t,n):e},n.orient=function(t){return arguments.length?(r=t in Fl?t+"":jl,n):r},n.ticks=function(){return arguments.length?(a=arguments,n):a},n.tickValues=function(t){return arguments.length?(c=t,n):c},n.tickFormat=function(e){return arguments.length?(t=e,n):t},n.tickSize=function(t){var e=arguments.length;return e?(u=+t,i=+arguments[e-1],n):u},n.innerTickSize=function(t){return arguments.length?(u=+t,n):u},n.outerTickSize=function(t){return arguments.length?(i=+t,n):i},n.tickPadding=function(t){return arguments.length?(o=+t,n):o},n.tickSubdivide=function(){return arguments.length&&n},n};var jl="bottom",Fl={top:1,right:1,bottom:1,left:1};ta.svg.brush=function(){function n(t){t.each(function(){var t=ta.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var a=t.selectAll(".resize").data(v,y);a.exit().remove(),a.enter().append("g").attr("class",function(n){return"resize "+n}).style("cursor",function(n){return Hl[n]}).append("rect").attr("x",function(n){return/[ew]$/.test(n)?-3:null}).attr("y",function(n){return/^[ns]/.test(n)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),a.style("display",n.empty()?"none":null);var c,f=ta.transition(t),h=ta.transition(o);l&&(c=Ui(l),h.attr("x",c[0]).attr("width",c[1]-c[0]),r(f)),s&&(c=Ui(s),h.attr("y",c[0]).attr("height",c[1]-c[0]),u(f)),e(f)})}function e(n){n.selectAll(".resize").attr("transform",function(n){return"translate("+f[+/e$/.test(n)]+","+h[+/^s/.test(n)]+")"})}function r(n){n.select(".extent").attr("x",f[0]),n.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function u(n){n.select(".extent").attr("y",h[0]),n.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function i(){function i(){32==ta.event.keyCode&&(C||(M=null,q[0]-=f[1],q[1]-=h[1],C=2),S())}function v(){32==ta.event.keyCode&&2==C&&(q[0]+=f[1],q[1]+=h[1],C=0,S())}function d(){var n=ta.mouse(b),t=!1;x&&(n[0]+=x[0],n[1]+=x[1]),C||(ta.event.altKey?(M||(M=[(f[0]+f[1])/2,(h[0]+h[1])/2]),q[0]=f[+(n[0]<M[0])],q[1]=h[+(n[1]<M[1])]):M=null),A&&m(n,l,0)&&(r(k),t=!0),N&&m(n,s,1)&&(u(k),t=!0),t&&(e(k),w({type:"brush",mode:C?"move":"resize"}))}function m(n,t,e){var r,u,i=Ui(t),c=i[0],l=i[1],s=q[e],v=e?h:f,d=v[1]-v[0];return C&&(c-=s,l-=d+s),r=(e?p:g)?Math.max(c,Math.min(l,n[e])):n[e],C?u=(r+=s)+d:(M&&(s=Math.max(c,Math.min(l,2*M[e]-r))),r>s?(u=r,r=s):u=s),v[0]!=r||v[1]!=u?(e?a=null:o=null,v[0]=r,v[1]=u,!0):void 0}function y(){d(),k.style("pointer-events","all").selectAll(".resize").style("display",n.empty()?"none":null),ta.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),z(),w({type:"brushend"})}var M,x,b=this,_=ta.select(ta.event.target),w=c.of(b,arguments),k=ta.select(b),E=_.datum(),A=!/^(n|s)$/.test(E)&&l,N=!/^(e|w)$/.test(E)&&s,C=_.classed("extent"),z=W(b),q=ta.mouse(b),L=ta.select(t(b)).on("keydown.brush",i).on("keyup.brush",v);if(ta.event.changedTouches?L.on("touchmove.brush",d).on("touchend.brush",y):L.on("mousemove.brush",d).on("mouseup.brush",y),k.interrupt().selectAll("*").interrupt(),C)q[0]=f[0]-q[0],q[1]=h[0]-q[1];else if(E){var T=+/w$/.test(E),R=+/^n/.test(E);x=[f[1-T]-q[0],h[1-R]-q[1]],q[0]=f[T],q[1]=h[R]}else ta.event.altKey&&(M=q.slice());k.style("pointer-events","none").selectAll(".resize").style("display",null),ta.select("body").style("cursor",_.style("cursor")),w({type:"brushstart"}),d()}var o,a,c=E(n,"brushstart","brush","brushend"),l=null,s=null,f=[0,0],h=[0,0],g=!0,p=!0,v=Ol[0];return n.event=function(n){n.each(function(){var n=c.of(this,arguments),t={x:f,y:h,i:o,j:a},e=this.__chart__||t;this.__chart__=t,Tl?ta.select(this).transition().each("start.brush",function(){o=e.i,a=e.j,f=e.x,h=e.y,n({type:"brushstart"})}).tween("brush:brush",function(){var e=yu(f,t.x),r=yu(h,t.y);return o=a=null,function(u){f=t.x=e(u),h=t.y=r(u),n({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,a=t.j,n({type:"brush",mode:"resize"}),n({type:"brushend"})}):(n({type:"brushstart"}),n({type:"brush",mode:"resize"}),n({type:"brushend"}))})},n.x=function(t){return arguments.length?(l=t,v=Ol[!l<<1|!s],n):l},n.y=function(t){return arguments.length?(s=t,v=Ol[!l<<1|!s],n):s},n.clamp=function(t){return arguments.length?(l&&s?(g=!!t[0],p=!!t[1]):l?g=!!t:s&&(p=!!t),n):l&&s?[g,p]:l?g:s?p:null},n.extent=function(t){var e,r,u,i,c;return arguments.length?(l&&(e=t[0],r=t[1],s&&(e=e[0],r=r[0]),o=[e,r],l.invert&&(e=l(e),r=l(r)),e>r&&(c=e,e=r,r=c),(e!=f[0]||r!=f[1])&&(f=[e,r])),s&&(u=t[0],i=t[1],l&&(u=u[1],i=i[1]),a=[u,i],s.invert&&(u=s(u),i=s(i)),u>i&&(c=u,u=i,i=c),(u!=h[0]||i!=h[1])&&(h=[u,i])),n):(l&&(o?(e=o[0],r=o[1]):(e=f[0],r=f[1],l.invert&&(e=l.invert(e),r=l.invert(r)),e>r&&(c=e,e=r,r=c))),s&&(a?(u=a[0],i=a[1]):(u=h[0],i=h[1],s.invert&&(u=s.invert(u),i=s.invert(i)),u>i&&(c=u,u=i,i=c))),l&&s?[[e,u],[r,i]]:l?[e,r]:s&&[u,i])},n.clear=function(){return n.empty()||(f=[0,0],h=[0,0],o=a=null),n},n.empty=function(){return!!l&&f[0]==f[1]||!!s&&h[0]==h[1]},ta.rebind(n,c,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ol=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Il=ac.format=gc.timeFormat,Yl=Il.utc,Zl=Yl("%Y-%m-%dT%H:%M:%S.%LZ");Il.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Jo:Zl,Jo.parse=function(n){var t=new Date(n);return isNaN(t)?null:t},Jo.toString=Zl.toString,ac.second=Ft(function(n){return new cc(1e3*Math.floor(n/1e3))},function(n,t){n.setTime(n.getTime()+1e3*Math.floor(t))},function(n){return n.getSeconds()}),ac.seconds=ac.second.range,ac.seconds.utc=ac.second.utc.range,ac.minute=Ft(function(n){return new cc(6e4*Math.floor(n/6e4))},function(n,t){n.setTime(n.getTime()+6e4*Math.floor(t))},function(n){return n.getMinutes()}),ac.minutes=ac.minute.range,ac.minutes.utc=ac.minute.utc.range,ac.hour=Ft(function(n){var t=n.getTimezoneOffset()/60;return new cc(36e5*(Math.floor(n/36e5-t)+t))},function(n,t){n.setTime(n.getTime()+36e5*Math.floor(t))},function(n){return n.getHours()}),ac.hours=ac.hour.range,ac.hours.utc=ac.hour.utc.range,ac.month=Ft(function(n){return n=ac.day(n),n.setDate(1),n},function(n,t){n.setMonth(n.getMonth()+t)},function(n){return n.getMonth()}),ac.months=ac.month.range,ac.months.utc=ac.month.utc.range;var Vl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Xl=[[ac.second,1],[ac.second,5],[ac.second,15],[ac.second,30],[ac.minute,1],[ac.minute,5],[ac.minute,15],[ac.minute,30],[ac.hour,1],[ac.hour,3],[ac.hour,6],[ac.hour,12],[ac.day,1],[ac.day,2],[ac.week,1],[ac.month,1],[ac.month,3],[ac.year,1]],$l=Il.multi([[".%L",function(n){return n.getMilliseconds()}],[":%S",function(n){return n.getSeconds()}],["%I:%M",function(n){return n.getMinutes()}],["%I %p",function(n){return n.getHours()}],["%a %d",function(n){return n.getDay()&&1!=n.getDate()}],["%b %d",function(n){return 1!=n.getDate()}],["%B",function(n){return n.getMonth()}],["%Y",Ne]]),Bl={range:function(n,t,e){return ta.range(Math.ceil(n/e)*e,+t,e).map(Ko)},floor:y,ceil:y};Xl.year=ac.year,ac.scale=function(){return Go(ta.scale.linear(),Xl,$l)};var Wl=Xl.map(function(n){return[n[0].utc,n[1]]}),Jl=Yl.multi([[".%L",function(n){return n.getUTCMilliseconds()}],[":%S",function(n){return n.getUTCSeconds()}],["%I:%M",function(n){return n.getUTCMinutes()}],["%I %p",function(n){return n.getUTCHours()}],["%a %d",function(n){return n.getUTCDay()&&1!=n.getUTCDate()}],["%b %d",function(n){return 1!=n.getUTCDate()}],["%B",function(n){return n.getUTCMonth()}],["%Y",Ne]]);Wl.year=ac.year.utc,ac.scale.utc=function(){return Go(ta.scale.linear(),Wl,Jl)},ta.text=At(function(n){return n.responseText}),ta.json=function(n,t){return Nt(n,"application/json",Qo,t)},ta.html=function(n,t){return Nt(n,"text/html",na,t)},ta.xml=At(function(n){return n.responseXML}),"function"==typeof define&&define.amd?define(ta):"object"==typeof module&&module.exports&&(module.exports=ta),this.d3=ta}();
/**
 * @license
 * lodash 3.6.0 (Custom Build) lodash.com/license | Underscore.js 1.8.2 underscorejs.org/LICENSE
 * Build: `lodash compat -o ./lodash.js`
 */
;(function(){function n(n,t){if(n!==t){var r=n===n,e=t===t;if(n>t||!r||typeof n=="undefined"&&e)return 1;if(n<t||!e||typeof t=="undefined"&&r)return-1}return 0}function t(n,t,r){for(var e=n.length,u=r?e:-1;r?u--:++u<e;)if(t(n[u],u,n))return u;return-1}function r(n,t,r){if(t!==t)return p(n,r);r-=1;for(var e=n.length;++r<e;)if(n[r]===t)return r;return-1}function e(n){return typeof n=="function"||false}function u(n){return typeof n=="string"?n:null==n?"":n+""}function o(n){return n.charCodeAt(0)}function i(n,t){for(var r=-1,e=n.length;++r<e&&-1<t.indexOf(n.charAt(r)););return r
}function f(n,t){for(var r=n.length;r--&&-1<t.indexOf(n.charAt(r)););return r}function a(t,r){return n(t.a,r.a)||t.b-r.b}function c(n){return Ut[n]}function l(n){return Ft[n]}function s(n){return"\\"+Lt[n]}function p(n,t,r){var e=n.length;for(t+=r?0:-1;r?t--:++t<e;){var u=n[t];if(u!==u)return t}return-1}function h(n){return!!n&&typeof n=="object"}function _(n){return 160>=n&&9<=n&&13>=n||32==n||160==n||5760==n||6158==n||8192<=n&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function g(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;)n[r]===t&&(n[r]=P,o[++u]=r);
return o}function v(n){for(var t=-1,r=n.length;++t<r&&_(n.charCodeAt(t)););return t}function y(n){for(var t=n.length;t--&&_(n.charCodeAt(t)););return t}function d(n){return Wt[n]}function m(_){function Ut(n){if(h(n)&&!(yi(n)||n instanceof Nt)){if(n instanceof Wt)return n;if(Pu.call(n,"__chain__")&&Pu.call(n,"__wrapped__"))return ke(n)}return new Wt(n)}function Ft(){}function Wt(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t}function Nt(n){this.__wrapped__=n,this.__actions__=null,this.__dir__=1,this.__filtered__=false,this.__iteratees__=null,this.__takeCount__=go,this.__views__=null
}function Lt(){this.__data__={}}function $t(n){var t=n?n.length:0;for(this.data={hash:oo(null),set:new Hu};t--;)this.push(n[t])}function Pt(n,t){var r=n.data;return(typeof t=="string"||nu(t)?r.set.has(t):r.hash[t])?0:-1}function Bt(n,t){var r=-1,e=n.length;for(t||(t=xu(e));++r<e;)t[r]=n[r];return t}function zt(n,t){for(var r=-1,e=n.length;++r<e&&false!==t(n[r],r,n););return n}function Kt(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return false;return true}function Vt(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;){var i=n[r];
t(i,r,n)&&(o[++u]=i)}return o}function Yt(n,t){for(var r=-1,e=n.length,u=xu(e);++r<e;)u[r]=t(n[r],r,n);return u}function Zt(n){for(var t=-1,r=n.length,e=_o;++t<r;){var u=n[t];u>e&&(e=u)}return e}function Gt(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return true;return false}function Jt(n,t){return typeof n=="undefined"?t:n}function Xt(n,t,r,e){return typeof n!="undefined"&&Pu.call(e,r)?n:t}function Ht(n,t,r){var e=Ri(t);if(!r)return nr(t,n,e);for(var u=-1,o=e.length;++u<o;){var i=e[u],f=n[i],a=r(f,t[i],i,n,t);
(a===a?a===f:f!==f)&&(typeof f!="undefined"||i in n)||(n[i]=a)}return n}function Qt(n,t){for(var r=-1,e=n.length,u=we(e),o=t.length,i=xu(o);++r<o;){var f=t[r];u?(f=parseFloat(f),i[r]=ye(f,e)?n[f]:w):i[r]=n[f]}return i}function nr(n,t,r){r||(r=t,t={});for(var e=-1,u=r.length;++e<u;){var o=r[e];t[o]=n[o]}return t}function tr(n,t,r){var e=typeof n;return"function"==e?typeof t=="undefined"?n:Fr(n,t,r):null==n?du:"object"==e?yr(n):typeof t=="undefined"?wr(n+""):dr(n+"",t)}function rr(n,t,r,e,u,o,i){var f;
if(r&&(f=u?r(n,e,u):r(n)),typeof f!="undefined")return f;if(!nu(n))return n;if(e=yi(n)){if(f=_e(n),!t)return Bt(n,f)}else{var a=zu.call(n),c=a==K;if(a!=Y&&a!=B&&(!c||u))return Ct[a]?ve(n,a,t):u?n:{};if(Dt(n))return u?n:{};if(f=ge(c?{}:n),!t)return nr(n,f,Ri(n))}for(o||(o=[]),i||(i=[]),u=o.length;u--;)if(o[u]==n)return i[u];return o.push(n),i.push(f),(e?zt:lr)(n,function(e,u){f[u]=rr(e,t,r,u,n,o,i)}),f}function er(n,t,r){if(typeof n!="function")throw new Cu($);return Qu(function(){n.apply(w,r)},t)
}function ur(n,t){var e=n?n.length:0,u=[];if(!e)return u;var o=-1,i=he(),f=i==r,a=f&&200<=t.length?Uo(t):null,c=t.length;a&&(i=Pt,f=false,t=a);n:for(;++o<e;)if(a=n[o],f&&a===a){for(var l=c;l--;)if(t[l]===a)continue n;u.push(a)}else 0>i(t,a,0)&&u.push(a);return u}function or(n,t){var r=true;return ko(n,function(n,e,u){return r=!!t(n,e,u)}),r}function ir(n,t){var r=[];return ko(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function fr(n,t,r,e){var u;return r(n,function(n,r,o){return t(n,r,o)?(u=e?r:n,false):void 0
}),u}function ar(n,t,r){for(var e=-1,u=n.length,o=-1,i=[];++e<u;){var f=n[e];if(h(f)&&we(f.length)&&(yi(f)||Xe(f))){t&&(f=ar(f,t,r));var a=-1,c=f.length;for(i.length+=c;++a<c;)i[++o]=f[a]}else r||(i[++o]=f)}return i}function cr(n,t){So(n,t,au)}function lr(n,t){return So(n,t,Ri)}function sr(n,t){return Co(n,t,Ri)}function pr(n,t){for(var r=-1,e=t.length,u=-1,o=[];++r<e;){var i=t[r];mi(n[i])&&(o[++u]=i)}return o}function hr(n,t,r,e,u,o){if(n===t)return 0!==n||1/n==1/t;var i=typeof n,f=typeof t;return"function"!=i&&"object"!=i&&"function"!=f&&"object"!=f||null==n||null==t?n!==n&&t!==t:_r(n,t,hr,r,e,u,o)
}function _r(n,t,r,e,u,o,i){var f=yi(n),a=yi(t),c=z,l=z;f||(c=zu.call(n),c==B?c=Y:c!=Y&&(f=ou(n))),a||(l=zu.call(t),l==B?l=Y:l!=Y&&ou(t));var s=(c==Y||u&&c==K)&&!Dt(n),a=(l==Y||u&&l==K)&&!Dt(t);if((l=c==l)&&!f&&!s)return ce(n,t,c);if(u){if(!(l||s&&a))return false}else{if(c=s&&Pu.call(n,"__wrapped__"),a=a&&Pu.call(t,"__wrapped__"),c||a)return r(c?n.value():n,a?t.value():t,e,u,o,i);if(!l)return false}for(o||(o=[]),i||(i=[]),c=o.length;c--;)if(o[c]==n)return i[c]==t;return o.push(n),i.push(t),n=(f?ae:le)(n,t,r,e,u,o,i),o.pop(),i.pop(),n
}function gr(n,t,r,e,u){for(var o=-1,i=t.length,f=!u;++o<i;)if(f&&e[o]?r[o]!==n[t[o]]:!(t[o]in n))return false;for(o=-1;++o<i;){var a=t[o],c=n[a],l=r[o];if(f&&e[o]?a=typeof c!="undefined"||a in n:(a=u?u(c,l,a):w,typeof a=="undefined"&&(a=hr(l,c,u,true))),!a)return false}return true}function vr(n,t){var r=[];return ko(n,function(n,e,u){r.push(t(n,e,u))}),r}function yr(n){var t=Ri(n),r=t.length;if(!r)return yu(true);if(1==r){var e=t[0],u=n[e];if(be(u))return function(n){return null!=n&&n[e]===u&&(typeof u!="undefined"||e in Ie(n))
}}for(var o=xu(r),i=xu(r);r--;)u=n[t[r]],o[r]=u,i[r]=be(u);return function(n){return null!=n&&gr(Ie(n),t,o,i)}}function dr(n,t){return be(t)?function(r){return null!=r&&r[n]===t&&(typeof t!="undefined"||n in Ie(r))}:function(r){return null!=r&&hr(t,r[n],null,true)}}function mr(n,t,r,e,u){if(!nu(n))return n;var o=we(t.length)&&(yi(t)||ou(t));return(o?zt:lr)(t,function(t,i,f){if(h(t)){e||(e=[]),u||(u=[]);n:{t=e;for(var a=u,c=t.length,l=f[i];c--;)if(t[c]==l){n[i]=a[c],i=void 0;break n}c=n[i],f=r?r(c,l,i,n,f):w;
var s=typeof f=="undefined";s&&(f=l,we(l.length)&&(yi(l)||ou(l))?f=yi(c)?c:c&&c.length?Bt(c):[]:wi(l)||Xe(l)?f=Xe(c)?iu(c):wi(c)?c:{}:s=false),t.push(l),a.push(f),s?n[i]=mr(f,l,r,t,a):(f===f?f!==c:c===c)&&(n[i]=f),i=void 0}return i}a=n[i],f=r?r(a,t,i,n,f):w,(l=typeof f=="undefined")&&(f=t),!o&&typeof f=="undefined"||!l&&(f===f?f===a:a!==a)||(n[i]=f)}),n}function wr(n){return function(t){return null==t?w:t[n]}}function br(n,t){return n+Zu(ho()*(t-n+1))}function xr(n,t,r,e,u){return u(n,function(n,u,o){r=e?(e=false,n):t(r,n,u,o)
}),r}function Ar(n,t,r){var e=-1,u=n.length;for(t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r=typeof r=="undefined"||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=xu(u);++e<u;)r[e]=n[e+t];return r}function jr(n,t){var r;return ko(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Or(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].c;return n}function Er(t,r,e){var u=-1,o=t.length,i=we(o)?xu(o):[];return ko(t,function(n){for(var t=r.length,e=xu(t);t--;)e[t]=null==n?w:n[r[t]];i[++u]={a:e,b:u,c:n}}),Or(i,function(t,r){var u;
n:{u=-1;for(var o=t.a,i=r.a,f=o.length,a=e.length;++u<f;){var c=n(o[u],i[u]);if(c){u=u<a?c*(e[u]?1:-1):c;break n}}u=t.b-r.b}return u})}function Ir(n,t){var r=0;return ko(n,function(n,e,u){r+=+t(n,e,u)||0}),r}function kr(n,t){var e=-1,u=he(),o=n.length,i=u==r,f=i&&200<=o,a=f?Uo():null,c=[];a?(u=Pt,i=false):(f=false,a=t?[]:c);n:for(;++e<o;){var l=n[e],s=t?t(l,e,n):l;if(i&&l===l){for(var p=a.length;p--;)if(a[p]===s)continue n;t&&a.push(s),c.push(l)}else 0>u(a,s,0)&&((t||f)&&a.push(s),c.push(l))}return c}function Rr(n,t){for(var r=-1,e=t.length,u=xu(e);++r<e;)u[r]=n[t[r]];
return u}function Sr(n,t,r,e){for(var u=n.length,o=e?u:-1;(e?o--:++o<u)&&t(n[o],o,n););return r?Ar(n,e?0:o,e?o+1:u):Ar(n,e?o+1:0,e?u:o)}function Cr(n,t){var r=n;r instanceof Nt&&(r=r.value());for(var e=-1,u=t.length;++e<u;){var r=[r],o=t[e];Ju.apply(r,o.args),r=o.func.apply(o.thisArg,r)}return r}function Tr(n,t,r){var e=0,u=n?n.length:e;if(typeof t=="number"&&t===t&&u<=mo){for(;e<u;){var o=e+u>>>1,i=n[o];(r?i<=t:i<t)?e=o+1:u=o}return u}return Ur(n,t,du,r)}function Ur(n,t,r,e){t=r(t);for(var u=0,o=n?n.length:0,i=t!==t,f=typeof t=="undefined";u<o;){var a=Zu((u+o)/2),c=r(n[a]),l=c===c;
(i?l||e:f?l&&(e||typeof c!="undefined"):e?c<=t:c<t)?u=a+1:o=a}return co(o,yo)}function Fr(n,t,r){if(typeof n!="function")return du;if(typeof t=="undefined")return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)};case 5:return function(r,e,u,o,i){return n.call(t,r,e,u,o,i)}}return function(){return n.apply(t,arguments)}}function Wr(n){return Ku.call(n,0)}function Nr(n,t,r){for(var e=r.length,u=-1,o=ao(n.length-e,0),i=-1,f=t.length,a=xu(o+f);++i<f;)a[i]=t[i];
for(;++u<e;)a[r[u]]=n[u];for(;o--;)a[i++]=n[u++];return a}function Lr(n,t,r){for(var e=-1,u=r.length,o=-1,i=ao(n.length-u,0),f=-1,a=t.length,c=xu(i+a);++o<i;)c[o]=n[o];for(i=o;++f<a;)c[i+f]=t[f];for(;++e<u;)c[i+r[e]]=n[o++];return c}function $r(n,t){return function(r,e,u){var o=t?t():{};if(e=pe(e,u,3),yi(r)){u=-1;for(var i=r.length;++u<i;){var f=r[u];n(o,f,e(f,u,r),r)}}else ko(r,function(t,r,u){n(o,t,e(t,r,u),u)});return o}}function Pr(n){return function(){var t=arguments,r=t.length,e=t[0];if(2>r||null==e)return e;
var u=t[r-2],o=t[r-1],i=t[3];for(3<r&&typeof u=="function"?(u=Fr(u,o,5),r-=2):(u=2<r&&typeof o=="function"?o:null,r-=u?1:0),i&&de(t[1],t[2],i)&&(u=3==r?null:u,r=2),o=0;++o<r;)(i=t[o])&&n(e,i,u);return e}}function Br(n,t){return function(r,e){var u=r?r.length:0;if(!we(u))return n(r,e);for(var o=t?u:-1,i=Ie(r);(t?o--:++o<u)&&false!==e(i[o],o,i););return r}}function zr(n){return function(t,r,e){var u=Ie(t);e=e(t);for(var o=e.length,i=n?o:-1;n?i--:++i<o;){var f=e[i];if(false===r(u[f],f,u))break}return t}}function Mr(n,t){function r(){return(this&&this!==Mt&&this instanceof r?e:n).apply(t,arguments)
}var e=qr(n);return r}function Dr(n){return function(t){var r=-1;t=gu(lu(t));for(var e=t.length,u="";++r<e;)u=n(u,t[r],r);return u}}function qr(n){return function(){var t=Io(n.prototype),r=n.apply(t,arguments);return nu(r)?r:t}}function Kr(n){function t(r,e,u){return u&&de(r,e,u)&&(e=null),r=fe(r,n,null,null,null,null,null,e),r.placeholder=t.placeholder,r}return t}function Vr(n,t){return function(r,e,u){u&&de(r,e,u)&&(e=null);var i=pe(),f=null==e;if(i===tr&&f||(f=false,e=i(e,u,3)),f){if(e=yi(r),e||!uu(r))return n(e?r:Ee(r));
e=o}return se(r,e,t)}}function Yr(n,r){return function(e,u,o){return u=pe(u,o,3),yi(e)?(u=t(e,u,r),-1<u?e[u]:w):fr(e,u,n)}}function Zr(n){return function(r,e,u){return r&&r.length?(e=pe(e,u,3),t(r,e,n)):-1}}function Gr(n){return function(t,r,e){return r=pe(r,e,3),fr(t,r,n,true)}}function Jr(n){return function(){var t=arguments.length;if(!t)return function(){return arguments[0]};for(var r,e=n?t:-1,u=0,o=xu(t);n?e--:++e<t;){var i=o[u++]=arguments[e];if(typeof i!="function")throw new Cu($);var f=r?"":Wo(i);
r="wrapper"==f?new Wt([]):r}for(e=r?-1:t;++e<t;)i=o[e],f=Wo(i),r=(u="wrapper"==f?Fo(i):null)&&me(u[0])?r[Wo(u[0])].apply(r,u[3]):1==i.length&&me(i)?r[f]():r.thru(i);return function(){var n=arguments;if(r&&1==n.length&&yi(n[0]))return r.plant(n[0]).value();for(var e=0,n=o[e].apply(this,n);++e<t;)n=o[e].call(this,n);return n}}}function Xr(n,t){return function(r,e,u){return typeof e=="function"&&typeof u=="undefined"&&yi(r)?n(r,e):t(r,Fr(e,u,3))}}function Hr(n){return function(t,r,e){return(typeof r!="function"||typeof e!="undefined")&&(r=Fr(r,e,3)),n(t,r,au)
}}function Qr(n){return function(t,r,e){return(typeof r!="function"||typeof e!="undefined")&&(r=Fr(r,e,3)),n(t,r)}}function ne(n){return function(t,r,e){return(t=u(t))&&(n?t:"")+ue(t,r,e)+(n?"":t)}}function te(n){var t=Je(function(r,e){var u=g(e,t.placeholder);return fe(r,n,null,e,u)});return t}function re(n,t){return function(r,e,u,o){var i=3>arguments.length;return typeof e=="function"&&typeof o=="undefined"&&yi(r)?n(r,e,u,i):xr(r,pe(e,o,4),u,i,t)}}function ee(n,t,r,e,u,o,i,f,a,c){function l(){for(var b=arguments.length,j=b,O=xu(b);j--;)O[j]=arguments[j];
if(e&&(O=Nr(O,e,u)),o&&(O=Lr(O,o,i)),_||y){var j=l.placeholder,E=g(O,j),b=b-E.length;if(b<c){var R=f?Bt(f):null,b=ao(c-b,0),S=_?E:null,E=_?null:E,C=_?O:null,O=_?null:O;return t|=_?I:k,t&=~(_?k:I),v||(t&=~(x|A)),O=[n,t,r,C,S,O,E,R,a,b],R=ee.apply(w,O),me(n)&&No(R,O),R.placeholder=j,R}}if(j=p?r:this,h&&(n=j[m]),f)for(R=O.length,b=co(f.length,R),S=Bt(O);b--;)E=f[b],O[b]=ye(E,R)?S[E]:w;return s&&a<O.length&&(O.length=a),(this&&this!==Mt&&this instanceof l?d||qr(n):n).apply(j,O)}var s=t&R,p=t&x,h=t&A,_=t&O,v=t&j,y=t&E,d=!h&&qr(n),m=n;
return l}function ue(n,t,r){return n=n.length,t=+t,n<t&&io(t)?(t-=n,r=null==r?" ":r+"",hu(r,Vu(t/r.length)).slice(0,t)):""}function oe(n,t,r,e){function u(){for(var t=-1,f=arguments.length,a=-1,c=e.length,l=xu(f+c);++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++t];return(this&&this!==Mt&&this instanceof u?i:n).apply(o?r:this,l)}var o=t&x,i=qr(n);return u}function ie(n){return function(t,r,e,u){var o=pe(e);return o===tr&&null==e?Tr(t,r,n):Ur(t,r,o(e,u,1),n)}}function fe(n,t,r,e,u,o,i,f){var a=t&A;if(!a&&typeof n!="function")throw new Cu($);
var c=e?e.length:0;if(c||(t&=~(I|k),e=u=null),c-=u?u.length:0,t&k){var l=e,s=u;e=u=null}var p=a?null:Fo(n);return r=[n,t,r,e,u,l,s,o,i,f],p&&(e=r[1],t=p[1],f=e|t,u=t==R&&e==O||t==R&&e==S&&r[7].length<=p[8]||t==(R|S)&&e==O,(f<R||u)&&(t&x&&(r[2]=p[2],f|=e&x?0:j),(e=p[3])&&(u=r[3],r[3]=u?Nr(u,e,p[4]):Bt(e),r[4]=u?g(r[3],P):Bt(p[4])),(e=p[5])&&(u=r[5],r[5]=u?Lr(u,e,p[6]):Bt(e),r[6]=u?g(r[5],P):Bt(p[6])),(e=p[7])&&(r[7]=Bt(e)),t&R&&(r[8]=null==r[8]?p[8]:co(r[8],p[8])),null==r[9]&&(r[9]=p[9]),r[0]=p[0],r[1]=f),t=r[1],f=r[9]),r[9]=null==f?a?0:n.length:ao(f-c,0)||0,(p?To:No)(t==x?Mr(r[0],r[2]):t!=I&&t!=(x|I)||r[4].length?ee.apply(w,r):oe.apply(w,r),r)
}function ae(n,t,r,e,u,o,i){var f=-1,a=n.length,c=t.length,l=true;if(a!=c&&(!u||c<=a))return false;for(;l&&++f<a;){var s=n[f],p=t[f],l=w;if(e&&(l=u?e(p,s,f):e(s,p,f)),typeof l=="undefined")if(u)for(var h=c;h--&&(p=t[h],!(l=s&&s===p||r(s,p,e,u,o,i))););else l=s&&s===p||r(s,p,e,u,o,i)}return!!l}function ce(n,t,r){switch(r){case M:case D:return+n==+t;case q:return n.name==t.name&&n.message==t.message;case V:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case Z:case G:return n==t+""}return false}function le(n,t,r,e,u,o,i){var f=Ri(n),a=f.length,c=Ri(t).length;
if(a!=c&&!u)return false;for(var c=u,l=-1;++l<a;){var s=f[l],p=u?s in t:Pu.call(t,s);if(p){var h=n[s],_=t[s],p=w;e&&(p=u?e(_,h,s):e(h,_,s)),typeof p=="undefined"&&(p=h&&h===_||r(h,_,e,u,o,i))}if(!p)return false;c||(c="constructor"==s)}return c||(r=n.constructor,e=t.constructor,!(r!=e&&"constructor"in n&&"constructor"in t)||typeof r=="function"&&r instanceof r&&typeof e=="function"&&e instanceof e)?true:false}function se(n,t,r){var e=r?go:_o,u=e,o=u;return ko(n,function(n,i,f){i=t(n,i,f),((r?i<u:i>u)||i===e&&i===o)&&(u=i,o=n)
}),o}function pe(n,t,r){var e=Ut.callback||vu,e=e===vu?tr:e;return r?e(n,t,r):e}function he(n,t,e){var u=Ut.indexOf||Te,u=u===Te?r:u;return n?u(n,t,e):u}function _e(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&Pu.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function ge(n){return n=n.constructor,typeof n=="function"&&n instanceof n||(n=ku),new n}function ve(n,t,r){var e=n.constructor;switch(t){case J:return Wr(n);case M:case D:return new e(+n);case X:case H:case Q:case nt:case tt:case rt:case et:case ut:case ot:return e instanceof e&&(e=jo[t]),t=n.buffer,new e(r?Wr(t):t,n.byteOffset,n.length);
case V:case G:return new e(n);case Z:var u=new e(n.source,dt.exec(n));u.lastIndex=n.lastIndex}return u}function ye(n,t){return n=+n,t=null==t?bo:t,-1<n&&0==n%1&&n<t}function de(n,t,r){if(!nu(r))return false;var e=typeof t;return"number"==e?(e=r.length,e=we(e)&&ye(t,e)):e="string"==e&&t in r,e?(t=r[t],n===n?n===t:t!==t):false}function me(n){var t=Wo(n);return!!t&&n===Ut[t]&&t in Nt.prototype}function we(n){return typeof n=="number"&&-1<n&&0==n%1&&n<=bo}function be(n){return n===n&&(0===n?0<1/n:!nu(n))}function xe(n,t){n=Ie(n);
for(var r=-1,e=t.length,u={};++r<e;){var o=t[r];o in n&&(u[o]=n[o])}return u}function Ae(n,t){var r={};return cr(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function je(n){var t,r=Ut.support;if(!h(n)||zu.call(n)!=Y||Dt(n)||!(Pu.call(n,"constructor")||(t=n.constructor,typeof t!="function"||t instanceof t))||!r.argsTag&&Xe(n))return false;var e;return r.ownLast?(cr(n,function(n,t,r){return e=Pu.call(r,t),false}),false!==e):(cr(n,function(n,t){e=t}),typeof e=="undefined"||Pu.call(n,e))}function Oe(n){for(var t=au(n),r=t.length,e=r&&n.length,u=Ut.support,u=e&&we(e)&&(yi(n)||u.nonEnumStrings&&uu(n)||u.nonEnumArgs&&Xe(n)),o=-1,i=[];++o<r;){var f=t[o];
(u&&ye(f,e)||Pu.call(n,f))&&i.push(f)}return i}function Ee(n){return null==n?[]:we(n.length)?Ut.support.unindexedChars&&uu(n)?n.split(""):nu(n)?n:ku(n):cu(n)}function Ie(n){if(Ut.support.unindexedChars&&uu(n)){for(var t=-1,r=n.length,e=ku(n);++t<r;)e[t]=n.charAt(t);return e}return nu(n)?n:ku(n)}function ke(n){return n instanceof Nt?n.clone():new Wt(n.__wrapped__,n.__chain__,Bt(n.__actions__))}function Re(n,t,r){return n&&n.length?((r?de(n,t,r):null==t)&&(t=1),Ar(n,0>t?0:t)):[]}function Se(n,t,r){var e=n?n.length:0;
return e?((r?de(n,t,r):null==t)&&(t=1),t=e-(+t||0),Ar(n,0,0>t?0:t)):[]}function Ce(n){return n?n[0]:w}function Te(n,t,e){var u=n?n.length:0;if(!u)return-1;if(typeof e=="number")e=0>e?ao(u+e,0):e;else if(e)return e=Tr(n,t),n=n[e],(t===t?t===n:n!==n)?e:-1;return r(n,t,e||0)}function Ue(n){var t=n?n.length:0;return t?n[t-1]:w}function Fe(n){return Re(n,1)}function We(n,t,e,u){if(!n||!n.length)return[];null!=t&&typeof t!="boolean"&&(u=e,e=de(n,t,u)?null:t,t=false);var o=pe();if((o!==tr||null!=e)&&(e=o(e,u,3)),t&&he()==r){t=e;
var i;e=-1,u=n.length;for(var o=-1,f=[];++e<u;){var a=n[e],c=t?t(a,e,n):a;e&&i===c||(i=c,f[++o]=a)}n=f}else n=kr(n,e);return n}function Ne(n){for(var t=-1,r=(n&&n.length&&Zt(Yt(n,$u)))>>>0,e=xu(r);++t<r;)e[t]=Yt(n,wr(t));return e}function Le(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||yi(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function $e(n){return n=Ut(n),n.__chain__=true,n}function Pe(n,t,r){return t.call(r,n)}function Be(n,t,r){var e=yi(n)?Kt:or;return r&&de(n,t,r)&&(t=null),(typeof t!="function"||typeof r!="undefined")&&(t=pe(t,r,3)),e(n,t)
}function ze(n,t,r){var e=yi(n)?Vt:ir;return t=pe(t,r,3),e(n,t)}function Me(n,t,r,e){var u=n?n.length:0;return we(u)||(n=cu(n),u=n.length),u?(r=typeof r!="number"||e&&de(t,r,e)?0:0>r?ao(u+r,0):r||0,typeof n=="string"||!yi(n)&&uu(n)?r<u&&-1<n.indexOf(t,r):-1<he(n,t,r)):false}function De(n,t,r){var e=yi(n)?Yt:vr;return t=pe(t,r,3),e(n,t)}function qe(n,t,r){return(r?de(n,t,r):null==t)?(n=Ee(n),t=n.length,0<t?n[br(0,t-1)]:w):(n=Ke(n),n.length=co(0>t?0:+t||0,n.length),n)}function Ke(n){n=Ee(n);for(var t=-1,r=n.length,e=xu(r);++t<r;){var u=br(0,t);
t!=u&&(e[t]=e[u]),e[u]=n[t]}return e}function Ve(n,t,r){var e=yi(n)?Gt:jr;return r&&de(n,t,r)&&(t=null),(typeof t!="function"||typeof r!="undefined")&&(t=pe(t,r,3)),e(n,t)}function Ye(n,t){var r;if(typeof t!="function"){if(typeof n!="function")throw new Cu($);var e=n;n=t,t=e}return function(){return 0<--n?r=t.apply(this,arguments):t=null,r}}function Ze(n,t,r){function e(){var r=t-(ui()-c);0>=r||r>t?(f&&Yu(f),r=p,f=s=p=w,r&&(h=ui(),a=n.apply(l,i),s||f||(i=l=null))):s=Qu(e,r)}function u(){s&&Yu(s),f=s=p=w,(g||_!==t)&&(h=ui(),a=n.apply(l,i),s||f||(i=l=null))
}function o(){if(i=arguments,c=ui(),l=this,p=g&&(s||!v),false===_)var r=v&&!s;else{f||v||(h=c);var o=_-(c-h),y=0>=o||o>_;y?(f&&(f=Yu(f)),h=c,a=n.apply(l,i)):f||(f=Qu(u,o))}return y&&s?s=Yu(s):s||t===_||(s=Qu(e,t)),r&&(y=true,a=n.apply(l,i)),!y||s||f||(i=l=null),a}var i,f,a,c,l,s,p,h=0,_=false,g=true;if(typeof n!="function")throw new Cu($);if(t=0>t?0:+t||0,true===r)var v=true,g=false;else nu(r)&&(v=r.leading,_="maxWait"in r&&ao(+r.maxWait||0,t),g="trailing"in r?r.trailing:g);return o.cancel=function(){s&&Yu(s),f&&Yu(f),f=s=p=w
},o}function Ge(n,t){function r(){var e=arguments,u=r.cache,o=t?t.apply(this,e):e[0];return u.has(o)?u.get(o):(e=n.apply(this,e),u.set(o,e),e)}if(typeof n!="function"||t&&typeof t!="function")throw new Cu($);return r.cache=new Ge.Cache,r}function Je(n,t){if(typeof n!="function")throw new Cu($);return t=ao(typeof t=="undefined"?n.length-1:+t||0,0),function(){for(var r=arguments,e=-1,u=ao(r.length-t,0),o=xu(u);++e<u;)o[e]=r[t+e];switch(t){case 0:return n.call(this,o);case 1:return n.call(this,r[0],o);
case 2:return n.call(this,r[0],r[1],o)}for(u=xu(t+1),e=-1;++e<t;)u[e]=r[e];return u[t]=o,n.apply(this,u)}}function Xe(n){return we(h(n)?n.length:w)&&zu.call(n)==B}function He(n){return!!n&&1===n.nodeType&&h(n)&&(Ut.support.nodeTag?-1<zu.call(n).indexOf("Element"):Dt(n))}function Qe(n){return h(n)&&typeof n.message=="string"&&zu.call(n)==q}function nu(n){var t=typeof n;return"function"==t||!!n&&"object"==t}function tu(n){return null==n?false:zu.call(n)==K?Du.test(Lu.call(n)):h(n)&&(Dt(n)?Du:wt).test(n)
}function ru(n){return typeof n=="number"||h(n)&&zu.call(n)==V}function eu(n){return nu(n)&&zu.call(n)==Z}function uu(n){return typeof n=="string"||h(n)&&zu.call(n)==G}function ou(n){return h(n)&&we(n.length)&&!!St[zu.call(n)]}function iu(n){return nr(n,au(n))}function fu(n){return pr(n,au(n))}function au(n){if(null==n)return[];nu(n)||(n=ku(n));for(var t=n.length,r=Ut.support,t=t&&we(t)&&(yi(n)||r.nonEnumStrings&&uu(n)||r.nonEnumArgs&&Xe(n))&&t||0,e=n.constructor,u=-1,e=mi(e)&&e.prototype||Fu,o=e===n,i=xu(t),f=0<t,a=r.enumErrorProps&&(n===Uu||n instanceof ju),c=r.enumPrototypes&&mi(n);++u<t;)i[u]=u+"";
for(var l in n)c&&"prototype"==l||a&&("message"==l||"name"==l)||f&&ye(l,t)||"constructor"==l&&(o||!Pu.call(n,l))||i.push(l);if(r.nonEnumShadows&&n!==Fu)for(t=n===Wu?G:n===Uu?q:zu.call(n),r=Oo[t]||Oo[Y],t==Y&&(e=Fu),t=Rt.length;t--;)l=Rt[t],u=r[l],o&&u||(u?!Pu.call(n,l):n[l]===e[l])||i.push(l);return i}function cu(n){return Rr(n,Ri(n))}function lu(n){return(n=u(n))&&n.replace(bt,c).replace(vt,"")}function su(n){return(n=u(n))&&jt.test(n)?n.replace(At,"\\$&"):n}function pu(n,t,r){return r&&de(n,t,r)&&(t=0),po(n,t)
}function hu(n,t){var r="";if(n=u(n),t=+t,1>t||!n||!io(t))return r;do t%2&&(r+=n),t=Zu(t/2),n+=n;while(t);return r}function _u(n,t,r){var e=n;return(n=u(n))?(r?de(e,t,r):null==t)?n.slice(v(n),y(n)+1):(t+="",n.slice(i(n,t),f(n,t)+1)):n}function gu(n,t,r){return r&&de(n,t,r)&&(t=null),n=u(n),n.match(t||Et)||[]}function vu(n,t,r){return r&&de(n,t,r)&&(t=null),h(n)?mu(n):tr(n,t)}function yu(n){return function(){return n}}function du(n){return n}function mu(n){return yr(rr(n,true))}function wu(n,t,r){if(null==r){var e=nu(t),u=e&&Ri(t);
((u=u&&u.length&&pr(t,u))?u.length:e)||(u=false,r=t,t=n,n=this)}u||(u=pr(t,Ri(t)));var o=true,e=-1,i=mi(n),f=u.length;false===r?o=false:nu(r)&&"chain"in r&&(o=r.chain);for(;++e<f;){r=u[e];var a=t[r];n[r]=a,i&&(n.prototype[r]=function(t){return function(){var r=this.__chain__;if(o||r){var e=n(this.__wrapped__);return(e.__actions__=Bt(this.__actions__)).push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}return r=[this.value()],Ju.apply(r,arguments),t.apply(n,r)}}(a))}return n}function bu(){}_=_?qt.defaults(Mt.Object(),_,qt.pick(Mt,kt)):Mt;
var xu=_.Array,Au=_.Date,ju=_.Error,Ou=_.Function,Eu=_.Math,Iu=_.Number,ku=_.Object,Ru=_.RegExp,Su=_.String,Cu=_.TypeError,Tu=xu.prototype,Uu=ju.prototype,Fu=ku.prototype,Wu=Su.prototype,Nu=(Nu=_.window)&&Nu.document,Lu=Ou.prototype.toString,$u=wr("length"),Pu=Fu.hasOwnProperty,Bu=0,zu=Fu.toString,Mu=_._,Du=Ru("^"+su(zu).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qu=tu(qu=_.ArrayBuffer)&&qu,Ku=tu(Ku=qu&&new qu(0).slice)&&Ku,Vu=Eu.ceil,Yu=_.clearTimeout,Zu=Eu.floor,Gu=tu(Gu=ku.getPrototypeOf)&&Gu,Ju=Tu.push,Xu=Fu.propertyIsEnumerable,Hu=tu(Hu=_.Set)&&Hu,Qu=_.setTimeout,no=Tu.splice,to=tu(to=_.Uint8Array)&&to,ro=tu(ro=_.WeakMap)&&ro,eo=function(){try{var n=tu(n=_.Float64Array)&&n,t=new n(new qu(10),0,1)&&n
}catch(r){}return t}(),uo=tu(uo=xu.isArray)&&uo,oo=tu(oo=ku.create)&&oo,io=_.isFinite,fo=tu(fo=ku.keys)&&fo,ao=Eu.max,co=Eu.min,lo=tu(lo=Au.now)&&lo,so=tu(so=Iu.isFinite)&&so,po=_.parseInt,ho=Eu.random,_o=Iu.NEGATIVE_INFINITY,go=Iu.POSITIVE_INFINITY,vo=Eu.pow(2,32)-1,yo=vo-1,mo=vo>>>1,wo=eo?eo.BYTES_PER_ELEMENT:0,bo=Eu.pow(2,53)-1,xo=ro&&new ro,Ao={},jo={};jo[X]=_.Float32Array,jo[H]=_.Float64Array,jo[Q]=_.Int8Array,jo[nt]=_.Int16Array,jo[tt]=_.Int32Array,jo[rt]=_.Uint8Array,jo[et]=_.Uint8ClampedArray,jo[ut]=_.Uint16Array,jo[ot]=_.Uint32Array;
var Oo={};Oo[z]=Oo[D]=Oo[V]={constructor:true,toLocaleString:true,toString:true,valueOf:true},Oo[M]=Oo[G]={constructor:true,toString:true,valueOf:true},Oo[q]=Oo[K]=Oo[Z]={constructor:true,toString:true},Oo[Y]={constructor:true},zt(Rt,function(n){for(var t in Oo)if(Pu.call(Oo,t)){var r=Oo[t];r[n]=Pu.call(r,n)}});var Eo=Ut.support={};!function(n){function t(){this.x=1}var r={0:1,length:1},e=[];t.prototype={valueOf:1,y:1};for(var u in new t)e.push(u);Eo.argsTag=zu.call(arguments)==B,Eo.enumErrorProps=Xu.call(Uu,"message")||Xu.call(Uu,"name"),Eo.enumPrototypes=Xu.call(t,"prototype"),Eo.funcDecomp=/\bthis\b/.test(function(){return this
}),Eo.funcNames=typeof Ou.name=="string",Eo.nodeTag=zu.call(Nu)!=Y,Eo.nonEnumStrings=!Xu.call("x",0),Eo.nonEnumShadows=!/valueOf/.test(e),Eo.ownLast="x"!=e[0],Eo.spliceObjects=(no.call(r,0,1),!r[0]),Eo.unindexedChars="xx"!="x"[0]+ku("x")[0];try{Eo.dom=11===Nu.createDocumentFragment().nodeType}catch(o){Eo.dom=false}try{Eo.nonEnumArgs=!Xu.call(arguments,1)}catch(i){Eo.nonEnumArgs=true}}(0,0),Ut.templateSettings={escape:ht,evaluate:_t,interpolate:gt,variable:"",imports:{_:Ut}};var Io=function(){function n(){}return function(t){if(nu(t)){n.prototype=t;
var r=new n;n.prototype=null}return r||_.Object()}}(),ko=Br(lr),Ro=Br(sr,true),So=zr(),Co=zr(true),To=xo?function(n,t){return xo.set(n,t),n}:du;Ku||(Wr=qu&&to?function(n){var t=n.byteLength,r=eo?Zu(t/wo):0,e=r*wo,u=new qu(t);if(r){var o=new eo(u,0,r);o.set(new eo(n,0,r))}return t!=e&&(o=new to(u,e),o.set(new to(n,e))),u}:yu(null));var Uo=oo&&Hu?function(n){return new $t(n)}:yu(null),Fo=xo?function(n){return xo.get(n)}:bu,Wo=function(){return Eo.funcNames?"constant"==yu.name?wr("name"):function(n){for(var t=n.name,r=Ao[t],e=r?r.length:0;e--;){var u=r[e],o=u.func;
if(null==o||o==n)return u.name}return t}:yu("")}(),No=function(){var n=0,t=0;return function(r,e){var u=ui(),o=F-(u-t);if(t=u,0<o){if(++n>=U)return r}else n=0;return To(r,e)}}(),Lo=Je(function(n,t){return yi(n)||Xe(n)?ur(n,ar(t,false,true)):[]}),$o=Zr(),Po=Zr(true),Bo=Je(function(t,r){t||(t=[]),r=ar(r);var e=r.length,u=Qt(t,r);for(r.sort(n);e--;){var o=parseFloat(r[e]);if(o!=i&&ye(o)){var i=o;no.call(t,o,1)}}return u}),zo=ie(),Mo=ie(true),Do=Je(function(n){return kr(ar(n,false,true))}),qo=Je(function(n,t){return yi(n)||Xe(n)?ur(n,t):[]
}),Ko=Je(Ne),Vo=Je(function(n,t){return we(n?n.length:0)&&(n=Ee(n)),Qt(n,ar(t))}),Yo=$r(function(n,t,r){Pu.call(n,r)?++n[r]:n[r]=1}),Zo=Yr(ko),Go=Yr(Ro,true),Jo=Xr(zt,ko),Xo=Xr(function(n,t){for(var r=n.length;r--&&false!==t(n[r],r,n););return n},Ro),Ho=$r(function(n,t,r){Pu.call(n,r)?n[r].push(t):n[r]=[t]}),Qo=$r(function(n,t,r){n[r]=t}),ni=Je(function(n,t,r){var e=-1,u=typeof t=="function",o=n?n.length:0,i=we(o)?xu(o):[];return ko(n,function(n){var o=u?t:null!=n&&n[t];i[++e]=o?o.apply(n,r):w}),i}),ti=$r(function(n,t,r){n[r?0:1].push(t)
},function(){return[[],[]]}),ri=re(function(n,t,r,e){var u=-1,o=n.length;for(e&&o&&(r=n[++u]);++u<o;)r=t(r,n[u],u,n);return r},ko),ei=re(function(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r},Ro),ui=lo||function(){return(new Au).getTime()},oi=Je(function(n,t,r){var e=x;if(r.length)var u=g(r,oi.placeholder),e=e|I;return fe(n,e,t,r,u)}),ii=Je(function(n,t){t=t.length?ar(t):fu(n);for(var r=-1,e=t.length;++r<e;){var u=t[r];n[u]=fe(n[u],x,n)}return n}),fi=Je(function(n,t,r){var e=x|A;
if(r.length)var u=g(r,fi.placeholder),e=e|I;return fe(t,e,n,r,u)}),ai=Kr(O),ci=Kr(E),li=Je(function(n,t){return er(n,1,t)}),si=Je(function(n,t,r){return er(n,t,r)}),pi=Jr(),hi=Jr(true),_i=te(I),gi=te(k),vi=Je(function(n,t){return fe(n,S,null,null,null,ar(t))});Eo.argsTag||(Xe=function(n){return we(h(n)?n.length:w)&&Pu.call(n,"callee")&&!Xu.call(n,"callee")});var yi=uo||function(n){return h(n)&&we(n.length)&&zu.call(n)==z};Eo.dom||(He=function(n){return!!n&&1===n.nodeType&&h(n)&&!wi(n)});var di=so||function(n){return typeof n=="number"&&io(n)
},mi=e(/x/)||to&&!e(to)?function(n){return zu.call(n)==K}:e,wi=Gu?function(n){if(!n||zu.call(n)!=Y||!Ut.support.argsTag&&Xe(n))return false;var t=n.valueOf,r=tu(t)&&(r=Gu(t))&&Gu(r);return r?n==r||Gu(n)==r:je(n)}:je,bi=Pr(Ht),xi=Je(function(n){var t=n[0];return null==t?t:(n.push(Jt),bi.apply(w,n))}),Ai=Gr(lr),ji=Gr(sr),Oi=Hr(So),Ei=Hr(Co),Ii=Qr(lr),ki=Qr(sr),Ri=fo?function(n){if(n)var t=n.constructor,r=n.length;return typeof t=="function"&&t.prototype===n||(typeof n=="function"?Ut.support.enumPrototypes:r&&we(r))?Oe(n):nu(n)?fo(n):[]
}:Oe,Si=Pr(mr),Ci=Je(function(n,t){if(null==n)return{};if("function"!=typeof t[0])return t=Yt(ar(t),Su),xe(n,ur(au(n),t));var r=Fr(t[0],t[1],3);return Ae(n,function(n,t,e){return!r(n,t,e)})}),Ti=Je(function(n,t){return null==n?{}:"function"==typeof t[0]?Ae(n,Fr(t[0],t[1],3)):xe(n,ar(t))}),Ui=Dr(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),Fi=Dr(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Wi=ne(),Ni=ne(true);8!=po(It+"08")&&(pu=function(n,t,r){return(r?de(n,t,r):null==t)?t=0:t&&(t=+t),n=_u(n),po(n,t||(mt.test(n)?16:10))
});var Li=Dr(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),$i=Dr(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Pi=Je(function(n,t){try{return n.apply(w,t)}catch(r){return Qe(r)?r:new ju(r)}}),Bi=Vr(Zt),zi=Vr(function(n){for(var t=-1,r=n.length,e=go;++t<r;){var u=n[t];u<e&&(e=u)}return e},true);return Ut.prototype=Ft.prototype,Wt.prototype=Io(Ft.prototype),Wt.prototype.constructor=Wt,Nt.prototype=Io(Ft.prototype),Nt.prototype.constructor=Nt,Lt.prototype["delete"]=function(n){return this.has(n)&&delete this.__data__[n]
},Lt.prototype.get=function(n){return"__proto__"==n?w:this.__data__[n]},Lt.prototype.has=function(n){return"__proto__"!=n&&Pu.call(this.__data__,n)},Lt.prototype.set=function(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this},$t.prototype.push=function(n){var t=this.data;typeof n=="string"||nu(n)?t.set.add(n):t.hash[n]=true},Ge.Cache=Lt,Ut.after=function(n,t){if(typeof t!="function"){if(typeof n!="function")throw new Cu($);var r=n;n=t,t=r}return n=io(n=+n)?n:0,function(){return 1>--n?t.apply(this,arguments):void 0
}},Ut.ary=function(n,t,r){return r&&de(n,t,r)&&(t=null),t=n&&null==t?n.length:ao(+t||0,0),fe(n,R,null,null,null,null,t)},Ut.assign=bi,Ut.at=Vo,Ut.before=Ye,Ut.bind=oi,Ut.bindAll=ii,Ut.bindKey=fi,Ut.callback=vu,Ut.chain=$e,Ut.chunk=function(n,t,r){t=(r?de(n,t,r):null==t)?1:ao(+t||1,1),r=0;for(var e=n?n.length:0,u=-1,o=xu(Vu(e/t));r<e;)o[++u]=Ar(n,r,r+=t);return o},Ut.compact=function(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var o=n[t];o&&(u[++e]=o)}return u},Ut.constant=yu,Ut.countBy=Yo,Ut.create=function(n,t,r){var e=Io(n);
return r&&de(n,t,r)&&(t=null),t?nr(t,e,Ri(t)):e},Ut.curry=ai,Ut.curryRight=ci,Ut.debounce=Ze,Ut.defaults=xi,Ut.defer=li,Ut.delay=si,Ut.difference=Lo,Ut.drop=Re,Ut.dropRight=Se,Ut.dropRightWhile=function(n,t,r){return n&&n.length?Sr(n,pe(t,r,3),true,true):[]},Ut.dropWhile=function(n,t,r){return n&&n.length?Sr(n,pe(t,r,3),true):[]},Ut.fill=function(n,t,r,e){var u=n?n.length:0;if(!u)return[];for(r&&typeof r!="number"&&de(n,t,r)&&(r=0,e=u),u=n.length,r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e=typeof e=="undefined"||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;r<u;)n[r++]=t;
return n},Ut.filter=ze,Ut.flatten=function(n,t,r){var e=n?n.length:0;return r&&de(n,t,r)&&(t=false),e?ar(n,t):[]},Ut.flattenDeep=function(n){return n&&n.length?ar(n,true):[]},Ut.flow=pi,Ut.flowRight=hi,Ut.forEach=Jo,Ut.forEachRight=Xo,Ut.forIn=Oi,Ut.forInRight=Ei,Ut.forOwn=Ii,Ut.forOwnRight=ki,Ut.functions=fu,Ut.groupBy=Ho,Ut.indexBy=Qo,Ut.initial=function(n){return Se(n,1)},Ut.intersection=function(){for(var n=[],t=-1,e=arguments.length,u=[],o=he(),i=o==r;++t<e;){var f=arguments[t];(yi(f)||Xe(f))&&(n.push(f),u.push(i&&120<=f.length?Uo(t&&f):null))
}var e=n.length,i=n[0],a=-1,c=i?i.length:0,l=[],s=u[0];n:for(;++a<c;)if(f=i[a],0>(s?Pt(s,f):o(l,f,0))){for(t=e;--t;){var p=u[t];if(0>(p?Pt(p,f):o(n[t],f,0)))continue n}s&&s.push(f),l.push(f)}return l},Ut.invert=function(n,t,r){r&&de(n,t,r)&&(t=null),r=-1;for(var e=Ri(n),u=e.length,o={};++r<u;){var i=e[r],f=n[i];t?Pu.call(o,f)?o[f].push(i):o[f]=[i]:o[f]=i}return o},Ut.invoke=ni,Ut.keys=Ri,Ut.keysIn=au,Ut.map=De,Ut.mapValues=function(n,t,r){var e={};return t=pe(t,r,3),lr(n,function(n,r,u){e[r]=t(n,r,u)
}),e},Ut.matches=mu,Ut.matchesProperty=function(n,t){return dr(n+"",rr(t,true))},Ut.memoize=Ge,Ut.merge=Si,Ut.mixin=wu,Ut.negate=function(n){if(typeof n!="function")throw new Cu($);return function(){return!n.apply(this,arguments)}},Ut.omit=Ci,Ut.once=function(n){return Ye(n,2)},Ut.pairs=function(n){for(var t=-1,r=Ri(n),e=r.length,u=xu(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u},Ut.partial=_i,Ut.partialRight=gi,Ut.partition=ti,Ut.pick=Ti,Ut.pluck=function(n,t){return De(n,wr(t))},Ut.property=function(n){return wr(n+"")
},Ut.propertyOf=function(n){return function(t){return null==n?w:n[t]}},Ut.pull=function(){var n=arguments,t=n[0];if(!t||!t.length)return t;for(var r=0,e=he(),u=n.length;++r<u;)for(var o=0,i=n[r];-1<(o=e(t,i,o));)no.call(t,o,1);return t},Ut.pullAt=Bo,Ut.range=function(n,t,r){r&&de(n,t,r)&&(t=r=null),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;var e=-1;t=ao(Vu((t-n)/(r||1)),0);for(var u=xu(t);++e<t;)u[e]=n,n+=r;return u},Ut.rearg=vi,Ut.reject=function(n,t,r){var e=yi(n)?Vt:ir;return t=pe(t,r,3),e(n,function(n,r,e){return!t(n,r,e)
})},Ut.remove=function(n,t,r){var e=-1,u=n?n.length:0,o=[];for(t=pe(t,r,3);++e<u;)r=n[e],t(r,e,n)&&(o.push(r),no.call(n,e--,1),u--);return o},Ut.rest=Fe,Ut.restParam=Je,Ut.shuffle=Ke,Ut.slice=function(n,t,r){var e=n?n.length:0;return e?(r&&typeof r!="number"&&de(n,t,r)&&(t=0,r=e),Ar(n,t,r)):[]},Ut.sortBy=function(n,t,r){if(null==n)return[];var e=-1,u=n.length,o=we(u)?xu(u):[];return r&&de(n,t,r)&&(t=null),t=pe(t,r,3),ko(n,function(n,r,u){o[++e]={a:t(n,r,u),b:e,c:n}}),Or(o,a)},Ut.sortByAll=function(){var n=arguments,t=n[0],r=n[3],e=0,u=n.length-1;
if(null==t)return[];for(var o=xu(u);e<u;)o[e]=n[++e];return r&&de(n[1],n[2],r)&&(o=n[1]),Er(t,ar(o),[])},Ut.sortByOrder=function(n,t,r,e){return null==n?[]:(e&&de(t,r,e)&&(r=null),yi(t)||(t=null==t?[]:[t]),yi(r)||(r=null==r?[]:[r]),Er(n,t,r))},Ut.spread=function(n){if(typeof n!="function")throw new Cu($);return function(t){return n.apply(this,t)}},Ut.take=function(n,t,r){return n&&n.length?((r?de(n,t,r):null==t)&&(t=1),Ar(n,0,0>t?0:t)):[]},Ut.takeRight=function(n,t,r){var e=n?n.length:0;return e?((r?de(n,t,r):null==t)&&(t=1),t=e-(+t||0),Ar(n,0>t?0:t)):[]
},Ut.takeRightWhile=function(n,t,r){return n&&n.length?Sr(n,pe(t,r,3),false,true):[]},Ut.takeWhile=function(n,t,r){return n&&n.length?Sr(n,pe(t,r,3)):[]},Ut.tap=function(n,t,r){return t.call(r,n),n},Ut.throttle=function(n,t,r){var e=true,u=true;if(typeof n!="function")throw new Cu($);return false===r?e=false:nu(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),Tt.leading=e,Tt.maxWait=+t,Tt.trailing=u,Ze(n,t,Tt)},Ut.thru=Pe,Ut.times=function(n,t,r){if(n=+n,1>n||!io(n))return[];var e=-1,u=xu(co(n,vo));
for(t=Fr(t,r,1);++e<n;)e<vo?u[e]=t(e):t(e);return u},Ut.toArray=function(n){var t=n?n.length:0;return we(t)?t?Ut.support.unindexedChars&&uu(n)?n.split(""):Bt(n):[]:cu(n)},Ut.toPlainObject=iu,Ut.transform=function(n,t,r,e){var u=yi(n)||ou(n);return t=pe(t,e,4),null==r&&(u||nu(n)?(e=n.constructor,r=u?yi(n)?new e:[]:Io(mi(e)&&e.prototype)):r={}),(u?zt:lr)(n,function(n,e,u){return t(r,n,e,u)}),r},Ut.union=Do,Ut.uniq=We,Ut.unzip=Ne,Ut.values=cu,Ut.valuesIn=function(n){return Rr(n,au(n))},Ut.where=function(n,t){return ze(n,yr(t))
},Ut.without=qo,Ut.wrap=function(n,t){return t=null==t?du:t,fe(t,I,null,[n],[])},Ut.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(yi(r)||Xe(r))var e=e?ur(e,r).concat(ur(r,e)):r}return e?kr(e):[]},Ut.zip=Ko,Ut.zipObject=Le,Ut.backflow=hi,Ut.collect=De,Ut.compose=hi,Ut.each=Jo,Ut.eachRight=Xo,Ut.extend=bi,Ut.iteratee=vu,Ut.methods=fu,Ut.object=Le,Ut.select=ze,Ut.tail=Fe,Ut.unique=We,wu(Ut,Ut),Ut.add=function(n,t){return n+t},Ut.attempt=Pi,Ut.camelCase=Ui,Ut.capitalize=function(n){return(n=u(n))&&n.charAt(0).toUpperCase()+n.slice(1)
},Ut.clone=function(n,t,r,e){return t&&typeof t!="boolean"&&de(n,t,r)?t=false:typeof t=="function"&&(e=r,r=t,t=false),r=typeof r=="function"&&Fr(r,e,1),rr(n,t,r)},Ut.cloneDeep=function(n,t,r){return t=typeof t=="function"&&Fr(t,r,1),rr(n,true,t)},Ut.deburr=lu,Ut.endsWith=function(n,t,r){n=u(n),t+="";var e=n.length;return r=typeof r=="undefined"?e:co(0>r?0:+r||0,e),r-=t.length,0<=r&&n.indexOf(t,r)==r},Ut.escape=function(n){return(n=u(n))&&pt.test(n)?n.replace(lt,l):n},Ut.escapeRegExp=su,Ut.every=Be,Ut.find=Zo,Ut.findIndex=$o,Ut.findKey=Ai,Ut.findLast=Go,Ut.findLastIndex=Po,Ut.findLastKey=ji,Ut.findWhere=function(n,t){return Zo(n,yr(t))
},Ut.first=Ce,Ut.has=function(n,t){return n?Pu.call(n,t):false},Ut.identity=du,Ut.includes=Me,Ut.indexOf=Te,Ut.inRange=function(n,t,r){return t=+t||0,"undefined"===typeof r?(r=t,t=0):r=+r||0,n>=t&&n<r},Ut.isArguments=Xe,Ut.isArray=yi,Ut.isBoolean=function(n){return true===n||false===n||h(n)&&zu.call(n)==M},Ut.isDate=function(n){return h(n)&&zu.call(n)==D},Ut.isElement=He,Ut.isEmpty=function(n){if(null==n)return true;var t=n.length;return we(t)&&(yi(n)||uu(n)||Xe(n)||h(n)&&mi(n.splice))?!t:!Ri(n).length},Ut.isEqual=function(n,t,r,e){return r=typeof r=="function"&&Fr(r,e,3),!r&&be(n)&&be(t)?n===t:(e=r?r(n,t):w,typeof e=="undefined"?hr(n,t,r):!!e)
},Ut.isError=Qe,Ut.isFinite=di,Ut.isFunction=mi,Ut.isMatch=function(n,t,r,e){var u=Ri(t),o=u.length;if(!o)return true;if(null==n)return false;if(r=typeof r=="function"&&Fr(r,e,3),!r&&1==o){var i=u[0];if(e=t[i],be(e))return e===n[i]&&(typeof e!="undefined"||i in Ie(n))}for(var i=xu(o),f=xu(o);o--;)e=i[o]=t[u[o]],f[o]=be(e);return gr(Ie(n),u,i,f,r)},Ut.isNaN=function(n){return ru(n)&&n!=+n},Ut.isNative=tu,Ut.isNull=function(n){return null===n},Ut.isNumber=ru,Ut.isObject=nu,Ut.isPlainObject=wi,Ut.isRegExp=eu,Ut.isString=uu,Ut.isTypedArray=ou,Ut.isUndefined=function(n){return typeof n=="undefined"
},Ut.kebabCase=Fi,Ut.last=Ue,Ut.lastIndexOf=function(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if(typeof r=="number")u=(0>r?ao(e+r,0):co(r||0,e-1))+1;else if(r)return u=Tr(n,t,true)-1,n=n[u],(t===t?t===n:n!==n)?u:-1;if(t!==t)return p(n,u,true);for(;u--;)if(n[u]===t)return u;return-1},Ut.max=Bi,Ut.min=zi,Ut.noConflict=function(){return _._=Mu,this},Ut.noop=bu,Ut.now=ui,Ut.pad=function(n,t,r){n=u(n),t=+t;var e=n.length;return e<t&&io(t)?(e=(t-e)/2,t=Zu(e),e=Vu(e),r=ue("",e,r),r.slice(0,t)+n+r):n
},Ut.padLeft=Wi,Ut.padRight=Ni,Ut.parseInt=pu,Ut.random=function(n,t,r){r&&de(n,t,r)&&(t=r=null);var e=null==n,u=null==t;return null==r&&(u&&typeof n=="boolean"?(r=n,n=1):typeof t=="boolean"&&(r=t,u=true)),e&&u&&(t=1,u=false),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1?(r=ho(),co(n+r*(t-n+parseFloat("1e-"+((r+"").length-1))),t)):br(n,t)},Ut.reduce=ri,Ut.reduceRight=ei,Ut.repeat=hu,Ut.result=function(n,t,r){return t=null==n?w:n[t],typeof t=="undefined"&&(t=r),mi(t)?t.call(n):t},Ut.runInContext=m,Ut.size=function(n){var t=n?n.length:0;
return we(t)?t:Ri(n).length},Ut.snakeCase=Li,Ut.some=Ve,Ut.sortedIndex=zo,Ut.sortedLastIndex=Mo,Ut.startCase=$i,Ut.startsWith=function(n,t,r){return n=u(n),r=null==r?0:co(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r},Ut.sum=function(n,t,r){r&&de(n,t,r)&&(t=null);var e=pe(),u=null==t;if(e===tr&&u||(u=false,t=e(t,r,3)),u){for(n=yi(n)?n:Ee(n),t=n.length,r=0;t--;)r+=+n[t]||0;n=r}else n=Ir(n,t);return n},Ut.template=function(n,t,r){var e=Ut.templateSettings;r&&de(n,t,r)&&(t=r=null),n=u(n),t=Ht(Ht({},r||t),e,Xt),r=Ht(Ht({},t.imports),e.imports,Xt);
var o,i,f=Ri(r),a=Rr(r,f),c=0;r=t.interpolate||xt;var l="__p+='";r=Ru((t.escape||xt).source+"|"+r.source+"|"+(r===gt?yt:xt).source+"|"+(t.evaluate||xt).source+"|$","g");var p="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(n.replace(r,function(t,r,e,u,f,a){return e||(e=u),l+=n.slice(c,a).replace(Ot,s),r&&(o=true,l+="'+__e("+r+")+'"),f&&(i=true,l+="';"+f+";\n__p+='"),e&&(l+="'+((__t=("+e+"))==null?'':__t)+'"),c=a+t.length,t}),l+="';",(t=t.variable)||(l="with(obj){"+l+"}"),l=(i?l.replace(it,""):l).replace(ft,"$1").replace(at,"$1;"),l="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(o?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",t=Pi(function(){return Ou(f,p+"return "+l).apply(w,a)
}),t.source=l,Qe(t))throw t;return t},Ut.trim=_u,Ut.trimLeft=function(n,t,r){var e=n;return(n=u(n))?n.slice((r?de(e,t,r):null==t)?v(n):i(n,t+"")):n},Ut.trimRight=function(n,t,r){var e=n;return(n=u(n))?(r?de(e,t,r):null==t)?n.slice(0,y(n)+1):n.slice(0,f(n,t+"")+1):n},Ut.trunc=function(n,t,r){r&&de(n,t,r)&&(t=null);var e=C;if(r=T,null!=t)if(nu(t)){var o="separator"in t?t.separator:o,e="length"in t?+t.length||0:e;r="omission"in t?u(t.omission):r}else e=+t||0;if(n=u(n),e>=n.length)return n;if(e-=r.length,1>e)return r;
if(t=n.slice(0,e),null==o)return t+r;if(eu(o)){if(n.slice(e).search(o)){var i,f=n.slice(0,e);for(o.global||(o=Ru(o.source,(dt.exec(o)||"")+"g")),o.lastIndex=0;n=o.exec(f);)i=n.index;t=t.slice(0,null==i?e:i)}}else n.indexOf(o,e)!=e&&(o=t.lastIndexOf(o),-1<o&&(t=t.slice(0,o)));return t+r},Ut.unescape=function(n){return(n=u(n))&&st.test(n)?n.replace(ct,d):n},Ut.uniqueId=function(n){var t=++Bu;return u(n)+t},Ut.words=gu,Ut.all=Be,Ut.any=Ve,Ut.contains=Me,Ut.detect=Zo,Ut.foldl=ri,Ut.foldr=ei,Ut.head=Ce,Ut.include=Me,Ut.inject=ri,wu(Ut,function(){var n={};
return lr(Ut,function(t,r){Ut.prototype[r]||(n[r]=t)}),n}(),false),Ut.sample=qe,Ut.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return qe(t,n)}):qe(this.value())},Ut.VERSION=b,zt("bind bindKey curry curryRight partial partialRight".split(" "),function(n){Ut[n].placeholder=Ut}),zt(["dropWhile","filter","map","takeWhile"],function(n,t){var r=t!=L,e=t==W;Nt.prototype[n]=function(n,u){var o=this.__filtered__,i=o&&e?new Nt(this):this.clone();return(i.__iteratees__||(i.__iteratees__=[])).push({done:false,count:0,index:0,iteratee:pe(n,u,1),limit:-1,type:t}),i.__filtered__=o||r,i
}}),zt(["drop","take"],function(n,t){var r=n+"While";Nt.prototype[n]=function(r){var e=this.__filtered__,u=e&&!t?this.dropWhile():this.clone();return r=null==r?1:ao(Zu(r)||0,0),e?t?u.__takeCount__=co(u.__takeCount__,r):Ue(u.__iteratees__).limit=r:(u.__views__||(u.__views__=[])).push({size:r,type:n+(0>u.__dir__?"Right":"")}),u},Nt.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()},Nt.prototype[n+"RightWhile"]=function(n,t){return this.reverse()[r](n,t).reverse()}}),zt(["first","last"],function(n,t){var r="take"+(t?"Right":"");
Nt.prototype[n]=function(){return this[r](1).value()[0]}}),zt(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");Nt.prototype[n]=function(){return this[r](1)}}),zt(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?yr:wr;Nt.prototype[n]=function(n){return this[r](e(n))}}),Nt.prototype.compact=function(){return this.filter(du)},Nt.prototype.reject=function(n,t){return n=pe(n,t,1),this.filter(function(t){return!n(t)})},Nt.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=0>n?this.takeRight(-n):this.drop(n);
return typeof t!="undefined"&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r},Nt.prototype.toArray=function(){return this.drop(0)},lr(Nt.prototype,function(n,t){var r=Ut[t];if(r){var e=/^(?:filter|map|reject)|While$/.test(t),u=/^(?:first|last)$/.test(t);Ut.prototype[t]=function(){function t(n){return n=[n],Ju.apply(n,o),r.apply(Ut,n)}var o=arguments,i=this.__chain__,f=this.__wrapped__,a=!!this.__actions__.length,c=f instanceof Nt,l=o[0],s=c||yi(f);return s&&e&&typeof l=="function"&&1!=l.length&&(c=s=false),c=c&&!a,u&&!i?c?n.call(f):r.call(Ut,this.value()):s?(f=n.apply(c?f:new Nt(this),o),u||!a&&!f.__actions__||(f.__actions__||(f.__actions__=[])).push({func:Pe,args:[t],thisArg:Ut}),new Wt(f,i)):this.thru(t)
}}}),zt("concat join pop push replace shift sort splice split unshift".split(" "),function(n){var t=(/^(?:replace|split)$/.test(n)?Wu:Tu)[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|replace|shift)$/.test(n),u=Eo.spliceObjects||!/^(?:pop|shift|splice)$/.test(n)?t:function(){var n=t.apply(this,arguments);return 0===this.length&&delete this[0],n};Ut.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?u.apply(this.value(),n):this[r](function(t){return u.apply(t,n)
})}}),lr(Nt.prototype,function(n,t){var r=Ut[t];if(r){var e=r.name;(Ao[e]||(Ao[e]=[])).push({name:t,func:r})}}),Ao[ee(null,A).name]=[{name:"wrapper",func:null}],Nt.prototype.clone=function(){var n=this.__actions__,t=this.__iteratees__,r=this.__views__,e=new Nt(this.__wrapped__);return e.__actions__=n?Bt(n):null,e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=t?Bt(t):null,e.__takeCount__=this.__takeCount__,e.__views__=r?Bt(r):null,e},Nt.prototype.reverse=function(){if(this.__filtered__){var n=new Nt(this);
n.__dir__=-1,n.__filtered__=true}else n=this.clone(),n.__dir__*=-1;return n},Nt.prototype.value=function(){var n=this.__wrapped__.value();if(!yi(n))return Cr(n,this.__actions__);var t,r=this.__dir__,e=0>r;t=n.length;for(var u=this.__views__,o=0,i=-1,f=u?u.length:0;++i<f;){var a=u[i],c=a.size;switch(a.type){case"drop":o+=c;break;case"dropRight":t-=c;break;case"take":t=co(t,o+c);break;case"takeRight":o=ao(o,t-c)}}t={start:o,end:t},u=t.start,o=t.end,t=o-u,u=e?o:u-1,o=co(t,this.__takeCount__),f=(i=this.__iteratees__)?i.length:0,a=0,c=[];
n:for(;t--&&a<o;){for(var u=u+r,l=-1,s=n[u];++l<f;){var p=i[l],h=p.iteratee,_=p.type;if(_==W){if(p.done&&(e?u>p.index:u<p.index)&&(p.count=0,p.done=false),p.index=u,!(p.done||(_=p.limit,p.done=-1<_?p.count++>=_:!h(s))))continue n}else if(p=h(s),_==L)s=p;else if(!p){if(_==N)continue n;break n}}c[a++]=s}return c},Ut.prototype.chain=function(){return $e(this)},Ut.prototype.commit=function(){return new Wt(this.value(),this.__chain__)},Ut.prototype.plant=function(n){for(var t,r=this;r instanceof Ft;){var e=ke(r);
t?u.__wrapped__=e:t=e;var u=e,r=r.__wrapped__}return u.__wrapped__=n,t},Ut.prototype.reverse=function(){var n=this.__wrapped__;return n instanceof Nt?(this.__actions__.length&&(n=new Nt(this)),new Wt(n.reverse(),this.__chain__)):this.thru(function(n){return n.reverse()})},Ut.prototype.toString=function(){return this.value()+""},Ut.prototype.run=Ut.prototype.toJSON=Ut.prototype.valueOf=Ut.prototype.value=function(){return Cr(this.__wrapped__,this.__actions__)},Ut.prototype.collect=Ut.prototype.map,Ut.prototype.head=Ut.prototype.first,Ut.prototype.select=Ut.prototype.filter,Ut.prototype.tail=Ut.prototype.rest,Ut
}var w,b="3.6.0",x=1,A=2,j=4,O=8,E=16,I=32,k=64,R=128,S=256,C=30,T="...",U=150,F=16,W=0,N=1,L=2,$="Expected a function",P="__lodash_placeholder__",B="[object Arguments]",z="[object Array]",M="[object Boolean]",D="[object Date]",q="[object Error]",K="[object Function]",V="[object Number]",Y="[object Object]",Z="[object RegExp]",G="[object String]",J="[object ArrayBuffer]",X="[object Float32Array]",H="[object Float64Array]",Q="[object Int8Array]",nt="[object Int16Array]",tt="[object Int32Array]",rt="[object Uint8Array]",et="[object Uint8ClampedArray]",ut="[object Uint16Array]",ot="[object Uint32Array]",it=/\b__p\+='';/g,ft=/\b(__p\+=)''\+/g,at=/(__e\(.*?\)|\b__t\))\+'';/g,ct=/&(?:amp|lt|gt|quot|#39|#96);/g,lt=/[&<>"'`]/g,st=RegExp(ct.source),pt=RegExp(lt.source),ht=/<%-([\s\S]+?)%>/g,_t=/<%([\s\S]+?)%>/g,gt=/<%=([\s\S]+?)%>/g,vt=/[\u0300-\u036f\ufe20-\ufe23]/g,yt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,mt=/^0[xX]/,wt=/^\[object .+?Constructor\]$/,bt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,xt=/($^)/,At=/[.*+?^${}()|[\]\/\\]/g,jt=RegExp(At.source),Ot=/['\n\r\u2028\u2029\\]/g,Et=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),It=" \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000",kt="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window".split(" "),Rt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),St={};
St[X]=St[H]=St[Q]=St[nt]=St[tt]=St[rt]=St[et]=St[ut]=St[ot]=true,St[B]=St[z]=St[J]=St[M]=St[D]=St[q]=St[K]=St["[object Map]"]=St[V]=St[Y]=St[Z]=St["[object Set]"]=St[G]=St["[object WeakMap]"]=false;var Ct={};Ct[B]=Ct[z]=Ct[J]=Ct[M]=Ct[D]=Ct[X]=Ct[H]=Ct[Q]=Ct[nt]=Ct[tt]=Ct[V]=Ct[Y]=Ct[Z]=Ct[G]=Ct[rt]=Ct[et]=Ct[ut]=Ct[ot]=true,Ct[q]=Ct[K]=Ct["[object Map]"]=Ct["[object Set]"]=Ct["[object WeakMap]"]=false;var Tt={leading:false,maxWait:0,trailing:false},Ut={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss"},Ft={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Wt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Nt={"function":true,object:true},Lt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},$t=Nt[typeof exports]&&exports&&!exports.nodeType&&exports,Pt=Nt[typeof module]&&module&&!module.nodeType&&module,Bt=Nt[typeof self]&&self&&self.Object&&self,Nt=Nt[typeof window]&&window&&window.Object&&window,zt=Pt&&Pt.exports===$t&&$t,Mt=$t&&Pt&&typeof global=="object"&&global||Nt!==(this&&this.window)&&Nt||Bt||this,Dt=function(){try{Object({toString:0}+"")
}catch(n){return function(){return false}}return function(n){return typeof n.toString!="function"&&typeof(n+"")=="string"}}(),qt=m();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Mt._=qt, define(function(){return qt})):$t&&Pt?zt?(Pt.exports=qt)._=qt:$t._=qt:Mt._=qt}).call(this);
/*! globalize - v0.1.0pre - 2012-10-18
* http://wiki.jqueryui.com/Globalize
* Copyright 2012 ; Licensed MIT */
(function(e,t){var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N;n=function(e){return new n.prototype.init(e)},typeof require!="undefined"&&typeof exports!="undefined"&&typeof module!="undefined"?module.exports=n:e.Globalize=n,n.cultures={},n.prototype={constructor:n,init:function(e){return this.cultures=n.cultures,this.cultureSelector=e,this}},n.prototype.init.prototype=n.prototype,n.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}},n.cultures["default"].calendar=n.cultures["default"].calendars.standard,n.cultures.en=n.cultures["default"],n.cultureSelector="en",r=/^0x[a-f0-9]+$/i,i=/^[+\-]?infinity$/i,s=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,o=/^\s+|\s+$/g,u=function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},a=function(e,t){return e.substr(e.length-t.length)===t},f=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,p=arguments.length,d=!1;typeof u=="boolean"&&(d=u,u=arguments[1]||{},a=2),typeof u!="object"&&!c(u)&&(u={});for(;a<p;a++)if((e=arguments[a])!=null)for(n in e){r=u[n],i=e[n];if(u===i)continue;d&&i&&(h(i)||(s=l(i)))?(s?(s=!1,o=r&&l(r)?r:[]):o=r&&h(r)?r:{},u[n]=f(d,o,i)):i!==t&&(u[n]=i)}return u},l=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"},c=function(e){return Object.prototype.toString.call(e)==="[object Function]"},h=function(e){return Object.prototype.toString.call(e)==="[object Object]"},p=function(e,t){return e.indexOf(t)===0},d=function(e){return(e+"").replace(o,"")},v=function(e){return isNaN(e)?NaN:Math[e<0?"ceil":"floor"](e)},m=function(e,t,n){var r;for(r=e.length;r<t;r+=1)e=n?"0"+e:e+"0";return e},g=function(e,t){var n=0,r=!1;for(var i=0,s=e.length;i<s;i++){var o=e.charAt(i);switch(o){case"'":r?t.push("'"):n++,r=!1;break;case"\\":r&&t.push("\\"),r=!r;break;default:t.push(o),r=!1}}return n},y=function(e,t){t=t||"F";var n,r=e.patterns,i=t.length;if(i===1){n=r[t];if(!n)throw"Invalid date format string '"+t+"'.";t=n}else i===2&&t.charAt(0)==="%"&&(t=t.charAt(1));return t},b=function(e,t,n){function T(e,t){var n,r=e+"";return t>1&&r.length<t?(n=c[t-2]+r,n.substr(n.length-t,t)):(n=r,n)}function N(){return h||p?h:(h=d.test(t),p=!0,h)}function C(e,t){if(w)return w[t];switch(t){case 0:return e.getFullYear();case 1:return e.getMonth();case 2:return e.getDate();default:throw"Invalid part value "+t}}var r=n.calendar,i=r.convert,s;if(!t||!t.length||t==="i"){if(n&&n.name.length)if(i)s=b(e,r.patterns.F,n);else{var o=new Date(e.getTime()),u=S(e,r.eras);o.setFullYear(x(e,r,u)),s=o.toLocaleString()}else s=e.toString();return s}var a=r.eras,f=t==="s";t=y(r,t),s=[];var l,c=["0","00","000"],h,p,d=/([^d]|^)(d|dd)([^d]|$)/g,v=0,m=E(),w;!f&&i&&(w=i.fromGregorian(e));for(;;){var k=m.lastIndex,L=m.exec(t),A=t.slice(k,L?L.index:t.length);v+=g(A,s);if(!L)break;if(v%2){s.push(L[0]);continue}var O=L[0],M=O.length;switch(O){case"ddd":case"dddd":var _=M===3?r.days.namesAbbr:r.days.names;s.push(_[e.getDay()]);break;case"d":case"dd":h=!0,s.push(T(C(e,2),M));break;case"MMM":case"MMMM":var D=C(e,1);s.push(r.monthsGenitive&&N()?r.monthsGenitive[M===3?"namesAbbr":"names"][D]:r.months[M===3?"namesAbbr":"names"][D]);break;case"M":case"MM":s.push(T(C(e,1)+1,M));break;case"y":case"yy":case"yyyy":D=w?w[0]:x(e,r,S(e,a),f),M<4&&(D%=100),s.push(T(D,M));break;case"h":case"hh":l=e.getHours()%12,l===0&&(l=12),s.push(T(l,M));break;case"H":case"HH":s.push(T(e.getHours(),M));break;case"m":case"mm":s.push(T(e.getMinutes(),M));break;case"s":case"ss":s.push(T(e.getSeconds(),M));break;case"t":case"tt":D=e.getHours()<12?r.AM?r.AM[0]:" ":r.PM?r.PM[0]:" ",s.push(M===1?D.charAt(0):D);break;case"f":case"ff":case"fff":s.push(T(e.getMilliseconds(),3).substr(0,M));break;case"z":case"zz":l=e.getTimezoneOffset()/60,s.push((l<=0?"+":"-")+T(Math.floor(Math.abs(l)),M));break;case"zzz":l=e.getTimezoneOffset()/60,s.push((l<=0?"+":"-")+T(Math.floor(Math.abs(l)),2)+":"+T(Math.abs(e.getTimezoneOffset()%60),2));break;case"g":case"gg":r.eras&&s.push(r.eras[S(e,a)].name);break;case"/":s.push(r["/"]);break;default:throw"Invalid date format pattern '"+O+"'."}}return s.join("")},function(){var e;e=function(e,t,n){var r=n.groupSizes,i=r[0],s=1,o=Math.pow(10,t),u=Math.round(e*o)/o;isFinite(u)||(u=e),e=u;var a=e+"",f="",l=a.split(/e/i),c=l.length>1?parseInt(l[1],10):0;a=l[0],l=a.split("."),a=l[0],f=l.length>1?l[1]:"";var h;c>0?(f=m(f,c,!1),a+=f.slice(0,c),f=f.substr(c)):c<0&&(c=-c,a=m(a,c+1,!0),f=a.slice(-c,a.length)+f,a=a.slice(0,-c)),t>0?f=n["."]+(f.length>t?f.slice(0,t):m(f,t)):f="";var p=a.length-1,d=n[","],v="";while(p>=0){if(i===0||i>p)return a.slice(0,p+1)+(v.length?d+v+f:f);v=a.slice(p-i+1,p+1)+(v.length?d+v:""),p-=i,s<r.length&&(i=r[s],s++)}return a.slice(0,p+1)+d+v+f},w=function(t,n,r){if(!isFinite(t))return t===Infinity?r.numberFormat.positiveInfinity:t===-Infinity?r.numberFormat.negativeInfinity:r.numberFormat.NaN;if(!n||n==="i")return r.name.length?t.toLocaleString():t.toString();n=n||"D";var i=r.numberFormat,s=Math.abs(t),o=-1,u;n.length>1&&(o=parseInt(n.slice(1),10));var a=n.charAt(0).toUpperCase(),f;switch(a){case"D":u="n",s=v(s),o!==-1&&(s=m(""+s,o,!0)),t<0&&(s="-"+s);break;case"N":f=i;case"C":f=f||i.currency;case"P":f=f||i.percent,u=t<0?f.pattern[0]:f.pattern[1]||"n",o===-1&&(o=f.decimals),s=e(s*(a==="P"?100:1),o,f);break;default:throw"Bad number format specifier: "+a}var l=/n|\$|-|%/g,c="";for(;;){var h=l.lastIndex,p=l.exec(u);c+=u.slice(h,p?p.index:u.length);if(!p)break;switch(p[0]){case"n":c+=s;break;case"$":c+=i.currency.symbol;break;case"-":/[1-9]/.test(s)&&(c+=i["-"]);break;case"%":c+=i.percent.symbol}}return c}}(),E=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},S=function(e,t){if(!t)return 0;var n,r=e.getTime();for(var i=0,s=t.length;i<s;i++){n=t[i].start;if(n===null||r>=n)return i}return 0},x=function(e,t,n,r){var i=e.getFullYear();return!r&&t.eras&&(i-=t.eras[n].offset),i},function(){var e,t,n,r,i,s,o;e=function(e,t){if(t<100){var n=new Date,r=S(n),i=x(n,e,r),s=e.twoDigitYearMax;s=typeof s=="string"?(new Date).getFullYear()%100+parseInt(s,10):s,t+=i-i%100,t>s&&(t-=100)}return t},t=function(e,t,n){var r,i=e.days,a=e._upperDays;return a||(e._upperDays=a=[o(i.names),o(i.namesAbbr),o(i.namesShort)]),t=s(t),n?(r=u(a[1],t),r===-1&&(r=u(a[2],t))):r=u(a[0],t),r},n=function(e,t,n){var r=e.months,i=e.monthsGenitive||e.months,a=e._upperMonths,f=e._upperMonthsGen;a||(e._upperMonths=a=[o(r.names),o(r.namesAbbr)],e._upperMonthsGen=f=[o(i.names),o(i.namesAbbr)]),t=s(t);var l=u(n?a[1]:a[0],t);return l<0&&(l=u(n?f[1]:f[0],t)),l},r=function(e,t){var n=e._parseRegExp;if(!n)e._parseRegExp=n={};else{var r=n[t];if(r)return r}var i=y(e,t).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),s=["^"],o=[],u=0,a=0,f=E(),l;while((l=f.exec(i))!==null){var c=i.slice(u,l.index);u=f.lastIndex,a+=g(c,s);if(a%2){s.push(l[0]);continue}var h=l[0],p=h.length,d;switch(h){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":d="(\\D+)";break;case"tt":case"t":d="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":d="(\\d{"+p+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":d="(\\d\\d?)";break;case"zzz":d="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":d="([+-]?\\d\\d?)";break;case"/":d="(\\/)";break;default:throw"Invalid date format pattern '"+h+"'."}d&&s.push(d),o.push(l[0])}g(i.slice(u),s),s.push("$");var v=s.join("").replace(/\s+/g,"\\s+"),m={regExp:v,groups:o};return n[t]=m},i=function(e,t,n){return e<t||e>n},s=function(e){return e.split(" ").join(" ").toUpperCase()},o=function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t[n]=s(e[n]);return t},T=function(s,o,u){s=d(s);var a=u.calendar,f=r(a,o),l=(new RegExp(f.regExp)).exec(s);if(l===null)return null;var c=f.groups,h=null,v=null,m=null,g=null,y=null,b=0,w,E=0,S=0,x=0,T=null,N=!1;for(var C=0,k=c.length;C<k;C++){var L=l[C+1];if(L){var A=c[C],O=A.length,M=parseInt(L,10);switch(A){case"dd":case"d":g=M;if(i(g,1,31))return null;break;case"MMM":case"MMMM":m=n(a,L,O===3);if(i(m,0,11))return null;break;case"M":case"MM":m=M-1;if(i(m,0,11))return null;break;case"y":case"yy":case"yyyy":v=O<4?e(a,M):M;if(i(v,0,9999))return null;break;case"h":case"hh":b=M,b===12&&(b=0);if(i(b,0,11))return null;break;case"H":case"HH":b=M;if(i(b,0,23))return null;break;case"m":case"mm":E=M;if(i(E,0,59))return null;break;case"s":case"ss":S=M;if(i(S,0,59))return null;break;case"tt":case"t":N=a.PM&&(L===a.PM[0]||L===a.PM[1]||L===a.PM[2]);if(!N&&(!a.AM||L!==a.AM[0]&&L!==a.AM[1]&&L!==a.AM[2]))return null;break;case"f":case"ff":case"fff":x=M*Math.pow(10,3-O);if(i(x,0,999))return null;break;case"ddd":case"dddd":y=t(a,L,O===3);if(i(y,0,6))return null;break;case"zzz":var _=L.split(/:/);if(_.length!==2)return null;w=parseInt(_[0],10);if(i(w,-12,13))return null;var D=parseInt(_[1],10);if(i(D,0,59))return null;T=w*60+(p(L,"-")?-D:D);break;case"z":case"zz":w=M;if(i(w,-12,13))return null;T=w*60;break;case"g":case"gg":var P=L;if(!P||!a.eras)return null;P=d(P.toLowerCase());for(var H=0,B=a.eras.length;H<B;H++)if(P===a.eras[H].name.toLowerCase()){h=H;break}if(h===null)return null}}}var j=new Date,F,I=a.convert;F=I?I.fromGregorian(j)[0]:j.getFullYear(),v===null?v=F:a.eras&&(v+=a.eras[h||0].offset),m===null&&(m=0),g===null&&(g=1);if(I){j=I.toGregorian(v,m,g);if(j===null)return null}else{j.setFullYear(v,m,g);if(j.getDate()!==g)return null;if(y!==null&&j.getDay()!==y)return null}N&&b<12&&(b+=12),j.setHours(b,E,S,x);if(T!==null){var q=j.getMinutes()-(T+j.getTimezoneOffset());j.setHours(j.getHours()+parseInt(q/60,10),q%60)}return j}}(),N=function(e,t,n){var r=t["-"],i=t["+"],s;switch(n){case"n -":r=" "+r,i=" "+i;case"n-":a(e,r)?s=["-",e.substr(0,e.length-r.length)]:a(e,i)&&(s=["+",e.substr(0,e.length-i.length)]);break;case"- n":r+=" ",i+=" ";case"-n":p(e,r)?s=["-",e.substr(r.length)]:p(e,i)&&(s=["+",e.substr(i.length)]);break;case"(n)":p(e,"(")&&a(e,")")&&(s=["-",e.substr(1,e.length-2)])}return s||["",e]},n.prototype.findClosestCulture=function(e){return n.findClosestCulture.call(this,e)},n.prototype.format=function(e,t,r){return n.format.call(this,e,t,r)},n.prototype.localize=function(e,t){return n.localize.call(this,e,t)},n.prototype.parseInt=function(e,t,r){return n.parseInt.call(this,e,t,r)},n.prototype.parseFloat=function(e,t,r){return n.parseFloat.call(this,e,t,r)},n.prototype.culture=function(e){return n.culture.call(this,e)},n.addCultureInfo=function(e,t,n){var r={},i=!1;typeof e!="string"?(n=e,e=this.culture().name,r=this.cultures[e]):typeof t!="string"?(n=t,i=this.cultures[e]==null,r=this.cultures[e]||this.cultures["default"]):(i=!0,r=this.cultures[t]),this.cultures[e]=f(!0,{},r,n),i&&(this.cultures[e].calendar=this.cultures[e].calendars.standard)},n.findClosestCulture=function(e){var t;if(!e)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];typeof e=="string"&&(e=e.split(","));if(l(e)){var n,r=this.cultures,i=e,s,o=i.length,u=[];for(s=0;s<o;s++){e=d(i[s]);var a,f=e.split(";");n=d(f[0]),f.length===1?a=1:(e=d(f[1]),e.indexOf("q=")===0?(e=e.substr(2),a=parseFloat(e),a=isNaN(a)?0:a):a=1),u.push({lang:n,pri:a})}u.sort(function(e,t){return e.pri<t.pri?1:e.pri>t.pri?-1:0});for(s=0;s<o;s++){n=u[s].lang,t=r[n];if(t)return t}for(s=0;s<o;s++){n=u[s].lang;do{var c=n.lastIndexOf("-");if(c===-1)break;n=n.substr(0,c),t=r[n];if(t)return t}while(1)}for(s=0;s<o;s++){n=u[s].lang;for(var h in r){var p=r[h];if(p.language==n)return p}}}else if(typeof e=="object")return e;return t||null},n.format=function(e,t,n){var r=this.findClosestCulture(n);return e instanceof Date?e=b(e,t,r):typeof e=="number"&&(e=w(e,t,r)),e},n.localize=function(e,t){return this.findClosestCulture(t).messages[e]||this.cultures["default"].messages[e]},n.parseDate=function(e,t,n){n=this.findClosestCulture(n);var r,i,s;if(t){typeof t=="string"&&(t=[t]);if(t.length)for(var o=0,u=t.length;o<u;o++){var a=t[o];if(a){r=T(e,a,n);if(r)break}}}else{s=n.calendar.patterns;for(i in s){r=T(e,s[i],n);if(r)break}}return r||null},n.parseInt=function(e,t,r){return v(n.parseFloat(e,t,r))},n.parseFloat=function(e,t,n){typeof t!="number"&&(n=t,t=10);var o=this.findClosestCulture(n),u=NaN,a=o.numberFormat;e.indexOf(o.numberFormat.currency.symbol)>-1&&(e=e.replace(o.numberFormat.currency.symbol,""),e=e.replace(o.numberFormat.currency["."],o.numberFormat["."])),e.indexOf(o.numberFormat.percent.symbol)>-1&&(e=e.replace(o.numberFormat.percent.symbol,"")),e=e.replace(/ /g,"");if(i.test(e))u=parseFloat(e);else if(!t&&r.test(e))u=parseInt(e,16);else{var f=N(e,a,a.pattern[0]),l=f[0],c=f[1];l===""&&a.pattern[0]!=="(n)"&&(f=N(e,a,"(n)"),l=f[0],c=f[1]),l===""&&a.pattern[0]!=="-n"&&(f=N(e,a,"-n"),l=f[0],c=f[1]),l=l||"+";var h,p,d=c.indexOf("e");d<0&&(d=c.indexOf("E")),d<0?(p=c,h=null):(p=c.substr(0,d),h=c.substr(d+1));var v,m,g=a["."],y=p.indexOf(g);y<0?(v=p,m=null):(v=p.substr(0,y),m=p.substr(y+g.length));var b=a[","];v=v.split(b).join("");var w=b.replace(/\u00A0/g," ");b!==w&&(v=v.split(w).join(""));var E=l+v;m!==null&&(E+="."+m);if(h!==null){var S=N(h,a,"-n");E+="e"+(S[0]||"+")+S[1]}s.test(E)&&(u=parseFloat(E))}return u},n.culture=function(e){return typeof e!="undefined"&&(this.cultureSelector=e),this.findClosestCulture(e)||this.cultures["default"]}})(this);
/*
 * Globalize Culture en-US
 *
 * http://github.com/jquery/globalize
 *
 * Copyright Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * This file was generated by the Globalize Culture Generator
 * Translation: bugs found in this file need to be fixed in the generator
 */

(function( window, undefined ) {

var Globalize;

if ( typeof require !== "undefined" &&
	typeof exports !== "undefined" &&
	typeof module !== "undefined" ) {
	// Assume CommonJS
	Globalize = require( "globalize" );
} else {
	// Global variable
	Globalize = window.Globalize;
}

Globalize.addCultureInfo( "en-US", "default", {
	name: "en-US",
	englishName: "English (United States)"
});

}( this ));
/*! jQuery UI - v1.11.4 - 2015-08-25
* http://jqueryui.com
* Includes: core.js, widget.js, mouse.js, resizable.js, datepicker.js
* Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */

(function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)})(function(e){function t(t,s){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,t.href&&a&&"map"===n.nodeName.toLowerCase()?(o=e("img[usemap='#"+a+"']")[0],!!o&&i(o)):!1):(/^(input|select|textarea|button|object)$/.test(r)?!t.disabled:"a"===r?t.href||s:s)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}function s(e){for(var t,i;e.length&&e[0]!==document;){if(t=e.css("position"),("absolute"===t||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}function n(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=a(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function a(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",o)}function o(){e.datepicker._isDisabledDatepicker(d.inline?d.dpDiv.parent()[0]:d.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function r(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}e.ui=e.ui||{},e.extend(e.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({scrollParent:function(t){var i=this.css("position"),s="absolute"===i,n=t?/(auto|scroll|hidden)/:/(auto|scroll)/,a=this.parents().filter(function(){var t=e(this);return s&&"static"===t.css("position")?!1:n.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&a.length?a:e(this[0].ownerDocument||document)},uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var s=e.attr(i,"tabindex"),n=isNaN(s);return(n||s>=0)&&t(i,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function s(t,i,s,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===i?["Left","Right"]:["Top","Bottom"],a=i.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?o["inner"+i].call(this):this.each(function(){e(this).css(a,s(this,t)+"px")})},e.fn["outer"+i]=function(t,n){return"number"!=typeof t?o["outer"+i].call(this,t):this.each(function(){e(this).css(a,s(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,s,n=e(this[0]);n.length&&n[0]!==document;){if(i=n.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(n.css("zIndex"),10),!isNaN(s)&&0!==s))return s;n=n.parent()}return 0}}),e.ui.plugin={add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i,s){var n,a=e.plugins[t];if(a&&(s||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(n=0;a.length>n;n++)e.options[a[n][0]]&&a[n][1].apply(e.element,i)}};var h=0,l=Array.prototype.slice;e.cleanData=function(t){return function(i){var s,n,a;for(a=0;null!=(n=i[a]);a++)try{s=e._data(n,"events"),s&&s.remove&&e(n).triggerHandler("remove")}catch(o){}t(i)}}(e.cleanData),e.widget=function(t,i,s){var n,a,o,r,h={},l=t.split(".")[0];return t=t.split(".")[1],n=l+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[l]=e[l]||{},a=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?(arguments.length&&this._createWidget(e,t),void 0):new o(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){return e.isFunction(s)?(h[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}(),void 0):(h[t]=s,void 0)}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},h,{constructor:o,namespace:l,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o),o},e.widget.extend=function(t){for(var i,s,n=l.call(arguments,1),a=0,o=n.length;o>a;a++)for(i in n[a])s=n[a][i],n[a].hasOwnProperty(i)&&void 0!==s&&(t[i]=e.isPlainObject(s)?e.isPlainObject(t[i])?e.widget.extend({},t[i],s):e.widget.extend({},s):s);return t},e.widget.bridge=function(t,i){var s=i.prototype.widgetFullName||t;e.fn[t]=function(n){var a="string"==typeof n,o=l.call(arguments,1),r=this;return a?this.each(function(){var i,a=e.data(this,s);return"instance"===n?(r=a,!1):a?e.isFunction(a[n])&&"_"!==n.charAt(0)?(i=a[n].apply(a,o),i!==a&&void 0!==i?(r=i&&i.jquery?r.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+n+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+n+"'")}):(o.length&&(n=e.widget.extend.apply(null,[n].concat(o))),this.each(function(){var t=e.data(this,s);t?(t.option(n||{}),t._init&&t._init()):e.data(this,s,new i(n,this))})),r}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.uuid=h++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===i&&this.destroy()}}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var s,n,a,o=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(o={},s=t.split("."),t=s.shift(),s.length){for(n=o[t]=e.widget.extend({},this.options[t]),a=0;s.length-1>a;a++)n[s[a]]=n[s[a]]||{},n=n[s[a]];if(t=s.pop(),1===arguments.length)return void 0===n[t]?null:n[t];n[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];o[t]=i}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!t),t&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){return t||a.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?a[o]:o).apply(a,arguments):void 0}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var h=s.match(/^([\w:-]*)\s*(.*)$/),l=h[1]+a.eventNamespace,u=h[2];u?n.delegate(u,l,r):i.bind(l,r)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(i).undelegate(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?n===!0||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}}),e.widget;var u=!1;e(document).mouseup(function(){u=!1}),e.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!u){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var i=this,s=1===t.which,n="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return s&&!n&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return i._mouseMove(e)},this._mouseUpDelegate=function(e){return i._mouseUp(e)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),u=!0,!0)):!0}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||9>document.documentMode)&&!t.button)return this._mouseUp(t);if(!t.which)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),u=!1,!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),e.widget("ui.resizable",e.ui.mouse,{version:"1.11.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseInt(e,10)||0},_isNumber:function(e){return!isNaN(parseInt(e,10))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0?!0:(t[s]=1,n=t[s]>0,t[s]=0,n)},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;t.length>i;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:o._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)s=e(this.handles[i])[0],(s===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var i,s,n,a=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),a.containment&&(i+=e(a.containment).scrollLeft()||0,s+=e(a.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:i,top:s},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof a.aspectRatio?a.aspectRatio:this.originalSize.width/this.originalSize.height||1,n=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===n?this.axis+"-resize":n),o.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,s,n=this.originalMousePosition,a=this.axis,o=t.pageX-n.left||0,r=t.pageY-n.top||0,h=this._change[a];return this._updatePrevProperties(),h?(i=h.apply(this,[t,o,r]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),s=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(s)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,h,l=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&this._hasScroll(i[0],"left")?0:u.sizeDiff.height,a=s?0:u.sizeDiff.width,o={width:u.helper.width()-a,height:u.helper.height()-n},r=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,h=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,l.animate||this.element.css(e.extend(o,{top:h,left:r})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!l.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,s,n,a,o=this.options;a={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:1/0,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:1/0},(this._aspectRatio||e)&&(t=a.minHeight*this.aspectRatio,s=a.minWidth/this.aspectRatio,i=a.maxHeight*this.aspectRatio,n=a.maxWidth/this.aspectRatio,t>a.minWidth&&(a.minWidth=t),s>a.minHeight&&(a.minHeight=s),a.maxWidth>i&&(a.maxWidth=i),a.maxHeight>n&&(a.maxHeight=n)),this._vBoundaries=a},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,s=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===s&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===s&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,s=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,n=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,a=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,r=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,l=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return a&&(e.width=t.minWidth),o&&(e.height=t.minHeight),s&&(e.width=t.maxWidth),n&&(e.height=t.maxHeight),a&&l&&(e.left=r-t.minWidth),s&&l&&(e.left=r-t.maxWidth),o&&u&&(e.top=h-t.minHeight),n&&u&&(e.top=h-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],s=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],n=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];4>t;t++)i[t]=parseInt(s[t],10)||0,i[t]+=parseInt(n[t],10)||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;this._proportionallyResizeElements.length>t;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize,n=this.originalPosition;return{top:n.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&i._hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,h={width:i.size.width-r,height:i.size.height-o},l=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(h,u&&l?{top:u,left:l}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,n,a,o,r,h=e(this).resizable("instance"),l=h.options,u=h.element,d=l.containment,c=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;c&&(h.containerElement=e(c),/document/.test(d)||d===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(c),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,s){i[e]=h._num(t.css("padding"+s))}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=h.containerOffset,n=h.containerSize.height,a=h.containerSize.width,o=h._hasScroll(c,"left")?c.scrollWidth:a,r=h._hasScroll(c)?c.scrollHeight:n,h.parentData={element:c,left:s.left,top:s.top,width:o,height:r}))},resize:function(t){var i,s,n,a,o=e(this).resizable("instance"),r=o.options,h=o.containerOffset,l=o.position,u=o._aspectRatio||t.shiftKey,d={top:0,left:0},c=o.containerElement,p=!0;c[0]!==document&&/static/.test(c.css("position"))&&(d=h),l.left<(o._helper?h.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-h.left:o.position.left-d.left),u&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=r.helper?h.left:0),l.top<(o._helper?h.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-h.top:o.position.top),u&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?h.top:0),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),i=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-d.left:o.offset.left-h.left)),s=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-d.top:o.offset.top-h.top)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,u&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,u&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),h=o.outerWidth()-t.sizeDiff.width,l=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:h,height:l})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),i=t.options;
e(i.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})},resize:function(t,i){var s=e(this).resizable("instance"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0};e(n.alsoResize).each(function(){var t=e(this),s=e(this).data("ui-resizable-alsoresize"),n={},a=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(a,function(e,t){var i=(s[t]||0)+(r[t]||0);i&&i>=0&&(n[t]=i||null)}),t.css(n)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis,h="number"==typeof s.grid?[s.grid,s.grid]:s.grid,l=h[0]||1,u=h[1]||1,d=Math.round((n.width-a.width)/l)*l,c=Math.round((n.height-a.height)/u)*u,p=a.width+d,f=a.height+c,m=s.maxWidth&&p>s.maxWidth,g=s.maxHeight&&f>s.maxHeight,v=s.minWidth&&s.minWidth>p,y=s.minHeight&&s.minHeight>f;s.grid=h,v&&(p+=l),y&&(f+=u),m&&(p-=l),g&&(f-=u),/^(se|s|e)$/.test(r)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.top=o.top-c):/^(sw)$/.test(r)?(i.size.width=p,i.size.height=f,i.position.left=o.left-d):((0>=f-u||0>=p-l)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=o.top-c):(f=u-t.height,i.size.height=f,i.position.top=o.top+a.height-f),p-l>0?(i.size.width=p,i.position.left=o.left-d):(p=l-t.width,i.size.width=p,i.position.left=o.left+a.width-p))}}),e.ui.resizable,e.extend(e.ui,{datepicker:{version:"1.11.4"}});var d;e.extend(n.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return r(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){var s=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:s,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?a(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;e.length>n;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,n,a){var o,h,l,u,d,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),r(c.settings,n||{}),i=i&&i.constructor===Date?this._formatDate(c,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(h=document.documentElement.clientWidth,l=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[h/2-100+u,l/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,"datepicker");s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty(),d===n&&(d=null))},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,"datepicker");n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,s){var n,a,o,h,l=this._getInst(t);return 2===arguments.length&&"string"==typeof i?"defaults"===i?e.extend({},e.datepicker._defaults):l?"all"===i?e.extend({},l.settings):this._get(l,i):null:(n=i||{},"string"==typeof i&&(n={},n[i]=s),l&&(this._curInst===l&&this._hideDatepicker(),a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(l,"min"),h=this._getMinMaxDate(l,"max"),r(l.settings,n),null!==o&&void 0!==n.dateFormat&&void 0===n.minDate&&(l.settings.minDate=this._formatDate(l,o)),null!==h&&void 0!==n.dateFormat&&void 0===n.maxDate&&(l.settings.maxDate=this._formatDate(l,h)),"disabled"in n&&(n.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),l),this._autoSize(l),this._setDate(l,a),this._updateAlternate(l),this._updateDatepicker(l)),void 0)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,n=e.datepicker._getInst(t.target);return e.datepicker._get(n,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">s||!i||i.indexOf(s)>-1):void 0},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(n){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,a,o,h,l,u;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),a=n?n.apply(t,[t,i]):{},a!==!1&&(r(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return o|="fixed"===e(this).css("position"),!o}),h={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),h=e.datepicker._checkOffset(i,h,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:h.left+"px",top:h.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),u=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",s(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),u):i.dpDiv[l||"show"](l?u:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,d=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i,s=this._getNumberOfMonths(t),n=s[1],a=17,r=t.dpDiv.find("."+this._dayOverClass+" a");r.length>0&&o.apply(r.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",a*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,h=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),l=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>h&&h>n?Math.abs(i.left+n-h):0),i.top-=Math.min(i.top,i.top+a>l&&l>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,o=this._curInst;!o||t&&o!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(o,"showAnim"),s=this._get(o,"duration"),n=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[i]||e.effects[i])?o.dpDiv.hide(i,e.datepicker._get(o,"showOptions"),s,n):o.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(o,"onClose"),a&&a.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?""+i:i+"",""===i)return null;var n,a,o,r,h=0,l=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof l?l:(new Date).getFullYear()%100+parseInt(l,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,c=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,_=function(e){var i=t.length>n+1&&t.charAt(n+1)===e;return i&&n++,i},x=function(e){var t=_(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n="y"===e?s:1,a=RegExp("^\\d{"+n+","+s+"}"),o=i.substring(h).match(a);if(!o)throw"Missing number at position "+h;return h+=o[0].length,parseInt(o[0],10)},w=function(t,s,n){var a=-1,o=e.map(_(t)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];return i.substr(h,s.length).toLowerCase()===s.toLowerCase()?(a=t[0],h+=s.length,!1):void 0}),-1!==a)return a+1;throw"Unknown name at position "+h},k=function(){if(i.charAt(h)!==t.charAt(n))throw"Unexpected literal at position "+h;h++};for(n=0;t.length>n;n++)if(b)"'"!==t.charAt(n)||_("'")?k():b=!1;else switch(t.charAt(n)){case"d":v=x("d");break;case"D":w("D",d,c);break;case"o":y=x("o");break;case"m":g=x("m");break;case"M":g=w("M",p,f);break;case"y":m=x("y");break;case"@":r=new Date(x("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((x("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":_("'")?k():b=!0;break;default:k()}if(i.length>h&&(o=i.substr(h),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),y>-1)for(g=1,v=y;;){if(a=this._getDaysInMonth(m,g-1),a>=v)break;g++,v-=a}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:1e7*60*60*24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,h=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},l=function(e,t,i){var s=""+t;if(h(e))for(;i>s.length;)s="0"+s;return s},u=function(e,t,i,s){return h(e)?s[t]:i[t]},d="",c=!1;if(t)for(s=0;e.length>s;s++)if(c)"'"!==e.charAt(s)||h("'")?d+=e.charAt(s):c=!1;else switch(e.charAt(s)){case"d":d+=l("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),n,a);break;case"o":d+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=l("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),o,r);break;case"y":d+=h("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":h("'")?d+="'":c=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(r){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(s){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,a=n.getFullYear(),o=n.getMonth(),r=n.getDate(),h=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=h.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":o+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o));break;case"y":case"Y":a+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(a,o))}l=h.exec(i)}return new Date(a,o,r)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,a,o,r,h,l,u,d,c,p,f,m,g,v,y,b,_,x,w,k,T,D,S,N,M,C,P,A,I,H,z,F,E,W,O,L,j=new Date,R=this._daylightSavingAdjust(new Date(j.getFullYear(),j.getMonth(),j.getDate())),Y=this._get(e,"isRTL"),J=this._get(e,"showButtonPanel"),B=this._get(e,"hideIfNoPrevNext"),K=this._get(e,"navigationAsDateFormat"),U=this._getNumberOfMonths(e),V=this._get(e,"showCurrentAtPos"),q=this._get(e,"stepMonths"),G=1!==U[0]||1!==U[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),Q=this._getMinMaxDate(e,"min"),$=this._getMinMaxDate(e,"max"),Z=e.drawMonth-V,et=e.drawYear;if(0>Z&&(Z+=12,et--),$)for(t=this._daylightSavingAdjust(new Date($.getFullYear(),$.getMonth()-U[0]*U[1]+1,$.getDate())),t=Q&&Q>t?Q:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=K?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-q,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>":B?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=K?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z+q,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>":B?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(Y?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?X:R,o=K?this.formatDate(o,r,this._getFormatConfig(e)):o,h=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",l=J?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(Y?h:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(Y?"":h)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),c=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),_="",w=0;U[0]>w;w++){for(k="",this.maxRows=4,T=0;U[1]>T;T++){if(D=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),S=" ui-corner-all",N="",G){if(N+="<div class='ui-datepicker-group",U[1]>1)switch(T){case 0:N+=" ui-datepicker-group-first",S=" ui-corner-"+(Y?"right":"left");break;case U[1]-1:N+=" ui-datepicker-group-last",S=" ui-corner-"+(Y?"left":"right");break;default:N+=" ui-datepicker-group-middle",S=""}N+="'>"}for(N+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+S+"'>"+(/all|left/.test(S)&&0===w?Y?a:s:"")+(/all|right/.test(S)&&0===w?Y?s:a:"")+this._generateMonthYearHeader(e,Z,et,Q,$,w>0||T>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",M=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",x=0;7>x;x++)C=(x+u)%7,M+="<th scope='col'"+((x+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+c[C]+"'>"+p[C]+"</span></th>";for(N+=M+"</tr></thead><tbody>",P=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,P)),A=(this._getFirstDayOfMonth(et,Z)-u+7)%7,I=Math.ceil((A+P)/7),H=G?this.maxRows>I?this.maxRows:I:I,this.maxRows=H,z=this._daylightSavingAdjust(new Date(et,Z,1-A)),F=0;H>F;F++){for(N+="<tr>",E=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(z)+"</td>":"",x=0;7>x;x++)W=g?g.apply(e.input?e.input[0]:null,[z]):[!0,""],O=z.getMonth()!==Z,L=O&&!y||!W[0]||Q&&Q>z||$&&z>$,E+="<td class='"+((x+u+6)%7>=5?" ui-datepicker-week-end":"")+(O?" ui-datepicker-other-month":"")+(z.getTime()===D.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===z.getTime()&&b.getTime()===D.getTime()?" "+this._dayOverClass:"")+(L?" "+this._unselectableClass+" ui-state-disabled":"")+(O&&!v?"":" "+W[1]+(z.getTime()===X.getTime()?" "+this._currentClass:"")+(z.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(O&&!v||!W[2]?"":" title='"+W[2].replace(/'/g,"&#39;")+"'")+(L?"":" data-handler='selectDay' data-event='click' data-month='"+z.getMonth()+"' data-year='"+z.getFullYear()+"'")+">"+(O&&!v?"&#xa0;":L?"<span class='ui-state-default'>"+z.getDate()+"</span>":"<a class='ui-state-default"+(z.getTime()===R.getTime()?" ui-state-highlight":"")+(z.getTime()===X.getTime()?" ui-state-active":"")+(O?" ui-priority-secondary":"")+"' href='#'>"+z.getDate()+"</a>")+"</td>",z.setDate(z.getDate()+1),z=this._daylightSavingAdjust(z);N+=E+"</tr>"}Z++,Z>11&&(Z=0,et++),N+="</tbody></table>"+(G?"</div>"+(U[0]>0&&T===U[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),k+=N}_+=k}return _+=l,e._keyEvent=!1,_},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var h,l,u,d,c,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",_="";if(a||!g)_+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(h=s&&s.getFullYear()===i,l=n&&n.getFullYear()===i,_+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!h||u>=s.getMonth())&&(!l||n.getMonth()>=u)&&(_+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+r[u]+"</option>");_+="</select>"}if(y||(b+=_+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),c=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?c+parseInt(e,10):parseInt(e,10);return isNaN(t)?c:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";
e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!a&&g&&v?"":"&#xa0;")+_),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&i>t?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(0>t?t:n[0]*n[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,h=this._get(e,"yearRange");return h&&(i=h.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new n,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.11.4",e.datepicker});
var jsCommon;!function(e){var t;!function(e){e.escKeyCode=27,e.enterKeyCode=13,e.tabKeyCode=9,e.upArrowKeyCode=38,e.downArrowKeyCode=40,e.leftArrowKeyCode=37,e.rightArrowKeyCode=39,e.homeKeyCode=36,e.endKeyCode=35,e.backSpaceKeyCode=8,e.deleteKeyCode=46,e.spaceKeyCode=32,e.shiftKeyCode=16,e.ctrlKeyCode=17,e.altKeyCode=18,e.aKeyCode=65,e.cKeyCode=67,e.sKeyCode=83,e.vKeyCode=86,e.xKeyCode=88,e.yKeyCode=89,e.zKeyCode=90,e.DocumentBody="body",e.Anchor="a",e.EditableTextElements=":text, textarea",e.disabledAttributeOrValue="disabled",e.readonlyAttributeOrValue="readonly",e.idAttribute="id",e.styleAttribute="style",e.hrefAttribute="href",e.targetAttribute="target",e.blankValue="_blank",e.selfValue="_self",e.classAttribute="class",e.titleAttribute="title",e.srcAttribute="src",e.contextmenuEventName="contextmenu",e.blurEventName="blur",e.keyUpEventName="keyup",e.inputEventName="input",e.changeEventName="change",e.cutEventName="cut",e.keyDownEventName="keydown",e.mouseMoveEventName="mousemove",e.mouseDownEventName="mousedown",e.mouseEnterEventName="mouseenter",e.mouseLeaveEventName="mouseleave",e.mouseOverEventName="mouseover",e.mouseOutEventName="mouseout",e.mouseClickEventName="click",e.pasteEventName="paste",e.scrollEventName="scroll",e.dropEventName="drop",e.focusEventName="focus",e.focusInEventName="focusin",e.focusOutEventName="focusout",e.selectEventName="select",e.messageEventName="message",e.loadEventName="load",e.beforeUnload="beforeunload",e.inputAndSelectEventNames="input, select"}(t=e.DOMConstants||(e.DOMConstants={}))}(jsCommon||(jsCommon={}));var powerbi;!function(e){!function(e){e[e.ResourceCodeReference=0]="ResourceCodeReference",e[e.EmbeddedString=1]="EmbeddedString"}(e.PowerBIErrorResourceType||(e.PowerBIErrorResourceType={}));var t=e.PowerBIErrorResourceType;!function(e){e[e.GeneralError=0]="GeneralError",e[e.CsdlFetching=1]="CsdlFetching",e[e.CsdlConvertXmlToConceptualSchema=2]="CsdlConvertXmlToConceptualSchema",e[e.CsdlCreateClientSchema=3]="CsdlCreateClientSchema",e[e.ExecuteSemanticQueryError=4]="ExecuteSemanticQueryError",e[e.ExecuteSemanticQueryInvalidStreamFormat=5]="ExecuteSemanticQueryInvalidStreamFormat",e[e.ExecuteSemanticQueryTransformError=6]="ExecuteSemanticQueryTransformError"}(e.ServiceErrorStatusCode||(e.ServiceErrorStatusCode={}));var i=e.ServiceErrorStatusCode,a=function(){function e(e){this.m_serviceError=e}return Object.defineProperty(e.prototype,"code",{get:function(){return e.codeName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignorable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestId",{get:function(){return this.httpRequestId},set:function(e){this.httpRequestId=e},enumerable:!0,configurable:!0}),e.prototype.getDetails=function(e){var t;return t=this.m_serviceError.statusCode===i.ExecuteSemanticQueryTransformError?r.GetDetailsFromTransformError(e,this.m_serviceError):r.GetDetailsFromServerErrorStatusCode(e,this.m_serviceError.statusCode),r.addAdditionalInfo(t,this.m_serviceError.errorDetails,e),r.addMessageAndStackTrace(t,this.m_serviceError.message||null,this.m_serviceError.stackTrace||null,e),t},e.codeName="ServiceErrorToClientError",e}();e.ServiceErrorToClientError=a;var r=function(){function e(){}return e.addAdditionalInfo=function(i,a,r){if(a)for(var n=0;n<a.length;n++){var o=a[n],s={errorInfoKey:r.get(e.serverErrorPrefix+o.code),errorInfoValue:o.detail.type===t.ResourceCodeReference?r.get(e.serverErrorPrefix+o.detail.value):o.detail.value};i.additionalErrorInfo.push(s)}return i},e.addMessageAndStackTrace=function(e,t,i,a){if(t){var r={errorInfoKey:a.get("AdditionalErrorInfo_ErrorDetailsText"),errorInfoValue:t};e.additionalErrorInfo.push(r)}if(i){var r={errorInfoKey:a.get("AdditionalErrorInfo_StackTraceText"),errorInfoValue:i};e.additionalErrorInfo.push(r)}return e},e.GetDetailsFromTransformError=function(e,t){var i=e.get("ServiceError_CannotLoadVisual"),a=e.get("ServiceError_CannotLoadVisual"),r=t.message,n=[];n.push({errorInfoKey:a,errorInfoValue:r});var o={message:i,additionalErrorInfo:n};return o},e.GetDetailsFromServerErrorStatusCode=function(e,t){var a="",r="",n="";switch(t){case i.CsdlConvertXmlToConceptualSchema:a=e.get("ServiceError_ModelCannotLoad"),r=e.get("ServiceError_ModelConvertFailureKey"),n=e.get("ServiceError_ModelConvertFailureValue");break;case i.CsdlCreateClientSchema:a=e.get("ServiceError_ModelCannotLoad"),r=e.get("ServiceError_ModelCreationFailureKey"),n=e.get("ServiceError_ModelCreationFailureValue");break;case i.CsdlFetching:a=e.get("ServiceError_ModelCannotLoad"),r=e.get("ServiceError_ModelFetchingFailureKey"),n=e.get("ServiceError_ModelFetchingFailureValue");break;case i.ExecuteSemanticQueryError:a=e.get("ServiceError_CannotLoadVisual"),r=e.get("ServiceError_ExecuteSemanticQueryErrorKey"),n=e.get("ServiceError_ExecuteSemanticQueryErrorValue");break;case i.ExecuteSemanticQueryInvalidStreamFormat:a=e.get("ServiceError_CannotLoadVisual"),r=e.get("ServiceError_ExecuteSemanticQueryInvalidStreamFormatKey"),n=e.get("ServiceError_ExecuteSemanticQueryInvalidStreamFormatValue");break;case i.GeneralError:default:a=e.get("ServiceError_GeneralError"),r=e.get("ServiceError_GeneralErrorKey"),n=e.get("ServiceError_GeneralErrorValue")}var o=[];o.push({errorInfoKey:r,errorInfoValue:n});var s={message:a,additionalErrorInfo:o};return s},e.serverErrorPrefix="ServerError_",e}();e.PowerBIErrorDetailHelper=r}(powerbi||(powerbi={}));var powerbi;!function(e){}(powerbi||(powerbi={}));var powerbi;if(function(e){function t(e){return new a(e)}e.CategoryTypes={Address:"Address",City:"City",Continent:"Continent",CountryRegion:"Country",County:"County",Longitude:"Longitude",Latitude:"Latitude",Place:"Place",PostalCode:"PostalCode",StateOrProvince:"StateOrProvince"},e.createGeoTaggingAnalyzerService=t;var i={GeotaggingString_Continent:"continent",GeotaggingString_Continents:"continents",GeotaggingString_Country:"country",GeotaggingString_Countries:"countries",GeotaggingString_State:"state",GeotaggingString_States:"states",GeotaggingString_City:"city",GeotaggingString_Cities:"cities",GeotaggingString_Town:"town",GeotaggingString_Towns:"towns",GeotaggingString_Province:"province",GeotaggingString_Provinces:"provinces",GeotaggingString_County:"county",GeotaggingString_Counties:"counties",GeotaggingString_Village:"village",GeotaggingString_Villages:"villages",GeotaggingString_Post:"post",GeotaggingString_Zip:"zip",GeotaggingString_Code:"code",GeotaggingString_Place:"place",GeotaggingString_Places:"places",GeotaggingString_Address:"address",GeotaggingString_Addresses:"addresses",GeotaggingString_Street:"street",GeotaggingString_Streets:"streets",GeotaggingString_Longitude:"longitude",GeotaggingString_Longitude_Short:"lon",GeotaggingString_Latitude:"latitude",GeotaggingString_Latitude_Short:"lat",GeotaggingString_PostalCode:"postal code",GeotaggingString_PostalCodes:"postal codes",GeotaggingString_ZipCode:"zip code",GeotaggingString_ZipCodes:"zip codes",GeotaggingString_Territory:"territory",GeotaggingString_Territories:"territories",GeotaggingString_VRMBackCompat_CountryRegion:"CountryRegion",GeotaggingString_VRMBackCompat_StateOrProvince:"StateOrProvince"},a=function(){function t(e){this.GeotaggingString_VRMBackCompat_CountryRegion="CountryRegion",this.GeotaggingString_VRMBackCompat_StateOrProvince="StateOrProvince",this.GeotaggingString_Continent=e("GeotaggingString_Continent").toLowerCase(),this.GeotaggingString_Continents=e("GeotaggingString_Continents").toLowerCase(),this.GeotaggingString_Country=e("GeotaggingString_Country").toLowerCase(),this.GeotaggingString_Countries=e("GeotaggingString_Countries").toLowerCase(),this.GeotaggingString_State=e("GeotaggingString_State").toLowerCase(),this.GeotaggingString_States=e("GeotaggingString_States").toLowerCase(),this.GeotaggingString_City=e("GeotaggingString_City").toLowerCase(),this.GeotaggingString_Cities=e("GeotaggingString_Cities").toLowerCase(),this.GeotaggingString_Town=e("GeotaggingString_Town").toLowerCase(),this.GeotaggingString_Towns=e("GeotaggingString_Towns").toLowerCase(),this.GeotaggingString_Province=e("GeotaggingString_Province").toLowerCase(),this.GeotaggingString_Provinces=e("GeotaggingString_Provinces").toLowerCase(),this.GeotaggingString_County=e("GeotaggingString_County").toLowerCase(),this.GeotaggingString_Counties=e("GeotaggingString_Counties").toLowerCase(),this.GeotaggingString_Village=e("GeotaggingString_Village").toLowerCase(),this.GeotaggingString_Villages=e("GeotaggingString_Villages").toLowerCase(),this.GeotaggingString_Post=e("GeotaggingString_Post").toLowerCase(),this.GeotaggingString_Zip=e("GeotaggingString_Zip").toLowerCase(),this.GeotaggingString_Code=e("GeotaggingString_Code").toLowerCase(),this.GeotaggingString_Place=e("GeotaggingString_Place").toLowerCase(),this.GeotaggingString_Places=e("GeotaggingString_Places").toLowerCase(),this.GeotaggingString_Address=e("GeotaggingString_Address").toLowerCase(),this.GeotaggingString_Addresses=e("GeotaggingString_Addresses").toLowerCase(),this.GeotaggingString_Street=e("GeotaggingString_Street").toLowerCase(),this.GeotaggingString_Streets=e("GeotaggingString_Streets").toLowerCase(),this.GeotaggingString_Longitude=e("GeotaggingString_Longitude").toLowerCase(),this.GeotaggingString_Longitude_Short=e("GeotaggingString_Longitude_Short").toLowerCase(),this.GeotaggingString_Latitude=e("GeotaggingString_Latitude").toLowerCase(),this.GeotaggingString_Latitude_Short=e("GeotaggingString_Latitude_Short").toLowerCase(),this.GeotaggingString_PostalCode=e("GeotaggingString_PostalCode").toLowerCase(),this.GeotaggingString_PostalCodes=e("GeotaggingString_PostalCodes").toLowerCase(),this.GeotaggingString_ZipCode=e("GeotaggingString_ZipCode").toLowerCase(),this.GeotaggingString_ZipCodes=e("GeotaggingString_ZipCodes").toLowerCase(),this.GeotaggingString_Territory=e("GeotaggingString_Territory").toLowerCase(),this.GeotaggingString_Territories=e("GeotaggingString_Territories").toLowerCase()}return t.prototype.isLongitudeOrLatitude=function(e){return this.isLongitude(e)||this.isLatitude(e)},t.prototype.isGeographic=function(e){return this.isLongitudeOrLatitude(e)||this.isGeocodable(e)},t.prototype.isGeocodable=function(e){return this.isAddress(e)||this.isCity(e)||this.isContinent(e)||this.isCountry(e)||this.isCounty(e)||this.isStateOrProvince(e)||this.isPlace(e)||this.isPostalCode(e)||this.isTerritory(e)},t.prototype.isGeoshapable=function(e){return this.isCity(e)||this.isCountry(e)||this.isCounty(e)||this.isStateOrProvince(e)||this.isPostalCode(e)||this.isTerritory(e)||this.isGeoshapableEnglish(e)},t.prototype.isGeoshapableEnglish=function(e){return this.isEnglishCity(e)||this.isEnglishCountry(e)||this.isEnglishCounty(e)||this.isEnglishStateOrProvince(e)||this.isEnglishPostalCode(e)||this.isEnglishTerritory(e)},t.prototype.isAddress=function(e){return t.hasMatches(e,[this.GeotaggingString_Address,this.GeotaggingString_Addresses,this.GeotaggingString_Street,this.GeotaggingString_Streets])},t.prototype.isPlace=function(e){return t.hasMatches(e,[this.GeotaggingString_Place,this.GeotaggingString_Places])},t.prototype.isCity=function(e){return t.hasMatches(e,[this.GeotaggingString_City,this.GeotaggingString_Cities,this.GeotaggingString_Town,this.GeotaggingString_Towns,this.GeotaggingString_Village,this.GeotaggingString_Villages])},t.prototype.isStateOrProvince=function(e){return t.hasMatches(e,[this.GeotaggingString_State,this.GeotaggingString_States,this.GeotaggingString_Province,this.GeotaggingString_Provinces,this.GeotaggingString_VRMBackCompat_StateOrProvince])},t.prototype.isCountry=function(e){return t.hasMatches(e,[this.GeotaggingString_Country,this.GeotaggingString_Countries,this.GeotaggingString_VRMBackCompat_CountryRegion])},t.prototype.isCounty=function(e){return t.hasMatches(e,[this.GeotaggingString_County,this.GeotaggingString_Counties])},t.prototype.isContinent=function(e){return t.hasMatches(e,[this.GeotaggingString_Continent,this.GeotaggingString_Continents])},t.prototype.isPostalCode=function(e){var i=t.hasMatches(e,[this.GeotaggingString_Post,this.GeotaggingString_Zip])&&t.hasMatches(e,[this.GeotaggingString_Code])||t.hasMatches(e,[this.GeotaggingString_PostalCode,this.GeotaggingString_PostalCodes,this.GeotaggingString_ZipCode,this.GeotaggingString_ZipCodes]);if(!i){var a=/\s+/,r=e.replace(a,"");i=t.hasMatches(r,[this.GeotaggingString_PostalCode.replace(a,""),this.GeotaggingString_PostalCodes.replace(a,""),this.GeotaggingString_ZipCode.replace(a,""),this.GeotaggingString_ZipCodes.replace(a,"")])}return i},t.prototype.isLongitude=function(e){return t.hasMatches(e,[this.GeotaggingString_Longitude])||t.hasMatches(e,[this.GeotaggingString_Longitude_Short],!0)},t.prototype.isLatitude=function(e){return t.hasMatches(e,[this.GeotaggingString_Latitude])||t.hasMatches(e,[this.GeotaggingString_Latitude_Short],!0)},t.prototype.isTerritory=function(e){return t.hasMatches(e,[this.GeotaggingString_Territory,this.GeotaggingString_Territories])},t.hasMatches=function(e,t,i){for(var a=/\W/,r=e.toLowerCase(),n=0,o=t.length;o>n;n++){var s=t[n].toLowerCase();if(i){var l=r.indexOf(s);if(l>-1){var u=void 0,c=void 0;if(u=c=!0,l-1>0&&(c=a.test(r[l-1])),l+s.length<r.length&&(u=a.test(r[l+s.length])),c&&u)return!0}}else if(r.indexOf(s)>-1)return!0}return!1},t.prototype.getFieldType=function(t){return null!=t?this.isLatitude(t)?e.CategoryTypes.Latitude:this.isLongitude(t)?e.CategoryTypes.Longitude:this.isPostalCode(t)?e.CategoryTypes.PostalCode:this.isAddress(t)?e.CategoryTypes.Address:this.isPlace(t)?e.CategoryTypes.Place:this.isCity(t)?e.CategoryTypes.City:this.isCountry(t)?e.CategoryTypes.CountryRegion:this.isCounty(t)?e.CategoryTypes.County:this.isStateOrProvince(t)?e.CategoryTypes.StateOrProvince:this.isContinent(t)?e.CategoryTypes.Continent:this.getEnglishFieldType(t):void 0},t.prototype.isEnglishAddress=function(e){return t.hasMatches(e,[i.GeotaggingString_Address,i.GeotaggingString_Addresses,i.GeotaggingString_Street,i.GeotaggingString_Streets])},t.prototype.isEnglishPlace=function(e){return t.hasMatches(e,[i.GeotaggingString_Place,i.GeotaggingString_Places])},t.prototype.isEnglishCity=function(e){return t.hasMatches(e,[i.GeotaggingString_City,i.GeotaggingString_Cities,i.GeotaggingString_Town,i.GeotaggingString_Towns,i.GeotaggingString_Village,i.GeotaggingString_Villages])},t.prototype.isEnglishStateOrProvince=function(e){return t.hasMatches(e,[i.GeotaggingString_State,i.GeotaggingString_States,i.GeotaggingString_Province,i.GeotaggingString_Provinces,i.GeotaggingString_VRMBackCompat_StateOrProvince])},t.prototype.isEnglishCountry=function(e){return t.hasMatches(e,[i.GeotaggingString_Country,i.GeotaggingString_Countries,i.GeotaggingString_VRMBackCompat_CountryRegion])},t.prototype.isEnglishCounty=function(e){return t.hasMatches(e,[i.GeotaggingString_County,i.GeotaggingString_Counties])},t.prototype.isEnglishContinent=function(e){return t.hasMatches(e,[i.GeotaggingString_Continent,i.GeotaggingString_Continents])},t.prototype.isEnglishPostalCode=function(e){var a=t.hasMatches(e,[i.GeotaggingString_Post,i.GeotaggingString_Zip])&&t.hasMatches(e,[this.GeotaggingString_Code])||t.hasMatches(e,[i.GeotaggingString_PostalCode,i.GeotaggingString_PostalCodes,i.GeotaggingString_ZipCode,i.GeotaggingString_ZipCodes]);if(!a){var r=new RegExp("s");a=t.hasMatches(e,[i.GeotaggingString_PostalCode.replace(r,""),i.GeotaggingString_PostalCodes.replace(r,""),i.GeotaggingString_ZipCode.replace(r,""),i.GeotaggingString_ZipCodes.replace(r,"")])}return a},t.prototype.isEnglishLongitude=function(e){return t.hasMatches(e,[i.GeotaggingString_Longitude,i.GeotaggingString_Longitude_Short])},t.prototype.isEnglishLatitude=function(e){return t.hasMatches(e,[i.GeotaggingString_Latitude,i.GeotaggingString_Latitude_Short])},t.prototype.isEnglishTerritory=function(e){return t.hasMatches(e,[i.GeotaggingString_Territory,i.GeotaggingString_Territories])},t.prototype.getEnglishFieldType=function(t){return null!=t?this.isEnglishLatitude(t)?e.CategoryTypes.Latitude:this.isEnglishLongitude(t)?e.CategoryTypes.Longitude:this.isEnglishPostalCode(t)?e.CategoryTypes.PostalCode:this.isEnglishAddress(t)?e.CategoryTypes.Address:this.isEnglishPlace(t)?e.CategoryTypes.Place:this.isEnglishCity(t)?e.CategoryTypes.City:this.isEnglishCountry(t)?e.CategoryTypes.CountryRegion:this.isEnglishCounty(t)?e.CategoryTypes.County:this.isEnglishStateOrProvince(t)?e.CategoryTypes.StateOrProvince:this.isEnglishContinent(t)?e.CategoryTypes.Continent:void 0:void 0},t}();e.GeoTaggingAnalyzerService=a}(powerbi||(powerbi={})),"undefined"==typeof DEBUG)var DEBUG=!0;var powerbi;!function(e){var t=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"UnknownClientError"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignorable",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.getDetails=function(e){var t={message:e.get("ClientError_UnknownClientErrorValue"),additionalErrorInfo:[{errorInfoKey:e.get("ClientError_UnknownClientErrorKey"),errorInfoValue:e.get("ClientError_UnknownClientErrorValue")}]};return t},e}();e.UnknownClientError=t;var i=function(){function e(e,t){this.httpStatusCode=e,this.httpRequestId=t}return Object.defineProperty(e.prototype,"code",{get:function(){return"HttpClientError"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignorable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestId",{get:function(){return this.httpRequestId},enumerable:!0,configurable:!0}),e.prototype.getDetails=function(e){var t={message:null,additionalErrorInfo:[{errorInfoKey:e.get("DsrError_Key"),errorInfoValue:e.get("DsrError_UnknownErrorValue")},{errorInfoKey:e.get("ClientError_HttpResponseStatusCodeKey"),errorInfoValue:this.httpStatusCode.toString()}]};return t},e}();e.HttpClientError=i;var a=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"IgnorableClientError"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignorable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.getDetails=function(e){var t={message:"",additionalErrorInfo:[]};return t},e}();e.IgnorableClientError=a}(powerbi||(powerbi={}));var InJs;!function(e){var t;!function(e){function t(){return $("<div/>")}function i(){return $("<span/>")}function a(){return $('<input type="checkbox"/>')}function r(){return $("<ul/>")}function n(){return $("<li/>")}function o(){return $('<input type="button"/>')}function s(){return $("<select/>")}function l(){return $('<input type="text"/>')}function u(){return $("<img/>")}function c(){return $("<iframe/>")}e.div=t,e.span=i,e.checkbox=a,e.ul=r,e.li=n,e.button=o,e.select=s,e.textBox=l,e.img=u,e.iframe=c}(t=e.DomFactory||(e.DomFactory={}))}(InJs||(InJs={}));var powerbi;!function(e){function t(e,t){return void 0!==e?e:t}var i;!function(e){function i(t){return t>=0?t<e.POSITIVE_POWERS.length?e.POSITIVE_POWERS[t]:1/0:(t=-t,t>0&&t<e.NEGATIVE_POWERS.length?e.NEGATIVE_POWERS[t]:0)}function a(t){if(t>1&&1e16>t)return 1e8>t?1e4>t?100>t?10>t?0:1:1e3>t?2:3:1e6>t?1e5>t?4:5:1e7>t?6:7:1e12>t?1e10>t?1e9>t?8:9:1e11>t?10:11:1e14>t?1e13>t?12:13:1e15>t?14:15;if(t>1e-16&&1>t)return 1e-8>t?1e-12>t?1e-14>t?1e-15>t?-16:-15:1e-13>t?-14:-13:1e-10>t?1e-11>t?-12:-11:1e-9>t?-10:-9:1e-4>t?1e-6>t?1e-7>t?-8:-7:1e-5>t?-6:-5:.01>t?.001>t?-4:-3:.1>t?-2:-1;var i=Math.log(t)/e.LOG_E_10;return e.floorWithPrecision(i)}function r(t,i){if(void 0===i&&(i=e.DEFAULT_PRECISION_IN_DECIMAL_DIGITS),t){var a=e.log10(Math.abs(t));if(a<e.MIN_EXP)return 0;var r=Math.max(a-i,-e.NEGATIVE_POWERS.length+1);return e.pow10(r)}}function n(i,a,r){return r=t(r,e.DEFAULT_PRECISION),i===a||Math.abs(i-a)<r}function o(i,a,r){return r=t(r,e.DEFAULT_PRECISION),a>i&&Math.abs(i-a)>r}function s(i,a,r){return r=t(r,e.DEFAULT_PRECISION),a>i||Math.abs(i-a)<r}function l(i,a,r){return r=t(r,e.DEFAULT_PRECISION),i>a&&Math.abs(i-a)>r}function u(i,a,r){return r=t(r,e.DEFAULT_PRECISION),i>a||Math.abs(i-a)<r}function c(i,a){a=t(a,e.DEFAULT_PRECISION);var r=Math.round(i);return Math.abs(i-r)<a?r:Math.floor(i)}function h(i,a){a=t(a,e.DEFAULT_PRECISION);var r=Math.round(i);return Math.abs(i-r)<a?r:Math.ceil(i)}function p(i,a){return a=t(a,e.DEFAULT_PRECISION),0===a||0===i?i:Math.floor(i/a)*a}function d(i,a){return a=t(a,e.DEFAULT_PRECISION),0===a||0===i?i:Math.ceil(i/a)*a}function g(i,a){if(a=t(a,e.DEFAULT_PRECISION),0===a||0===i)return i;var r=Math.round(i/a)*a,n=Math.round(e.log10(Math.abs(i))-e.log10(a))+1;return n>0&&16>n&&(r=parseFloat(r.toPrecision(n))),r}function m(e,t,i){return void 0===e||null===e?e:t>e?t:e>i?i:e}function f(e){return.5+e<<0}function y(e,t,i,a,r){if(0===i||0===r)return e>=t&&t+i>=e?a:NaN;var n=(e-t)/i,o=a+n*r;return o}function v(e){return g(e,r(e))}function b(e){return null!==e&&e%1===0}function C(e,t){return Math.round(e/t)*t}e.MIN_VALUE=-Number.MAX_VALUE,e.MAX_VALUE=Number.MAX_VALUE,e.MIN_EXP=-308,e.MAX_EXP=308,e.EPSILON=1e-323,e.DEFAULT_PRECISION=1e-4,e.DEFAULT_PRECISION_IN_DECIMAL_DIGITS=12,e.LOG_E_10=Math.log(10),e.POSITIVE_POWERS=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13,1e14,1e15,1e16,1e17,1e18,1e19,1e20,1e21,1e22,1e23,1e24,1e25,1e26,1e27,1e28,1e29,1e30,1e31,1e32,1e33,1e34,1e35,1e36,1e37,1e38,1e39,1e40,1e41,1e42,1e43,1e44,1e45,1e46,1e47,1e48,1e49,1e50,1e51,1e52,1e53,1e54,1e55,1e56,1e57,1e58,1e59,1e60,1e61,1e62,1e63,1e64,1e65,1e66,1e67,1e68,1e69,1e70,1e71,1e72,1e73,1e74,1e75,1e76,1e77,1e78,1e79,1e80,1e81,1e82,1e83,1e84,1e85,1e86,1e87,1e88,1e89,1e90,1e91,1e92,1e93,1e94,1e95,1e96,1e97,1e98,1e99,1e100,1e101,1e102,1e103,1e104,1e105,1e106,1e107,1e108,1e109,1e110,1e111,1e112,1e113,1e114,1e115,1e116,1e117,1e118,1e119,1e120,1e121,1e122,1e123,1e124,1e125,1e126,1e127,1e128,1e129,1e130,1e131,1e132,1e133,1e134,1e135,1e136,1e137,1e138,1e139,1e140,1e141,1e142,1e143,1e144,1e145,1e146,1e147,1e148,1e149,1e150,1e151,1e152,1e153,1e154,1e155,1e156,1e157,1e158,1e159,1e160,1e161,1e162,1e163,1e164,1e165,1e166,1e167,1e168,1e169,1e170,1e171,1e172,1e173,1e174,1e175,1e176,1e177,1e178,1e179,1e180,1e181,1e182,1e183,1e184,1e185,1e186,1e187,1e188,1e189,1e190,1e191,1e192,1e193,1e194,1e195,1e196,1e197,1e198,1e199,1e200,1e201,1e202,1e203,1e204,1e205,1e206,1e207,1e208,1e209,1e210,1e211,1e212,1e213,1e214,1e215,1e216,1e217,1e218,1e219,1e220,1e221,1e222,1e223,1e224,1e225,1e226,1e227,1e228,1e229,1e230,1e231,1e232,1e233,1e234,1e235,1e236,1e237,1e238,1e239,1e240,1e241,1e242,1e243,1e244,1e245,1e246,1e247,1e248,1e249,1e250,1e251,1e252,1e253,1e254,1e255,1e256,1e257,1e258,1e259,1e260,1e261,1e262,1e263,1e264,1e265,1e266,1e267,1e268,1e269,1e270,1e271,1e272,1e273,1e274,1e275,1e276,1e277,1e278,1e279,1e280,1e281,1e282,1e283,1e284,1e285,1e286,1e287,1e288,1e289,1e290,1e291,1e292,1e293,1e294,1e295,1e296,1e297,1e298,1e299,1e300,1e301,1e302,1e303,1e304,1e305,1e306,1e307,1e308],e.NEGATIVE_POWERS=[1,.1,.01,.001,1e-4,1e-5,1e-6,1e-7,1e-8,1e-9,1e-10,1e-11,1e-12,1e-13,1e-14,1e-15,1e-16,1e-17,1e-18,1e-19,1e-20,1e-21,1e-22,1e-23,1e-24,1e-25,1e-26,1e-27,1e-28,1e-29,1e-30,1e-31,1e-32,1e-33,1e-34,1e-35,1e-36,1e-37,1e-38,1e-39,1e-40,1e-41,1e-42,1e-43,1e-44,1e-45,1e-46,1e-47,1e-48,1e-49,1e-50,1e-51,1e-52,1e-53,1e-54,1e-55,1e-56,1e-57,1e-58,1e-59,1e-60,1e-61,1e-62,1e-63,1e-64,1e-65,1e-66,1e-67,1e-68,1e-69,1e-70,1e-71,1e-72,1e-73,1e-74,1e-75,1e-76,1e-77,1e-78,1e-79,1e-80,1e-81,1e-82,1e-83,1e-84,1e-85,1e-86,1e-87,1e-88,1e-89,1e-90,1e-91,1e-92,1e-93,1e-94,1e-95,1e-96,1e-97,1e-98,1e-99,1e-100,1e-101,1e-102,1e-103,1e-104,1e-105,1e-106,1e-107,1e-108,1e-109,1e-110,1e-111,1e-112,1e-113,1e-114,1e-115,1e-116,1e-117,1e-118,1e-119,1e-120,1e-121,1e-122,1e-123,1e-124,1e-125,1e-126,1e-127,1e-128,1e-129,1e-130,1e-131,1e-132,1e-133,1e-134,1e-135,1e-136,1e-137,1e-138,1e-139,1e-140,1e-141,1e-142,1e-143,1e-144,1e-145,1e-146,1e-147,1e-148,1e-149,1e-150,1e-151,1e-152,1e-153,1e-154,1e-155,1e-156,1e-157,1e-158,1e-159,1e-160,1e-161,1e-162,1e-163,1e-164,1e-165,1e-166,1e-167,1e-168,1e-169,1e-170,1e-171,1e-172,1e-173,1e-174,1e-175,1e-176,1e-177,1e-178,1e-179,1e-180,1e-181,1e-182,1e-183,1e-184,1e-185,1e-186,1e-187,1e-188,1e-189,1e-190,1e-191,1e-192,1e-193,1e-194,1e-195,1e-196,1e-197,1e-198,1e-199,1e-200,1e-201,1e-202,1e-203,1e-204,1e-205,1e-206,1e-207,1e-208,1e-209,1e-210,1e-211,1e-212,1e-213,1e-214,1e-215,1e-216,1e-217,1e-218,1e-219,1e-220,1e-221,1e-222,1e-223,1e-224,1e-225,1e-226,1e-227,1e-228,1e-229,1e-230,1e-231,1e-232,1e-233,1e-234,1e-235,1e-236,1e-237,1e-238,1e-239,1e-240,1e-241,1e-242,1e-243,1e-244,1e-245,1e-246,1e-247,1e-248,1e-249,1e-250,1e-251,1e-252,1e-253,1e-254,1e-255,1e-256,1e-257,1e-258,1e-259,1e-260,1e-261,1e-262,1e-263,1e-264,1e-265,1e-266,1e-267,1e-268,1e-269,1e-270,1e-271,1e-272,1e-273,1e-274,1e-275,1e-276,1e-277,1e-278,1e-279,1e-280,1e-281,1e-282,1e-283,1e-284,1e-285,1e-286,1e-287,1e-288,1e-289,1e-290,1e-291,1e-292,1e-293,1e-294,1e-295,1e-296,1e-297,1e-298,1e-299,1e-300,1e-301,1e-302,1e-303,1e-304,1e-305,1e-306,1e-307,1e-308,1e-309,1e-310,1e-311,1e-312,1e-313,1e-314,1e-315,1e-316,1e-317,1e-318,1e-319,1e-320,1e-321,1e-322,1e-323,0],e.pow10=i,e.log10=a,e.getPrecision=r,e.equalWithPrecision=n,e.lessWithPrecision=o,e.lessOrEqualWithPrecision=s,e.greaterWithPrecision=l,e.greaterOrEqualWithPrecision=u,e.floorWithPrecision=c,e.ceilWithPrecision=h,e.floorToPrecision=p,e.ceilToPrecision=d,e.roundToPrecision=g,e.ensureInRange=m,e.round=f,e.project=y,e.removeDecimalNoise=v,e.isInteger=b,e.toIncrement=C}(i=e.Double||(e.Double={}))}(powerbi||(powerbi={}));var jsCommon;!function(e){var t,i=powerbi.Double;!function(e){function t(e,t){if(0===t)return e;var i=r(e),a=n(i),l=s(a,t),u=o(l);return c(u)}function a(e){var t=r(e);return c(t)}function r(e){if(e.indexOf("#")>=0){if(7===e.length){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(null==t||t.length<4)return;return{R:parseInt(t[1],16),G:parseInt(t[2],16),B:parseInt(t[3],16)}}if(4===e.length){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i.exec(e);if(null==t||t.length<4)return;return{R:parseInt(t[1]+t[1],16),G:parseInt(t[2]+t[2],16),B:parseInt(t[3]+t[3],16)}}}else{if(e.indexOf("rgb(")>=0){var t=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/.exec(e);if(null==t||t.length<4)return;return{R:parseInt(t[1],10),G:parseInt(t[2],10),B:parseInt(t[3],10)}}if(e.indexOf("rgba(")>=0){var t=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d*(?:\.\d+)?)\)$/.exec(e);if(null==t||t.length<5)return;return{R:parseInt(t[1],10),G:parseInt(t[2],10),B:parseInt(t[3],10),A:parseFloat(t[4])}}}}function n(e){var t,i,a=e.R/255,r=e.G/255,n=e.B/255,o=Math.min(a,Math.min(r,n)),s=Math.max(a,Math.max(r,n)),l=s,u=s-o;return 0===s||0===u?(t=0,i=0):(t=u/s,i=a===s?(r-n)/u:r===s?2+(n-a)/u:4+(a-r)/u),i/=6,0>i&&(i+=1),{H:i,S:t,V:l}}function o(e){var t,i,a,r=e.H,n=e.S,o=e.V;if(0===n)t=o,i=o,a=o;else{var s,l,u,c,h,p;switch(p=6*r,h=Math.floor(p),c=p-h,s=o*(1-n),l=o*(1-n*c),u=o*(1-n*(1-c)),h){case 0:t=o,i=u,a=s;break;case 1:t=l,i=o,a=s;break;case 2:t=s,i=o,a=u;break;case 3:t=s,i=l,a=o;break;case 4:t=u,i=s,a=o;break;case 5:t=o,i=s,a=l}}return{R:Math.floor(255*t),G:Math.floor(255*i),B:Math.floor(255*a)}}function s(e,t){var i=e.H+t;return{H:i>1?i-1:i,S:e.S,V:e.V}}function l(e,t){var i=Math.floor(t);return{R:Math.max(0,e.R-i),G:Math.max(0,e.G-i),B:Math.max(0,e.B-i)}}function u(e){return null==e.A?"rgb("+e.R+","+e.G+","+e.B+")":"rgba("+e.R+","+e.G+","+e.B+","+e.A+")"}function c(e){return"#"+h(e.R)+h(e.G)+h(e.B)}function h(e){var t=i.ensureInRange(e,0,255),a=t.toString(16).toUpperCase();return 1===a.length?"0"+a:a}e.rotate=t,e.normalizeToHexString=a,e.parseColorString=r,e.darken=l,e.rgbString=u,e.hexString=c}(t=e.Color||(e.Color={}))}(jsCommon||(jsCommon={}));var jsCommon;!function(e){var t;!function(e){function t(e){return{"class":e,selector:"."+e}}e.createClassAndSelector=t,e.styleAttribute="style",e.pixelUnits="px",e.heightProperty="height",e.widthProperty="width",e.topProperty="top",e.bottomProperty="bottom",e.leftProperty="left",e.rightProperty="right",e.marginTopProperty="margin-top",e.marginLeftProperty="margin-left",e.displayProperty="display",e.backgroundProperty="background",e.backgroundColorProperty="background-color",e.backgroundRepeatProperty="background-repeat",e.backgroundSizeProperty="background-size",e.backgroundImageProperty="background-image",e.textShadowProperty="text-shadow",e.borderTopWidthProperty="border-top-width",e.borderBottomWidthProperty="border-bottom-width",e.borderLeftWidthProperty="border-left-width",e.borderRightWidthProperty="border-right-width",e.fontWeightProperty="font-weight",e.colorProperty="color",e.opacityProperty="opacity",e.paddingLeftProperty="padding-left",e.paddingRightProperty="padding-right",e.positionProperty="position",e.maxWidthProperty="max-width",e.minWidthProperty="min-width",e.overflowProperty="overflow",e.overflowXProperty="overflow-x",e.overflowYProperty="overflow-y",e.transformProperty="transform",e.webkitTransformProperty="-webkit-transform",e.cursorProperty="cursor",e.visibilityProperty="visibility",e.absoluteValue="absolute",e.zeroPixelValue="0px",e.autoValue="auto",e.hiddenValue="hidden",e.noneValue="none",e.blockValue="block",e.inlineBlockValue="inline-block",e.transparentValue="transparent",e.boldValue="bold",e.visibleValue="visible",e.tableRowValue="table-row",e.coverValue="cover",e.pointerValue="pointer"}(t=e.CssConstants||(e.CssConstants={}))}(jsCommon||(jsCommon={}));var debug;!function(e){function t(e,t){e!==!0&&n(t||"condition: "+e)}function i(e,t){(null===e||void 0===e)&&n(t||"condition: "+e)}function a(e,t){null!=e&&e.length>0||n(t||"condition: "+e)}function r(e,t){}function n(t){(e.assertFailFunction||alert)("Debug Assert failed: "+t)}e.assertFailFunction,e.assert=t,e.assertValue=i,e.assertNonEmpty=a,e.assertAnyValue=r,e.assertFail=n}(debug||(debug={}));var jsCommon;!function(e){function t(e){void 0===e&&(e=1);var t,i;try{throw new Error}catch(a){t=a.stack,null!=t&&(i=t.split("\n"),i.splice(1,e),t=i.join("\n"))}return t}var i;!function(e){function i(){return{name:"infoNavAppAlreadyPresent",message:"Cannot initialize embedded scenario when the InfoNav App is already present in this context",stack:c()}}function a(e){return{name:"invalidOperation",message:e,stack:c()}}function r(e,t){return{name:"invalidArgumentError",argument:e,message:t,stack:c()}}function n(e){return{name:"argumentNull",argument:e,message:"Argument was null",stack:c()}}function o(e){return{name:"argumentUndefined",argument:e,message:"Argument was undefined",stack:c()}}function s(e){return{name:"argumentOutOfRange",argument:e,message:"Argument was out of range",stack:c()}}function l(e,t){return{name:"pureVirtualMethodException",message:"This method must be overriden by the derived class:"+e+"."+t,stack:c()}}function u(e){return{name:"notImplementedException",message:e,stack:c()}}function c(){return t(2)}e.infoNavAppAlreadyPresent=i,e.invalidOperation=a,e.argument=r,e.argumentNull=n,e.argumentUndefined=o,e.argumentOutOfRange=s,e.pureVirtualMethodException=l,e.notImplementedException=u}(i=e.Errors||(e.Errors={})),e.getStackTrace=t}(jsCommon||(jsCommon={})),$.fn.multiline=function(e){return this.text(e),this.html(this.html().replace(/\n/g,"<br/>")),this},$.fn.togglePanelControl=function(){return this.each(function(){$(this).addClass("ui-accordion ui-accordion-icons ui-widget ui-helper-reset").find(".accordionHeader").addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-top ui-corner-bottom").hover(function(){$(this).toggleClass("ui-state-hover")}).prepend('<span class="ui-icon ui-icon-triangle-1-e"></span>').click(function(){return $(this).toggleClass("ui-accordion-header-active ui-state-active ui-state-default ui-corner-bottom").find("> .ui-icon").toggleClass("ui-icon-triangle-1-e ui-icon-triangle-1-s").end().next().slideToggle(),!1}).next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide()})};var jsCommon;!function(e){var t;!function(e){e.VisibleSelector=":visible"}(t=e.JQueryConstants||(e.JQueryConstants={}))}(jsCommon||(jsCommon={}));var jsCommon;!function(e){var t=function(){function t(t){
e.Utility.throwIfNullOrUndefined(t,this,"constructor","factoryMethod"),this.factoryMethod=t}return t.prototype.getValue=function(){return null!==this.factoryMethod&&(this.value=this.factoryMethod(),this.factoryMethod=null),this.value},t}();e.Lazy=t}(jsCommon||(jsCommon={}));var powerbi;!function(e){var t;!function(e){function t(e,t){function i(){}i.prototype=e;var a=new i;return t&&t(a),a}function i(e){var i=Object.getPrototypeOf(e);return(i===Object.prototype||i===Array.prototype)&&(e=t(e)),e}function a(e,i){if(e){for(var a,r=0,n=e.length;n>r;r++){var o=i(e[r]);o&&(a||(a=t(e)),a[r]=o)}return a}}e.inherit=t,e.inheritSingle=i,e.overrideArray=a}(t=e.Prototype||(e.Prototype={}))}(powerbi||(powerbi={}));var jsCommon;!function(e){var t;!function(e){function t(e,t,i){switch(t){case"m":t="M";break;case"O":case"o":t="yyyy'-'MM'-'dd'T'HH':'mm':'ss'.'fff'0000'";break;case"R":case"r":e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t="ddd, dd MMM yyyy HH':'mm':'ss 'GMT'";break;case"s":t="S";break;case"u":e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t="yyyy'-'MM'-'dd HH':'mm':'ss'Z'";break;case"U":e=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t="F";break;case"y":case"Y":switch(i){case"default":case"en":case"en-US":t="MMMM, yyyy";break;default:t="Y"}}return{value:e,format:t}}function i(e){if(e=e.replace(/%K/g,"zzz"),e=e.replace(/K/g,"zzz"),e=e.replace(/fffffff/g,"fff0000"),e=e.replace(/ffffff/g,"fff000"),e=e.replace(/fffff/g,"fff00"),e=e.replace(/ffff/g,"fff0"),e=e.replace(/yyyyy/g,"0yyyy"),e=e.replace(/(^y|^)yyy(^y|$)/g,"yyyy"),a||(a=["d","f","F","g","h","H","K","m","M","s","t","y","z",":","/"].map(function(e){return{r:new RegExp("%"+e+"(?!"+e+")","g"),s:e}})),-1!==e.indexOf("%")&&e.length>2)for(var t=0;t<a.length;t++)e=e.replace(a[t].r,a[t].s);return e}var a;e.findDateFormat=t,e.fixDateTimeFormat=i}(t=e.Formatting||(e.Formatting={}))}(jsCommon||(jsCommon={}));var jsCommon;!function(e){function t(e,t){void 0===t&&(t=$.noop),i(e.cssFiles||[]);var r=e.javaScriptFilesWithCallback||[];if(e.javaScriptFiles)for(var n=0,o=e.javaScriptFiles.length;o>n;++n)r.push({javascriptFile:e.javaScriptFiles[n]});a(r,t)}function i(e){e.forEach(function(e){-1===C.indexOf(e)&&(C.push(e),r(e))})}function a(e,t){function i(){--r||u(e,s)}function a(){--o||t()}var r=e.length,o=r,s=[];e.forEach(function(e,t){var r=e.javascriptFile;-1===x.indexOf(r)?r in S?S[r].push(function(){i(),a()}):(S[r]=[function(){a()}],h(r)?(s[t]=e,i()):n(r,function(e){s[t]={javascriptFile:e},i()})):(i(),a())})}function r(e){var t=v.cloneNode();t.href=e,y?f.insertBefore(t,y):f.appendChild(t)}function n(e,t){c(e,function(){t(this.responseText)})}function o(e,t){if(void 0===t&&(t=$.noop),!e)return void t();var i=e.javascriptFile,a=t;if(e.onLoadCallback){var r=function(){e.onLoadCallback().then(t)};a=r}h(i)?l(i,a):s(i,a)}function s(e,t){void 0===t&&(t=$.noop);var i;e&&(i=b.cloneNode(),i.setAttribute("type","text/javascript"),i.innerHTML=e,f.appendChild(i)),setTimeout(t,0)}function l(e,t){var i;e&&(i=b.cloneNode(),i.setAttribute("src",e),i.setAttribute("charset","utf-8"),i.onload=t,f.appendChild(i))}function u(e,t){g(t,o,function(){e.forEach(function(e){var t=e.javascriptFile,i=S[t];i&&i.forEach(function(e){e()}),delete S[t],-1===x.indexOf(t)&&x.push(t)})})}function c(e,t,i){var a=new XMLHttpRequest;try{a.open("GET",e,!0),a.onload=t,a.onerror=i,a.send(null)}catch(r){}}function h(e){var t=location.protocol+"//"+location.host+"/";return/^http[s]?:\/\/.+/i.test(e)&&0!==e.indexOf(t)}function p(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t]}function d(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];if(0!==e.length){for(var i=[],a=e.length;a--;)!function(t){i[t]=function(){e[t](i[t+1]||p)}}(a);i[0]()}}function g(e,t,i){for(var a=[],r=0,n=e.length;n-1>r;r++)!function(i){a[i]=function(a){t(e[i],a)}}(r);a[n-1]=function(a){t(e[n-1],i)},d.apply(null,a)}var m=document,f=m.head,y=f.getElementsByTagName("script")[0],v=m.createElement("link"),b=m.createElement("script"),C=[],x=[],S=[];v.setAttribute("rel","stylesheet"),e.requires=t}(jsCommon||(jsCommon={}));var powerbi;!function(e){function t(){return new i}e.createJQueryPromiseFactory=t;var i=function(){function e(){}return e.prototype.defer=function(){return new a($.Deferred())},e.prototype.reject=function(e){var t=this.defer();return t.reject(e),t.promise},e.prototype.resolve=function(e){var t=this.defer();return t.resolve(e),t.promise},e.prototype.all=function(e){var t=jQuery.map(e,function(e){return e&&e.promise?e.promise:e});return new r($.when.apply($,t))},e.prototype.when=function(e){var t=e&&e.promise?e.promise:e;return new r($.when(t))},e}(),a=function(){function e(e){this.deferred=e,this.promise=new r(e.promise())}return e.prototype.resolve=function(e){this.deferred.resolve(e)},e.prototype.reject=function(e){this.deferred.reject(e)},e}(),r=function(){function e(e){this.promise=e}return e.prototype.then=function(t,i){return new e(this.promise.then(e.wrapCallback(t),e.wrapCallback(i)))},e.prototype["catch"]=function(e){return this.then(null,e)},e.prototype["finally"]=function(t){return this.promise.always(e.wrapCallback(t)),this},e.wrapCallback=function(t){return t?function(i){var a=t(i);return a instanceof e?a.promise:a}:t},e}()}(powerbi||(powerbi={}));var powerbi;!function(e){var t=function(){function e(){}return e.prototype.getData=function(e){try{if(localStorage){var t=localStorage[e];if(t)return JSON.parse(t)}}catch(i){}return null},e.prototype.setData=function(e,t){try{localStorage&&(localStorage[e]=JSON.stringify(t))}catch(i){}},e}(),i=function(){function e(t){this.cache={},this.clearCacheInterval=null!=t?t:e.defaultClearCacheInterval,this.clearCache()}return e.prototype.getData=function(e){return this.cache[e]},e.prototype.setData=function(e,t){var i=this;this.cache[e]=t,null==this.clearCacheTimerId&&(this.clearCacheTimerId=setTimeout(function(){return i.clearCache()},this.clearCacheInterval))},e.prototype.clearCache=function(){this.cache={},this.clearCacheTimerId=void 0},e.defaultClearCacheInterval=864e5,e}();e.EphemeralStorageService=i,e.localStorageService=new t,e.ephemeralStorageService=new i}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(){m||(m=$("<span/>"),$("body").append(m),f=d3.select($("body").get(0)).append("svg").style({height:"0px",width:"0px",position:"absolute"}).append("text"),y=$("<canvas/>").get(0).getContext("2d"))}function a(){m&&m.remove&&m.remove(),m=null}function r(e){return i(),y.font=e.fontSize+" "+e.fontFamily,y.measureText(e.text).width}function n(e){return i(),f.style(null),f.text(e.text).attr({visibility:"hidden","font-family":e.fontFamily,"font-size":e.fontSize,"font-weight":e.fontWeight,"font-style":e.fontStyle,"white-space":e.whiteSpace||"nowrap"}),f.node().getBBox().height}function o(t,i){void 0===i&&(i=!1);var a=t.fontFamily+t.fontSize,r=e.ephemeralStorageService.getData(a);if(null==r){var o={fontFamily:t.fontFamily,fontSize:t.fontSize,text:"M"};r=n(o),e.ephemeralStorageService.setData(a,r)}return i&&(r*=.7),r}function s(e){return r(u(e))}function l(e){return{text:e.val()||e.text(),fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontWeight:e.css("font-weight"),fontStyle:e.css("font-style"),whiteSpace:e.css("white-space")}}function u(e){var t=window.getComputedStyle(e,null);return{text:e.textContent,fontFamily:t.fontFamily,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,whiteSpace:t.whiteSpace}}function c(e){return getComputedStyle(e[0]).width}function h(e,t){i();var a=e.text.length;if(0===a)return e.text;var n=r(e);if(t>n)return e.text;for(var o=e.text=v+e.text,s=1,l=o.length,u=v.length;l>=s;)if(u=(s+l)/2|0,e.text=o.substr(0,u),n=r(e),t>n)s=u+1;else{if(!(n>t))break;l=u-1}return e.text=o.substr(0,u),n=r(e),n>t&&u--,o.substr(v.length,u-v.length)+v}function p(e,t){var i=u(e),a=i.text,r=h(i,t);a!==r&&(e.textContent=r)}function d(e,t,i,a){void 0===a&&(a=0);var n=u(e),s=o(n)+a,l=Math.max(1,Math.floor(i/s)),c=d3.select(e),p=c.attr("y"),d=e.textContent;e.textContent=null;for(var g=jsCommon.WordBreaker.splitByWidth(d,n,r,t,l),m=0,f=g.length;f>m;m++)n.text=g[m],c.append("tspan").attr({x:0,dy:0===m?p:s}).text(h(n,t))}function g(e,t,i,a){void 0===a&&(a=0);var n=u(e),s=o(n)+a,l=Math.max(1,Math.floor(i/s)),c=e.textContent;e.textContent=null;var h=jsCommon.WordBreaker.splitByWidth(c,n,r,t,l);h=_.compact(h);var p=d3.select(e).selectAll(b.selector).data(h,function(e){return $.inArray(e,h)});p.enter().append("span").classed(b["class"],!0).text(function(e){return e}).style("width",jsCommon.PixelConverter.toString(t))}var m,f,y,v="",b=jsCommon.CssConstants.createClassAndSelector("overflowingText");t.removeSpanElement=a,t.measureSvgTextWidth=r,t.measureSvgTextHeight=n,t.estimateSvgTextHeight=o,t.measureSvgTextElementWidth=s,t.getMeasurementProperties=l,t.getSvgMeasurementProperties=u,t.getDivElementWidth=c,t.getTailoredTextOrDefault=h,t.svgEllipsis=p,t.wordBreak=d,t.wordBreakOverflowingText=g}(t=e.TextMeasurementService||(e.TextMeasurementService={}))}(powerbi||(powerbi={}));var jsCommon;!function(e){var t=function(){function t(t){this.timerFactory=e.TimerPromiseFactory.instance,this.delay=0,t&&(this.delay=t)}return t.prototype.run=function(e){var t=this;this.fn?this.fn=e:(this.fn=e,this.timerFactory.create(this.delay).done(function(){return t.timerComplete(t.fn)}))},t.prototype.timerComplete=function(e){e(),this.fn=null},t}();e.ThrottleUtility=t}(jsCommon||(jsCommon={}));var jsCommon;!function(e){var t=function(){function e(){}return e.prototype.create=function(e){var t=$.Deferred();return window.setTimeout(function(){return t.resolve()},e),t},e.instance=new e,e}();e.TimerPromiseFactory=t}(jsCommon||(jsCommon={}));var jsCommon;!function(e){!function(e){e[e.OK=200]="OK",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.Forbidden=403]="Forbidden",e[e.RequestEntityTooLarge=413]="RequestEntityTooLarge"}(e.HttpStatusCode||(e.HttpStatusCode={}));var t;e.HttpStatusCode,!function(e){e.ApplicationOctetStream="application/octet-stream",e.MultiPartFormData="multipart/form-data"}(t=e.HttpConstants||(e.HttpConstants={}));var i;!function(e){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var i=e[0];if(u(i))return i;for(var a=0;a<e.length-1;a++){var r=new RegExp("\\{"+a+"\\}","gm");i=i.replace(r,e[a+1])}return i}function i(t,i){return e.normalizeCase(t)===e.normalizeCase(i)}function r(t,i){var a=e.normalizeCase(i);return 0===e.normalizeCase(t).indexOf(a)}function n(e,t){return 0===e.indexOf(t)}function o(e,t){return null==e?!1:-1!==e.toLowerCase().indexOf(t.toLowerCase().toString())}function s(t){return a.throwIfNullOrUndefined(t,e,"normalizeCase","value"),t.toUpperCase()}function l(e){return null==e||0===e.length}function u(t){return e.isNullOrEmpty(t)||e.isNullOrEmpty(t.trim())}function c(e){a.throwIfNullOrUndefined(e,this,"containsWhitespace","str");var t=/\s/;return t.test(e)}function h(e){return a.throwIfNullOrUndefined(e,this,"isWhitespace","str"),""===e.trim()}function p(e){return a.throwIfNullOrUndefined(e,this,"trimTrailingWhitespace","str"),e.replace(/\s+$/,"")}function d(e){return a.throwIfNullOrUndefined(e,this,"trimWhitespace","str"),e.replace(/^\s+/,"").replace(/\s+$/,"")}function g(e,t){return a.throwIfNullOrUndefined(e,this,"getLengthDifference","left"),a.throwIfNullOrUndefined(t,this,"getLengthDifference","right"),Math.abs(e.length-t.length)}function m(e,t){for(var i="",a=0;t>a;a++)i+=e;return i}function f(e,t,i){if(!t)return e;var a=C(t);return e.replace(new RegExp(a,"gi"),i)}function y(e){for(var t={},i=0;i<e.length;i++){var a=e[i];t[a]=!1}for(var r=[],n=0;n<e.length;n++){var o=e[n],s=o;if(t[s])for(var l=0;void 0!==t[s];)s=o+"."+ ++l;r.push(s),t[s]=!0}return r}function v(e,t){for(var i=0,a=t;e[a];)a=t+ ++i;return a}function b(t,i,a){if(!t||0===t.length)return"";(null===a||void 0===a)&&(a=Number.MAX_VALUE);for(var r=Math.min(a,t.length),n=[],o=0;2>o;o++)for(var s="{"+o+"}",l="_|_<"+o+">_|_",u=0;r>u;u++)t[u].indexOf(s)>-1&&(t[u]=t[u].replace(s,l),n.push({targetValue:s,replaceValue:l}));for(var c="",u=0;r>u;u++)c=0===u?t[u]:e.format(i.get("FilterRestatement_Comma"),c,t[u]);for(var u=0;u<n.length;u++)c=c.replace(n[u].replaceValue,n[u].targetValue);return c}function C(e){return e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}function x(e){return e.replace(/[\<\>\:"\/\\\|\?*]/g,"")}e.format=t,e.equalIgnoreCase=i,e.startsWithIgnoreCase=r,e.startsWith=n,e.containsIgnoreCase=o,e.normalizeCase=s,e.isNullOrEmpty=l,e.isNullOrUndefinedOrWhiteSpaceString=u,e.containsWhitespace=c,e.isWhitespace=h,e.trimTrailingWhitespace=p,e.trimWhitespace=d,e.getLengthDifference=g,e.repeat=m,e.replaceAll=f,e.ensureUniqueNames=y,e.findUniqueName=v,e.constructCommaSeparatedList=b,e.escapeStringForRegex=C,e.normalizeFileName=x}(i=e.StringExtensions||(e.StringExtensions={}));var a=function(){function a(){}return a.throwIfNullOrUndefined=function(t,i,r,n){null===t?a.throwException(e.Errors.argumentNull(a.getComponentName(i)+r+"."+n)):typeof t===a.Undefined&&a.throwException(e.Errors.argumentUndefined(a.getComponentName(i)+r+"."+n))},a.throwIfNullOrEmpty=function(t,i,r,n){a.throwIfNullOrUndefined(t,i,r,n),t.length||a.throwException(e.Errors.argumentOutOfRange(a.getComponentName(i)+r+"."+n))},a.throwIfNullOrEmptyString=function(t,i,r,n){a.throwIfNullOrUndefined(t,i,r,n),t.length<1&&a.throwException(e.Errors.argumentOutOfRange(a.getComponentName(i)+r+"."+n))},a.throwIfNullEmptyOrWhitespaceString=function(t,r,n,o){a.throwIfNullOrUndefined(t,r,n,o),i.isNullOrUndefinedOrWhiteSpaceString(t)&&a.throwException(e.Errors.argumentOutOfRange(a.getComponentName(r)+n+"."+o))},a.throwIfNotTrue=function(t,i,r,n){t||a.throwException(e.Errors.argument(n,a.getComponentName(i)+r+"."+n))},a.isString=function(e){return"string"==typeof e},a.isBoolean=function(e){return"boolean"==typeof e},a.isNumber=function(e){return"number"==typeof e},a.isDate=function(e){return a.isObject(e)&&e instanceof Date},a.isObject=function(e){return null!=e&&"object"==typeof e},a.isNullOrUndefined=function(e){return null===e||typeof e===a.Undefined},a.urlCombine=function(e,t){if(a.throwIfNullOrUndefined(e,null,"urlCombine","baseUrl"),a.throwIfNullOrUndefined(t,null,"urlCombine","path"),i.isNullOrUndefinedOrWhiteSpaceString(t))return e;if(i.isNullOrUndefinedOrWhiteSpaceString(e))return t;var r=e;return"/"===r.charAt(r.length-1)?"/"===t.charAt(0)&&(t=t.slice(1)):"/"!==t.charAt(0)&&(t="/"+t),r+t},a.getAbsoluteUri=function(e){a.throwIfNullOrUndefined(e,null,"getAbsoluteUri","path");var t=e;return t&&-1===t.indexOf("http")&&(t=a.urlCombine(clusterUri,t)),t},a.getStaticResourceUri=function(t){a.throwIfNullOrUndefined(t,null,"getStaticResourceUri","path");var i=t;return i&&-1===i.indexOf("http")&&(i=e.Utility.urlCombine(a.staticContentLocation,i)),i},a.getComponentName=function(e){return e?(typeof e).toString()+".":""},a.throwException=function(t){throw e.Trace.error(i.format("Throwing exception: {0}",JSON.stringify(t)),null!=t.stack?!1:!0),t},a.createClassSelector=function(e){return a.throwIfNullOrEmptyString(e,null,"CreateClassSelector","className"),"."+e},a.createIdSelector=function(e){return a.throwIfNullOrEmptyString(e,null,"CreateIdSelector","id"),"#"+e},a.generateGuid=function(){var e="",t=0;for(t=0;32>t;t+=1){var i=16*Math.random()|0;switch(t){case 8:case 12:case 16:case 20:e+="-"}e+=i.toString(16)}return e},a.getCookieValue=function(e){for(var t=document.cookie.split(";"),i=0;i<t.length;i++){var a=t[i],r=a.split("=");if(r.length>0&&r[0].trim()===e)return a.substr(a.indexOf("=")+1)}return null},a.getDomainForUrl=function(e){var t=a.getHrefObjectFromUrl(e);return t.prop("protocol")+"//"+t.prop("hostname")},a.getHostNameForUrl=function(e){var t=a.getHrefObjectFromUrl(e);return a.urlCombine(t.prop("hostname"),t.prop("pathname"))},a.getUrlWithoutQueryString=function(e){var t=a.getHrefObjectFromUrl(e);return t.prop("protocol")+"//"+a.urlCombine(t.prop("host"),t.prop("pathname"))},a.getProtocolFromUrl=function(e){return a.getHrefObjectFromUrl(e).prop("protocol").replace(":","")},a.getHrefObjectFromUrl=function(e){var t=$("<a>");return t=t.prop("href",e)},a.convertWcfToJsDictionary=function(e){for(var t={},i=0;i<e.length;i++){var a=e[i];t[a.Key]=a.Value}return t},a.getDateFromWcfJsonString=function(e,t){if(i.isNullOrEmpty(e))return null;var a=e.indexOf("("),r=e.indexOf(")");if(-1!==a&&-1!==r){var n=parseInt(e.substring(a+1,r),10);if(t)return new Date(n);var o=new Date(0);return o.setUTCMilliseconds(n),o}return null},a.getOuterHtml=function(e){return $("<div>").append(e).html()},a.compareInt=function(e,t){return e-t},a.getIndexOfMinValue=function(e){for(var t=0,i=e[0],a=0;a<e.length;a++)e[a]<i&&(i=e[a],t=a);return t},a.isValidUrl=function(e){return!i.isNullOrEmpty(e)&&(i.startsWithIgnoreCase(e,"http://")||i.startsWithIgnoreCase(e,"https://"))},a.extractUrlFromCssBackgroundImage=function(e){return e.replace(/"/g,"").replace(/url\(|\)$/gi,"")},a.isValidImageDataUrl=function(e){var t=new RegExp("data:(image/(png|jpg|jpeg|gif|svg))");return t.test(e)},a.saveAsFile=function(e,i){var a=new Blob([e],{type:t.ApplicationOctetStream}),r=window.webkitURL||URL,n=r.createObjectURL(a),o=i||n;if(window.navigator.msSaveOrOpenBlob)return void window.navigator.msSaveOrOpenBlob(a,o);var s=document.createElement("a");s.href=n,s.target="_blank",s.download=o,document.body.appendChild(s),s.click(),document.body.removeChild(s)},a.getType=function(t){a.throwIfNullEmptyOrWhitespaceString(t.__type,this,"getType","obj");var i=t.__type.split(":");return 2!==i.length&&e.Errors.argument("obj.__type","Type String not in expected format [Type]#[Namespace]: "+t.__type),i[1]!==a.TypeNamespace&&e.Errors.argument("obj.__type","Type Namespace not expected: "+i[1]),i[0]},a.isEventSupported=function(e,t){e="on"+e;var i=e in t;return i||(t.setAttribute||(t=document.createElement("div")),t.setAttribute&&t.removeAttribute&&(t.setAttribute(e,""),i="function"==typeof t[e],"undefined"!=typeof t[e]&&(t[e]=null),t.removeAttribute(e))),t=null,i},a.toPixel=function(t){return a.throwIfNullOrUndefined(t,this,"toPixel","pixelAmount"),t.toString()+e.CssConstants.pixelUnits},a.getPropertyCount=function(e){return a.throwIfNullOrUndefined(e,this,"getPropertyCount","object"),Object.getOwnPropertyNames(e).length},a.getFileExtension=function(e){if(e){var t=e.lastIndexOf(".");if(t>=0)return e.substr(t+1)}return""},a.extractFileNameFromPath=function(e){return e.replace(/^.*[\\\/]/,"")},a.canUseClipboard=function(){return"undefined"==typeof MSApp},a.is64BitOperatingSystem=function(){return-1!==navigator.userAgent.indexOf("WOW64")||-1!==navigator.userAgent.indexOf("Win64")},a.parseNumber=function(e,t){if(null===e)return null;if(void 0===e)return t;var i=Number(e);return isFinite(i)?i:isNaN(i)&&"number"!=typeof e&&"NaN"!==e?t:i},a.getURLParamValue=function(e){var t=new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return null==t?null:t[1]||0},a.getLocalTimeZoneString=function(){var e,t=new Date(Date.UTC(2005,6,30,0,0,0,0)),i=-1*t.getTimezoneOffset(),a=new Date(Date.UTC(2005,12,30,0,0,0,0)),r=-1*a.getTimezoneOffset();return e=-720===i&&-720===r?"Dateline Standard Time":-660===i&&-660===r?"UTC-11":-660===i&&-660===r?"Samoa Standard Time":-600===i&&-600===r?"Hawaiian Standard Time":-480===i&&-540===r?"Alaskan Standard Time":-420===i&&-480===r?"Pacific Standard Time":-420===i&&-420===r?"US Mountain Standard Time":-360===i&&-420===r?"Mountain Standard Time":-360===i&&-360===r?"Central America Standard Time":-300===i&&-360===r?"Central Standard Time":-300===i&&-300===r?"SA Pacific Standard Time":-240===i&&-300===r?"Eastern Standard Time":-270===i&&-270===r?"Venezuela Standard Time":-240===i&&-240===r?"SA Western Standard Time":-240===i&&-180===r?"Central Brazilian Standard Time":-180===i&&-240===r?"Atlantic Standard Time":-180===i&&-180===r?"Montevideo Standard Time":-180===i&&-120===r?"E. South America Standard Time":-150===i&&-210===r?"Mid-Atlantic Standard Time":-120===i&&-120===r?"SA Eastern Standard Time":0===i&&0===r?"UTC":60===i&&0===r?"GMT Standard Time":60===i&&120===r?"Namibia Standard Time":120===i&&60===r?"Romance Standard Time":120===i&&120===r?"South Africa Standard Time":180===i&&120===r?"GTB Standard Time":180===i&&180===r?"E. Africa Standard Time":240===i&&180===r?"Russian Standard Time":240===i&&240===r?"Arabian Standard Time":270===i&&210===r?"Iran Standard Time":270===i&&270===r?"Afghanistan Standard Time":300===i&&240===r?"Pakistan Standard Time":300===i&&300===r?"West Asia Standard Time":330===i&&330===r?"India Standard Time":345===i&&345===r?"Nepal Standard Time":360===i&&300===r?"N. Central Asia Standard Time":360===i&&360===r?"Central Asia Standard Time":390===i&&390===r?"Myanmar Standard Time":420===i&&360===r?"North Asia Standard Time":420===i&&420===r?"SE Asia Standard Time":480===i&&420===r?"North Asia East Standard Time":480===i&&480===r?"China Standard Time":540===i&&480===r?"Yakutsk Standard Time":540===i&&540===r?"Tokyo Standard Time":570===i&&570===r?"Cen. Australia Standard Time":600===i&&600===r?"E. Australia Standard Time":600===i&&660===r?"AUS Eastern Standard Time":660===i&&600===r?"Tasmania Standard Time":660===i&&660===r?"West Pacific Standard Time":690===i&&690===r?"Central Pacific Standard Time":720===i&&660===r?"Magadan Standard Time":720===i&&720===r?"Fiji Standard Time":720===i&&780===r?"New Zealand Standard Time":780===i&&780===r?"Tonga Standard Time":"UTC"},a.TypeNamespace="http://schemas.microsoft.com/sqlbi/2013/01/NLRuntimeService",a.JsonContentType="application/json",a.JpegContentType="image/jpeg",a.XJavascriptContentType="application/x-javascript",a.JsonDataType="json",a.BlobDataType="blob",a.HttpGetMethod="GET",a.HttpPostMethod="POST",a.HttpPutMethod="PUT",a.HttpDeleteMethod="DELETE",a.HttpContentTypeHeader="Content-Type",a.HttpAcceptHeader="Accept",a.Undefined="undefined",a.staticContentLocation=window.location.protocol+"//"+window.location.host,a}();e.Utility=a;var r=function(){function e(){}return e.compareVersions=function(e,t){for(var i=e.split(".").map(parseFloat),a=t.split(".").map(parseFloat),r=Math.max(i.length,a.length),n=0;r>n;n++){var o=i[n]||0,s=a[n]||0;if(o>s)return 1;if(s>o)return-1}return 0},e}();e.VersionUtility=r;var n;!function(e){function t(e){return new i(e)}var i=function(){function e(t){this._name=t,this._start=e.begin(t)}return e.begin=function(e){return void 0!==window.performance&&void 0!==performance.mark?(console.time,e="Begin "+e,performance.mark(e),e):void 0},e.prototype.end=function(){if(void 0!==window.performance&&void 0!==performance.mark&&void 0!==performance.measure){var e=this._name,t="End "+e;performance.mark(t),performance.measure(e,this._start,t),console.timeEnd}},e}();e.PerfMarker=i,e.create=t}(n=e.PerformanceUtil||(e.PerformanceUtil={}));var o;!function(e){function t(e){var t,i,a;return window.requestAnimationFrame||(window.requestAnimationFrame=function(e){return setTimeout(e,20)}),function(){t||(t=!0,i=arguments,a=this,window.requestAnimationFrame(function(){t=!1,e.apply(a,i)}))}}e.deferUntilNextFrame=t}(o=e.DeferUtility||(e.DeferUtility={}))}(jsCommon||(jsCommon={}));var jsCommon;!function(e){var t=function(){function t(e,t,i,a){this.text=e,this.type=t,this.sessionId=i,this.requestId=a,this.timeStamp=new Date}return t.prototype.toString=function(){var i="";return i+=e.StringExtensions.format("{0} ({1}): {2}",t.traceTypeStrings[this.type],this.timeStamp.toUTCString(),this.text),this.requestId&&(i+="\n(Request id: "+this.requestId+")"),i},t.traceTypeStrings=["INFORMATION","VERBOSE","WARNING","ERROR","EXPECTEDERROR","UNEXPECTEDERROR","FATAL"],t}();e.TraceItem=t}(jsCommon||(jsCommon={}));var jsCommon;!function(e){var t;!function(e){function t(e,t){return(e&t)===t}function i(e,t){return e|=t}function a(e,t){return e&=~t}function r(e,t){return e[t]}e.hasFlag=t,e.setFlag=i,e.resetFlag=a,e.toString=r}(t=e.EnumExtensions||(e.EnumExtensions={}));var i;!function(e){function t(e,t){return-1!==e.indexOf(t,e.length-t.length)}e.endsWith=t}(i=e.StringExtensions||(e.StringExtensions={}));var a;!function(e){function t(e,t){return(e||t)&&!(e&&t)}e.XOR=t}(a=e.LogicExtensions||(e.LogicExtensions={}));var r;!function(e){function t(e,t){return e===t?!0:JSON.stringify(e)===JSON.stringify(t)}e.equals=t}(r=e.JsonComparer||(e.JsonComparer={}));var n;!function(e){function t(t){return(t-e.TextSizeMin)/i}e.TextSizeMin=8,e.TextSizeMax=40;var i=e.TextSizeMax-e.TextSizeMin;e.getScale=t}(n=e.TextSizeDefaults||(e.TextSizeDefaults={}));var o;!function(e){function t(e){return e+o}function i(e){return t(a(e))}function a(e){return n*e}function r(e){return e/n}var n=4/3,o="px";e.toString=t,e.fromPoint=i,e.fromPointToPixel=a,e.toPoint=r}(o=e.PixelConverter||(e.PixelConverter={}))}(jsCommon||(jsCommon={}));var jsCommon;!function(e){var t=function(){function t(){}return t.prototype.logTrace=function(t){if(DEBUG)switch(t.type){case e.TraceType.Information:break;case e.TraceType.UnexpectedError:case e.TraceType.Error:case e.TraceType.Fatal:break;case e.TraceType.ExpectedError:case e.TraceType.Warning:break;case e.TraceType.Verbose:}},t}();e.ConsoleTracer=t;var i;!function(i){function a(t,i){d(new e.TraceItem(t,e.TraceType.Warning,i))}function r(t,i,a){i&&(t=e.StringExtensions.format("{0}.\nStack:\n{1}",t,e.getStackTrace())),d(new e.TraceItem(t,e.TraceType.Error,a))}function n(t,i){d(new e.TraceItem(t,e.TraceType.Verbose,i))}function o(e){v.push(e)}function s(e){var t=v.indexOf(e);t>=0&&v.splice(t,1)}function l(){v=new Array(y)}function u(){f=-1}function c(){if(!(0>f)){for(var e=new Array(f+1),t=0;f>=t;t++)e[t]=m[t];return e}}function h(){s(y)}function p(){o(y)}function d(e){f+1>=g&&u(),m[++f]=e;for(var t=0,i=v.length;i>t;t++)v[t].logTrace(e)}var g=1e3,m=new Array(g),f=-1,y=new t,v=new Array(y);i.warning=a,i.error=r,i.verbose=n,i.addListener=o,i.removeListener=s,i.resetListeners=l,i.reset=u,i.getTraces=c,i.disableDefaultListener=h,i.enableDefaultListener=p}(i=e.Trace||(e.Trace={}))}(jsCommon||(jsCommon={}));var jsCommon;!function(e){!function(e){e[e.Information=0]="Information",e[e.Verbose=1]="Verbose",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.ExpectedError=4]="ExpectedError",e[e.UnexpectedError=5]="UnexpectedError",e[e.Fatal=6]="Fatal"}(e.TraceType||(e.TraceType={})),e.TraceType}(jsCommon||(jsCommon={}));var jsCommon;!function(e){function t(t){void 0===t&&(t=_.noop),e.requires(l,t)}function i(t,i){var a=powerbi.Prototype.inherit(u);_.isEmpty(t)||(a.javaScriptFilesWithCallback[0].javascriptFile=n.concat("&mkt="+t)),e.requires(a,i)}function a(){o=!0,s&&(s.resolve(),s=void 0)}function r(){var e;return o?(e=$.Deferred(),e.resolve()):e=s=$.Deferred(),e.promise()}var n="https://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0&s=1&onscriptload=globalMapControlLoaded",o=!1,s=null,l={javaScriptFiles:[powerbi.build+"/externals/pv/webclient.js"],cssFiles:[powerbi.build+"/externals/pv/Styles/_all.css"],javaScriptFilesWithCallback:[{javascriptFile:n,onLoadCallback:r}]};e.ensurePowerView=t;var u={javaScriptFilesWithCallback:[{javascriptFile:n,onLoadCallback:r}]};e.ensureMap=i,e.mapControlLoaded=a,e.waitForMapControlLoaded=r}(jsCommon||(jsCommon={}));var globalMapControlLoaded=function(){jsCommon.mapControlLoaded()},jsCommon;!function(e){var t;!function(e){function t(e,t){for(var i=[],a=e.length-1;a>=0;--a)-1!==t.indexOf(e[a])&&i.push(e[a]);return i}function i(e,t){for(var i=[],a=e.length-1;a>=0;--a){var r=e[a];-1===t.indexOf(r)&&i.push(r)}return i}function a(e){for(var t=[],i=0,a=e.length;a>i;i++){var r=e[i];-1===t.indexOf(r)&&t.push(r)}return t}function r(e,t){for(var i=0,a=t.length;a>i;++i)n(e,t[i])}function n(e,t){e.indexOf(t)<0&&e.push(t)}function o(e,t,i){for(var a=[],r=t;i>=r;++r)a.push(e[r]);return a}function s(e,t){for(var i=[],a=0;t>a;++a)i.push(e[a]);return i}function l(e){return s(e,e.length)}function u(e,t,i){if(e===t)return!0;if(!!e!=!!t)return!1;var a=e.length;if(a!==t.length)return!1;for(var r=0;a>r&&i(e[r],t[r]);)++r;return r===a}function c(e){return e&&0===e.length?null:e}function h(e,t){for(var i=0,a=e.length;a>i;++i)if(t(e[i]))return i;return-1}function p(e,t){if(0===t)return e.slice();var i=e.slice(t);return Array.prototype.push.apply(i,e.slice(0,t)),i}function d(){return g([])}function g(e){var t=e;return t.withId=f,t}function m(e,t){for(var i=0,a=e.length;a>i;i++){var r=e[i];if(r.id===t)return r}}function f(t){return e.findWithId(this,t)}function y(){return v([])}function v(e){var t=e;return t.withName=x,t}function b(e,t){var i=C(e,t);return i>=0?e[i]:void 0}function C(e,t){for(var i=0,a=e.length;a>i;i++){var r=e[i];if(r.name===t)return i}return-1}function x(e){var t=this;return b(t,e)}function S(e){if(e)for(;e.length>0;)e.pop()}function w(e){return e&&0!==e.length?!1:!0}function D(e){return"[object Array]"===Object.prototype.toString.call(e)}function P(e,t,i){var a=e[t];e[t]=e[i],e[i]=a}e.intersect=t,e.diff=i,e.distinct=a,e.union=r,e.unionSingle=n,e.range=o,e.take=s,e.copy=l,e.sequenceEqual=u,e.emptyToNull=c,e.indexOf=h,e.rotate=p,e.createWithId=d,e.extendWithId=g,e.findWithId=m,e.createWithName=y,e.extendWithName=v,e.findItemWithName=b,e.indexWithName=C,e.clear=S,e.isUndefinedOrEmpty=w,e.isArray=D,e.swap=P}(t=e.ArrayExtensions||(e.ArrayExtensions={}))}(jsCommon||(jsCommon={}));var InJs;!function(e){!function(e){e[e.information=0]="information",e[e.verbose=1]="verbose",e[e.warning=2]="warning",e[e.error=3]="error",e[e.expectedError=4]="expectedError",e[e.unexpectedError=5]="unexpectedError",e[e.fatal=6]="fatal"}(e.TraceType||(e.TraceType={})),e.TraceType}(InJs||(InJs={}));var jsCommon;!function(e){var t;!function(e){function t(e,t,i){if(i){for(var r=e-1;r>-1;r--)if(a(t[r]))return r+1}else for(var r=e,n=t.length;n>r;r++)if(a(t[r]))return r;return i?0:t.length}function i(e,i){var a={start:0,end:0};return 0===i.length?a:(a.start=t(e,i,!0),a.end=t(e,i,!1),a)}function a(e){return h.lastIndex=0,h.test(e)}function r(e){var t=1;for(h.lastIndex=0,h.exec(e);0!==h.lastIndex;)t++,h.exec(e);return t}function n(e,t,i){for(var a=o(e),r=0,n=0;n<a.length;n++){var s=a[n];i.text=s,r=Math.max(r,t(i))}return r}function o(e){return e.split(h)}function s(e,t,i){return t.text=e,i(t)}function l(e,t,i,a){return t.text=e,i(t,a)}function u(e,t,i,a,r,n){n=n?n:function(e,t){return e.text};for(var u=[],h=o(e),p=0,d=[],g=0;g<h.length;g++){var m=h[g];if(r>0&&u.length>=r-1)d.push(m);else{var f=0===d.length?s(m,t,i):s(c+m,t,i);if(p+f>a){if(0===d.length){u.push(l(m,t,n,a)),p=0,d=[];continue}u.push(l(d.join(c),t,n,a)),p=0,d=[]}d.push(m),p+=f}}return u.push(l(d.join(c),t,n,a)),u}var c=" ",h=/[\s\n]+/g;e.find=i,e.hasBreakers=a,e.wordCount=r,e.getMaxWordWidth=n,e.splitByWidth=u}(t=e.WordBreaker||(e.WordBreaker={}))}(jsCommon||(jsCommon={}));var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);i.prototype=t.prototype,e.prototype=new i},powerbi;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.visitEntity=function(e,t){return this.visitDefault(e,t)},e.prototype.visitColumnRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitMeasureRef=function(e,t){return this.visitDefault(e,t)},e.prototype.visitAggr=function(e,t){return this.visitDefault(e,t)},e.prototype.visitHierarchy=function(e,t){return this.visitDefault(e,t)},e.prototype.visitHierarchyLevel=function(e,t){return this.visitDefault(e,t)},e.prototype.visitPropertyVariationSource=function(e,t){return this.visitDefault(e,t)},e.prototype.visitBetween=function(e,t){return this.visitDefault(e,t)},e.prototype.visitIn=function(e,t){return this.visitDefault(e,t)},e.prototype.visitAnd=function(e,t){return this.visitDefault(e,t)},e.prototype.visitOr=function(e,t){return this.visitDefault(e,t)},e.prototype.visitCompare=function(e,t){
return this.visitDefault(e,t)},e.prototype.visitContains=function(e,t){return this.visitDefault(e,t)},e.prototype.visitExists=function(e,t){return this.visitDefault(e,t)},e.prototype.visitNot=function(e,t){return this.visitDefault(e,t)},e.prototype.visitStartsWith=function(e,t){return this.visitDefault(e,t)},e.prototype.visitConstant=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDateSpan=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDateAdd=function(e,t){return this.visitDefault(e,t)},e.prototype.visitNow=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDefaultValue=function(e,t){return this.visitDefault(e,t)},e.prototype.visitAnyValue=function(e,t){return this.visitDefault(e,t)},e.prototype.visitDefault=function(e,t){},e}();e.DefaultSQExprVisitorWithArg=t;var i=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(t);e.DefaultSQExprVisitor=i;var a=function(){function e(){}return e.prototype.visitEntity=function(e){this.visitDefault(e)},e.prototype.visitColumnRef=function(e){e.source.accept(this)},e.prototype.visitMeasureRef=function(e){e.source.accept(this)},e.prototype.visitAggr=function(e){e.arg.accept(this)},e.prototype.visitHierarchy=function(e){e.arg.accept(this)},e.prototype.visitHierarchyLevel=function(e){e.arg.accept(this)},e.prototype.visitPropertyVariationSource=function(e){e.arg.accept(this)},e.prototype.visitBetween=function(e){e.arg.accept(this),e.lower.accept(this),e.upper.accept(this)},e.prototype.visitIn=function(e){for(var t=e.args,i=0,a=t.length;a>i;i++)t[i].accept(this);for(var r=e.values,i=0,a=r.length;a>i;i++)for(var n=r[i],o=0,s=n.length;s>o;o++)n[o].accept(this)},e.prototype.visitAnd=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitOr=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitCompare=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitContains=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitExists=function(e){e.arg.accept(this)},e.prototype.visitNot=function(e){e.arg.accept(this)},e.prototype.visitStartsWith=function(e){e.left.accept(this),e.right.accept(this)},e.prototype.visitConstant=function(e){this.visitDefault(e)},e.prototype.visitDateSpan=function(e){e.arg.accept(this)},e.prototype.visitDateAdd=function(e){e.arg.accept(this)},e.prototype.visitNow=function(e){this.visitDefault(e)},e.prototype.visitDefaultValue=function(e){this.visitDefault(e)},e.prototype.visitAnyValue=function(e){this.visitDefault(e)},e.prototype.visitDefault=function(e){},e}();e.DefaultSQExprVisitorWithTraversal=a}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){function t(e){return new i(e)}e.createEnumType=t;var i=function(){function e(e){this.allMembers=e}return e.prototype.members=function(e){var t=this.allMembers;if(!e)return t;for(var i=[],a=0;a<t.length;a++){var r=t[a];_.contains(e,r.value)&&i.push(r)}return i},e}()}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e){if(e===!0)return!1;var t=e;return!!t.nullable}e.nullable=t}(t=e.FillSolidColorTypeDescriptor||(e.FillSolidColorTypeDescriptor={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){e.urlType={misc:{imageUrl:!0}}}(t=e.ImageDefinition||(e.ImageDefinition={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e){return e.fill||e.fillRule||e.filter||e.expression||e.image||e.paragraphs?!0:!1}e.isValid=t}(t=e.StructuralTypeDescriptor||(e.StructuralTypeDescriptor={}))}(powerbi||(powerbi={}));var powerbi;!function(e){function t(e){return e&m}function i(e){return(e&f)===e}function a(e){if(i(e))return null;var t=g[e];if(t){var a=t.lastIndexOf("_");if(a>0){var r=t.slice(0,a);g[r]&&(t=r)}}return t||null}function r(e,i){var a=d[e],r=g[a];if(null==r&&(r=g.Null),e&&i){var n=g[i];if(n){var o=t(n);o===d.Null?(n=r|n,g[n]&&(r=n)):o===e&&(r=n)}}return r}function n(e,t){return(e&y)===(t&y)}var o=jsCommon.EnumExtensions,s=function(){function e(e,t,i){this.underlyingType=e,this.category=t,o.hasFlag(e,g.Temporal)&&(this.temporalType=new u(e)),o.hasFlag(e,g.Geography)&&(this.geographyType=new c(e)),o.hasFlag(e,g.Miscellaneous)&&(this.miscType=new h(e)),o.hasFlag(e,g.Formatting)&&(this.formattingType=new p(e)),o.hasFlag(e,g.Enumeration)&&(this.enumType=i),o.hasFlag(e,g.Scripting)&&(this.scriptingType=new l(e))}return e.fromDescriptor=function(t){if(t=t||{},t.text)return e.fromExtendedType(g.Text);if(t.integer)return e.fromExtendedType(g.Integer);if(t.numeric)return e.fromExtendedType(g.Double);if(t.bool)return e.fromExtendedType(g.Boolean);if(t.dateTime)return e.fromExtendedType(g.DateTime);if(t.duration)return e.fromExtendedType(g.Duration);if(t.binary)return e.fromExtendedType(g.Binary);if(t.none)return e.fromExtendedType(g.None);if(t.scripting&&t.scripting.source)return e.fromExtendedType(g.ScriptSource);if(t.enumeration)return e.fromEnum(t.enumeration);if(t.temporal){if(t.temporal.year)return e.fromExtendedType(g.Year_Integer);if(t.temporal.month)return e.fromExtendedType(g.Month_Integer)}if(t.geography){if(t.geography.address)return e.fromExtendedType(g.Address);if(t.geography.city)return e.fromExtendedType(g.City);if(t.geography.continent)return e.fromExtendedType(g.Continent);if(t.geography.country)return e.fromExtendedType(g.Country);if(t.geography.county)return e.fromExtendedType(g.County);if(t.geography.region)return e.fromExtendedType(g.Region);if(t.geography.postalCode)return e.fromExtendedType(g.PostalCode_Text);if(t.geography.stateOrProvince)return e.fromExtendedType(g.StateOrProvince);if(t.geography.place)return e.fromExtendedType(g.Place);if(t.geography.latitude)return e.fromExtendedType(g.Latitude_Double);if(t.geography.longitude)return e.fromExtendedType(g.Longitude_Double)}if(t.misc){if(t.misc.image)return e.fromExtendedType(g.Image);if(t.misc.imageUrl)return e.fromExtendedType(g.ImageUrl);if(t.misc.webUrl)return e.fromExtendedType(g.WebUrl)}if(t.formatting){if(t.formatting.color)return e.fromExtendedType(g.Color);if(t.formatting.formatString)return e.fromExtendedType(g.FormatString);if(t.formatting.alignment)return e.fromExtendedType(g.Alignment);if(t.formatting.labelDisplayUnits)return e.fromExtendedType(g.LabelDisplayUnits);if(t.formatting.fontSize)return e.fromExtendedType(g.FontSize);if(t.formatting.labelDensity)return e.fromExtendedType(g.LabelDensity)}return t.extendedType?e.fromExtendedType(t.extendedType):e.fromExtendedType(g.Null)},e.fromExtendedType=function(i){i=i||g.Null;var r=t(i),n=a(i);return e.fromPrimitiveTypeAndCategory(r,n)},e.fromPrimitiveTypeAndCategory=function(t,i){t=t||d.Null,i=i||null;var a=t.toString();return i&&(a+="|"+i),e.typeCache[a]||(e.typeCache[a]=new e(r(t,i),i))},e.fromEnum=function(t){return new e(g.Enumeration,null,t)},e.prototype.isCompatibleFrom=function(e){var t=e.primitiveType;return this===e||this.primitiveType===t||t===d.Null?!0:!1},Object.defineProperty(e.prototype,"primitiveType",{get:function(){return t(this.underlyingType)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"extendedType",{get:function(){return this.underlyingType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"categoryString",{get:function(){return this.category},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.primitiveType===d.Text},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numeric",{get:function(){return o.hasFlag(this.underlyingType,g.Numeric)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"integer",{get:function(){return this.primitiveType===d.Integer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bool",{get:function(){return this.primitiveType===d.Boolean},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateTime",{get:function(){return this.primitiveType===d.DateTime||this.primitiveType===d.Date||this.primitiveType===d.Time},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.primitiveType===d.Duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binary",{get:function(){return this.primitiveType===d.Binary},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this.primitiveType===d.None},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"temporal",{get:function(){return this.temporalType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geography",{get:function(){return this.geographyType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"misc",{get:function(){return this.miscType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatting",{get:function(){return this.formattingType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enum",{get:function(){return this.enumType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scripting",{get:function(){return this.scriptingType},enumerable:!0,configurable:!0}),e.typeCache={},e}();e.ValueType=s;var l=function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"source",{get:function(){return n(this.underlyingType,g.ScriptSource)},enumerable:!0,configurable:!0}),e}();e.ScriptType=l;var u=function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"year",{get:function(){return n(this.underlyingType,g.Year)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"month",{get:function(){return n(this.underlyingType,g.Month)},enumerable:!0,configurable:!0}),e}();e.TemporalType=u;var c=function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"address",{get:function(){return n(this.underlyingType,g.Address)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"city",{get:function(){return n(this.underlyingType,g.City)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"continent",{get:function(){return n(this.underlyingType,g.Continent)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"country",{get:function(){return n(this.underlyingType,g.Country)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"county",{get:function(){return n(this.underlyingType,g.County)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"region",{get:function(){return n(this.underlyingType,g.Region)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"postalCode",{get:function(){return n(this.underlyingType,g.PostalCode)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateOrProvince",{get:function(){return n(this.underlyingType,g.StateOrProvince)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"place",{get:function(){return n(this.underlyingType,g.Place)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"latitude",{get:function(){return n(this.underlyingType,g.Latitude)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return n(this.underlyingType,g.Longitude)},enumerable:!0,configurable:!0}),e}();e.GeographyType=c;var h=function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"image",{get:function(){return n(this.underlyingType,g.Image)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageUrl",{get:function(){return n(this.underlyingType,g.ImageUrl)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"webUrl",{get:function(){return n(this.underlyingType,g.WebUrl)},enumerable:!0,configurable:!0}),e}();e.MiscellaneousType=h;var p=function(){function e(e){this.underlyingType=e}return Object.defineProperty(e.prototype,"color",{get:function(){return n(this.underlyingType,g.Color)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formatString",{get:function(){return n(this.underlyingType,g.FormatString)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alignment",{get:function(){return n(this.underlyingType,g.Alignment)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelDisplayUnits",{get:function(){return n(this.underlyingType,g.LabelDisplayUnits)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return n(this.underlyingType,g.FontSize)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelDensity",{get:function(){return n(this.underlyingType,g.LabelDensity)},enumerable:!0,configurable:!0}),e}();e.FormattingType=p,function(e){e[e.Null=0]="Null",e[e.Text=1]="Text",e[e.Decimal=2]="Decimal",e[e.Double=3]="Double",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.Date=6]="Date",e[e.DateTime=7]="DateTime",e[e.DateTimeZone=8]="DateTimeZone",e[e.Time=9]="Time",e[e.Duration=10]="Duration",e[e.Binary=11]="Binary",e[e.None=12]="None"}(e.PrimitiveType||(e.PrimitiveType={}));var d=e.PrimitiveType;!function(e){e[e.Numeric=256]="Numeric",e[e.Temporal=512]="Temporal",e[e.Geography=1024]="Geography",e[e.Miscellaneous=2048]="Miscellaneous",e[e.Formatting=4096]="Formatting",e[e.Scripting=8192]="Scripting",e[e.Null=0]="Null",e[e.Text=1]="Text",e[e.Decimal=258]="Decimal",e[e.Double=259]="Double",e[e.Integer=260]="Integer",e[e.Boolean=5]="Boolean",e[e.Date=518]="Date",e[e.DateTime=519]="DateTime",e[e.DateTimeZone=520]="DateTimeZone",e[e.Time=521]="Time",e[e.Duration=10]="Duration",e[e.Binary=11]="Binary",e[e.None=12]="None",e[e.Year=66048]="Year",e[e.Year_Text=66049]="Year_Text",e[e.Year_Integer=66308]="Year_Integer",e[e.Year_Date=66054]="Year_Date",e[e.Year_DateTime=66055]="Year_DateTime",e[e.Month=131584]="Month",e[e.Month_Text=131585]="Month_Text",e[e.Month_Integer=131844]="Month_Integer",e[e.Month_Date=131590]="Month_Date",e[e.Month_DateTime=131591]="Month_DateTime",e[e.Address=6554625]="Address",e[e.City=6620161]="City",e[e.Continent=6685697]="Continent",e[e.Country=6751233]="Country",e[e.County=6816769]="County",e[e.Region=6882305]="Region",e[e.PostalCode=6947840]="PostalCode",e[e.PostalCode_Text=6947841]="PostalCode_Text",e[e.PostalCode_Integer=6948100]="PostalCode_Integer",e[e.StateOrProvince=7013377]="StateOrProvince",e[e.Place=7078913]="Place",e[e.Latitude=7144448]="Latitude",e[e.Latitude_Decimal=7144706]="Latitude_Decimal",e[e.Latitude_Double=7144707]="Latitude_Double",e[e.Longitude=7209984]="Longitude",e[e.Longitude_Decimal=7210242]="Longitude_Decimal",e[e.Longitude_Double=7210243]="Longitude_Double",e[e.Image=13109259]="Image",e[e.ImageUrl=13174785]="ImageUrl",e[e.WebUrl=13240321]="WebUrl",e[e.Color=19664897]="Color",e[e.FormatString=19730433]="FormatString",e[e.Alignment=20058113]="Alignment",e[e.LabelDisplayUnits=20123649]="LabelDisplayUnits",e[e.FontSize=20189443]="FontSize",e[e.LabelDensity=20254979]="LabelDensity",e[e.Enumeration=26214401]="Enumeration",e[e.ScriptSource=32776193]="ScriptSource"}(e.ExtendedType||(e.ExtendedType={}));var g=e.ExtendedType,m=255,f=65535,y=4294901760}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.findProperty=function(e,t){var i=this.entities.withName(e);return i&&!_.isEmpty(i.properties)?i.properties.withName(t):void 0},e.prototype.findHierarchy=function(e,t){var i=this.entities.withName(e);return i&&!_.isEmpty(i.hierarchies)?i.hierarchies.withName(t):void 0},e.prototype.findHierarchyByVariation=function(e,t,i,a){var r=this.entities.withName(e);if(r&&!_.isEmpty(r.properties)){var n=r.properties.withName(t);if(n){var o=n.column;if(o&&!_.isEmpty(o.variations)){var s=o.variations.withName(i),l=s&&s.navigationProperty&&s.navigationProperty.targetEntity;if(l&&!_.isEmpty(l.hierarchies))return l.hierarchies.withName(a)}}}},e.prototype.findPropertyWithKpi=function(e,t){var i=this.entities.withName(e);if(i&&!_.isEmpty(i.properties))for(var a=0,r=i.properties;a<r.length;a++){var n=r[a];if(n&&n.measure&&n.measure.kpi&&(n.measure.kpi.status===t||n.measure.kpi.goal===t))return n}},e}();e.ConceptualSchema=t,function(e){e[e.None=0]="None",e[e.Address=1]="Address",e[e.City=2]="City",e[e.Company=3]="Company",e[e.Continent=4]="Continent",e[e.Country=5]="Country",e[e.County=6]="County",e[e.Date=7]="Date",e[e.Image=8]="Image",e[e.ImageUrl=9]="ImageUrl",e[e.Latitude=10]="Latitude",e[e.Longitude=11]="Longitude",e[e.Organization=12]="Organization",e[e.Place=13]="Place",e[e.PostalCode=14]="PostalCode",e[e.Product=15]="Product",e[e.StateOrProvince=16]="StateOrProvince",e[e.WebUrl=17]="WebUrl"}(e.ConceptualDataCategory||(e.ConceptualDataCategory={})),e.ConceptualDataCategory}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){!function(e){e[e.Top=0]="Top",e[e.First=1]="First",e[e.Last=2]="Last",e[e.Sample=3]="Sample",e[e.Bottom=4]="Bottom"}(e.DataShapeBindingLimitType||(e.DataShapeBindingLimitType={})),e.DataShapeBindingLimitType,!function(e){e[e.None=0]="None",e[e.Before=1]="Before",e[e.After=2]="After"}(e.SubtotalType||(e.SubtotalType={})),e.SubtotalType}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(e){this.schemas=e.schemas,e.links&&(this.links=e.links)}return e.prototype.schema=function(e){return this.schemas[e]},e}();e.FederatedConceptualSchema=t}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){function a(i,a){if(!h.isUndefinedOrEmpty(i)){for(var r=[],n=0,o=i.length;o>n;n++){var s=i[n],l=s.data,u=void 0;if(l&&l.length)for(var c=0,p=l.length;p>c;c++)u=t.SQExprBuilder.and(u,s.data[c].expr);u&&r.push(u)}return _.isEmpty(r)?void 0:e.DataViewScopeIdentity.filterFromExprs(r,a)}}function r(i,a){var r=i.data;if(r.length!==a.length)return!1;for(var n=0,o=r.length;o>n;n++){var s=i.data[n],l=s;if(l.expr){if(!e.DataViewScopeIdentity.equals(l,a[n]))return!1}else if(!t.DataViewScopeWildcard.matches(s,a[n]))return!1}return!0}function n(e,i){var a=e.data,r=a.length;if(r!==i.length)return!1;for(var n=0;r>n;n++){var o=e.data[n],s=void 0;if(s=o.expr?t.ScopeIdentityExtractor.getKeys(o.expr):o.exprs,s&&!t.SQExprUtils.sequenceEqual(i[n],s))return!1}return!0}function o(e,t){return e=e||null,t=t||null,e===t?!0:!e!=!t?!1:e.id!==t.id?!1:e.metadata!==t.metadata?!1:s(e.data,t.data)?!0:!1}function s(e,t){if(e=e||null,t=t||null,e===t)return!0;if(!e!=!t)return!1;if(e.length!==t.length)return!1;for(var i=0,a=e.length;a>i;i++)if(!l(e[i],t[i]))return!1;return!0}function l(t,i){return!t.expr&&i.expr?!1:e.DataViewScopeIdentity.equals(t,i)}function u(e){var t={};if(e.data){for(var i=[],a=0,r=e.data.length;r>a;a++)i.push(e.data[a].key);t.data=i}return e.metadata&&(t.metadata=e.metadata),e.id&&(t.id=e.id),JSON.stringify(t)}function c(e){var t=e.data;if(!t)return!1;for(var i=0,a=t.length;a>i;i++){var r=t[i];if(r.exprs)return!0}return!1}var h=jsCommon.ArrayExtensions;i.filterFromSelector=a,i.matchesData=r,i.matchesKeys=n,i.equals=o,i.getKey=u,i.containsWildcard=c}(i=t.Selector||(t.Selector={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){!function(e){e[e.Table=0]="Table",e[e.Pod=1]="Pod"}(e.EntitySourceType||(e.EntitySourceType={})),e.EntitySourceType,!function(e){e[e.Day=0]="Day",e[e.Week=1]="Week",e[e.Month=2]="Month",e[e.Year=3]="Year",e[e.Decade=4]="Decade",e[e.Second=5]="Second",e[e.Minute=6]="Minute",e[e.Hour=7]="Hour"}(e.TimeUnit||(e.TimeUnit={})),e.TimeUnit,!function(e){e[e.Sum=0]="Sum",e[e.Avg=1]="Avg",e[e.Count=2]="Count",e[e.Min=3]="Min",e[e.Max=4]="Max",e[e.CountNonNull=5]="CountNonNull",e[e.Median=6]="Median",e[e.StandardDeviation=7]="StandardDeviation",e[e.Variance=8]="Variance"}(e.QueryAggregateFunction||(e.QueryAggregateFunction={})),e.QueryAggregateFunction,!function(e){e[e.Equal=0]="Equal",e[e.GreaterThan=1]="GreaterThan",e[e.GreaterThanOrEqual=2]="GreaterThanOrEqual",e[e.LessThan=3]="LessThan",e[e.LessThanOrEqual=4]="LessThanOrEqual"}(e.QueryComparisonKind||(e.QueryComparisonKind={})),e.QueryComparisonKind,!function(e){e[e.None=0]="None",e[e.Number=1]="Number",e[e.Integer=3]="Integer",e[e.DateTime=4]="DateTime",e[e.Time=8]="Time",e[e.Date=20]="Date",e[e.Month=35]="Month",e[e.Year=67]="Year",e[e.YearAndMonth=128]="YearAndMonth",e[e.MonthAndDay=256]="MonthAndDay",e[e.Decade=515]="Decade",e[e.YearAndWeek=1024]="YearAndWeek",e[e.String=2048]="String",e[e.Boolean=4096]="Boolean",e[e.Table=8192]="Table",e[e.Range=16384]="Range"}(e.SemanticType||(e.SemanticType={})),e.SemanticType,!function(e){e[e.None=0]="None",e[e.Group=1]="Group",e[e.Measure=2]="Measure"}(e.SelectKind||(e.SelectKind={})),e.SelectKind,!function(e){e[e.Default=0]="Default",e[e.Period=1]="Period"}(e.FilterKind||(e.FilterKind={})),e.FilterKind}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(e,t,i){this.items=e,this._activeProjectionRef=t,this._showAll=i}return e.prototype.all=function(){return this.items},Object.defineProperty(e.prototype,"activeProjectionQueryRef",{get:function(){return this._activeProjectionRef},set:function(e){var t=this.items.map(function(e){return e.queryRef});_.contains(t,e)&&(this._activeProjectionRef=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAll",{get:function(){return this._showAll},set:function(e){this._showAll=e},enumerable:!0,configurable:!0}),e.prototype.clone=function(){return new e(_.clone(this.items),this._activeProjectionRef,this._showAll)},e}();e.QueryProjectionCollection=t;var i;!function(e){function t(e){if(!e)return e;var t={};for(var i in e)t[i]=e[i].clone();return t}function i(e,t){return e?e[t]:void 0}e.clone=t,e.getRole=i}(i=e.QueryProjectionsByRole||(e.QueryProjectionsByRole={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){!function(e){e[e.Default=0]="Default",e[e.Verbose=1]="Verbose",e[e.WholeUnits=2]="WholeUnits",e[e.DataLabels=3]="DataLabels"}(e.DisplayUnitSystemType||(e.DisplayUnitSystemType={})),e.DisplayUnitSystemType}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t,i=jsCommon.JsonComparer;!function(t){function r(t,i,a){var r=t[i];r||(t[i]=r=[]);for(var n=0,o=r.length;o>n;n++){var s=r[n];if(e.Selector.equals(s.selector,a))return s}var l={selector:a,properties:{}};return r.push(l),l}function n(e,t,i,r){var n=l(e,t,i);n&&a.deleteSingleProperty(n,r)}function o(e,t,i){var a=s(e,t,i);return a?a[t.propertyName]:void 0}function s(e,t,i){var a=l(e,t.objectName,i);return a?a.properties:void 0}function l(t,i,a){if(t){var r=t[i];if(r)for(var n=0,o=r.length;o>n;n++){var s=r[n];if(e.Selector.equals(s.selector,a))return s}}}function u(t,a){return t instanceof e.SemanticFilter&&a instanceof e.SemanticFilter?e.SemanticFilter.isSameFilter(t,a):i.equals(t,a)}function c(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(!u(e[i],t[i]))return!1;return!0}function h(t,i){if(i.bool)return"boolean"!=typeof t&&(t=!1),e.SQExprBuilder["boolean"](t);if(i.text||i.scripting&&i.scripting.source)return e.SQExprBuilder.text(t);if(i.numeric){if($.isNumeric(t))return e.SQExprBuilder["double"](+t)}else if(i.fill){if(t)return{solid:{color:e.SQExprBuilder.text(t)}}}else{if(i.formatting)return i.formatting.labelDisplayUnits?e.SQExprBuilder["double"](+t):e.SQExprBuilder.text(t);if(i.enumeration)return $.isNumeric(t)?e.SQExprBuilder["double"](+t):e.SQExprBuilder.text(t);if(i.misc)t=t?e.SQExprBuilder.text(t):null;else if(i.image&&t){var a=t,r={name:e.SQExprBuilder.text(a.name),url:e.SQExprBuilder.text(a.url)};return a.scaling&&(r.scaling=e.SQExprBuilder.text(a.scaling)),r}}return t}t.ensure=r,t.deleteProperty=n,t.getValue=o,t.getPropertyContainer=s,t.getObjectDefinition=l,t.propertiesAreEqual=u,t.allPropertiesAreEqual=c,t.encodePropertyValue=h}(t=e.DataViewObjectDefinitions||(e.DataViewObjectDefinitions={}));var a;!function(e){function t(e,t){delete e.properties[t]}e.deleteSingleProperty=t}(a=e.DataViewObjectDefinition||(e.DataViewObjectDefinition={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){function i(t){return n(t,function(t){var i=e.ValueType.fromDescriptor(t.type).formatting;return i&&i.formatString})}function a(e){return n(e,function(e){var t=e.type;return t&&!!t.filter})}function r(e){return n(e,function(e){var t=e.type;return t&&!!t.expression&&t.expression.defaultValue})}function n(e,t){if(e)for(var i in e){var a=e[i].properties;for(var r in a)if(t(a[r]))return{objectName:i,propertyName:r}}}t.findFormatString=i,t.findFilterOutput=a,t.findDefaultValue=r}(i=t.DataViewObjectDescriptors||(t.DataViewObjectDescriptors={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function i(t,i,a){for(var r,n=0,o=a.length;o>n;n++){var s=a[n],l=s.name,u=e.DataViewObjectEvaluator.run(t,i[l],s.properties);u&&(r||(r={}),r[l]=u)}return r}function a(e){var t={data:[]};if(e)for(var i in e)for(var a=e[i],n=0,o=a.length;o>n;n++){var s=a[n];r(t,s.selector).objects.push({name:i,properties:s.properties})}return t}function r(t,i){if(!i)return t.metadataOnce||(t.metadataOnce={objects:[]}),t.metadataOnce;var a;i.data?a=t.data:i.metadata?(t.metadata||(t.metadata=[]),a=t.metadata):i.id&&(t.userDefined||(t.userDefined=[]),a=t.userDefined);for(var r=0;r<a.length;r++){var n=a[r];if(e.Selector.equals(i,n.selector))return n}var o={selector:i,objects:[]};return a.push(o),o}function n(e,t,i,a){a&&(o(e,t,i,a),s(e,t,i,a))}function o(t,i,a,r){var n=e.DataViewObjectDescriptors.findFormatString(i);if(n)for(var o=0,s=r.length;s>o;o++){var c=r[o];c&&u(t,n,c.queryName,c.format||l(a,o))}}function s(t,i,a,r){var n=e.DataViewObjectDescriptors.findDefaultValue(i);if(n)for(var o=0;o<r.length;o++){var s=r[o];s&&c(t,n,s.queryName,s.defaultValue)}}function l(e,t){for(var i=0,a=e.length;a>i;i++){var r=e[i];if(r&&r.index===t)return r.format}}function u(t,i,a,r){r&&h(t,i,{metadata:a},e.SQExprBuilder.text(r))}function c(e,t,i,a){a&&h(e,t,{metadata:i},a)}function h(e,t,i,a){var r;if(i){var n=e.metadata;n||(n=e.metadata=[]),r=n}else{var o=e.metadataOnce;o||(o=e.metadataOnce={selector:i,objects:[]}),r=[o]}var s,l=p(r,i);if(l){var u=l.objects;if(s=d(u,t.objectName)){if(s.properties[t.propertyName])return}else s={name:t.objectName,properties:{}},u.push(s)}else s={name:t.objectName,properties:{}},r.push({selector:i,objects:[s]});s.properties[t.propertyName]=a}function p(t,i){for(var a=0,r=t.length;r>a;a++){var n=t[a];if(e.Selector.equals(n.selector,i))return n}}function d(e,t){for(var i=0,a=e.length;a>i;i++){var r=e[i];if(r.name===t)return r}}t.evaluateDataViewObjects=i,t.groupObjectsBySelector=a,t.addImplicitObjects=n}(t=e.DataViewObjectEvaluationUtils||(e.DataViewObjectEvaluationUtils={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){function a(e,t,i){if(t){var a,n=t.properties;for(var o in i){var s=i[o],l=n[o];if(l){var u=r(e,l,s);void 0!==u&&(a||(a={}),a[o]=u)}}return a}}function r(i,a,r){var s=a.type;if(s&&s.expression)return r;var c=d(i,r,e.ValueType.fromDescriptor(a.type));return void 0!==c||r instanceof t.RuleEvaluation?c:n(i,r,s)||o(i,r,s)||l(i,r,s)||u(i,r,s)||r}function n(t,i,a){var r=a.fill;return r&&r&&r.solid&&r.solid.color&&i.solid?{solid:{color:d(t,i.solid.color,e.ValueType.fromExtendedType(e.ExtendedType.Color))}}:void 0}function o(e,t,i){if(i.fillRule){if(t.linearGradient2){var a=t.linearGradient2;return{linearGradient2:{min:s(e,a.min),max:s(e,a.max)}}}if(t.linearGradient3){var r=t.linearGradient3;return{linearGradient3:{min:s(e,r.min),mid:s(e,r.mid),max:s(e,r.max)}}}}}function s(e,t){var i={color:d(e,t.color,g)},a=d(e,t.value,m);return null!=a&&(i.value=a),i}function l(t,i,a){if(a.image&&i){var r={name:d(t,i.name,f),url:d(t,i.url,e.ValueType.fromDescriptor(e.ImageDefinition.urlType))};return i.scaling&&(r.scaling=d(t,i.scaling,f)),r}}function u(e,t,i){return i.paragraphs&&t?p(e,t,c):void 0}function c(e,t){var i,a=t.textRuns,r=p(e,a,h);return a!==r&&(i=_.clone(t),i.textRuns=r),i||t}function h(e,t){var i,a=t.value,r=d(e,a,f);return void 0!==r&&(i=_.clone(t),i.value=r),i||t}function p(e,t,i){for(var a,r=0,n=t.length;n>r;r++){var o=t[r],s=i(e,o);a||o===s||(a=_.take(t,r)),a&&a.push(s)}return a||t}function d(e,i,a){return i instanceof t.SQExpr?y.evaluate(i,e):i instanceof t.RuleEvaluation?i.evaluate(e):void 0}var g=e.ValueType.fromDescriptor({formatting:{color:!0}}),m=e.ValueType.fromDescriptor({numeric:!0}),f=e.ValueType.fromDescriptor({text:!0});i.run=a,i.evaluateProperty=r;var y=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.evaluate=function(e,i){return null!=e?e.accept(t.instance,i):void 0},t.prototype.visitConstant=function(e,t){return e.value},t.prototype.visitMeasureRef=function(e,t){return t.getExprValue(e)},t.prototype.visitAggr=function(e,t){return t.getExprValue(e)},t.instance=new t,t}(t.DefaultSQExprVisitorWithArg)}(i=t.DataViewObjectEvaluator||(t.DataViewObjectEvaluator={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e,t,a){if(!e)return a;var r=e[t.objectName],n=r;return i.getValue(n,t.propertyName,a)}function a(e,t,i){if(e&&e[t]){var a=e[t];return a}return i}function r(e,t){if(e&&e[t]){var i=e[t];return i}}function n(e,i,a){var r=t(e,i);return r&&r.solid?r.solid.color:a}function o(e){return _.isArray(e)}e.getValue=t,e.getObject=a,e.getUserDefinedObjects=r,e.getFillColor=n,e.isUserDefined=o}(t=e.DataViewObjects||(e.DataViewObjects={}));var i;!function(e){function t(e,t,i){if(!e)return i;var a=e[t];return void 0===a?i:a}function i(t,i,a){var r=e.getValue(t,i);return r&&r.solid?r.solid.color:a}e.getValue=t,e.getFillColorByPropertyName=i}(i=e.DataViewObject||(e.DataViewObject={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=e.Prototype.inherit,r=jsCommon.ArrayExtensions;!function(e){function i(e){var i=e.categorical;if(!i)return null;var n=i.categories;if(!n||1!==n.length)return null;var o=i.values;if(r.isUndefinedOrEmpty(o)||o.source)return null;for(var s=n[0],l=s.identity,u=s.values,c=[],h=[],p=0,d=u.length;d>p;p++)for(var g=u[p],m=l[p],f=0,y=o.length;y>f;f++){var v=o[f],b=a(v.source);if(v.identity)return null;b.groupName=g;var C={source:b,values:[v.values[p]],identity:m,min:v.min,max:v.max,subtotal:v.subtotal},x=v.highlights;x&&(C.highlights=[x[p]]),c.push(b),h.push(C)}var S=a(e.metadata);return S.columns=c,o=t.DataViewTransform.createValueColumns(h,s.identityFields,s.source),{metadata:S,categorical:{values:o},matrix:e.matrix}}e.apply=i}(i=t.DataViewPivotCategorical||(t.DataViewPivotCategorical={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){function i(t,i){i.columnHierarchyRewritten||(t.columns=e.Prototype.inherit(t.columns));var o=t.columns;i.rowHierarchyRewritten||(t.rows=e.Prototype.inherit(t.rows));var s=t.rows;if(!(o.levels.length>1)){var l={level:0},u=o.root.children,c=u.length;if(c>0){var h=0,p=function(e){if(e.values){l.values||(l.values={});for(var t=0;c>t;t++)l.values[h++]=e.values[t];delete e.values}if(c>1){var i=e.level+1;e.children||(e.children=[]);for(var a=0;c>a;a++){var r={level:i},n=u[a];r.levelSourceIndex=n.levelSourceIndex,e.isSubtotal&&(r.isSubtotal=!0),e.children.push(r)}}};i.hierarchyTreesRewritten?a(s.root,p):t.columns.root=n(s.root,p)}else i.hierarchyTreesRewritten||(t.columns.root=r(s.root));if(c>1){var d={sources:o.levels[0].sources};s.levels.push(d),o.levels.length=0}if(i.hierarchyTreesRewritten)t.columns.root=s.root,t.rows.root={children:[l]};else{var g=e.Prototype.inherit(t.rows.root);g.children=[l],t.rows.root=g}t.columns.levels=s.levels,t.rows.levels=[]}}function a(e,t){var i=e.children;if(i&&i.length>0)for(var r=0,n=i.length;n>r;r++)a(i[r],t);else t(e)}function r(e){return n(e)}function n(t,i){var a=e.Prototype.inherit(t),r=t.children;if(r&&r.length>0){for(var o=[],s=0,l=r.length;l>s;s++){
var u=n(r[s],i);o.push(u)}a.children=o}else i&&i(a);return a}t.apply=i,t.cloneTree=r,t.cloneTreeExecuteOnLeaf=n}(i=t.DataViewPivotMatrix||(t.DataViewPivotMatrix={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){function a(e){if(e.categorical){var t=e.categorical;if(t.categories&&1===t.categories.length&&(!t.values||!t.values.source))return r(e.metadata,t)}}function r(i,a){i=e.Prototype.inherit(i),i.columns=[];var r=a.values?a.values.grouped()[0].values:[],s=a.categories[0],l=s.values,u=l.length;if(0!==u){var c=s.identity,h=[],p=n(u);i.columns.push(s.source);for(var d=0;u>d;d++)for(var g=c[d],m=l[d],f=0,y=r.length;y>f;f++){var v=r[f],b=v.highlights,C=e.Prototype.inherit(v.source);C.groupName=m,i.columns.push(C);var x={source:C,identity:g,values:o(p,v.values,d)};b&&(x.highlights=o(p,b,d)),h.push(x)}var S=t.DataViewTransform.createValueColumns(h,s.identityFields,s.source);return{metadata:i,categorical:{categories:a.categories,values:S}}}}function n(e){for(var t=new Array(e),i=0;e>i;i++)t[i]=null;return t}function o(t,i,a){var r=e.Prototype.inherit(t);return r[a]=i[a],r}i.apply=a}(i=t.DataViewSelfCrossJoin||(t.DataViewSelfCrossJoin={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){!function(e){e[e.Year=0]="Year",e[e.Month=1]="Month",e[e.Week=2]="Week",e[e.Day=3]="Day",e[e.Hour=4]="Hour",e[e.Minute=5]="Minute",e[e.Second=6]="Second",e[e.Millisecond=7]="Millisecond"}(e.DateTimeUnit||(e.DateTimeUnit={})),e.DateTimeUnit}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(t,i){if(!i||0===i.length)return{dataView:t,isValid:!0};if(t)for(var s=0;s<i.length;s++){var l=i[s];if(u(t,l))return{dataView:t,isValid:!0};if(l.categorical&&t.categorical)return a(t,l);if(l.tree&&t.tree)return n(t,l.tree);if(l.single&&t.single)return r(t,l.single);if(l.table&&t.table)return o(t,l.table)}else if(e.ScriptResultUtil.findScriptResult(i))return{dataView:t,isValid:!0};return{isValid:!1}}function a(t,i){var a=i.categorical,r=t.categorical;if(!r)return{isValid:!1};var n;if(a.rowCount&&(n=a.rowCount.supported,n&&n.max)){var o,s=r.categories,l=n.max,u=void 0;if(s)for(var h=0,p=s.length;p>h;h++){var d=s[h];if(u=d.values.length,void 0!==l&&u>l){var g=D.range(d.values,0,l-1);o=o||{categories:[]},o.categories.push({source:d.source,values:g})}}if(r.values&&r.values.length>0&&l&&(u||(u=r.values[0].values.length),void 0!==l&&u>l)){o=o||{},o.values=e.data.DataViewTransform.createValueColumns();for(var h=0,p=r.values.length;p>h;h++){var m=r.values[h],f={source:m.source,values:D.range(m.values,0,l-1)};void 0!==m.min&&(f.min=m.min),void 0!==m.max&&(f.max=m.max),void 0!==m.subtotal&&(f.subtotal=m.subtotal),o.values.push(f)}}o&&(t={metadata:t.metadata,categorical:o})}return c(t,i)?{dataView:t,isValid:!0}:null}function r(e,t){return e.single?{dataView:e,isValid:!0}:{isValid:!1}}function n(e,t){var i=e.metadata;return m(s(i.columns),t.depth)?{dataView:e,isValid:!0}:{isValid:!1}}function o(e,t){return e.table?{dataView:e,isValid:!0}:{isValid:!1}}function s(e){for(var t=0,i=0,a=e.length;a>i;i++)e[i].isMeasure||++t;return t}function l(e){for(var t=0,i=0,a=e.length;a>i;i++)e[i].isMeasure&&++t;return t}function u(e,t,i){return t&&e?t.scriptResult&&!g(e.scriptResult,t.scriptResult)?!1:t.categorical&&!c(e,t.categorical,i)?!1:t.tree&&!p(e,t.tree)?!1:t.single&&!h(e.single,t.single)?!1:t.table&&!d(e.table,t.table,i)?!1:!0:!1}function c(e,t,i){var a=e.categorical;if(!a)return!1;if(t.rowCount){var r=t.rowCount.supported;if(i&&t.rowCount.preferred&&(r=t.rowCount.preferred),r){var n=0;if(a.values&&a.values.length?n=a.values[0].values.length:a.categories&&a.categories.length&&(n=a.categories[0].values.length),!m(n,r))return!1}}return!0}function h(e,t){return e?!0:!1}function p(e,t){var i=e.metadata;return m(s(i.columns),t.depth)}function d(e,t,i){if(!e)return!1;if(t.rowCount){var a=t.rowCount.supported;if(i&&t.rowCount.preferred&&(a=t.rowCount.preferred),a){var r=0;if(e.rows&&e.rows.length&&(r=e.rows.length),!m(r,a))return!1}}return!0}function g(e,t){return e&&e.imageBase64?!0:!1}function m(e,t,i){return t?!i&&void 0!==t.min&&t.min>e?!1:void 0!==t.max&&t.max<e?!1:!0:0===e}function f(e,t,i,a){if(!e||void 0===e.kind)return!0;var r=e.kind,n=i[t];if(n)for(var o=n.all(),s=0;s<o.length;s++){var l=o[s];if(a[l.queryRef]!==r)return!1}return!0}function y(e,t,i){for(var a=[],r=0,n=t.length;n>r;r++){var o=t[r],s=o.conditions;if(s&&s.length)for(var l=0,u=s.length;u>l;l++){var c=s[l];if(v(e,c,i)){a.push(o);break}}else a.push(o)}return D.emptyToNull(a)}function v(e,t,i){for(var a=Object.keys(t),r=0,n=a.length;n>r;r++){var o=a[r],s=e[o]&&null!=e[o].activeProjectionQueryRef,l=t[o],u=b(o,e,s);if(!m(u,l)||!f(l,o,e,i))return!1}return!0}function b(e,t,i){var a=t[e];return a?i?1:a.all().length:0}function C(t,i){if(t&&i&&t.categorical&&i.categorical){var a=t.categorical.categories,r=i.categorical.categories;if(a&&r&&a.length===r.length){for(var n=0,o=a.length;o>n;n++){var s=a[n].identity,l=r[n].identity,u=x(s);if(u!==x(l))return!1;for(var c=0;u>c;c++)if(!e.DataViewScopeIdentity.equals(s[c],l[c]))return!1}return!0}}return!1}function x(e){return e?e.length:0}function S(e,t){return e||t?e&&t?e.displayName!==t.displayName?!1:e.queryName!==t.queryName?!1:e.isMeasure!==t.isMeasure?!1:e.type!==t.type?!1:e.sort!==t.sort?!1:!0:!1:!0}function w(e,i){if(!e&&!i)return!0;if(!e||!i)return!1;var a=e.columns.length,r=i.columns.length;if(a!==r)return!1;for(var n=0;r>n;n++)if(!t.areMetadataColumnsEquivalent(e.columns[n],i.columns[n]))return!1;return!0}var D=jsCommon.ArrayExtensions;t.validateAndReshape=i,t.countGroups=s,t.countMeasures=l,t.supports=u,t.conformsToRange=m,t.chooseDataViewMappings=y,t.getPropertyCount=b,t.hasSameCategoryIdentity=C,t.areMetadataColumnsEquivalent=S,t.isMetadataEquivalent=w}(t=e.DataViewAnalysis||(e.DataViewAnalysis={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t,i=jsCommon.ArrayExtensions;!function(t){function r(e,t,i){return e=e||null,t=t||null,e===t?!0:!e!=!t?!1:a.SQExpr.equals(e.expr,t.expr,i)}function n(e,t){if(!i.isUndefinedOrEmpty(e)){for(var a=[],r=0;r<e.length;r++){var n=e[r];a.push(n.expr)}return o(a,t)}}function o(t,r){if(!i.isUndefinedOrEmpty(t)){for(var n,o=0;o<t.length;o++){var s=t[o],l=a.ScopeIdentityExtractor.getInExpr(s);n=n?a.SQExprBuilder.or(n,l):l||s}return n&&r&&(n=e.data.SQExprBuilder.not(n)),e.data.SemanticFilter.fromSQExpr(n)}}t.equals=r,t.filterFromIdentity=n,t.filterFromExprs=o}(t=e.DataViewScopeIdentity||(e.DataViewScopeIdentity={}));var a;!function(e){function t(e){return new a(e)}var i=jsCommon.Lazy;e.createDataViewScopeIdentity=t;var a=function(){function t(t){this._expr=t,this._key=new i(function(){return e.SQExprShortSerializer.serialize(t)})}return Object.defineProperty(t.prototype,"expr",{get:function(){return this._expr},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this._key.getValue()},enumerable:!0,configurable:!0}),t}()}(a=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t,i=jsCommon.Lazy;!function(t){function a(t,i){var a=e.ScopeIdentityExtractor.getKeys(i.expr);return a?e.SQExprUtils.sequenceEqual(t.exprs,a):!1}function r(e){return new n(e)}t.matches=a,t.fromExprs=r;var n=function(){function t(t){this._exprs=t,this._key=new i(function(){return e.SQExprShortSerializer.serializeArray(t)})}return Object.defineProperty(t.prototype,"exprs",{get:function(){return this._exprs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this._key.getValue()},enumerable:!0,configurable:!0}),t}()}(t=e.DataViewScopeWildcard||(e.DataViewScopeWildcard={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=e.Prototype.inherit,r=e.Prototype.inheritSingle,n=jsCommon.ArrayExtensions,o=jsCommon.EnumExtensions;!function(i){function s(e){var i=e.prototype,a=e.objectDescriptors,r=e.dataViewMappings,o=e.transforms,s=e.colorAllocatorFactory,c=e.dataRoles;if(!i)return l(a,o,s);if(!o)return[i];i=t.DataViewPivotCategoricalToPrimaryGroups.unpivotResult(i,o.selects,r);var h=o.splits;if(n.isUndefinedOrEmpty(h))return[u(i,a,r,o,s,c)];for(var p=[],d=0;d<h.length;d++){var g=h[d],m=u(i,a,r,o,s,c,g.selects);p.push(m)}return p}function l(e,t,i){if(t&&t.objects){var a={metadata:{columns:[]}};return L(a,0,e,t.objects,t.selects,i),[a]}return[]}function u(e,i,r,n,o,s,l){var u=c(r),p=a(e);return p.metadata=a(e.metadata),p=h(p,r,n.selects,n.projectionOrdering,l),L(p,u,i,n.objects,n.selects,o),t.DataViewNormalizeValues.apply({dataview:p,dataViewMappings:r,dataRoles:s}),p}function c(e){if(!e)return 0;for(var t=0,i=0;i<e.length;i++){var a=e[i];a.categorical&&(t|=1),a.matrix&&(t|=2),a.single&&(t|=4),a.table&&(t|=8),a.tree&&(t|=16)}return t}function h(e,i,a,r,n){var o=[];if(a&&(e.metadata.columns=p(e.metadata.columns,a,o)),e.categorical&&(e.categorical=f(e.categorical,o,n),e=te(e,i)),e.matrix){var s={rowHierarchyRewritten:!1,columnHierarchyRewritten:!1,hierarchyTreesRewritten:!1};e.matrix=b(e.matrix,o,i,r,s),ae(e.matrix,i)&&t.DataViewPivotMatrix.apply(e.matrix,s)}return e.table&&(e.table=y(e.table,o,i,r)),e}function p(e,t,i){if(!t)return e;for(var r=a(e),n=0,o=e.length;o>n;n++){var s=e[n],l=t[s.index];if(l){var u=r[n]=a(s);l.roles&&(u.roles=l.roles),l.type&&(u.type=l.type),u.format=d(l,u),l.displayName&&(u.displayName=l.displayName),l.queryName&&(u.queryName=l.queryName),l.kpi&&(u.kpi=l.kpi),l.sort&&(u.sort=l.sort),i.push({from:s,to:u})}}return r}function d(e,t){if(e.format)return e.format;if(t.format)return t.format;var i=t.type;if(i){if(i.dateTime)return"d";if(i.integer)return"g";if(i.numeric)return"#,0.00"}}function g(e,i){if(e){i||(i={});for(var a in e){var r=e[a],n=a,o=r,s="general";switch(a){case"hasScalarCategoryAxis":s="categoryAxis",n="axisType",o=t.SQExprBuilder.text(r?"Scalar":"Categorical");break;case"Totals":n="totals",o=t.SQExprBuilder["boolean"](!!r);break;case"textboxSettings":n="paragraphs",r&&r.paragraphs&&(o=r.paragraphs);break;case"VisualType1":n="visualType1",o=t.SQExprBuilder.text(r);break;case"VisualType2":n="visualType2",o=t.SQExprBuilder.text(r);break;case"imageVisualSettings":n="imageUrl",r&&r.imageUrl&&(o=t.SQExprBuilder.text(r.imageUrl));break;default:continue}m(i,s,n,o)}return i}}function m(e,t,i,a){var r=e[t];void 0===r&&(r=e[t]=[]);var n=r[0];void 0===n&&(n=r[0]={properties:{}}),n.properties[i]=a}function f(t,i,r){function n(e){var t=D(e.source,i);if(t){var r=a(e);return r.source=t,r}}var o=a(t),s=e.Prototype.overrideArray(t.categories,n);s&&(o.categories=s);var l=e.Prototype.overrideArray(t.values,n);if(l){if(r)for(var u=l.length-1;u>=0;u--)r[l[u].source.index]||l.splice(u,1);if(l.source)if(r&&!r[l.source.index])l.source=void 0;else{var c=D(l.source,i);c&&(l.source=c)}o.values=l,J(l)}return o}function y(t,i,r,n){if(!r||1!==r.length||!r[0].table)return t;var o=a(t),s=function(e){return D(e,i)},l=e.Prototype.overrideArray(t.columns,s);if(l&&(o.columns=l),!n)return o;var u=v(n,i);if(!u)return o;for(var c=l.slice(0),h=Object.keys(u),p=0,d=h.length;d>p;p++){var g=c[u[h[p]]];p===l.length?l.push(g):l[p]=g}var m=e.Prototype.overrideArray(o.rows,function(e){for(var t=[],i=0,a=h.length;a>i;++i)t[i]=e[u[h[i]]];return t});return m&&(o.rows=m),o}function v(e,t){var i=Object.keys(e);if(1===i.length){var a=i[0],r=_.map(t,function(e){return e.from.index}),o=e[a];if(!n.sequenceEqual(r,o,function(e,t){return e===t}))return S(r,o)}}function b(i,r,n,o,s){function l(e){return D(e,r)}function u(t){var i=null,a=e.Prototype.overrideArray(t.levels,function(t){var i=null,a=e.Prototype.overrideArray(t.sources,l);return a&&(i=P(i,t,function(e){return e.sources=a})),i});return a&&(i=P(i,t,function(e){return e.levels=a})),i}if(!n||n.length<1||!(n[0].matrix||n[1]&&n[1].matrix))return i;var c=n[0].matrix||n[1].matrix,h=a(i),p=u(h.rows);p&&(h.rows=p,s.rowHierarchyRewritten=!0);var d=u(h.columns);d&&(h.columns=d,s.columnHierarchyRewritten=!0);var g=e.Prototype.overrideArray(h.valueSources,l);if(g){h.valueSources=g;var m=c.values;if(o&&g.length>1&&m&&m["for"]){var f=d.levels.length;if(f>0){var y=x(m,o,g,r);if(y){var v=Object.keys(y),b=v.length;d.root=t.DataViewPivotMatrix.cloneTree(d.root),1===f?C(d.root,y):w(d.root,f-2,function(e){return C(e,y)}),h.rows.root=t.DataViewPivotMatrix.cloneTreeExecuteOnLeaf(h.rows.root,function(e){if(e.values){for(var t={},i=Object.keys(e.values).length/b,a=0,r=i;r>a;a++)for(var n=a*b,o=0;b>o;o++)t[n+o]=e.values[n+y[v[o]]];e.values=t}}),s.hierarchyTreesRewritten=!0}}}}return h}function C(e,t){for(var i=Object.keys(t),a=i.length,r=e.children,n=r.slice(0),o=0,s=a;s>o;o++){var l=n[t[i[o]]];o===r.length?r.push(l):r[o]=l}}function x(e,t,i,a){function r(e){for(var t=0,a=i.length;a>t;t++){var r=i[t];if(r===e.to)return e}}for(var o=e["for"]["in"],s=[],l=0,u=a.length;u>l;l++){var c=a[l];r(c)&&s.push(c)}var h=t[o],p=_.map(s,function(e){return e.from.index});return n.sequenceEqual(p,h,function(e,t){return e===t})?void 0:S(p,h)}function S(e,t){for(var i={},a=0,r=t.length;r>a;++a){var n=t[a];i[a]=e.indexOf(n)}return i}function w(e,t,i){if(e.level===t)return void i(e);var a=e.children;if(a&&a.length>0)for(var r=0,n=a.length;n>r;r++)w(a[r],t,i)}function D(e,t){for(var i=0,a=t.length;a>i;i++){var r=t[i];if(r.from===e)return r.to}}function P(e,t,i){return e||(e=a(t)),i&&i(e),e}function L(e,i,a,r,n,o){if(a){var s=t.DataViewObjectEvaluationUtils.groupObjectsBySelector(r);t.DataViewObjectEvaluationUtils.addImplicitObjects(s,a,e.metadata.columns,n);var l=s.metadataOnce,u=s.data;l&&T(e,n,a,l.objects,u,o);var c=s.metadata;if(c)for(var h=0,p=c.length;p>h;h++){var d=c[h];B(e,n,a,d.selector,d.objects)}for(var h=0,p=u.length;p>h;h++){var g=u[h];F(e,i,a,g.selector,g.rules,g.objects)}var m=s.userDefined;m&&N(e,n,a,m)}}function N(e,i,a,r){var n=e.metadata.objects;n||(n=e.metadata.objects={});for(var o=t.createStaticEvalContext(e,i),s=0;s<r.length;s++){var l=r[s],u=l.selector.id,c=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(o,a,l.objects);for(var h in c){var p=c[h],d=n[h];d||(d=n[h]=[]),d.push({id:u,object:p})}}}function T(e,i,a,r,n,o){var s=t.createStaticEvalContext(e,i),l=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(s,a,r);if(l){e.metadata.objects=l;for(var u in l){var c=l[u],h=a[u];for(var p in c){var d=h.properties[p],g=d.rule;if(g){var m=V(e,o,g,u,c[p],d.type);m&&n.push(m)}}}}}function V(e,t,i,a,r,n){var o=i.output;if(o){var s=U(e,o.selector);if(s)return n.fillRule?M(e,t,i,s,a,r):n.filter?I(e,i,s,a,r):void 0}}function M(e,i,a,r,n,o){var s;if(o.linearGradient2?s=A(e,i,a,o,o.linearGradient2):o.linearGradient3&&(s=R(e,i,a,o,o.linearGradient3)),s){var l=new t.ColorRuleEvaluation(a.inputRole,s),u={};return u[a.output.property]={solid:{color:l}},{selector:r,rules:[l],objects:[{name:n,properties:u}]}}}function A(e,t,i,a,r){if(r=a.linearGradient2,void 0===r.min.value||void 0===r.max.value){var n=j(e,i.inputRole);if(!n)return;void 0===r.min.value&&(r.min.value=n.min),void 0===r.max.value&&(r.max.value=n.max)}return t.linearGradient2(a.linearGradient2)}function R(e,t,i,a,r){var n=void 0;if(r=a.linearGradient3,void 0===r.min.value||void 0===r.mid.value||void 0===r.max.value){var o=j(e,i.inputRole);if(!o)return;if(n=void 0===r.min.value&&void 0===r.max.value&&void 0!==r.mid.value,void 0===r.min.value&&(r.min.value=o.min),void 0===r.max.value&&(r.max.value=o.max),void 0===r.mid.value){var s=(r.max.value+r.min.value)/2;r.mid.value=s}}return t.linearGradient3(a.linearGradient3,n)}function I(e,i,a,r,n){if(e.categorical&&e.categorical.categories&&1===e.categorical.categories.length){var o=e.categorical.categories[0].identityFields;if(o){var s=t.SQExprConverter.asScopeIdsContainer(n,o);if(s){var l=new t.FilterRuleEvaluation(s),u={};return u[i.output.property]=l,{selector:a,rules:[l],objects:[{name:r,properties:u}]}}}}}function F(e,i,a,r,n,s){var l=t.Selector.containsWildcard(r),u=e.categorical;u&&o.hasFlag(i,1)&&(E(u,a,r,n,l,s),O(u,a,r,n,l,s));var c=e.matrix;if(c&&o.hasFlag(i,2)){var h=G(c,a,r,n,l,s);h&&(e.matrix=h)}}function E(e,i,a,r,n,o){if(e.categories&&0!==e.categories.length){var s=W(e,a);if(s){var l,u=s.identities,c=t.createCategoricalEvalContext(e,u);if(u){for(var h=0,p=u.length;p>h;h++){var d=u[h];if(n||t.Selector.matchesData(a,[d])){c.setCurrentRowIndex(h);var g=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(c,i,o);if(g&&(s.column.objects||(s.column.objects=[],s.column.objects.length=p),s.column.objects[h]=g),!n)return!0;l=!0}}return l}}}}function O(i,a,r,n,o,s){var l=i.values;if(l&&l.identityFields&&t.Selector.matchesKeys(r,[l.identityFields])){var u=l.grouped();if(u){for(var c,h=t.createCategoricalEvalContext(i),p=0,d=u.length;d>p;p++){var g=u[p],m=r.metadata,f=g.values;if(o||t.Selector.matchesData(r,[g.identity])){var y=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(h,a,s);if(y)if(m)for(var v=0,b=f.length;b>v;v++){var C=f[v],x=C.source;if(x.queryName===m){var S=e.Prototype.inherit(x);S.objects=y,C.source=S,c=!0;break}}else g.objects=y,J(l,u),c=!0;if(!o)return!0}}return c}}}function G(e,i,a,n,o,s){var l=t.createMatrixEvalContext(e),u=H(l,e.rows,i,a,n,o,s),c=H(l,e.columns,i,a,n,o,s);if(u||c){var h=r(e);return u&&(h.rows=u),c&&(h.columns=c),h}}function H(e,t,i,a,n,o,s){if(t){var l=t.root;if(l){var u=z(e,l,i,a,n,o,s);if(u){var c=r(t);return c.root=u,c}}}}function z(e,i,a,n,o,s,l){var u=i.children;if(u){var c,h,p=i.childIdentityFields;p&&(h=t.Selector.matchesKeys(n,[p]));for(var d=0,g=u.length;g>d;d++){var m=u[d],f=m.identity,y=null;if(h){if(s||t.Selector.matchesData(n,[f])){var v=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(e,a,l);v&&(y=r(m),y.objects=v)}}else y=z(e,m,a,n,o,s,l);if(y&&(c||(c=k(i)),c.children[d]=y,!s))break}return c}}function k(e){if(Object.getPrototypeOf(e)!==Object.prototype)return e;var t=r(e);return t.children=a(e.children),t}function B(e,i,a,r,n){for(var o=e.metadata.columns,s=r.metadata,l=t.createStaticEvalContext(e,i),u=0,c=o.length;c>u;u++){var h=o[u];if(h.queryName===s){var p=t.DataViewObjectEvaluationUtils.evaluateDataViewObjects(l,a,n);p&&(h.objects=p)}}}function W(e,i){var a=e.categories[0];if(a.identityFields&&t.Selector.matchesKeys(i,[a.identityFields])){var r=a.identity,n=a,o=i.metadata;if(o){var s=e.values;if(s)for(var l=0,u=s.length;u>l;l++){var c=s[l];if(c.source.queryName===o){n=c;break}}}return{column:n,identities:r}}}function U(e,i){if(1===i.length){var a=e.categorical;if(a){var r=a.categories;if(r&&1===r.length){var n=r[0],o=n.source.roles,s=n.identityFields;if(o&&s&&o[i[0]])return{data:[t.DataViewScopeWildcard.fromExprs(s)]}}}}}function j(e,t){var i=e.categorical;if(i){var a=i.values;if(a)for(var r=0,n=a.length;n>r;r++){var o=a[r],s=o.source.roles;if(s&&s[t]){var l=o.min;if(void 0===l&&(l=o.minLocal),void 0!==l){var u=o.max;if(void 0===u&&(u=o.maxLocal),void 0!==u)return{min:l,max:u}}}}}}function q(e,i,a,r){if(e&&!n.isUndefinedOrEmpty(e.Select)||!n.isUndefinedOrEmpty(i)||r){var o={};if(e){var s=e.Select;if(s)for(var l=o.selects=[],u=0,c=s.length;c>u;u++){var h=s[u],p=K(h,u);if(l.push(p),p.format&&a){var d=t.DataViewObjectDescriptors.findFormatString(a);d&&(r||(r={}),t.DataViewObjectDefinitions.ensure(r,d.objectName,{metadata:p.queryName}).properties[d.propertyName]=t.SQExprBuilder.text(p.format))}}}if(i){var m=i.length;m>1&&(o.splits=[]);for(var u=0;m>u;u++){var f=i[u];f.Settings&&0===u&&(r=g(f.Settings,r)),f.DataRoles&&(o.selects||(o.selects=[]),o.projectionOrdering||(o.projectionOrdering={}),Y(f.DataRoles,o.selects,o.projectionOrdering)),o.splits&&o.splits.push($(f.DataRoles))}}return r&&(o.objects=r),o}}function K(e,i){var a={};return e.Restatement&&(a.displayName=e.Restatement),e.Name?a.queryName=e.Name:a.queryName||(a.queryName="$select"+i),e.Format&&(a.format=e.Format),e.Type&&(a.type=Q(e.Type,t.ConceptualDataCategory[e.DataCategory])),e.kpi&&(a.kpi=e.kpi),e.kpiStatusGraphic&&(a.kpi={graphic:e.kpiStatusGraphic}),a}function Q(i,a){i=i||t.SemanticType.None;var r=e.PrimitiveType.Null;switch(i){case t.SemanticType.String:r=e.PrimitiveType.Text;break;case t.SemanticType.Number:r=e.PrimitiveType.Double;break;case t.SemanticType.Integer:r=e.PrimitiveType.Integer;break;case t.SemanticType.Boolean:r=e.PrimitiveType.Boolean;break;case t.SemanticType.Date:r=e.PrimitiveType.Date;break;case t.SemanticType.DateTime:r=e.PrimitiveType.DateTime;break;case t.SemanticType.Time:r=e.PrimitiveType.Time;break;case t.SemanticType.Year:r=e.PrimitiveType.Integer,a="Year";break;case t.SemanticType.Month:r=e.PrimitiveType.Integer,a="Month"}return e.ValueType.fromPrimitiveTypeAndCategory(r,a)}function Y(e,t,i){for(var a=0,r=e.length;r>a;a++){var n=e[a],o=n.Projection,s=n.Name,l=t[o];void 0===l&&(X(t,o),l=t[o]={});var u=l.roles;void 0===l.roles&&(u=l.roles={}),u[s]=!0;var c=i[s];void 0===c&&(c=i[s]=[]),c.push(o)}}function X(e,t){for(var i=e.length;t>i;i++)e[i]={}}function $(e){var t={},i={selects:t};if(e)for(var a=0,r=e.length;r>a;a++){var n=e[a];t[n.Projection]=!0}return i}function Z(e,t,i){void 0===e&&(e=[]);var a=e;return J(e),t&&(a.identityFields=t),i&&(a.source=i),a}function J(e,t){e.grouped=t?function(){return t}:function(){return ee(e)}}function ee(e){for(var t,i=[],a=0,r=e.length;r>a;a++){var n=e[a];if(!t||t.identity!==n.identity){if(t={values:[]},n.identity){t.identity=n.identity;var o=n.source;void 0!==o.groupName?t.name=o.groupName:o.displayName&&(t.name=o.displayName)}i.push(t)}t.values.push(n)}return i}function te(e,i){var a;switch(ie(e.categorical,i)){case 1:a=t.DataViewPivotCategorical.apply(e);break;case 2:a=t.DataViewSelfCrossJoin.apply(e)}return a||e}function ie(e,t){if(e&&!n.isUndefinedOrEmpty(t)){var i=e.categories;if(i&&1===i.length){var a=e.values;if(!n.isUndefinedOrEmpty(a)&&!a.grouped().some(function(e){return!!e.identity}))for(var r=i[0].source.roles,o=0,s=t.length;s>o;o++){var l=t[o].categorical;if(l&&oe(r,l.values)){var u=l.categories,c=re(r,u)||ne(r,u);return c?2:1}}}}}function ae(e,t){if(e&&!n.isUndefinedOrEmpty(t)){var i=e.rows.levels;if(!(i.length<1)){var a=e.rows.root.children;if(a&&0!==a.length)for(var r=i[0].sources[0].roles,o=0,s=t.length;s>o;o++){var l=t[o].matrix;if(l&&!ne(r,l.rows)&&ne(r,l.columns))return!0}}}}function re(e,t){return e&&t&&t.bind?e[t.bind.to]:void 0}function ne(e,t){return e&&t&&t["for"]?e[t["for"]["in"]]:void 0}function oe(e,t){return e&&t&&t.group?e[t.group.by]:void 0}i.apply=s,i.upgradeSettingsToObjects=g,i.createTransformActions=q,i.createValueColumns=Z}(i=t.DataViewTransform||(t.DataViewTransform={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e,t){return new r(e,t)}function i(e,t){return a(e.values,t)||a(e.categories,t)}function a(e,t){if(e)for(var i=0;i<e.length;i++){var a=e[i],r=a.source.roles;if(r&&r[t])return a}}e.createCategoricalEvalContext=t;var r=function(){function e(e,t){this.dataView=e,this.identities=t,this.columnsByRole={}}return e.prototype.getCurrentIdentity=function(){var e=this.identities,t=this.index;return e&&null!=t?e[t]:void 0},e.prototype.getExprValue=function(e){},e.prototype.getRoleValue=function(e){var t=this.columnsByRole,a=t[e];if(a||(a=t[e]=i(this.dataView,e)),a){var r=this.index;return null!=r?a.values[this.index]:void 0}},e.prototype.setCurrentRowIndex=function(e){this.index=e},e}()}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.evaluate=function(e){},e}();e.RuleEvaluation=t}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(e){function t(t,i){e.call(this),this.inputRole=t,this.allocator=i}return __extends(t,e),t.prototype.evaluate=function(e){var t=e.getRoleValue(this.inputRole);return void 0!==t?this.allocator.color(t):void 0},t}(e.RuleEvaluation);e.ColorRuleEvaluation=t}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=function(t){function i(e){t.call(this),this.selection=e}return __extends(i,t),i.prototype.evaluate=function(t){for(var i=t.getCurrentIdentity(),a=this.selection.scopeIds,r=0,n=a.length;n>r;r++)if(e.DataViewScopeIdentity.equals(i,a[r]))return!this.selection.isNot},i}(t.RuleEvaluation);t.FilterRuleEvaluation=i}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){function i(t,i){!e.DataViewAnalysis.isMetadataEquivalent(t.metadata,i.metadata),i.metadata.segment||delete t.metadata.segment,t.table&&i.table&&a(t.table,i.table),t.categorical&&i.categorical&&r(t.categorical,i.categorical),t.tree&&i.tree&&o(t.tree.root,i.tree.root,!0),t.matrix&&i.matrix&&o(t.matrix.rows.root,i.matrix.rows.root,!1)}function a(e,t){0!==t.rows.length&&n(e.rows,t.rows,t.lastMergeIndex+1)}function r(e,t){if(e.categories&&t.categories)for(var i=t.categories.length,a=0;i>a;a++){var r=t.categories[a],o=e.categories[a];!o.values&&r.values&&(o.values=[]),r.values&&n(o.values,r.values,t.lastMergeIndex+1),!o.identity&&r.identity&&(o.identity=[]),r.identity&&n(o.identity,r.identity,t.lastMergeIndex+1)}if(e.values&&t.values)for(var s=t.values.length,l=0;s>l;l++){var u=t.values[l],c=e.values[l];!c.values&&u.values&&(c.values=[]),u.values&&n(c.values,u.values,t.lastMergeIndex+1),u.highlights&&n(c.highlights,u.highlights,t.lastMergeIndex+1)}}function n(e,t,i){if(i>=t.length)return t;var a=[];return void 0!==i&&(a=t.splice(0,i)),Array.prototype.push.apply(e,t),a}function o(e,t,i){if(t.children&&0!==t.children.length){if(i&&(!e.children||0===e.children.length))return void(e.children=t.children);var a=s(t.children),r=e.children[e.children.length-1],l=n(e.children,t.children,a);l.length>0&&o(r,l[l.length-1],i)}}function s(e){if(0===e.length)return 0;for(var t=0;t<e.length;t++){var i=e[t];if(!i.isMerge)break}return t}t.mergeDataViews=i,t.mergeTables=a,t.mergeCategorical=r,t.mergeTreeNodes=o}(i=t.DataViewMerger||(t.DataViewMerger={}))}(i=t.segmentation||(t.segmentation={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=jsCommon.ArrayExtensions,i=function(){function i(){}return i.prototype.visitColumnRef=function(t){var i=t.source,a=i.accept(this);return i===a?t:new e.SQColumnRefExpr(a,t.ref)},i.prototype.visitMeasureRef=function(t){var i=t.source,a=i.accept(this);return i===a?t:new e.SQMeasureRefExpr(a,t.ref)},i.prototype.visitAggr=function(t){var i=t.arg,a=i.accept(this);return i===a?t:new e.SQAggregationExpr(a,t.func)},i.prototype.visitHierarchy=function(t){var i=t.arg,a=i.accept(this);return i===a?t:new e.SQHierarchyExpr(a,t.hierarchy)},i.prototype.visitHierarchyLevel=function(t){var i=t.arg,a=i.accept(this);return i===a?t:new e.SQHierarchyLevelExpr(a,t.level)},i.prototype.visitPropertyVariationSource=function(t){var i=t.arg,a=i.accept(this);return i===a?t:new e.SQPropertyVariationSourceExpr(a,t.name,t.property)},i.prototype.visitEntity=function(e){return e},i.prototype.visitAnd=function(t){var i=t.left,a=i.accept(this),r=t.right,n=r.accept(this);return i===a&&r===n?t:new e.SQAndExpr(a,n)},i.prototype.visitBetween=function(t){var i=t.arg,a=i.accept(this),r=t.lower,n=r.accept(this),o=t.upper,s=o.accept(this);return i===a&&r===n&&o===s?t:new e.SQBetweenExpr(a,n,s)},i.prototype.visitIn=function(i){for(var a,r=i.args,n=this.rewriteAll(r),o=i.values,s=0,l=o.length;l>s;s++){var u=o[s],c=this.rewriteAll(u);u===c||a||(a=t.take(o,s)),a&&a.push(c)}return r!==n||a?new e.SQInExpr(n,a||o):i},i.prototype.rewriteAll=function(e){for(var i,a=0,r=e.length;r>a;a++){var n=e[a],o=n.accept(this);n===o||i||(i=t.take(e,a)),i&&i.push(o)}return i||e},i.prototype.visitOr=function(t){var i=t.left,a=i.accept(this),r=t.right,n=r.accept(this);return i===a&&r===n?t:new e.SQOrExpr(a,n)},i.prototype.visitCompare=function(t){var i=t.left,a=i.accept(this),r=t.right,n=r.accept(this);return i===a&&r===n?t:new e.SQCompareExpr(t.kind,a,n)},i.prototype.visitContains=function(t){var i=t.left,a=i.accept(this),r=t.right,n=r.accept(this);return i===a&&r===n?t:new e.SQContainsExpr(a,n)},i.prototype.visitExists=function(t){var i=t.arg,a=i.accept(this);return i===a?t:new e.SQExistsExpr(a)},i.prototype.visitNot=function(t){var i=t.arg,a=i.accept(this);return i===a?t:new e.SQNotExpr(a)},i.prototype.visitStartsWith=function(t){var i=t.left,a=i.accept(this),r=t.right,n=r.accept(this);return i===a&&r===n?t:new e.SQStartsWithExpr(a,n)},i.prototype.visitConstant=function(e){return e},i.prototype.visitDateSpan=function(t){var i=t.arg,a=i.accept(this);return i===a?t:new e.SQDateSpanExpr(t.unit,a)},i.prototype.visitDateAdd=function(t){var i=t.arg,a=i.accept(this);return i===a?t:new e.SQDateAddExpr(t.unit,t.amount,a)},i.prototype.visitNow=function(e){return e},i.prototype.visitDefaultValue=function(e){return e},i.prototype.visitAnyValue=function(e){return e},i}();e.SQExprRewriter=i}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function i(e){return e.accept(new a)}t.run=i;var a=function(t){function i(){t.call(this)}return __extends(i,t),i.prototype.visitCompare=function(t){if(t.kind!==e.QueryComparisonKind.Equal)return this.visitUnsupported(t);if(!this.isSupported(t.left)||!this.isSupported(t.right))return this.visitUnsupported(t);var i=this.isComparand(t.left),a=this.isComparand(t.right);if(i===a)return this.visitUnsupported(t);var r=i?t.left:t.right,n=i?t.right:t.left,o=this.current;return o?(o.add(r,n),t):e.SQExprBuilder.inExpr([r],[[n]])},i.prototype.visitOr=function(e){if(!this.isSupported(e.left)||!this.isSupported(e.right))return this.visitUnsupported(e);var t;return this.current||(t=this.current=new r),e.left.accept(this),e.right.accept(this),t?(this.current=null,t.complete()||e):e},i.prototype.visitAnd=function(e){if(!this.isSupported(e.left)||!this.isSupported(e.right))return this.visitUnsupported(e);var i=this.current;return i?(i.cancel(),e):t.prototype.visitAnd.call(this,e)},i.prototype.visitUnsupported=function(e){var t=this.current;return t&&t.cancel(),e},i.prototype.isSupported=function(t){return t instanceof e.SQCompareExpr||t instanceof e.SQColumnRefExpr||t instanceof e.SQConstantExpr||t instanceof e.SQHierarchyLevelExpr||t instanceof e.SQOrExpr||t instanceof e.SQAndExpr},i.prototype.isComparand=function(t){return t instanceof e.SQColumnRefExpr||t instanceof e.SQHierarchyLevelExpr},i}(e.SQExprRewriter),r=function(){function t(){}return t.prototype.add=function(t,i){if(!this.cancelled){if(this.operand&&!e.SQExpr.equals(t,this.operand))return void this.cancel();this.operand=t;var a=this.values;a||(a=this.values=[]),a.push(i)}},t.prototype.cancel=function(){this.cancelled=!0},t.prototype.complete=function(){return!this.cancelled&&this.operand?e.SQExprBuilder.inExpr([this.operand],_.map(this.values,function(e){return[e]})):void 0},t}()}(t=e.EqualsToInRewriter||(e.EqualsToInRewriter={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(e){function t(e,t){var i=e.conditions(),r=i[0];if(r){var n=new a(t);if(r.accept(n))return n.getResult()}}function i(e){var t=e.expr.accept(new r);return t?t.value:void 0}e.asScopeIdsContainer=t,e.getFirstComparandValue=i}(i=t.SQExprConverter||(t.SQExprConverter={}));var a=function(i){function a(e){i.call(this),this.isRoot=!0,this.isNot=!1,this.keyExprsCount=null,this.valueExprs=[],this.fieldExprs=[];for(var a=0;a<e.length;a++){var r=e[a];this.fieldExprs.push(t.SQExprBuilder.removeEntityVariables(r))}}return __extends(a,i),a.prototype.getResult=function(){for(var e=this.valueExprs,t=[],i=this.keyExprsCount||1,r=0,n=i,o=e.length;o>r&&o>=n;){var s=e.slice(r,n);t.push(a.getScopeIdentity(this.fieldExprs,s)),r+=i,n+=i}return{isNot:this.isNot,scopeIds:t}},a.getScopeIdentity=function(e,i){for(var a,r=0,n=e.length;n>r;r++){var o=t.SQExprBuilder.equal(e[r],i[r]);a=a?t.SQExprBuilder.and(a,o):o}return t.createDataViewScopeIdentity(a)},a.prototype.visitOr=function(e){return null!==this.keyExprsCount?this.unsupportedSQExpr():(this.isRoot=!1,e.left.accept(this)&&e.right.accept(this));
},a.prototype.visitNot=function(e){return this.isRoot?(this.isNot=!0,e.arg.accept(this)):this.unsupportedSQExpr()},a.prototype.visitConstant=function(t){return this.isRoot&&t.type.primitiveType===e.PrimitiveType.Null?this.unsupportedSQExpr():(this.valueExprs.push(t),!0)},a.prototype.visitCompare=function(e){return null!==this.keyExprsCount?this.unsupportedSQExpr():(this.isRoot=!1,e.kind!==t.QueryComparisonKind.Equal?this.unsupportedSQExpr():e.left.accept(this)&&e.right.accept(this))},a.prototype.visitIn=function(e){this.keyExprsCount=0;var t;this.isRoot=!1;for(var i=0,a=e.args;i<a.length;i++){var r=a[i];if(t=r.accept(this),!t)return this.unsupportedSQExpr();this.keyExprsCount++}if(this.keyExprsCount!==this.fieldExprs.length)return this.unsupportedSQExpr();for(var n=e.values,o=0;o<n.length;o++)for(var s=n[o],l=(s.length,0);l<s.length;l++){var u=s[l];if(t=u.accept(this),!t)return this.unsupportedSQExpr()}return t},a.prototype.visitColumnRef=function(e){if(this.isRoot)return this.unsupportedSQExpr();var i=t.SQExprBuilder.removeEntityVariables(e);return null!==this.keyExprsCount?t.SQExpr.equals(this.fieldExprs[this.keyExprsCount],i):t.SQExpr.equals(this.fieldExprs[0],i)},a.prototype.visitDefaultValue=function(e){return this.isRoot||null!==this.keyExprsCount?this.unsupportedSQExpr():(this.valueExprs.push(e),!0)},a.prototype.visitAnyValue=function(e){return this.isRoot||null!==this.keyExprsCount?this.unsupportedSQExpr():(this.valueExprs.push(e),!0)},a.prototype.visitDefault=function(e){return this.unsupportedSQExpr()},a.prototype.unsupportedSQExpr=function(){return!1},a}(t.DefaultSQExprVisitor),r=function(e){function i(){e.apply(this,arguments)}return __extends(i,e),i.prototype.visitAnd=function(e){return e.left.accept(this)||e.right.accept(this)},i.prototype.visitCompare=function(e){if(e.kind===t.QueryComparisonKind.Equal){if(e.right instanceof t.SQConstantExpr)return e.right;if(e.left instanceof t.SQConstantExpr)return e.left}},i}(t.DefaultSQExprVisitor)}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t,i=jsCommon.ArrayExtensions;!function(t){function a(e){var t=new n;return e.accept(t),t.malformed?null:i.emptyToNull(t.keys)}function r(t){var a=new n;if(t.accept(a),!a.malformed){var r=i.emptyToNull(a.keys),o=i.emptyToNull(a.values);return r&&o?e.SQExprBuilder.inExpr(r,[o]):void 0}}t.getKeys=a,t.getInExpr=r;var n=function(t){function i(){t.apply(this,arguments),this.keys=[],this.values=[]}return __extends(i,t),i.prototype.visitAnd=function(e){e.left.accept(this),e.right.accept(this)},i.prototype.visitCompare=function(t){return t.kind!==e.QueryComparisonKind.Equal?void this.visitDefault(t):(t.left.accept(this),void t.right.accept(this))},i.prototype.visitColumnRef=function(e){this.keys.push(e)},i.prototype.visitHierarchyLevel=function(e){this.keys.push(e)},i.prototype.visitConstant=function(e){this.values.push(e)},i.prototype.visitDefault=function(e){this.malformed=!0},i}(e.DefaultSQExprVisitor)}(t=e.ScopeIdentityExtractor||(e.ScopeIdentityExtractor={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e){return e+"M"}function i(e){return e+"D"}function a(e){return e+"L"}function r(e){var t=new Date(e.getTime()-6e4*e.getTimezoneOffset()),i=t.toISOString();return jsCommon.StringExtensions.endsWith(i,"Z")&&(i=i.substr(0,i.length-1)),"datetime'"+i+"'"}function n(e){return"'"+e.replace(l,"''")+"'"}function o(){return"null"}function s(e){return e?"true":"false"}var l=/'/g;e.decimal=t,e["double"]=i,e.integer=a,e.dateTime=r,e.text=n,e.nullEncoding=o,e["boolean"]=s}(t=e.PrimitiveValueEncoding||(e.PrimitiveValueEncoding={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function i(t,i){for(var r=[],n=0,o=t.length;o>n;n++){var s=t[n];i&&s instanceof e.SQHierarchyLevelExpr?a(r,s,n):r.push({expr:s,children:null,selectQueryIndex:n})}return r}function a(t,i,a){var n=!0,o=e.SQExprUtils.getSourceVariationExpr(i)||e.SQExprUtils.getSourceHierarchy(i),s=_.last(t);s&&s.children&&e.SQExpr.equals(s.expr,o)&&!r(s,i)&&(n=!1),n?t.push({expr:o,children:[i],selectQueryIndex:a}):s.children.push(i)}function r(t,i){return t&&t.children&&i?!_.isEmpty(_.find(t.children,function(t){return e.SQExpr.equals(t,i)})):!1}t.groupExprs=i}(t=e.SQExprGroupUtils||(e.SQExprGroupUtils={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(e){return e.integer||e.numeric?t.QueryAggregateFunction.Sum:t.QueryAggregateFunction.Count}function a(e){switch(e){case 6:return t.QueryAggregateFunction.Avg;case 3:return t.QueryAggregateFunction.CountNonNull;case 7:return t.QueryAggregateFunction.Count;case 5:return t.QueryAggregateFunction.Max;case 4:return t.QueryAggregateFunction.Min;case 2:return t.QueryAggregateFunction.Sum;default:return}}var r=jsCommon.StringExtensions,n=function(){function r(){}return r.equals=function(e,t,i){return A.run(e,t,i)},r.prototype.validate=function(e,t){var i=new I(e,t);return this.accept(i),i.errors},r.prototype.accept=function(e,t){},r.prototype.getMetadata=function(e){var i=t.SQExprConverter.asFieldPattern(this);return i?i.column||i.columnAggr||i.measure?this.getMetadataForProperty(i,e):i.hierarchyLevel?this.getMetadataForHierarchyLevel(i,e):i.columnHierarchyLevelVariation?this.getMetadataForVariation(i,e):r.getMetadataForEntity(i,e):void 0},r.prototype.getDefaultAggregate=function(e,r){void 0===r&&(r=!1);var n=this.getConceptualProperty(e);if(n){var o;if(n&&0===n.kind){var s=n.column?n.column.defaultAggregate:null;(n.type.integer||n.type.numeric)&&1!==s&&(o=a(s),void 0===o&&(o=i(n.type))),void 0===o&&r&&(o=t.QueryAggregateFunction.CountNonNull)}return o}},r.prototype.getKeyColumns=function(e){var t=O.getColumnRefSQExpr(e,this);if(t){var i=[],a=this.getPropertyKeys(e);if(a&&a.length>0)for(var r=0,n=a.length;n>r;r++)i.push(V.columnRef(t.source,a[r].name));else i.push(t);return i}},r.prototype.hasGroupOnKeys=function(e){var t=O.getColumnRefSQExpr(e,this);if(t){var i=this.getPropertyKeys(e);if(!i||i.length<1)return!1;if(i.length>1)return!0;var a=V.columnRef(t.source,i[0].name);return!r.equals(a,this)}},r.prototype.getPropertyKeys=function(e){var t=this.getConceptualProperty(e)||this.getHierarchyLevelConceptualProperty(e);return t&&t.column?t.column.keys:void 0},r.prototype.getConceptualProperty=function(e){var i=t.SQExprConverter.asFieldPattern(this);if(i){var a=t.FieldExprPattern.toFieldExprEntityItemPattern(i),r=t.FieldExprPattern.getPropertyName(i);return r?e.schema(a.schema).findProperty(a.entity,r):void 0}},r.prototype.getTargetEntityForVariation=function(e,t){var i=this.getConceptualProperty(e);if(i&&i.column&&!_.isEmpty(i.column.variations))for(var a=i.column.variations,r=0;r<a.length;r++){var n=a[r];if(n.name===t)return n.navigationProperty.targetEntity.name}},r.prototype.getHierarchyLevelConceptualProperty=function(e){var i=t.SQExprConverter.asFieldPattern(this);if(i&&i.hierarchyLevel){var a=t.FieldExprPattern.toFieldExprEntityItemPattern(i),r=e.schema(a.schema).findHierarchy(a.entity,i.hierarchyLevel.name);if(r){var n=r.levels.withName(i.hierarchyLevel.level);return n.column}}},r.prototype.getMetadataForVariation=function(e,i){var a=e.columnHierarchyLevelVariation,r=t.FieldExprPattern.toFieldExprEntityItemPattern(e),n=i.schema(r.schema).findProperty(r.entity,a.source.name);if(n&&n.column&&n.column.variations)for(var o=0,s=n.column.variations;o<s.length;o++){var l=s[o];if(l.defaultHierarchy&&l.defaultHierarchy.levels)for(var u=0,c=l.defaultHierarchy.levels;u<c.length;u++){var h=c[u];if(h.name===a.level.level){var p=h.column;return{kind:1===p.kind?1:0,type:p.type,format:p.format,idOnEntityKey:p.column?p.column.idOnEntityKey:!1,defaultAggregate:p.column?p.column.defaultAggregate:null}}}}},r.prototype.getMetadataForHierarchyLevel=function(e,t){var i=this.getHierarchyLevelConceptualProperty(t);return i?this.getPropertyMetadata(e,i):void 0},r.prototype.getPropertyMetadata=function(i,a){var r=a.format,n=a.type,o=i.columnAggr;if(o)switch(o.aggregate){case t.QueryAggregateFunction.Count:case t.QueryAggregateFunction.CountNonNull:n=e.ValueType.fromExtendedType(e.ExtendedType.Integer),r=void 0;break;case t.QueryAggregateFunction.Avg:n.integer&&(n=e.ValueType.fromExtendedType(e.ExtendedType.Double))}return{kind:1===a.kind||o&&void 0!==o.aggregate?1:0,type:n,format:r,idOnEntityKey:a.column?a.column.idOnEntityKey:!1,aggregate:o?o.aggregate:void 0,defaultAggregate:a.column?a.column.defaultAggregate:null}},r.prototype.getMetadataForProperty=function(e,t){var i=this.getConceptualProperty(t);return i?this.getPropertyMetadata(e,i):void 0},r.getMetadataForEntity=function(i,a){var r=t.FieldExprPattern.toFieldExprEntityItemPattern(i),n=a.schema(r.schema).entities.withName(r.entity);if(n&&i.entityAggr)switch(i.entityAggr.aggregate){case t.QueryAggregateFunction.Count:case t.QueryAggregateFunction.CountNonNull:return{kind:1,type:e.ValueType.fromExtendedType(e.ExtendedType.Integer),format:void 0,idOnEntityKey:!1,aggregate:i.entityAggr.aggregate}}},r}();t.SQExpr=n,t.defaultAggregateForDataType=i,t.defaultAggregateToQueryAggregateFunction=a;var o=function(e){function t(t,i,a){e.call(this),this.schema=t,this.entity=i,a&&(this.variable=a)}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitEntity(this,t)},t}(n);t.SQEntityExpr=o;var s=function(e){function t(t,i){e.call(this),this.source=t,this.ref=i}return __extends(t,e),t}(n);t.SQPropRefExpr=s;var l=function(e){function t(t,i){e.call(this,t,i)}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitColumnRef(this,t)},t}(s);t.SQColumnRefExpr=l;var u=function(e){function t(t,i){e.call(this,t,i)}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitMeasureRef(this,t)},t}(s);t.SQMeasureRefExpr=u;var c=function(e){function t(t,i){e.call(this),this.arg=t,this.func=i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitAggr(this,t)},t}(n);t.SQAggregationExpr=c;var h=function(e){function t(t,i,a){e.call(this),this.arg=t,this.name=i,this.property=a}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitPropertyVariationSource(this,t)},t}(n);t.SQPropertyVariationSourceExpr=h;var p=function(e){function t(t,i){e.call(this),this.arg=t,this.hierarchy=i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitHierarchy(this,t)},t}(n);t.SQHierarchyExpr=p;var d=function(e){function t(t,i){e.call(this),this.arg=t,this.level=i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitHierarchyLevel(this,t)},t}(n);t.SQHierarchyLevelExpr=d;var g=function(e){function t(t,i){e.call(this),this.left=t,this.right=i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitAnd(this,t)},t}(n);t.SQAndExpr=g;var m=function(e){function t(t,i,a){e.call(this),this.arg=t,this.lower=i,this.upper=a}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitBetween(this,t)},t}(n);t.SQBetweenExpr=m;var f=function(e){function t(t,i){e.call(this),this.args=t,this.values=i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitIn(this,t)},t}(n);t.SQInExpr=f;var y=function(e){function t(t,i){e.call(this),this.left=t,this.right=i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitOr(this,t)},t}(n);t.SQOrExpr=y;var v=function(e){function t(t,i,a){e.call(this),this.kind=t,this.left=i,this.right=a}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitCompare(this,t)},t}(n);t.SQCompareExpr=v;var b=function(e){function t(t,i){e.call(this),this.left=t,this.right=i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitContains(this,t)},t}(n);t.SQContainsExpr=b;var C=function(e){function t(t,i){e.call(this),this.left=t,this.right=i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitStartsWith(this,t)},t}(n);t.SQStartsWithExpr=C;var x=function(e){function t(t){e.call(this),this.arg=t}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitExists(this,t)},t}(n);t.SQExistsExpr=x;var S=function(e){function t(t){e.call(this),this.arg=t}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitNot(this,t)},t}(n);t.SQNotExpr=S;var w=function(e){function t(t,i,a){e.call(this),this.type=t,this.value=i,this.valueEncoded=a}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitConstant(this,t)},t.prototype.getMetadata=function(e){return{kind:1,type:this.type}},t}(n);t.SQConstantExpr=w;var D=function(e){function t(t,i){e.call(this),this.unit=t,this.arg=i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitDateSpan(this,t)},t}(n);t.SQDateSpanExpr=D;var P=function(e){function t(t,i,a){e.call(this),this.unit=t,this.arg=a,this.amount=i}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitDateAdd(this,t)},t}(n);t.SQDateAddExpr=P;var L=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitNow(this,t)},t}(n);t.SQNowExpr=L;var N=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitDefaultValue(this,t)},t}(n);t.SQDefaultValueExpr=N;var T=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.accept=function(e,t){return e.visitAnyValue(this,t)},t}(n);t.SQAnyValueExpr=T;var V;!function(i){function a(e,t,i){return new o(e,t,i)}function r(e,t){return new l(e,t)}function s(e,t){return new u(e,t)}function _(e,t){return new c(e,t)}function V(e,t){return new p(e,t)}function M(e,t,i){return new h(e,t,i)}function A(e,t){return new d(e,t)}function R(e,t){return e?t?new g(e,t):e:t}function I(e,t,i){return new m(e,t,i)}function F(e,t){return new f(e,t)}function E(e,t){if(!e)return t;if(!t)return e;if(e instanceof f&&t instanceof f){var i=O(e,t);if(i)return i}return new y(e,t)}function O(e,t){if(e.args&&t.args){var a=e.args.length,r=t.args.length;if(a===r){for(var o=0;a>o;++o)if(!n.equals(e.args[o],t.args[o]))return;var s=e.values.concat(t.values);return i.inExpr(e.args,s)}}}function k(e,t,i){return new v(e,t,i)}function B(e,t){return new b(e,t)}function W(e){return new x(e)}function U(e,i){return k(t.QueryComparisonKind.Equal,e,i)}function j(e){return new S(e)}function q(e,t){return new C(e,t)}function K(){return new w(e.ValueType.fromExtendedType(e.ExtendedType.Null),null,t.PrimitiveValueEncoding.nullEncoding())}function Q(){return new L}function Y(){return new N}function X(){return new T}function $(i){return new w(e.ValueType.fromExtendedType(e.ExtendedType.Boolean),i,t.PrimitiveValueEncoding["boolean"](i))}function Z(e,t,i){return new P(e,t,i)}function J(i,a){return void 0===a&&(a=t.PrimitiveValueEncoding.dateTime(i)),new w(e.ValueType.fromExtendedType(e.ExtendedType.DateTime),i,a)}function ee(e,t){return new D(e,t)}function te(i,a){return void 0===a&&(a=t.PrimitiveValueEncoding.decimal(i)),new w(e.ValueType.fromExtendedType(e.ExtendedType.Decimal),i,a)}function ie(i,a){return void 0===a&&(a=t.PrimitiveValueEncoding["double"](i)),new w(e.ValueType.fromExtendedType(e.ExtendedType.Double),i,a)}function ae(i,a){return void 0===a&&(a=t.PrimitiveValueEncoding.integer(i)),new w(e.ValueType.fromExtendedType(e.ExtendedType.Integer),i,a)}function re(i,a){return new w(e.ValueType.fromExtendedType(e.ExtendedType.Text),i,a||t.PrimitiveValueEncoding.text(i))}function ne(e,t){return G.rewrite(e,t)}function oe(e){return H.rewrite(e)}function se(e){return z.rewrite(e)}function le(e,a,r,n){var o;return o=null!=n&&t.SQExprUtils.isSupportedAggregate(e,a,n)?n:e.getDefaultAggregate(a,r),void 0!==o&&(e=i.aggregate(e,o)),e}i.entity=a,i.columnRef=r,i.measureRef=s,i.aggregate=_,i.hierarchy=V,i.propertyVariationSource=M,i.hierarchyLevel=A,i.and=R,i.between=I,i.inExpr=F,i.or=E,i.compare=k,i.contains=B,i.exists=W,i.equal=U,i.not=j,i.startsWith=q,i.nullConstant=K,i.now=Q,i.defaultValue=Y,i.anyValue=X,i["boolean"]=$,i.dateAdd=Z,i.dateTime=J,i.dateSpan=ee,i.decimal=te,i["double"]=ie,i.integer=ae,i.text=re,i.setAggregate=ne,i.removeAggregate=oe,i.removeEntityVariables=se,i.createExprWithAggregate=le}(V=t.SQExprBuilder||(t.SQExprBuilder={}));var M;!function(e){function t(e){return E.getAggregate(e)}e.getAggregate=t}(M=t.SQExprInfo||(t.SQExprInfo={}));var A=function(){function e(e){this.ignoreCase=e}return e.run=function(t,i,a){return t=t||null,i=i||null,t===i?!0:!t!=!i?!1:a?t.accept(e.ignoreCaseInstance,i):t.accept(e.instance,i)},e.prototype.visitColumnRef=function(e,t){return t instanceof l&&e.ref===t.ref&&this.equals(e.source,t.source)},e.prototype.visitMeasureRef=function(e,t){return t instanceof u&&e.ref===t.ref&&this.equals(e.source,t.source)},e.prototype.visitAggr=function(e,t){return t instanceof c&&e.func===t.func&&this.equals(e.arg,t.arg)},e.prototype.visitHierarchy=function(e,t){return t instanceof p&&e.hierarchy===t.hierarchy&&this.equals(e.arg,t.arg)},e.prototype.visitHierarchyLevel=function(e,t){return t instanceof d&&e.level===t.level&&this.equals(e.arg,t.arg)},e.prototype.visitPropertyVariationSource=function(e,t){return t instanceof h&&e.name===t.name&&e.property===t.property&&this.equals(e.arg,t.arg)},e.prototype.visitBetween=function(e,t){return t instanceof m&&this.equals(e.arg,t.arg)&&this.equals(e.lower,t.lower)&&this.equals(e.upper,t.upper)},e.prototype.visitIn=function(e,t){if(!(t instanceof f&&this.equalsAll(e.args,t.args)))return!1;var i=e.values,a=t.values;if(i.length!==a.length)return!1;for(var r=0,n=i.length;n>r;r++)if(!this.equalsAll(i[r],a[r]))return!1;return!0},e.prototype.visitEntity=function(e,t){return t instanceof o&&e.schema===t.schema&&e.entity===t.entity&&this.optionalEqual(e.variable,t.variable)},e.prototype.visitAnd=function(e,t){return t instanceof g&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitOr=function(e,t){return t instanceof y&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitCompare=function(e,t){return t instanceof v&&e.kind===t.kind&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitContains=function(e,t){return t instanceof b&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitDateSpan=function(e,t){return t instanceof D&&e.unit===t.unit&&this.equals(e.arg,t.arg)},e.prototype.visitDateAdd=function(e,t){return t instanceof P&&e.unit===t.unit&&e.amount===t.amount&&this.equals(e.arg,t.arg)},e.prototype.visitExists=function(e,t){return t instanceof x&&this.equals(e.arg,t.arg)},e.prototype.visitNot=function(e,t){return t instanceof S&&this.equals(e.arg,t.arg)},e.prototype.visitNow=function(e,t){return t instanceof L},e.prototype.visitDefaultValue=function(e,t){return t instanceof N},e.prototype.visitAnyValue=function(e,t){return t instanceof T},e.prototype.visitStartsWith=function(e,t){return t instanceof C&&this.equals(e.left,t.left)&&this.equals(e.right,t.right)},e.prototype.visitConstant=function(e,t){return t instanceof w&&e.type===t.type?e.type.text&&this.ignoreCase?r.equalIgnoreCase(e.valueEncoded,t.valueEncoded):e.valueEncoded===t.valueEncoded:!1},e.prototype.optionalEqual=function(e,t){return e&&t?e===t:!0},e.prototype.equals=function(e,t){return e.accept(this,t)},e.prototype.equalsAll=function(e,t){var i=e.length;if(i!==t.length)return!1;for(var a=0;i>a;a++)if(!this.equals(e[a],t[a]))return!1;return!0},e.instance=new e(!1),e.ignoreCaseInstance=new e(!0),e}(),R=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.visitDefault=function(e){return e},t}(t.DefaultSQExprVisitor),I=function(e){function i(t,i){e.call(this),this.schema=t,i&&(this.errors=i)}return __extends(i,e),i.prototype.visitIn=function(t){for(var i=e.prototype.visitIn.call(this,t),a=i.args,r=i.values,n=0;n<r.length;n++)for(var o=r[n],s=0,l=o.length;l>s;++s)this.validateCompatibleType(a[s],o[s]);return i},i.prototype.visitCompare=function(t){var i=e.prototype.visitCompare.call(this,t);return this.validateCompatibleType(i.left,i.right),i},i.prototype.visitColumnRef=function(e){var i=t.SQExprConverter.asFieldPattern(e);if(i){var a=t.FieldExprPattern.toFieldExprEntityItemPattern(i),r=this.validateEntity(a.schema,a.entity);if(r){var n=r.properties.withName(i.column.name);n&&0===n.kind&&this.isQueryable(i)||this.register(3)}}return e},i.prototype.visitMeasureRef=function(e){var i=t.SQExprConverter.asFieldPattern(e);if(i){var a=t.FieldExprPattern.toFieldExprEntityItemPattern(i),r=this.validateEntity(a.schema,a.entity);if(r){var n=r.properties.withName(i.measure.name);n&&1===n.kind&&this.isQueryable(i)||this.register(4)}}return e},i.prototype.visitAggr=function(i){var a=e.prototype.visitAggr.call(this,i),r=O.getColumnRefSQExpr(this.schema,a.arg);if(r){var n=t.SQExprUtils.getSupportedAggregates(r,this.schema);n.indexOf(i.func)<0&&this.register(0)}return a},i.prototype.visitEntity=function(e){return this.validateEntity(e.schema,e.entity),e},i.prototype.visitContains=function(e){var t=e.left,i=e.right;return t instanceof l?(this.visitColumnRef(t),i instanceof w&&i.type.text?this.validateCompatibleType(t,i):this.register(6)):this.register(5),e},i.prototype.visitStartsWith=function(e){var t=e.left,i=e.right;return t instanceof l?(this.visitColumnRef(t),i instanceof w&&i.type.text?this.validateCompatibleType(t,i):this.register(6)):this.register(5),e},i.prototype.validateCompatibleType=function(e,t){var i=e.getMetadata(this.schema),a=i&&i.type,r=t.getMetadata(this.schema),n=r&&r.type;a&&n&&!a.isCompatibleFrom(n)&&this.register(7)},i.prototype.validateEntity=function(e,t){var i=this.schema.schema(e);if(i){var a=i.entities.withName(t);if(a)return a;this.register(2)}else this.register(1)},i.prototype.register=function(e){this.errors||(this.errors=[]),this.errors.push(e)},i.prototype.isQueryable=function(e){var i=t.FieldExprPattern.toFieldExprEntityItemPattern(e);if(e.hierarchyLevel){var a=F.getConceptualHierarchyLevelFromExpr(this.schema,e);return a&&1!==a.column.queryable}return 1!==this.schema.schema(i.schema).findProperty(i.entity,t.FieldExprPattern.getPropertyName(e)).queryable},i}(t.SQExprRewriter);t.SQExprValidationVisitor=I;var F,E=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.visitAggr=function(e){return e.func},t.prototype.visitDefault=function(e){},t.getAggregate=function(e){var i=new t;return e.accept(i)},t}(t.DefaultSQExprVisitor);!function(e){function i(i,a){var r=t.FieldExprPattern.toFieldExprEntityItemPattern(a);return a.hierarchyLevel?e.getConceptualHierarchyLevel(i,r.schema,r.entity,a.hierarchyLevel.name,a.hierarchyLevel.level):void 0}function a(e,t,i,a,r){var n=e.schema(t),o=n.findHierarchy(i,a);return o?o.levels.withName(r):void 0}e.getConceptualHierarchyLevelFromExpr=i,e.getConceptualHierarchyLevel=a}(F||(F={}));var O=function(e){function t(t){e.call(this),this.schema=t}return __extends(t,e),t.prototype.visitColumnRef=function(e){return e},t.prototype.visitHierarchyLevel=function(e){var t=e.level,i=e.arg,a=i.accept(this);if(i&&i.arg instanceof h){var r=i.arg,n=a.getTargetEntityForVariation(this.schema,r.name);if(a&&n){var o=a.source.schema,s=V.entity(o,n),u=this.schema.schema(o).findHierarchy(n,i.hierarchy);if(u)for(var c=0,p=u.levels;c<p.length;c++){var d=p[c];if(d.name===t)return new l(s,d.column.name)}}}else{var g=i.arg,m=F.getConceptualHierarchyLevel(this.schema,g.schema,g.entity,i.hierarchy,e.level);if(m)return new l(i.arg,m.column.name)}},t.prototype.visitHierarchy=function(e){return e.arg.accept(this)},t.prototype.visitPropertyVariationSource=function(e){var t=e.property;return new l(e.arg,t)},t.prototype.visitDefault=function(e){},t.getColumnRefSQExpr=function(e,i){var a=new t(e);return i.accept(a)},t}(t.DefaultSQExprVisitor),G=function(e){function t(t){e.call(this),this.func=t}return __extends(t,e),t.prototype.visitAggr=function(e){return e.func===this.func?e:new c(e.arg,this.func)},t.prototype.visitColumnRef=function(e){return new c(e,this.func)},t.rewrite=function(e,i){var a=new t(i);return e.accept(a)},t}(R),H=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.visitAggr=function(e){return e.arg},t.rewrite=function(e){return e.accept(t.instance)},t.instance=new t,t}(R),z=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.visitEntity=function(e){return e.variable?V.entity(e.schema,e.entity):e},t.rewrite=function(e){return e.accept(t.instance)},t.instance=new t,t}(t.SQExprRewriter)}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t,i=jsCommon.StringExtensions;!function(t){function o(t,i){var a=[],r=D(t,i);if(!r)return a;var n=r.type,o=r.kind,s=r.idOnEntityKey,l=e.QueryAggregateFunction;if(!n)return a;if(1===o)return a;if(n.numeric||n.integer){var u=[l.Sum,l.Avg,l.Min,l.Max,l.Count,l.CountNonNull,l.StandardDeviation,l.Variance],c=e.SQExprConverter.asFieldPattern(t),h=e.FieldExprPattern.toFieldExprEntityItemPattern(c),p=i.schema(h.schema);return p.capabilities.supportsMedian&&u.push(l.Median),u}return n.text||n.bool||n.dateTime?s?[l.CountNonNull]:[l.Count,l.CountNonNull]:a}function s(e,t,i){var a=o(e,t);return _.contains(a,i)}function l(t,i){for(var a=0,r=t.length;r>a;a++)if(e.SQExpr.equals(t[a],i))return a;return-1}function u(t,i){var a=t.length;if(a!==i.length)return!1;for(var r=0;a>r;r++)if(!e.SQExpr.equals(t[r],i[r]))return!1;return!0}function c(e,t){for(var a={},r=0,n=e.length;n>r;r++)a[e[r].name]=!0;return i.findUniqueName(a,h(t))}function h(e,t){return void 0===t&&(t="select"),e?e.accept(M.instance,t):t}function p(e){return e.accept(A.instance)}function d(e){return e.accept(I.instance)}function g(e){return e.accept(R.instance)}function m(e,t){var i=f(e,t);return i&&i.discourageQueryAggregateUsage}function f(t,i){var a=e.SQExprConverter.asFieldPattern(t);if(a){var r=e.FieldExprPattern.toFieldExprEntityItemPattern(a),n=i.schema(r.schema);return n?n.capabilities:void 0}}function y(t,i){var a=w(t,i);if(a){var r=e.SQExprConverter.asFieldPattern(t).measure;if(r)return e.SQExprBuilder.fieldExpr({measure:{schema:r.schema,entity:r.entity,name:a.name}})}}function v(e,t){var i=e.getConceptualProperty(t);if(i){if(i.measure&&i.measure.kpi)return i.measure.kpi.statusMetadata;var a=w(e,t);return a?a.kpi.measure.kpi.statusMetadata:void 0}}function b(t,i){if(t instanceof e.SQHierarchyExpr){var a=t;if(t.arg instanceof e.SQEntityExpr){var r=t.arg;return i.schema(r.schema).findHierarchy(r.entity,a.hierarchy)}if(t.arg instanceof e.SQPropertyVariationSourceExpr){var n=t.arg,o=n.arg;return i.schema(o.schema).findHierarchyByVariation(o.entity,n.property,n.name,a.hierarchy)}}}function C(e,t){return a.convert(t,e)||n.expand(t,e)||r.expand(t,e)||t}function x(t){var i=e.SQExprConverter.asFieldPattern(t);if(i.columnHierarchyLevelVariation){var a=e.SQExprBuilder.entity(i.columnHierarchyLevelVariation.source.schema,i.columnHierarchyLevelVariation.source.entity);return e.SQExprBuilder.columnRef(a,i.columnHierarchyLevelVariation.source.name)}}function S(t){var i=e.SQExprConverter.asFieldPattern(t),a=i.hierarchyLevel;if(a){var r=e.SQExprBuilder.entity(a.schema,a.entity,a.entityVar);return e.SQExprBuilder.hierarchy(r,a.name)}}function w(e,t){var i=e.getConceptualProperty(t);if(i){var a=i.kpi;return a&&a.measure.kpi.status===i?i:void 0}}function D(t,i){var a=e.SQExprBuilder.removeAggregate(t).getMetadata(i);return a||(a=t.getMetadata(i)),a}function P(t,i){if(t&&i){var a=e.SQExprConverter.asFieldPattern(t),r=a.column;if(r){if(i.schema(r.schema)&&a.column.name){var n=i.schema(r.schema).findProperty(r.entity,a.column.name);if(n&&n.column)return n.column.defaultValue}}else{var o=a.hierarchyLevel;if(o){var s=e.FieldExprPattern.toFieldExprEntityItemPattern(a),l=s.schema;if(i.schema(l)){var u=i.schema(l).findHierarchy(s.entity,o.name);if(u){var c=u.levels.withName(o.level);if(c&&c.column&&c.column.column)return c.column.column.defaultValue}}}}}}function L(e,t){if(!_.isEmpty(e)&&t){for(var i=[],a=0;a<e.length;a++){var r=e[a],n=P(r,t);n&&i.push(n)}return i}}function N(t,i){for(var a=[],r=0;r<t.length;r++)a.push(e.SQExprBuilder.compare(e.QueryComparisonKind.Equal,t[r],i[r]));if(!_.isEmpty(a)){for(var n,o=0;o<a.length;o++){var s=a[o];n=e.SQExprBuilder.and(n,s)}return n}}function T(t){if(t.arg instanceof e.SQHierarchyExpr){var i=t.arg;return i.arg instanceof e.SQPropertyVariationSourceExpr?i.arg:void 0}}function V(e){var t=[];if(e){var i=e.from();if(void 0!==i)for(var a=0,r=i.keys();a<r.length;a++){var n=r[a],o=i.entity(n);t.indexOf(o.entity)<0&&t.push(o.entity)}}return t}t.getSupportedAggregates=o,t.isSupportedAggregate=s,t.indexOfExpr=l,t.sequenceEqual=u,t.uniqueName=c,t.defaultName=h,t.isMeasure=p,t.isAnyValue=d,t.isDefaultValue=g,t.discourageAggregation=m,t.getSchemaCapabilities=f,t.getKpiStatus=y,t.getKpiMetadata=v,t.getConceptualHierarchy=b,t.expandExpr=C,t.getSourceVariationExpr=x,t.getSourceHierarchy=S,t.getDefaultValue=P,t.getDefaultValues=L,t.getDataViewScopeIdentityComparisonExpr=N,t.getHierarchySourceAsVariationSource=T,t.getActiveTablesNames=V;var M=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.visitEntity=function(e){return e.entity},i.prototype.visitColumnRef=function(e){return e.source.accept(this)+"."+e.ref},i.prototype.visitMeasureRef=function(e,t){return e.source.accept(this)+"."+e.ref},i.prototype.visitAggr=function(t,i){return e.QueryAggregateFunction[t.func]+"("+t.arg.accept(this)+")"},i.prototype.visitDefault=function(e,t){return t||"expr"},i.instance=new i,i}(e.DefaultSQExprVisitorWithArg),A=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.visitMeasureRef=function(e){return!0},t.prototype.visitAggr=function(e){return!0},t.prototype.visitDefault=function(e){return!1},t.instance=new t,t}(e.DefaultSQExprVisitor),R=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.visitCompare=function(t){return t.kind!==e.QueryComparisonKind.Equal?!1:t.right.accept(this)},i.prototype.visitAnd=function(e){return e.left.accept(this)&&e.right.accept(this)},i.prototype.visitDefaultValue=function(e){return!0},i.prototype.visitDefault=function(e){return!1},i.instance=new i,i}(e.DefaultSQExprVisitor),I=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.visitCompare=function(t){return t.kind!==e.QueryComparisonKind.Equal?!1:t.right.accept(this)},i.prototype.visitAnd=function(e){return e.left.accept(this)&&e.right.accept(this)},i.prototype.visitAnyValue=function(e){return!0},i.prototype.visitDefault=function(e){return!1},i.instance=new i,i}(e.DefaultSQExprVisitor)}(t=e.SQExprUtils||(e.SQExprUtils={}));var a;!function(i){function a(i,a){if(i instanceof e.SQHierarchyExpr){var r=i,n=t.getConceptualHierarchy(r,a);if(n)return _.map(n.levels,function(t){return e.SQExprBuilder.hierarchyLevel(i,t.name)})}}i.convert=a}(a=e.SQExprHierarchyToHierarchyLevelConverter||(e.SQExprHierarchyToHierarchyLevelConverter={}));var r;!function(t){function i(t,i){var a=[];if(t instanceof e.SQHierarchyLevelExpr){var r=e.SQExprConverter.asFieldPattern(t);if(r.hierarchyLevel){var n=e.FieldExprPattern.toFieldExprEntityItemPattern(r),o=i.schema(n.schema).findHierarchy(n.entity,r.hierarchyLevel.name);if(o)for(var s=o.levels,l=0;l<s.length;l++){var u=s[l];if(u.name===r.hierarchyLevel.level){a.push(t);break}a.push(e.SQExprBuilder.hierarchyLevel(e.SQExprBuilder.hierarchy(e.SQExprBuilder.entity(n.schema,n.entity,n.entityVar),o.name),u.name))}}}return _.isEmpty(a)?void 0:a}t.expand=i}(r||(r={}));var n;!function(t){function i(t,i){var a,r=t.getConceptualProperty(i);if(r){var n=r.column;if(n&&n.variations&&n.variations.length>0){var o=n.variations,s=o[0],l=e.SQExprConverter.asFieldPattern(t),u=e.FieldExprPattern.toFieldExprEntityItemPattern(l);if(a=[],s.defaultHierarchy)for(var c=e.SQExprBuilder.hierarchy(e.SQExprBuilder.propertyVariationSource(e.SQExprBuilder.entity(u.schema,u.entity,u.entityVar),s.name,r.name),s.defaultHierarchy.name),h=0,p=s.defaultHierarchy.levels;h<p.length;h++){
var d=p[h];a.push(e.SQExprBuilder.hierarchyLevel(c,d.name))}}}return a}t.expand=i}(n||(n={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(e){this.exprRewriter=e}return t.prototype.rewriteFrom=function(t){for(var i={},a=t,r=a.keys(),n=0,o=r.length;o>n;n++){var s=r[n],l=a.entity(s),u=e.SQExprBuilder.entity(l.schema,l.entity,s),c=u.accept(this.exprRewriter);i[s]={schema:c.schema,entity:c.entity}}return new e.SQFrom(i)},t.prototype.rewriteSelect=function(t,i){for(var a=[],r=0,n=t.length;n>r;r++){var o=t[r];a.push({name:o.name,expr:e.SQExprRewriterWithSourceRenames.rewrite(o.expr.accept(this.exprRewriter),i)})}return a},t.prototype.rewriteOrderBy=function(t,i){if(!_.isEmpty(t)){for(var a=[],r=0,n=t.length;n>r;r++){var o=t[r],s=e.SQExprRewriterWithSourceRenames.rewrite(o.expr.accept(this.exprRewriter),i);a.push({direction:o.direction,expr:s})}return a}},t.prototype.rewriteWhere=function(t,i){var a=this;if(!_.isEmpty(t)){for(var r=[],n=0,o=t.length;o>n;n++){var s=t[n],l={condition:e.SQExprRewriterWithSourceRenames.rewrite(s.condition.accept(this.exprRewriter),i)};s.target&&(l.target=_.map(s.target,function(t){return e.SQExprRewriterWithSourceRenames.rewrite(t.accept(a.exprRewriter),i)})),r.push(l)}return r}},t}();e.SemanticQueryRewriter=t}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=jsCommon.ArrayExtensions,i=function(){function i(e,t,i,a){this.fromValue=e,this.whereItems=t,this.orderByItems=i,this.selectItems=a}return i.create=function(){return i.empty||(i.empty=new i(new r,null,null,[])),i.empty},i.createWithTrimmedFrom=function(e,t,a,r){var n=new s(e.keys());if(t)for(var o=0,l=t.length;l>o;o++){var u=t[o];u.condition.accept(n);var c=u.target;if(c)for(var h=0,p=c.length;p>h;h++)c[h]&&c[h].accept(n)}if(a)for(var o=0,l=a.length;l>o;o++)a[o].expr.accept(n);for(var o=0,l=r.length;l>o;o++)r[o].expr.accept(n);for(var d=n.result(),o=0,l=d.length;l>o;o++)e.remove(d[o]);return new i(e,t,a,r)},i.prototype.from=function(){return this.fromValue.clone()},i.prototype.select=function(e){return 0===arguments.length?this.getSelect():this.setSelect(e)},i.prototype.getSelect=function(){return t.extendWithName(_.map(this.selectItems,function(e){return{name:e.name,expr:e.expr}}))},i.prototype.setSelect=function(e){for(var t=[],a=this.fromValue.clone(),r=0,o=e.length;o>r;r++){var s=e[r];t.push({name:s.name,expr:n.rewrite(s.expr,a)})}return i.createWithTrimmedFrom(a,this.whereItems,this.orderByItems,t)},i.prototype.removeSelect=function(t){for(var a=this.selectItems,r=[],n=0,o=a.length;o>n;n++){var s=a[n];e.SQExpr.equals(s.expr,t)||r.push(s)}return i.createWithTrimmedFrom(this.fromValue.clone(),this.whereItems,this.orderByItems,r)},i.prototype.removeOrderBy=function(t){for(var a=this.orderBy(),r=a.length-1;r>=0;r--)e.SQExpr.equals(a[r].expr,t)&&a.splice(r,1);return i.createWithTrimmedFrom(this.fromValue.clone(),this.whereItems,a,this.selectItems)},i.prototype.selectNameOf=function(t){var i=e.SQExprUtils.indexOfExpr(_.map(this.selectItems,function(e){return e.expr}),t);return i>=0?this.selectItems[i].name:void 0},i.prototype.setSelectAt=function(e,t){if(!(e>=this.selectItems.length)){var a=this.select(),r=this.fromValue.clone(),o=a[e].name;return a[e]={name:o,expr:n.rewrite(t,r)},i.createWithTrimmedFrom(r,this.whereItems,this.orderByItems,a)}},i.prototype.addSelect=function(t){var a=this.select(),r=this.fromValue.clone();return a.push({name:e.SQExprUtils.uniqueName(a,t),expr:n.rewrite(t,r)}),i.createWithTrimmedFrom(r,this.whereItems,this.orderByItems,a)},i.prototype.orderBy=function(e){return 0===arguments.length?this.getOrderBy():this.setOrderBy(e)},i.prototype.getOrderBy=function(){var e=[],t=this.orderByItems;if(t)for(var i=0,a=t.length;a>i;i++){var r=t[i];e.push({expr:r.expr,direction:r.direction})}return e},i.prototype.setOrderBy=function(e){for(var t=[],a=this.fromValue.clone(),r=0,o=e.length;o>r;r++){var s=e[r];t.push({expr:n.rewrite(s.expr,a),direction:s.direction})}return i.createWithTrimmedFrom(a,this.whereItems,t,this.selectItems)},i.prototype.where=function(e){return 0===arguments.length?this.getWhere():this.setWhere(e)},i.prototype.getWhere=function(){var e=[],t=this.whereItems;if(t)for(var i=0,a=t.length;a>i;i++)e.push(t[i]);return e},i.prototype.setWhere=function(e){for(var t=[],a=this.fromValue.clone(),r=0,o=e.length;o>r;r++){var s=e[r],l={condition:n.rewrite(s.condition,a)},u=s.target;if(u){l.target=[];for(var c=0,h=u.length;h>c;c++)if(u[c]){var p=n.rewrite(u[c],a);l.target.push(p)}}t.push(l)}return i.createWithTrimmedFrom(a,t,this.orderByItems,this.selectItems)},i.prototype.addWhere=function(e){for(var t=this.where(),a=e.where(),r=this.fromValue.clone(),o=0,s=a.length;s>o;o++){var l=a[o],u={condition:n.rewrite(l.condition,r)};l.target&&(u.target=_.map(l.target,function(e){return n.rewrite(e,r)})),t.push(u)}return i.createWithTrimmedFrom(r,t,this.orderByItems,this.selectItems)},i.prototype.rewrite=function(t){var a=new e.SemanticQueryRewriter(t),r=a.rewriteFrom(this.fromValue),n=a.rewriteWhere(this.whereItems,r),o=a.rewriteOrderBy(this.orderByItems,r),s=a.rewriteSelect(this.selectItems,r);return i.createWithTrimmedFrom(r,n,o,s)},i}();e.SemanticQuery=i;var a=function(){function i(e,t){this.fromValue=e,this.whereItems=t}return i.fromSQExpr=function(e){var t=new r,a=n.rewrite(e,t),o=[{condition:a}];return new i(t,o)},i.getDefaultValueFilter=function(t){return i.getDataViewScopeIdentityComparisonFilters(t,e.SQExprBuilder.defaultValue())},i.getAnyValueFilter=function(t){return i.getDataViewScopeIdentityComparisonFilters(t,e.SQExprBuilder.anyValue())},i.getDataViewScopeIdentityComparisonFilters=function(t,a){if(t instanceof Array){var r=Array.apply(null,Array(t.length)).map(function(){return a});return i.fromSQExpr(e.SQExprUtils.getDataViewScopeIdentityComparisonExpr(t,r))}return i.fromSQExpr(e.SQExprBuilder.equal(t,a))},i.prototype.from=function(){return this.fromValue.clone()},i.prototype.conditions=function(){for(var e=[],t=this.whereItems,i=0,a=t.length;a>i;i++){var r=t[i];e.push(r.condition)}return e},i.prototype.where=function(){for(var e=[],t=this.whereItems,i=0,a=t.length;a>i;i++)e.push(t[i]);return e},i.prototype.rewrite=function(t){var a=new e.SemanticQueryRewriter(t),r=a.rewriteFrom(this.fromValue),n=a.rewriteWhere(this.whereItems,r);return new i(r,n)},i.prototype.validate=function(t,i){var a=new e.SQExprValidationVisitor(t,i);return this.rewrite(a),a.errors},i.merge=function(e){if(t.isUndefinedOrEmpty(e))return null;if(1===e.length)return e[0];for(var a=e[0],r=a.from(),n=t.take(a.whereItems,a.whereItems.length),o=1,s=e.length;s>o;o++)i.applyFilter(e[o],r,n);return new i(r,n)},i.isDefaultFilter=function(t){return t&&1===t.where().length?e.SQExprUtils.isDefaultValue(t.where()[0].condition):!1},i.isAnyFilter=function(t){return t&&1===t.where().length?e.SQExprUtils.isAnyValue(t.where()[0].condition):!1},i.isSameFilter=function(e,t){return jsCommon.JsonComparer.equals(e,t)?!(i.isDefaultFilter(e)&&i.isAnyFilter(t)||i.isAnyFilter(e)&&i.isDefaultFilter(t)):!1},i.applyFilter=function(e,t,i){for(var a=e.whereItems,r=0;r<a.length;r++){var o=a[r],s={condition:n.rewrite(o.condition,t)};o.target&&(s.target=_.map(o.target,function(e){return n.rewrite(e,t)})),i.push(s)}},i}();e.SemanticFilter=a;var r=function(){function e(e){this.items=e||{}}return e.prototype.keys=function(){return Object.keys(this.items)},e.prototype.entity=function(e){return this.items[e]},e.prototype.ensureEntity=function(e,t){for(var i=this.keys(),a=0,r=i.length;r>a;a++){var n=i[a],o=this.items[n];if(o&&e.entity===o.entity&&e.schema===o.schema)return{name:n}}for(var s=t||this.candidateName(e.entity),l=s,u=2;this.items[l];)l=s+u++;return this.items[l]=e,{name:l,"new":!0}},e.prototype.remove=function(e){delete this.items[e]},e.prototype.candidateName=function(e){var t=e.lastIndexOf(".");return t>=0&&t!==e.length-1&&(e=e.substr(t+1)),e.substring(0,1).toLowerCase()},e.prototype.clone=function(){var t=new e;return $.extend(t.items,this.items),t},e}();e.SQFrom=r;var n=function(i){function a(e){i.call(this),this.renames=e}return __extends(a,i),a.prototype.visitEntity=function(t){var a=this.renames[t.entity];return a?new e.SQEntityExpr(t.schema,t.entity,a):i.prototype.visitEntity.call(this,t)},a.prototype.rewriteFilter=function(e){var t=void 0;e.target&&(t=this.rewriteArray(e.target));var i=e.condition.accept(this);if(e.condition===i&&e.target===t)return e;var a={condition:i};return t&&(a.target=t),a},a.prototype.rewriteArray=function(e){for(var i,a=0,r=e.length;r>a;a++){var n=e[a],o=n.accept(this);n===o||i||(i=t.take(e,a)),i&&i.push(o)}return i||e},a.rewrite=function(e,t){var i=o.run(e,t),r=new a(i);return e.accept(r)},a}(e.SQExprRewriter);e.SQExprRewriterWithSourceRenames=n;var o=function(e){function t(t){e.call(this),this.from=t,this.renames={}}return __extends(t,e),t.run=function(e,i){var a=new t(i);return e.accept(a),a.renames},t.prototype.visitEntity=function(e){var t=this.from.entity(e.variable);if(!t||t.schema!==e.schema||t.entity!==e.entity){var i=this.from.ensureEntity({schema:e.schema,entity:e.entity},e.variable);this.renames[e.entity]=i.name}},t}(e.DefaultSQExprVisitorWithTraversal),s=function(e){function t(t){e.call(this),this.keys=t}return __extends(t,e),t.prototype.visitEntity=function(e){var t=this.keys.indexOf(e.variable);t>=0&&this.keys.splice(t,1)},t.prototype.result=function(){return this.keys},t}(e.DefaultSQExprVisitorWithTraversal)}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t,i=jsCommon.StringExtensions,a=jsCommon.Formatting;!function(e){function t(e,t){for(var a=t.length,r=0;a>r;r++){var n="\\"+t[r],o=String.fromCharCode(57344+r);e=i.replaceAll(e,n,o)}return e}function a(e,t){for(var a=t.length,r=0;a>r;r++){var n=String.fromCharCode(57344+r),o=t[r];e=i.replaceAll(e,n,o)}return i.replaceAll(e,"\\","")}function r(e,t){e=i.replaceAll(e,'"',"'");for(var a=0;;a++){var r=e.indexOf("'");if(0>r)break;var n=e.indexOf("'",r+1);if(0>n)break;var o=e.substring(r,n+1);t.push(o.substring(1,n-r));var s=String.fromCharCode(57600+a);e=e.replace(o,s)}return e}function n(e,t){for(var i=t.length,a=0;i>a;a++){var r=String.fromCharCode(57600+a),n=t[a];e=e.replace(r,n)}return e}e.preserveEscaped=t,e.restoreEscaped=a,e.preserveLiterals=r,e.restoreLiterals=n}(t||(t={}));var r,n=/({{)|(}})|{(\d+[^}]*)}/g,o=function(){function e(){}return e.prototype.formatValue=function(e,t,i){if(void 0===e||null===e)return"";var a=this.getCulture(i);return r.canFormat(e)?r.format(e,t,a):s.canFormat(e)?s.format(e,t,a):e.toString()},e.prototype.format=function(e,t,i){var a=this;if(!e)return"";var r=e.replace(n,function(e,r,n,o){if(r)return"{";if(n)return"}";var s=o.split(":"),l=parseInt(s[0],10),u=s[1];return a.formatValue(t[l],u,i)});return r},e.prototype.isStandardNumberFormat=function(e){return s.isStandardFormat(e)},e.prototype.formatNumberWithCustomOverride=function(e,t,i,a){var r=this.getCulture(a);return s.formatWithCustomOverride(e,t,i,r)},e.prototype.dateFormatString=function(e){return this._dateTimeScaleFormatInfo.getFormatString(e)},e.prototype.setCurrentCulture=function(e){this._currentCultureSelector!==e&&(this._currentCulture=this.getCulture(e),this._currentCultureSelector=e,this._dateTimeScaleFormatInfo=new l(this._currentCulture))},e.prototype.getCulture=function(e){if(null==e)return null==this._currentCulture&&this.initialize(),this._currentCulture;var t=Globalize.findClosestCulture(e);return t||(t=Globalize.culture("en-US")),t},e.prototype.initialize=function(){var e=this.getUrlParam("language")||window.cultureInfo||window.navigator.userLanguage||window.navigator.language||Globalize.culture().name;this.setCurrentCulture(e);var t=this.getUrlParam("calendar");if(t){var i=this._currentCulture,a=i.calendars[t];a&&(i.calendar=a)}},e.prototype.getUrlParam=function(e){var t=window.location.search.match(RegExp("[?&]"+e+"=([^&]*)"));return t?t[1]:void 0},e}();!function(e){function r(e){var t=e instanceof Date;return t}function n(e,t,i){t=t||"G";var a=1===t.length;try{return a?o(e,t,i):s(e,t,i)}catch(r){return o(e,"G",i)}}function o(e,t,i){var r=i.calendar.patterns;c(i.calendar);var n=a.findDateFormat(e,t,i.name);return t=1===n.format.length?r[n.format]:n.format,i=Globalize.culture("en-US"),Globalize.format(n.value,t,i)}function s(e,a,r){var n,o=[];if(a=t.preserveEscaped(a,"\\dfFghHKmstyz:/%'\""),a=t.preserveLiterals(a,o),a=i.replaceAll(a,'"',"'"),a.indexOf("F")>-1){a=i.replaceAll(a,"FFFF","FFF");var s=e.getMilliseconds();if(s%10>=1&&(a=i.replaceAll(a,"FFF","fff")),a=i.replaceAll(a,"FFF","FF"),s%100/10>=1&&(a=i.replaceAll(a,"FF","ff")),a=i.replaceAll(a,"FF","F"),s%1e3/100>=1&&(a=i.replaceAll(a,"F","f")),a=i.replaceAll(a,"F",""),""===a||"%"===a)return""}return a=l(a),n=Globalize.format(e,a,r),n=u(n,r.calendar),n=t.restoreLiterals(n,o),n=t.restoreEscaped(n,"\\dfFghHKmstyz:/%'\"")}function l(e){return e===h?p:(h=e,e=a.fixDateTimeFormat(e),p=e,e)}function u(e,t){var i=t[":"];if(":"===i)return e;for(var a="",r=e.length,n=0;r>n;n++){var o=e.charAt(n);switch(o){case":":a+=i;break;default:a+=o}}return a}function c(e){var t=e.patterns;void 0===t.g&&(t.g=t.f.replace(t.D,t.d),t.G=t.F.replace(t.D,t.d))}var h,p;e.canFormat=r,e.format=n}(r||(r={}));var s;!function(a){function r(e){var t={hasNegative:!1,positive:e,negative:e,zero:e},i=e.split(";"),a=i.length;return a>1&&(t.hasNegative=!0,t.positive=t.zero=i[0],t.negative=i[1],a>2&&(t.zero=i[2])),t}function n(e){var t="number"==typeof e;return t}function o(e){return x.test(e)}function s(e,t,i){t=t||"G";try{return o(t)?u(e,t,i):c(e,t,i)}catch(a){return Globalize.format(e,void 0,i)}}function l(e,t,i,a){return c(e,t,a,i)}function u(e,t,a){var r,n=t.length>1?parseInt(t.substr(1,t.length-1),10):void 0,o=a.numberFormat,s=t.charAt(0);switch(s){case"e":case"E":void 0===n&&(n=6);var l=i.repeat("0",n);t="0."+l+s+"+000",r=c(e,t,a);break;case"f":case"F":r=void 0!==n?e.toFixed(n):e.toFixed(o.decimals),r=v(r,o);break;case"g":case"G":var u=Math.abs(e);0===u||u>=1e-4&&1e15>u?r=void 0!==n?e.toPrecision(n):e.toString():(r=void 0!==n?e.toExponential(n):e.toExponential(),r=r.replace("e","E")),r=v(r,o);break;case"r":case"R":r=e.toString(),r=v(r,o);break;case"x":case"X":if(r=e.toString(16),"X"===s&&(r=r.toUpperCase()),void 0!==n){var h=r.length,p=0>e;p&&h--;var d=n-h,g=void 0;d>0&&(g=i.repeat("0",d)),r=p?"-"+g+r.substr(1):g+r}r=v(r,o);break;default:r=Globalize.format(e,t,a)}return r}function c(i,a,n,o){var s,l=n.numberFormat;if(!isFinite(i))return Globalize.format(i,void 0);var u=r(a);a=i>0?u.positive:0===i?u.zero:u.negative,u.hasNegative&&(i=Math.abs(i));var c=p(a,!0);c.hasEscapes&&(a=t.preserveEscaped(a,"\\0#.,%"));var f=[];if(c.hasQuotes&&(a=t.preserveLiterals(a,f)),c.hasE&&!o){var y=C.exec(a);if(y){var v=a.substr(0,y.index),b=a.substr(y.index+y[0].indexOf("0")),x=d(v,c),S=g(v,c);1!==S&&(i*=S);var D=i.toExponential(x),P=D.indexOf("e"),L=D.substr(0,P),_=D.substr(P+1),N=m(L,v,l),T=m(_,b,l);"+"===T.charAt(0)&&"+"!==y[0].charAt(1)&&(T=T.substr(1));var V=y[0].charAt(0);s=N+V+T}}if(void 0===s){var M,A=!1;if(o)M=e.formattingService.format(o,[i],n.name),A=!0;else{var x=d(a,c),S=g(a,c);1!==S&&(i*=S),M=h(i,x)}s=m(M,a,l,o,A)}return c.hasQuotes&&(s=t.restoreLiterals(s,f)),c.hasEscapes&&(s=t.restoreEscaped(s,"\\0#.,%")),w=c,s}function h(t,a){var r="",n=0;a>16&&(n=a-16,a=16);var o=e.Double.log10(Math.abs(t));if(16>o){if(o>0){var s=16-o;a>s&&(n+=a-s,a=s)}r=t.toFixed(a)}else if(16===o)r=t.toFixed(0),n+=a,n>0&&(r+=".");else{r=t.toExponential(15);var l=r.indexOf("e");if(l>0){var u=r.indexOf("."),c=r.substr(0,l),h=r.substr(l+1),p=parseInt(h,10)-(c.length-u-1);r=c.replace(".","")+i.repeat("0",p),a>0&&(r=r+"."+i.repeat("0",a))}}return n>0&&(r+=i.repeat("0",n)),r}function p(e,t,i){if(void 0!==w&&e===w.format)return w;for(var a={format:e,hasEscapes:!1,hasQuotes:!1,hasE:!1,hasCommas:!1,hasDots:!1,hasPercent:!1,hasPermile:!1,precision:-1,scale:-1},n=0,o=e.length;o>n;n++){var s=e.charAt(n);switch(s){case"\\":a.hasEscapes=!0;break;case"'":case'"':a.hasQuotes=!0;break;case"e":case"E":a.hasE=!0;break;case",":a.hasCommas=!0;break;case".":a.hasDots=!0;break;case"%":a.hasPercent=!0;break;case"":a.hasPermile=!0}}var l=r(e);return t&&(a.precision=d(l.positive,a)),i&&(a.scale=g(l.positive,a)),a}function d(e,t){if(t.precision>-1)return t.precision;var i=0;if(t.hasDots){var a=e.indexOf(".");if(a>-1){for(var r=e.length,n=a;r>n;n++){var o=e.charAt(n);("#"===o||"0"===o)&&i++}i=Math.min(19,i)}}return t.precision=i,i}function g(e,t){if(t.scale>-1)return t.scale;var i=1;if(t.hasPercent&&e.indexOf("%")>-1&&(i=100*i),t.hasPermile&&e.indexOf("")>-1&&(i=1e3*i),t.hasCommas){var a=e.indexOf(".");-1===a&&(a=e.length);for(var r=a-1;r>-1;r--){var n=e.charAt(r);if(","!==n)break;i/=1e3}}return t.scale=i,i}function m(e,t,i,a,r){var n=!!a,o=t.split(".",2);if(2===o.length){var s=o[0],l=o[1],u="";a&&(u=a.replace(b,""),e=e.replace(u,""));var c=i["."],h=r?c:".",p=e.split(h,2),d=1===p.length?p[0]+u:p[0],g=2===p.length?p[1]+u:"";g=g.replace(S,"");var m=f(d,s,i,n),v=y(g,l,n);return v.fmtOnly||""===v.value?m+v.value:m+c+v.value}return f(e,t,i,n)}function f(e,t,i,a){var r=t.indexOf(","),n=r>-1&&r<Math.max(t.lastIndexOf("0"),t.lastIndexOf("#"))&&i[","],o=0,s=0,l=i.groupSizes||[3],u=l[0],c=i[","],h="",p=e.charAt(0);("+"===p||"-"===p)&&(h=i[p],e=e.substr(1));for(var d="0"===e,g="",m="",f=e.length-1,y=!0,v=t.length-1;v>-1;v--){var b=t.charAt(v);switch(b){case"0":case"#":y=!1,""!==m&&(g=m+g,m=""),a||((f>-1||"0"===b)&&n&&(o===u?(g=c+g,s++,s<l.length&&(u=l[s]),o=1):o++),f>-1?(d&&"#"===b||(g=e.charAt(f)+g),f--):"#"!==b&&(g=b+g));break;case",":break;default:m=b+m}}if(!a){if(f>-1&&""!==g)if(n)for(;f>-1;)o===u?(g=c+g,s++,s<l.length&&(u=l[s]),o=1):o++,g=e.charAt(f)+g,f--;else g=e.substr(0,f+1)+g;return h+m+g}return y?h+m+g:h+m+e+g}function y(e,t,i){var a=0,r=t.length,n=e.length;if(i)return"0"!==t.charAt(r-1)&&"#"!==t.charAt(r-1)?{value:e+t.charAt(r-1),fmtOnly:""===e}:{value:e,fmtOnly:""===e};for(var o="",s=!0,l=0;r>l;l++){var u=t.charAt(l);if(n>a)switch(u){case"0":case"#":o+=e[a++],s=!1;break;default:o+=u}else"#"!==u&&(o+=u,s=s&&"0"!==u)}return{value:o,fmtOnly:s}}function v(e,t){var i=t["+"],a=t["-"],r=t["."],n=t[","];if("+"===i&&"-"===a&&"."===r&&","===n)return e;for(var o=e.length,s="",l=0;o>l;l++){var u=e.charAt(l);switch(u){case"+":s+=i;break;case"-":s+=a;break;case".":s+=r;break;case",":s+=n;break;default:s+=u}}return s}var b=/\{.+\}/,C=/e[+-]*0+/i,x=/^[a-z]\d{0,2}$/i,S=/0+$/;a.getComponents=r;var w;a.canFormat=n,a.isStandardFormat=o,a.format=s,a.formatWithCustomOverride=l,a.getCustomFormatMetadata=p}(s=e.NumberFormat||(e.NumberFormat={}));var l=function(){function t(e){var t=e.calendar,i=t.patterns,a=t.months.namesAbbr,r=a&&a[0],n=i.Y,o=i.M,s=i.f,l=i.T,u=i.t,c=s.indexOf(",")>-1?", ":" ",h=0===n.indexOf("yyyy'")&&n.length>6&&"'"===n[6];this.YearPattern=h?n.substr(0,7):"yyyy";var p=s.indexOf("yy"),d=s.indexOf("MMMM");this.MonthPattern=r&&d>-1?p>d?"MMM yyyy":"yyyy MMM":n,this.DayPattern=r?o.replace("MMMM","MMM"):o;var g=s.indexOf("mm"),m=s.indexOf("tt"),f=m>-1?u.replace(":mm ",""):u;switch(this.HourPattern=g>p?this.DayPattern+c+f:f+c+this.DayPattern,this.MinutePattern=u,this.SecondPattern=l,this.MillisecondPattern=l.replace("ss","ss.fff"),e.name){case"fi-FI":this.DayPattern=this.DayPattern.replace("'ta'",""),this.HourPattern=this.HourPattern.replace("'ta'","")}}return t.prototype.getFormatString=function(t){switch(t){case e.DateTimeUnit.Year:return this.YearPattern;case e.DateTimeUnit.Month:return this.MonthPattern;case e.DateTimeUnit.Week:case e.DateTimeUnit.Day:return this.DayPattern;case e.DateTimeUnit.Hour:return this.HourPattern;case e.DateTimeUnit.Minute:return this.MinutePattern;case e.DateTimeUnit.Second:return this.SecondPattern;case e.DateTimeUnit.Millisecond:return this.MillisecondPattern}},t}();e.formattingService=new o}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function i(e){return JSON.stringify(e.accept(r.instance))}function a(e){for(var i="[",a=0,r=e.length;r>a;a++)a>0&&(i+=","),i+=t.serialize(e[a]);return i+"]"}t.serialize=i,t.serializeArray=a;var r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.visitColumnRef=function(e){return{col:{s:e.source.accept(this),r:e.ref}}},t.prototype.visitMeasureRef=function(e){return{measure:{s:e.source.accept(this),r:e.ref}}},t.prototype.visitAggr=function(e){return{agg:{a:e.arg.accept(this),f:e.func}}},t.prototype.visitEntity=function(e){return{e:e.entity}},t.prototype.visitAnd=function(e){return{and:{l:e.left.accept(this),r:e.right.accept(this)}}},t.prototype.visitCompare=function(e){return{comp:{k:e.kind,l:e.left.accept(this),r:e.right.accept(this)}}},t.prototype.visitConstant=function(e){return{"const":{t:e.type.primitiveType,v:e.value}}},t.prototype.visitDefault=function(e){},t.instance=new t,t}(e.DefaultSQExprVisitor)}(t=e.SQExprShortSerializer||(e.SQExprShortSerializer={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e){return function(t){return t.get(e)}}function i(e,t){return"function"==typeof e?e(t):"string"==typeof e?e:void 0}e.createDisplayNameGetter=t,e.getDisplayName=i}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e){if(e){var t;return e.top&&(t={Top:{}},e.top.count&&(t.Top.Count=e.top.count)),e.bottom&&(t={Bottom:{}},e.bottom.count&&(t.Bottom.Count=e.bottom.count)),e.sample&&(t={Sample:{}},e.sample.count&&(t.Sample.Count=e.sample.count)),e.window&&(t={Window:{}},e.window.count&&(t.Window.Count=e.window.count)),t}}e.createFrom=t}(t=e.DataShapeBindingDataReduction||(e.DataShapeBindingDataReduction={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=e.Prototype.inheritSingle;!function(t){function i(e){var t=_.filter(e.dataRoles,function(e){return!_.isEmpty(e.requiredTypes)});r(e.dataview,e.dataViewMappings,t)}function r(e,t,i){if(!_.isEmpty(t)&&!_.isEmpty(i)){for(var a=n(e.metadata.columns,i),r=o(e.metadata.columns,i),s={},l=0;l<t.length;l++){var g=t[l];for(var m in g)null!=e[m]&&(s[m]=!0)}s.categorical&&u(e.categorical,a,r),s.table&&c(e.table,a,r),s.tree&&h(e.tree.root,a,r),s.matrix&&p(e.matrix,a,r),s.single&&d(e,t,i,r)}}function n(e,t){if(!e||!t)return function(){return!1};for(var i={},a=0;a<e.length;a++){var r=e[a],n=r.roles;if(n)for(var o=0;o<t.length;o++){var s=t[o];if(n[s.name]){i[r.index]=!0;break}}}return function(e){return isNaN(e)?!1:!!i[e]}}function o(e,t){if(!e||!t)return function(){return!0};for(var i=[],a=0;a<e.length;a++){var r=e[a],n=s(r,t);n&&(i[r.index]=n)}return function(e,t){return i[e]?i[e](t):!0}}function s(e,t){var i=l(e,t);return _.isEmpty(i)?void 0:function(e){return m(e,i)}}function l(t,i){var a=[],r=t&&t.roles;if(!r)return a;for(var n=0;n<i.length;n++){var o=i[n];if(r[o.name])for(var s=0,l=o.requiredTypes;s<l.length;s++){var u=l[s],c=e.ValueType.fromDescriptor(u);a.push(c)}}return a}function u(e,t,i){var a=e&&e.values;if(a){var r=a.grouped();if(r)for(var n=0;n<r.length;n++)for(var o=r[n],s=o.values,l=0;l<s.length;l++){var u=s[l],c=u.source.index;if(t(c))for(var h=0,p=u.values.length;p>h;h++)u.values=g(u.values,h,c,i)}}}function c(e,t,i){var a=e&&e.columns;if(a){for(var r=[],n=0;n<a.length;n++){var o=a[n];t(o.index)&&r.push(o.index)}for(var s=e.rows,l=0,u=s.length;u>l;l++)for(var c=0;c<r.length;c++){var h=r[c];s[l]=g(s[l],h,h,i)}}}function h(e,t,i){if(e.values)for(var a in e.values)t(a)&&("object"==typeof e.values[a]&&"value"in e.values[a]?e.values[a]=g(e.values[a],"value",a,i):e.values=g(e.values,a,a,i));else if(e.children)for(var r=0,n=e.children;r<n.length;r++){var o=n[r];h(o,t,i)}}function p(e,t,i){var a=e&&e.rows&&e.rows.root;if(a){var r=function(i){return i=f(e.valueSources,i),i?t(i):!1},n=function(t,a){return t=f(e.valueSources,t),t?i(t,a):!0};h(a,r,n)}}function d(e,t,i,a){if(e.single){for(var r=[],n=0;n<i.length;n++){var o=i[n];o.name&&r.push(o.name)}for(var s=e.metadata.columns,l=0;l<t.length;l++){var u=t[l],c=u.single.role;if(-1!==r.indexOf(c)){var h=y(s,c);return void(h&&(e.single=g(e.single,"value",h.index,a)))}}}}function g(e,t,i,r){if(e){var n=e[t];return null===n||r(i,n)||(e=a(e),e[t]=null),e}}function m(e,t){for(var i=0;i<t.length;i++){var a=t[i];if(a.numeric||a.integer)return"number"==typeof e}return!1}function f(e,t){var i=e[t];return i&&i.index}function y(e,t){for(var i=0;i<e.length;i++){var a=e[i],r=a&&a.roles;if(r&&r[t])return a}}t.apply=i,t.filterVariantMeasures=r,t.generateMetadataColumnFilter=n,t.generateValueFilter=o,t.getColumnRequiredTypes=l,t.normalizeVariant=g}(i=t.DataViewNormalizeValues||(t.DataViewNormalizeValues={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=jsCommon.ArrayExtensions,r=e.data.DataShapeBindingDataReduction;!function(i){function n(e,t,i,a){t&&1===t.length&&i.categorical&&i.categorical.dataReductionAlgorithm&&e&&s(e,i)&&(e.Primary.Groupings=[e.Secondary.Groupings[0],e.Primary.Groupings[0]],e.Secondary=void 0,e.DataReduction={Primary:r.createFrom(i.categorical.dataReductionAlgorithm),DataVolume:i.categorical.dataVolume||a})}function o(e){return e&&e.Groupings&&1===e.Groupings.length&&!_.isEmpty(e.Groupings[0].Projections)&&!e.Groupings[0].Subtotal&&_.isEmpty(e.Groupings[0].SuppressedProjections)}function s(e,t){return o(e.Primary)&&o(e.Secondary)&&1===e.Secondary.Groupings[0].Projections.length?!0:!1}function l(e,t,i){if(!d(t,i,e))return e;var r={metadata:{columns:a.copy(e.metadata.columns)}};if(e.single&&(r.single=e.single),e.table&&(r.table=e.table),e.matrix){var n=g(e.matrix);_.isEmpty(n.valueSources)||(r.categorical=m(n,r.metadata.columns))}return r}function u(e){for(var i={},a=0;a<e.length;a++){var r=e[a],n=r.roles;if(n)for(var o in n)if(n[o]){var s=i[o];s||(s=i[o]=new t.QueryProjectionCollection([])),s.all().push({queryRef:r.queryName})}}return i}function c(t,i){for(var a={},r=0,n=i.columns;r<n.length;r++){var o=n[r];if(!(!o.index&&0!==o.index||o.index<0||o.index>=t.length)){var s=t[o.index];if(s){var l=s.queryName;l&&void 0===a[l]&&(a[l]=o.isMeasure?e.VisualDataRoleKind.Measure:e.VisualDataRoleKind.Grouping)}}}return a}function h(e,t){t&&(t.bind&&e(t.bind.to),t["for"]&&e(t["for"]["in"]),t.group&&(e(t.group.by),p(e,t.group.select)),p(e,t.select))}function p(e,t){if(!_.isEmpty(t))for(var i=0;i<t.length;i++){var a=t[i];h(e,a)}}function d(t,i,a){if(!t||!i||!a)return!1;var r=c(t,a.metadata),n=u(t);if(i=e.DataViewAnalysis.chooseDataViewMappings(n,i,r),!i||1!==i.length)return!1;var o=i[0].categorical;if(!o)return!1;var s=a.matrix;if(!s)return!1;if(!s.rows||!s.rows.levels||2!==s.rows.levels.length)return!1;var l=[],p=[],d=function(t,i){var a=n[t];if(a)for(var o=0,s=a.all();o<s.length;o++){var l=s[o];r[l.queryRef]===e.VisualDataRoleKind.Grouping&&i.push(l.queryRef)}};if(h(function(e){d(e,l)},o.categories),h(function(e){d(e,p)},o.values),_.isEmpty(l)||_.isEmpty(p))return!1;for(var g=0,m=s.columns.levels;g<m.length;g++)for(var f=m[g],y=0,v=f.sources;y<v.length;y++){var b=v[y];if(!b.isMeasure)return!1}return!0}function g(t){for(var i=t.rows,a=i.root,r=a.children,n=[],o=i.levels[0],s=a.childIdentityFields,l=[],u=i.levels[1],c=r[0].childIdentityFields,h=t.valueSources.length,p=function(t){return _.findIndex(l,function(i){return e.DataViewScopeIdentity.equals(i.identity,t)})},d=0;d<r.length;d++){var g=r[d];n.push({value:g.value,identity:g.identity});for(var m=0,f=g.children;m<f.length;m++){var y=f[m],v=p(y.identity);-1===v&&l.push({value:y.value,identity:y.identity})}}for(var b=new Array(l.length),C=0;C<n.length;++C)for(var g=r[C],x=0,S=g.children;x<S.length;x++){var y=S[x],w=p(y.identity);b[w]||(b[w]=new Array(n.length)),b[w][C]=y.values}var D={root:{children:_.map(n,function(e){return{level:0,value:e.value,identity:e.identity}}),childIdentityFields:s},levels:[o]};if(h>0){for(var P=_.map(t.columns.root.children,function(e){var t={level:1};return e.levelSourceIndex&&(t.levelSourceIndex=e.levelSourceIndex),t}),w=0;w<D.root.children.length;++w)D.root.children[w].children=P;D.levels.push(t.columns.levels[0])}var L={root:{children:_.map(l,function(e){return{level:0,value:e.value,identity:e.identity}}),childIdentityFields:c},levels:[u]};if(h>0)for(var w=0;w<l.length;++w){for(var N=L.root.children[w],T={},C=0;C<n.length;++C)for(var V=b[w][C],M=0;h>M;++M){var A=C*h+M;T[A]=V?V[M]:0===M?{value:null}:{value:null,valueSourceIndex:M}}N.values=T}var R={rows:L,columns:D,valueSources:t.valueSources};return R}function m(e,t){for(var i=e.columns.root.children.length,a=e.valueSources,r=a.length,n=[{source:e.rows.levels[0].sources[0],values:_.map(e.rows.root.children,function(e){return e.value}),identity:_.map(e.rows.root.children,function(e){return e.identity}),identityFields:e.rows.root.childIdentityFields}],o=[],s=0;i>s;++s){var l=e.columns.root.children[s],u={values:[],identity:l.identity,name:l.value||null};o.push(u);for(var c=0;r>c;++c){var h=a[c],p={};for(var d in h)p[d]=h[d];p.groupName=u.name,t.push(p);var g={source:p,values:[],identity:u.identity};u.values.push(g);for(var m=c+s*r,f=0,y=e.rows.root.children;f<y.length;f++){var v=y[f],b=v.values[m].value;g.values.push(b)}}}for(var C=[],x=0;x<o.length;x++)for(var u=o[x],c=0;r>c;++c)C.push(u.values[c]);C.grouped=function(){return o},C.identityFields=e.columns.root.childIdentityFields,C.source=e.columns.levels[0].sources[0];var S={categories:n,values:C};return S}i.pivotBinding=n,i.unpivotResult=l}(i=t.DataViewPivotCategoricalToPrimaryGroups||(t.DataViewPivotCategoricalToPrimaryGroups={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t,i=jsCommon.StringExtensions,a=e.data.DefaultSQExprVisitor,r=e.data.SQExprConverter,n=e.data.FieldExprPattern;!function(t){function o(e){return e&&1===e.length?e[0].scriptResult:void 0}function s(t){var i=o(t);if(i){var a=t[0].metadata.objects,r=e.DataViewObjects.getValue(a,i.script.source),n=e.DataViewObjects.getValue(a,i.script.provider);return{source:r,provider:n}}}function l(t,i){var a=o(t);if(a&&i){var r=e.data.DataViewObjectDefinitions.getValue(i,a.script.source,null),n=e.data.DataViewObjectDefinitions.getValue(i,a.script.provider,null);return{source:r?r.value:null,provider:n?n.value:null}}}function u(e,t,a){var r={VariableName:"dataset",Columns:[]};if(e&&t&&!_.isEmpty(t)){var n=[],o=[];for(var s in e)for(var l=0,u=e[s].all();l<u.length;l++){var h=u[l],p=t.withName(h.queryRef);if(p){var d={QueryName:p.name,Name:p.expr.accept(new c(a))};o.push(d),n.push(d.Name)}}n=i.ensureUniqueNames(n);for(var g=0;g<n.length;g++){var d=o[g];d.Name=n[g]}r.Columns=o}return r}t.findScriptResult=o,t.extractScriptResult=s,t.extractScriptResultFromVisualConfig=l,t.getScriptInput=u;var c=function(e){function t(t){e.call(this),this.federatedSchema=t}return __extends(t,e),t.prototype.visitEntity=function(e){return e.entity},t.prototype.visitColumnRef=function(e){return t.getNameForProperty(e,this.federatedSchema)},t.prototype.visitMeasureRef=function(e){return t.getNameForProperty(e,this.federatedSchema)},t.prototype.visitAggr=function(e){return t.getNameForAggregate(e,this.federatedSchema)},t.prototype.visitHierarchy=function(e){return t.getNameForHierarchy(e,this.federatedSchema)},t.prototype.visitHierarchyLevel=function(e){return t.getNameForHierarchyLevel(e,this.federatedSchema)},t.getNameForProperty=function(e,t){var i=r.asFieldPattern(e),a=i.column||i.measure,n=t.schema(a.schema),o=n.findProperty(a.entity,a.name);return o?o.name:void 0},t.getNameForAggregate=function(e,t){var i=r.asFieldPattern(e),a=i.columnAggr||i.entityAggr,o=t.schema(a.schema).entities.withName(a.entity);if(o){var s=o.properties.withName(n.getFieldExprName(i));return s.name}},t.getNameForHierarchy=function(e,t){var i=r.asFieldPattern(e),a=i.hierarchy;if(a){var n=t.schema(a.schema),o=n.findHierarchy(a.entity,a.name);if(o)return o.name}},t.getNameForHierarchyLevel=function(e,i){var a=r.asFieldPattern(e);return a.columnHierarchyLevelVariation?t.getVariationLevelName(e,i):void 0;
},t.getVariationLevelName=function(e,t){var i=r.asFieldPattern(e),a=n.toFieldExprEntityItemPattern(i);if(i.columnHierarchyLevelVariation){var o=t.schema(a.schema).findProperty(a.entity,i.columnHierarchyLevelVariation.source.name);if(!o)return;for(var s=o.column.variations,l=0;l<s.length;l++){var u=s[l];if(u.name===i.columnHierarchyLevelVariation.variationName)for(var c=0,h=u.defaultHierarchy.levels;c<h.length;c++){var p=h[c];if(p.name===i.columnHierarchyLevelVariation.level.level)return p.column.name}}}},t}(a)}(t=e.ScriptResultUtil||(e.ScriptResultUtil={}))}(powerbi||(powerbi={}));var powerbi;!function(e){!function(e){e[e.Grouping=0]="Grouping",e[e.Measure=1]="Measure",e[e.GroupingOrMeasure=2]="GroupingOrMeasure"}(e.VisualDataRoleKind||(e.VisualDataRoleKind={})),e.VisualDataRoleKind}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(t){return e.createStaticEvalContext()}e.createMatrixEvalContext=t}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(e,t){return new n(e||{metadata:{columns:[]}},t)}function a(e,t,i){var a=i.rows;if(!a||1===a.length)for(var n=i.columns,o=0,s=t.length;s>o;o++){var l=t[o];if(r.equals(l.expr,e)&&l.queryName)for(var u=0,c=n.length;c>u;u++)if(o===n[u].index)return a[0][u]}}var r=e.data.SQExpr;t.createStaticEvalContext=i;var n=function(){function e(e,t){this.dataView=e,this.selectTransforms=t}return e.prototype.getExprValue=function(e){var t=this.dataView,i=this.selectTransforms;return t&&t.table&&i?a(e,i,t.table):void 0},e.prototype.getCurrentIdentity=function(){},e.prototype.getRoleValue=function(e){},e}()}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e){return i(e)||s(e)||l(e)||r(e)||n(e)||u(e)||o(e)||c(e)}function i(t){var i=t.columnAggr;if(i){var a=c(t.columnAggr);return e.aggregate(e.columnRef(a,i.name),i.aggregate)}}function r(t){var i=t.hierarchyLevel;if(i){var a=e.hierarchy(c(i),i.name);return e.hierarchyLevel(a,i.level)}}function n(t){var i=t.hierarchy;if(i){var a=c(i);return e.hierarchy(a,i.name)}}function o(t){var i=t.columnHierarchyLevelVariation;if(i){var a=c(i.source);return e.propertyVariationSource(a,i.source.name,i.level.name)}}function s(t){var i=t.column;if(i){var a=c(t.column);return e.columnRef(a,i.name)}}function l(t){var i=t.measure;if(i){var a=c(t.measure);return e.measureRef(a,i.name)}}function u(t){var i=t.entityAggr;if(i){var a=c(t.entityAggr);return e.aggregate(a,i.aggregate)}}function c(t){var i=a.toFieldExprEntityItemPattern(t);return e.entity(i.schema,i.entity,i.entityVar)}e.fieldExpr=t}(t=e.SQExprBuilder||(e.SQExprBuilder={}));var i;!function(t){function i(t){return t instanceof e.SQEntityExpr?{entity:t.entity,schema:t.schema}:t.accept(r.instance)}t.asFieldPattern=i}(i=e.SQExprConverter||(e.SQExprConverter={}));var a,r=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.visitColumnRef=function(e){var t=e.source.accept(n.instance);if(t&&t.entity){var i=t.entity;return i.name=e.ref,{column:i}}},t.prototype.visitMeasureRef=function(e){var t=e.source.accept(n.instance);if(t&&t.entity){var i=t.entity;return i.name=e.ref,{measure:i}}},t.prototype.visitAggr=function(e){var t=e.arg.accept(this);if(t&&t.column){var i=t.column;return i.aggregate=e.func,{columnAggr:i}}if(t&&t.columnAggr){var i=t.columnAggr;return i.aggregate=e.func,{columnAggr:i}}var a=e.arg.accept(n.instance);if(a&&a.entity){var i=a.entity;return i.aggregate=e.func,{entityAggr:i}}},t.prototype.visitHierarchy=function(e){var t=e.arg.accept(n.instance);if(t&&t.entity){var i=t.entity;return i.name=e.hierarchy,{hierarchy:i}}},t.prototype.visitHierarchyLevel=function(e){var t=e.arg.accept(o.instance);if(t){var i;return t.hierarchy&&(i={entity:t.hierarchy.entity,schema:t.hierarchy.schema,name:t.hierarchy.name,level:e.level}),t.variation?{columnHierarchyLevelVariation:{source:{entity:t.variation.column.entity,schema:t.variation.column.schema,name:t.variation.column.name},level:i,variationName:t.variation.variationName}}:{hierarchyLevel:i}}},t.instance=new t,t}(e.DefaultSQExprVisitor),n=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.visitEntity=function(e){var t={schema:e.schema,entity:e.entity};return e.variable&&(t.entityVar=e.variable),{entity:t}},i.prototype.visitPropertyVariationSource=function(t){var i=t.arg;if(i instanceof e.SQEntityExpr){var a={schema:i.schema,entity:i.entity,name:t.property};return i.variable&&(a.entityVar=i.variable),{variation:{column:a,variationName:t.name}}}},i.instance=new i,i}(e.DefaultSQExprVisitor),o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.visitHierarchy=function(e){var t,i,a=e.arg.accept(n.instance);return a.variation?(t={name:e.hierarchy,schema:a.variation.column.schema,entity:a.variation.column.entity},i=a.variation):t={name:e.hierarchy,schema:a.entity.schema,entity:a.entity.entity},{hierarchy:t,variation:i}},t.instance=new t,t}(e.DefaultSQExprVisitor);!function(e){function t(e){return void 0!==(e.column||e.columnAggr||e.measure)}function i(e){var t=e.column||e.columnAggr||e.measure||e.hierarchy;return t?t.name:void 0}function a(e){return e.columnHierarchyLevelVariation?e.columnHierarchyLevelVariation.source:e.column||e.measure||e.columnAggr}function r(e){var t=i(e);return t?t:n(e).entity}function n(e){var t=e.column||e.columnAggr||e.entityAggr||e.hierarchy||e.hierarchyLevel||e.measure||e.columnHierarchyLevelVariation&&e.columnHierarchyLevelVariation.source||e;return{schema:t.schema,entity:t.entity,entityVar:t.entityVar}}e.hasFieldExprName=t,e.getPropertyName=i,e.getColumnRef=a,e.getFieldExprName=r,e.toFieldExprEntityItemPattern=n}(a=e.FieldExprPattern||(e.FieldExprPattern={}))}(t=e.data||(e.data={}))}(powerbi||(powerbi={}));var powerbi;!function(e){!function(e){e[e.Create=0]="Create",e[e.Append=1]="Append"}(e.VisualDataChangeOperationKind||(e.VisualDataChangeOperationKind={})),e.VisualDataChangeOperationKind,!function(e){e[e.View=0]="View",e[e.Edit=1]="Edit"}(e.ViewMode||(e.ViewMode={})),e.ViewMode}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(e,t){this.x=e||0,this.y=t||0}return e}();e.Point=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(e,t,i,a){this.left=e||0,this.top=t||0,this.width=i||0,this.height=a||0}return e}();e.Rect=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(e,t,i,a,r){return void 0===a&&(a=!1),void 0===r&&(r=l.Top),t?new p(e):new c(e,r,i,a)}function a(e){switch(e){case s.Circle:return"icon circle";case s.Box:return"icon tall";case s.Line:return"icon short"}}function r(e,t,i){var a,r=e.width,n=250,o=490,s=750,l=20,u=28;return 1>t?"48px":n>=r?(a=i?4:3,Math.floor((n-l-u*a)/Math.min(t,a))+"px"):o>=r?(a=i?6:5,Math.floor((o-l-u*a)/Math.min(t,a))+"px"):s>=r?(a=i?8:7,Math.floor((s-l-u*a)/Math.min(t,a))+"px"):(a=i?10:9,Math.floor((r-l-u*a)/Math.min(t,a))+"px")}var n=jsCommon.CssConstants.createClassAndSelector,o=jsCommon.PixelConverter;!function(e){e[e.Box=0]="Box",e[e.Circle=1]="Circle",e[e.Line=2]="Line"}(t.LegendIcon||(t.LegendIcon={}));var s=t.LegendIcon;!function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.Right=2]="Right",e[e.Left=3]="Left",e[e.None=4]="None",e[e.TopCenter=5]="TopCenter",e[e.BottomCenter=6]="BottomCenter",e[e.RightCenter=7]="RightCenter",e[e.LeftCenter=8]="LeftCenter"}(t.LegendPosition||(t.LegendPosition={}));var l=t.LegendPosition;t.legendProps={show:"show",position:"position",titleText:"titleText",showTitle:"showTitle",labelColor:"labelColor",fontSize:"fontSize"},t.createLegend=i,t.getIconClass=a,t.getLabelMaxSize=r;var u;!function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"}(u||(u={}));var c=function(){function i(e,i,a,r){this.legendDataStartIndex=0,this.arrowPosWindow=1,this.lastCalculatedWidth=0,this.visibleLegendWidth=0,this.visibleLegendHeight=0,this.legendFontSizeMarginDifference=0,this.legendFontSizeMarginValue=0,this.svg=d3.select(e.get(0)).insert("svg",":first-child"),this.svg.style("display","inherit"),this.svg.classed("legend",!0),a&&(this.clearCatcher=t.appendClearCatcher(this.svg)),this.group=this.svg.append("g").attr("id","legendGroup"),this.interactivityService=a,this.isScrollable=r,this.element=e,this.changeOrientation(i),this.parentViewport={height:0,width:0},this.calculateViewport(),this.updateLayout()}return i.prototype.updateLayout=function(){var e=this.viewport,t=this.orientation;this.svg.attr({height:e.height||(t===l.None?0:this.parentViewport.height),width:e.width||(t===l.None?0:this.parentViewport.width)}).style("max-width","100%");var i=t===l.Bottom||t===l.BottomCenter;this.svg.style({"float":this.getFloat(),position:i?"absolute":"",bottom:i?"0px":""})},i.prototype.calculateViewport=function(){switch(this.orientation){case l.Top:case l.Bottom:case l.TopCenter:case l.BottomCenter:var e=o.fromPointToPixel(this.data&&this.data.fontSize?this.data.fontSize:i.DefaultFontSizeInPt),t=i.TopLegendHeight+(e-i.DefaultFontSizeInPt);return void(this.viewport={height:t,width:0});case l.Right:case l.Left:case l.RightCenter:case l.LeftCenter:var a=this.lastCalculatedWidth?this.lastCalculatedWidth:this.parentViewport.width*i.LegendMaxWidthFactor;return void(this.viewport={height:0,width:a});case l.None:this.viewport={height:0,width:0}}},i.prototype.getFloat=function(){switch(this.orientation){case l.Right:case l.RightCenter:return"right";case l.Left:case l.LeftCenter:return"left";default:return""}},i.prototype.getMargins=function(){return this.viewport},i.prototype.isVisible=function(){return this.orientation!==l.None},i.prototype.changeOrientation=function(e){e?this.orientation=e:this.orientation=l.Top,this.svg.attr("orientation",e)},i.prototype.getOrientation=function(){return this.orientation},i.prototype.drawLegend=function(e,t){this.drawLegendInternal(e,t,!0)},i.prototype.drawLegendInternal=function(a,r,n){this.parentViewport=r,this.data=a,this.interactivityService&&this.interactivityService.applySelectionStateToData(a.dataPoints),0===a.dataPoints.length&&this.changeOrientation(l.None),this.getOrientation()===l.None&&(a.dataPoints=[]);var s=this.element.children(".mapControl");s.length>0&&!this.isTopOrBottom(this.orientation)&&s.css("display","inline-block"),this.calculateViewport();var u=this.calculateLayout(a,n),c=u.title,h=c?[c]:[],p=this.interactivityService&&e.visuals.dataHasSelection(a.dataPoints),d=this.group;if(this.isCentered(this.orientation)){var g=0;this.isTopOrBottom(this.orientation)?(g=Math.max(0,(this.parentViewport.width-this.visibleLegendWidth)/2),d.attr("transform",t.SVGUtil.translate(g,0))):(g=Math.max((this.parentViewport.height-this.visibleLegendHeight)/2),d.attr("transform",t.SVGUtil.translate(0,g)))}else d.attr("transform",null);var m=d.selectAll(i.LegendTitle.selector).data(h);m.enter().append("text").classed(i.LegendTitle["class"],!0),m.style({fill:a.labelColor,"font-size":o.fromPoint(a.fontSize),"font-family":i.DefaultTitleFontFamily}).text(function(e){return e.text}).attr({x:function(e){return e.x},y:function(e){return e.y}}),m.exit().remove();var f=a.dataPoints.slice(this.legendDataStartIndex,this.legendDataStartIndex+u.numberOfItems),y=d.selectAll(i.LegendItem.selector).data(f,function(e){return e.identity.getKey()}),v=y.enter().append("g").classed(i.LegendItem["class"],!0);if(v.append("circle").classed(i.LegendIcon["class"],!0),v.append("title"),v.append("text").classed(i.LegendText["class"],!0),v.style({"font-family":i.DefaultFontFamily}),y.select(i.LegendIcon.selector).attr({cx:function(e,t){return e.glyphPosition.x},cy:function(e){return e.glyphPosition.y},r:i.LegendIconRadius}).style({fill:function(e){return p&&!e.selected?t.LegendBehavior.dimmedLegendColor:e.color}}),y.select("title").text(function(e){return e.tooltip}),y.select(i.LegendText.selector).attr({x:function(e){return e.textPosition.x},y:function(e){return e.textPosition.y}}).text(function(e){return e.label}).style("fill",a.labelColor).style("font-size",o.fromPoint(a.fontSize)),this.interactivityService){var b=y.select(i.LegendIcon.selector),C={legendItems:y,legendIcons:b,clearCatcher:this.clearCatcher};this.interactivityService.bind(a.dataPoints,new t.LegendBehavior,C,{isLegend:!0})}y.exit().remove(),this.drawNavigationArrows(u.navigationArrows),this.updateLayout()},i.prototype.normalizePosition=function(e){this.legendDataStartIndex>=e.length&&(this.legendDataStartIndex=e.length-1),this.legendDataStartIndex<0&&(this.legendDataStartIndex=0)},i.prototype.calculateTitleLayout=function(t){var a=0,r=!jsCommon.StringExtensions.isNullOrEmpty(t);if(r){var n,o=this.isTopOrBottom(this.orientation);if(o){var s=this.legendFontSizeMarginValue>i.DefaultTextMargin?i.TextAndIconPadding+this.legendFontSizeMarginDifference:i.TextAndIconPadding,l=i.TextAndIconPadding+i.LegendIconRadius,u=i.LegendIconRadius+s+l;n=this.parentViewport.width*i.LegendMaxWidthFactor-u-i.LegendEdgeMariginWidth}else n=this.legendFontSizeMarginValue<i.DefaultTextMargin?i.MaxTitleLength:i.MaxTitleLength+i.DefaultMaxLegendFactor*this.legendFontSizeMarginDifference;var c=i.getTextProperties(!0,t,this.data.fontSize),h=t;return a=e.TextMeasurementService.measureSvgTextWidth(c),a>n&&(h=e.TextMeasurementService.getTailoredTextOrDefault(c,n),a=n),o&&(a+=i.TitlePadding),{x:0,y:0,text:h,width:a}}return null},i.prototype.calculateLayout=function(e,t){var a=e.dataPoints;if(0===e.dataPoints.length)return{startIndex:null,numberOfItems:0,title:null,navigationArrows:[]};this.legendFontSizeMarginValue=o.fromPointToPixel(this.data&&void 0!==this.data.fontSize?this.data.fontSize:i.DefaultFontSizeInPt),this.legendFontSizeMarginDifference=this.legendFontSizeMarginValue-i.DefaultTextMargin,this.normalizePosition(a),this.legendDataStartIndex<a.length&&(a=a.slice(this.legendDataStartIndex));var r,n,s=this.calculateTitleLayout(e.title);return this.isTopOrBottom(this.orientation)?(r=this.isScrollable?this.calculateHorizontalNavigationArrowsLayout(s):[],n=this.calculateHorizontalLayout(a,s,r)):(r=this.isScrollable?this.calculateVerticalNavigationArrowsLayout(s):[],n=this.calculateVerticalLayout(a,s,r,t)),{numberOfItems:n,title:s,navigationArrows:r}},i.prototype.updateNavigationArrowLayout=function(e,t,i){0===this.legendDataStartIndex&&e.shift();var a=this.arrowPosWindow;this.arrowPosWindow=i,e&&e.length>0&&this.arrowPosWindow===t&&(this.arrowPosWindow=a,e.length=e.length-1)},i.prototype.calculateHorizontalNavigationArrowsLayout=function(e){var a=i.LegendArrowHeight,r=i.LegendArrowWidth,n=i.LegendArrowTranslateY,o=[],s=e?e.x+e.width:0,l=t.SVGUtil.createArrow(r,a,180),c=t.SVGUtil.createArrow(r,a,0);return o.push({x:s,y:n,path:l.path,rotateTransform:l.transform,type:u.Decrease}),o.push({x:this.parentViewport.width-r,y:n,path:c.path,rotateTransform:c.transform,type:u.Increase}),o},i.prototype.calculateVerticalNavigationArrowsLayout=function(e){var a=i.LegendArrowHeight,r=i.LegendArrowWidth,n=[],o=40,s=t.SVGUtil.createArrow(r,a,270),l=t.SVGUtil.createArrow(r,a,90);return n.push({x:o,y:a+i.LegendArrowOffset/2,path:s.path,rotateTransform:s.transform,type:u.Decrease}),n.push({x:o,y:this.parentViewport.height-a,path:l.path,rotateTransform:l.transform,type:u.Increase}),n},i.prototype.calculateHorizontalLayout=function(t,a,r){var n=4,o=11,s=this.legendFontSizeMarginDifference>0,l=s?i.TextAndIconPadding+this.legendFontSizeMarginDifference:i.TextAndIconPadding,u=i.LegendIconRadius+l+n,c=o+(s?this.legendFontSizeMarginDifference:0),h=0,p=2*i.LegendIconRadius+3*l,d=t.length;a&&(h=a.width,a.y=u),this.legendDataStartIndex>0&&(h+=i.LegendArrowOffset);var g=t.length,m=this.parentViewport.width,f=g>0?(m-h-p*g)/g|0:0;f=f>i.MaxTextLength?f:i.MaxTextLength;for(var y=0;g>y;y++){var v=t[y];v.glyphPosition={x:h+i.LegendIconRadius,y:c},v.textPosition={x:h+u,y:u};var b=i.getTextProperties(!1,v.label,this.data.fontSize);v.tooltip=v.label;var C=e.TextMeasurementService.measureSvgTextWidth(b),x=0;if(f>C)x=p+C;else{var S=e.TextMeasurementService.getTailoredTextOrDefault(b,f);v.label=S,x=p+f}if(h+=x,h>m){d=y;break}}return this.visibleLegendWidth=h,this.updateNavigationArrowLayout(r,g,d),d},i.prototype.calculateVerticalLayout=function(t,a,r,n){var o=this,s=this.legendFontSizeMarginDifference>0,l=s?this.legendFontSizeMarginDifference:0,u=20+l,c=15+1.3*l,h=u,p=4+1.3*l,d=i.TextAndIconPadding+i.LegendIconRadius,g=i.LegendIconRadius+i.TextAndIconPadding+d,m=n?this.parentViewport.width*i.LegendMaxWidthFactor-g-i.LegendEdgeMariginWidth:this.lastCalculatedWidth-g-i.LegendEdgeMariginWidth,f=t.length,y=0,v=this.parentViewport.height;a&&(h+=c,a.x=i.TextAndIconPadding,a.y=c,y=a.width||0),this.legendDataStartIndex>0&&(h+=i.LegendArrowOffset);for(var b=t.length,C=0;b>C;C++){var x=t[C];x.glyphPosition={x:d,y:h+l},x.textPosition={x:g,y:h+p};var S=i.getTextProperties(!1,x.label,this.data.fontSize);x.tooltip=x.label;var w=e.TextMeasurementService.measureSvgTextWidth(S);if(w>y&&(y=w),w>m){var D=e.TextMeasurementService.getTailoredTextOrDefault(S,m);x.label=D}if(h+=u,h>v){f=C;break}}return n?m>y?this.lastCalculatedWidth=this.viewport.width=Math.ceil(y+g+i.LegendEdgeMariginWidth):this.lastCalculatedWidth=this.viewport.width=Math.ceil(this.parentViewport.width*i.LegendMaxWidthFactor):this.viewport.width=this.lastCalculatedWidth,this.visibleLegendHeight=h,r.forEach(function(e){return e.x=o.lastCalculatedWidth/2}),this.updateNavigationArrowLayout(r,b,f),f},i.prototype.drawNavigationArrows=function(e){var a=this,r=this.group.selectAll(i.NavigationArrow.selector).data(e);r.enter().append("g").on("click",function(e){var t=a.legendDataStartIndex;a.legendDataStartIndex=e.type===u.Increase?t+a.arrowPosWindow:t-a.arrowPosWindow,a.drawLegendInternal(a.data,a.parentViewport,!1)}).classed(i.NavigationArrow["class"],!0).append("path"),r.attr("transform",function(e){return t.SVGUtil.translate(e.x,e.y)}).select("path").attr({d:function(e){return e.path},transform:function(e){return e.rotateTransform}}),r.exit().remove()},i.prototype.isTopOrBottom=function(e){switch(e){case l.Top:case l.Bottom:case l.BottomCenter:case l.TopCenter:return!0;default:return!1}},i.prototype.isCentered=function(e){switch(e){case l.BottomCenter:case l.LeftCenter:case l.RightCenter:case l.TopCenter:return!0;default:return!1}},i.prototype.reset=function(){},i.getTextProperties=function(e,t,a){return{text:t,fontFamily:e?i.DefaultTitleFontFamily:i.DefaultFontFamily,fontSize:o.fromPoint(a||i.DefaultFontSizeInPt)}},i.DefaultFontSizeInPt=8,i.LegendIconRadius=5,i.MaxTextLength=60,i.MaxTitleLength=80,i.TextAndIconPadding=5,i.TitlePadding=15,i.LegendEdgeMariginWidth=10,i.LegendMaxWidthFactor=.3,i.TopLegendHeight=24,i.DefaultTextMargin=o.fromPointToPixel(i.DefaultFontSizeInPt),i.DefaultMaxLegendFactor=i.MaxTitleLength/i.DefaultTextMargin,i.LegendArrowOffset=10,i.LegendArrowHeight=15,i.LegendArrowWidth=7.5,i.LegendArrowTranslateY=3.5,i.DefaultFontFamily="wf_segoe-ui_normal",i.DefaultTitleFontFamily="wf_segoe-ui_Semibold",i.LegendItem=n("legendItem"),i.LegendText=n("legendText"),i.LegendIcon=n("legendIcon"),i.LegendTitle=n("legendTitle"),i.NavigationArrow=n("navArrow"),i}();t.SVGLegend=c;var h,p=function(){function i(e){this.element=e}return i.getIconClass=function(e){switch(e){case s.Circle:case s.Box:case s.Line:return"icon"}},i.prototype.getMargins=function(){return{height:i.LegendHeight,width:0}},i.prototype.drawLegend=function(e){var t=e.dataPoints;if(!(t.length<1)){var a=this.legendContainerDiv;if(!a){if(!t.length)return;var r=$("<div></div>").height(this.getMargins().height).addClass(i.LegendContainerClass);this.element.prepend(r),this.legendContainerDiv=a=d3.select(r.get(0))}this.drawTitle(t),this.drawLegendItems(t)}},i.prototype.reset=function(){this.legendContainerDiv&&(this.legendContainerDiv.remove(),this.legendContainerDiv=null)},i.prototype.isVisible=function(){return!0},i.prototype.changeOrientation=function(e){},i.prototype.getOrientation=function(){return l.Top},i.prototype.drawTitle=function(e){var t=this.legendContainerDiv.selectAll("div."+i.LegendTitleClass),a=t.data([e[0]]),r=a.enter(),n=r.append("div").attr("class",i.LegendTitleClass);n.filter(function(e){return e.iconOnlyOnLabel}).append("span").attr("class",i.legendIconClass).html(i.legendPlaceSelector),n.append("span"),a.filter(function(e){return e.iconOnlyOnLabel}).select("span."+i.legendIconClass).style(i.legendColorCss,function(e){return e.color}),a.select("span:last-child").text(function(e){return e.category})},i.prototype.drawLegendItems=function(t){this.ensureLegendTableCreated();var a=i.splitArrayToOddEven(t),r=this.legendContainerDiv.select("tbody").selectAll("tr").data(a),n=r.enter(),o=n.append("tr"),s=o.selectAll("td").data(function(e){return e},function(e){return e.label}).enter().append("td").attr("class",i.LegendItem),l=s.append("span");l.filter(function(e){return!e.iconOnlyOnLabel}).append("span").html(i.legendPlaceSelector).attr("class",i.legendIconClass).attr("white-space","nowrap"),l.append("span").attr("class",i.legendItemNameClass),l.append("span").attr("class",i.legendItemMeasureClass);var u=r.selectAll("td").data(function(e){return e},function(e){return e.label});u.select("span."+i.legendItemNameClass).html(function(t){return e.visuals.TextUtil.removeBreakingSpaces(t.label)}),u.select("span."+i.legendItemMeasureClass).html(function(e){return"&nbsp;"+e.measure}),u.select("span."+i.legendIconClass).style("color",function(e){return e.color}),u.exit().remove()},i.prototype.ensureLegendTableCreated=function(){if(this.legendContainerDiv.select("div table").empty()){var e=this.legendContainerDiv.append("div").append("table");e.style("table-layout","fixed").append("tbody"),this.setPanGestureOnLegend(e)}},i.prototype.setPanGestureOnLegend=function(e){var i=$(this.legendContainerDiv.select("div:nth-child(2)")[0]).width(),a=d3.scale.linear().domain([0,i]).range([0,i]),r=d3.behavior.zoom().scaleExtent([1,1]).x(a).on("zoom",function(){if($(e[0]).width()>i){var a=r.translate(),n=a[0],o=a[1];n=Math.min(n,0),n=Math.max(n,i-$(e[0]).width()),r.translate([n,o]),e.style("-ms-transform",function(){return t.SVGUtil.translateXWithPixels(n)}),e.style("-webkit-transform",function(){return t.SVGUtil.translateXWithPixels(n)}),e.style("transform",function(){return t.SVGUtil.translateXWithPixels(n)})}});this.legendContainerDiv?this.legendContainerDiv.call(r):e.call(r)},i.splitArrayToOddEven=function(e){for(var t=[],i=[],a=0;a<e.length;++a)a%2===0?i.push(e[a]):t.push(e[a]);return[i,t]},i.LegendHeight=65,i.LegendContainerClass="interactive-legend",i.LegendTitleClass="title",i.LegendItem="item",i.legendPlaceSelector="",i.legendIconClass="icon",i.legendColorCss="color",i.legendItemNameClass="itemName",i.legendItemMeasureClass="itemMeasure",i}();!function(e){function i(e,i){if(null==i[t.legendProps.show]&&(i[t.legendProps.show]=!0),i[t.legendProps.show]===!1&&(e.dataPoints=[]),i[t.legendProps.show]===!0&&null==i[t.legendProps.position]&&(i[t.legendProps.position]=t.legendPosition.top),void 0!==i[t.legendProps.fontSize]&&(e.fontSize=i[t.legendProps.fontSize]),void 0!==i[t.legendProps.labelColor]){var a=i[t.legendProps.labelColor];null!=a&&(e.labelColor=a.solid.color)}i[t.legendProps.showTitle]===!1?e.title="":void 0!==i[t.legendProps.titleText]&&(e.title=i[t.legendProps.titleText])}e.DefaultLegendLabelFillColor="#666666",e.update=i}(h=t.LegendData||(t.LegendData={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.linear="linear",t.log="log",t.type=e.createEnumType([{value:t.linear,displayName:function(e){return e.get("Visual_Axis_Linear")}},{value:t.log,displayName:function(e){return e.get("Visual_Axis_Log")}}])}(i=t.axisScale||(t.axisScale={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.showBoth="showBoth",t.showTitleOnly="showTitleOnly",t.showUnitOnly="showUnitOnly",t.type=e.createEnumType([{value:t.showTitleOnly,displayName:function(e){return e.get("Visual_Axis_ShowTitleOnly")}},{value:t.showUnitOnly,displayName:function(e){return e.get("Visual_Axis_ShowUnitOnly")}},{value:t.showBoth,displayName:function(e){return e.get("Visual_Axis_ShowBoth")}}])}(i=t.axisStyle||(t.axisStyle={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.scalar="Scalar",t.categorical="Categorical",t.both="Both",t.type=e.createEnumType([{value:t.scalar,displayName:function(e){return e.get("Visual_Axis_Scalar")}},{value:t.categorical,displayName:function(e){return e.get("Visual_Axis_Categorical")}}])}(i=t.axisType||(t.axisType={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.rectangle="rectangle",t.oval="oval",t.line="line",t.arrow="arrow",t.triangle="triangle",t.type=e.createEnumType([{value:t.rectangle,displayName:"rectangle"},{value:t.oval,displayName:"oval"},{value:t.line,displayName:"line"},{value:t.arrow,displayName:"arrow"},{value:t.triangle,displayName:"triangle"}])}(i=t.basicShapeType||(t.basicShapeType={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.normal="Normal",t.fit="Fit",t.fill="Fill",t.type=e.createEnumType([{value:t.normal,displayName:function(e){return e.get("Visual_ImageScalingType_Normal")}},{value:t.fit,displayName:function(e){return e.get("Visual_ImageScalingType_Fit")}},{value:t.fill,displayName:function(e){return e.get("Visual_ImageScalingType_Fill")}}])}(i=t.imageScalingType||(t.imageScalingType={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.insideEnd="InsideEnd",t.insideCenter="InsideCenter",t.outsideEnd="OutsideEnd",t.insideBase="InsideBase",t.type=e.createEnumType([{value:t.insideEnd,displayName:function(e){return e.get("Visual_LabelPosition_InsideEnd")}},{value:t.outsideEnd,displayName:function(e){return e.get("Visual_LabelPosition_OutsideEnd")}},{value:t.insideCenter,displayName:function(e){return e.get("Visual_LabelPosition_InsideCenter")}},{value:t.insideBase,displayName:function(e){return e.get("Visual_LabelPosition_InsideBase")}}])}(i=t.labelPosition||(t.labelPosition={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.category="Category",t.data="Data",t.both="Both",t.type=e.createEnumType([{value:t.category,displayName:function(e){return e.get("Visual_LabelStyle_Category")}},{value:t.data,displayName:function(e){return e.get("Visual_LabelStyle_DataValue")}},{value:t.both,displayName:function(e){return e.get("Visual_LabelStyle_Both")}}])}(i=t.labelStyle||(t.labelStyle={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.top="Top",t.bottom="Bottom",t.left="Left",t.right="Right",t.topCenter="TopCenter",t.bottomCenter="BottomCenter",t.leftCenter="LeftCenter",t.rightCenter="RightCenter",t.type=e.createEnumType([{value:t.top,displayName:function(e){return e.get("Visual_LegendPosition_Top")}},{value:t.bottom,displayName:function(e){return e.get("Visual_LegendPosition_Bottom")}},{value:t.left,displayName:function(e){return e.get("Visual_LegendPosition_Left")}},{value:t.right,displayName:function(e){return e.get("Visual_LegendPosition_Right")}},{value:t.topCenter,displayName:function(e){return e.get("Visual_LegendPosition_TopCenter")}},{value:t.bottomCenter,displayName:function(e){return e.get("Visual_LegendPosition_BottomCenter")}},{value:t.leftCenter,displayName:function(e){return e.get("Visual_LegendPosition_LeftCenter")}},{value:t.rightCenter,displayName:function(e){return e.get("Visual_LegendPosition_RightCenter")}}])}(i=t.legendPosition||(t.legendPosition={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.positive="Positive",t.negative="Negative",t.type=e.createEnumType([{value:t.positive,displayName:function(e){return e.get("Visual_KPI_Direction_Positive")}},{value:t.negative,displayName:function(e){return e.get("Visual_KPI_Direction_Negative")}}])}(i=t.kpiDirection||(t.kpiDirection={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.dashed="dashed",t.solid="solid",t.dotted="dotted",t.type=e.createEnumType([{value:t.dashed,displayName:function(e){return e.get("Visual_LineStyle_Dashed")}},{value:t.solid,displayName:function(e){return e.get("Visual_LineStyle_Solid")}},{value:t.dotted,displayName:function(e){return e.get("Visual_LineStyle_Dotted")}}])}(i=t.lineStyle||(t.lineStyle={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.none="None",t.bottomOnly="BottomOnly",t.topOnly="TopOnly",t.leftOnly="LeftOnly",t.rightOnly="RightOnly",t.topBottom="TopBottom",t.leftRight="LeftRight",t.frame="Frame",t.type=e.createEnumType([{value:t.none,displayName:function(e){return e.get("Visual_Outline_none")}},{value:t.bottomOnly,displayName:function(e){return e.get("Visual_Outline_bottom_only")}},{value:t.topOnly,displayName:function(e){return e.get("Visual_Outline_top_only")}},{value:t.leftOnly,displayName:function(e){return e.get("Visual_Outline_LeftOnly")}},{value:t.rightOnly,displayName:function(e){return e.get("Visual_Outline_RightOnly")}},{value:t.topBottom,displayName:function(e){return e.get("Visual_Outline_top_Bottom")}},{value:t.leftRight,displayName:function(e){return e.get("Visual_Outline_leftRight")}},{value:t.frame,displayName:function(e){return e.get("Visual_Outline_frame")}}])}(i=t.outline||(t.outline={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.back="back",t.front="front",t.type=e.createEnumType([{value:t.back,displayName:function(e){return e.get("Visual_Reference_Line_Behind")}},{value:t.front,displayName:function(e){return e.get("Visual_Reference_Line_InFront")}}])}(i=t.referenceLinePosition||(t.referenceLinePosition={}));var a;!function(t){t.left="left",t.right="right",t.type=e.createEnumType([{value:t.left,displayName:function(e){return e.get("Visual_Reference_Line_Data_Label_Left")}},{value:t.right,displayName:function(e){return e.get("Visual_Reference_Line_Data_Label_Right")}}])}(a=t.referenceLineDataLabelHorizontalPosition||(t.referenceLineDataLabelHorizontalPosition={}));var r;!function(t){t.above="above",t.under="under",t.type=e.createEnumType([{value:t.above,displayName:function(e){return e.get("Visual_Reference_Line_Data_Label_Above")}},{value:t.under,displayName:function(e){return e.get("Visual_Reference_Line_Data_Label_Under")}}])}(r=t.referenceLineDataLabelVerticalPosition||(t.referenceLineDataLabelVerticalPosition={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){!function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal"}(t.Orientation||(t.Orientation={}));var i=t.Orientation;t.type=e.createEnumType([{value:i.Vertical,displayName:function(e){return e.get("Slicer_Orientation_Vertical")}},{value:i.Horizontal,displayName:function(e){return e.get("Slicer_Orientation_Horizontal")}}])}(i=t.slicerOrientation||(t.slicerOrientation={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.left="Left",t.right="Right",t.type=e.createEnumType([{value:t.left,displayName:function(e){return e.get("Visual_yAxis_Left")}},{value:t.right,displayName:function(e){return e.get("Visual_yAxis_Right")}}])}(i=t.yAxisPosition||(t.yAxisPosition={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){return t||!e?0:e.getDuration()}e.MinervaAnimationDuration=250,
e.GetAnimationDuration=t}(t=e.AnimatorCommon||(e.AnimatorCommon={}));var i=function(){function e(e){e&&e.duration&&(this.animationDuration=e.duration),this.animationDuration=this.animationDuration>=0?this.animationDuration:t.MinervaAnimationDuration}return e.prototype.getDuration=function(){return this.animationDuration},e.prototype.animate=function(e){return null},e}();e.BaseAnimator=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);i.prototype=t.prototype,e.prototype=new i},powerbi;!function(e){var t;!function(e){var t=function(t){function i(e){t.call(this,e)}return __extends(i,t),i.prototype.animate=function(e){var t={failed:!0,shapes:null},i=e.viewModel,a=this.previousViewModel;return a&&(i.hasHighlights&&!a.hasHighlights?t=this.animateNormalToHighlighted(e):i.hasHighlights&&a.hasHighlights?t=this.animateHighlightedToHighlighted(e):!i.hasHighlights&&a.hasHighlights&&(t=this.animateHighlightedToNormal(e))),this.previousViewModel=i,t},i.prototype.animateNormalToHighlighted=function(t){var i=t.viewModel,a=t.itemCS,r=t.series.selectAll(a.selector),n=r.data(function(e){return e.data},function(e){return e.key}),o=i.hasHighlights;return n.enter().append("rect").attr("class",function(e){return a["class"].concat(e.highlight?" highlight":"")}).attr(t.layout.shapeLayoutWithoutHighlights),n.style("fill",function(e){return e.color}).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.selected,t.highlight,!1,o)}).transition().duration(this.animationDuration).attr(t.layout.shapeLayout),n.exit().remove(),{failed:!1,shapes:n}},i.prototype.animateHighlightedToHighlighted=function(e){var t=this.animateDefaultShapes(e.viewModel,e.series,e.layout,e.itemCS);return{failed:!1,shapes:t}},i.prototype.animateHighlightedToNormal=function(t){var i=t.itemCS,a=t.series.selectAll(i.selector),r=a.data(function(e){return e.data},function(e){return e.key}),n=t.interactivityService&&t.interactivityService.hasSelection();return r.enter().append("rect").attr("class",function(e){return i["class"].concat(e.highlight?" highlight":"")}),r.style("fill",function(e){return e.color}).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.selected,t.highlight,t.selected,!t.selected)}).transition().duration(this.animationDuration).attr(t.layout.shapeLayout).transition().duration(0).delay(this.animationDuration).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.selected,t.highlight,n,!1)}),r.exit().transition().duration(this.animationDuration).attr(n?t.layout.zeroShapeLayout:t.layout.shapeLayoutWithoutHighlights).remove(),{failed:!1,shapes:r}},i.prototype.animateDefaultShapes=function(t,i,a,r){var n=i.selectAll(r.selector),o=n.data(function(e){return e.data},function(e){return e.key});return o.enter().append("rect").attr("class",function(e){return r["class"].concat(e.highlight?" highlight":"")}),o.style("fill",function(e){return e.color}).style("fill-opacity",function(i){return e.ColumnUtil.getFillOpacity(i.selected,i.highlight,!1,t.hasHighlights)}).transition().duration(this.animationDuration).attr(a.shapeLayout),o.exit().remove(),o},i}(e.BaseAnimator);e.WebColumnChartAnimator=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(t){function i(e){t.call(this,e)}return __extends(i,t),i.prototype.animate=function(e){var t={failed:!0,shapes:null,highlightShapes:null},i=e.viewModel,a=this.previousViewModel;return a&&(i.hasHighlights&&!a.hasHighlights?t=this.animateNormalToHighlighted(e):i.hasHighlights&&a.hasHighlights?t=this.animateHighlightedToHighlighted(e):!i.hasHighlights&&a.hasHighlights&&(t=this.animateHighlightedToNormal(e))),this.previousViewModel=i,t},i.prototype.animateNormalToHighlighted=function(t){var i=this.animateDefaultShapes(t),a=t.graphicsContext.select(".slices").selectAll("path.slice-highlight").data(t.viewModel.dataPoints.filter(function(e){return null!=e.data.highlightRatio}),function(e){return e.data.identity.getKey()});return a.enter().insert("path").classed("slice-highlight",!0).each(function(e){this._current=e}),e.DonutChart.isSingleColor(t.viewModel.dataPoints.filter(function(e){return null!=e.data.highlightRatio})),a.style("fill",function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value}).style("fill-opacity",function(i){return e.ColumnUtil.getFillOpacity(i.data.selected,!0,!1,t.viewModel.hasHighlights)}).style("stroke-dasharray",function(i){return e.DonutChart.drawStrokeForDonutChart(t.radius,t.innerArcRadiusRatio,i,t.sliceWidthRatio,i.data.highlightRatio)}).style("stroke-width",function(e){return 0===e.data.highlightRatio?0:e.data.strokeWidth}).attr(t.layout.shapeLayout).transition().duration(this.animationDuration).attr(t.layout.highlightShapeLayout),a.exit().remove(),e.NewDataLabelUtils.drawDefaultLabels(t.labelGraphicsContext,t.labels,!1),e.NewDataLabelUtils.drawLabelLeaderLines(t.labelGraphicsContext,t.labels),{failed:!1,shapes:i,highlightShapes:a}},i.prototype.animateHighlightedToHighlighted=function(t){var i=this.animateDefaultShapes(t),a=this.animateDefaultHighlightShapes(t);return e.NewDataLabelUtils.drawDefaultLabels(t.labelGraphicsContext,t.labels,!1),e.NewDataLabelUtils.drawLabelLeaderLines(t.labelGraphicsContext,t.labels),{failed:!1,shapes:i,highlightShapes:a}},i.prototype.animateHighlightedToNormal=function(t){var i=t.interactivityService&&t.interactivityService.hasSelection(),a=this.animationDuration,r=t.graphicsContext.select(".slices").selectAll("path.slice").data(t.viewModel.dataPoints,function(e){return e.data.identity.getKey()});r.enter().insert("path").classed("slice",!0).each(function(e){this._current=e}),e.DonutChart.isSingleColor(t.viewModel.dataPoints),r.style("fill",function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value}).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.data.selected,!1,t.data.selected,!t.data.selected)}).style("stroke-dasharray",function(i){return e.DonutChart.drawStrokeForDonutChart(t.radius,t.innerArcRadiusRatio,i,t.sliceWidthRatio)}).style("stroke-width",function(e){return e.data.strokeWidth}).transition().duration(a).attr(t.layout.shapeLayout).transition().duration(0).delay(a).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.data.selected,!1,i,!1)}),r.exit().remove();var n=t.graphicsContext.select(".slices").selectAll("path.slice-highlight").data(t.viewModel.dataPoints.filter(function(e){return null!=e.data.highlightRatio}),function(e){return e.data.identity.getKey()});return n.enter().insert("path").classed("slice-highlight",!0).each(function(e){this._current=e}),e.DonutChart.isSingleColor(t.viewModel.dataPoints.filter(function(e){return null!=e.data.highlightRatio})),n.style("fill",function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value}).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(!1,!0,!1,!0)}).style("stroke-dasharray",function(i){return e.DonutChart.drawStrokeForDonutChart(t.radius,t.innerArcRadiusRatio,i,t.sliceWidthRatio,i.data.highlightRatio)}).style("stroke-width",function(e){return 0===e.data.highlightRatio?0:e.data.strokeWidth}).transition().duration(a).attr(i?t.layout.zeroShapeLayout:t.layout.shapeLayout).remove(),n.exit().remove(),e.NewDataLabelUtils.drawDefaultLabels(t.labelGraphicsContext,t.labels,!1),e.NewDataLabelUtils.drawLabelLeaderLines(t.labelGraphicsContext,t.labels),{failed:!1,shapes:r,highlightShapes:n}},i.prototype.animateDefaultShapes=function(t){var i=t.graphicsContext.select(".slices").selectAll("path.slice").data(t.viewModel.dataPoints,function(e){return e.data.identity.getKey()});return i.enter().insert("path").classed("slice",!0).each(function(e){this._current=e}),e.DonutChart.isSingleColor(t.viewModel.dataPoints),i.style("fill",function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value}).style("fill-opacity",function(i){return e.ColumnUtil.getFillOpacity(i.data.selected,!1,!1,t.viewModel.hasHighlights)}).style("stroke-dasharray",function(i){return e.DonutChart.drawStrokeForDonutChart(t.radius,t.innerArcRadiusRatio,i,t.sliceWidthRatio)}).style("stroke-width",function(e){return e.data.strokeWidth}).transition().duration(this.animationDuration).attr(t.layout.shapeLayout),i.exit().remove(),i},i.prototype.animateDefaultHighlightShapes=function(t){var i=t.graphicsContext.select(".slices").selectAll("path.slice-highlight").data(t.viewModel.dataPoints.filter(function(e){return null!=e.data.highlightRatio}),function(e){return e.data.identity.getKey()});return i.enter().insert("path").classed("slice-highlight",!0).each(function(e){this._current=e}),e.DonutChart.isSingleColor(t.viewModel.dataPoints.filter(function(e){return null!=e.data.highlightRatio})),i.style("fill",function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value}).style("fill-opacity",function(i){return e.ColumnUtil.getFillOpacity(i.data.selected,!0,!1,t.viewModel.hasHighlights)}).style("stroke-dasharray",function(i){return e.DonutChart.drawStrokeForDonutChart(t.radius,t.innerArcRadiusRatio,i,t.sliceWidthRatio,i.data.highlightRatio)}).style("stroke-width",function(e){return 0===e.data.highlightRatio?0:e.data.strokeWidth}).transition().duration(this.animationDuration).attr(t.layout.highlightShapeLayout),i.exit().remove(),i},i}(e.BaseAnimator);e.WebDonutChartAnimator=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=function(i){function a(e){i.call(this,e)}return __extends(a,i),a.prototype.animate=function(e){var t={failed:!0,shapes:null,dataLabels:null},i=e.viewModel,a=this.previousViewModel;return a&&(i.hasHighlights&&!a.hasHighlights?t=this.animateNormalToHighlighted(e):i.hasHighlights&&a.hasHighlights?t=this.animateHighlightedToHighlighted(e):!i.hasHighlights&&a.hasHighlights&&(t=this.animateHighlightedToNormal(e))),this.previousViewModel=i,t},a.prototype.animateNormalToHighlighted=function(e){var i=e.viewModel,a=e.layout,r=!0,n=!1;this.animateDefaultAxis(e.axisGraphicsContext,e.axisOptions,e.isHidingPercentBars);var o=e.shapeGraphicsContext.selectAll(t.FunnelChart.Selectors.funnel.bars.selector).data(i.slices,function(e){return e.key});o.enter().append("rect").attr("class",function(e){return e.highlight?t.FunnelChart.FunnelBarHighlightClass:t.FunnelChart.Selectors.funnel.bars["class"]}).attr(a.shapeLayoutWithoutHighlights),o.style("fill",function(e){return e.color}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,n,r)}).transition().duration(this.animationDuration).attr(a.shapeLayout),o.exit().remove(),this.animatePercentBars(e);var s=this.animateDefaultDataLabels(e);return{failed:!1,shapes:o,dataLabels:s}},a.prototype.animateHighlightedToHighlighted=function(e){var t=e.viewModel,i=e.layout;this.animateDefaultAxis(e.axisGraphicsContext,e.axisOptions,e.isHidingPercentBars);var a=this.animateDefaultShapes(t,t.slices,e.shapeGraphicsContext,i);this.animatePercentBars(e);var r=this.animateDefaultDataLabels(e);return{failed:!1,shapes:a,dataLabels:r}},a.prototype.animateHighlightedToNormal=function(e){var i=e.viewModel,a=e.layout,r=e.interactivityService?e.interactivityService.hasSelection():!1;this.animateDefaultAxis(e.axisGraphicsContext,e.axisOptions,e.isHidingPercentBars);var n=e.shapeGraphicsContext.selectAll(t.FunnelChart.Selectors.funnel.bars.selector).data(i.slices,function(e){return e.key});n.enter().append("rect").attr("class",function(e){return e.highlight?t.FunnelChart.FunnelBarHighlightClass:t.FunnelChart.Selectors.funnel.bars["class"]}),n.style("fill",function(e){return e.color}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,r,!e.selected)}).transition().duration(this.animationDuration).attr(a.shapeLayoutWithoutHighlights).transition().duration(0).delay(this.animationDuration).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,r,!1)});var o=n.exit();o.transition().duration(this.animationDuration).attr(r?a.zeroShapeLayout:a.shapeLayoutWithoutHighlights).remove(),this.animatePercentBars(e);var s=this.animateDefaultDataLabels(e);return{failed:!1,shapes:n,dataLabels:s}},a.prototype.animateDefaultAxis=function(e,i,a){var r=d3.scale.ordinal().domain(i.categoryLabels).rangeBands([i.rangeStart,i.rangeEnd],i.barToSpaceRatio,a?i.barToSpaceRatio:t.FunnelChart.PercentBarToBarRatio),n=d3.svg.axis().scale(r).orient("right").tickPadding(t.FunnelChart.TickPadding).innerTickSize(t.FunnelChart.InnerTickSize);e.classed("axis",!0).transition().duration(this.animationDuration).attr("transform",t.SVGUtil.translate(0,i.margin.top)).call(n)},a.prototype.animateDefaultShapes=function(e,i,a,r){var n=e.hasHighlights,o=a.selectAll(t.FunnelChart.Selectors.funnel.bars.selector).data(i,function(e){return e.key});return o.enter().append("rect").attr("class",function(e){return e.highlight?t.FunnelChart.FunnelBarHighlightClass:t.FunnelChart.Selectors.funnel.bars["class"]}),o.style("fill",function(e){return e.color}).style("fill-opacity",function(e){return function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,!1,n)}}).transition().duration(this.animationDuration).attr(r.shapeLayout),o.exit().remove(),o},a.prototype.animateDefaultDataLabels=function(e){var i;return e.viewModel.dataLabelsSettings.show&&e.viewModel.canShowDataLabels?i=t.dataLabelUtils.drawDefaultLabelsForFunnelChart(e.viewModel.slices,e.labelGraphicsContext,e.labelLayout,!0,this.animationDuration):t.dataLabelUtils.cleanDataLabels(e.labelGraphicsContext),i},a.prototype.animatePercentBars=function(e){var i=e.viewModel,a=e.isHidingPercentBars;if(a||!i.slices||(i.hasHighlights?i.slices.length/2:i.slices.length)<2)return void this.animatePercentBarComponents([],e);var r=[i.slices[i.hasHighlights?1:0],i.slices[i.slices.length-1]],n=t.FunnelChart.getFunnelSliceValue(r[0]);if(0>=n)return void this.animatePercentBarComponents([],e);var o=r.map(function(e,i){return{value:t.FunnelChart.getFunnelSliceValue(e),percent:0===i?1:t.FunnelChart.getFunnelSliceValue(e)/n,isTop:0===i}});this.animatePercentBarComponents(o,e)},a.prototype.animateToFunnelPercent=function(e,t,i){return e.data(t).transition().duration(this.animationDuration).attr(i)},a.prototype.animatePercentBarComponents=function(i,a){var r=a.percentGraphicsContext,n=a.layout,o=[{percent:0,value:0,isTop:!0},{percent:0,value:0,isTop:!1}],s=r.selectAll(t.FunnelChart.Selectors.percentBar.mainLine.selector).data(i);this.animateToFunnelPercent(s.exit(),o,n.percentBarLayout.mainLine).remove(),s.enter().append("line").classed(t.FunnelChart.Selectors.percentBar.mainLine["class"],!0).data(o).attr(n.percentBarLayout.mainLine),this.animateToFunnelPercent(s,i,n.percentBarLayout.mainLine);var l=r.selectAll(t.FunnelChart.Selectors.percentBar.leftTick.selector).data(i);this.animateToFunnelPercent(l.exit(),o,n.percentBarLayout.leftTick).remove(),l.enter().append("line").classed(t.FunnelChart.Selectors.percentBar.leftTick["class"],!0).data(o).attr(n.percentBarLayout.leftTick),this.animateToFunnelPercent(l,i,n.percentBarLayout.leftTick);var u=r.selectAll(t.FunnelChart.Selectors.percentBar.rightTick.selector).data(i);this.animateToFunnelPercent(u.exit(),o,n.percentBarLayout.rightTick).remove(),u.enter().append("line").classed(t.FunnelChart.Selectors.percentBar.rightTick["class"],!0).data(o).attr(n.percentBarLayout.rightTick),this.animateToFunnelPercent(u,i,n.percentBarLayout.rightTick);var c=r.selectAll(t.FunnelChart.Selectors.percentBar.text.selector).data(i);this.animateToFunnelPercent(c.exit(),o,n.percentBarLayout.text).remove(),c.enter().append("text").classed(t.FunnelChart.Selectors.percentBar.text["class"],!0).data(o).attr(n.percentBarLayout.text),this.animateToFunnelPercent(c,i,n.percentBarLayout.text).text(function(i){return e.formattingService.formatValue(i.percent,t.valueFormatter.getLocalizedString("Percentage1"))}),t.SVGUtil.flushAllD3TransitionsIfNeeded(a.visualInitOptions)},a}(t.BaseAnimator);t.WebFunnelAnimator=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(t){function i(e){t.call(this,e)}return __extends(i,t),i.prototype.animate=function(e){var t={failed:!0,shapes:null,highlightShapes:null,majorLabels:null,minorLabels:null},i=e.viewModel,a=this.previousViewModel;return a&&(i.hasHighlights&&!a.hasHighlights?t=this.animateNormalToHighlighted(e):i.hasHighlights&&a.hasHighlights?t=this.animateHighlightedToHighlighted(e):!i.hasHighlights&&a.hasHighlights&&(t=this.animateHighlightedToNormal(e))),this.previousViewModel=i,t},i.prototype.animateNormalToHighlighted=function(t){var i=!1,a=!0,r=this.animateDefaultShapes(t.shapeGraphicsContext,t.nodes,i,a,t.layout),n=t.shapeGraphicsContext.selectAll("."+e.Treemap.HighlightNodeClassName).data(t.highlightNodes,function(e){return e.key+"highlight"});n.enter().append("rect").attr("class",t.layout.highlightShapeClass).attr(t.layout.shapeLayout),n.style("fill",function(t){return e.Treemap.getFill(t,!0)}).style("fill-opacity",function(t){return e.Treemap.getFillOpacity(t,i,a,!0)}).transition().duration(this.animationDuration).attr(t.layout.highlightShapeLayout),n.exit().remove();var o=this.animateDefaultMajorLabels(t.labelGraphicsContext,t.majorLabeledNodes,t.labelSettings,t.layout),s=this.animateDefaultMinorLabels(t.labelGraphicsContext,t.minorLabeledNodes,t.labelSettings,t.layout);return{failed:!1,shapes:r,highlightShapes:n,majorLabels:o,minorLabels:s}},i.prototype.animateHighlightedToHighlighted=function(t){var i=!1,a=!0,r=this.animateDefaultShapes(t.shapeGraphicsContext,t.nodes,i,a,t.layout);t.shapeGraphicsContext.selectAll("."+e.Treemap.HighlightNodeClassName).data(t.highlightNodes,function(e){return e.key+"highlight"});var n=this.animateDefaultHighlightShapes(t.shapeGraphicsContext,t.highlightNodes,i,a,t.layout),o=this.animateDefaultMajorLabels(t.labelGraphicsContext,t.majorLabeledNodes,t.labelSettings,t.layout),s=this.animateDefaultMinorLabels(t.labelGraphicsContext,t.minorLabeledNodes,t.labelSettings,t.layout);return{failed:!1,shapes:r,highlightShapes:n,majorLabels:o,minorLabels:s}},i.prototype.animateHighlightedToNormal=function(t){var i=t.interactivityService?t.interactivityService.hasSelection():!1,a=t.shapeGraphicsContext.selectAll("."+e.Treemap.TreemapNodeClassName).data(t.nodes,function(e){return e.key});a.enter().append("rect").attr("class",t.layout.shapeClass),a.transition().duration(this.animationDuration).style("fill",function(t){return e.Treemap.getFill(t,!1)}).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.selected,!1,t.selected,!t.selected)}).attr(t.layout.shapeLayout).transition().duration(0).delay(this.animationDuration).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.selected,!1,i,!1)}),a.exit().remove();var r=t.shapeGraphicsContext.selectAll("."+e.Treemap.HighlightNodeClassName).data(t.nodes,function(e){return e.key+"highlight"});r.enter().append("rect").attr("class",t.layout.highlightShapeClass),r.style("fill",function(t){return e.Treemap.getFill(t,!0)}).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.selected,!0,t.selected,!t.selected)}).transition().duration(this.animationDuration).attr(i?t.layout.zeroShapeLayout:t.layout.shapeLayout).remove(),r.exit().remove();var n=this.animateDefaultMajorLabels(t.labelGraphicsContext,t.majorLabeledNodes,t.labelSettings,t.layout),o=this.animateDefaultMinorLabels(t.labelGraphicsContext,t.minorLabeledNodes,t.labelSettings,t.layout);return{failed:!1,shapes:a,highlightShapes:r,majorLabels:n,minorLabels:o}},i.prototype.animateDefaultShapes=function(t,i,a,r,n){var o=!1,s=t.selectAll("."+e.Treemap.TreemapNodeClassName).data(i,function(e){return e.key});return s.enter().append("rect").attr("class",n.shapeClass),s.transition().duration(this.animationDuration).style("fill",function(t){return e.Treemap.getFill(t,o)}).style("fill-opacity",function(t){return e.Treemap.getFillOpacity(t,a,r,o)}).attr(n.shapeLayout),s.exit().remove(),s},i.prototype.animateDefaultHighlightShapes=function(t,i,a,r,n){var o=!0,s=t.selectAll("."+e.Treemap.HighlightNodeClassName).data(i,function(e){return e.key+"highlight"});return s.enter().append("rect").attr("class",n.highlightShapeClass),s.transition().duration(this.animationDuration).style("fill",function(t){return e.Treemap.getFill(t,o)}).style("fill-opacity",function(t){return e.Treemap.getFillOpacity(t,a,r,o)}).attr(n.highlightShapeLayout),s.exit().remove(),s},i.prototype.animateDefaultMajorLabels=function(t,i,a,r){var n=t.selectAll("."+e.Treemap.MajorLabelClassName).data(i,function(e){return e.key});return n.enter().append("text").attr("class",r.majorLabelClass),n.text(r.majorLabelText).style("fill",function(){return a.labelColor}).transition().duration(this.animationDuration).attr(r.majorLabelLayout),n.exit().remove(),n},i.prototype.animateDefaultMinorLabels=function(t,i,a,r){var n=t.selectAll("."+e.Treemap.MinorLabelClassName).data(i,function(e){return e.key});return n.enter().append("text").attr("class",r.minorLabelClass),n.text(r.minorLabelText).style("fill",function(){return a.labelColor}).transition().duration(this.animationDuration).attr(r.minorLabelLayout),n.exit().remove(),n},i}(e.BaseAnimator);e.WebTreemapAnimator=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){e.animatedTextObjectDescs={general:{properties:{formatString:{type:{formatting:{formatString:!0}}}}}},e.animatedNumberCapabilities={objects:e.animatedTextObjectDescs,dataViewMappings:[{single:{role:"Values"}}],supportsSelection:!1}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.basicShapeCapabilities={objects:{line:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Line"),properties:{lineColor:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_LineColor"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Background_Transparency"),description:e.data.createDisplayNameGetter("Visual_Background_TransparencyDescription"),type:{numeric:!0}},weight:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Weight"),type:{numeric:!0}},roundEdge:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_RoundEdges"),type:{numeric:!0}}}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},fillColor:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_FillColor"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Background_Transparency"),description:e.data.createDisplayNameGetter("Visual_Background_TransparencyDescription"),type:{numeric:!0}}}},rotation:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Rotate"),properties:{angle:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Rotate"),type:{numeric:!0}}}},general:{properties:{shapeType:{type:{text:!0}}}}},suppressDefaultTitle:!0,canRotate:!1,supportsSelection:!1},t.basicShapeProps={general:{shapeType:{objectName:"general",propertyName:"shapeType"}},line:{transparency:{objectName:"line",propertyName:"transparency"},weight:{objectName:"line",propertyName:"weight"},roundEdge:{objectName:"line",propertyName:"roundEdge"},lineColor:{objectName:"line",propertyName:"lineColor"}},fill:{transparency:{objectName:"fill",propertyName:"transparency"},fillColor:{objectName:"fill",propertyName:"fillColor"},show:{objectName:"fill",propertyName:"show"}},rotation:{angle:{objectName:"rotation",propertyName:"angle"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(i){return void 0===i&&(i=!1),{dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Axis"),description:e.data.createDisplayNameGetter("Role_DisplayName_AxisDescription")},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Value"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0},suppressFormatPainterCopy:!0},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},categoryAxis:{displayName:i?e.data.createDisplayNameGetter("Visual_YAxis"):e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),description:e.data.createDisplayNameGetter("Visual_YAxis_PositionDescription"),type:{enumeration:t.yAxisPosition.type}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0},suppressFormatPainterCopy:!0},axisType:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Type"),type:{enumeration:t.axisType.type}},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:i?e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"):e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_DisplayUnits_Auto"),type:{numeric:!0}}}},valueAxis:{displayName:i?e.data.createDisplayNameGetter("Visual_XAxis"):e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),description:e.data.createDisplayNameGetter("Visual_YAxis_PositionDescription"),type:{enumeration:t.yAxisPosition.type}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),suppressFormatPainterCopy:!0},intersection:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Intersection"),type:{numeric:!0},placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto")},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:i?e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"):e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_DisplayUnits_Auto"),type:{numeric:!0}}}},y1AxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},position:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange_Description"),type:{enumeration:t.referenceLinePosition.type}},dataLabelShow:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Show_Description"),type:{bool:!0}},dataLabelColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color_Description"),type:{fill:{solid:{color:!0}}}},dataLabelDecimalPoints:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Decimal_Points"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},dataLabelHorizontalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Horizontal_Position"),
description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Horizontal_Position_Description"),type:{enumeration:t.referenceLineDataLabelHorizontalPosition.type}},dataLabelVerticalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Vertical_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Vertical_Position_Description"),type:{enumeration:t.referenceLineDataLabelVerticalPosition.type}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},showSeries:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}},suppressFormatPainterCopy:!0},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0},suppressFormatPainterCopy:!0},showAll:{displayName:e.data.createDisplayNameGetter("Visual_ShowAll"),type:{bool:!0}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},plotArea:{displayName:e.data.createDisplayNameGetter("Visual_Plot"),properties:{transparency:{displayName:e.data.createDisplayNameGetter("Visual_Background_Transparency"),type:{numeric:!0}},image:{type:{image:{}}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:0},Gradient:{max:0}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1},Gradient:{max:0}},{Category:{max:1},Series:{max:0},Y:{min:0,max:1},Gradient:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{"for":{"in":"Y"}},{bind:{to:"Gradient"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2},supported:{min:0}}}}],supportsHighlight:!0,sorting:{"default":{}},drilldown:{roles:["Category"]}}}t.getColumnChartCapabilities=i,t.columnChartProps={dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"},showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}},general:{formatString:{objectName:"general",propertyName:"formatString"}},categoryAxis:{axisType:{objectName:"categoryAxis",propertyName:"axisType"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}},plotArea:{image:{objectName:"plotArea",propertyName:"image"},transparency:{objectName:"plotArea",propertyName:"transparency"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.comboChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_ComboChart_Category"),description:e.data.createDisplayNameGetter("Role_ComboChart_CategoryDescription")},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_ComboChart_Series")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_ComboChart_Y"),description:e.data.createDisplayNameGetter("Role_ComboChart_YDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Y2",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_ComboChart_Y2"),description:e.data.createDisplayNameGetter("Role_ComboChart_Y2Description"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{properties:{formatString:{type:{formatting:{formatString:!0}}},visualType1:{type:{text:!0}},visualType2:{type:{text:!0}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0},suppressFormatPainterCopy:!0},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},axisType:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Type"),type:{enumeration:t.axisType.type}},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},valueAxis:{displayName:e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},axisLabel:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_ColumnTitle"),type:{none:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),type:{enumeration:t.yAxisPosition.type}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},secShow:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_ShowSecondary"),type:{bool:!0}},secAxisLabel:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_LineTitle"),type:{none:!0}},secPosition:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),type:{enumeration:t.yAxisPosition.type}},secAxisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},secStart:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0}},secEnd:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0}},secShowAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},secAxisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},secLabelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},secLabelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}},suppressFormatPainterCopy:!0},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0},suppressFormatPainterCopy:!0},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:0}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{"for":{"in":"Y"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2},supported:{min:0}}}},{conditions:[{Category:{max:1},Series:{max:0},Y2:{min:1}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1},Y2:{min:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{"for":{"in":"Y2"}}],dataReductionAlgorithm:{top:{}}},rowCount:{preferred:{min:2},supported:{min:0}}}}],supportsHighlight:!0,sorting:{"default":{}},drilldown:{roles:["Category"]}},t.comboChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},valueAxis:{secShow:{objectName:"valueAxis",propertyName:"secShow"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.donutChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Details"),description:e.data.createDisplayNameGetter("Role_DisplayName_DetailsDonutChartDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0},suppressFormatPainterCopy:!0},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DetailLabels"),properties:{show:{type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}},suppressFormatPainterCopy:!0},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0},suppressFormatPainterCopy:!0},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}},suppressFormatPainterCopy:!0},labelStyle:{displayName:e.data.createDisplayNameGetter("Visual_LabelStyle"),type:{enumeration:t.labelStyle.type}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:0}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{bind:{to:"Y"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2},supported:{min:1}}}}],sorting:{"default":{}},supportsHighlight:!0,drilldown:{roles:["Category"]}},t.donutChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"},showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"},labelColor:{objectName:"legend",propertyName:"labelColor"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.dataDotChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping},{name:"Y",kind:e.VisualDataRoleKind.Measure,requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Y:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{"for":{"in":"Y"},dataReductionAlgorithm:{top:{}}}]}}}]}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.filledMapCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Location"),description:e.data.createDisplayNameGetter("Role_DisplayName_LocationFilledMapDescription"),preferredTypes:[{geography:{address:!0}},{geography:{city:!0}},{geography:{continent:!0}},{geography:{country:!0}},{geography:{county:!0}},{geography:{place:!0}},{geography:{postalCode:!0}},{geography:{region:!0}},{geography:{stateOrProvince:!0}}]},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"X",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Longitude"),description:e.data.createDisplayNameGetter("Role_DisplayName_LongitudeFilledMapDescription"),preferredTypes:[{geography:{longitude:!0}}]},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Latitude"),description:e.data.createDisplayNameGetter("Role_DisplayName_LatitudeFilledMapDescription"),preferredTypes:[{geography:{latitude:!0}}]},{name:"Size",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{formatting:{legendPosition:!0}}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),type:{fillRule:{}},rule:{inputRole:"Size",output:{property:"fill",selector:["Category"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),properties:{show:{type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),properties:{show:{type:{bool:!0}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:1},X:{max:1},Y:{max:1},Size:{max:1}},{Category:{max:1},Series:{max:0},X:{max:1},Y:{max:1},Size:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{bind:{to:"X"}},{bind:{to:"Y"}},{bind:{to:"Size"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2}}}}],sorting:{custom:{}},drilldown:{roles:["Category"]}},t.filledMapProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"},showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"}},labels:{show:{objectName:"labels",propertyName:"show"},color:{objectName:"labels",propertyName:"color"},labelDisplayUnits:{objectName:"labels",propertyName:"labelDisplayUnits"},labelPrecision:{objectName:"labels",propertyName:"labelPrecision"}},categoryLabels:{show:{objectName:"categoryLabels",propertyName:"show"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.funnelChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Group"),description:e.data.createDisplayNameGetter("Role_DisplayName_GroupFunnelDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],dataViewMappings:[{conditions:[{Category:{max:0},Gradient:{max:0}},{Category:{max:1},Y:{max:1},Gradient:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{"for":{"in":"Y"}},{bind:{to:"Gradient"}}],dataReductionAlgorithm:{top:{}}},rowCount:{preferred:{min:1}}}}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelPosition:{displayName:e.data.createDisplayNameGetter("Visual_Position"),type:{enumeration:t.labelPosition.type},suppressFormatPainterCopy:!0},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}},suppressFormatPainterCopy:!0},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0},suppressFormatPainterCopy:!0},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},percentBarLabel:{displayName:e.data.createDisplayNameGetter("Visual_PercentBarLabel"),description:e.data.createDisplayNameGetter("Visual_PercentBarLabelDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}}},supportsHighlight:!0,sorting:{"default":{}},drilldown:{roles:["Category"]}},t.funnelChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.gaugeRoleNames={y:"Y",minValue:"MinValue",maxValue:"MaxValue",targetValue:"TargetValue"},t.gaugeCapabilities={dataRoles:[{name:t.gaugeRoleNames.y,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Value"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValueDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:t.gaugeRoleNames.minValue,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_MinValue"),description:e.data.createDisplayNameGetter("Role_DisplayName_MinValueDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:t.gaugeRoleNames.maxValue,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_MaxValue"),description:e.data.createDisplayNameGetter("Role_DisplayName_MaxValueDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:t.gaugeRoleNames.targetValue,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_TargetValue"),description:e.data.createDisplayNameGetter("Role_DisplayName_TargetValueDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{properties:{formatString:{type:{formatting:{formatString:!0}}}}},axis:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_Axis"),properties:{min:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_Axis_Min"),type:{numeric:!0}},max:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_Axis_Max"),type:{numeric:!0}},target:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_Axis_Target"),type:{numeric:!0}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),properties:{show:{type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},calloutValue:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_CalloutValue"),properties:{show:{type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}}},dataViewMappings:[{conditions:[{Y:{max:1},MinValue:{max:1},MaxValue:{max:1},TargetValue:{max:1}}],categorical:{values:{select:[{bind:{to:"Y"}},{bind:{to:"MinValue"}},{bind:{to:"MaxValue"}},{bind:{to:"TargetValue"}}]}}}],supportsSelection:!1}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.imageVisualCapabilities={objects:{general:{properties:{imageUrl:{type:{misc:{imageUrl:!0}}}}},imageScaling:{displayName:e.data.createDisplayNameGetter("Visual_Image_Scaling_Type"),properties:{imageScalingType:{displayName:e.data.createDisplayNameGetter("Visual_Image_Scaling_Type"),type:{enumeration:t.imageScalingType.type}}}}},suppressDefaultTitle:!0,supportsSelection:!1}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.scriptVisualCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.GroupingOrMeasure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values")}],dataViewMappings:[{scriptResult:{dataInput:{table:{rows:{"for":{"in":"Values"},dataReductionAlgorithm:{top:{}}}}},script:{source:{objectName:"script",propertyName:"source"},provider:{objectName:"script",propertyName:"provider"},imageFormat:"svg"}}}],objects:{script:{properties:{provider:{type:{text:!0}},source:{type:{scripting:{source:!0}}}}},lastSavedImage:{properties:{imageUrl:{type:{misc:{imageUrl:!0}}},viewportHeight:{type:{numeric:!0}},viewportWidth:{type:{numeric:!0}}}}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.consoleWriterCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping},{name:"Y",kind:e.VisualDataRoleKind.Measure}],dataViewMappings:[{categorical:{categories:{"for":{"in":"Category"}}}}],dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}}}}}}(i=t.samples||(t.samples={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(){}return e.converter=function(e){return window.console.log("converter"),
window.console.log(e),{}},e.prototype.init=function(e){var t=d3.select(e.element.get(0)).append("div");t.append("h1").text("ConsoleWriter"),t.append("p").text("This IVisual writes messages passed to it to the javscript console output. Check your console for the actual messages passed. For more information, click below");var i=t.append("a");i.attr("href","http://microsoft.github.io/PowerBI-visuals/modules/powerbi.html").text("Online help"),window.console.log("init"),window.console.log(e)},e.prototype.onResizing=function(e){},e.prototype.update=function(e){window.console.log("update"),window.console.log(e)},e}();e.ConsoleWriter=t}(t=e.samples||(e.samples={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.lineChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Axis"),description:e.data.createDisplayNameGetter("Role_DisplayName_AxisDescription")},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0},suppressFormatPainterCopy:!0},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}}}},categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},axisType:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Type"),type:{enumeration:t.axisType.type}},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},valueAxis:{displayName:e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),description:e.data.createDisplayNameGetter("Visual_YAxis_PositionDescription"),type:{enumeration:t.yAxisPosition.type}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},y1AxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},position:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange_Description"),type:{enumeration:t.referenceLinePosition.type}},dataLabelShow:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Show_Description"),type:{bool:!0}},dataLabelColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color_Description"),type:{fill:{solid:{color:!0}}}},dataLabelDecimalPoints:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Decimal_Points"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},dataLabelHorizontalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Horizontal_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Horizontal_Position_Description"),type:{enumeration:t.referenceLineDataLabelHorizontalPosition.type}},dataLabelVerticalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Vertical_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Vertical_Position_Description"),type:{enumeration:t.referenceLineDataLabelVerticalPosition.type}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},showSeries:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}},suppressFormatPainterCopy:!0},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0},suppressFormatPainterCopy:!0},showAll:{displayName:e.data.createDisplayNameGetter("Visual_ShowAll"),type:{bool:!0}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}},labelDensity:{displayName:e.data.createDisplayNameGetter("Visual_LabelDensity"),type:{formatting:{labelDensity:!0}}}}},plotArea:{displayName:e.data.createDisplayNameGetter("Visual_Plot"),properties:{transparency:{displayName:e.data.createDisplayNameGetter("Visual_Background_Transparency"),type:{numeric:!0}},image:{type:{image:{}}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:0}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{"for":{"in":"Y"}}],dataReductionAlgorithm:{top:{}}}}}}],sorting:{"default":{}}},t.lineChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"}},categoryAxis:{axisType:{objectName:"categoryAxis",propertyName:"axisType"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}},labels:{labelDensity:{objectName:"labels",propertyName:"labelDensity"}},plotArea:{image:{objectName:"plotArea",propertyName:"image"},transparency:{objectName:"plotArea",propertyName:"transparency"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.mapCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Location"),description:e.data.createDisplayNameGetter("Role_DisplayName_LocationMapDescription"),preferredTypes:[{geography:{address:!0}},{geography:{city:!0}},{geography:{continent:!0}},{geography:{country:!0}},{geography:{county:!0}},{geography:{place:!0}},{geography:{postalCode:!0}},{geography:{region:!0}},{geography:{stateOrProvince:!0}}]},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"X",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Longitude"),description:e.data.createDisplayNameGetter("Role_DisplayName_LongitudeMapDescription"),preferredTypes:[{geography:{longitude:!0}}]},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Latitude"),description:e.data.createDisplayNameGetter("Role_DisplayName_LatitudeMapDescription"),preferredTypes:[{geography:{latitude:!0}}]},{name:"Size",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:1},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:0}},{Category:{max:1},Series:{max:0},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{bind:{to:"X"}},{bind:{to:"Y"}},{bind:{to:"Size"}},{bind:{to:"Gradient"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2}}}}],sorting:{custom:{}},drilldown:{roles:["Category"]}},t.mapProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"},showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.multiRowCardCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.GroupingOrMeasure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Fields"),description:e.data.createDisplayNameGetter("Role_DisplayName_FieldsDescription")}],objects:{general:{properties:{formatString:{type:{formatting:{formatString:!0}}}}},cardTitle:{displayName:e.data.createDisplayNameGetter("Visual_CardTitle"),description:e.data.createDisplayNameGetter("Visual_CardTitleDescription"),properties:{color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},dataLabels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}}},dataViewMappings:[{table:{rows:{"for":{"in":"Values"},dataReductionAlgorithm:{window:{}}},rowCount:{preferred:{min:1}}}}],suppressDefaultTitle:!0,supportsSelection:!1}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){e.textboxCapabilities={objects:{general:{properties:{paragraphs:{type:{paragraphs:{}}}}}},suppressDefaultTitle:!0,supportsSelection:!1}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.cheerMeterCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping},{name:"Y",kind:e.VisualDataRoleKind.Measure,requiredTypes:[{numeric:!0},{integer:!0}]}],dataViewMappings:[{categorical:{categories:{"for":{"in":"Category"}}}}],dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}}}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.scatterChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Details"),description:e.data.createDisplayNameGetter("Role_DisplayName_DetailsScatterChartDescription")},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"X",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_X"),description:e.data.createDisplayNameGetter("Role_DisplayName_XScatterChartDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Y"),description:e.data.createDisplayNameGetter("Role_DisplayName_YScatterChartDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Size",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Size"),description:e.data.createDisplayNameGetter("Role_DisplayName_SizeDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Play",kind:e.VisualDataRoleKind.Grouping,displayName:"Play Axis"}],objects:{dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},valueAxis:{displayName:e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),description:e.data.createDisplayNameGetter("Visual_YAxis_PositionDescription"),type:{enumeration:t.yAxisPosition.type}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},xAxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_X"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},position:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange_Description"),type:{enumeration:t.referenceLinePosition.type}},dataLabelShow:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Show_Description"),type:{bool:!0}},dataLabelColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color_Description"),type:{fill:{solid:{color:!0}}}},dataLabelDecimalPoints:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Decimal_Points"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},dataLabelHorizontalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Horizontal_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Horizontal_Position_Description"),type:{enumeration:t.referenceLineDataLabelHorizontalPosition.type}},dataLabelVerticalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Vertical_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Vertical_Position_Description"),type:{enumeration:t.referenceLineDataLabelVerticalPosition.type}}}},y1AxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Y"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},position:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange_Description"),type:{enumeration:t.referenceLinePosition.type}},dataLabelShow:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Show_Description"),type:{bool:!0}},dataLabelColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color_Description"),type:{fill:{solid:{color:!0}}}},dataLabelDecimalPoints:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Decimal_Points"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},dataLabelHorizontalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Horizontal_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Horizontal_Position_Description"),type:{enumeration:t.referenceLineDataLabelHorizontalPosition.type}},dataLabelVerticalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Vertical_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Vertical_Position_Description"),type:{enumeration:t.referenceLineDataLabelVerticalPosition.type}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0},suppressFormatPainterCopy:!0},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},colorBorder:{displayName:e.data.createDisplayNameGetter("Visual_ColorBorder"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}}}},fillPoint:{displayName:e.data.createDisplayNameGetter("Visual_FillPoint"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{bool:!0}}}},colorByCategory:{displayName:e.data.createDisplayNameGetter("Visual_ColorByCategory"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}}}},currentFrameIndex:{properties:{index:{type:{numeric:!0}}}},plotArea:{displayName:e.data.createDisplayNameGetter("Visual_Plot"),properties:{transparency:{displayName:e.data.createDisplayNameGetter("Visual_Background_Transparency"),type:{numeric:!0}},image:{type:{image:{}}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:1},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:0},Play:{max:0}},{Category:{max:1},Series:{max:0},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:1},Play:{max:0}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{sample:{}}},values:{group:{by:"Series",select:[{bind:{to:"X"}},{bind:{to:"Y"}},{bind:{to:"Size"}},{bind:{to:"Gradient"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2}}}
},{conditions:[{Category:{max:1},Series:{max:1},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:0},Play:{min:1,max:1}},{Category:{max:1},Series:{max:0},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:1},Play:{min:1,max:1}}],matrix:{rows:{select:[{bind:{to:"Play"}},{bind:{to:"Category"}}],dataReductionAlgorithm:{bottom:{count:5e3}}},columns:{"for":{"in":"Series"},dataReductionAlgorithm:{top:{count:60}}},values:{select:[{bind:{to:"X"}},{bind:{to:"Y"}},{bind:{to:"Size"}}]}}}],sorting:{custom:{}},drilldown:{roles:["Category"]}},t.scatterChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"}},colorBorder:{show:{objectName:"colorBorder",propertyName:"show"}},fillPoint:{show:{objectName:"fillPoint",propertyName:"show"}},colorByCategory:{show:{objectName:"colorByCategory",propertyName:"show"}},currentFrameIndex:{index:{objectName:"currentFrameIndex",propertyName:"index"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}},plotArea:{image:{objectName:"plotArea",propertyName:"image"},transparency:{objectName:"plotArea",propertyName:"transparency"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.slicerCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Field"),description:e.data.createDisplayNameGetter("Role_DisplayName_FieldDescription")}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{selected:{type:{bool:!0}},filter:{type:{filter:{}},rule:{output:{property:"selected",selector:["Values"]}}},defaultValue:{type:{expression:{defaultValue:!0}}},formatString:{type:{formatting:{formatString:!0}}},outlineColor:{displayName:e.data.createDisplayNameGetter("Visual_OutlineColor"),type:{fill:{solid:{color:!0}}}},outlineWeight:{displayName:e.data.createDisplayNameGetter("Visual_OutlineWeight"),type:{numeric:!0}},orientation:{displayName:e.data.createDisplayNameGetter("Slicer_Orientation"),type:{enumeration:t.slicerOrientation.type}}}},selection:{displayName:e.data.createDisplayNameGetter("Visual_SelectionControls"),properties:{selectAllCheckboxEnabled:{displayName:e.data.createDisplayNameGetter("Visual_SelectAll"),type:{bool:!0}},singleSelect:{displayName:e.data.createDisplayNameGetter("Visual_SingleSelect"),type:{bool:!0}}}},header:{displayName:e.data.createDisplayNameGetter("Visual_Header"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},background:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}},textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}}}},items:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Items"),properties:{fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},background:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}},textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}}}}},dataViewMappings:[{conditions:[{Values:{max:1}}],categorical:{categories:{"for":{"in":"Values"},dataReductionAlgorithm:{window:{}}},includeEmptyGroups:!0}}],sorting:{"default":{}},suppressDefaultTitle:!0},t.slicerProps={general:{outlineColor:{objectName:"general",propertyName:"outlineColor"},outlineWeight:{objectName:"general",propertyName:"outlineWeight"},orientation:{objectName:"general",propertyName:"orientation"}},selection:{selectAllCheckboxEnabled:{objectName:"selection",propertyName:"selectAllCheckboxEnabled"},singleSelect:{objectName:"selection",propertyName:"singleSelect"}},header:{show:{objectName:"header",propertyName:"show"},fontColor:{objectName:"header",propertyName:"fontColor"},background:{objectName:"header",propertyName:"background"},outline:{objectName:"header",propertyName:"outline"},textSize:{objectName:"header",propertyName:"textSize"}},items:{fontColor:{objectName:"items",propertyName:"fontColor"},background:{objectName:"items",propertyName:"background"},outline:{objectName:"items",propertyName:"outline"},textSize:{objectName:"items",propertyName:"textSize"}},selectedPropertyIdentifier:{objectName:"general",propertyName:"selected"},filterPropertyIdentifier:{objectName:"general",propertyName:"filter"},formatString:{objectName:"general",propertyName:"formatString"},defaultValue:{objectName:"general",propertyName:"defaultValue"}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.tableCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.GroupingOrMeasure}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}},columnWidth:{type:{numeric:!0}},totals:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_Totals")},autoSizeColumnWidth:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_Adjust_Column_Width")},textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}},outlineColor:{displayName:e.data.createDisplayNameGetter("Visual_OutlineColor"),type:{fill:{solid:{color:!0}}}},outlineWeight:{displayName:e.data.createDisplayNameGetter("Visual_OutlineWeight"),type:{numeric:!0}}}},columns:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Columns"),properties:{showSeparators:{displayName:e.data.createDisplayNameGetter("Tablix_Column_Separator"),type:{bool:!0}},separatorColor:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},columnSeparatorWeight:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Weight"),type:{numeric:!0}}}},header:{displayName:e.data.createDisplayNameGetter("Visual_Header"),properties:{fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},backgroundColor:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}}}},rows:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Rows"),properties:{showSeparators:{displayName:e.data.createDisplayNameGetter("Tablix_Row_Separator"),type:{bool:!0}},fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},backgroundColor:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}}}},totals:{displayName:e.data.createDisplayNameGetter("Visual_Totals"),properties:{fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},backgroundColor:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}}}}},dataViewMappings:[{table:{rows:{"for":{"in":"Values"},dataReductionAlgorithm:{window:{count:500}}},rowCount:{preferred:{min:1}}}}],sorting:{custom:{}},suppressDefaultTitle:!0,supportsSelection:!1}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.matrixRoleNames={rows:"Rows",columns:"Columns",values:"Values"},t.matrixCapabilities={dataRoles:[{name:t.matrixRoleNames.rows,kind:e.VisualDataRoleKind.Grouping,description:e.data.createDisplayNameGetter("Role_DisplayName_RowsDescription")},{name:t.matrixRoleNames.columns,kind:e.VisualDataRoleKind.Grouping,description:e.data.createDisplayNameGetter("Role_DisplayName_ColumnsDescription")},{name:t.matrixRoleNames.values,kind:e.VisualDataRoleKind.Measure}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}},columnWidth:{type:{numeric:!0}},rowSubtotals:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_RowTotals")},columnSubtotals:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_ColumnTotals")},autoSizeColumnWidth:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_Adjust_Column_Width")},textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}},outlineColor:{displayName:e.data.createDisplayNameGetter("Visual_OutlineColor"),type:{fill:{solid:{color:!0}}}},outlineWeight:{displayName:e.data.createDisplayNameGetter("Visual_OutlineWeight"),type:{numeric:!0}}}},columns:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Columns"),properties:{showSeparators:{displayName:e.data.createDisplayNameGetter("Tablix_Column_Separator"),type:{bool:!0}},separatorColor:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Color"),type:{fill:{solid:{color:!0}}}},columnSeparatorWeight:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Weight"),type:{numeric:!0}}}},header:{displayName:e.data.createDisplayNameGetter("Visual_Header"),properties:{fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},backgroundColor:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}}}},rows:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Rows"),properties:{showSeparators:{displayName:e.data.createDisplayNameGetter("Tablix_Row_Separator"),type:{bool:!0}},fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},backgroundColor:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}}}},values:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),properties:{fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},backgroundColor:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}}}},totals:{displayName:e.data.createDisplayNameGetter("Visual_Totals"),properties:{fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},backgroundColor:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}},leadingSpace:{displayName:e.data.createDisplayNameGetter("Tablix_Total_LeadingSpace"),type:{numeric:!0}}}}},dataViewMappings:[{conditions:[{Rows:{max:0},Columns:{max:0},Values:{min:1}},{Rows:{min:1},Columns:{min:0},Values:{min:0}},{Rows:{min:0},Columns:{min:1},Values:{min:0}}],matrix:{rows:{"for":{"in":"Rows"},dataReductionAlgorithm:{window:{count:500}}},columns:{"for":{"in":"Columns"},dataReductionAlgorithm:{top:{count:100}}},values:{"for":{"in":"Values"}}}}],filterMappings:{measureFilter:{targetRoles:[t.matrixRoleNames.rows]}},sorting:{custom:{}},suppressDefaultTitle:!0,supportsSelection:!1}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.treemapCapabilities={dataRoles:[{name:"Group",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Group"),description:e.data.createDisplayNameGetter("Role_DisplayName_GroupTreemapDescription")},{name:"Details",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Details")},{name:"Values",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{fill:{type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Group"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:{type:{bool:!0}}}}},dataViewMappings:[{conditions:[{Group:{max:1},Details:{max:0},Gradient:{max:1}},{Group:{max:1},Details:{min:1,max:1},Values:{max:1},Gradient:{max:0}}],categorical:{categories:{"for":{"in":"Group"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Details",select:[{bind:{to:"Values"}},{bind:{to:"Gradient"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2}}}}],supportsHighlight:!0,sorting:{custom:{},implicit:{clauses:[{role:"Values",direction:2}]}},drilldown:{roles:["Group"]}},t.treemapProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{fill:{objectName:"dataPoint",propertyName:"fill"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"},labelColor:{objectName:"legend",propertyName:"labelColor"}},labels:{show:{objectName:"labels",propertyName:"show"},color:{objectName:"labels",propertyName:"color"},labelDisplayUnits:{objectName:"labels",propertyName:"labelDisplayUnits"},labelPrecision:{objectName:"labels",propertyName:"labelPrecision"}},categoryLabels:{show:{objectName:"categoryLabels",propertyName:"show"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.cardCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Fields"),description:e.data.createDisplayNameGetter("Role_DisplayName_FieldsDescription")}],objects:{general:{properties:{formatString:{type:{formatting:{formatString:!0}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointLabel"),properties:{color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabel"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},wordWrap:{displayName:e.data.createDisplayNameGetter("Visual_WordWrap"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}}}}},dataViewMappings:[{conditions:[{Values:{max:1}}],single:{role:"Values"}}],suppressDefaultTitle:!0,supportsSelection:!1},t.cardProps={categoryLabels:{show:{objectName:"categoryLabels",propertyName:"show"},color:{objectName:"categoryLabels",propertyName:"color"},fontSize:{objectName:"categoryLabels",propertyName:"fontSize"}},labels:{color:{objectName:"labels",propertyName:"color"},labelPrecision:{objectName:"labels",propertyName:"labelPrecision"},labelDisplayUnits:{objectName:"labels",propertyName:"labelDisplayUnits"},fontSize:{objectName:"labels",propertyName:"fontSize"}},wordWrap:{show:{objectName:"wordWrap",propertyName:"show"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.waterfallChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,description:e.data.createDisplayNameGetter("Role_DisplayName_CategoryWaterfallDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0},suppressFormatPainterCopy:!0},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}},suppressFormatPainterCopy:!0},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0},suppressFormatPainterCopy:!0},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},sentimentColors:{displayName:e.data.createDisplayNameGetter("Waterfall_SentimentColors"),properties:{increaseFill:{displayName:e.data.createDisplayNameGetter("Waterfall_IncreaseLabel"),type:{fill:{solid:{color:!0}}}},decreaseFill:{displayName:e.data.createDisplayNameGetter("Waterfall_DecreaseLabel"),type:{fill:{solid:{color:!0}}}},totalFill:{displayName:e.data.createDisplayNameGetter("Waterfall_TotalLabel"),type:{fill:{solid:{color:!0}}}}}},categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}}}},valueAxis:{displayName:e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),description:e.data.createDisplayNameGetter("Visual_YAxis_PositionDescription"),type:{enumeration:t.yAxisPosition.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},y1AxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},position:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange_Description"),type:{enumeration:t.referenceLinePosition.type}},dataLabelShow:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Show_Description"),type:{bool:!0}},dataLabelColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color_Description"),type:{fill:{solid:{color:!0}}}},dataLabelDecimalPoints:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Decimal_Points"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},dataLabelHorizontalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Horizontal_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Horizontal_Position_Description"),type:{enumeration:t.referenceLineDataLabelHorizontalPosition.type}},dataLabelVerticalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Vertical_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Vertical_Position_Description"),type:{enumeration:t.referenceLineDataLabelVerticalPosition.type}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Y:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{bind:{to:"Y"}}]}}}],drilldown:{roles:["Category"]}},t.waterfallChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},sentimentColors:{increaseFill:{objectName:"sentimentColors",propertyName:"increaseFill"},decreaseFill:{objectName:"sentimentColors",propertyName:"decreaseFill"},totalFill:{objectName:"sentimentColors",propertyName:"totalFill"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.sunburstCapabilities={dataRoles:[{name:"Nodes",kind:e.VisualDataRoleKind.Grouping,displayName:"Groups"},{name:"Values",kind:e.VisualDataRoleKind.Measure,displayName:"Values"}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{fill:{type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Group"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),type:{numeric:!0}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:{type:{bool:!0}}}}},dataViewMappings:[{conditions:[{Groups:{min:0},Values:{max:1}}],matrix:{rows:{"for":{"in":"Nodes"}},values:{"for":{"in":"Values"}}}}],supportsHighlight:!0,sorting:{custom:{},implicit:{clauses:[{role:"Values",direction:2}]}},drilldown:{roles:["Group"]}},t.sunburstProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{fill:{objectName:"dataPoint",propertyName:"fill"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"},labelColor:{objectName:"legend",propertyName:"labelColor"}},labels:{show:{objectName:"labels",propertyName:"show"},color:{objectName:"labels",propertyName:"color"},labelDisplayUnits:{objectName:"labels",propertyName:"labelDisplayUnits"},labelPrecision:{objectName:"labels",propertyName:"labelPrecision"}},categoryLabels:{show:{objectName:"categoryLabels",propertyName:"show"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.KPIStatusWithHistoryCapabilities={dataRoles:[{name:"Indicator",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Indicator"),description:e.data.createDisplayNameGetter("Visual_KPI_Indicator_Description")},{name:"Goal",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Goal"),description:e.data.createDisplayNameGetter("Visual_KPI_Goal_Description")},{name:"TrendLine",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_TrendLine"),description:e.data.createDisplayNameGetter("Visual_KPI_Trendline_Description")}],dataViewMappings:[{conditions:[{Indicator:{max:1},TrendLine:{max:1},Goal:{max:1}}],categorical:{categories:{"for":{"in":"TrendLine"},dataReductionAlgorithm:{top:{}}},values:{select:[{bind:{to:"Indicator"}},{bind:{to:"Goal"}}]}}}],objects:{status:{displayName:e.data.createDisplayNameGetter("Visual_KPI_Status"),description:e.data.createDisplayNameGetter("Visual_KPI_Status"),properties:{direction:{displayName:e.data.createDisplayNameGetter("Visual_KPI_Direction"),description:e.data.createDisplayNameGetter("Visual_KPI_Direction"),type:{enumeration:t.kpiDirection.type}}}},format:{displayName:e.data.createDisplayNameGetter("Visual_KPI_Format"),description:e.data.createDisplayNameGetter("Visual_KPI_Format"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},kpiFormat:{type:{text:!0},displayName:e.data.createDisplayNameGetter("TaskPane_Format")}}}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.animatedNumber=e.visuals.animatedNumberCapabilities,t.areaChart=e.visuals.lineChartCapabilities,t.barChart=e.visuals.getColumnChartCapabilities(!0),t.card=e.visuals.cardCapabilities,t.multiRowCard=e.visuals.multiRowCardCapabilities,t.clusteredBarChart=e.visuals.getColumnChartCapabilities(!0),
t.clusteredColumnChart=e.visuals.getColumnChartCapabilities(),t.columnChart=e.visuals.getColumnChartCapabilities(),t.comboChart=e.visuals.comboChartCapabilities,t.dataDotChart=e.visuals.dataDotChartCapabilities,t.dataDotClusteredColumnComboChart=e.visuals.comboChartCapabilities,t.dataDotStackedColumnComboChart=e.visuals.comboChartCapabilities,t.donutChart=e.visuals.donutChartCapabilities,t.funnel=e.visuals.funnelChartCapabilities,t.gauge=e.visuals.gaugeCapabilities,t.hundredPercentStackedBarChart=e.visuals.getColumnChartCapabilities(!0),t.hundredPercentStackedColumnChart=e.visuals.getColumnChartCapabilities(),t.image=e.visuals.imageVisualCapabilities,t.lineChart=e.visuals.lineChartCapabilities,t.lineStackedColumnComboChart=e.visuals.comboChartCapabilities,t.lineClusteredColumnComboChart=e.visuals.comboChartCapabilities,t.map=e.visuals.mapCapabilities,t.filledMap=e.visuals.filledMapCapabilities,t.treemap=e.visuals.treemapCapabilities,t.pieChart=e.visuals.donutChartCapabilities,t.scatterChart=e.visuals.scatterChartCapabilities,t.table=e.visuals.tableCapabilities,t.matrix=e.visuals.matrixCapabilities,t.slicer=e.visuals.slicerCapabilities,t.textbox=e.visuals.textboxCapabilities,t.waterfallChart=e.visuals.waterfallChartCapabilities,t.cheerMeter=e.visuals.cheerMeterCapabilities,t.sunburst=e.visuals.sunburstCapabilities,t.scriptVisual=e.visuals.scriptVisualCapabilities,t.kpi=e.visuals.KPIStatusWithHistoryCapabilities}(i=t.capabilities||(t.capabilities={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){this.options=e;var i=e.bars;i.on("click",function(e,i){t.handleSelection(e,d3.event.ctrlKey)})},t.prototype.renderSelection=function(t){var i=this.options;i.bars.style("fill-opacity",function(a){return e.ColumnUtil.getFillOpacity(a.selected,a.highlight,!a.highlight&&t,!a.selected&&i.hasHighlights)})},t}();e.ColumnChartWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){var i=this.dots=e.dots,a=e.dotLabels;i.on("click",function(e){t.handleSelection(e,d3.event.ctrlKey)}),a&&a.on("click",function(e){t.handleSelection(e,d3.event.ctrlKey)})},t.prototype.renderSelection=function(t){this.dots.style("fill-opacity",function(i){return e.ColumnUtil.getFillOpacity(i.selected,i.highlight,t,!1)})},t}();e.DataDotChartWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){var i=this.slices=e.slices,a=this.highlightSlices=e.highlightSlices,r=e.clearCatcher;this.hasHighlights=e.hasHighlights;var n=function(e){t.handleSelection(e.data,d3.event.ctrlKey)};i.on("click",n),a.on("click",n),r.on("click",function(){t.handleClearSelection()})},t.prototype.renderSelection=function(t){var i=this.hasHighlights;this.slices.style("fill-opacity",function(a){return e.ColumnUtil.getFillOpacity(a.data.selected,!1,t,i&&!a.data.selected)}),this.highlightSlices.style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.data.selected,!0,!1,i)})},t}();e.DonutChartWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){var i=this.bars=e.bars,a=this.interactors=e.interactors,r=e.clearCatcher;this.hasHighlights=e.hasHighlights,i.on("click",function(e,i){t.handleSelection(e,d3.event.ctrlKey)}),a.on("click",function(e,i){t.handleSelection(e,d3.event.ctrlKey)}),r.on("click",function(){t.handleClearSelection()})},t.prototype.renderSelection=function(t){var i=this.hasHighlights;this.bars.style("fill-opacity",function(a){return e.ColumnUtil.getFillOpacity(a.selected,a.highlight,!a.highlight&&t,!a.selected&&i)})},t}();e.FunnelWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){this.lines=e.lines;var i=e.interactivityLines,a=this.dots=e.dots,r=this.areas=e.areas,n=this.tooltipOverlay=e.tooltipOverlay,o=function(e){t.handleSelection(e,d3.event.ctrlKey)};i.on("click",o),a.on("click",o),r&&r.on("click",o),n&&n.on("click",function(){return t.handleClearSelection()})},t.prototype.renderSelection=function(t){this.lines.style("stroke-opacity",function(i){return e.ColumnUtil.getFillOpacity(i.selected,!1,t,!1)}),this.dots.style("fill-opacity",function(i){return e.ColumnUtil.getFillOpacity(i.selected,!1,t,!1)}),this.areas&&this.areas.style("fill-opacity",function(i){return t&&!i.selected?e.LineChart.DimmedAreaFillOpacity:e.LineChart.AreaFillOpacity})},t}();e.LineChartWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){this.mapPointerEventsDisabled=!1,this.mapPointerTimeoutSet=!1,this.viewChangedSinceLastClearMouseDown=!1}return t.prototype.bindEvents=function(e,t){var i=this,a=this.bubbles=e.bubbles,r=this.slices=e.slices,n=this.shapes=e.shapes,o=e.clearCatcher,s=function(e){a&&a.style("pointer-events","all"),n&&n.style("pointer-events","all"),t.handleSelection(e,d3.event.ctrlKey)};this.mapPointerEventsDisabled||(a&&a.style("pointer-events","all"),r&&r.style("pointer-events","all"),n&&n.style("pointer-events","all")),a&&(a.on("click",s),a.on("mousewheel",function(){i.mapPointerEventsDisabled||a.style("pointer-events","none"),i.mapPointerEventsDisabled=!0,i.mapPointerTimeoutSet||(i.mapPointerTimeoutSet=!0,setTimeout(function(){a&&a.style("pointer-events","all"),i.mapPointerEventsDisabled=!1,i.mapPointerTimeoutSet=!1},200))})),r&&(r.on("click",function(e){r.style("pointer-events","all"),i.mapPointerEventsDisabled=!1,t.handleSelection(e.data,d3.event.ctrlKey)}),r.on("mousewheel",function(){i.mapPointerEventsDisabled||r.style("pointer-events","none"),i.mapPointerEventsDisabled=!0,i.mapPointerTimeoutSet||(i.mapPointerTimeoutSet=!0,setTimeout(function(){r&&r.style("pointer-events","all"),i.mapPointerEventsDisabled=!1,i.mapPointerTimeoutSet=!1},200))})),n&&(n.on("click",s),n.on("mousewheel",function(){i.mapPointerEventsDisabled||n.style("pointer-events","none"),i.mapPointerEventsDisabled=!0,i.mapPointerTimeoutSet||(i.mapPointerTimeoutSet=!0,setTimeout(function(){n&&n.style("pointer-events","all"),i.mapPointerEventsDisabled=!1,i.mapPointerTimeoutSet=!1},200))})),o.on("mouseup",function(){i.viewChangedSinceLastClearMouseDown||t.handleClearSelection()}),o.on("mousedown",function(){i.viewChangedSinceLastClearMouseDown=!1})},t.prototype.renderSelection=function(t){this.bubbles&&this.bubbles.style({"fill-opacity":function(i){return e.ColumnUtil.getFillOpacity(i.selected,!1,t,!1)},"stroke-opacity":function(i){return e.ColumnUtil.getFillOpacity(i.selected,!1,t,!1)}}),this.slices&&this.slices.style({"fill-opacity":function(i){return e.ColumnUtil.getFillOpacity(i.data.selected,!1,t,!1)},"stroke-opacity":function(i){return e.ColumnUtil.getFillOpacity(i.data.selected,!1,t,!1)}}),this.shapes&&this.shapes.style({"fill-opacity":function(i){return e.ColumnUtil.getFillOpacity(i.selected,!1,t,!1)},"stroke-opacity":function(i){return e.ColumnUtil.getFillOpacity(i.selected,!1,t,!1)}})},t.prototype.viewChanged=function(){this.viewChangedSinceLastClearMouseDown=!0},t}();e.MapBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=jsCommon.CssConstants.createClassAndSelector,i=function(){function t(){}return t.prototype.bindEvents=function(e,t){var i=this.bubbles=e.dataPointsSelection,a=e.data;this.shouldEnableFill=(!a.sizeRange||!a.sizeRange.min)&&a.fillPoint,this.colorBorder=a.colorBorder,i.on("click",function(e){t.handleSelection(e,d3.event.ctrlKey)})},t.prototype.renderSelection=function(t){var i=this.shouldEnableFill,a=this.colorBorder;this.bubbles.style("fill-opacity",function(a){return null!=a.size||i?e.ScatterChart.getBubbleOpacity(a,t):0}),this.bubbles.style("stroke-opacity",function(i){return null!=i.size&&a?1:e.ScatterChart.getBubbleOpacity(i,t)})},t}();e.ScatterChartWebBehavior=i;var a=function(){function i(){}return i.prototype.bindEvents=function(e,t){this.setOptions(e),e.visualInitOptions&&e.visualInitOptions.interactivity.isInteractiveLegend&&(this.makeDataPointsSelectable(e.dataPointsSelection),this.makeRootSelectable(e.root),this.makeDragable(e.root),this.selectRoot())},i.prototype.renderSelection=function(e){},i.prototype.setSelectionHandler=function(e){},i.prototype.makeDataPointsSelectable=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];for(var a=0,r=t.length;r>a;a++){var n=t[a];n.on("click",function(t,i){e.select(!0,n,t,i)})}},i.prototype.makeRootSelectable=function(e){var t=this;e.on("click",function(e,i){t.selectRoot()})},i.prototype.makeDragable=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];for(var a=0,r=t.length;r>a;a++){var n=t[a],o=d3.behavior.drag().on("drag",function(t){e.drag(0)}).on("dragend",function(t){e.drag(1)});n.call(o)}},i.prototype.setOptions=function(e){this.data=e.data,this.mainGraphicsContext=e.mainContext,this.xAxisProperties=e.xAxisProperties,this.yAxisProperties=e.yAxisProperties,this.host=e.host},i.prototype.select=function(e,t,i,a){this.selectDotByIndex(a)},i.prototype.selectRoot=function(){var e=jsCommon.PerformanceUtil.create("selectRoot");this.onClick(),e.end()},i.prototype.drag=function(e){switch(e){case 0:this.onDrag();break;case 1:this.onClick()}},i.prototype.onDrag=function(){var e=this.getMouseCoordinates();this.moveCrosshairToXY(e.x,e.y);var t=this.findClosestDotIndex(e.x,e.y);this.selectDot(t),this.updateLegend(t)},i.prototype.onClick=function(){var e=this.getMouseCoordinates(),t=this.findClosestDotIndex(e.x,e.y);-1!==t&&this.selectDotByIndex(t)},i.prototype.getMouseCoordinates=function(){var e=this.mainGraphicsContext,t=0,i=parseInt(e.attr("height"),10);i=i||0;try{var a=d3.mouse(e.node());t=a[0],i=a[1]}catch(r){}return{x:t,y:i}},i.prototype.selectDotByIndex=function(e){this.selectDot(e),this.moveCrosshairToIndexDot(e),this.updateLegend(e)},i.prototype.selectDot=function(e){var t=this,a=this.mainGraphicsContext;a.selectAll(i.ScatterChartCircleTagName+i.DotClassSelector).classed({selected:!1,notSelected:!0}),a.selectAll(i.ScatterChartCircleTagName+i.DotClassSelector).filter(function(i,a){var r=t.data.dataPoints,n=r[e];return i.x===n.x&&i.y===n.y}).classed({selected:!0,notSelected:!1})},i.prototype.moveCrosshairToIndexDot=function(e){var t=this.data.dataPoints,a=this.mainGraphicsContext,r=this.xAxisProperties.scale(t[e].x),n=this.yAxisProperties.scale(t[e].y);if(null==this.crosshair){var o=+a.attr("width"),s=+a.attr("height");this.crosshair=this.drawCrosshair(a,r,n,o,s),this.crosshairHorizontal=this.crosshair.select(i.Horizontal.selector),this.crosshairVertical=this.crosshair.select(i.Vertical.selector)}else this.moveCrosshairToXY(r,n)},i.prototype.moveCrosshairToXY=function(e,t){this.crosshairHorizontal.attr({y1:t,y2:t}),this.crosshairVertical.attr({x1:e,x2:e})},i.prototype.drawCrosshair=function(e,t,a,r,n){var o=e.append("g");return o.classed(i.CrosshairClassName,!0),o.append("line").classed(i.Horizontal["class"],!0).attr({x1:0,x2:r,y1:a,y2:a}),o.append("line").classed(i.Vertical["class"],!0).attr({x1:t,x2:t,y1:n,y2:0}),o},i.prototype.findClosestDotIndex=function(e,t){var i=-1,a=Number.MAX_VALUE,r=this.data.dataPoints,n=this.xAxisProperties.scale,o=this.yAxisProperties.scale;for(var s in r){var l=r[s],u=n(l.x),c=o(l.y),h=u-e,p=c-t,d=h*h+p*p;a===Number.MAX_VALUE?(i=s,a=d):a&&a>d&&(i=s,a=d)}return i},i.prototype.updateLegend=function(e){if(null==this.lastDotIndex||this.lastDotIndex!==e){var t=this.createLegendDataPoints(e);this.host.updateLegend(t),this.lastDotIndex=e}},i.prototype.createLegendDataPoints=function(t){var i=e.scatterChartProps.general.formatString,a=[],r=this.data,n=r.dataPoints[t],o=e.valueFormatter.format(null),s=o,l=r.legendData,u=l.dataPoints;return n.category!==o?s=n.category:null!=n.radius.sizeMeasure?s=e.valueFormatter.format(n.radius.sizeMeasure.source.groupName):u.length>=t&&u[t].label!==o&&(s=u[t].label),null!=r.xCol&&a.push({category:s,color:n.fill,identity:e.SelectionIdBuilder.builder().withMeasure(r.xCol.queryName).createSelectionId(),selected:n.selected,icon:e.LegendIcon.Box,label:e.valueFormatter.format(this.data.axesLabels.x),measure:e.valueFormatter.format(n.x,e.valueFormatter.getFormatString(r.xCol,i)),iconOnlyOnLabel:!0}),null!=r.yCol&&a.push({category:s,color:n.fill,identity:e.SelectionIdBuilder.builder().withMeasure(r.yCol.queryName).createSelectionId(),selected:n.selected,icon:e.LegendIcon.Box,label:e.valueFormatter.format(r.axesLabels.y),measure:e.valueFormatter.format(n.y,e.valueFormatter.getFormatString(r.yCol,i)),iconOnlyOnLabel:!0}),null!=r.size&&a.push({category:s,color:n.fill,identity:e.SelectionIdBuilder.builder().withMeasure(r.size.queryName).createSelectionId(),selected:n.selected,icon:e.LegendIcon.Box,label:e.valueFormatter.format(r.size.displayName),measure:e.valueFormatter.format(n.radius.sizeMeasure.values[n.radius.index],e.valueFormatter.getFormatString(r.size,i)),iconOnlyOnLabel:!0}),{dataPoints:a}},i.CrosshairClassName="crosshair",i.ScatterChartCircleTagName="circle",i.DotClassName="dot",i.DotClassSelector="."+i.DotClassName,i.Horizontal=t("horizontal"),i.Vertical=t("vertical"),i}();e.ScatterChartMobileBehavior=a}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=e.slicerOrientation.Orientation,i=function(){function i(){}return i.prototype.bindEvents=function(e,t){this.behavior=this.createWebBehavior(e),this.behavior.bindEvents(e.behaviorOptions,t)},i.prototype.renderSelection=function(e){this.behavior.renderSelection(e)},i.bindSlicerEvents=function(e,t,a,r,n,o){i.bindSlicerItemSelectionEvent(t,r,n,o),i.bindSlicerClearEvent(a,r),i.styleSlicerContainer(e,o)},i.setSelectionOnSlicerItems=function(e,t,a,r,n){if(a||r.isSelectionModeInverted())i.styleSlicerItems(e,a,r.isSelectionModeInverted());else{e.filter(".selected").classed("selected",!1),e.filter(".partiallySelected").classed("partiallySelected",!1);var o=e.selectAll("input");o&&o.property("checked",!1),t.style("color",n.slicerText.color)}},i.styleSlicerItems=function(e,t,i){e.each(function(e){var a=this,r=!1;e.isSelectAllDataPoint?t?(a.classList.add("partiallySelected"),r=!1):(a.classList.remove("partiallySelected"),r=i):r=jsCommon.LogicExtensions.XOR(e.selected,i),r?a.classList.add("selected"):a.classList.remove("selected");var n=a.getElementsByTagName("input")[0];n&&(n.checked=r)})},i.bindSlicerItemSelectionEvent=function(t,a,r,n){t.on("click",function(t){d3.event.preventDefault(),t.isSelectAllDataPoint?a.toggleSelectionModeInversion():a.handleSelection(t,i.isMultiSelect(d3.event,r,n)),a.persistSelectionFilter(e.slicerProps.filterPropertyIdentifier)})},i.bindSlicerClearEvent=function(t,i){t&&t.on("click",function(t){i.handleClearSelection(),i.persistSelectionFilter(e.slicerProps.filterPropertyIdentifier)})},i.styleSlicerContainer=function(e,t){var i=t.hasSelection();e.classed("hasSelection",i)},i.isMultiSelect=function(e,t,i){return i.isSelectionModeInverted()||!t.selection.singleSelect||e.ctrlKey},i.prototype.createWebBehavior=function(i){var a,r=i.orientation;switch(r){case t.Horizontal:a=new e.HorizontalSlicerWebBehavior;break;case t.Vertical:default:a=new e.VerticalSlicerWebBehavior}return a},i}();e.SlicerWebBehavior=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.bindEvents=function(e,t){var i=e.legendItems;this.legendIcons=e.legendIcons;var a=e.clearCatcher;i.on("click",function(e){t.handleSelection(e,d3.event.ctrlKey)}),a.on("click",function(){t.handleClearSelection()})},e.prototype.renderSelection=function(t){t?this.legendIcons.style({fill:function(t){return t.selected?t.color:e.dimmedLegendColor}}):this.legendIcons.style({fill:function(e){return e.color}})},e.dimmedLegendColor="#A6A6A6",e}();e.LegendBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){var i=this.shapes=e.shapes,a=this.highlightShapes=e.highlightShapes,r=e.majorLabels,n=e.minorLabels;this.hasHighlights=e.hasHighlights;var o=function(e){t.handleSelection(e,d3.event.ctrlKey)};i.on("click",o),a.on("click",o),r&&r.on("click",o),n&&n.on("click",o)},t.prototype.renderSelection=function(t){var i=this.hasHighlights;this.shapes.style("fill",function(t){return e.Treemap.getFill(t,!1)}).style("fill-opacity",function(a){return e.Treemap.getFillOpacity(a,t,!a.selected&&i,!1)}),this.highlightShapes.style("fill",function(t){return e.Treemap.getFill(t,!0)}).style("fill-opacity",function(a){return e.Treemap.getFillOpacity(a,t,!a.selected&&i,!0)})},t}();e.TreemapWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){var i=this.bars=e.bars;i.on("click",function(e){e.isTotal||t.handleSelection(e,d3.event.ctrlKey)})},t.prototype.renderSelection=function(t){this.bars.style("fill-opacity",function(i){return i.isTotal?e.ColumnUtil.DefaultOpacity:e.ColumnUtil.getFillOpacity(i.selected,i.highlight,t,!1)})},t}();e.WaterfallChartWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.ArrayExtensions;t.fallBackDomain=[0,10],t.fallbackDateDomain=[new Date(2014,1,1).getTime(),new Date(2015,1,1).getTime()];var a;!function(a){function r(e){return 250>e?3:500>e?5:8}function n(e){return 150>e?3:300>e?5:8}function o(e,t,i,a,r){return isNaN(e)||isNaN(t)?Z:1>=a||1>=t&&e>=-1?a:e===t?r?1:Z:s(i)?a:Math.min(t-e+1,a)}function s(e){for(var t=0,i=e.length;i>t;t++){var a=e[t];if(a&&a.type&&!a.type.integer)return!0}return!1}function l(e,t,i,a,r){return!a||b(t)?u(e,t.domain()):C(i)?p(e,t.domain()):c(e,t,r)}function u(e,t){var i=[];if(0>=e)return i;var a=t.length;if(e>a)return t;for(var r=0,n=Math.floor(a/e);a>r;r+=n)i.push(t[r]);return i}function c(e,t,i){var a=[];if(0===e)return a;var r=t;if(r.ticks){if(a=r.ticks(e),a.length>e&&e>1&&(a=r.ticks(e-1)),a.length<$&&(a=r.ticks(e+1)),a=h(a),i&&a.length>1){for(var n=a[1]-a[0];n>0&&i>n;){for(var o=1;o<a.length;o++)a.splice(o,1);n=2*n}1===a.length&&a.push(a[0]+i)}return a}return a}function h(e,t){if(void 0===t&&(t=1e-5),!e||e.length<2)return e;var i=t*Math.abs(e[1]-e[0]);return e.map(function(e){return Math.abs(e)<=i?0:e})}function p(t,i){var a=[],r=e.DateTimeSequence.calculate(new Date(i[0]),new Date(i[1]),t).sequence;return a=r.map(function(e){return e.getTime()}),a=_(a,i[0],i[1])}function d(e){return isNaN(e.min)||isNaN(e.max)?(e.min=t.fallBackDomain[0],e.max=t.fallBackDomain[1]):0===e.min&&0===e.max?e.max=t.fallBackDomain[1]:e.min===e.max?(e.min=e.min<0?1.2*e.min:.8*e.min,e.max=e.max<0?.8*e.max:1.2*e.max):Math.abs(e.min)<1e-4&&e.min/(e.max-e.min)<1e-4&&(e.min=0),e}function g(e,t,i,a){return 0===r(e-i)||0===n(t-a)?{top:0,right:i,bottom:a,left:0}:{top:20,right:30,bottom:40,left:30}}function m(e,t,i,a,o,s,l,u,c,h,p,d){var g=o.x,m=o.y1,f=o.y2,y=g.values,C=m.values,x=0,S=0,w=0,D=0,P=0,L=g.outerPadding&&g.categoryThickness?g.categoryThickness/2:0,_=0,N=b(g.scale);if(N&&(void 0!==g.outerPadding?_=g.outerPadding:void 0!==g.xLabelMaxWidth&&(_=Math.max(0,(e.width-g.xLabelMaxWidth*y.length)/2))),0!==r(e.width)||0!==n(e.height)){var T;if(T=u?ee.DefaultRotationWithScrollbar:ee.DefaultRotation,p)for(var V=0,M=C.length;M>V;V++)l.text=C[V],w=Math.max(w,i(l));if(f&&d)for(var A=f.values,V=0,M=A.length;M>V;V++)l.text=A[V],D=Math.max(D,i(l));var R=a(l),I=Math.floor(s/R);if(h&&y.length>0){for(var V=0,M=y.length;M>V;V++){var F=void 0;l.text=y[V];var E=i(l);if(g.willLabelsWordBreak&&v(g.axisType)){var O=jsCommon.WordBreaker.splitByWidth(l.text,l,i,g.xLabelMaxWidth,I);F=O.length*R}else g.willLabelsFit?F=X:(F=E*T.sine,E*=T.cosine);var G=0;0===V?(G=g.willLabelsFit?E/2-L-_:E-L-_,x=Math.max(x,G)):V===M-1&&g.willLabelsFit&&(G=E/2-L-_,S=Math.max(S,G)),P=Math.max(P,F)}x=Math.min(x,Y),S=Math.min(S,Y)}}var H=0,z=0,k=Math.min(Math.ceil(P),s);return c?(z=Math.min(Math.max(x,D),t),H=Math.min(Math.max(S,w),t)):(z=Math.min(Math.max(x,w),t),H=Math.min(Math.max(S,D),t)),{xMax:Math.ceil(k),yLeft:Math.ceil(z),yRight:Math.ceil(H)}}function f(e){return e&&(e.bool||e.numeric||e.text||e.dateTime)}function y(){return e.ValueType.fromDescriptor({text:!0})}function v(e){return!(!e||!e.text&&!e.bool)}function b(e){return"undefined"==typeof e.invert}function C(e){return!(!e||!e.dateTime)}function x(e,t){return b(e)?w(e,t):e.invert(t)}function S(e){return b(e)?e.rangeExtent():e.range()}function w(e,t){var i=e.range();if(i.length<2)return 0;var a,r=e.rangeBand(),n=(i[1]-i[0]-r)/2;for(a=0;t>i[a]+r+n&&a<i.length-1;a++);return e.domain()[a]}function D(e,t){var i=-1,a=Number.MAX_VALUE;for(var r in t){var n=Math.abs(e-t[r].categoryValue);a>n&&(a=n,i=parseInt(r,10))}return i}function P(e,t,i){var a=e(t)-e(i);return 0===a?0:0>a?Math.min(a,-1):Math.max(a,1)}function L(e,t,i,a){if(i&&!v(t)){var r,n;return a&&2===a.length&&(r=a[0],n=a[1]),I(e,r,n,t)}return E(e)}function _(e,t,i){var a=e.filter(function(e){return e>=t&&i>=e});return a.length<2&&(a=[t,i]),a}function N(t,i){return t&&f(t.type)?t.type:i?e.ValueType.fromDescriptor({numeric:!0}):e.ValueType.fromDescriptor({text:!0})}function T(e){var i=e.pixelSpan,r=e.dataDomain,n=e.metaDataColumn,o=e.formatString,s=e.outerPadding||0,u=!!e.isCategoryAxis,c=!!e.isScalar,h=!!e.isVertical,p=!!e.useTickIntervalForDisplayUnits,d=e.getValueFn,g=e.categoryThickness,m=e.axisDisplayUnits,f=e.axisPrecision,y=!!e.is100Pct,v=this.getCategoryValueType(n,c),b=this.createScale(e),C=b.scale,x=b.bestTickCount,S=C.domain(),w=a.isLogScalePossible(r,v);if(g&&c&&r&&2===r.length){var D=r[1]-r[0],P=S[1]-S[0];D>0&&P>0&&(g=g*D/P)}var L;if(c&&1===x)L=[r[0]];else{var _=c?R(o,v,y):void 0;L=l(x,C,v,c,_)}e.scaleType&&e.scaleType===t.axisScale.log&&w&&(L=L.filter(function(e){return a.powerOfTen(e)}));var N=M(S,r,v,c,o,x,L,d,p,m,f),T=d3.svg.axis().scale(C).tickSize(6,0).orient(h?"left":"bottom").ticks(x).tickValues(L),V=[];n&&(V=A(T,L,N,v,d));var I;if(!c&&g)I=Math.max(1,g-2*t.CartesianChart.TickLabelPadding);else{var F=L.length>1?L.length+1:L.length;I=F>1?i/F:i,I=Math.max(1,I-2*t.CartesianChart.TickLabelPadding)}return{scale:C,axis:T,formatter:N,values:V,axisType:v,axisLabel:null,isCategoryAxis:u,xLabelMaxWidth:I,categoryThickness:g,outerPadding:s,usingDefaultDomain:b.usingDefaultDomain,isLogScaleAllowed:w}}function V(e){var i,o=e.pixelSpan,s=e.dataDomain,l=e.metaDataColumn,u=e.outerPadding||0,c=!!e.isScalar,h=!!e.isVertical,p=e.forcedTickCount,d=e.categoryThickness,g=!!e.shouldClamp,m=this.getCategoryValueType(l,c),f=h?n(o):r(o),y=s?s.slice():null,b=f,C=!1;if(null==s||2===s.length&&null==s[0]&&null==s[1]||2!==s.length&&c)C=!0,s=m.dateTime?t.fallbackDateDomain:v(m)?[]:t.fallBackDomain,i=v(m)?O(o,s,d?u/d:0):H(e.scaleType,o,s,m,u,b);else{if(c&&s.length>0){b=void 0!==p?0!==f?p:0:a.getBestNumberOfTicks(s[0],s[s.length-1],[l],f,m.dateTime);var x=a.normalizeLinearDomain({min:s[0],max:s[s.length-1]});y=[x.min,x.max]}c&&m.numeric&&!m.dateTime?i=H(e.scaleType,o,y,m,u,b,g):c&&m.dateTime?i=k(o,y,u,null,g):(m.text||m.dateTime||m.numeric||m.bool)&&(i=O(o,y,d?u/d:0),b=0===f?0:Math.min(y.length,(o-2*u)/t.CartesianChart.MinOrdinalRectThickness))}return h&&c&&i.range(i.range().reverse()),t.ColumnUtil.normalizeInfinityInScale(i),{scale:i,bestTickCount:b,usingDefaultDomain:C}}function M(e,i,a,r,n,o,s,l,u,c,h){void 0===u&&(u=!1);var p;if(a.dateTime)if(r){var d=new Date(e[0]),g=new Date(e[1]);1===o&&(d=g=new Date(i[0])),p=t.valueFormatter.create({format:n,value:d,value2:g,tickCount:o})}else p=t.valueFormatter.createDefaultFormatter(n,!0);else if(u&&r&&s.length>1){var m=c?c:s[1]-s[0];p=t.valueFormatter.create({format:n,value:m,value2:0,allowFormatBeautification:!0,precision:h})}else p=t.valueFormatter.createDefaultFormatter(n,!0);return p}function A(e,t,i,a,r){var n=[];return r||(r=function(e){return e}),i?(e.tickFormat(function(e){return i.format(r(e,a))}),n=t.map(function(e){return i.format(r(e,a))})):n=t.map(function(e){return r(e,a)}),n}function R(t,i,a){var r=t&&!e.NumberFormat.isStandardFormat(t);if(r){var n=e.NumberFormat.getCustomFormatMetadata(t,!0).precision;return t.indexOf("%")>-1&&(n+=2),Math.pow(10,-n)}return a?.01:i.integer?1:0}function I(e,t,i,a){if(0===e.length)return null;var r=d3.min(e,function(e){return d3.min(e.data,function(e){return e.categoryValue})}),n=d3.max(e,function(e){return d3.max(e.data,function(e){return e.categoryValue})});return U([t,i],[r,n])}function F(e,t){if(0===e.length)return null;var i=d3.min(e,function(e){return d3.min(e.data,function(e){return e.value})}),a=d3.max(e,function(e){return d3.max(e.data,function(e){return e.value})});return t?[Math.min(i,0),Math.max(a,0)]:[i,a]}function E(e){return i.isUndefinedOrEmpty(e)?[]:e[0].data.map(function(e){return e.categoryIndex})}function O(e,i,a){void 0===a&&(a=0);var r=d3.scale.ordinal().rangeBands([0,e],t.CartesianChart.InnerPaddingRatio,a).domain(i);return r}function G(e,t){return null==e?!1:C(t)?!1:e[0]>0&&e[1]>0||e[0]<0&&e[1]<0}function H(e,i,a,r,n,o,s){return void 0===n&&(n=0),e===t.axisScale.log&&G(a,r)?z(i,a,n,o):k(i,a,n,o,s)}function z(e,t,i,a){void 0===i&&(i=0);var r=d3.scale.log().range([i,e-i]).domain([t[0],t[1]]).clamp(!0);return a&&r.nice(a),r}function k(e,t,i,a,r){void 0===i&&(i=0);var n=d3.scale.linear().range([i,e-i]).domain([t[0],t[1]]).clamp(r);return a&&n.nice(a),n}function B(e){var t={};return e&&(t.min=null==e.min?null==e.minLocal?d3.min(e.values):e.minLocal:e.min,t.max=null==e.max?null==e.maxLocal?d3.max(e.values):e.maxLocal:e.max),t}function W(e,t){var i=[void 0,void 0];return t&&2===t.length&&(i=[t[0],t[1]]),e&&2===e.length&&(null!=e[0]&&(i[0]=e[0]),null!=e[1]&&(i[1]=e[1])),null==i[0]&&null==i[1]?t:null!=i[0]&&null!=i[1]&&i[0]>i[1]?t:i}function U(e,t){var i=t?[t[0],t[1]]:[];return e&&2===e.length&&(null!=e[0]&&(i[0]=e[0]),null!=e[1]&&(i[1]=e[1]),i[0]>i[1]&&(i=t)),i}function j(e,i,a,r){void 0===r&&(r=!1);var n=r?"secAxisStyle":"axisStyle";if(!e||!e[n])return i;var o;return o=e[n]===t.axisStyle.showBoth?i+" ("+a+")":e[n]===t.axisStyle.showUnitOnly?a:i}function q(e,t){return!e||!t||e.length<2||t.length<2?!1:e[0]!==t[0]||e[1]!==t[1]}function K(e){return isNaN(e)?null:e===Number.POSITIVE_INFINITY?Number.MAX_VALUE:e===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:e}function Q(e){return e/Math.pow(10,Math.ceil(Math.log(e)/Math.LN10-1e-12))===1}var Y=35,X=10,$=2,Z=3,J=10;a.getRecommendedNumberOfTicksForXAxis=r,a.getRecommendedNumberOfTicksForYAxis=n,a.getBestNumberOfTicks=o,a.hasNonIntegerData=s,a.getRecommendedTickValues=l,a.getRecommendedTickValuesForAnOrdinalRange=u,a.getRecommendedTickValuesForAQuantitativeRange=c,a.normalizeLinearDomain=d,a.getMargin=g,a.getTickLabelMargins=m,a.columnDataTypeHasValue=f,a.createOrdinalType=y,a.isOrdinal=v,a.isOrdinalScale=b,a.isDateTime=C,a.invertScale=x,a.extent=S,a.invertOrdinalScale=w,a.findClosestXAxisIndex=D,a.diffScaled=P,a.createDomain=L,a.ensureValuesInRange=_,a.getCategoryValueType=N,a.createAxis=T,a.createScale=V,a.createFormatter=M,a.getMinTickValueInterval=R,a.createValueDomain=F;var ee;!function(i){function a(e,t,i,a){var r=e.values;if(0===r.length)return!1;var n=void 0!==e.xLabelMaxWidth?e.xLabelMaxWidth:t/r.length;return!r.some(function(e){return a.text=e,i(a)>n})}function r(e,a,r,n,o,s,l){var u=e.values,c=void 0!==e.xLabelMaxWidth?e.xLabelMaxWidth:r/u.length,h=a.bottom/i.DefaultRotation.sine,p=o(l),d=Math.max(1,Math.floor(a.bottom/p));if(0===u.length)return!1;var g=u.some(function(e){return l.text=e,!jsCommon.WordBreaker.hasBreakers(e)&&n(l)>c});if(g)return!1;var m=u.filter(function(r,o){var u=a.left+e.outerPadding+e.categoryThickness*(o+.5)-J,p=u/i.DefaultRotation.cosine,g=Math.min(p,h),m=jsCommon.WordBreaker.splitByWidth(r,l,n,c,d,s).join("");l.text=r;var f=s(l,g);return t.TextUtil.removeEllipses(m).length>=t.TextUtil.removeEllipses(f).length});return m.length>Math.floor(u.length/2)}function n(e,t,a,r,n,o,s,l){var u,c;c=l?i.DefaultRotationWithScrollbar:i.DefaultRotation,r&&(u=t/c.sine),e.each(function(){var e=d3.select(this);if(r){var t=o.values.indexOf(this.textContent),i=s.left+o.outerPadding+o.categoryThickness*(t+.5);l||(i-=J);var h=i/c.cosine;(l||n||u>h)&&a(e[0][0],Math.min(h,u)),e.style("text-anchor","end").attr({dx:"-0.5em",dy:c.dy,transform:c.transform})}else e.style("text-anchor","middle").attr({dx:"0em",dy:"1em",transform:"rotate(0)"})})}function o(t,i,a){var r=i.xLabelMaxWidth;t.each(function(){var t=d3.select(this);t.style("text-anchor","middle").attr({dx:"0em",dy:"1em",transform:"rotate(0)"}),e.TextMeasurementService.wordBreak(this,r,a)})}function s(e,t,i){0!==e.size()&&e.each(function(){var e=d3.select(this);i(e[0][0],t)})}i.willLabelsFit=a,i.willLabelsWordBreak=r,i.DefaultRotation={sine:Math.sin(Math.PI*(35/180)),cosine:Math.cos(Math.PI*(35/180)),tangent:Math.tan(Math.PI*(35/180)),transform:"rotate(-35)",dy:"-0.5em"},i.DefaultRotationWithScrollbar={sine:Math.sin(.5*Math.PI),cosine:Math.cos(.5*Math.PI),tangent:Math.tan(.5*Math.PI),transform:"rotate(-90)",dy:"-0.8em"},i.rotate=n,i.wordBreak=o,i.clip=s}(ee=a.LabelLayoutStrategy||(a.LabelLayoutStrategy={})),a.createOrdinalScale=O,a.isLogScalePossible=G,a.createNumericalScale=H,a.createLinearScale=k,a.getRangeForColumn=B,a.applyCustomizedDomain=W,a.combineDomain=U,a.createAxisLabel=j,a.scaleShouldClamp=q,a.normalizeNonFiniteNumber=K,a.powerOfTen=Q}(a=t.AxisHelper||(t.AxisHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t,i,a,r){var n=i*u.PaddingConstRatio+e.lineWeight/2,o=t*u.PaddingConstRatio+e.lineWeight/2,c=i*u.ShapeConstRatio-e.lineWeight,h=t*u.ShapeConstRatio-e.lineWeight,p={x:n,y:o,width:c,height:h,rx:e.roundEdge,ry:e.roundEdge},d=l(c,h,r);s(e,t,i,a,r,d,"rect",p)}function i(e,t,i,a,r){var n=(i/u.OvalRadiusConst).toString(),o=(t/u.OvalRadiusConst).toString(),c=i/(u.OvalRadiusConst+u.OvalRadiusConstPadding)-e.lineWeight,h=t/(u.OvalRadiusConst+u.OvalRadiusConstPadding)-e.lineWeight,p={cx:n,cy:o,rx:c,ry:h},d=l(i,t,r);s(e,t,i,a,r,d,"ellipse",p)}function a(e,t,i,a,r){var n,o,s,l,c,h=i-u.SmallPaddingConstValue-u.SmallPaddingConstValue,p=t-u.SmallPaddingConstValue-u.SmallPaddingConstValue;45>=r?(c=r/90,n=i/2+h*c,o=u.SmallPaddingConstValue,s=i/2-h*c,l=t-u.SmallPaddingConstValue):135>=r?(c=(r-45)/90,n=i-u.SmallPaddingConstValue,o=u.SmallPaddingConstValue+p*c,s=u.SmallPaddingConstValue,l=t-u.SmallPaddingConstValue-p*c):225>=r?(c=(r-135)/90,n=i-u.SmallPaddingConstValue-h*c,o=t-u.SmallPaddingConstValue,s=u.SmallPaddingConstValue+h*c,l=u.SmallPaddingConstValue):315>=r?(c=(r-225)/90,n=u.SmallPaddingConstValue,o=t-u.SmallPaddingConstValue-p*c,s=i-u.SmallPaddingConstValue,l=u.SmallPaddingConstValue+p*c):360>=r&&(c=(r-315)/90,n=u.SmallPaddingConstValue+h*c,o=u.SmallPaddingConstValue,s=i-u.SmallPaddingConstValue-h*c,l=t-u.SmallPaddingConstValue),a.append("svg").attr({width:i,height:t}).append("line").attr({x1:n,y1:o,x2:s,y2:l}).style({"vector-effect":"non-scaling-stroke","stroke-width":e.lineWeight+"px","stroke-opacity":e.lineTransparency/100,stroke:e.lineColor})}function r(e,t,i,a,r){var n=e.lineWeight,s=t-n,l=i-n,c=[{x:(l*u.ArrowLeftHeadPoint.x).toString(),y:(s*u.ArrowLeftHeadPoint.y).toString()},{x:(l*u.ArrowMiddleHeadPoint.x).toString(),y:(s*u.ArrowMiddleHeadPoint.y).toString()},{x:(l*u.ArrowRightHeadPoint.x).toString(),y:(s*u.ArrowRightHeadPoint.y).toString()},{x:(l*u.ArrowRightMiddleHeadPoint.x).toString(),y:(s*u.ArrowRightMiddleHeadPoint.y).toString()},{x:(l*u.ArrowBottomRightPoint.x).toString(),y:(s*u.ArrowBottomRightPoint.y).toString()},{x:(l*u.ArrowBottomLeftPoint.x).toString(),
y:(s*u.ArrowBottomLeftPoint.y).toString()},{x:(l*u.ArrowLeftMiddleHeadPoint.x).toString(),y:(s*u.ArrowLeftMiddleHeadPoint.y).toString()}];o(e,c,a,t,i,r)}function n(e,t,i,a,r){var n=e.lineWeight;n>3&&(n-=3);var s=(i+n)*u.TrianglePaddingConstRatio,l=t-u.SmallPaddingConstValue-n<0?t-u.SmallPaddingConstValue:t-u.SmallPaddingConstValue-n,c=(t+n)*u.TrianglePaddingConstRatio,h=(i-n)*u.TriangleEndPaddingConstRatio<0?i*u.TriangleEndPaddingConstRatio:(i-n)*u.TriangleEndPaddingConstRatio,p=t-u.SmallPaddingConstValue-n<0?t-u.SmallPaddingConstValue:t-n-u.SmallPaddingConstValue,d=(s+h)/2;10>s&&(s=u.SmallPaddingConstValue),10>c&&(c=u.SmallPaddingConstValue);var g=[{x:s,y:l},{x:d,y:c},{x:h,y:p}];o(e,g,a,t,i,r)}function o(e,t,i,a,r,n){var o=d3.svg.line().x(function(e){return e.x}).y(function(e){return e.y}).interpolate("linear"),u={d:o(t)+" Z"},c=l(r,a,n);s(e,a,r,i,n,c,"path",u)}function s(e,t,i,a,r,n,o,s){a.append("div").style({transform:"rotate("+r+"deg) scale("+n+")","transform-origin":"center","-webkit-transform":"rotate("+r+"deg) scale("+n+")","-webkit-transform-origin":"center",width:i+"px",height:t+"px"}).append("svg").attr({width:i,height:t}).append(o).attr(s).style({"vector-effect":"non-scaling-stroke","stroke-width":e.lineWeight+"px",stroke:e.lineColor,"stroke-opacity":e.lineTransparency/100,fill:e.fillColor,"fill-opacity":e.showFill===!0?e.shapeTransparency/100:0})}function l(e,t,i){var a=e,r=t,n=Math.atan2(t,e),o=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),s=i/180*Math.PI;return e>=t?(90>i?s+=n:180>i?s-=n:270>i?s+=n:s-=n,r/Math.abs(Math.sin(s))/o):(90>i?s-=n:180>i?s+=n:270>i?s-=n:s+=n,a/Math.abs(Math.cos(s))/o)}var u;!function(e){e.PaddingConstRatio=.01,e.TrianglePaddingConstRatio=.15,e.TriangleEndPaddingConstRatio=.85,e.ShapeConstRatio=1-2*e.PaddingConstRatio,e.SmallPaddingConstValue=10,e.OvalRadiusConst=2,e.OvalRadiusConstPadding=.2,e.ArrowLeftHeadPoint={x:.05,y:.42},e.ArrowMiddleHeadPoint={x:.5,y:.016},e.ArrowRightHeadPoint={x:.95,y:.42},e.ArrowRightMiddleHeadPoint={x:.764,y:.42},e.ArrowBottomRightPoint={x:.764,y:.993},e.ArrowBottomLeftPoint={x:.246,y:.993},e.ArrowLeftMiddleHeadPoint={x:.246,y:.42}}(u=e.ShapeFactoryConsts||(e.ShapeFactoryConsts={})),e.createRectangle=t,e.createOval=i,e.createLine=a,e.createUpArrow=r,e.createTriangle=n}(t=e.ShapeFactory||(e.ShapeFactory={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function i(e,t){var i={};if(!e)return i;var a=e.objects;if(a){var r=a.categoryAxis;r&&(i={show:r.show,axisType:r.axisType,axisScale:r.axisScale,start:r.start,end:r.end,showAxisTitle:null==r.showAxisTitle?t:r.showAxisTitle,axisStyle:r.axisStyle,labelColor:r.labelColor,labelDisplayUnits:r.labelDisplayUnits,labelPrecision:r.labelPrecision})}return i}function a(e,t){var i={};if(!e)return i;var a=e.objects;if(a){var r=a.valueAxis;r&&(i={show:r.show,position:r.position,axisScale:r.axisScale,start:r.start,end:r.end,showAxisTitle:null==r.showAxisTitle?t:r.showAxisTitle,axisStyle:r.axisStyle,labelColor:r.labelColor,labelDisplayUnits:r.labelDisplayUnits,labelPrecision:r.labelPrecision,secShow:r.secShow,secPosition:r.secPosition,secAxisScale:r.secAxisScale,secStart:r.secStart,secEnd:r.secEnd,secShowAxisTitle:r.secShowAxisTitle,secAxisStyle:r.secAxisStyle,secLabelColor:r.secLabelColor,secLabelDisplayUnits:r.secLabelDisplayUnits,secLabelPrecision:r.secLabelPrecision})}return i}function r(t,i){return t&&(t=i&&i.axisType?i.axisType===e.axisType.scalar:!0),t}function n(e){return null!=e?0>e?0:e:null}function o(t,i,a,r){var n=e.AxisHelper.isDateTime(a);if(r)return n?new Date(i):i;if(a.text)return t.categories[i];if(t&&t.series&&t.series.length>0){var o=t.series[0];if(o){var s=o.data;if(s){t.hasHighlights&&(i=2*i);var l=s[i];if(l)return n&&null!=l.categoryValue?new Date(l.categoryValue):l.categoryValue}}}return i}t.getCategoryAxisProperties=i,t.getValueAxisProperties=a,t.isScalar=r,t.getPrecision=n,t.lookupXValue=o}(t=e.CartesianHelper||(e.CartesianHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=e.data.SQExprShortSerializer,a=function(){function t(e,t,i){this.colors=e,this.fillProp=t,this.defaultDataPointColor=i,this.defaultColorScale=e.getNewColorScale()}return t.prototype.getColorForSeriesValue=function(t,i,a){return this.fillProp&&e.DataViewObjects.getFillColor(t,this.fillProp)||this.defaultDataPointColor||this.getColorScaleForSeries(i).getColor(a).value},t.prototype.getColorScaleForSeries=function(e){return this.colors.getColorScaleByKey(i.serializeArray(e||[]))},t.prototype.getColorForMeasure=function(t,i){var a=this.defaultColorScale.getColor(i).value;return this.fillProp&&e.DataViewObjects.getFillColor(t,this.fillProp)||this.defaultDataPointColor||a},t.normalizeSelector=function(e,t){return e&&(t||e.data)?{data:e.data}:e},t}();t.ColorHelper=a}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a="rect";!function(i){function r(e,t,a){if(e){var r=a.start,n=a.end;return i.transformDomain(t,r,n)}return t}function n(t,i,a){if(!t.categories||!t.values||0===t.categories.length||0===t.values.length)return t;if("number"!=typeof i&&"number"!=typeof a)return t;var r=t.categories[0],n=r.values,o=r.objects;if(!n||!o)return t;var s=[],l=[],u=[];if("number"!=typeof i&&(i=n[0]),"number"!=typeof a&&(a=n[n.length-1]),i>a)return t;for(var c=0,h=t.values.length;h>c;c++)l.push([]);for(var p=0,h=n.length;h>p;p++)if(n[p]>=i&&n[p]<=a&&(s.push(n[p]),o&&u.push(o[p]),t.values))for(var d=0;d<t.values.length;d++)l[d].push(t.values[d].values[p]);var g=e.Prototype.inherit(t),m=g.values=e.Prototype.inherit(g.values),f=g.categories=e.Prototype.inherit(t.categories),y=g.categories[0]=e.Prototype.inherit(f[0]);y.values=s,y.objects&&(y.objects=u);for(var p=0,h=t.values.length;h>p;p++){var v=m[p]=e.Prototype.inherit(m[p]);v.values=l[p]}return g}function o(i,a,r,n,o,s,l,u,c){var h=r.categoryThickness,p=r.isScalar,d=r.outerPaddingRatio,g=t.AxisHelper.createDomain(i.series,i.categoryMetadata?i.categoryMetadata.type:e.ValueType.fromDescriptor({text:!0}),p,[o,s]),m=t.AxisHelper.createAxis({pixelSpan:a,dataDomain:g,metaDataColumn:i.categoryMetadata,formatString:t.valueFormatter.getFormatString(i.categoryMetadata,t.columnChartProps.general.formatString),outerPadding:h*d,isCategoryAxis:!0,isScalar:p,isVertical:n,categoryThickness:h,useTickIntervalForDisplayUnits:!0,getValueFn:function(e,a){return t.CartesianHelper.lookupXValue(i,e,a,p)},scaleType:l,axisDisplayUnits:u,axisPrecision:c});return r.categoryThickness=m.categoryThickness,m}function s(e,t){t&&e.attr("draggable","true").on("dragstart",t)}function l(e,t,a,r){return r&&!t||a&&!e?i.DimmedOpacity:i.DefaultOpacity}function u(e,t){for(var i=0,a=Number.MAX_VALUE,r=0,n=t.length;n>r;r++){var o=Math.abs(e-t[r]);a>o&&(a=o,i=r)}return i}function c(e,r,n,o){var s=e.selectAll(t.ColumnChart.SeriesClasses.selector),l="undefined"==typeof o;s.selectAll(a+r).filter(function(e){return e.categoryIndex!==n&&(l||e.categoryIndex===o)}).transition().style("fill-opacity",i.DimmedOpacity),s.selectAll(a+r).filter(function(e){return e.categoryIndex===n}).style("fill-opacity",i.DefaultOpacity)}function h(e,i,a){var r=i.selectAll(t.ColumnChart.SeriesClasses.selector),n=r.data(e.series,function(e){return e.key});return n.enter().append("g").classed(t.ColumnChart.SeriesClasses["class"],!0),n.exit().remove(),n}function p(e,t,r,n,o,s){var l;l=o?function(e){var t=_.filter(e.data,function(e){return!!e.value});return t}:function(e){return e.data};var u=t.selectAll(n.selector),c=u.data(l,function(e){return e.key});return c.enter().append(a).attr("class",function(e){return n["class"].concat(e.highlight?" highlight":"")}),c.style("fill",function(e){return e.color}).style("fill-opacity",function(t){return i.getFillOpacity(t.selected,t.highlight,s,e.hasHighlights)}).attr(r.shapeLayout),c.exit().remove(),c}function d(e,i,a,r,n,o){if(void 0===n&&(n=!1),e){for(var s=e.data(),l=[],u=0,c=s.length;c>u;u++)Array.prototype.push.apply(l,s[u].data);return t.dataLabelUtils.drawDefaultLabelsForDataPointChart(l,i,a,r,n,o)}t.dataLabelUtils.cleanDataLabels(i)}function g(e){for(var t=e.domain(),i=0,a=t.length;a>i;++i)t[i]===Number.POSITIVE_INFINITY?t[i]=Number.MAX_VALUE:t[i]===Number.NEGATIVE_INFINITY&&(t[i]=-Number.MAX_VALUE);e.domain(t)}function m(e,i){var a=i.xScale,r=i.yScale,n=r(0),o=a(0);switch(e.chartType){case t.ColumnChartType.stackedBar:case t.ColumnChartType.hundredPercentStackedBar:return o+Math.abs(t.AxisHelper.diffScaled(a,0,e.valueAbsolute))+t.AxisHelper.diffScaled(a,e.position-e.valueAbsolute,0)+t.dataLabelUtils.defaultColumnLabelMargin;case t.ColumnChartType.clusteredBar:return o+t.AxisHelper.diffScaled(a,Math.max(0,e.value),0)+t.dataLabelUtils.defaultColumnLabelMargin;case t.ColumnChartType.stackedColumn:case t.ColumnChartType.hundredPercentStackedColumn:return n+t.AxisHelper.diffScaled(r,e.position,0)-t.dataLabelUtils.defaultColumnLabelMargin;case t.ColumnChartType.clusteredColumn:return n+t.AxisHelper.diffScaled(r,Math.max(0,e.value),0)-t.dataLabelUtils.defaultColumnLabelMargin}}i.DimmedOpacity=.4,i.DefaultOpacity=1,i.applyUserMinMax=r,i.transformDomain=n,i.getCategoryAxis=o,i.applyInteractivity=s,i.getFillOpacity=l,i.getClosestColumnIndex=u,i.setChosenColumnOpacity=c,i.drawSeries=h,i.drawDefaultShapes=p,i.drawDefaultLabels=d,i.normalizeInfinityInScale=g,i.calculatePosition=m}(i=t.ColumnUtil||(t.ColumnUtil={}));var r;!function(e){function t(e,t){var i=e.selectAll(t.selector).data([]);i.exit().remove()}e.clearColumns=t}(r=t.ClusteredUtil||(t.ClusteredUtil={}));var n;!function(i){function a(e,i,a){return void 0===a&&(a=0),t.AxisHelper.diffScaled(e,a,i)}function r(t,i){var a={min:0,max:10};if(0===t.length)return a;var r=d3.min(t,function(e){return d3.min(e.data,function(e){return e.position-e.valueAbsolute})}),n=d3.max(t,function(e){return d3.max(e.data,function(e){return e.position})});return i&&(r=e.Double.roundToPrecision(r,s),n=e.Double.roundToPrecision(n,s)),{min:r,max:n}}function n(e,i,a,r,n){for(var o=0,s=0,l=0;a>l;l++){var u=n.getValueBySeriesAndCategory(l,i);u=t.AxisHelper.normalizeNonFiniteNumber(u),u>0?o+=u:0>u&&(s-=u)}var c=o+s;return{pos:o?o/c/o:1,neg:s?s/c/s:1}}function o(e,t){var i=e.selectAll(t.selector).data([]);i.exit().remove()}var s=1e-4;i.getSize=a,i.calcValueDomain=r,i.getStackedMultiplier=n,i.clearColumns=o}(n=t.StackedUtil||(t.StackedUtil={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){function a(e,i,a){if(e.categories&&e.categories.length>0){var r=e.categories[0];return r.source&&t.DataRoleHelper.hasRole(r.source,i)&&t.DataRoleHelper.hasRole(r.source,a)}return!1}function r(i,a){if(i.categories&&i.categories.length>0){var r=i.categories[0],n=r.values;return r.values.length>0?{categories:n,categoryFormatter:t.valueFormatter.create({format:t.valueFormatter.getFormatString(r.source,a),value:n[0],value2:n[n.length-1],displayUnitSystemType:e.DisplayUnitSystemType.Verbose}),categoryIdentities:r.identity,categoryObjects:r.objects}:{categories:[],categoryFormatter:{format:t.valueFormatter.format}}}return s()}function n(e){return void 0!==e.groupName?e.groupName:e.queryName}function o(e,i,a){var r=e,n=e.displayName;return void 0!==e.groupName&&(r=i.source,n=e.groupName),t.valueFormatter.format(n,t.valueFormatter.getFormatString(r,a))}function s(){return{categories:[null],categoryFormatter:{format:t.valueFormatter.format}}}function l(e,i,a,r){var n=null,o=null;if(e&&a&&a.displayName&&(n=a.displayName),i){var s=[];r&&(s=r.map(function(e){return e?e.displayName:""}).filter(function(e,t,i){return""!==e&&i.indexOf(e)===t}),o=t.valueFormatter.formatListAnd(s))}return{xAxisLabel:n,yAxisLabel:o}}i.categoryIsAlsoSeriesRole=a,i.getPivotedCategories=r,i.getSeriesName=n,i.getFormattedLegendLabel=o,i.createAxesLabels=l}(i=t.converterHelper||(t.converterHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=jsCommon.CssConstants.createClassAndSelector,r=jsCommon.PixelConverter,n=t.labelStyle;!function(i){function o(e,t){e&&(void 0!==e.show&&(t.show=e.show),void 0!==e.showSeries&&(t.show=e.showSeries),void 0!==e.color&&(t.labelColor=e.color.solid.color),void 0!==e.labelDisplayUnits&&(t.displayUnits=e.labelDisplayUnits),void 0!==e.labelPrecision&&(t.precision=e.labelPrecision>=0?e.labelPrecision:i.defaultLabelPrecision),void 0!==e.fontSize&&(t.fontSize=e.fontSize),void 0!==e.showAll&&(t.showLabelPerSeries=e.showAll),void 0!==e.labelStyle&&(t.labelStyle=e.labelStyle))}function s(e,t){o(e,t),e&&void 0!==e.labelDensity&&(t.labelDensity=e.labelDensity)}function l(e,t,a){return void 0===e&&(e=!1),{show:e,position:0,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:t||i.defaultLabelColor,formatterOptions:null,fontSize:a||i.DefaultFontSizeInPt}}function u(e,t,i){var a=l(!0,e,i);return a.showCategory=!0,a.categoryLabelColor=t,a}function c(){return{show:!1,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:i.defaultInsideLabelColor,showCategory:!0,formatterOptions:null}}function h(){return c()}function p(e){var t=l(!1,void 0);return t.position=null,t.labelColor=void 0,t}function d(){return{show:!1,position:0,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:i.defaultLabelColor,formatterOptions:null,fontSize:i.DefaultFontSizeInPt}}function g(e){return{show:!1,position:0,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:i.defaultLabelColor,formatterOptions:null,fontSize:i.DefaultFontSizeInPt,labelDensity:e?t.NewDataLabelUtils.LabelDensityMax:t.NewDataLabelUtils.LabelDensityMin}}function m(){return{show:!1,showCategory:!1,position:0,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:i.defaultInsideLabelColor,formatterOptions:null,fontSize:i.DefaultFontSizeInPt}}function f(){var e=i.getDefaultLabelSettings(!0,i.defaultLabelColor,i.DefaultFontSizeInPt);return e.labelStyle=n.category,e}function y(){return{show:!0,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:null,position:null,fontSize:i.minLabelFontSize,formatterOptions:null}}function v(){return{show:!0,position:e.visuals.labelPosition.insideCenter,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:i.defaultLabelColor,formatterOptions:null,fontSize:i.DefaultFontSizeInPt}}function b(){return{show:!1,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:i.defaultLabelColor,position:null,showCategory:!0,formatterOptions:null}}function C(t,a){if(t!==i.defaultLabelPrecision)return t;if(a){var r=a.split(";")[0],n=e.NumberFormat.getCustomFormatMetadata(r,!0);if(n.hasDots)return n.precision}return U}function x(i,a,r,n,o,s,l){void 0===o&&(o=!1);var u=new e.DataLabelManager,c=u.hideCollidedLabels(n,i,r),h=o&&!!s,p=w(c,a,!1,h);return p?(h?(p.text(function(e){return e.labeltext}).transition().duration(s).style(r.style).style("opacity",l?function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,l,!1)}:1).attr({x:function(e){return e.labelX},y:function(e){return e.labelY}}),p.exit().transition().duration(s).style("opacity",0).remove()):(p.attr({x:function(e){return e.labelX},y:function(e){return e.labelY}}).text(function(e){return e.labeltext}).style(r.style),p.exit().remove()),p):void 0}function S(e,t,i,a,r){void 0===a&&(a=!1);var n=e.filter(i.filter),o=w(n,t);return o?(o.attr(i.labelLayout).text(i.labelText).style(i.style),a&&r&&o.transition().duration(r),o.exit().remove(),o):void 0}function w(e,t,i,a){if(void 0===i&&(i=!1),void 0===a&&(a=!1),0===e.length)return D(t,!0),null;t.select(j.selector).empty()&&t.append("g").classed(j["class"],!0);var r=null!=e[0].key,n=null!=e[0].identity,o=r?function(e){return e.key}:n?function(e){return e.identity.getKey()}:void 0,s=i?t.select(j.selector).selectAll(K.selector).data(e,function(e){return e.data.identity.getKey()}):null!=o?t.select(j.selector).selectAll(K.selector).data(e,o):t.select(j.selector).selectAll(K.selector).data(e),l=s.enter().append("text").classed(K["class"],!0);return a&&l.style("opacity",0),s}function D(e,t){void 0===t&&(t=!1);var i=[],a=e.selectAll(K.selector).data(i);if(a.exit().remove(),e.selectAll(j.selector).remove(),t){var r=e.selectAll(Q.selector).data(i);r.exit().remove(),e.selectAll(q.selector).remove()}}function P(e,i,a){e.selectAll(K.selector).style("fill-opacity",function(e){var r=t.ColumnUtil.getFillOpacity(e.selected,e.highlight,!e.highlight&&i,!e.selected&&a)<1?0:1;return r})}function L(t){var a={text:t.formatter?t.formatter.format(t.label):e.formattingService.formatValue(t.label,t.format),fontFamily:i.LabelTextProperties.fontFamily,fontSize:r.fromPoint(t.fontSize),fontWeight:i.LabelTextProperties.fontWeight};return e.TextMeasurementService.getTailoredTextOrDefault(a,t.maxWidth?t.maxWidth:i.maxLabelWidth)}function _(e,t,i,a){return{x:function(i){return e.scale(i.categoryIndex)+t/2},y:function(e){return N(i.scale,e,a)}}}function N(t,a,r){var n=t(0)-t(Math.abs(a.value)),o=t(a.position),s=t(r[0]),l=t(a.position+a.value);if(a.value<0){var u={text:a.labeltext,fontFamily:i.LabelTextProperties.fontFamily,fontSize:i.LabelTextProperties.fontSize,fontWeight:i.LabelTextProperties.fontWeight},c=o+n+e.TextMeasurementService.estimateSvgTextHeight(u);if(s>c)return c}else{var h=o-n-i.labelMargin;if(h>0)return h}return a.isLabelInside=!0,T(o,l,s)}function T(e,t,i){return e=0>e?0:e,e=e>i?i:e,t=0>t?0:t,t=t>i?i:t,Math.abs(t-e)/2+Math.min(e,t)}function V(a,r,n){if(null==a||null===a.value)return!1;var o={text:n.labelText(a),fontFamily:i.LabelTextProperties.fontFamily,fontSize:i.LabelTextProperties.fontSize,fontWeight:i.LabelTextProperties.fontWeight},s=t.WaterfallChart.getRectTop(r.scale,a.position,a.value)-i.labelMargin;if(s>0)return!0;var l=e.TextMeasurementService.measureSvgTextWidth(o),u=e.TextMeasurementService.estimateSvgTextHeight(o),c=n.categoryWidth,h=Math.abs(t.AxisHelper.diffScaled(r.scale,Math.max(0,Math.abs(a.value)),0));return l>c||u>h?!1:!0}function M(e){return{labelText:function(t){return L({label:t.labeltext,fontSize:e.fontSize})},labelLayout:{x:function(e){return e.x},y:function(t){var a=t.radius+i.labelMargin;return 0===e.position?t.y-a:t.y+a}},filter:function(e){return null!=e&&null!=e.labeltext},style:{fill:function(e){return e.labelFill},"font-size":r.fromPoint(e.fontSize)}}}function A(e,t,a,r,n,o,s,l){var u=r?i.hundredPercentFormat:null,c=B(),h=s?s.hasSelection():!1;return{labelText:function(e){var t=null!=u?u:e.labelFormatString,a=k(n,e.labelSettings),r=c.getOrCreate(t,e.labelSettings,a);return L({label:r.format(e.value),maxWidth:i.maxLabelWidth})},labelLayout:t,filter:function(t){return i.getColumnChartLabelFilter(t,h,e.hasHighlights,o,l)},style:{fill:function(e){return e.labelFill},"text-anchor":a?"middle":"start"}}}function R(a,r,n){var o,s,l=r.xScale,u=r.yScale,c=r.columnWidth,h={text:a.labeltext,fontFamily:i.LabelTextProperties.fontFamily,fontSize:i.LabelTextProperties.fontSize,fontWeight:i.LabelTextProperties.fontWeight},p=e.TextMeasurementService.measureSvgTextWidth(h),d=e.TextMeasurementService.estimateSvgTextHeight(h),g=!1,m=t.ColumnUtil.calculatePosition(a,r);switch(a.chartType){case t.ColumnChartType.stackedBar:case t.ColumnChartType.hundredPercentStackedBar:(!a.lastSeries||m+p>n||a.chartType===t.ColumnChartType.hundredPercentStackedBar)&&(o=-t.StackedUtil.getSize(l,a.valueAbsolute),s=c,g=!0);break;case t.ColumnChartType.clusteredBar:m+p>n&&(o=Math.abs(t.AxisHelper.diffScaled(l,0,a.value)),s=c,g=!0);break;case t.ColumnChartType.stackedColumn:case t.ColumnChartType.hundredPercentStackedColumn:(!a.lastSeries||0>=m||a.chartType===t.ColumnChartType.hundredPercentStackedColumn)&&(o=c,s=t.StackedUtil.getSize(u,a.valueAbsolute),g=!0);break;case t.ColumnChartType.clusteredColumn:0>=m&&(o=c,s=Math.abs(t.AxisHelper.diffScaled(u,0,a.value)),g=!0);break;default:return!0}return g&&(p>o||d>s)?!1:!0}function I(e,i,a,r,n){var o=i?t.ColumnUtil.getFillOpacity(e.selected,e.highlight,!e.highlight&&i,!e.selected&&a):t.ColumnUtil.getFillOpacity(e.selected,e.highlight,i,a);return null!=e&&null!=e.value&&R(e,r,n)&&1===o}function F(e,a,r,n,o){return{labelText:function(e){return L({label:e.category,maxWidth:2*i.maxLabelWidth})},labelLayout:{x:function(t){return e(t.x)},y:function(e){var s=t.ScatterChart.getBubbleRadius(e.radius,o,n)+i.labelMargin;return 0===r.position?a(e.y)-s:a(e.y)+s}},filter:function(e){return null!=e&&null!=e.category},style:{fill:function(e){return e.labelFill}}}}function E(e,t,a,n,o){var s=B();return{labelText:function(e){var t=k(o,e.labelSettings),i=s.getOrCreate(e.labelFormatString,e.labelSettings,t);return L({label:i.format(e.value)})},labelLayout:{x:function(t){return e(n?t.categoryValue:t.categoryIndex)},y:function(e){return 0===a.position?t(e.value)-i.labelMargin:t(e.value)+i.labelMargin}},filter:function(e){return null!=e&&null!=e.value},style:{fill:function(e){return e.labelFill},"font-size":function(e){return r.fromPoint(e.labelSettings.fontSize)}}}}function O(a,n,o,s,l){var u=n.yScale,c=n.xScale,h=n.margin.left,p=.7,d=n.xScale.rangeBand(),g=n.verticalRange/2,m=t.valueFormatter.getFormatString(a.valuesMetadata[0],t.funnelChartProps.general.formatString),f=e.TextMeasurementService.measureSvgTextWidth,y=null;if(0===s.displayUnits){var v=d3.min(a.slices,function(e){return e.value}),b=d3.max(a.slices,function(e){return e.value});y=Math.max(Math.abs(v),Math.abs(b))}var C=B();return{labelText:function(e){var i=Math.abs(u(e.value)-u(0)),a=Math.abs(u(e.value)-u(0))-2*o,r=g-i/2-o,n=null!=m?m:e.labelFormatString,l=Math.max(a,r),c=C.getOrCreate(n,s,y),h=c.format(t.FunnelChart.getFunnelSliceValue(e,!0));return L({label:h,maxWidth:l,fontSize:s.fontSize})},labelLayout:{y:function(t,a){var n={text:t.labeltext,fontFamily:i.LabelTextProperties.fontFamily,fontSize:r.fromPoint(s.fontSize),fontWeight:i.LabelTextProperties.fontWeight},o=e.TextMeasurementService.estimateSvgTextHeight(n);return c(a)+d/2+o/2},x:function(e){var a=Math.abs(u(e.value)-u(0)),n=Math.abs(u(e.value)-u(0))-2*o,l=g-a/2-o,c=Math.max(n,l),p=null!=m?m:e.labelFormatString,d=C.getOrCreate(p,s,y),v=d.format(t.FunnelChart.getFunnelSliceValue(e,!0)),b={text:L({label:v,maxWidth:c}),fontFamily:i.LabelTextProperties.fontFamily,fontSize:r.fromPoint(s.fontSize),fontWeight:i.LabelTextProperties.fontWeight},x=f(b),S=s.position;switch(S===t.labelPosition.outsideEnd&&x>l||0===e.value?S=t.labelPosition.insideCenter:S===t.labelPosition.insideCenter&&x>n&&(S=t.labelPosition.outsideEnd),S){case t.labelPosition.outsideEnd:return h+g+a/2+o+x/2;default:return e.labelFill=0!==e.value?i.defaultInsideLabelColor:e.labelFill,h+g}},dy:"-0.15em"},filter:function(t){if(null==t||null==t.value||a.hasHighlights!==!!t.highlight)return!1;var n={text:t.labeltext,fontFamily:i.LabelTextProperties.fontFamily,fontSize:r.fromPoint(s.fontSize),fontWeight:i.LabelTextProperties.fontWeight},o=e.TextMeasurementService.estimateSvgTextHeight(n)*p;return d>o},style:{fill:function(e){return e.labelFill},"fill-opacity":function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,!1,!1)},"font-size":function(e){return r.fromPoint(s.fontSize)}}}}function G(e){if(e.dataLabelsSettings){var t={objectName:"labels",selector:e.selector,properties:{}};if(e.show&&e.selector?t.properties.showSeries=e.dataLabelsSettings.show:e.show&&(t.properties.show=e.dataLabelsSettings.show),t.properties.color=e.dataLabelsSettings.labelColor,e.displayUnits&&(t.properties.labelDisplayUnits=e.dataLabelsSettings.displayUnits),e.precision){var a=e.dataLabelsSettings.precision;t.properties.labelPrecision=a===i.defaultLabelPrecision?null:a}return e.position&&(t.properties.labelPosition=e.dataLabelsSettings.position,e.positionObject&&(t.validValues={labelPosition:e.positionObject})),e.labelStyle&&(t.properties.labelStyle=e.dataLabelsSettings.labelStyle),e.fontSize&&(t.properties.fontSize=e.dataLabelsSettings.fontSize),e.showAll&&(t.properties.showAll=e.dataLabelsSettings.showLabelPerSeries),e.enumeration.pushInstance(t)}}function H(e,t){return G(e),e.enumeration.pushInstance({objectName:"labels",selector:e.selector,properties:{labelDensity:t}})}function z(e,t,a,r,n){void 0===r&&(r=!1);var o=t?t:d(),s={objectName:"categoryLabels",selector:null,properties:{show:r?o.showCategory:o.show,fontSize:t?t.fontSize:i.DefaultFontSizeInPt}};a&&(s.properties.color=o.categoryLabelColor?o.categoryLabelColor:o.labelColor),n&&(s.properties.fontSize=n),e.pushInstance(s)}function k(e,t){return e&&e.displayUnit&&0===t.displayUnits?e.displayUnit.value:null}function B(){return{cache:{defaultFormatter:null},getOrCreate:function(e,i,a){if(e){var r={formatString:e,displayUnits:i.displayUnits,precision:C(i.precision,e),value2:a},n=JSON.stringify(r);return this.cache[n]||(this.cache[n]=t.valueFormatter.create(W(i,e,a,r.precision))),this.cache[n]}return this.cache.defaultFormatter||(this.cache.defaultFormatter=t.valueFormatter.create(W(i,e,a,i.precision))),this.cache.defaultFormatter}}}function W(t,i,a,r){return{displayUnitSystemType:e.DisplayUnitSystemType.DataLabels,format:i,precision:r,value:t.displayUnits,value2:a,allowFormatBeautification:!0}}i.minLabelFontSize=8,i.labelMargin=8,i.maxLabelWidth=50,i.defaultColumnLabelMargin=5,i.defaultColumnHalfLabelHeight=4,i.DefaultDy="-0.15em",i.DefaultFontSizeInPt=9,i.StandardFontFamily="wf_segoe-ui_normal",i.LabelTextProperties={fontFamily:"wf_standard-font",fontSize:r.fromPoint(i.DefaultFontSizeInPt),fontWeight:"normal"},i.defaultLabelColor="#777777",i.defaultInsideLabelColor="#ffffff",i.hundredPercentFormat="0.00 %;-0.00 %;0.00 %",i.defaultLabelPrecision=void 0;var U=0,j=a("labels"),q=a("lines"),K=a("data-labels"),Q=a("line-label");i.updateLabelSettingsFromLabelsObject=o,i.updateLineChartLabelSettingsFromLabelsObject=s,i.getDefaultLabelSettings=l,i.getDefaultCardLabelSettings=u,i.getDefaultTreemapLabelSettings=c,i.getDefaultSunburstLabelSettings=h,i.getDefaultColumnLabelSettings=p,i.getDefaultPointLabelSettings=d,i.getDefaultLineChartLabelSettings=g,i.getDefaultMapLabelSettings=m,i.getDefaultDonutLabelSettings=f,i.getDefaultGaugeLabelSettings=y,i.getDefaultFunnelLabelSettings=v,i.getDefaultKpiLabelSettings=b,i.getLabelPrecision=C,i.drawDefaultLabelsForDataPointChart=x,i.drawDefaultLabelsForFunnelChart=S,i.cleanDataLabels=D,i.setHighlightedLabelsOpacity=P,i.getLabelFormattedText=L,i.getLabelLayoutXYForWaterfall=_,i.doesDataLabelFitInShape=V,i.getMapLabelLayout=M,i.getColumnChartLabelLayout=A,i.getColumnChartLabelFilter=I,i.getScatterChartLabelLayout=F,i.getLineChartLabelLayout=E,i.getFunnelChartLabelLayout=O,i.enumerateDataLabels=G,i.enumerateLineChartDataLabels=H,i.enumerateCategoryLabels=z,i.createColumnFormatterCacheManager=B,i.getOptionsForLabelFormatter=W}(i=t.dataLabelUtils||(t.dataLabelUtils={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=jsCommon.CssConstants.createClassAndSelector,r=jsCommon.PixelConverter;!function(i){function n(e,t,a,n){void 0===a&&(a=!1),void 0===n&&(n=!1);var o=e.selectAll(x.selector).data(_.filter(t,function(e){return e.isVisible}),function(e,t){return e.identity?e.identity.getKeyWithoutHighlight():t});o.enter().append("text").classed(x["class"],!0);var s={x:function(e){return e.boundingBox.left+e.boundingBox.width/2},y:function(e){return e.boundingBox.top+e.boundingBox.height},dy:"-0.15em"};a&&(s.dy=void 0),o.text(function(e){return e.text}).attr(s).style({fill:function(e){return e.fill},"font-size":function(e){return r.fromPoint(e.fontSize||i.DefaultLabelFontSizeInPt)},"text-anchor":function(e){return e.textAnchor}}),o.exit().remove();var l=e.selectAll(S.selector).data(_.filter(n?t:[],function(e){return e.isVisible}),function(e,t){return e.identity?e.identity.getKeyWithoutHighlight():t});return l.enter().append("text").classed(S["class"],!0),s={x:function(e){return e.boundingBox.left+e.boundingBox.width/2},y:function(e){var t=void 0!==e.text?e.boundingBox.height/2:e.boundingBox.height;return e.boundingBox.top+t},dy:"-0.15em"},a&&(s.dy=void 0),l.text(function(e){return e.secondRowText}).attr(s).style({fill:function(e){return e.fill},"font-size":function(e){return r.fromPoint(e.fontSize||i.DefaultLabelFontSizeInPt)}}),l.exit().remove(),o}function o(e,t,a,n,o){void 0===n&&(n=!1),void 0===o&&(o="cubic-in-out");var s=e.selectAll(x.selector).data(_.filter(t,function(e){return e.isVisible}),function(e,t){return e.identity?e.identity.getKeyWithoutHighlight():t});s.enter().append("text").classed(x["class"],!0);var l={x:function(e){return e.boundingBox.left+e.boundingBox.width/2},y:function(e){return e.boundingBox.top+e.boundingBox.height},dy:"-0.15em"};return n&&(l.dy=void 0),s.text(function(e){return e.text}).style({fill:function(e){return e.fill},"font-size":function(e){return r.fromPoint(e.fontSize||i.DefaultLabelFontSizeInPt)}}).transition().ease(o).duration(a).attr(l),s.exit().remove(),s}function s(e,t,a,r){var n=e.selectAll("rect").data(_.filter(t,function(e){return e.isVisible}));return n.enter().append("rect"),n.attr({x:function(e){return e.boundingBox.left-i.horizontalLabelBackgroundMargin},y:function(e){return e.boundingBox.top-i.verticalLabelBackgroundMargin},rx:v,ry:v,width:function(e){return e.boundingBox.width+2*i.horizontalLabelBackgroundMargin},height:function(e){return void 0===e.text&&void 0===e.secondRowText?0:e.boundingBox.height+2*i.verticalLabelBackgroundMargin}}).style("fill",a?a:"#000000").style("fill-opacity",null!=r?r:1),n.exit().remove(),n}function l(e,a,r,n,o){var s=r.width/2-Math.abs(a)-i.maxLabelOffset,l=t.dataLabelUtils.createColumnFormatterCacheManager(),u="";if(!n.show)return u;var c=n.labelStyle===t.labelStyle.both?s/2:s,h=l.getOrCreate(e.data.labelFormatString,n,o);if((n.labelStyle===t.labelStyle.both||n.labelStyle===t.labelStyle.category)&&(u=t.dataLabelUtils.getLabelFormattedText({label:e.data.label,maxWidth:c,fontSize:n.fontSize})),n.labelStyle===t.labelStyle.both||n.labelStyle===t.labelStyle.data){var p=n.labelStyle===t.labelStyle.both?" ("+h.format(e.data.measure)+")":e.data.measure;u+=t.dataLabelUtils.getLabelFormattedText({label:p,maxWidth:c,formatter:n.labelStyle===t.labelStyle.data?h:null,fontSize:n.fontSize})}return u}function u(e){var t=0>e?-i.maxLabelOffset:i.maxLabelOffset;return e+=t}function c(e,t,i,a){e.select(w.selector).empty()&&e.append("g").classed(w["class"],!0);var r=e.select(w.selector).selectAll("polyline").data(t,i);r.enter().append("polyline").classed(D["class"],!0),r.attr("points",function(e){return e.leaderLinePoints}).style({stroke:function(e){return a?a:e.fill}}),r.exit().remove()}function h(t,i,a){return a?a.format(t):e.formattingService.formatValue(t,i)}function p(e,t){return e&&e.displayUnit&&0===t.displayUnits?e.displayUnit.value:null}function d(t,i){if(t!==b)return t;if(i){var a=i.split(";")[0],r=e.NumberFormat.getCustomFormatMetadata(a,!0);if(r.hasDots)return r.precision}return C}function g(){return{cache:{defaultFormatter:null},getOrCreate:function(e,i,a){if(e){var r={formatString:e,displayUnits:i.displayUnits,precision:d(i.precision,e),value2:a},n=JSON.stringify(r);return this.cache[n]||(this.cache[n]=t.valueFormatter.create(m(i,e,a,r.precision))),this.cache[n]}return this.cache.defaultFormatter||(this.cache.defaultFormatter=t.valueFormatter.create(m(i,e,a,i.precision))),this.cache.defaultFormatter}}}function m(t,i,a,r){return{displayUnitSystemType:e.DisplayUnitSystemType.DataLabels,format:i,precision:r,value:t.displayUnits,value2:a,allowFormatBeautification:!0}}function f(e){for(var i=[],a={},r=function(e,i,a){return i.some(function(i){return a?t.shapes.Rect.equals(e.parentShape.rect,i.rect):t.shapes.Point.equals(e.parentShape.point,i.point)})},n=0;n<e.length;n++){var o=e[n],s=1===o.parentType,l=a[o.text];l?r(o,l,s)||(i.push(o),l.push(o.parentShape)):(i.push(o),a[o.text]=[o.parentShape])}return i}function y(e){switch(e){case 9:return{maximumOffset:t.ScatterChart.dataLabelLayoutMaximumOffset,startingOffset:t.ScatterChart.dataLabelLayoutStartingOffset,offsetIterationDelta:t.ScatterChart.dataLabelLayoutOffsetIterationDelta,allowLeaderLines:!0};default:return{
maximumOffset:i.maxLabelOffset,startingOffset:i.startingLabelOffset}}}i.DefaultLabelFontSizeInPt=9,i.MapPolylineOpacity=.5,i.LabelDensityBufferFactor=3,i.LabelDensityPadding=6,i.LabelDensityMin=0,i.LabelDensityMax=6,i.startingLabelOffset=8,i.maxLabelOffset=8,i.maxLabelWidth=50,i.hundredPercentFormat="0.00 %;-0.00 %;0.00 %",i.LabelTextProperties={fontFamily:"wf_standard-font",fontSize:r.fromPoint(i.DefaultLabelFontSizeInPt),fontWeight:"normal"},i.defaultLabelColor="#777777",i.defaultInsideLabelColor="#ffffff",i.horizontalLabelBackgroundMargin=4,i.verticalLabelBackgroundMargin=2;var v=4,b=void 0,C=0;i.labelGraphicsContextClass=a("labelGraphicsContext"),i.labelBackgroundGraphicsContextClass=a("labelBackgroundGraphicsContext");var x=a("label"),S=a("catagorylabel"),w=a("leader-lines"),D=a("line-label");i.drawDefaultLabels=n,i.animateDefaultLabels=o,i.drawLabelBackground=s,i.setLabelTextDonutChart=l,i.getXPositionForDonutLabel=u,i.drawLabelLeaderLines=c,i.getLabelFormattedText=h,i.getDisplayUnitValueFromAxisFormatter=p,i.createColumnFormatterCacheManager=g,i.removeDuplicates=f,i.getDataLabelLayoutOptions=y}(i=t.NewDataLabelUtils||(t.NewDataLabelUtils={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){if(e&&e.length>0){var a=e[0];if(a.values&&a.values.length>0)for(var r=0,n=a.values.length;n>r;++r){var o=a.values[r];if(o&&o.source&&i(o.source,t))return r}}return-1}function i(e,t){var i=e.roles;return i&&i[t]}function a(e,t){return null!=e&&null!=e.metadata&&e.metadata.columns&&_.any(e.metadata.columns,function(e){return e.roles&&void 0!==e.roles[t]})}e.getMeasureIndexOfRole=t,e.hasRole=i,e.hasRoleInDataView=a}(t=e.DataRoleHelper||(e.DataRoleHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){var i=parseFloat(t);if(e){var a=d[e.graphic.toUpperCase()];if(a&&!isNaN(i)){var r=a.statusValues;e.normalizedFiveStateKpiRange&&5===r.length&&(i=2*i);var n=i+Math.floor(r.length/2);return[a.kpiIconClass,r[n]].join(" ").trim()}}}function i(e,t){return e?1===t?[n,o,e].join(" "):[n,e].join(" "):void 0}function a(e,a,r){var n=t(e,a);return i(n,r)}function r(e,a,r){var n=e&&e.kpi;if(n){var o=t(n,a);if(o)return{caption:o,statusGraphic:n.graphic,"class":i(o,r)}}}var n="powervisuals-glyph",o="big-kpi",s=["kpi-red","kpi-yellow","kpi-green"],l={kpiIconClass:"circle",statusValues:s},u={kpiIconClass:"",statusValues:["circle-x kpi-red","circle-exclamation kpi-yellow","circle-checkmark kpi-green"]},c={kpiIconClass:"traffic-light",statusValues:s},h={kpiIconClass:"",statusValues:["rhombus kpi-red","triangle kpi-yellow","circle kpi-green"]},p={kpiIconClass:"",statusValues:["circle-empty","circle-one-quarter","circle-half","circle-three-quarters","circle-full"]},d={"THREE CIRCLES COLORED":l,"TRAFFIC LIGHT - SINGLE":l,"THREE FLAGS COLORED":{kpiIconClass:"flag",statusValues:s},"ROAD SIGNS":u,"THREE SYMBOLS CIRCLED COLORED":u,"TRAFFIC LIGHT":c,"THREE TRAFFIC LIGHTS RIMMED COLORED":c,"THREE SYMBOLS UNCIRCLED COLORED":{kpiIconClass:"",statusValues:["x kpi-red","exclamation kpi-yellow","checkmark kpi-green"]},SHAPES:h,"SMILEY FACE":h,THERMOMETER:h,CYLINDER:h,"THREE SIGNS COLORED":h,"THREE STARS COLORED":{kpiIconClass:"star-stacked",statusValues:["star-empty","star-half-full","star-full"]},"FIVE BARS COLORED":{kpiIconClass:"bars-stacked",statusValues:["bars-zero","bars-one","bars-two","bars-three","bars-four"]},"FIVE BOXES COLORED":{kpiIconClass:"boxes-stacked",statusValues:["boxes-zero","boxes-one","boxes-two","boxes-three","boxes-four"]},"FIVE QUARTERS COLORED":p,"GAUGE - ASCENDING":p,"GAUGE - DESCENDING":{kpiIconClass:"",statusValues:["circle-full","circle-three-quarters","circle-half","circle-one-quarter","circle-empty"]},"STANDARD ARROW":{kpiIconClass:"",statusValues:["arrow-down","arrow-right-down","arrow-right","arrow-right-up","arrow-up"]},"VARIANCE ARROW":{kpiIconClass:"",statusValues:["arrow-down kpi-red","arrow-right kpi-yellow","arrow-up kpi-green"]},"STATUS ARROW - ASCENDING":{kpiIconClass:"",statusValues:["arrow-down kpi-red","arrow-right-down kpi-yellow","arrow-right kpi-yellow","arrow-right-up kpi-yellow","arrow-up kpi-green"]},"STATUS ARROW - DESCENDING":{kpiIconClass:"",statusValues:["arrow-up kpi-green","arrow-right-up kpi-yellow","arrow-right kpi-yellow","arrow-right-down kpi-yellow","arrow-down kpi-red"]}};e.getClassForKpi=a,e.getKpiImageMetadata=r}(t=e.KpiUtil||(e.KpiUtil={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){function a(a,r,n,o){if(_.isEmpty(r)){var s={selector:{id:"0"},properties:{show:!1,value:"",lineColor:{solid:{color:n}},transparency:50,style:t.lineStyle.dashed,position:t.referenceLinePosition.back,dataLabelShow:!1},objectName:o};return void a.pushInstance(s)}for(var l=0;l<r.length;l++){var u=r[l],c=u.object,h=e.DataViewObject.getValue(c,i.referenceLineProps.show,!1),p=e.DataViewObject.getValue(c,i.referenceLineProps.value),d=e.DataViewObject.getValue(c,i.referenceLineProps.lineColor,{solid:{color:n}}),g=e.DataViewObject.getValue(c,i.referenceLineProps.transparency,50),m=e.DataViewObject.getValue(c,i.referenceLineProps.style,t.lineStyle.dashed),f=e.DataViewObject.getValue(c,i.referenceLineProps.position,t.referenceLinePosition.back),y=e.DataViewObject.getValue(c,i.referenceLineProps.dataLabelShow,!1),s={selector:{id:u.id},properties:{show:h,value:p,lineColor:d,transparency:g,style:m,position:f,dataLabelShow:y},objectName:o};if(y){var v=e.DataViewObject.getValue(c,i.referenceLineProps.dataLabelColor,{solid:{color:n}}),b=e.DataViewObject.getValue(c,i.referenceLineProps.dataLabelHorizontalPosition,t.referenceLineDataLabelHorizontalPosition.left),C=e.DataViewObject.getValue(c,i.referenceLineProps.dataLabelVerticalPosition,t.referenceLineDataLabelVerticalPosition.above),x=e.DataViewObject.getValue(c,i.referenceLineProps.dataLabelDecimalPoints,void 0)<0?void 0:e.DataViewObject.getValue(c,i.referenceLineProps.dataLabelDecimalPoints,void 0);s.properties[i.referenceLineProps.dataLabelColor]=v,s.properties[i.referenceLineProps.dataLabelHorizontalPosition]=b,s.properties[i.referenceLineProps.dataLabelVerticalPosition]=C,s.properties[i.referenceLineProps.dataLabelDecimalPoints]=x}a.pushInstance(s)}}function r(a){var r=a.graphicContext,n=a.axes,o=a.referenceLineProperties,s=a.isHorizontal,l=a.viewport,u=a.classAndSelector,c=n.x.scale,h=n.y1.scale,p=e.DataViewObject.getValue(o,i.referenceLineProps.value,0),d=e.DataViewObject.getValue(o,i.referenceLineProps.lineColor,{solid:{color:a.defaultColor}}),g=e.DataViewObject.getValue(o,i.referenceLineProps.transparency),m=e.DataViewObject.getValue(o,i.referenceLineProps.style,t.lineStyle.dashed),f=e.DataViewObject.getValue(o,i.referenceLineProps.position,t.referenceLinePosition.back),y=r.select(u.selector),v=$(y[0]).index(),b=v>1?t.referenceLinePosition.front:t.referenceLinePosition.back,C=-1!==v,x=b!==f;C&&x&&y.remove(),(!C||x)&&(y=f===t.referenceLinePosition.back?r.insert("line",":first-child"):r.append("line"));var S=s?0:c(p),w=s?h(p):0,D=s?l.width:c(p),P=s?h(p):l.height;y.attr({"class":u["class"],x1:S,y1:w,x2:D,y2:P}).style({stroke:d.solid.color}),null!=g&&y.style("stroke-opacity",(100-g)/100),m===t.lineStyle.dashed?y.style("stroke-dasharray","5, 5"):m===t.lineStyle.dotted?y.style({"stroke-dasharray":"1, 5","stroke-linecap":"round"}):m===t.lineStyle.solid&&y.style({"stroke-dasharray":null,"stroke-linecap":null})}function n(a){var r=5,n=a.axes,o=a.referenceLineProperties,s=a.isHorizontal,l=a.viewport,u=n.x.scale,c=n.y1.scale,h=e.DataViewObject.getValue(o,i.referenceLineProps.value,0),p=e.DataViewObject.getValue(o,i.referenceLineProps.dataLabelColor,{solid:{color:a.defaultColor}}),d=o[i.referenceLineProps.dataLabelDecimalPoints]<0?void 0:o[i.referenceLineProps.dataLabelDecimalPoints],g=o[i.referenceLineProps.dataLabelHorizontalPosition]||t.referenceLineDataLabelHorizontalPosition.left,m=o[i.referenceLineProps.dataLabelVerticalPosition]||t.referenceLineDataLabelVerticalPosition.above,f=s?n.y1.formatter:n.x.formatter,y=f;if(null!=f.options){var v=e.Prototype.inherit(f.options);v.precision=d,y=t.valueFormatter.create(v)}var b,C,x=t.NewDataLabelUtils.getLabelFormattedText(y.format(h)),S={text:x,fontFamily:t.dataLabelUtils.LabelTextProperties.fontFamily,fontSize:t.dataLabelUtils.LabelTextProperties.fontSize,fontWeight:t.dataLabelUtils.LabelTextProperties.fontWeight},w=e.TextMeasurementService.measureSvgTextWidth(S),D=e.TextMeasurementService.estimateSvgTextHeight(S),P=s?0:u(h),L=s?c(h):0,_=s?l.width:u(h),N=s?c(h):l.height,T=[e.NewPointLabelPosition.Above];s?(b=g===t.referenceLineDataLabelHorizontalPosition.left?P+w/2+r:_-w/2-r,C=L,T=m===t.referenceLineDataLabelVerticalPosition.above?[e.NewPointLabelPosition.Above]:[e.NewPointLabelPosition.Below]):(b=P,C=m===t.referenceLineDataLabelVerticalPosition.above?L+D/2+r:N-D/2-r,T=g===t.referenceLineDataLabelHorizontalPosition.left?[e.NewPointLabelPosition.Left]:[e.NewPointLabelPosition.Right]);var V,M=e.TextMeasurementService.measureSvgTextWidth(S),A=e.TextMeasurementService.estimateSvgTextHeight(S,!0);return V={point:{x:b,y:C},radius:0,validPositions:T},{isPreferred:!0,text:x,textSize:{width:M,height:A},outsideFill:p.solid.color,insideFill:null,parentShape:V,parentType:0,fontSize:9,identity:null,secondRowText:null}}i.referenceLineProps={show:"show",lineColor:"lineColor",transparency:"transparency",value:"value",style:"style",position:"position",dataLabelShow:"dataLabelShow",dataLabelColor:"dataLabelColor",dataLabelDecimalPoints:"dataLabelDecimalPoints",dataLabelHorizontalPosition:"dataLabelHorizontalPosition",dataLabelVerticalPosition:"dataLabelVerticalPosition"},i.enumerateObjectInstances=a,i.render=r,i.createLabelDataPoint=n}(i=t.ReferenceLineHelper||(t.ReferenceLineHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e,t,a,r){var n=new i(t,a,r);return n.getWarningMessages(e)}e.getInvalidValueWarnings=t;var i=function(){function t(e,t,i){this.supportsNaN=e,this.supportsNegativeInfinity=t,this.supportsPositiveInfinity=i}return t.prototype.getWarningMessages=function(t){this.loadWarningStatus(t);var i=[];return this.hasNaN&&!this.supportsNaN&&i.push(new e.NaNNotSupportedWarning),(this.hasNegativeInfinity&&!this.supportsNegativeInfinity||this.hasPositiveInfinity&&!this.supportsPositiveInfinity)&&i.push(new e.InfinityValuesNotSupportedWarning),this.hasOutOfRange&&i.push(new e.ValuesOutOfRangeWarning),i},t.prototype.loadWarningStatus=function(e){this.hasNaN=!1,this.hasNegativeInfinity=!1,this.hasOutOfRange=!1,this.hasPositiveInfinity=!1;for(var t=0;t<e.length;t++){var i=e[t],a=i&&i.categorical&&i.categorical.values?i.categorical.values:null;if(!a)return;for(var r=a.length,n=0;r>n;n++){var o=a[n];if(o.values)for(var s=o.values.length,l=0;s>l;l++){var u=o.values[l];isNaN(u)?this.hasNaN=!0:u===Number.POSITIVE_INFINITY?this.hasPositiveInfinity=!0:u===Number.NEGATIVE_INFINITY?this.hasNegativeInfinity=!0:(-1e300>u||u>1e300)&&(this.hasOutOfRange=!0)}}}},t}()}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e){return new i(e)}e.createListView=t}(t=e.ListViewFactory||(e.ListViewFactory={}));var i=function(){function t(e){var i=this;this.options=$.extend(!0,{},e),this.scrollbarInner=e.baseContainer.append("div").classed("scrollbar-inner",!0).on("scroll",function(){return i.renderImpl(i.options.rowHeight)}),this.scrollContainer=this.scrollbarInner.append("div").classed("scrollRegion",!0),this.visibleGroupContainer=this.scrollContainer.append("div").classed("visibleGroup",!0),$(e.baseContainer.node()).find(".scroll-element").attr("drag-resize-disabled","true"),t.SetDefaultOptions(e)}return t.SetDefaultOptions=function(e){e.rowHeight=e.rowHeight||t.defaultRowHeight},t.prototype.rowHeight=function(e){return this.options.rowHeight=Math.ceil(e),this},t.prototype.data=function(e,t,i){return void 0===i&&(i=!1),this._data=e,this.getDatumIndex=t,this.setTotalRows(),i&&$(this.scrollbarInner.node()).scrollTop(0),this.render(),this},t.prototype.viewport=function(e){return this.options.viewport=e,this.render(),this},t.prototype.empty=function(){this._data=[],this.render()},t.prototype.render=function(){var e=this;this.renderTimeoutId&&window.clearTimeout(this.renderTimeoutId),this.renderTimeoutId=window.setTimeout(function(){e.getRowHeight().then(function(t){e.renderImpl(t)}),e.renderTimeoutId=void 0},0)},t.prototype.renderImpl=function(e){var t=this.options.scrollEnabled?Math.max(0,this._totalRows*e):this.options.viewport.height;this.scrollContainer.style("height",t+"px").attr("height",t),this.scrollToFrame(!0)},t.prototype.scrollToFrame=function(i){var a=this.options,r=this.visibleGroupContainer,n=this._totalRows,o=a.rowHeight||t.defaultRowHeight,s=this.getVisibleRows()||1,l=this.scrollbarInner.node().scrollTop,u=0===l?0:Math.floor(l/o),c=e.SVGUtil.translateWithPixels(0,u*o);r.style({transform:function(e){return c},"-webkit-transform":c});var h=Math.max(0,Math.min(u,n-s+1)),p=h+s,d=r.selectAll(".row").data(this._data.slice(h,Math.min(p,n)),this.getDatumIndex);d.enter().append("div").classed("row",!0).call(function(e){return a.enter(e)}),d.order();var g=r.selectAll(".row:not(.transitioning)");g.call(function(e){return a.update(e)}),d.exit().call(function(e){return a.exit(e)}).remove(),i&&s!==n&&p>=n*t.loadMoreDataThreshold&&a.loadMoreData()},t.prototype.setTotalRows=function(){var e=this._data;this._totalRows=e?e.length:0},t.prototype.getVisibleRows=function(){var e=1,t=this.options.rowHeight,i=this.options.viewport.height;return!t||1>t?e:this.options.scrollEnabled?Math.min(Math.ceil(i/t)+1,this._totalRows)||e:Math.min(Math.floor(i/t),this._totalRows)||e},t.prototype.getRowHeight=function(){var e=$.Deferred(),i=this,a=i.options;if(this.cancelMeasurePass&&this.cancelMeasurePass(),!(this._data&&this._data.length&&a))return i.rowHeight(t.defaultRowHeight),e.resolve(a.rowHeight).promise();this.scrollToFrame(!1);var r=window.requestAnimationFrame(function(){var t=i.visibleGroupContainer.select(".row").node().firstChild,a=$(t).outerHeight(!0);i.rowHeight(a),e.resolve(a),i.cancelMeasurePass=void 0,window.cancelAnimationFrame(r)});return this.cancelMeasurePass=function(){window.cancelAnimationFrame(r),e.reject()},e.promise()},t.loadMoreDataThreshold=.8,t.defaultRowHeight=1,t}()}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=11;!function(t){function i(e,t,i){return Math.min(Math.max(e,t),i)}function a(e){return 23===e?2147483648:Math.floor(e)===e?256<<e:256*Math.pow(2,e)}function r(e,r){for(var n=new Float64Array(e.length),o=0;o<e.length;o+=2){var s=i(e[o],t.MinAllowedLatitude,t.MaxAllowedLatitude),l=i(e[o+1],t.MinAllowedLongitude,t.MaxAllowedLongitude),u=(l+180)/360,c=Math.sin(s*Math.PI/180),h=.5-Math.log((1+c)/(1-c))/(4*Math.PI),p=a(r);n[o]=i(u*p+.5,0,p-1),n[o+1]=i(h*p+.5,0,p-1)}return n}function n(e){var t=8e4;if(e.length>t){for(var i="",a=0;a<e.length;a+=t){var r=Array.apply([],e.subarray(a,a+t));i+=r.join(" ")+" "}return i}return Array.apply([],e).join(" ")}function o(e){var t=8e4,i=[];if(e.length>t){for(var a=0;a<e.length;a+=t){var r=Array.apply([],e.subarray(a,a+t));i.concat(r)}return i}return Array.apply([],e)}function s(e){for(var t={latitude:-90,longitude:180},a={latitude:90,longitude:-180},r=0;r<e.length;r+=2)t.latitude=Math.max(e[r],t.latitude),t.longitude=Math.min(e[r+1],t.longitude),a.latitude=Math.min(e[r],a.latitude),a.longitude=Math.max(e[r+1],a.longitude);return t.longitude=i(t.longitude,-180,180),a.longitude=i(a.longitude,-180,180),Microsoft.Maps.LocationRect.fromCorners(new Microsoft.Maps.Location(t.latitude,t.longitude),new Microsoft.Maps.Location(a.latitude,a.longitude))}function l(e){for(var t=[],i=0,a=0,r=0,n=4294967296;i<e.length;){for(var o=0,s=0;;){if(i>=e.length)return null;var l=g.indexOf(e.charAt(i++));if(-1===l)return null;var u=(31&l)*Math.pow(2,s),c=u/n,h=u%n,p=o/n,d=o%n,m=(h|d)>>>0;if(o=(c|p)*n+m,s+=5,32>l)break}var f=Math.floor((Math.sqrt(8*o+5)-1)/2);o-=f*(f+1)/2;var y=Math.floor(o),v=f-y;v=v>>1^-(1&v),y=y>>1^-(1&y),a+=v,r+=y;var b=1e-5*r,C=1e-5*a;t.push(b),t.push(C)}return new Float64Array(t)}function u(e){for(var i=e.locations,a=0;a<i.length;a++){var r=i[a];r.geographic||(r.geographic=t.parseEncodedSpatialValueArray(r.nativeBing));var n=r.geographic;if(n&&!r.absolute){r.absolute=t.latLongToPixelXYArray(n,t.DefaultLevelOfDetail),r.absoluteString=t.pointArrayToString(r.absolute);var o=t.getLocationBoundaries(n);r.absoluteBounds=t.locationRectToRectXY(o,t.DefaultLevelOfDetail)}}}function c(e,t){return p(e.latitude,e.longitude,t)}function h(t,i){var a=c(t.getNorthwest(),i),r=c(t.getSoutheast(),i);return new e.visuals.Rect(a.x,a.y,r.x-a.x,r.y-a.y)}function p(t,i,a){var n=r(new Float64Array([t,i]),a);return new e.visuals.Point(n[0],n[1])}function d(e,t,r){var n=a(r),o=i(e,0,n-1)/n-.5,s=.5-i(t,0,n-1)/n,l=90-360*Math.atan(Math.exp(2*-s*Math.PI))/Math.PI,u=360*o;return new Microsoft.Maps.Location(l,u)}t.Settings={MaxBingRequest:6,MaxCacheSize:3e3,MaxCacheSizeOverflow:100,BingKey:"insert your key",BingUrl:"https://dev.virtualearth.net/REST/v1/Locations?",BingUrlGeodata:"https://platform.bing.com/geo/spatial/v1/public/Geodata?",UseDoubleArrayGeodataResult:!0,UseDoubleArrayDequeueTimeout:0},t.MinAllowedLatitude=-85.05112878,t.MaxAllowedLatitude=85.05112878,t.MinAllowedLongitude=-180,t.MaxAllowedLongitude=180,t.TileSize=256,t.MaxLevelOfDetail=23,t.MinLevelOfDetail=1,t.MaxAutoZoomLevel=5,t.DefaultLevelOfDetail=11,t.WorkerErrorName="___error___",t.CategoryTypes={Address:"Address",City:"City",Continent:"Continent",CountryRegion:"Country",County:"County",Longitude:"Longitude",Latitude:"Latitude",Place:"Place",PostalCode:"PostalCode",StateOrProvince:"StateOrProvince"};var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-";t.clip=i,t.getMapSize=a,t.latLongToPixelXYArray=r,t.pointArrayToString=n,t.pointArrayToArray=o,t.getLocationBoundaries=s,t.parseEncodedSpatialValueArray=l,t.calcGeoData=u,t.locationToPixelXY=c,t.locationRectToRectXY=h,t.latLongToPixelXY=p,t.pixelXYToLocation=d}(i=t.MapUtil||(t.MapUtil={}));var r=function(){function e(){this._locationRect=new Microsoft.Maps.LocationRect(new Microsoft.Maps.Location(30,-30),60,60)}return e.prototype.reCalc=function(e,r,n){var o=[this._locationRect.getNorthwest(),this._locationRect.getSoutheast()];if(r/=2,n/=2,!this._baseRect){var s=i.locationToPixelXY(this._locationRect.getNorthwest(),a),l=i.locationToPixelXY(this._locationRect.getSoutheast(),a);this._baseRect=new t.Rect(s.x,s.y,l.x-s.x,l.y-s.y)}var u=e.tryLocationToPixel(o);this._currentRect=new t.Rect(u[0].x+r,u[0].y+n,u[1].x-u[0].x,u[1].y-u[0].y)},Object.defineProperty(e.prototype,"scale",{get:function(){return this._baseRect?this._currentRect.width/this._baseRect.width:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transform",{get:function(){var e=this._baseRect,i=this._currentRect,a=new t.Transform;return a.translate(i.left,i.top),a.scale(i.width/e.width,i.height/e.height),a.translate(-e.left,-e.top),a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outherTransform",{get:function(){var e=this._baseRect,i=this._currentRect,a=new t.Transform;a.translate(i.left,i.top);var r=Math.sqrt(i.width/e.width);return a.scale(r,r),a},enumerable:!0,configurable:!0}),e.prototype.setViewBox=function(e){var t=e.getBoundingClientRect(),i=this._currentRect;e.setAttribute("viewBox",[-i.left,-i.top,t.width,t.height].join(" "))},Object.defineProperty(e.prototype,"innerTransform",{get:function(){var e=this._baseRect,i=this._currentRect,a=new t.Transform,r=i.width/e.width;return a.scale(r,r),a.translate(-e.left,-e.top),a},enumerable:!0,configurable:!0}),e.prototype.transformToString=function(e){var t=e.matrix;return"matrix("+t.m00+" "+t.m10+" "+t.m01+" "+t.m11+" "+t.m02+" "+t.m12+")"},e}();t.MapPolygonInfo=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=e.data.Selector,a=function(){function t(e,t){this.selector=e,this.highlight=t,this.key=JSON.stringify({selector:e?i.getKey(e):null,highlight:t}),this.keyWithoutHighlight=JSON.stringify({selector:e?i.getKey(e):null})}return t.prototype.equals=function(e){return this.selector&&e.selector?this.highlight===e.highlight&&i.equals(this.selector,e.selector):!this.selector==!e.selector&&this.highlight===e.highlight},t.prototype.includes=function(t,i){void 0===i&&(i=!1);var a=this.selector,r=t.selector;if(!a||!r)return!1;var n=a.data,o=r.data;if(!n&&a.metadata&&a.metadata!==r.metadata)return!1;if(!i&&this.highlight!==t.highlight)return!1;if(n){if(!o)return!1;if(n.length>0)for(var s=0,l=n.length;l>s;s++){var u=n[s];if(!o.some(function(t){return e.DataViewScopeIdentity.equals(u,t)}))return!1}}return!0},t.prototype.getKey=function(){return this.key},t.prototype.getKeyWithoutHighlight=function(){return this.keyWithoutHighlight},t.prototype.hasIdentity=function(){return this.selector&&!!this.selector.data},t.prototype.getSelector=function(){return this.selector},t.prototype.getSelectorsByColumn=function(){return this.selectorsByColumn},t.createNull=function(e){return void 0===e&&(e=!1),new t(null,e)},t.createWithId=function(e,i){void 0===i&&(i=!1);var a=null;return e&&(a={data:[e]}),new t(a,i)},t.createWithMeasure=function(e,i){void 0===i&&(i=!1);var a={metadata:e},r=new t(a,i);return r.selectorsByColumn={metadata:e},r},t.createWithIdAndMeasure=function(e,i,a){void 0===a&&(a=!1);var r={};e&&(r.data=[e]),i&&(r.metadata=i),e||i||(r=null);var n=new t(r,a);return n},t.createWithIdAndMeasureAndCategory=function(e,t,i,a){void 0===a&&(a=!1);var r=this.createWithIdAndMeasure(e,t,a);return r.selector&&(r.selectorsByColumn={},e&&i&&(r.selectorsByColumn.dataMap={},r.selectorsByColumn.dataMap[i]=e),t&&(r.selectorsByColumn.metadata=t)),r},t.createWithIds=function(e,i,a){void 0===a&&(a=!1);var r=null,n=t.idArray(e,i);return n&&(r={data:n}),new t(r,a)},t.createWithIdsAndMeasure=function(e,i,a,r){void 0===r&&(r=!1);var n={},o=t.idArray(e,i);return o&&(n.data=o),a&&(n.metadata=a),e||i||a||(n=null),new t(n,r)},t.createWithSelectorForColumnAndMeasure=function(e,t,i){void 0===i&&(i=!1);var a,r=Object.keys(e);a=2===r.length?this.createWithIdsAndMeasure(e[r[0]],e[r[1]],t,i):1===r.length?this.createWithIdsAndMeasure(e[r[0]],null,t,i):this.createWithIdsAndMeasure(null,null,t,i);var n={};return _.isEmpty(e)||(n.dataMap=e),t&&(n.metadata=t),e||t||(n=null),a.selectorsByColumn=n,a},t.createWithHighlight=function(e){return new t(e.getSelector(),!0)},t.idArray=function(e,t){if(e||t){var i=[];return e&&i.push(e),t&&t!==e&&i.push(t),i}},t}();t.SelectionId=a;var r=function(){function e(){}return e.builder=function(){return new e},e.prototype.withCategory=function(e,t){return e&&e.source&&e.source.queryName&&e.identity&&(this.ensureDataMap()[e.source.queryName]=e.identity[t]),this},e.prototype.withSeries=function(e,t){return e&&e.source&&e.source.queryName&&t&&(this.ensureDataMap()[e.source.queryName]=t.identity),this},e.prototype.withMeasure=function(e){return this.measure=e,this},e.prototype.createSelectionId=function(){return a.createWithSelectorForColumnAndMeasure(this.ensureDataMap(),this.measure)},e.prototype.ensureDataMap=function(){return this.dataMap||(this.dataMap={}),this.dataMap},e}();t.SelectionIdBuilder=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){var i=function(){function t(e){this.hostServices=e.hostServices,this.selectedIds=[]}return t.prototype.select=function(e,t){void 0===t&&(t=!1);var i=$.Deferred();return this.hostServices.shouldRetainSelection()?this.sendSelectionToHost([e]):(this.selectInternal(e,t),this.sendSelectionToHost(this.selectedIds)),i.resolve(this.selectedIds),i},t.prototype.hasSelection=function(){return this.selectedIds.length>0},t.prototype.clear=function(){var e=$.Deferred();return this.selectedIds=[],this.sendSelectionToHost([]),e.resolve(),e},t.prototype.getSelectionIds=function(){return this.selectedIds},t.prototype.sendSelectionToHost=function(e){var t={data:e.filter(function(e){return e.hasIdentity()}).map(function(e){return e.getSelector()})},i=e.filter(function(e){return e.getSelectorsByColumn()&&e.hasIdentity()}).map(function(e){return e.getSelectorsByColumn()});i&&i.length>0&&(t.data2=i),this.hostServices.onSelect(t)},t.prototype.selectInternal=function(i,a){t.containsSelection(this.selectedIds,i)?this.selectedIds=a?this.selectedIds.filter(function(t){return!e.data.Selector.equals(t,i)}):this.selectedIds.length>1?[i]:[]:a?this.selectedIds.push(i):this.selectedIds=[i]},t.containsSelection=function(t,i){return t.some(function(t){return e.data.Selector.equals(t.getSelector(),i.getSelector())})},t}();t.SelectionManager=i}(i=t.utility||(t.utility={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){"use strict";var i;!function(t){var i=jsCommon.Utility,a=function(){function e(e){this.polygonPoints=this.convertArrayPathToPoints(e)}return e.prototype.absoluteCentroid=function(){return null==this._absoluteCentroid&&(this._absoluteCentroid=this.calculatePolygonCentroid()),this._absoluteCentroid},e.prototype.absoluteBoundingRect=function(){return null==this._absoluteBoundingRect&&(this._absoluteBoundingRect=this.calculateBoundingRect()),this._absoluteBoundingRect},e.prototype.contains=function(e){var t={x:e.left,y:e.top},i={x:e.left+e.width,y:e.top},a={x:e.left,y:e.top+e.height},r={x:e.left+e.width,y:e.top+e.height};return this.inside(t)&&this.inside(i)&&this.inside(a)&&this.inside(r)},e.prototype.conflicts=function(e){if(!this.isConflictWithBoundingBox(e))return!1;var t={x:e.left,y:e.top},i={x:e.left+e.width/2,y:e.top},a={x:e.left+e.width,y:e.top},r={x:e.left,y:e.top+e.height},n={x:e.left+e.width/2,y:e.top+e.height},o={x:e.left+e.width,y:e.top+e.height},s={x:e.left,y:e.top+e.height/2},l={x:e.left+e.width,y:e.top+e.height/2};return this.inside(t)||this.inside(i)||this.inside(a)||this.inside(r)||this.inside(n)||this.inside(o)||this.inside(s)||this.inside(l)},e.prototype.lineIntersectionPoint=function(e,t){for(var i=0;i<this.polygonPoints.length;i++){var a=this.polygonPoints[i],r=i===this.polygonPoints.length-1?this.polygonPoints[0]:this.polygonPoints[i+1],n=this.getLineIntersection(e,t,a,r);if(null!==n)return n}return null},e.prototype.isConflictWithBoundingBox=function(e){return o.isIntersecting(this.absoluteBoundingRect(),e)},e.prototype.calculatePolygonCentroid=function(){var e,t,i,a,r,n;for(e=0,n=1,r=0;r<this.polygonPoints.length;r++)e+=this.polygonPoints[r].x*this.polygonPoints[n].y-this.polygonPoints[n].x*this.polygonPoints[r].y,n=(n+1)%this.polygonPoints.length;for(e*=.5,i=a=0,n=1,r=0;r<this.polygonPoints.length;r++)t=this.polygonPoints[r].x*this.polygonPoints[n].y-this.polygonPoints[n].x*this.polygonPoints[r].y,i+=(this.polygonPoints[r].x+this.polygonPoints[n].x)*t,a+=(this.polygonPoints[r].y+this.polygonPoints[n].y)*t,n=(n+1)%this.polygonPoints.length;return i/=6*e,a/=6*e,{x:i,y:a}},e.prototype.calculateBoundingRect=function(){for(var e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,r=0;r<this.polygonPoints.length;r++)this.polygonPoints[r].x<e?e=this.polygonPoints[r].x:this.polygonPoints[r].x>i&&(i=this.polygonPoints[r].x),this.polygonPoints[r].y<t?t=this.polygonPoints[r].y:this.polygonPoints[r].y>a&&(a=this.polygonPoints[r].y);return{left:e,top:t,width:i-e,height:a-t}},e.prototype.inside=function(e){for(var t=e.x,i=e.y,a=!1,r=0,n=this.polygonPoints.length-1;r<this.polygonPoints.length;n=r++){var o=this.polygonPoints[r].x,s=this.polygonPoints[r].y,l=this.polygonPoints[n].x,u=this.polygonPoints[n].y,c=s>i!=u>i&&(l-o)*(i-s)/(u-s)+o>t;c&&(a=!a)}return a},e.prototype.getLineIntersection=function(e,t,i,a){var r=e.x,n=e.y,o=t.x,s=t.y,l=i.x,u=i.y,c=a.x,h=a.y,p=o-r,d=s-n,g=c-l,m=h-u,f=(-d*(r-l)+p*(n-u))/(-g*d+p*m),y=(g*(n-u)-m*(r-l))/(-g*d+p*m);return f>=0&&1>=f&&y>=0&&1>=y?{x:r+y*p,y:n+y*d}:null},e.prototype.convertArrayPathToPoints=function(e){for(var t=[],i=0;i<e.length;i+=2){var a=e[i],r=e[i+1],n={x:a,y:r};t.push(n)}return t},e}();t.Polygon=a;var r;!function(t){function a(e,t,i){var a=e.x+t>=0?e.x+t:0,r=e.y+i>=0?e.y+i:0;return{x:a,y:r}}function r(e,t){return void 0!==e&&null!==e&&void 0!==t&&null!==t&&e.x===t.x&&e.y===t.y}function n(e){return null!==e?{x:e.x,y:e.y}:null}function o(e){return"{x:"+e.x+", y:"+e.y+"}"}function s(e){return e.x+","+e.y}function l(e,t){if(null===e||null===t)return null;var i=t.x-e.x,a=t.y-e.y;return Math.sqrt(i*i+a*a)}function u(t,i){return t===i||void 0!==t&&void 0!==i&&e.Double.equalWithPrecision(t.x,i.x)&&e.Double.equalWithPrecision(t.y,i.y)}function c(e,t){if(null===e)return void 0===t?null:t;if(void 0===e)return void 0===t?null:t;if(2===e.length)return{x:i.parseNumber(e[0]),y:i.parseNumber(e[1])};if("string"==typeof e){var a=e.split(",");return 2!==a.length?void 0===t?null:t:{x:i.parseNumber(a[0]),y:i.parseNumber(a[1])}}return 2!==e.length&&"string"!=typeof e?void 0===t?null:t:{x:i.parseNumber(e.x),y:i.parseNumber(e.y)}}t.offset=a,t.equals=r,t.clone=n,t.toString=o,t.serialize=s,t.getDistance=l,t.equalWithPrecision=u,t.parsePoint=c}(r=t.Point||(t.Point={}));var n;!function(t){function a(e){return 0===e.width&&0===e.height}function r(e,t){return void 0!==e&&null!==e&&void 0!==t&&null!==t&&e.width===t.width&&e.height===t.height}function n(e){return null!==e?{width:e.width,height:e.height}:null}function o(e,t){var i=n(e);return t&&(i.width+=t.left+t.right,i.height+=t.top+t.bottom),i}function s(e,t){var i=n(e);return t&&(i.width=i.width-t.left-t.right,i.width<0&&(i.width=0),i.height=i.height-t.top-t.bottom,i.height<0&&(i.height=0)),i}function l(e,t){return t&&(e.width=Math.max(e.width,t.width),e.height=Math.max(e.height,t.height)),e}function u(e){return{left:0,top:0,width:e.width,height:e.height}}function c(e){return"{width:"+e.width+", height:"+e.height+"}"}function h(e,t){return e===t||void 0!==e&&void 0!==t&&e.width===t.width&&e.height===t.height}function p(t,i){return t===i||void 0!==t&&void 0!==i&&e.Double.equalWithPrecision(t.width,i.width)&&e.Double.equalWithPrecision(t.height,i.height)}function d(e,t){if(null===e)return void 0===t?null:t;if(void 0===e)return void 0===t?null:t;if(2===e.length)return{width:i.parseNumber(e[0]),height:i.parseNumber(e[1])};if("string"==typeof e){var a=e.split(",");return 2!==a.length?void 0===t?null:t:{width:i.parseNumber(a[0]),height:i.parseNumber(a[1])}}return 2!==e.length&&"string"!=typeof e?void 0===t?null:t:{width:i.parseNumber(e.width),height:i.parseNumber(e.height)}}t.isEmpty=a,t.equals=r,t.clone=n,t.inflate=o,t.deflate=s,t.combine=l,t.toRect=u,t.toString=c,t.equal=h,t.equalWithPrecision=p,t.parseSize=d}(n=t.Size||(t.Size={}));var o;!function(t){function a(e){return{x:e.left,y:e.top}}function r(e){return{width:e.width,height:e.height}}function n(e,t){e.width=t.width,e.height=t.height}function o(e){return e.left+e.width}function s(e){return e.top+e.height}function l(e){return{x:e.left,y:e.top}}function u(e){return{x:e.left+e.width,y:e.top}}function c(e){return{x:e.left,y:e.top+e.height}}function h(e){return{x:e.left+e.width,y:e.top+e.height}}function p(e,t){return void 0!==t&&null!==t&&e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height}function d(e){return null!==e?{left:e.left,top:e.top,width:e.width,height:e.height}:null}function g(e){return"{left:"+e.left+", top:"+e.top+", width:"+e.width+", height:"+e.height+"}"}function m(e,t,i){var a=e.left+t>=0?e.left+t:0,r=e.top+i>=0?e.top+i:0;return{left:a,top:r,width:e.width,height:e.height}}function f(e,t){var i=d(e);return t&&(i.left-=t.left,i.top-=t.top,i.width+=t.left+t.right,i.height+=t.top+t.bottom),i}function y(e,t){var i=d(e);return t&&(i.left+=t.left,i.top+=t.top,i.width-=t.left+t.right,i.height-=t.top+t.bottom),i}function v(e,t){
return{left:e.left-t,top:e.top-t,width:e.width+t+t,height:e.height+t+t}}function b(e,t){return{left:e.left+t,top:e.top+t,width:e.width-t-t,height:e.height-t-t}}function C(e,t,i){return{x:Math.min(Math.max(e.left,t),e.left+e.width),y:Math.min(Math.max(e.top,i),e.top+e.height)}}function x(e,t){return e===t||void 0!==e&&void 0!==t&&e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height}function S(t,i){return t===i||void 0!==t&&void 0!==i&&e.Double.equalWithPrecision(t.left,i.left)&&e.Double.equalWithPrecision(t.top,i.top)&&e.Double.equalWithPrecision(t.width,i.width)&&e.Double.equalWithPrecision(t.height,i.height)}function w(e){return void 0===e||null===e||0===e.width&&0===e.height}function D(t,i){return null===t||null===i?!1:e.Double.lessOrEqualWithPrecision(t.left,i.x)&&e.Double.lessOrEqualWithPrecision(i.x,t.left+t.width)&&e.Double.lessOrEqualWithPrecision(t.top,i.y)&&e.Double.lessOrEqualWithPrecision(i.y,t.top+t.height)}function P(e,t){if(!e||!t)return!1;var i=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width);if(i>a)return!1;var r=Math.max(e.top,t.top),n=Math.min(e.top+e.height,t.top+t.height);return n>=r}function L(e,t){if(!e)return t;if(!t)return e;var i=Math.max(e.left,t.left),a=Math.max(e.top,t.top),r=Math.min(e.left+e.width,t.left+t.width),n=Math.min(e.top+e.height,t.top+t.height);return r>=i&&n>=a?{left:i,top:a,width:r-i,height:n-a}:{left:0,top:0,width:0,height:0}}function _(e,t){if(!e)return t;if(!t)return e;var i=Math.min(e.left,t.left),a=Math.min(e.top,t.top),r=Math.max(e.left+e.width,t.left+t.width),n=Math.max(e.top+e.height,t.top+t.height);return{left:i,top:a,width:r-i,height:n-a}}function N(e,t){if(null===e)return void 0===t?null:t;if(void 0===e)return void 0===t?null:t;if(4===e.length)return{left:i.parseNumber(e[0]),top:i.parseNumber(e[1]),width:i.parseNumber(e[2]),height:i.parseNumber(e[3])};if("string"==typeof e){var a=e.split(",");return 4!==a.length?void 0===t?null:t:{left:i.parseNumber(a[0]),top:i.parseNumber(a[1]),width:i.parseNumber(a[2]),height:i.parseNumber(a[3])}}return 4!==e.length&&"string"!=typeof e?void 0===t?null:t:{left:i.parseNumber(e.left),top:i.parseNumber(e.top),width:i.parseNumber(e.width),height:i.parseNumber(e.height)}}t.getOffset=a,t.getSize=r,t.setSize=n,t.right=o,t.bottom=s,t.topLeft=l,t.topRight=u,t.bottomLeft=c,t.bottomRight=h,t.equals=p,t.clone=d,t.toString=g,t.offset=m,t.inflate=f,t.deflate=y,t.inflateBy=v,t.deflateBy=b,t.getClosestPoint=C,t.equal=x,t.equalWithPrecision=S,t.isEmpty=w,t.containsPoint=D,t.isIntersecting=P,t.intersect=L,t.combine=_,t.parseRect=N}(o=t.Rect||(t.Rect={}));var s;!function(t){function a(e,t){var i=o(e);return t&&(i.left=e.left+t.left,i.right=e.right+t.right,i.bottom=e.bottom+t.bottom,i.top=e.top+t.top),i}function r(e){return e.left+e.right}function n(e){return e.top+e.bottom}function o(e){return null!==e?{left:e.left,top:e.top,right:e.right,bottom:e.bottom}:null}function s(e,t){return void 0!==e&&null!==e&&void 0!==t&&null!==t&&e.left===t.left&&e.bottom===t.bottom&&e.right===t.right&&e.top===t.top}function l(e){var t=e.right;e.right=e.left,e.left=t}function u(e){var t=e.top;e.top=e.bottom,e.bottom=t}function c(e){return"{top:"+e.top+", left:"+e.left+", right:"+e.right+", bottom:"+e.bottom+"}"}function h(e){return e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px"}function p(e){return 0===e.left&&0===e.top&&0===e.right&&0===e.bottom}function d(e,t){return e===t||void 0!==e&&void 0!==t&&e.left===t.left&&e.top===t.top&&e.right===t.right&&e.bottom===t.bottom}function g(t,i){return t===i||void 0!==t&&void 0!==i&&e.Double.equalWithPrecision(t.left,i.left)&&e.Double.equalWithPrecision(t.top,i.top)&&e.Double.equalWithPrecision(t.right,i.right)&&e.Double.equalWithPrecision(t.bottom,i.bottom)}function m(e,t,a){if(null===e)return void 0===t?null:t;if(void 0===e)return void 0===t?null:t;if(4===e.length)return{left:i.parseNumber(e[0]),top:i.parseNumber(e[1]),right:i.parseNumber(e[2]),bottom:i.parseNumber(e[3])};if("string"==typeof e){var r=e.split(",");return 4!==r.length?void 0===t?null:t:{left:i.parseNumber(r[0]),top:i.parseNumber(r[1]),right:i.parseNumber(r[2]),bottom:i.parseNumber(r[3])}}return 4!==e.length&&"string"!=typeof e?void 0===t?null:t:{left:i.parseNumber(e.left),top:i.parseNumber(e.top),right:i.parseNumber(e.right),bottom:i.parseNumber(e.bottom)}}t.inflate=a,t.getWidth=r,t.getHeight=n,t.clone=o,t.equals=s,t.flipHorizontal=l,t.flipVertical=u,t.toString=c,t.toCssString=h,t.isEmpty=p,t.equal=d,t.equalWithPrecision=g,t.parseThickness=m}(s=t.Thickness||(t.Thickness={}));var l;!function(t){function i(e){return 0===e.x&&0===e.y}function a(e,t){return void 0!==e&&null!==e&&void 0!==t&&null!==t&&e.x===t.x&&e.y===t.y}function r(e){return null!==e?{x:e.x,y:e.y}:null}function n(e){return"{x:"+e.x+", y:"+e.y+"}"}function o(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function s(e){return e.x*e.x+e.y*e.y}function l(e,t){return{x:e.x*t,y:e.y*t}}function u(e){return i(e)?e:l(e,1/o(e))}function c(e){return{x:e.y,y:-e.x}}function h(e){return{x:-e.y,y:e.x}}function p(e,t){var i=e.x*Math.cos(t)-e.y*Math.sin(t),a=e.x*Math.sin(t)+e.y*Math.cos(t);return{x:i,y:a}}function d(e,t){return e===t||void 0!==e&&void 0!==t&&e.x===t.x&&e.y===t.y}function g(t,i){return t===i||void 0!==t&&void 0!==i&&e.Double.equalWithPrecision(t.x,i.x)&&e.Double.equalWithPrecision(t.y,i.y)}function m(e,t){return e&&t?{x:e.x+t.x,y:e.y+t.y}:void 0}function f(e,t){return e&&t?{x:e.x-t.x,y:e.y-t.y}:void 0}function y(e,t){return e&&t?e.x*t.x+e.y*t.y:void 0}function v(e,t){return e&&t?{x:t.x-e.x,y:t.y-e.y}:void 0}t.isEmpty=i,t.equals=a,t.clone=r,t.toString=n,t.getLength=o,t.getLengthSqr=s,t.scale=l,t.normalize=u,t.rotate90DegCW=c,t.rotate90DegCCW=h,t.rotate=p,t.equal=d,t.equalWithPrecision=g,t.add=m,t.subtract=f,t.dotProduct=y,t.getDeltaVector=v}(l=t.Vector||(t.Vector={}))}(i=t.shapes||(t.shapes={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=jsCommon.PixelConverter;!function(i){function r(t,i,a){if(!t||_.isEmpty(i))return!1;for(var r=0,n=i.length;n>r;r++){var o=i[r];if(e.DataViewScopeIdentity.equals(t,o,a))return i.splice(r,1),!0}return!1}var n;!function(e){var t=jsCommon.CssConstants.createClassAndSelector;e.HeaderContainer=t("headerContainer"),e.Header=t("slicerHeader"),e.HeaderText=t("headerText"),e.Body=t("slicerBody"),e.LabelText=t("slicerText"),e.Clear=t("clear"),e.MultiSelectEnabled=t("isMultiSelectEnabled")}(n=i.Selectors||(i.Selectors={}));var o;!function(e){e.Clear="Slicer_Clear",e.SelectAll="Slicer_SelectAll"}(o=i.DisplayNameKeys||(i.DisplayNameKeys={}));var s;!function(e){function t(e){return null!=e&&null!=e.slicerSettings}e.areSettingsDefined=t}(s=i.SettingsHelper||(i.SettingsHelper={}));var l;!function(e){function i(e){var i=t.DataConversion.getDataViewDefaultValue(e);return i?i.value:void 0}function a(e){if(e){var t=e.categorical;if(t&&!_.isEmpty(t.categories))return t.categories[0].identityFields}}e.getDefaultValue=i,e.getIdentityFields=a}(l=i.DefaultValueHandler||(i.DefaultValueHandler={})),i.tryRemoveValueFromRetainedList=r;var u=function(){function i(){}return i.prototype.createSlicerHeader=function(e){var t=document.createElement("div");t.className=n.Header["class"];var i=d3.select(t);return i.append("span").classed(n.Clear["class"],!0).attr("title",e.getLocalizedString(o.Clear)),i.append("div").classed(n.HeaderText["class"],!0),t},i.prototype.getHeaderTextProperties=function(e){var t={fontFamily:"wf_segoe-ui_normal",fontSize:"10px"};return e.header.show&&(t.fontSize=a.fromPoint(e.header.textSize)),t},i.prototype.getSlicerBodyViewport=function(e,t,i){var a=t.header.show?this.getHeaderHeight(t,i):0,r=e.height-(a+t.header.borderBottomWidth);return{height:r,width:e.width}},i.prototype.updateSlicerBodyDimensions=function(e,t,i){var r=this.getSlicerBodyViewport(e,i,this.getHeaderTextProperties(i));t.style({height:a.toString(r.height),width:a.toString(r.width)})},i.prototype.getHeaderHeight=function(t,i){return e.TextMeasurementService.estimateSvgTextHeight(this.getTextProperties(t.header.textSize,i))+t.general.outlineWeight},i.prototype.getRowHeight=function(t,i){return e.TextMeasurementService.estimateSvgTextHeight(this.getTextProperties(t.slicerText.textSize,i))+this.getRowsOutlineWidth(t.slicerText.outline,t.general.outlineWeight)},i.prototype.styleSlicerHeader=function(e,t,i){if(t.header.show){e.style("display","block");var a=e.select(n.HeaderText.selector).text(i);this.setSlicerHeaderTextStyle(a,t)}else e.style("display","none")},i.prototype.setSlicerTextStyle=function(e,i){e.style({color:i.slicerText.color,"background-color":i.slicerText.background,"border-style":t.VisualBorderUtil.getBorderStyle(i.slicerText.outline),"border-color":i.general.outlineColor,"border-width":t.VisualBorderUtil.getBorderWidth(i.slicerText.outline,i.general.outlineWeight),"font-size":a.fromPoint(i.slicerText.textSize)})},i.prototype.getRowsOutlineWidth=function(e,t){switch(e){case"None":case"LeftRight":return 0;case"BottomOnly":case"TopOnly":return t;case"TopBottom":case"Frame":return 2*t;default:return 0}},i.prototype.setSlicerHeaderTextStyle=function(e,i){e.style({"border-style":t.VisualBorderUtil.getBorderStyle(i.header.outline),"border-color":i.general.outlineColor,"border-width":t.VisualBorderUtil.getBorderWidth(i.header.outline,i.general.outlineWeight),color:i.header.fontColor,"background-color":i.header.background,"font-size":a.fromPoint(i.header.textSize)})},i.prototype.getTextProperties=function(e,t){return t.fontSize=a.fromPoint(e),t},i}();i.DOMHelper=u}(i=t.SlicerUtil||(t.SlicerUtil={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){return"translate("+e+","+t+")"}function i(e){return"translateX("+e+"px)"}function a(e,t){return"translate("+e+"px,"+t+"px)"}function r(e,t,i,a,r){return"translate("+e+","+t+") rotate("+r+","+i+","+a+")"}function n(e){return"scale("+e+")"}function o(e,t){return e+" "+t}function s(){var e=Date.now;Date.now=function(){return 1/0},d3.timer.flush(),Date.now=e}function l(e){if(e){var t=e,i=e;i.animation&&(t=i.animation),t&&t.transitionImmediate&&s()}}function u(e){e.getAttribute("d")||e.setAttribute("d","")}function c(e){isNaN(e.x)&&(e.x=0),isNaN(e.y)&&(e.y=0)}function h(e){if(!e||0===e.length)return{x:"0",y:"0"};var t,i=e.split(/[\s,]+/),a="0",r=i[0];if(1===i.length)t=r.substring(10,r.length-1);else{var n=i[1];a=n.substring(0,n.length-1),t=r.substring(10,r.length)}return{x:t,y:a}}function p(e,t,i){var a="rotate("+i+" "+e/2+" "+t/2+")",r="M0 0";return r+="L0 "+t,r+="L"+e+" "+t/2+" Z",{path:r,transform:a}}function d(e){if(null!=e){var t=e.getBoundingClientRect(),i=e.getBBox();if(i.height>0&&i.width>0)return{x:t.width/i.width,y:t.height/i.height}}return{x:1,y:1}}e.AlmostZero=1e-6,e.translate=t,e.translateXWithPixels=i,e.translateWithPixels=a,e.translateAndRotate=r,e.scale=n,e.transformOrigin=o,e.flushAllD3Transitions=s,e.flushAllD3TransitionsIfNeeded=l,e.ensureDAttribute=u,e.ensureValidSVGPoint=c,e.parseTranslateTransform=h,e.createArrow=p,e.getTransformScaleRatios=d}(t=e.SVGUtil||(e.SVGUtil={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e){return e.toString().replace(new RegExp(" ","g"),"&nbsp")}function i(e){return e.replace(/\.\.\./g,"")}e.removeBreakingSpaces=t,e.removeEllipses=i}(t=e.TextUtil||(e.TextUtil={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t,i=jsCommon.Utility;!function(e){function t(e,t){return null!=e&&null!=e.type&&null!=e.type.misc&&null!=e.type.misc.webUrl&&e.type.misc.webUrl&&null!=t&&i.isValidUrl(t)}function a(e,t){return n(e)&&t&&i.isValidUrl(t)}function r(e){if(!e||!e.metadata||_.isEmpty(e.metadata.columns))return!1;for(var t=0,i=e.metadata.columns;t<i.length;t++){var a=i[t];if(n(a))return!0}return!1}function n(e){return e&&e.type&&e.type.misc&&e.type.misc.imageUrl}e.isValidUrl=t,e.isValidImage=a,e.hasImageColumn=r}(t=e.UrlHelper||(e.UrlHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){function a(e){if(e)for(var t in e){var i=e[t];for(var a in i.properties){var r=i.properties[a];if(r.type&&r.type[N])return r.rule.inputRole}}}function r(e){var t=e&&e.query&&e.query.projections&&e.query.projections.Gradient?!0:!1;return t}function n(e){var t;if(e&&!$.isEmptyObject(e)){t=l();for(var i in t){var a=e.hasOwnProperty(i);if(a){var r=e[i];r&&r.solid&&r.solid.color&&(r=r.solid.color),t[i]=r}}}return t}function o(e){if(e&&e.values&&e.values.grouped){var i=e.values.grouped();return t.DataRoleHelper.getMeasureIndexOfRole(i,"Gradient")}return-1}function s(e){var t=o(e);return t>=0}function l(){var e=d(),t={diverging:!1,minColor:e.minColor,midColor:L,maxColor:e.maxColor,minValue:void 0,midValue:void 0,maxValue:void 0};return t}function u(){return m()}function c(t,i,a){var r,n,o=e.data.DataViewObjectDefinitions.ensure(a,_,null),s=p(a);s&&($.isNumeric(i)&&(r=void 0!==i?P["double"](+i):void 0),("minColor"===t||"midColor"===t||"maxColor"===t)&&(n=v(s,t,i)),"minColor"===t?b(s,n):"midColor"===t?C(s,n):"maxColor"===t?x(s,n):"minValue"===t?S(s,r):"midValue"===t?w(s,r):"maxValue"===t?D(s,r):"diverging"===t?(s=i?f(s):m(s),o.properties[N]=s):"revertToDefault"===t&&(s=this.getDefaultFillRuleDefinition(),o.properties[N]=s))}function h(e){return e?g(e):l()}function p(t){var i=e.data.DataViewObjectDefinitions.getValue(t,{objectName:_,propertyName:N},null);return i}function d(){var t=new e.visuals.DataColorPalette,i=t.getColorByIndex(0),a=d3.scale.linear().domain([0,100]).range(["#ffffff",i.value]),r=i.value,n=a(20),o=L;return{minColor:n,midColor:o,maxColor:r}}function g(e){var t,i,a,r,n,o=L,s=void 0!==e.linearGradient3;if(e.linearGradient2){var l=e.linearGradient2.max.color,u=e.linearGradient2.min.color,c=e.linearGradient2.max.value,h=e.linearGradient2.min.value;t=l.value,i=u.value,c&&(a=c.value),h&&(n=h.value)}else if(e.linearGradient3){var l=e.linearGradient3.max.color,p=e.linearGradient3.mid.color,u=e.linearGradient3.min.color,c=e.linearGradient3.max.value,d=e.linearGradient3.mid.value,h=e.linearGradient3.min.value;t=l.value,o=p.value,i=u.value,c&&(a=c.value),d&&(r=d.value),h&&(n=h.value)}return{diverging:s,minColor:i,midColor:o,maxColor:t,minValue:n,midValue:r,maxValue:a}}function m(e){var t=h(e),i={linearGradient2:{max:{color:P.text(t.maxColor)},min:{color:P.text(t.minColor)}}};return i}function f(e){var t=h(e),i={linearGradient3:{max:{color:P.text(t.maxColor)},mid:{color:P.text(t.midColor)},min:{color:P.text(t.minColor)}}};return i}function y(e,t){var i,a;return e.linearGradient3?(a=f(),"minColor"===t?i=a.linearGradient3.min.color:"midColor"===t?i=a.linearGradient3.mid.color:"maxColor"===t&&(i=a.linearGradient3.max.color)):e.linearGradient2&&(a=m(),"minColor"===t?i=a.linearGradient2.min.color:"maxColor"===t&&(i=a.linearGradient2.max.color)),i}function v(e,t,i){var a;return a=i?P.text(i):y(e,t)}function b(e,t){e.linearGradient2?e.linearGradient2.min.color=t:e.linearGradient3&&(e.linearGradient3.min.color=t)}function C(e,t){e.linearGradient3&&(e.linearGradient3.mid.color=t)}function x(e,t){e.linearGradient2?e.linearGradient2.max.color=t:e.linearGradient3&&(e.linearGradient3.max.color=t)}function S(e,t){e.linearGradient2?e.linearGradient2.min.value=t:e.linearGradient3&&(e.linearGradient3.min.value=t)}function w(e,t){e.linearGradient3&&(e.linearGradient3.mid.value=t)}function D(e,t){e.linearGradient2?e.linearGradient2.max.value=t:e.linearGradient3&&(e.linearGradient3.max.value=t)}var P=e.data.SQExprBuilder,L="#ffffff",_="dataPoint",N="fillRule";i.getFillRuleRole=a,i.shouldShowGradient=r,i.getUpdatedGradientSettings=n,i.getGradientMeasureIndex=o,i.hasGradientRole=s,i.getDefaultGradientSettings=l,i.getDefaultFillRuleDefinition=u,i.updateFillRule=c,i.getGradientSettings=h,i.getFillRule=p,i.getGradientSettingsFromRule=g}(i=t.GradientUtils||(t.GradientUtils={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function i(){return"#FFF"}function a(){return 50}function r(){return!0}function n(){return{color:i(),transparency:a(),show:r()}}function o(e,t,i){if(i){var r={selector:null,properties:{transparency:t&&t.transparency||a(),image:t&&t.image},objectName:"plotArea"};e.pushInstance(r)}}function s(t,i,a){var r=t&&t.image,n=r&&r.url,o=r&&r.scaling,s=t&&t.transparency,l=i.children(".background-image");if(!n)return void(0!==l.length&&l.remove());switch(0===l.length&&(i.prepend('<div class="background-image"></div>'),l=i.children(".background-image"),l.css("position","absolute")),l.css({width:a.width,height:a.height,"margin-left":a.left,"margin-top":a.top}),l.css({"background-image":"url("+n+")","background-repeat":"no-repeat",opacity:(100-s)/100}),o){case e.imageScalingType.normal:l.css({"background-size":"","background-position":"50% 50%"});break;case e.imageScalingType.fit:l.css({"background-size":"100% 100%","background-position":""});break;case e.imageScalingType.fill:l.css({"background-size":"100%","background-position":"50% 50%"});break;default:l.css({"background-size":"","background-position":"50% 50%"})}}t.getDefaultColor=i,t.getDefaultTransparency=a,t.getDefaultShow=r,t.getDefaultValues=n,t.enumeratePlot=o,t.renderBackgroundImage=s}(t=e.visualBackgroundHelper||(e.visualBackgroundHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=e.data.Selector,a=function(){function e(){}return e.prototype.pushInstance=function(e){var t=this.instances;t||(t=this.instances=[]);var i=this.containerIdx;null!=i&&(e.containerIdx=i);for(var a=0;a<t.length;a++){var r=t[a];if(this.canMerge(r,e))return this.extend(r,e,"properties"),this.extend(r,e,"validValues"),this}return t.push(e),this},e.prototype.pushContainer=function(e){var t=this.containers;t||(t=this.containers=[]);var i=t.push(e);return this.containerIdx=i-1,this},e.prototype.popContainer=function(){return this.containerIdx=void 0,this},e.prototype.complete=function(){if(this.instances){var e={instances:this.instances},t=this.containers;return t&&(e.containers=t),e}},e.prototype.canMerge=function(e,t){return e.objectName===t.objectName&&e.containerIdx===t.containerIdx&&i.equals(e.selector,t.selector)},e.prototype.extend=function(e,t,i){var a=t[i];if(a){var r=e[i];r||(r=e[i]={});for(var n in a)r[n]||(r[n]=a[n])}},e.merge=function(t,i){var a=e.normalize(t),r=e.normalize(i);if(!a||!r)return a||r;for(var n=a.containers?a.containers.length:0,o=0,s=r.instances;o<s.length;o++){var l=s[o];a.instances.push(l),null!=l.containerIdx&&(l.containerIdx+=n)}var u=r.containers;return _.isEmpty(u)||(a.containers?Array.prototype.push.apply(a.containers,u):a.containers=u),a},e.normalize=function(e){return _.isArray(e)?{instances:e}:e},e.getContainerForInstance=function(e,t){return e.containers[t.containerIdx]},e}();t.ObjectEnumerationBuilder=a}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=e.data.SQExprConverter;!function(i){function r(i,a,r,o){if(!i||!i.categorical||_.isEmpty(i.categorical.categories))return o.promiseFactory().reject();var s=i.categorical.categories[0],l=s.identityFields;if(!l)return o.promiseFactory().reject();var u=i.metadata&&i.metadata.objects&&e.DataViewObjects.getValue(i.metadata.objects,t.slicerProps.filterPropertyIdentifier),c=o.filterAnalyzer(u,l);if(!c)return o.promiseFactory().reject();if(u){var h=n(u,c,i.metadata,s,a,r,o);return o.promiseFactory().resolve(h)}return c.hasDefaultFilterOverride().then(function(e){e===!0&&r.handleClearSelection();var t=n(u,c,i.metadata,s,a,r,o);return t})}function n(e,i,a,r,n,l,u){var c=l&&l.isSelectionModeInverted(),h=!1,p=i.selectedIdentities();h=!_.isEmpty(p),e&&(c=i.isNotFilter()),l&&l.setSelectionModeInverted(c);for(var d=r&&r.values?r.values.length:0,g=[],m=t.valueFormatter.getFormatString(r.source,t.slicerProps.formatString),f=0,y=0;d>y;y++){var v=r.identity&&r.identity[y],b=r.values&&r.values[y];if(b){var C=h?t.SlicerUtil.tryRemoveValueFromRetainedList(v,p):!1,x=t.valueFormatter.format(b,m),S={value:x,tooltip:x,identity:t.SelectionId.createWithId(v),selected:C};g.push(S),S.selected&&f++}}if(h)for(var w=0;w<p.length;w++){var v=p[w],x=o(v,m),D={value:x,tooltip:x,identity:t.SelectionId.createWithId(v),selected:!0};g.push(D),f++}if(f>0&&!a.segment&&f===g.length){c=!c,l.setSelectionModeInverted(c);for(var P=0;P<g.length;P++){var L=g[P];L.selected=!1}h=!1,f=0}var N=s(a);N.selection.selectAllCheckboxEnabled&&g.unshift({value:n,tooltip:n,identity:t.SelectionId.createWithMeasure(n),selected:!!c&&0===f,isSelectAllDataPoint:!0});var T={categorySourceName:r.source.displayName,slicerSettings:N,slicerDataPoints:g,hasSelectionOverride:h};return T}function o(e,i){var r=a.getFirstComparandValue(e);return t.valueFormatter.format(r,i)}function s(i){var a=t.Slicer.DefaultStyleProperties(),r=i.objects;if(r){a.general.outlineColor=e.DataViewObjects.getFillColor(r,t.slicerProps.general.outlineColor,a.general.outlineColor),a.general.outlineWeight=e.DataViewObjects.getValue(r,t.slicerProps.general.outlineWeight,a.general.outlineWeight),a.general.orientation=e.DataViewObjects.getValue(r,t.slicerProps.general.orientation,a.general.orientation),a.header.show=e.DataViewObjects.getValue(r,t.slicerProps.header.show,a.header.show),a.header.fontColor=e.DataViewObjects.getFillColor(r,t.slicerProps.header.fontColor,a.header.fontColor);var n=e.DataViewObjects.getFillColor(r,t.slicerProps.header.background);n&&(a.header.background=n),a.header.outline=e.DataViewObjects.getValue(r,t.slicerProps.header.outline,a.header.outline),a.header.textSize=e.DataViewObjects.getValue(r,t.slicerProps.header.textSize,a.header.textSize),a.slicerText.color=e.DataViewObjects.getFillColor(r,t.slicerProps.items.fontColor,a.slicerText.color);var o=e.DataViewObjects.getFillColor(r,t.slicerProps.items.background);o&&(a.slicerText.background=o),a.slicerText.outline=e.DataViewObjects.getValue(r,t.slicerProps.items.outline,a.slicerText.outline),a.slicerText.textSize=e.DataViewObjects.getValue(r,t.slicerProps.items.textSize,a.slicerText.textSize),a.selection.selectAllCheckboxEnabled=e.DataViewObjects.getValue(r,t.slicerProps.selection.selectAllCheckboxEnabled,a.selection.selectAllCheckboxEnabled),a.selection.singleSelect=e.DataViewObjects.getValue(r,t.slicerProps.selection.singleSelect,a.selection.singleSelect)}return a}function l(i){return i&&i.metadata&&!_.isEmpty(i.metadata.columns)?e.DataViewObjects.getValue(i.metadata.columns[0].objects,t.slicerProps.defaultValue):void 0}i.convert=r,i.getDataViewDefaultValue=l}(i=t.DataConversion||(t.DataConversion={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t=e.visuals.NewDataLabelUtils,i=5,a=10,r=60,n=5,o=function(){function o(){}return o.prototype.layout=function(i,a,r){for(var n={labelDataPoints:i,maxNumberOfLabels:i.length},o=new e.LabelArrangeGrid([n],a,t.horizontalLabelBackgroundMargin,t.verticalLabelBackgroundMargin),l=[],u=[],c=0;c<i.length;c++){var h=i[c],p=h.parentShape.polygon;u.push(p),p.pixelBoundingRect=r.applyToRect(p.absoluteBoundingRect())}for(var d=new s(u,a),g=0;g<i.length;g++){var h=i[g],m=this.getLabelByPolygonPositions(h,r,o,d);null!=m&&l.push(m)}return l},o.prototype.getLabelPolygon=function(t,i,a,r){var n={width:t.textSize.width,height:t.textSize.height};switch(i){case e.NewPointLabelPosition.Above:return e.DataLabelPointPositioner.above(n,a,r);case e.NewPointLabelPosition.Below:return e.DataLabelPointPositioner.below(n,a,r);case e.NewPointLabelPosition.Left:return e.DataLabelPointPositioner.left(n,a,r);case e.NewPointLabelPosition.Right:return e.DataLabelPointPositioner.right(n,a,r);case e.NewPointLabelPosition.AboveLeft:return e.DataLabelPointPositioner.aboveLeft(n,a,r);case e.NewPointLabelPosition.AboveRight:return e.DataLabelPointPositioner.aboveRight(n,a,r);case e.NewPointLabelPosition.BelowLeft:return e.DataLabelPointPositioner.belowLeft(n,a,r);case e.NewPointLabelPosition.BelowRight:return e.DataLabelPointPositioner.belowRight(n,a,r);case e.NewPointLabelPosition.Center:return e.DataLabelPointPositioner.center(n,a)}return null},o.prototype.getLabelByPolygonPositions=function(t,n,o,s){for(var l=0,u=0;2>u;u++){1===u&&(l=i);for(var c=0,h=t.parentShape.validPositions;c<h.length;c++){var p=h[c],d=this.tryPositionForPolygonPosition(p,t,n,l);if((p!==e.NewPointLabelPosition.Center||0===u)&&d){var g={text:t.text,secondRowText:t.secondRowText,boundingBox:d,isVisible:!0,fill:t.insideFill,identity:null,selected:!1};return g}}}for(var m=n.getInverse(),f=6;r>=f;){for(var y=0,v=t.parentShape.validPositions;y<v.length;y++){var p=v[y];if(p!==e.NewPointLabelPosition.Center){var b=t.parentShape.polygon,C=n.applyToPoint(b.absoluteCentroid()),d=this.tryPlaceLabelOutsidePolygon(o,p,t,f,C,s,m);if(d){var g={text:t.text,secondRowText:t.secondRowText,boundingBox:d,isVisible:!0,fill:t.insideFill,identity:null,selected:!1};return g.leaderLinePoints=this.setLeaderLinePoints(this.calculateStemSource(n,m,b,d,p,C),this.calculateStemDestination(d,p)),o.add(d),g}}}f+=a}return null},o.prototype.setLeaderLinePoints=function(e,t){return[[e.x,e.y],[t.x,t.y]]},o.prototype.calculateStemSource=function(t,i,a,r,o,s){var l=a.lineIntersectionPoint(a.absoluteCentroid(),i.applyToPoint({x:r.left+r.width/2,y:r.top+r.height/2}));if(null==l)return s;var u=t.applyToPoint(l);switch(o){case e.NewPointLabelPosition.Above:u.y+=n;break;case e.NewPointLabelPosition.Below:u.y-=n;break;case e.NewPointLabelPosition.Left:u.x+=n;break;case e.NewPointLabelPosition.Right:u.x-=n;break;case e.NewPointLabelPosition.AboveLeft:u.x+=n/e.DataLabelPointPositioner.cos45,u.y+=n/e.DataLabelPointPositioner.sin45;break;case e.NewPointLabelPosition.AboveRight:u.x-=n/e.DataLabelPointPositioner.cos45,u.y+=n/e.DataLabelPointPositioner.sin45;break;case e.NewPointLabelPosition.BelowLeft:u.x+=n/e.DataLabelPointPositioner.cos45,u.y-=n/e.DataLabelPointPositioner.sin45;break;case e.NewPointLabelPosition.BelowRight:u.x-=n/e.DataLabelPointPositioner.cos45,u.y-=n/e.DataLabelPointPositioner.sin45;break;case e.NewPointLabelPosition.Center:}return u},o.prototype.calculateStemDestination=function(t,i){var a,r;switch(i){case e.NewPointLabelPosition.Above:a=t.left+t.width/2,r=t.top+t.height;break;case e.NewPointLabelPosition.Below:a=t.left+t.width/2,r=t.top;break;case e.NewPointLabelPosition.Left:a=t.left+t.width,r=t.top+t.height/2;break;case e.NewPointLabelPosition.Right:a=t.left,r=t.top+t.height/2;break;case e.NewPointLabelPosition.AboveLeft:a=t.left+t.width,r=t.top+t.height;break;case e.NewPointLabelPosition.AboveRight:a=t.left,r=t.top+t.height;break;case e.NewPointLabelPosition.BelowLeft:a=t.left+t.width,r=t.top;break;case e.NewPointLabelPosition.BelowRight:a=t.left,r=t.top;break;case e.NewPointLabelPosition.Center:}return{x:a,y:r}},o.prototype.tryPositionForPolygonPosition=function(e,t,i,a){var r=t.parentShape.polygon,n=i.applyToPoint(r.absoluteCentroid()),o=this.getLabelPolygon(t,e,n,a),s=i.getInverse(),l=this.getAbsoluteRectangle(s,o);return r.contains(l)?o:null},o.prototype.tryPlaceLabelOutsidePolygon=function(e,t,i,a,r,n,o){var s=a,l=this.getLabelPolygon(i,t,r,s),u=e.hasConflict(l);if(!u){var c=this.getAbsoluteRectangle(o,l);if(!n.hasConflict(c,l))return l}return null},o.prototype.getAbsoluteRectangle=function(e,t){return e.applyToRect(t)},o}();e.FilledMapLabelLayout=o;var s=function(){function e(t,i){this.viewport=i;for(var a=0,r=0,n=0;n<t.length;n++){var o=t[n],s=o.pixelBoundingRect;s.width>a&&(a=s.width),s.height>r&&(r=s.height)}0===a&&(a=i.width),0===r&&(r=i.height);var l=this.cellSize={width:a*e.cellSizeMultiplier,height:r*e.cellSizeMultiplier};this.columnCount=e.getCellCount(l.width,i.width,1,100),this.rowCount=e.getCellCount(l.height,i.height,1,100);for(var u=[],c=0,h=this.columnCount;h>c;c++){u[c]=[];for(var p=0,d=this.rowCount;d>p;p++)u[c][p]=[]}this.grid=u;for(var g=0;g<t.length;g++){var o=t[g];this.add(o)}}return e.prototype.hasConflict=function(e,t){for(var i=this.getContainingGridSubsection(t),a=this.grid,r=i.xMin;r<i.xMax;r++)for(var n=i.yMin;n<i.yMax;n++)for(var o=0,s=a[r][n];o<s.length;o++){var l=s[o];if(l.conflicts(e))return!0}return!1},e.prototype.add=function(e){for(var t=this.getContainingGridSubsection(e.pixelBoundingRect),i=t.xMin;i<t.xMax;i++)for(var a=t.yMin;a<t.yMax;a++)this.grid[i][a].push(e)},e.prototype.getContainingGridSubsection=function(t){return{xMin:e.bound(Math.floor(t.left/this.cellSize.width),0,this.columnCount),xMax:e.bound(Math.ceil((t.left+t.width)/this.cellSize.width),0,this.columnCount),yMin:e.bound(Math.floor(t.top/this.cellSize.height),0,this.rowCount),yMax:e.bound(Math.ceil((t.top+t.height)/this.cellSize.height),0,this.rowCount)}},e.getCellCount=function(t,i,a,r){return e.bound(Math.ceil(i/t),a,r)},e.bound=function(e,t,i){return Math.max(Math.min(e,i),t)},e.cellSizeMultiplier=2,e}();e.LabelPolygonArrangeGrid=s}(powerbi||(powerbi={}));var powerbi;!function(e){var t=e.visuals.shapes;!function(e){e[e.None=0]="None",e[e.TopLeft=1]="TopLeft",e[e.TopCenter=2]="TopCenter",e[e.TopRight=4]="TopRight",e[e.MiddleLeft=8]="MiddleLeft",e[e.MiddleCenter=16]="MiddleCenter",e[e.MiddleRight=32]="MiddleRight",e[e.BottomLeft=64]="BottomLeft",e[e.BottomCenter=128]="BottomCenter",e[e.BottomRight=256]="BottomRight",e[e.InsideCenter=512]="InsideCenter",e[e.InsideBase=1024]="InsideBase",e[e.InsideEnd=2048]="InsideEnd",e[e.OutsideBase=4096]="OutsideBase",e[e.OutsideEnd=8192]="OutsideEnd",e[e.All=16383]="All"}(e.ContentPositions||(e.ContentPositions={}));var i=e.ContentPositions;!function(e){e[e.None=0]="None",e[e.VerticalBottomTop=1]="VerticalBottomTop",e[e.VerticalTopBottom=2]="VerticalTopBottom",e[e.HorizontalLeftRight=3]="HorizontalLeftRight",e[e.HorizontalRightLeft=4]="HorizontalRightLeft"}(e.RectOrientation||(e.RectOrientation={}));var a=e.RectOrientation;!function(e){e[e.Allowed=0]="Allowed",e[e.Disallowed=1]="Disallowed",e[e.Partial=2]="Partial"}(e.OutsidePlacement||(e.OutsidePlacement={}));var r=e.OutsidePlacement,n=function(){function n(){this.movingStep=3,this.hideOverlapped=!0,this.defaultDataLabelSettings={anchorMargin:n.DefaultAnchorMargin,anchorRectOrientation:a.None,contentPosition:i.BottomCenter,outsidePlacement:r.Disallowed,maximumMovingDistance:n.DefaultMaximumMovingDistance,minimumMovingDistance:n.DefaultMinimumMovingDistance,validContentPositions:i.BottomCenter,opacity:1}}return Object.defineProperty(n.prototype,"defaultSettings",{get:function(){return this.defaultDataLabelSettings},enumerable:!0,configurable:!0}),n.prototype.hideCollidedLabels=function(e,t,i,a){void 0===a&&(a=!1);var r=new o(e,t,i),s=[],l={x:0,y:0};a&&(l.x=e.width/2,l.y=e.height/2);for(var u=0,c=t.length;c>u;u++)if(i.filter(t[u])){var h=this.getLabelInfo(t[u]);h.anchorPoint={x:i.labelLayout.x(t[u])+l.x,y:i.labelLayout.y(t[u])+l.y};var p=this.calculateContentPosition(h,h.contentPosition,t[u].size,h.anchorMargin);n.isValid(p)&&!this.hasCollisions(r,h,p,e)&&(t[u].labelX=p.left-l.x,t[u].labelY=p.top-l.y,r.add(h,p),s.push(t[u]))}return s},n.prototype.getLabelInfo=function(e){var t=this.defaultDataLabelSettings;return e.anchorMargin=void 0!==e.anchorMargin?e.anchorMargin:t.anchorMargin,e.anchorRectOrientation=void 0!==e.anchorRectOrientation?e.anchorRectOrientation:t.anchorRectOrientation,e.contentPosition=void 0!==e.contentPosition?e.contentPosition:t.contentPosition,e.maximumMovingDistance=void 0!==e.maximumMovingDistance?e.maximumMovingDistance:t.maximumMovingDistance,e.minimumMovingDistance=void 0!==e.minimumMovingDistance?e.minimumMovingDistance:t.minimumMovingDistance,e.outsidePlacement=void 0!==e.outsidePlacement?e.outsidePlacement:t.outsidePlacement,e.validContentPositions=void 0!==e.validContentPositions?e.validContentPositions:t.validContentPositions,e.opacity=void 0!==e.opacity?e.opacity:t.opacity,e.maximumMovingDistance+=e.anchorMargin,e},n.prototype.calculateContentPositionFromPoint=function(e,t,a,r){
var n={x:0,y:0};if(e){if(void 0!==e.x&&isFinite(e.x))switch(n.x=e.x,t){case i.TopLeft:case i.MiddleLeft:case i.BottomLeft:n.x-=a.width/2;break;case i.TopRight:case i.MiddleRight:case i.BottomRight:n.x+=a.width/2}if(void 0!==e.y&&isFinite(e.y))switch(n.y=e.y,t){case i.MiddleLeft:case i.MiddleCenter:case i.MiddleRight:n.y-=a.height/2;break;case i.TopRight:case i.TopLeft:case i.TopCenter:n.y-=a.height}if(void 0!==r&&isFinite(r))switch(t){case i.TopLeft:n.x-=r,n.y-=r;break;case i.MiddleLeft:n.x-=r;break;case i.BottomLeft:n.x-=r,n.y+=r;break;case i.TopCenter:n.y-=r;break;case i.MiddleCenter:break;case i.BottomCenter:n.y+=r;break;case i.TopRight:n.x+=r,n.y-=r;break;case i.MiddleRight:n.x+=r;break;case i.BottomRight:n.x+=r,n.y+=r}}return{left:n.x,top:n.y,width:a.width,height:a.height}},n.prototype.calculateContentPositionFromRect=function(e,t,a,r,n){switch(a){case i.InsideCenter:return this.handleInsideCenterPosition(t,r,e,n);case i.InsideEnd:return this.handleInsideEndPosition(t,r,e,n);case i.InsideBase:return this.handleInsideBasePosition(t,r,e,n);case i.OutsideEnd:return this.handleOutsideEndPosition(t,r,e,n);case i.OutsideBase:return this.handleOutsideBasePosition(t,r,e,n)}return{left:0,top:0,width:-1,height:-1}},n.prototype.handleInsideCenterPosition=function(e,t,i,r){switch(e){case a.VerticalBottomTop:case a.VerticalTopBottom:return s.middleVertical(t,i,r);case a.HorizontalLeftRight:case a.HorizontalRightLeft:default:return s.middleHorizontal(t,i,r)}},n.prototype.handleInsideEndPosition=function(e,t,i,r){switch(e){case a.VerticalBottomTop:return s.topInside(t,i,r);case a.VerticalTopBottom:return s.bottomInside(t,i,r);case a.HorizontalRightLeft:return s.leftInside(t,i,r);case a.HorizontalLeftRight:default:return s.rightInside(t,i,r)}},n.prototype.handleInsideBasePosition=function(e,t,i,r){switch(e){case a.VerticalBottomTop:return s.bottomInside(t,i,r);case a.VerticalTopBottom:return s.topInside(t,i,r);case a.HorizontalRightLeft:return s.rightInside(t,i,r);case a.HorizontalLeftRight:default:return s.leftInside(t,i,r)}},n.prototype.handleOutsideEndPosition=function(e,t,i,r){switch(e){case a.VerticalBottomTop:return s.topOutside(t,i,r);case a.VerticalTopBottom:return s.bottomOutside(t,i,r);case a.HorizontalRightLeft:return s.leftOutside(t,i,r);case a.HorizontalLeftRight:default:return s.rightOutside(t,i,r)}},n.prototype.handleOutsideBasePosition=function(e,t,i,r){switch(e){case a.VerticalBottomTop:return s.bottomOutside(t,i,r);case a.VerticalTopBottom:return s.topOutside(t,i,r);case a.HorizontalRightLeft:return s.rightOutside(t,i,r);case a.HorizontalLeftRight:default:return s.leftOutside(t,i,r)}},n.prototype.calculateContentPosition=function(e,t,a,r){return t!==i.InsideEnd&&t!==i.InsideCenter&&t!==i.InsideBase&&t!==i.OutsideBase&&t!==i.OutsideEnd?this.calculateContentPositionFromPoint(e.anchorPoint,t,a,r):this.calculateContentPositionFromRect(e.anchorRect,e.anchorRectOrientation,t,a,r)},n.prototype.hasCollisions=function(i,a,o,s){var l=t.Rect;if(i.hasConflict(o))return!0;var u={left:0,top:o.height/2,width:s.width,height:s.height};if(u=l.inflate(u,{left:n.InflateAmount,top:0,right:n.InflateAmount,bottom:0}),u=l.intersect(u,o),l.isEmpty(u))return!0;var c=e.Double.lessWithPrecision;switch(a.outsidePlacement){case r.Disallowed:return c(u.width,o.width)||c(u.height,o.height/2);case r.Partial:return c(u.width,o.width/2)||c(u.height,o.height/4)}return!1},n.isValid=function(e){return!t.Rect.isEmpty(e)&&e.width>0&&e.height>0},n.DefaultAnchorMargin=0,n.DefaultMaximumMovingDistance=12,n.DefaultMinimumMovingDistance=3,n.InflateAmount=5,n}();e.DataLabelManager=n;var o=function(){function i(t,a,r){this.grid=[],(0===t.width||0===t.height)&&(this.cellSize=t,this.rowCount=this.colCount=0);var n={fontFamily:e.visuals.dataLabelUtils.LabelTextProperties.fontFamily,fontSize:e.visuals.dataLabelUtils.LabelTextProperties.fontSize,fontWeight:e.visuals.dataLabelUtils.LabelTextProperties.fontWeight};this.cellSize={width:0,height:0};for(var o=0,s=a.length;s>o;o++){var l=a[o];l.labeltext=r.labelText(l);var u=e.Prototype.inherit(n);u.text=l.labeltext,u.fontSize=l.data?l.data.labelFontSize:l.labelFontSize?l.labelFontSize:e.visuals.dataLabelUtils.LabelTextProperties.fontSize,l.size={width:e.TextMeasurementService.measureSvgTextWidth(u),height:e.TextMeasurementService.estimateSvgTextHeight(u)};var c=2*l.size.width,h=2*l.size.height;c>this.cellSize.width&&(this.cellSize.width=c),h>this.cellSize.height&&(this.cellSize.height=h)}0===this.cellSize.width&&(this.cellSize.width=t.width),0===this.cellSize.height&&(this.cellSize.height=t.height),this.colCount=this.getGridRowColCount(this.cellSize.width,t.width,i.ARRANGEGRID_MIN_COUNT,i.ARRANGEGRID_MAX_COUNT),this.rowCount=this.getGridRowColCount(this.cellSize.height,t.height,i.ARRANGEGRID_MIN_COUNT,i.ARRANGEGRID_MAX_COUNT),this.cellSize.width=t.width/this.colCount,this.cellSize.height=t.height/this.rowCount;for(var p=this.grid,d=0;d<this.colCount;d++){p[d]=[];for(var g=0;g<this.rowCount;g++)p[d][g]=[]}}return i.prototype.add=function(e,t){for(var i=this.getGridIndexRect(t),a=this.grid,r=i.left;r<i.right;r++)for(var n=i.top;n<i.bottom;n++)a[r][n].push({element:e,rect:t})},i.prototype.hasConflict=function(e){for(var i=this.getGridIndexRect(e),a=this.grid,r=t.Rect.isIntersecting,n=i.left;n<i.right;n++)for(var o=i.top;o<i.bottom;o++)for(var s=0;s<a[n][o].length;s++){var l=a[n][o][s];if(r(l.rect,e))return!0}return!1},i.prototype.getGridRowColCount=function(e,t,i,a){return Math.min(Math.max(Math.ceil(t/e),i),a)},i.prototype.getGridIndexRect=function(e){var t=function(e,t,i){return Math.min(Math.max(e,t),i)};return{left:t(Math.floor(e.left/this.cellSize.width),0,this.colCount),top:t(Math.floor(e.top/this.cellSize.height),0,this.rowCount),right:t(Math.ceil((e.left+e.width)/this.cellSize.width),0,this.colCount),bottom:t(Math.ceil((e.top+e.height)/this.cellSize.height),0,this.rowCount)}},i.ARRANGEGRID_MIN_COUNT=1,i.ARRANGEGRID_MAX_COUNT=100,i}();e.DataLabelArrangeGrid=o;var s;!function(e){function t(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+i,width:e.width,height:e.height}}function i(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height-e.height-i,width:e.width,height:e.height}}function a(e,t,i){return{left:t.left+t.width-e.width-i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function r(e,t,i){return{left:t.left+i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function n(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top-e.height-i,width:e.width,height:e.height}}function o(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height+i,width:e.width,height:e.height}}function s(e,t,i){return{left:t.left+t.width+i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function l(e,t,i){return{left:t.left-e.width-i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function u(e,t,i){return{left:t.left+t.width/2-e.width/2+i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function c(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height/2-e.height/2+i,width:e.width,height:e.height}}e.topInside=t,e.bottomInside=i,e.rightInside=a,e.leftInside=r,e.topOutside=n,e.bottomOutside=o,e.rightOutside=s,e.leftOutside=l,e.middleHorizontal=u,e.middleVertical=c}(s||(s={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t=e.visuals.shapes,i=e.visuals.shapes.Rect;!function(e){e[e.None=0]="None",e[e.InsideCenter=1]="InsideCenter",e[e.InsideBase=2]="InsideBase",e[e.InsideEnd=4]="InsideEnd",e[e.OutsideBase=8]="OutsideBase",e[e.OutsideEnd=16]="OutsideEnd",e[e.All=31]="All",e[e.InsideAll=7]="InsideAll"}(e.RectLabelPosition||(e.RectLabelPosition={}));var a=e.RectLabelPosition;!function(e){e[e.None=0]="None",e[e.Above=1]="Above",e[e.Below=2]="Below",e[e.Left=4]="Left",e[e.Right=8]="Right",e[e.BelowRight=16]="BelowRight",e[e.BelowLeft=32]="BelowLeft",e[e.AboveRight=64]="AboveRight",e[e.AboveLeft=128]="AboveLeft",e[e.Center=256]="Center",e[e.All=511]="All"}(e.NewPointLabelPosition||(e.NewPointLabelPosition={}));var r=e.NewPointLabelPosition;!function(e){e[e.None=0]="None",e[e.VerticalBottomBased=1]="VerticalBottomBased",e[e.VerticalTopBased=2]="VerticalTopBased",e[e.HorizontalLeftBased=3]="HorizontalLeftBased",e[e.HorizontalRightBased=4]="HorizontalRightBased"}(e.NewRectOrientation||(e.NewRectOrientation={}));var n=e.NewRectOrientation,o=function(){function e(t,i,a,r){this.viewport=i,this.horizontalMargin=a,this.verticalMargin=r;for(var n=0,o=0,s=0;s<t.length;s++)for(var l=t[s],u=0,c=l.labelDataPoints;u<c.length;u++){var h=c[u];if(h.isPreferred){var p=h.textSize;p.width>n&&(n=p.width),p.height>o&&(o=p.height)}}0===n&&(n=i.width),0===o&&(o=i.height);var d=this.cellSize={width:n*e.cellSizeMultiplier,height:o*e.cellSizeMultiplier};this.columnCount=e.getCellCount(d.width,i.width,1,100),this.rowCount=e.getCellCount(d.height,i.height,1,100);for(var g=[],m=0,f=this.columnCount;f>m;m++){g[m]=[];for(var y=0,v=this.rowCount;v>y;y++)g[m][y]=[]}this.grid=g}return e.prototype.padRectangle=function(e){var t=e;return(this.horizontalMargin||this.verticalMargin)&&(t=i.clone(e),this.horizontalMargin&&(t.left-=this.horizontalMargin,t.width+=2*this.horizontalMargin),this.verticalMargin&&(t.top-=this.verticalMargin,t.height+=2*this.verticalMargin)),t},e.prototype.add=function(e){for(var t=this.padRectangle(e),i=this.getContainingGridSubsection(t),a=i.xMin;a<i.xMax;a++)for(var r=i.yMin;r<i.yMax;r++)this.grid[a][r].push(t)},e.prototype.hasConflict=function(e){var i=this.padRectangle(e);if(!this.isWithinGridViewport(i))return!0;for(var a=this.getContainingGridSubsection(i),r=this.grid,n=t.Rect.isIntersecting,o=a.xMin;o<a.xMax;o++)for(var s=a.yMin;s<a.yMax;s++)for(var l=0,u=r[o][s];l<u.length;l++){var c=u[l];if(n(c,i))return!0}return!1},e.prototype.isWithinGridViewport=function(e){return e.left>=0&&e.top>=0&&e.left+e.width<=this.viewport.width&&e.top+e.height<=this.viewport.height},e.prototype.getContainingGridSubsection=function(t){return{xMin:e.bound(Math.floor(t.left/this.cellSize.width),0,this.columnCount),xMax:e.bound(Math.ceil((t.left+t.width)/this.cellSize.width),0,this.columnCount),yMin:e.bound(Math.floor(t.top/this.cellSize.height),0,this.rowCount),yMax:e.bound(Math.ceil((t.top+t.height)/this.cellSize.height),0,this.rowCount)}},e.getCellCount=function(t,i,a,r){return e.bound(Math.ceil(i/t),a,r)},e.bound=function(e,t,i){return Math.max(Math.min(e,i),t)},e.cellSizeMultiplier=2,e}();e.LabelArrangeGrid=o;var s=function(){function e(t){this.startingOffset=t.startingOffset,this.maximumOffset=t.maximumOffset,null!=t.offsetIterationDelta?this.offsetIterationDelta=t.offsetIterationDelta:this.offsetIterationDelta=e.defaultOffsetIterationDelta,null!=t.horizontalPadding?this.horizontalPadding=t.horizontalPadding:this.horizontalPadding=e.defaultHorizontalPadding,null!=t.verticalPadding?this.verticalPadding=t.verticalPadding:this.verticalPadding=e.defaultVerticalPadding,this.allowLeaderLines=!!t.allowLeaderLines}return e.prototype.layout=function(e,t){for(var i=0;i<e.length;i++)for(var a=e[i],r=0,n=a.labelDataPoints;r<n.length;r++){var s=n[r];s.hasBeenRendered=!1}for(var l=[],u=new o(e,t),c=0;c<e.length;c++){for(var a=e[c],h=a.maxNumberOfLabels,p=a.labelDataPoints,d=[],g=p.length-1,m=h;g>=0&&m>0;g--){var s=p[g];s.isPreferred&&(d.unshift(p.splice(g,1)[0]),m--)}if(d.length>0){var f=this.positionDataLabels(d,t,u,h);h-=f.length,l=l.concat(f)}if(p.length>0){var y=this.positionDataLabels(p,t,u,h);l=l.concat(y)}}return l},e.prototype.positionDataLabels=function(e,t,i,a){for(var r,n=[],o=this.offsetIterationDelta,s=this.startingOffset,l=0;s<=this.maximumOffset&&a>0;){r=this.allowLeaderLines&&s>this.startingOffset;for(var u=0;u<e.length;u++){var c=e[u];if(0===a)break;if(!c.hasBeenRendered){var h=void 0;h=1===c.parentType?this.tryPositionForRectPositions(c,i,s,l):this.tryPositionForPointPositions(c,i,s,r),h&&(n.push(h),a--)}}s+=o,l+=o}return n},e.prototype.tryPositionForRectPositions=function(t,i,r,n){for(var o=0,s=t.parentShape.validPositions;o<s.length;o++){var u=s[o],c=u&a.InsideAll;if(!c||l.canFitWithinParent(t,this.horizontalPadding,this.verticalPadding)){var h=e.tryPositionRect(i,u,t,r,n);if(h){if(c&&!l.isLabelWithinParent(h,t,this.horizontalPadding,this.verticalPadding))continue;return i.add(h),t.hasBeenRendered=!0,{boundingBox:h,text:t.text,isVisible:!0,fill:c?t.insideFill:t.outsideFill,identity:t.identity,fontSize:t.fontSize,selected:!1}}}}return null},e.tryPositionRect=function(e,t,i,r,o){var s=r;t&a.InsideCenter&&(s=o);var u=l.getLabelRect(i,t,s);if(t!==a.InsideCenter||i.parentShape.orientation===n.None){if(!e.hasConflict(u))return u}else{if(!e.hasConflict(u))return u;if(u=l.getLabelRect(i,t,-s),!e.hasConflict(u))return u}return null},e.prototype.tryPositionForPointPositions=function(t,i,a,n){for(var o=t.parentShape,s=0,l=o.validPositions;s<l.length;s++){var c=l[s],h=e.tryPositionPoint(i,c,t,a);if(h)return i.add(h),t.hasBeenRendered=!0,{boundingBox:h,text:t.text,isVisible:!0,fill:c===r.Center?t.insideFill:t.outsideFill,isInsideParent:c===r.Center,identity:t.identity,fontSize:t.fontSize,selected:!1,leaderLinePoints:n?u.getLabelLeaderLineEndingPoint(h,c,o):null}}return null},e.tryPositionPoint=function(e,t,i,a){var r=u.getLabelRect(i,t,a);return e.hasConflict(r)?null:r},e.defaultOffsetIterationDelta=2,e.defaultHorizontalPadding=2,e.defaultVerticalPadding=2,e}();e.LabelLayout=s;var l;!function(e){function i(t,i,r){var o=t.parentShape;if(null!=o)switch(i){case a.InsideCenter:switch(o.orientation){case n.VerticalBottomBased:case n.VerticalTopBased:return e.middleVertical(t.textSize,o.rect,r);case n.HorizontalLeftBased:case n.HorizontalRightBased:return e.middleHorizontal(t.textSize,o.rect,r);case n.None:}case a.InsideBase:switch(o.orientation){case n.VerticalBottomBased:return e.bottomInside(t.textSize,o.rect,r);case n.VerticalTopBased:return e.topInside(t.textSize,o.rect,r);case n.HorizontalLeftBased:return e.leftInside(t.textSize,o.rect,r);case n.HorizontalRightBased:return e.rightInside(t.textSize,o.rect,r);case n.None:}case a.InsideEnd:switch(o.orientation){case n.VerticalBottomBased:return e.topInside(t.textSize,o.rect,r);case n.VerticalTopBased:return e.bottomInside(t.textSize,o.rect,r);case n.HorizontalLeftBased:return e.rightInside(t.textSize,o.rect,r);case n.HorizontalRightBased:return e.leftInside(t.textSize,o.rect,r);case n.None:}case a.OutsideBase:switch(o.orientation){case n.VerticalBottomBased:return e.bottomOutside(t.textSize,o.rect,r);case n.VerticalTopBased:return e.topOutside(t.textSize,o.rect,r);case n.HorizontalLeftBased:return e.leftOutside(t.textSize,o.rect,r);case n.HorizontalRightBased:return e.rightOutside(t.textSize,o.rect,r);case n.None:}case a.OutsideEnd:switch(o.orientation){case n.VerticalBottomBased:return e.topOutside(t.textSize,o.rect,r);case n.VerticalTopBased:return e.bottomOutside(t.textSize,o.rect,r);case n.HorizontalLeftBased:return e.rightOutside(t.textSize,o.rect,r);case n.HorizontalRightBased:return e.leftOutside(t.textSize,o.rect,r);case n.None:}}return null}function r(e,t,i){return e.textSize.width+2*t<e.parentShape.rect.width||e.textSize.height+2*i<e.parentShape.rect.height}function o(e,i,a,r){var n=i.parentShape.rect,o=t.Rect.inflate(e,{left:a,right:a,top:r,bottom:r});return t.Rect.containsPoint(n,{x:o.left,y:o.top})&&t.Rect.containsPoint(n,{x:o.left+o.width,y:o.top+o.height})}function s(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+i,width:e.width,height:e.height}}function l(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height-i-e.height,width:e.width,height:e.height}}function u(e,t,i){return{left:t.left+t.width-e.width-i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function c(e,t,i){return{left:t.left+i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function h(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top-e.height-i,width:e.width,height:e.height}}function p(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height+i,width:e.width,height:e.height}}function d(e,t,i){return{left:t.left+t.width+i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function g(e,t,i){return{left:t.left-e.width-i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function m(e,t,i){return{left:t.left+t.width/2-e.width/2+i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function f(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height/2-e.height/2+i,width:e.width,height:e.height}}e.getLabelRect=i,e.canFitWithinParent=r,e.isLabelWithinParent=o,e.topInside=s,e.bottomInside=l,e.rightInside=u,e.leftInside=c,e.topOutside=h,e.bottomOutside=p,e.rightOutside=d,e.leftOutside=g,e.middleHorizontal=m,e.middleVertical=f}(l=e.DataLabelRectPositioner||(e.DataLabelRectPositioner={}));var u;!function(e){function t(t,i,a){var n=t.parentShape;switch(i){case r.Above:return e.above(t.textSize,n.point,n.radius+a);case r.Below:return e.below(t.textSize,n.point,n.radius+a);case r.Left:return e.left(t.textSize,n.point,n.radius+a);case r.Right:return e.right(t.textSize,n.point,n.radius+a);case r.BelowLeft:return e.belowLeft(t.textSize,n.point,n.radius+a);case r.BelowRight:return e.belowRight(t.textSize,n.point,n.radius+a);case r.AboveLeft:return e.aboveLeft(t.textSize,n.point,n.radius+a);case r.AboveRight:return e.aboveRight(t.textSize,n.point,n.radius+a);case r.Center:return e.center(t.textSize,n.point)}return null}function i(e,t,i){return{left:t.x-e.width/2,top:t.y-i-e.height,width:e.width,height:e.height}}function a(e,t,i){return{left:t.x-e.width/2,top:t.y+i,width:e.width,height:e.height}}function n(e,t,i){return{left:t.x-i-e.width,top:t.y-e.height/2,width:e.width,height:e.height}}function o(e,t,i){return{left:t.x+i,top:t.y-e.height/2,width:e.width,height:e.height}}function s(t,i,a){return{left:i.x-e.sin45*a-t.width,top:i.y+e.cos45*a,width:t.width,height:t.height}}function l(t,i,a){return{left:i.x+e.sin45*a,top:i.y+e.cos45*a,width:t.width,height:t.height}}function u(t,i,a){return{left:i.x-e.sin45*a-t.width,top:i.y-e.cos45*a-t.height,width:t.width,height:t.height}}function c(t,i,a){return{left:i.x+e.sin45*a,top:i.y-e.cos45*a-t.height,width:t.width,height:t.height}}function h(e,t){return{left:t.x-e.width/2,top:t.y-e.height/2,width:e.width,height:e.height}}function p(e,t,i){var a=e.left,n=e.top;switch(t){case r.Above:a+=e.width/2,n+=e.height;break;case r.Below:a+=e.width/2;break;case r.Left:a+=e.width,n+=2*e.height/3;break;case r.Right:n+=2*e.height/3;break;case r.BelowLeft:a+=e.width,n+=e.height/2;break;case r.BelowRight:n+=e.height/2;break;case r.AboveLeft:a+=e.width,n+=e.height;break;case r.AboveRight:n+=e.height}return[[i.point.x,i.point.y],[a,n]]}e.cos45=Math.cos(45),e.sin45=Math.sin(45),e.getLabelRect=t,e.above=i,e.below=a,e.left=n,e.right=o,e.belowLeft=s,e.belowRight=l,e.aboveLeft=u,e.aboveRight=c,e.center=h,e.getLabelLeaderLineEndingPoint=p}(u=e.DataLabelPointPositioner||(e.DataLabelPointPositioner={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t=function(){function t(e){this.unit=e,this.sequence=[],this.min=new Date("9999-12-31T23:59:59.999"),this.max=new Date("0001-01-01T00:00:00.000")}return t.prototype.add=function(e){e<this.min&&(this.min=e),e>this.max&&(this.max=e),this.sequence.push(e)},t.prototype.extendToCover=function(e,i){for(var a=this.min;a>e;)a=t.addInterval(a,-this.interval,this.unit),this.sequence.splice(0,0,a);for(this.min=a,a=this.max;i>a;)a=t.addInterval(a,this.interval,this.unit),this.sequence.push(a);this.max=a},t.prototype.moveToCover=function(e,i){var a=t.getDelta(e,i,this.unit),r=Math.floor(a/this.interval);for(this.min=t.addInterval(this.min,r*this.interval,this.unit),this.sequence=[],this.sequence.push(this.min),this.max=this.min;this.max<i;)this.max=t.addInterval(this.max,this.interval,this.unit),this.sequence.push(this.max)},t.calculate=function(i,a,r,n){switch(n||(n=t.getIntervalUnit(i,a,r)),n){case e.DateTimeUnit.Year:return t.calculateYears(i,a,r);case e.DateTimeUnit.Month:return t.calculateMonths(i,a,r);case e.DateTimeUnit.Week:return t.calculateWeeks(i,a,r);case e.DateTimeUnit.Day:return t.calculateDays(i,a,r);case e.DateTimeUnit.Hour:return t.calculateHours(i,a,r);case e.DateTimeUnit.Minute:return t.calculateMinutes(i,a,r);case e.DateTimeUnit.Second:return t.calculateSeconds(i,a,r);case e.DateTimeUnit.Millisecond:return t.calculateMilliseconds(i,a,r)}},t.calculateYears=function(i,a,r){for(var n=e.NumericSequenceRange.calculateDataRange(i.getFullYear(),a.getFullYear(),!1),o=e.NumericSequence.calculate(n,r,0),s=o.sequence,l=new t(e.DateTimeUnit.Year),u=0;u<s.length;u++){var c=s[u];c&&l.add(new Date(c,0,1))}return l.interval=o.interval,l.intervalOffset=o.intervalOffset,l},t.calculateMonths=function(i,a,r){var n=i.getFullYear(),o=a.getFullYear(),s=i.getMonth(),l=12*(o-n)+a.getMonth(),u=new Date(n,0,1),c=e.NumericSequence.calculateUnits(s,l,r,[1,2,3,6,12]),h=t.fromNumericSequence(u,c,e.DateTimeUnit.Month);return h},t.calculateWeeks=function(i,a,r){var n=0,o=i.getDay(),s=(o-n+7)%7,l=i.getDate()-s,u=new Date(i.getFullYear(),i.getMonth(),l),c=0,h=e.Double.ceilWithPrecision(t.getDelta(u,a,e.DateTimeUnit.Week)),p=e.NumericSequence.calculateUnits(c,h,r,[1,2,4,8]),d=t.fromNumericSequence(u,p,e.DateTimeUnit.Week);return d},t.calculateDays=function(i,a,r){var n=new Date(i.getFullYear(),i.getMonth(),i.getDate()),o=0,s=e.Double.ceilWithPrecision(t.getDelta(i,a,e.DateTimeUnit.Day)),l=e.NumericSequence.calculateUnits(o,s,r,[1,2,7,14]),u=t.fromNumericSequence(n,l,e.DateTimeUnit.Day);return u},t.calculateHours=function(i,a,r){var n=new Date(i.getFullYear(),i.getMonth(),i.getDate()),o=e.Double.floorWithPrecision(t.getDelta(n,i,e.DateTimeUnit.Hour)),s=e.Double.ceilWithPrecision(t.getDelta(n,a,e.DateTimeUnit.Hour)),l=e.NumericSequence.calculateUnits(o,s,r,[1,2,3,6,12,24]),u=t.fromNumericSequence(n,l,e.DateTimeUnit.Hour);return u},t.calculateMinutes=function(i,a,r){var n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours()),o=e.Double.floorWithPrecision(t.getDelta(n,i,e.DateTimeUnit.Minute)),s=e.Double.ceilWithPrecision(t.getDelta(n,a,e.DateTimeUnit.Minute)),l=e.NumericSequence.calculateUnits(o,s,r,[1,2,5,10,15,30,60,120,180,360,720,1440]),u=t.fromNumericSequence(n,l,e.DateTimeUnit.Minute);return u},t.calculateSeconds=function(i,a,r){var n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes()),o=e.Double.floorWithPrecision(t.getDelta(n,i,e.DateTimeUnit.Second)),s=e.Double.ceilWithPrecision(t.getDelta(n,a,e.DateTimeUnit.Second)),l=e.NumericSequence.calculateUnits(o,s,r,[1,2,5,10,15,30,60,120,300,600,900,1800,3600]),u=t.fromNumericSequence(n,l,e.DateTimeUnit.Second);return u},t.calculateMilliseconds=function(i,a,r){var n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds()),o=t.getDelta(n,i,e.DateTimeUnit.Millisecond),s=t.getDelta(n,a,e.DateTimeUnit.Millisecond),l=e.NumericSequence.calculate(e.NumericSequenceRange.calculate(o,s),r,0),u=t.fromNumericSequence(n,l,e.DateTimeUnit.Millisecond);return u},t.fromNumericSequence=function(e,i,a){for(var r=new t(a),n=0;n<i.sequence.length;n++){var o=i.sequence[n],s=t.addInterval(e,o,a);r.add(s)}return r.interval=i.interval,r.intervalOffset=i.intervalOffset,r},t.addInterval=function(t,a,r){switch(a=Math.round(a),r){case e.DateTimeUnit.Year:return i.addYears(t,a);case e.DateTimeUnit.Month:return i.addMonths(t,a);case e.DateTimeUnit.Week:return i.addWeeks(t,a);case e.DateTimeUnit.Day:return i.addDays(t,a);case e.DateTimeUnit.Hour:return i.addHours(t,a);case e.DateTimeUnit.Minute:return i.addMinutes(t,a);case e.DateTimeUnit.Second:return i.addSeconds(t,a);case e.DateTimeUnit.Millisecond:return i.addMilliseconds(t,a)}},t.getDelta=function(t,i,a){var r=0;switch(a){case e.DateTimeUnit.Year:r=i.getFullYear()-t.getFullYear();break;case e.DateTimeUnit.Month:r=12*(i.getFullYear()-t.getFullYear())+i.getMonth()-t.getMonth();break;case e.DateTimeUnit.Week:r=(i.getTime()-t.getTime())/6048e5;break;case e.DateTimeUnit.Day:r=(i.getTime()-t.getTime())/864e5;break;case e.DateTimeUnit.Hour:r=(i.getTime()-t.getTime())/36e5;break;case e.DateTimeUnit.Minute:r=(i.getTime()-t.getTime())/6e4;break;case e.DateTimeUnit.Second:r=(i.getTime()-t.getTime())/1e3;break;case e.DateTimeUnit.Millisecond:r=i.getTime()-t.getTime()}return r},t.getIntervalUnit=function(i,a,r){r=Math.max(r,2);var n=t.getDelta(i,a,e.DateTimeUnit.Day);if(n>356&&n>=180*r)return e.DateTimeUnit.Year;if(n>60&&n>7*r)return e.DateTimeUnit.Month;if(n>14&&n>2*r)return e.DateTimeUnit.Week;var o=t.getDelta(i,a,e.DateTimeUnit.Hour);if(n>2&&o>12*r)return e.DateTimeUnit.Day;if(o>=24&&o>=r)return e.DateTimeUnit.Hour;var s=t.getDelta(i,a,e.DateTimeUnit.Minute);if(s>2&&s>=r)return e.DateTimeUnit.Minute;var l=t.getDelta(i,a,e.DateTimeUnit.Second);if(l>2&&l>=.8*r)return e.DateTimeUnit.Second;var u=t.getDelta(i,a,e.DateTimeUnit.Millisecond);if(u>0)return e.DateTimeUnit.Millisecond;var c=i;return 0!==c.getMilliseconds()?e.DateTimeUnit.Millisecond:0!==c.getSeconds()?e.DateTimeUnit.Second:0!==c.getMinutes()?e.DateTimeUnit.Minute:0!==c.getHours()?e.DateTimeUnit.Hour:1!==c.getDate()?e.DateTimeUnit.Day:0!==c.getMonth()?e.DateTimeUnit.Month:e.DateTimeUnit.Year},t.MIN_COUNT=1,t.MAX_COUNT=1e3,t}();e.DateTimeSequence=t;var i;!function(e){function t(e){return e%4===0&&e%100!==0||e%400===0}function i(e,i){return t(e)?p[i]:h[i]}function a(e,i){var a=e.getFullYear(),r=e.getMonth(),n=e.getDate(),o=2===r&&29===n,s=new Date(e.getTime());return a+=i,o&&!t(a)&&(n=28),s.setFullYear(a,r,n),s}function r(e,t){var a=e.getFullYear(),r=e.getMonth(),n=e.getDate(),o=new Date(e.getTime());return a+=(t-t%12)/12,r+=t%12,r>11&&(r%=12,a++),n=Math.min(n,i(a,r)),o.setFullYear(a,r,n),o}function n(e,t){return o(e,7*t)}function o(e,t){var i=e.getFullYear(),a=e.getMonth(),r=e.getDate(),n=new Date(e.getTime());return n.setFullYear(i,a,r+t),n}function s(e,t){return new Date(e.getTime()+36e5*t)}function l(e,t){return new Date(e.getTime()+6e4*t)}function u(e,t){return new Date(e.getTime()+1e3*t)}function c(e,t){return new Date(e.getTime()+t)}var h=[31,28,31,30,31,30,31,31,30,31,30,31],p=[31,29,31,30,31,30,31,31,30,31,30,31];e.addYears=a,e.addMonths=r,e.addWeeks=n,e.addDays=o,e.addHours=s,e.addMinutes=l,e.addSeconds=u,e.addMilliseconds=c}(i=e.DateUtils||(e.DateUtils={}))}(powerbi||(powerbi={}));var powerbi;!function(e){function t(t,a){for(var n=[],o=3;r>o;o++){var s=t(o);s&&i(n,e.Double.pow10(o),s.title,s.format,a)}return n}function i(e,t,i,a,r){if(i||a){var n=t;if(e.length>0){var o=e[e.length-1];r&&(n=r(t,o.value,n)),o.applicableRangeMax=n}var l=new s;l.value=t,l.applicableRangeMin=n,l.applicableRangeMax=1e3*n,l.title=i,l.labelFormat=a,e.push(l)}}var a=jsCommon.StringExtensions,r=24,n=1e15,o=1e-4,s=function(){function t(){}return t.prototype.project=function(e){return this.value?e/this.value:e},t.prototype.reverseProject=function(e){return this.value?e*this.value:e},t.prototype.isApplicableTo=function(t){t=Math.abs(t);var i=e.Double.getPrecision(t,3);return e.Double.greaterOrEqualWithPrecision(t,this.applicableRangeMin,i)&&e.Double.lessWithPrecision(t,this.applicableRangeMax,i)},t.prototype.isScaling=function(){return this.value>1},t}();e.DisplayUnit=s;var l=function(){function t(e){this.units=e?e:[]}return Object.defineProperty(t.prototype,"title",{get:function(){return this.displayUnit?this.displayUnit.title:void 0},enumerable:!0,configurable:!0}),t.prototype.update=function(e){void 0!==e&&(this.unitBaseValue=e,this.displayUnit=this.findApplicableDisplayUnit(e))},t.prototype.findApplicableDisplayUnit=function(e){for(var t=0,i=this.units;t<i.length;t++){var a=i[t];if(a.isApplicableTo(e))return a}},t.prototype.format=function(i,a,r,n){if(this.isFormatSupported(a)){if(this.hasScientitifcFormat(a))return this.formatHelper(i,i,"",a,r,n);if(this.isScalingUnit()&&this.shouldRespectScalingUnit(a)){var o=this.displayUnit.project(i),s=n?t.getNonScientificFormatWithPrecision(this.displayUnit.labelFormat,r):this.displayUnit.labelFormat;return this.formatHelper(i,o,s,a,r,n)}if(null!=r){if(n&&a&&t.NUMBER_FORMAT.test(a)){var l=t.getFormatWithPrecision(r),u=/^[a-zA-Z0-9- ]*$/.test(a)?/.0*/g:/0\.0*/g;a=a.replace(u,l);var c=this.getNumberOfDecimalsForFormatting(a,r);return this.formatHelper(i,i,"",a,c,n)}if(n){var s=t.getNonScientificFormatWithPrecision("{0}",r);return this.formatHelper(i,i,s,a,r,n)}return this.formatHelper(i,i,"",a,r,n)}}return a=this.removeFractionIfNecessary(a),e.formattingService.formatValue(i,a)},t.prototype.isFormatSupported=function(e){return!t.UNSUPPORTED_FORMATS.test(e)},t.prototype.getNumberOfDecimalsForFormatting=function(e,t){return t},t.prototype.isScalingUnit=function(){return this.displayUnit&&this.displayUnit.isScaling()},t.prototype.shouldRespectScalingUnit=function(e){return!0},t.prototype.formatHelper=function(i,a,r,n,o,s){var l=null!=o?e.Double.pow10(o):e.Double.getPrecision(i),u=e.Double.roundToPrecision(a,l);if(n&&!e.formattingService.isStandardNumberFormat(n))return e.formattingService.formatNumberWithCustomOverride(u,n,r);var c=s?t.getFormatWithPrecision(o):"G",h=e.formattingService.formatValue(u,c);return e.formattingService.format(r,[h])},t.getNonScientificFormatWithPrecision=function(e,i){if(!i||void 0===e)return e;var a="{0:"+t.getFormatWithPrecision(i)+"}";return e.replace("{0}",a)},t.getFormatWithPrecision=function(e){return null==e?"G":",0."+a.repeat("0",Math.abs(e))},t.prototype.formatSingleValue=function(t,i,a,r){return this.update(this.shouldUseValuePrecision(t)?e.Double.getPrecision(t,8):t),this.format(t,i,a,r)},t.prototype.shouldUseValuePrecision=function(e){if(0===this.units.length)return!0;for(var t=0,i=0;i<this.units.length;i++)if(this.units[i].isScaling()){t=this.units[i].applicableRangeMin;break}return Math.abs(e)<t},t.prototype.removeFractionIfNecessary=function(e){return e&&(Math.abs(this.unitBaseValue)>=.01&&(e=e.replace(/^(p\d*)$/i,"p0")),Math.abs(this.unitBaseValue)>=1&&(e=e.replace(/[#0]\.[#0]+$/,"0"),e=e.replace(/^(n\d*)$/i,"n0"),e=e.replace(/^(f\d*)$/i,"f0"),e=e.replace(/^(c\d*)$/i,"c0"))),e},t.prototype.isScientific=function(e){return-n>e||e>n||e>-o&&o>e&&0!==e},t.prototype.hasScientitifcFormat=function(e){return e&&-1!==e.toUpperCase().indexOf("E")},t.prototype.supportsScientificFormat=function(e){return e?t.SUPPORTED_SCIENTIFIC_FORMATS.test(e):!0},t.prototype.shouldFallbackToScientific=function(e,t){return!this.hasScientitifcFormat(t)&&this.supportsScientificFormat(t)&&this.isScientific(e)},t.UNSUPPORTED_FORMATS=/^(p\d*)|(.*\%)|(e\d*)$/i,t.NUMBER_FORMAT=/#|0/,t.SUPPORTED_SCIENTIFIC_FORMATS=/^((0*\.*\,*#*-*)*|g)*$/i,t.DEFAULT_SCIENTIFIC_FORMAT="0.######E+0",t.AUTO_DISPLAYUNIT_VALUE=0,t.NONE_DISPLAYUNIT_VALUE=1,t}();e.DisplayUnitSystem=l;var u=function(e){function t(){e.call(this,[])}return __extends(t,e),t}(l);e.NoDisplayUnitSystem=u;var c=function(e){function i(t){e.call(this,i.getUnits(t))}return __extends(i,e),i.prototype.format=function(t,i,r,n){return this.isFormatSupported(i)&&this.shouldFallbackToScientific(t,i)&&(i=n&&r?"0."+a.repeat("0",Math.abs(r))+"E+0":l.DEFAULT_SCIENTIFIC_FORMAT),e.prototype.format.call(this,t,i,r,n)},i.reset=function(){i.units=null},i.getUnits=function(e){return i.units||(i.units=t(e,function(e,t,i){return e-t>=1e3?e/10:i}),i.units[i.units.length-1].applicableRangeMax=1/0),i.units},i}(l);e.DefaultDisplayUnitSystem=c;var h=function(e){function i(t){e.call(this,i.getUnits(t))}return __extends(i,e),i.reset=function(){i.units=null},i.getUnits=function(e){return i.units||(i.units=t(e),i.units[i.units.length-1].applicableRangeMax=1/0),i.units},i.prototype.format=function(t,i,r,n){return this.isFormatSupported(i)&&this.shouldFallbackToScientific(t,i)&&(i=n&&r?"0."+a.repeat("0",Math.abs(r))+"E+0":l.DEFAULT_SCIENTIFIC_FORMAT),e.prototype.format.call(this,t,i,r,n)},i}(l);e.WholeUnitsDisplayUnitSystem=h;var p=function(e){function r(t){e.call(this,r.getUnits(t))}return __extends(r,e),r.prototype.isFormatSupported=function(e){return!r.UNSUPPORTED_FORMATS.test(e)},r.prototype.getNumberOfDecimalsForFormatting=function(e,t){return e.indexOf(r.PERCENTAGE_FORMAT)>=0?t-=2:void 0;
},r.prototype.shouldRespectScalingUnit=function(e){return!e||e.indexOf(r.PERCENTAGE_FORMAT)<0},r.getUnits=function(e){if(!r.units){var a=[],n=function(e,t,i){return-1===e&&e-t>=1e3?e/10:i},o=e(-1);i(a,l.AUTO_DISPLAYUNIT_VALUE,o.title,o.format,n),o=e(0),i(a,l.NONE_DISPLAYUNIT_VALUE,o.title,o.format,n),r.units=a.concat(t(e,n)),r.units[r.units.length-1].applicableRangeMax=1/0}return r.units},r.prototype.shouldFallbackToScientific=function(t,i){return this.displayUnit?this.displayUnit.value!==l.AUTO_DISPLAYUNIT_VALUE&&e.prototype.shouldFallbackToScientific.call(this,t,i):e.prototype.shouldFallbackToScientific.call(this,t,i)},r.prototype.format=function(t,i,r,n){return this.shouldFallbackToScientific(t,i)&&(i=n&&r?"0."+a.repeat("0",Math.abs(r))+"E+0":"0E+0"),e.prototype.format.call(this,t,i,r,n)},r.UNSUPPORTED_FORMATS=/^(e\d*)$/i,r.PERCENTAGE_FORMAT="%",r}(l);e.DataLabelsDisplayUnitSystem=p}(powerbi||(powerbi={}));var powerbi;!function(e){var t=function(){function t(){}return t.calculate=function(i,a,r,n,o,s){var l=new t;if(a=void 0===a?10:e.Double.ensureInRange(a,t.MIN_COUNT,t.MAX_COUNT),void 0===n&&(n=e.Double.MIN_EXP),void 0===o&&(o=!1),void 0===r&&(r=1),void 0===s&&(s=[1,2,5]),i.forcedSingleStop)return l.interval=i.getSize(),l.intervalOffset=l.interval-(i.forcedSingleStop-i.min),l.min=i.min,l.max=i.max,l.sequence=[i.forcedSingleStop],l;var u=0,c=0,h=9,p=r>0&&!i.hasFixedMin,d=r>0&&!i.hasFixedMax,g=i.getSize(),m=e.Double.log10(g),f=e.Double.log10(s[0]);m-=f;var y=e.Double.log10(a);m-=y,m=Math.max(m,n-f+1);var v=void 0;if(0!==u){var b=e.Double.pow10(m),C=e.Double.floorToPrecision(i.min,b),x=e.Double.ceilToPrecision(i.max,b),S=e.NumericSequenceRange.calculateFixedRange(C,x);S.shrinkByStep(i,u),c=S.min,h=S.max,v=Math.floor(S.getSize()/u)}else{var w;for(w=0;3>w;w++){for(var D=m+w,b=e.Double.pow10(D),C=e.Double.floorToPrecision(i.min,b),x=e.Double.ceilToPrecision(i.max,b),P=s.length,L=e.Double.pow10(D-1),_=0;P>_;_++){var N=s[_]*L,S=e.NumericSequenceRange.calculateFixedRange(C,x,o);if(S.shrinkByStep(i,N),p&&i.min===S.min&&r>=1&&(S.min-=N),d&&i.max===S.max&&r>=1&&(S.max+=N),v=e.Double.ceilWithPrecision(S.getSize()/N),a>=v||2===w&&_===P-1||1===a&&2===v&&(N>i.getSize()||i.min<0&&i.max>0&&2*N>=i.getSize())){u=N,c=S.min,h=S.max;break}}if(0!==u)break}}(v>32*a||v>t.MAX_COUNT)&&(v=Math.min(32*a,t.MAX_COUNT),u=(h-c)/v),l.min=c,l.max=h,l.interval=u,l.intervalOffset=c-i.min,l.maxAllowedMargin=r,l.canExtendMin=p,l.canExtendMax=d;var T=e.Double.getPrecision(u,0);l.precision=T;var V=[],M=e.Double.roundToPrecision(c,T);V.push(M);for(var _=0;v>_;_++)M=e.Double.roundToPrecision(M+u,T),V.push(M);return l.sequence=V,l.trimMinMax(i.min,i.max),l},t.calculateUnits=function(i,a,r,n){r=e.Double.ensureInRange(r,t.MIN_COUNT,t.MAX_COUNT),i===a&&(a=i+1);for(var o=0,s=0,l=0;l<n.length;l++){s=n[l];var u=e.Double.ceilWithPrecision(a/s),c=e.Double.floorWithPrecision(i/s);if(o=u-c,r>=o)break}var h=-i;h%=s;var p=new t;p.sequence=[];for(var d=i+h;p.sequence.push(d),!(d>=a);d+=s);return p.interval=s,p.intervalOffset=h,p.min=p.sequence[0],p.max=p.sequence[p.sequence.length-1],p},t.prototype.trimMinMax=function(e,t){var i=(e-this.min)/this.interval,a=(this.max-t)/this.interval,r=.001;(!this.canExtendMin||i>this.maxAllowedMargin&&i>r)&&(this.min=e),(!this.canExtendMax||a>this.maxAllowedMargin&&a>r)&&(this.max=t)},t.MIN_COUNT=1,t.MAX_COUNT=1e3,t}();e.NumericSequence=t}(powerbi||(powerbi={}));var powerbi;!function(e){var t=function(){function t(){}return t.prototype._ensureIncludeZero=function(){this.includeZero&&(this.min>0&&!this.hasFixedMin&&(this.min=0),this.max<0&&!this.hasFixedMax&&(this.max=0))},t.prototype._ensureNotEmpty=function(){if(this.min===this.max)if(this.min){var i,a=this.min,r=e.Double.log10(Math.abs(a));r>=0&&4>r?(i=.5,this.forcedSingleStop=a):(i=e.Double.pow10(r)/2,this.forcedSingleStop=null),this.min=a-i,this.max=a+i}else this.min=0,this.max=t.DEFAULT_MAX,this.hasFixedMin=!0,this.hasFixedMax=!0},t.prototype._ensureDirection=function(){if(this.min>this.max){var e=this.min;this.min=this.max,this.max=e}},t.prototype.getSize=function(){return this.max-this.min},t.prototype.shrinkByStep=function(e,t){var i=this.min/t,a=e.min/t,r=Math.floor(a-i);this.min+=r*t,i=this.max/t,a=e.max/t,r=Math.ceil(a-i),this.max+=r*t},t.calculate=function(a,r,n,o,s){var l=new t;return l.includeZero=s?!0:!1,l.hasDataRange=i.hasValue(a)&&i.hasValue(r),l.hasFixedMin=i.hasValue(n),l.hasFixedMax=i.hasValue(o),a=e.Double.ensureInRange(a,t.MIN_SUPPORTED_DOUBLE,t.MAX_SUPPORTED_DOUBLE),r=e.Double.ensureInRange(r,t.MIN_SUPPORTED_DOUBLE,t.MAX_SUPPORTED_DOUBLE),l.hasFixedMin&&l.hasFixedMax?(l.min=n,l.max=o):l.hasFixedMin?(l.min=n,l.max=r>n?r:n):l.hasFixedMax?(l.min=o>a?a:o,l.max=o):l.hasDataRange?(l.min=a,l.max=r):(l.min=0,l.max=0),l._ensureIncludeZero(),l._ensureNotEmpty(),l._ensureDirection(),0===l.min?l.hasFixedMin=!0:0===l.max&&(l.hasFixedMax=!0),l},t.calculateDataRange=function(e,a,r){return i.hasValue(e)&&i.hasValue(a)?t.calculate(e,a,null,null,r):t.calculateFixedRange(0,t.DEFAULT_MAX)},t.calculateFixedRange=function(e,i,a){var r=new t;return r.hasDataRange=!1,r.includeZero=a,r.min=e,r.max=i,r._ensureIncludeZero(),r._ensureNotEmpty(),r._ensureDirection(),r.hasFixedMin=!0,r.hasFixedMax=!0,r},t.DEFAULT_MAX=10,t.MIN_SUPPORTED_DOUBLE=-1e307,t.MAX_SUPPORTED_DOUBLE=1e307,t}();e.NumericSequenceRange=t;var i;!function(e){function t(e){return void 0!==e&&null!==e}e.hasValue=t}(i=e.ValueUtil||(e.ValueUtil={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){function i(e){var t=w[e];return t?D[t]||e:e}function a(e){var t=-1===e?"Auto":e.toString(),i=D["DisplayUnitSystem_E"+t+"_Title"],a=0>=e?"{0}":D["DisplayUnitSystem_E"+t+"_LabelFormat"];return i||a?{title:i,format:a}:void 0}function r(e){return D[e]}function n(t){return e.NumberFormat.getCustomFormatMetadata(t)}function o(t){P=t,e.DefaultDisplayUnitSystem.reset(),e.WholeUnitsDisplayUnitSystem.reset()}function s(e,t){void 0===t&&(t=!1);var i=t?P.beautify(e):e;return{format:function(e){return null==e?P["null"]:b(e,i)}}}function l(t){var i=t.allowFormatBeautification?P.beautify(t.format):t.format;if(d(t)){var a=p(t.displayUnitSystemType),r=!!t.formatSingleValues;a.update(Math.max(Math.abs(t.value||0),Math.abs(t.value2||0)));var n,o=null!=t.precision;return o?n=-t.precision:a.displayUnit&&a.displayUnit.value>1&&(n=-L),{format:function(t){var s=C(t,!0);return S.isNullOrUndefinedOrWhiteSpaceString(s)?(t&&!a.isScalingUnit()&&Math.abs(t)<_&&!o&&(t=e.Double.roundToPrecision(t,e.Double.pow10(e.Double.getPrecision(t)))),r?a.formatSingleValue(t,i,n,o):a.format(t,i,n,o)):s},displayUnit:a.displayUnit,options:t}}if(g(t.value,t.value2,t.tickCount)){var l=e.DateTimeSequence.getIntervalUnit(t.value,t.value2,t.tickCount);return{format:function(t){if(null==t)return P["null"];var i=e.formattingService.dateFormatString(l);return b(t,i)},options:t}}return s(i)}function u(e,t,i){return null==e?P["null"]:b(e,i?P.beautify(t):t)}function c(e,t){return t&&t.dateTime||!(e instanceof Date)?void 0:m(V,null,!1)}function h(e,t,i){var a=m(t,i),r=c(e,t.type);return r&&(a=r),b(e,a)}function p(t){if(null==t)return new e.DefaultDisplayUnitSystem(P.describe);switch(t){case e.DisplayUnitSystemType.Default:return new e.DefaultDisplayUnitSystem(P.describe);case e.DisplayUnitSystemType.WholeUnits:return new e.WholeUnitsDisplayUnitSystem(P.describe);case e.DisplayUnitSystemType.Verbose:return new e.NoDisplayUnitSystem;case e.DisplayUnitSystemType.DataLabels:return new e.DataLabelsDisplayUnitSystem(P.describe);default:return new e.DefaultDisplayUnitSystem(P.describe)}}function d(t){var i=t.value,a=t.value2,r=t.format;if(t.formatSingleValues&&r&&Math.abs(i)<N){var n=!e.NumberFormat.isStandardFormat(r);if(n){var o=e.NumberFormat.getCustomFormatMetadata(r,!0).precision;if(T>o)return!1}else if(e.Double.isInteger(i))return!1}return"number"==typeof i||"number"==typeof a?!0:void 0}function g(e,t,i){return e instanceof Date&&t instanceof Date&&void 0!==i&&null!==i}function m(t,i,a){if(t){if(i){var r=e.DataViewObjects.getValue(t.objects,i);if(r)return r}if(!a){var n=t.type;if(n){if(n.dateTime)return"d";if(n.integer)return"g";if(n.numeric)return"#,0.00"}}}}function f(e,t){var i;if(!e)return null;var a=e.length;if(a>0){i=e[0];for(var r=a-1,n=1,o=r;o>n;n++){var s=e[n];i=S.format(P.restatementComma,i,s)}if(a>1){var s=e[r];i=S.format(t,i,s)}}else i=null;return i}function y(e){return f(e,P.restatementCompoundAnd)}function v(e){return f(e,P.restatementCompoundOr)}function b(t,i){var a=C(t,!1);return S.isNullOrUndefinedOrWhiteSpaceString(a)?e.formattingService.formatValue(t,i):a}function C(e,t){return null==e&&t?P["null"]:e===!0?P["true"]:e===!1?P["false"]:"number"==typeof e&&isNaN(e)?P.NaN:e===Number.NEGATIVE_INFINITY?P.negativeInfinity:e===Number.POSITIVE_INFINITY?P.infinity:""}function x(e){var t=p(e);return t.units}var S=jsCommon.StringExtensions,w={"0.00 %;-0.00 %;0.00 %":"Percentage","0.0 %;-0.0 %;0.0 %":"Percentage1"},D={NullValue:"(Blank)",BooleanTrue:"True",BooleanFalse:"False",NaNValue:"NaN",InfinityValue:"+Infinity",NegativeInfinityValue:"-Infinity",RestatementComma:"{0}, {1}",RestatementCompoundAnd:"{0} and {1}",RestatementCompoundOr:"{0} or {1}",DisplayUnitSystem_EAuto_Title:"Auto",DisplayUnitSystem_E0_Title:"None",DisplayUnitSystem_E3_LabelFormat:"{0}K",DisplayUnitSystem_E3_Title:"Thousands",DisplayUnitSystem_E6_LabelFormat:"{0}M",DisplayUnitSystem_E6_Title:"Millions",DisplayUnitSystem_E9_LabelFormat:"{0}bn",DisplayUnitSystem_E9_Title:"Billions",DisplayUnitSystem_E12_LabelFormat:"{0}T",DisplayUnitSystem_E12_Title:"Trillions",Percentage:"#,0.##%",Percentage1:"#,0.#%",TableTotalLabel:"Total",Tooltip_HighlightedValueDisplayName:"Highlighted",Funnel_PercentOfFirst:"Percent of first",Funnel_PercentOfPrevious:"Percent of previous",Funnel_PercentOfFirst_Highlight:"Percent of first (highlight)",Funnel_PercentOfPrevious_Highlight:"Percent of previous (highlight)",GeotaggingString_Continent:"continent",GeotaggingString_Continents:"continents",GeotaggingString_Country:"country",GeotaggingString_Countries:"countries",GeotaggingString_State:"state",GeotaggingString_States:"states",GeotaggingString_City:"city",GeotaggingString_Cities:"cities",GeotaggingString_Town:"town",GeotaggingString_Towns:"towns",GeotaggingString_Province:"province",GeotaggingString_Provinces:"provinces",GeotaggingString_County:"county",GeotaggingString_Counties:"counties",GeotaggingString_Village:"village",GeotaggingString_Villages:"villages",GeotaggingString_Post:"post",GeotaggingString_Zip:"zip",GeotaggingString_Code:"code",GeotaggingString_Place:"place",GeotaggingString_Places:"places",GeotaggingString_Address:"address",GeotaggingString_Addresses:"addresses",GeotaggingString_Street:"street",GeotaggingString_Streets:"streets",GeotaggingString_Longitude:"longitude",GeotaggingString_Longitude_Short:"lon",GeotaggingString_Latitude:"latitude",GeotaggingString_Latitude_Short:"lat",GeotaggingString_PostalCode:"postal code",GeotaggingString_PostalCodes:"postal codes",GeotaggingString_ZipCode:"zip code",GeotaggingString_ZipCodes:"zip codes",GeotaggingString_Territory:"territory",GeotaggingString_Territories:"territories"};t.getLocalizedString=r;var P={"null":D.NullValue,"true":D.BooleanTrue,"false":D.BooleanFalse,NaN:D.NaNValue,infinity:D.InfinityValue,negativeInfinity:D.NegativeInfinityValue,beautify:function(e){return i(e)},describe:function(e){return a(e)},restatementComma:D.RestatementComma,restatementCompoundAnd:D.RestatementCompoundAnd,restatementCompoundOr:D.RestatementCompoundOr},L=2,_=1e3,N=1e4,T=2,V={displayName:"",type:e.ValueType.fromPrimitiveTypeAndCategory(e.PrimitiveType.DateTime)};t.getFormatMetadata=n,t.setLocaleOptions=o,t.createDefaultFormatter=s,t.create=l,t.format=u,t.formatValueColumn=h,t.getFormatString=m,t.formatListAnd=y,t.formatListOr=v,t.getDisplayUnits=x}(i=t.valueFormatter||(t.valueFormatter={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(){return new i}e.createColorAllocatorFactory=t;var i=function(){function e(){}return e.prototype.linearGradient2=function(e){return new a(e)},e.prototype.linearGradient3=function(e,t){return t?new n(e):new r(e)},e}(),a=function(){function e(e){this.options=e;var t=e.min,i=e.max;this.scale=d3.scale.linear().domain([t.value,i.value]).range([t.color,i.color]).clamp(!0)}return e.prototype.color=function(e){var t=this.options.min,i=this.options.max;return t.value===i.value?e>=i.value?i.color:t.color:this.scale(e)},e}(),r=function(){function e(e){this.options=e;var t=e.min,i=e.mid,a=e.max;this.scale=d3.scale.linear().domain([t.value,i.value,a.value]).range([t.color,i.color,a.color]).clamp(!0)}return e.prototype.color=function(e){var t=this.options.min,i=this.options.mid,a=this.options.max;return a.value===i.value||i.value===t.value||a.value===i.value&&a.value===t.value?e>=a.value?a.color:e>=i.value?i.color:t.color:this.scale(e)},e}(),n=function(){function e(e){this.options=e;var t=e.min,i=e.mid,a=e.max;this.scale1=d3.scale.linear().domain([t.value,i.value]).range([t.color,i.color]).clamp(!0),this.scale2=d3.scale.linear().domain([i.value,a.value]).range([i.color,a.color]).clamp(!0)}return e.prototype.color=function(e){var t=this.options.min,i=this.options.mid,a=this.options.max;return a.value===i.value||i.value===t.value||a.value===i.value&&a.value===t.value?e>=a.value?a.color:e>=i.value?i.color:t.color:e<=i.value?this.scale1(e):this.scale2(e)},e}()}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i={"0.00 %;-0.00 %;0.00 %":"Percentage","0.0 %;-0.0 %;0.0 %":"Percentage1"},a={NullValue:"(Blank)",BooleanTrue:"True",BooleanFalse:"False",NaNValue:"NaN",InfinityValue:"+Infinity",NegativeInfinityValue:"-Infinity",Restatement_Comma:"{0}, {1}",Restatement_CompoundAnd:"{0} and {1}",DisplayUnitSystem_EAuto_Title:"Auto",DisplayUnitSystem_E0_Title:"None",DisplayUnitSystem_E3_LabelFormat:"{0}K",DisplayUnitSystem_E3_Title:"Thousands",DisplayUnitSystem_E6_LabelFormat:"{0}M",DisplayUnitSystem_E6_Title:"Millions",DisplayUnitSystem_E9_LabelFormat:"{0}bn",DisplayUnitSystem_E9_Title:"Billions",DisplayUnitSystem_E12_LabelFormat:"{0}T",DisplayUnitSystem_E12_Title:"Trillions",Percentage:"#,0.##%",Percentage1:"#,0.#%",RichTextbox_Link_DefaultText:"Link",TableTotalLabel:"Total",Tooltip_HighlightedValueDisplayName:"Highlighted",Funnel_PercentOfFirst:"Percent of first",Funnel_PercentOfPrevious:"Percent of previous",Funnel_PercentOfFirst_Highlight:"Percent of first (highlight)",Funnel_PercentOfPrevious_Highlight:"Percent of previous (highlight)",GeotaggingString_Continent:"continent",GeotaggingString_Continents:"continents",GeotaggingString_Country:"country",GeotaggingString_Countries:"countries",GeotaggingString_State:"state",GeotaggingString_States:"states",GeotaggingString_City:"city",GeotaggingString_Cities:"cities",GeotaggingString_Town:"town",GeotaggingString_Towns:"towns",GeotaggingString_Province:"province",GeotaggingString_Provinces:"provinces",GeotaggingString_County:"county",GeotaggingString_Counties:"counties",GeotaggingString_Village:"village",GeotaggingString_Villages:"villages",GeotaggingString_Post:"post",GeotaggingString_Zip:"zip",GeotaggingString_Code:"code",GeotaggingString_Place:"place",GeotaggingString_Places:"places",GeotaggingString_Address:"address",GeotaggingString_Addresses:"addresses",GeotaggingString_Street:"street",GeotaggingString_Streets:"streets",GeotaggingString_Longitude:"longitude",GeotaggingString_Longitude_Short:"lon",GeotaggingString_Latitude:"latitude",GeotaggingString_Latitude_Short:"lat",GeotaggingString_PostalCode:"postal code",GeotaggingString_PostalCodes:"postal codes",GeotaggingString_ZipCode:"zip code",GeotaggingString_ZipCodes:"zip codes",GeotaggingString_Territory:"territory",GeotaggingString_Territories:"territories",Waterfall_IncreaseLabel:"Increase",Waterfall_DecreaseLabel:"Decrease",Waterfall_TotalLabel:"Total",Slicer_SelectAll:"Select All"},r=function(){function r(){}return r.initialize=function(){t.valueFormatter.setLocaleOptions(r.createLocaleOptions()),t.TooltipManager.setLocalizedStrings(r.createTooltipLocaleOptions())},r.createLocaleOptions=function(){return{"null":a.NullValue,"true":a.BooleanTrue,"false":a.BooleanFalse,NaN:a.NaNValue,infinity:a.InfinityValue,negativeInfinity:a.NegativeInfinityValue,beautify:function(e){return r.beautify(e)},describe:function(e){return r.describeUnit(e)},restatementComma:a.Restatement_Comma,restatementCompoundAnd:a.Restatement_CompoundAnd,restatementCompoundOr:a.Restatement_CompoundOr}},r.createTooltipLocaleOptions=function(){return{highlightedValueDisplayName:a.Tooltip_HighlightedValueDisplayName}},r.prototype.getLocalizedString=function(e){return a[e]},r.prototype.onDragStart=function(){},r.prototype.canSelect=function(){return!1},r.prototype.onSelect=function(){},r.prototype.loadMoreData=function(){},r.prototype.persistProperties=function(e){},r.prototype.onCustomSort=function(e){},r.prototype.getViewMode=function(){return e.ViewMode.View},r.prototype.setWarnings=function(e){},r.prototype.setToolbar=function(e){},r.prototype.shouldRetainSelection=function(){return!1},r.prototype.geocoder=function(){return t.services.createGeocoder()},r.prototype.promiseFactory=function(){return e.createJQueryPromiseFactory()},r.prototype.filterAnalyzer=function(e,t){var i=this;return{isNotFilter:function(){return!1},selectedIdentities:function(){return[]},hasDefaultFilterOverride:function(){return i.promiseFactory().resolve(!1)}}},r.beautify=function(e){var t=i[e];return t?a[t]||e:e},r.describeUnit=function(e){var t=-1===e?"Auto":e.toString(),i=a["DisplayUnitSystem_E"+t+"_Title"],r=0>=e?"{0}":a["DisplayUnitSystem_E"+t+"_LabelFormat"];return i||r?{title:i,format:r}:void 0},r}();t.DefaultVisualHostServices=r,t.defaultVisualHostServices=new r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(e){return new s(e)}function a(e){return e.append("rect").classed("clearCatcher",!0).attr({width:"100%",height:"100%"})}function r(t,i,a){return null!=i.objects&&i.objects[a]&&e.DataViewObjects.getValue(i.objects[a],t)}function n(e){for(var t=0,i=e.length;i>t;t++)if(e[t].selected)return!0;return!1}var o=jsCommon.ArrayExtensions;t.createInteractivityService=i,t.appendClearCatcher=a,t.isCategoryColumnSelected=r,t.dataHasSelection=n;var s=function(){function t(e){this.renderSelectionInVisual=_.noop,this.renderSelectionInLegend=_.noop,this.renderSelectionInLabels=_.noop,this.selectedIds=[],this.isInvertedSelectionMode=!1,this.hostService=e}return t.prototype.bind=function(e,t,i,a){var r=this;a&&a.overrideSelectionFromData&&this.takeSelectionStateFromDataPoints(e),a?(a.isLegend?(this.selectableLegendDataPoints=e,this.renderSelectionInLegend=function(){return t.renderSelection(r.legendHasSelection())}):a.isLabels?(this.selectableLabelsDataPoints=e,this.renderSelectionInLabels=function(){return t.renderSelection(r.labelsHasSelection())}):(this.selectableDataPoints=e,this.renderSelectionInVisual=function(){return t.renderSelection(r.hasSelection())}),null!=a.hasSelectionOverride&&(this.hasSelectionOverride=a.hasSelectionOverride),a.slicerDefaultValueHandler&&(this.slicerDefaultValueHandler=a.slicerDefaultValueHandler)):(this.selectableDataPoints=e,this.renderSelectionInVisual=function(){return t.renderSelection(r.hasSelection())}),this.behavior=t,t.bindEvents(i,this),this.syncSelectionState()},t.prototype.clearSelection=function(){this.slicerDefaultValueHandler&&this.slicerDefaultValueHandler.getDefaultValue()&&this.useDefaultValue||(this.hasSelectionOverride=void 0,o.clear(this.selectedIds),this.isInvertedSelectionMode=!1,this.applyToAllSelectableDataPoints(function(e){return e.selected=!1}),this.renderAll())},t.prototype.applySelectionStateToData=function(e){for(var i=0;i<e.length;i++){var a=e[i];a.selected=t.checkDatapointAgainstSelectedIds(a,this.selectedIds)}return this.hasSelection()},t.prototype.hasSelection=function(){return this.selectedIds.length>0},t.prototype.legendHasSelection=function(){return this.selectableLegendDataPoints?n(this.selectableLegendDataPoints):!1},t.prototype.labelsHasSelection=function(){return this.selectableLabelsDataPoints?n(this.selectableLabelsDataPoints):!1},t.prototype.isSelectionModeInverted=function(){return this.isInvertedSelectionMode},t.prototype.setSelectionModeInverted=function(e){this.isInvertedSelectionMode=e},t.prototype.handleSelection=function(e,t){this.useDefaultValue=!1,this.select(e,t),this.sendSelectionToHost(),this.renderAll()},t.prototype.handleClearSelection=function(){this.useDefaultValue=!0,this.clearSelection(),this.sendSelectionToHost()},t.prototype.toggleSelectionModeInversion=function(){return this.useDefaultValue=!1,this.isInvertedSelectionMode=!this.isInvertedSelectionMode,o.clear(this.selectedIds),this.applyToAllSelectableDataPoints(function(e){return e.selected=!1}),this.sendSelectionToHost(),this.isInvertedSelectionMode?this.syncSelectionStateInverted():this.syncSelectionState(),this.renderAll(),this.isInvertedSelectionMode},t.prototype.persistSelectionFilter=function(e){this.hostService.persistProperties(this.createChangeForFilterProperty(e))},t.prototype.setDefaultValueMode=function(e){this.useDefaultValue=e},t.prototype.isDefaultValueEnabled=function(){return this.useDefaultValue},t.prototype.renderAll=function(){this.renderSelectionInVisual(),this.renderSelectionInLegend(),this.renderSelectionInLabels()},t.prototype.select=function(e,t){if(this.isInvertedSelectionMode)return this.selectInverted(e,t);e.identity.highlight&&(e=_.find(this.selectableDataPoints,function(t){return!t.identity.highlight&&e.identity.includes(t.identity,!0)}));var i=e.identity;if(i){var a=!e.selected||!t&&this.selectedIds.length>1;t&&(a?(e.selected=!0,this.selectedIds.push(i)):(e.selected=!1,this.removeId(i))),t&&this.hostService.canSelect({data:this.selectedIds.map(function(e){return e.getSelector()})})||(this.clearSelection(),a&&(e.selected=!0,this.selectedIds.push(i))),this.syncSelectionState()}},t.prototype.selectInverted=function(e,t){var i=e.selected,a=e.identity;e.selected=!i,i?this.removeId(a):this.selectedIds.push(a),this.syncSelectionStateInverted()},t.prototype.removeId=function(e){for(var t=this.selectedIds,i=t.length-1;i>-1;i--){var a=t[i];e.includes(a)&&t.splice(i,1)}},t.prototype.createChangeForFilterProperty=function(t){var i={},a=[];this.selectedIds.length>0&&(a=_.chain(this.selectedIds).filter(function(e){return e.hasIdentity()}).map(function(e){return e.getSelector()}).value());var r={objectName:t.objectName,selector:void 0,properties:i},n=e.data.Selector.filterFromSelector(a,this.isInvertedSelectionMode);return this.slicerDefaultValueHandler&&this.slicerDefaultValueHandler.getDefaultValue()&&(this.useDefaultValue===!0?n=e.data.SemanticFilter.getDefaultValueFilter(this.slicerDefaultValueHandler.getIdentityFields()):_.isEmpty(a)&&(n=e.data.SemanticFilter.getAnyValueFilter(this.slicerDefaultValueHandler.getIdentityFields()))),null==n?(i[t.propertyName]={},{remove:[r]}):(i[t.propertyName]=n,{merge:[r]})},t.prototype.sendSelectionToHost=function(){var e=this.hostService;if(e.onSelect){var t={data:this.selectedIds.filter(function(e){return e.hasIdentity()}).map(function(e){return e.getSelector()})},i=this.selectedIds.filter(function(e){return e.getSelectorsByColumn()&&e.hasIdentity()}).map(function(e){return e.getSelectorsByColumn()});i&&i.length>0&&(t.data2=i),e.onSelect(t)}},t.prototype.takeSelectionStateFromDataPoints=function(e){var t=this.selectedIds;o.clear(t);for(var i=0;i<e.length;i++){var a=e[i];a.selected&&t.push(a.identity)}},t.prototype.syncSelectionState=function(){if(this.isInvertedSelectionMode)return this.syncSelectionStateInverted();var e=this.selectedIds,i=this.selectableDataPoints,a=this.selectableLegendDataPoints,r=this.selectableLabelsDataPoints,n=!1;if(i||a){if(i&&t.updateSelectableDataPointsBySelectedIds(i,e)&&(n=!0),a&&t.updateSelectableDataPointsBySelectedIds(a,e)&&(n=!0),r)for(var o,s=0,l=r.length;l>s;s++)o=r[s],e.some(function(e){return e.includes(o.identity)})?o.selected=!0:o.selected=!1;!n&&e.length>0&&(this.clearSelection(),this.sendSelectionToHost())}},t.prototype.syncSelectionStateInverted=function(){var e=this.selectedIds,t=this.selectableDataPoints;if(t)if(0===e.length)for(var i=0;i<t.length;i++){var a=t[i];a.selected=!1}else for(var r=0;r<t.length;r++){var n=t[r];e.some(function(e){return e.includes(n.identity)})?n.selected=!0:n.selected&&(n.selected=!1)}},t.prototype.applyToAllSelectableDataPoints=function(e){var t=this.selectableDataPoints,i=this.selectableLegendDataPoints,a=this.selectableLabelsDataPoints;if(t)for(var r=0;r<t.length;r++){var n=t[r];e(n)}if(i)for(var o=0;o<i.length;o++){var n=i[o];e(n)}if(a)for(var s=0;s<a.length;s++){var n=a[s];e(n)}},t.updateSelectableDataPointsBySelectedIds=function(e,i){for(var a=!1,r=0;r<e.length;r++){var n=e[r];n.selected=t.checkDatapointAgainstSelectedIds(n,i),n.selected&&(a=!0)}return a},t.checkDatapointAgainstSelectedIds=function(e,t){return t.some(function(t){return t.includes(e.identity)})},t}();t.InteractivityService=s}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function i(){return{geocode:o,geocodeBoundary:s}}function a(e){return t.CategoryTypeArray.indexOf(e)>-1}function r(e){switch(e.toLowerCase()){case"fr":return"fr-FR";default:return e}}function n(e){var t=b?b.getCoordinates(e):void 0,i=$.Deferred();return t?i.resolve(t):(m.push({query:e,deferred:i}),l()),i}function o(e,t){return void 0===t&&(t=""),n(new C(e,t))}function s(e,t,i,a,r){return void 0===i&&(i=""),void 0===a&&(a=2),void 0===r&&(r=3),n(new x(e,t,i,a,r))}function l(e){for(void 0===e&&(e=0),f-=e;f<g.MaxBingRequest&&0!==m.length;)f++,u(m.shift())}function u(e){var i=b?b.getCoordinates(e.query):void 0;if(i)return setTimeout(function(){return l(1)}),void e.deferred.resolve(i);var a={type:"GET",dataType:"jsonp",jsonp:"jsonp"},r=e.query.getUrl();r||c(e,new Error("Unsupported query. "+e.query.query)),t.BingAjaxCall(r,a).then(function(t){try{if(e.query instanceof x){var i=t;if(i&&i.d&&Array.isArray(i.d.results)&&i.d.results.length>0){var a=i.d.results[0],r=a.Primitives;if(r&&r.length>0){var n={latitude:e.query.latitude,longitude:e.query.longitude,locations:[]};r.sort(function(e,t){return e.Shape.length<t.Shape.length?1:e.Shape.length>t.Shape.length?-1:0});for(var o=Math.min(r.length,e.query.maxGeoData),s=0;o>s;s++)for(var l=r[s].Shape,u=l.split(","),p=1;p<u.length;p++)n.locations.push({nativeBing:u[p]});c(e,null,n)}else c(e,new Error("Geocode result is empty."))}else c(e,new Error("Geocode result is empty."))}else{var d=t.resourceSets[0].resources;if(Array.isArray(d)&&d.length>0){var g=h(d,e.query),m=d[g].point.coordinates,n={latitude:parseFloat(m[0]),longitude:parseFloat(m[1])};c(e,null,n)}else c(e,new Error("Geocode result is empty."))}}catch(f){c(e,f)}},function(t){c(e,t)})}function c(e,t,i){void 0===i&&(i=null),S=setTimeout(function(){return l(1)},g.UseDoubleArrayGeodataResult?g.UseDoubleArrayDequeueTimeout:0),t?e.deferred.reject(t):(b&&b.registerCoordinates(e.query,i),e.deferred.resolve(i))}function h(e,t){var i=t.query.toLowerCase();if(2===i.length&&t.category===d.CountryRegion)for(var a=0;a<e.length;a++){var r=e[a].address&&e[a].address.countryRegionIso2;if(r&&i===r.toLowerCase())return a}for(var n=t.getBingEntity().toLowerCase(),a=0;a<e.length;a++){var o=(e[a].entityType||"").toLowerCase();if(o===n)return a}return 0}function p(){m=[],f=0,y=null,clearTimeout(S)}var d=e.MapUtil.CategoryTypes,g=e.MapUtil.Settings;t.createGeocoder=i,t.safeCharacters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-",t.BingAjaxCall=$.ajax,t.CategoryTypeArray=["Address","City","Continent","Country","County","Longitude","Latitude","Place","PostalCode","StateOrProvince"],t.isCategoryType=a,t.BingEntities={Continent:"Continent",Sovereign:"Sovereign",CountryRegion:"CountryRegion",AdminDivision1:"AdminDivision1",AdminDivision2:"AdminDivision2",PopulatedPlace:"PopulatedPlace",Postcode:"Postcode",Postcode1:"Postcode1",Neighborhood:"Neighborhood",Address:"Address"};var m,f,y,v,b,C=function(){function e(e,i){this.query=null!=e?e:"",this.category=null!=i?i:"",this.key=(this.query+"/"+this.category).toLowerCase(),this.cacheHits=0,b||(b=t.createGeocodingCache(g.MaxCacheSize,g.MaxCacheSizeOverflow))}return e.prototype.incrementCacheHit=function(){this.cacheHits++},e.prototype.getCacheHits=function(){return this.cacheHits},e.prototype.getBingEntity=function(){var e=this.category.toLowerCase();return y||(y={},y[d.Continent.toLowerCase()]=t.BingEntities.Continent,y[d.CountryRegion.toLowerCase()]=t.BingEntities.Sovereign,y[d.StateOrProvince.toLowerCase()]=t.BingEntities.AdminDivision1,y[d.County.toLowerCase()]=t.BingEntities.AdminDivision2,y[d.City.toLowerCase()]=t.BingEntities.PopulatedPlace,y[d.PostalCode.toLowerCase()]=t.BingEntities.Postcode,y[d.Address.toLowerCase()]=t.BingEntities.Address),y[e]||""},e.prototype.getUrl=function(){var e=g.BingUrl+"key="+g.BingKey,i=this.getBingEntity(),a=!1;if(i)if(i===t.BingEntities.Postcode)e+="&includeEntityTypes=Postcode,Postcode1,Postcode2,Postcode3,Postcode4";else if(-1!==this.query.indexOf(",")||i!==t.BingEntities.AdminDivision1&&i!==t.BingEntities.AdminDivision2)e+="&includeEntityTypes="+i;else{a=!0;try{e+="&adminDistrict="+decodeURIComponent(this.query)}catch(n){return null}}if(!a)try{e+="&q="+decodeURIComponent(this.query)}catch(n){return null}var o=navigator.userLanguage||navigator.language;return o=r(o),o&&(e+="&c="+o),e+="&maxRes=20",2===this.query.length&&this.category===d.CountryRegion&&(e+="&include=ciso2"),e},e}();t.GeocodeQuery=C;var x=function(e){function i(t,i,a,r,n){void 0===n&&(n=3),e.call(this,[t,i,r,n].join(","),a),this.latitude=t,this.longitude=i,this.levelOfDetail=r,this.maxGeoData=n}return __extends(i,e),i.prototype.getBingEntity=function(){var e=this.category.toLowerCase();return v||(v={},v[d.CountryRegion.toLowerCase()]=t.BingEntities.CountryRegion,v[d.StateOrProvince.toLowerCase()]=t.BingEntities.AdminDivision1,v[d.County.toLowerCase()]=t.BingEntities.AdminDivision2,v[d.City.toLowerCase()]=t.BingEntities.PopulatedPlace,v[d.PostalCode.toLowerCase()]=t.BingEntities.Postcode1),v[e]||""},i.prototype.getUrl=function(){var e=g.BingUrlGeodata+"key="+g.BingKey+"&$format=json",t=this.getBingEntity();if(!t)return null;var i=navigator.userLanguage||navigator.language;i=r(i);var a=i.split("-"),n=[this.latitude,this.longitude,this.levelOfDetail,"'"+t+"'",1,0,"'"+i+"'"];return a.length>1&&n.push("'"+a[1]+"'"),e+"&SpatialFilter=GetBoundary("+n.join(", ")+")"},i}(C);t.GeocodeBoundaryQuery=x,t.geocodeCore=n,t.geocode=o,t.geocodeBoundary=s;var S;t.reset=p,p()}(t=e.services||(e.services={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){function i(e,t){return new a(e,t)}t.createGeocodingCache=i;var a=function(){function t(e,t){this.geocodeCache={},this.maxCacheSize=e,this.maxCacheSizeOverflow=t}return t.prototype.getCoordinates=function(t){var i=this.geocodeCache[t.key];return i?(i.query.incrementCacheHit(),i.coordinate):(i=e.localStorageService.getData(t.key),i?(this.registerInMemory(t,i.coordinate),i.coordinate):void 0)},t.prototype.registerCoordinates=function(e,t){this.registerInMemory(e,t),this.registerInStorage(e,t)},t.prototype.registerInMemory=function(e,t){var i=this.geocodeCache,a=Object.keys(i),r=a.length,n=this.maxCacheSize;if(a.length>n+this.maxCacheSizeOverflow)for(var o=a.sort(function(e,t){var a=i[e],r=i[t],n=a?a.query.getCacheHits():0,o=r?r.query.getCacheHits():0;return o>n?-1:n>o?1:0}),s=0;r-n>s;s++)i[o[s]]=void 0;i[e.key]={query:e,coordinate:t}},t.prototype.registerInStorage=function(t,i){e.localStorageService.setData(t.key,{query:t,coordinate:i})},t}()}(i=t.services||(t.services={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){function a(t,i,a,r){
var n=e.Prototype.inherit(i);n.create=a,r&&r(n),t[i.name]=n}function r(i,r){var n=!0,s=r&&r.lineChartLabelDensityEnabled;a(i,e.visuals.plugins.barChart,function(){return new t.CartesianChart({chartType:6,tooltipsEnabled:n})}),a(i,e.visuals.plugins.clusteredBarChart,function(){return new t.CartesianChart({chartType:5,tooltipsEnabled:n})}),a(i,e.visuals.plugins.clusteredColumnChart,function(){return new t.CartesianChart({chartType:3,tooltipsEnabled:n})}),a(i,e.visuals.plugins.columnChart,function(){return new t.CartesianChart({chartType:4,tooltipsEnabled:n})}),a(i,e.visuals.plugins.dataDotClusteredColumnComboChart,function(){return new t.CartesianChart({chartType:15,tooltipsEnabled:n})}),a(i,e.visuals.plugins.dataDotStackedColumnComboChart,function(){return new t.CartesianChart({chartType:16,tooltipsEnabled:n})}),a(i,e.visuals.plugins.donutChart,function(){return new t.DonutChart({tooltipsEnabled:n})}),a(i,e.visuals.plugins.funnel,function(){return new t.FunnelChart({tooltipsEnabled:n})}),a(i,e.visuals.plugins.gauge,function(){return new t.Gauge({tooltipsEnabled:n})}),a(i,e.visuals.plugins.hundredPercentStackedBarChart,function(){return new t.CartesianChart({chartType:7,tooltipsEnabled:n})}),a(i,e.visuals.plugins.hundredPercentStackedColumnChart,function(){return new t.CartesianChart({chartType:8,tooltipsEnabled:n})}),a(i,e.visuals.plugins.lineChart,function(){return new t.CartesianChart({chartType:0,tooltipsEnabled:n,lineChartLabelDensityEnabled:s})}),a(i,e.visuals.plugins.areaChart,function(){return new t.CartesianChart({chartType:1,tooltipsEnabled:n,lineChartLabelDensityEnabled:s})}),a(i,e.visuals.plugins.stackedAreaChart,function(){return new t.CartesianChart({chartType:2,tooltipsEnabled:n,lineChartLabelDensityEnabled:s})}),a(i,e.visuals.plugins.lineClusteredColumnComboChart,function(){return new t.CartesianChart({chartType:13,tooltipsEnabled:n})}),a(i,e.visuals.plugins.lineStackedColumnComboChart,function(){return new t.CartesianChart({chartType:14,tooltipsEnabled:n})}),a(i,e.visuals.plugins.pieChart,function(){return new t.DonutChart({sliceWidthRatio:0,tooltipsEnabled:n})}),a(i,o(e.visuals.plugins.scatterChart),function(){return new t.CartesianChart({chartType:9,tooltipsEnabled:n})}),a(i,e.visuals.plugins.treemap,function(){return new t.Treemap({isScrollable:!1,tooltipsEnabled:n})}),a(i,e.visuals.plugins.waterfallChart,function(){return new t.CartesianChart({chartType:12,tooltipsEnabled:n})}),a(i,e.visuals.plugins.map,function(){return new t.Map({tooltipsEnabled:n,disableZooming:!0,disablePanning:!0})}),a(i,e.visuals.plugins.filledMap,function(){return new t.Map({filledMap:!0,tooltipsEnabled:n,disableZooming:!0,disablePanning:!0})})}function n(i,r){var n=r?r.categoricalPivotEnabled:!1,s=r?r.seriesLabelFormattingEnabled:!1,l=r?r.scriptVisualEnabled:!1,u=r?r.isLabelInteractivityEnabled:!1,c=r?r.matrixFormattingEnabled:!1,h=r?r.filledMapDataLabelsEnabled:!1,p=r?r.referenceLinesEnabled:!1,d=r?r.backgroundImageEnabled:!1,g=r?r.lineChartLabelDensityEnabled:!1;a(i,e.visuals.plugins.barChart,function(){return new t.CartesianChart({chartType:6,isScrollable:!0,animator:new t.WebColumnChartAnimator,tooltipsEnabled:!0,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior]),seriesLabelFormattingEnabled:s,isLabelInteractivityEnabled:u,referenceLinesEnabled:p,backgroundImageEnabled:d})}),a(i,e.visuals.plugins.card,function(){return new t.Card({isScrollable:!0,animator:new t.BaseAnimator})}),a(i,e.visuals.plugins.clusteredBarChart,function(){return new t.CartesianChart({chartType:5,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior]),seriesLabelFormattingEnabled:s,isLabelInteractivityEnabled:u,referenceLinesEnabled:p,backgroundImageEnabled:d})}),a(i,e.visuals.plugins.clusteredColumnChart,function(){return new t.CartesianChart({chartType:3,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior]),seriesLabelFormattingEnabled:s,isLabelInteractivityEnabled:u,referenceLinesEnabled:p,backgroundImageEnabled:d})}),a(i,e.visuals.plugins.columnChart,function(){return new t.CartesianChart({chartType:4,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior]),seriesLabelFormattingEnabled:s,isLabelInteractivityEnabled:u,referenceLinesEnabled:p,backgroundImageEnabled:d})}),a(i,e.visuals.plugins.dataDotClusteredColumnComboChart,function(){return new t.CartesianChart({chartType:15,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior,new t.DataDotChartWebBehavior]),isLabelInteractivityEnabled:u})}),a(i,e.visuals.plugins.dataDotStackedColumnComboChart,function(){return new t.CartesianChart({chartType:16,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior,new t.DataDotChartWebBehavior]),isLabelInteractivityEnabled:u})}),a(i,e.visuals.plugins.donutChart,function(){return new t.DonutChart({animator:new t.WebDonutChartAnimator,isScrollable:!0,tooltipsEnabled:!0,behavior:new t.DonutChartWebBehavior})}),a(i,e.visuals.plugins.funnel,function(){return new t.FunnelChart({animator:new t.WebFunnelAnimator,behavior:new t.FunnelWebBehavior,tooltipsEnabled:!0})}),a(i,e.visuals.plugins.gauge,function(){return new t.Gauge({animator:new t.BaseAnimator,tooltipsEnabled:!0})}),a(i,e.visuals.plugins.hundredPercentStackedBarChart,function(){return new t.CartesianChart({chartType:7,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior]),seriesLabelFormattingEnabled:s,isLabelInteractivityEnabled:u,referenceLinesEnabled:p,backgroundImageEnabled:d})}),a(i,e.visuals.plugins.hundredPercentStackedColumnChart,function(){return new t.CartesianChart({chartType:8,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior]),seriesLabelFormattingEnabled:s,isLabelInteractivityEnabled:u,referenceLinesEnabled:p,backgroundImageEnabled:d})}),a(i,e.visuals.plugins.lineChart,function(){return new t.CartesianChart({chartType:0,isScrollable:!0,tooltipsEnabled:!0,animator:new t.BaseAnimator,behavior:new t.CartesianChartBehavior([new t.LineChartWebBehavior]),seriesLabelFormattingEnabled:s,isLabelInteractivityEnabled:u,referenceLinesEnabled:p,backgroundImageEnabled:d,lineChartLabelDensityEnabled:g})}),a(i,e.visuals.plugins.areaChart,function(){return new t.CartesianChart({chartType:1,isScrollable:!0,tooltipsEnabled:!0,animator:new t.BaseAnimator,behavior:new t.CartesianChartBehavior([new t.LineChartWebBehavior]),seriesLabelFormattingEnabled:s,isLabelInteractivityEnabled:u,referenceLinesEnabled:p,lineChartLabelDensityEnabled:g})}),a(i,e.visuals.plugins.stackedAreaChart,function(){return new t.CartesianChart({chartType:2,isScrollable:!0,tooltipsEnabled:!0,animator:new t.BaseAnimator,behavior:new t.CartesianChartBehavior([new t.LineChartWebBehavior]),seriesLabelFormattingEnabled:s,lineChartLabelDensityEnabled:g})}),a(i,e.visuals.plugins.lineClusteredColumnComboChart,function(){return new t.CartesianChart({chartType:13,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior,new t.LineChartWebBehavior]),isLabelInteractivityEnabled:u})}),a(i,e.visuals.plugins.lineStackedColumnComboChart,function(){return new t.CartesianChart({chartType:14,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior,new t.LineChartWebBehavior]),isLabelInteractivityEnabled:u})}),a(i,e.visuals.plugins.pieChart,function(){return new t.DonutChart({sliceWidthRatio:0,animator:new t.WebDonutChartAnimator,isScrollable:!0,tooltipsEnabled:!0,behavior:new t.DonutChartWebBehavior})}),a(i,o(e.visuals.plugins.scatterChart,n),function(){return new t.CartesianChart({chartType:9,isScrollable:!0,tooltipsEnabled:!0,animator:new t.BaseAnimator,behavior:new t.CartesianChartBehavior([new t.ScatterChartWebBehavior]),isLabelInteractivityEnabled:u,referenceLinesEnabled:p,backgroundImageEnabled:d})}),a(i,e.visuals.plugins.treemap,function(){return new t.Treemap({animator:new t.WebTreemapAnimator,isScrollable:!0,behavior:new t.TreemapWebBehavior,tooltipsEnabled:!0})}),a(i,e.visuals.plugins.waterfallChart,function(){return new t.CartesianChart({chartType:12,isScrollable:!0,tooltipsEnabled:!0,behavior:new t.CartesianChartBehavior([new t.WaterfallChartWebBehavior]),isLabelInteractivityEnabled:u,referenceLinesEnabled:p})}),a(i,e.visuals.plugins.map,function(){return new t.Map({behavior:new t.MapBehavior,tooltipsEnabled:!0,isLegendScrollable:!0})}),a(i,e.visuals.plugins.filledMap,function(){return new t.Map({filledMap:!0,behavior:new t.MapBehavior,tooltipsEnabled:!0,filledMapDataLabelsEnabled:h,isLegendScrollable:!0})}),a(i,e.visuals.plugins.slicer,function(){return new t.Slicer({behavior:new t.SlicerWebBehavior})}),a(i,e.visuals.plugins.matrix,function(){return new t.Matrix(c)}),a(i,e.visuals.plugins.table,function(){return new t.Table(c)}),a(i,e.visuals.plugins.radarChart,function(){return new t.samples.RadarChart({animator:new t.BaseAnimator})}),a(i,e.visuals.plugins.dotPlot,function(){return new t.samples.DotPlot({animator:new t.BaseAnimator})}),a(i,e.visuals.plugins.histogram,function(){return new t.samples.Histogram({animator:new t.BaseAnimator})}),a(i,e.visuals.plugins.areaRangeChart,function(){return new t.samples.AreaRangeChart({animator:new t.BaseAnimator})}),a(i,e.visuals.plugins.tornadoChart,function(){return new t.samples.TornadoChart({animator:new t.BaseAnimator})}),l&&a(i,e.visuals.plugins.scriptVisual,function(){return new t.ScriptVisual({canRefresh:!0})})}function o(e,t){if(!t)return e;var i=e.capabilities;if(!i.dataViewMappings)return e;for(var a=e,r=0;r<i.dataViewMappings.length;++r){var n=i.dataViewMappings[r].categorical;if(n){a===e&&(a=_.clone(e),a.capabilities=_.clone(a.capabilities),i=a.capabilities,n=i.dataViewMappings[r].categorical);var o=n.categories;o&&o.dataReductionAlgorithm&&(o.dataReductionAlgorithm=void 0);var s=n.values;if(s){var l=s.group;l&&(l.dataReductionAlgorithm=void 0)}n.dataReductionAlgorithm={sample:{}}}}return a}function s(){return new d(void 0)}function l(e){return new d(e)}function u(e){return new g(e)}function c(e){return new f(e)}function h(e){return new y(e)}function p(e){return new v(e)}var d=function(){function i(t){this.plugins=e.visuals.plugins,this.featureSwitches=t}return i.prototype.getVisuals=function(){var e=this.plugins,t=Object.keys(e);return t.map(function(t){return e[t]})},i.prototype.getPlugin=function(e){if(e){var t=this.plugins[e];if(t)return t}},i.prototype.capabilities=function(e){var t=this.getPlugin(e);return t?t.capabilities:void 0},i.prototype.requireSandbox=function(e){return e&&e.custom},i.prototype.removeAnyCustomVisuals=function(){var t=e.visuals.plugins;for(var i in t){var a=t[i];a.custom&&delete t[i]}},i.prototype.isCustomVisual=function(e){return e&&this.plugins[e]?this.plugins[e].custom===!0:!1},i.prototype.shouldDisableVisual=function(e,i){return(e===t.plugins.map.name||e===t.plugins.filledMap.name)&&i},i.prototype.isScriptVisualQueryable=function(){return void 0!==this.featureSwitches&&this.featureSwitches.scriptVisualEnabled},i}();i.VisualPluginService=d,i.createPlugin=a;var g=function(i){function a(e){i.call(this,e),this.visualPlugins={},this.addCustomVisualizations([]),n(this.visualPlugins,this.featureSwitches)}return __extends(a,i),a.prototype.getVisuals=function(){var i=[e.visuals.plugins.barChart,e.visuals.plugins.columnChart,e.visuals.plugins.clusteredBarChart,e.visuals.plugins.clusteredColumnChart,e.visuals.plugins.hundredPercentStackedBarChart,e.visuals.plugins.hundredPercentStackedColumnChart,e.visuals.plugins.lineChart,e.visuals.plugins.areaChart,e.visuals.plugins.stackedAreaChart,e.visuals.plugins.lineStackedColumnComboChart,e.visuals.plugins.lineClusteredColumnComboChart,e.visuals.plugins.waterfallChart,e.visuals.plugins.scatterChart,e.visuals.plugins.pieChart,e.visuals.plugins.treemap,e.visuals.plugins.map,e.visuals.plugins.table,e.visuals.plugins.matrix,e.visuals.plugins.filledMap,e.visuals.plugins.funnel,e.visuals.plugins.gauge,e.visuals.plugins.multiRowCard,e.visuals.plugins.card,e.visuals.plugins.slicer,e.visuals.plugins.donutChart];this.featureSwitches.scriptVisualEnabled&&i.push(e.visuals.plugins.scriptVisual);for(var a in t.plugins){var r=t.plugins[a];r.custom&&this.pushPluginIntoConveratbleTypes(i,r)}return this.addCustomVisualizations(i),this.featureSwitches.dataDotChartEnabled&&(i.push(e.visuals.plugins.dataDotClusteredColumnComboChart),i.push(e.visuals.plugins.dataDotStackedColumnComboChart)),this.featureSwitches.sunburstVisualEnabled&&i.push(e.visuals.plugins.sunburst),this.featureSwitches.kpiVisualEnabled&&i.push(e.visuals.plugins.kpi),i},a.prototype.pushPluginIntoConveratbleTypes=function(e,t){e.some(function(e){return e.name===t.name})||e.push(t)},a.prototype.addCustomVisualizations=function(t){var i=e.localStorageService.getData("customVisualizations");if(i)for(var a=i.length,r=0;a>r;r++){var n=i[r].pluginName,o=this.getPlugin(n);if(!o){var s=i[r].javaScriptCode,l=$("<script/>",{html:s+"//# sourceURL="+n+".js\n//# sourceMappingURL="+n+".js.map"});l.attr("pluginName",n),$("body").append(l);var u=$("<style/>",{html:i[r].cssCode});u.attr("pluginName",n),$("head").append(u),o=this.getPlugin(n)}this.pushPluginIntoConveratbleTypes(t,o)}},a.prototype.getPlugin=function(e){return this.visualPlugins[e]?this.visualPlugins[e]:i.prototype.getPlugin.call(this,e)},a.prototype.requireSandbox=function(e){return this.featureSwitches.sandboxVisualsEnabled&&(!e||e&&e.custom)},a}(d);i.MinervaVisualPluginService=g;var m=function(t){function i(){t.call(this,void 0),this.visualPlugins=e.visuals.plugins,n(this.visualPlugins,null)}return __extends(i,t),i.prototype.getVisuals=function(){var e=this.visualPlugins,t=Object.keys(e);return t.map(function(t){return e[t]})},i.prototype.getPlugin=function(e){if(e){var t=this.visualPlugins[e];if(t)return t}},i.prototype.capabilities=function(e){var t=this.getPlugin(e);return t?t.capabilities:void 0},i}(d);i.PlaygroundVisualPluginService=m;var f=function(e){function t(t){e.call(this,t),this.visualPlugins={},r(this.visualPlugins,this.featureSwitches)}return __extends(t,e),t.prototype.getPlugin=function(t){return this.visualPlugins[t]?this.visualPlugins[t]:e.prototype.getPlugin.call(this,t)},t.prototype.requireSandbox=function(e){return this.featureSwitches.sandboxVisualsEnabled&&(!e||e&&e.custom)},t}(d);i.DashboardPluginService=f;var y=function(i){function r(r){i.call(this,r);var n=r?r.seriesLabelFormattingEnabled:!1;this.visualPlugins={},a(this.visualPlugins,e.visuals.plugins.clusteredBarChart,function(){return new t.CartesianChart({chartType:5,animator:new t.WebColumnChartAnimator,tooltipsEnabled:!0,seriesLabelFormattingEnabled:n})}),a(this.visualPlugins,e.visuals.plugins.columnChart,function(){return new t.CartesianChart({chartType:4,animator:new t.WebColumnChartAnimator,tooltipsEnabled:!0,seriesLabelFormattingEnabled:n})}),a(this.visualPlugins,e.visuals.plugins.donutChart,function(){return new t.DonutChart({animator:new t.WebDonutChartAnimator,tooltipsEnabled:!0})}),a(this.visualPlugins,e.visuals.plugins.hundredPercentStackedBarChart,function(){return new t.CartesianChart({chartType:7,animator:new t.WebColumnChartAnimator,tooltipsEnabled:!0,seriesLabelFormattingEnabled:n})}),a(this.visualPlugins,e.visuals.plugins.hundredPercentStackedColumnChart,function(){return new t.CartesianChart({chartType:8,animator:new t.WebColumnChartAnimator,tooltipsEnabled:!0,seriesLabelFormattingEnabled:n})}),a(this.visualPlugins,e.visuals.plugins.lineChart,function(){return new t.CartesianChart({chartType:0,animator:new t.BaseAnimator,tooltipsEnabled:!0})}),a(this.visualPlugins,e.visuals.plugins.areaChart,function(){return new t.CartesianChart({chartType:1,animator:new t.BaseAnimator,tooltipsEnabled:!0})}),a(this.visualPlugins,e.visuals.plugins.pieChart,function(){return new t.DonutChart({sliceWidthRatio:0,animator:new t.WebDonutChartAnimator,tooltipsEnabled:!0})}),a(this.visualPlugins,e.visuals.plugins.scatterChart,function(){return new t.CartesianChart({chartType:9,animator:new t.BaseAnimator,tooltipsEnabled:!0})},void 0)}return __extends(r,i),r.prototype.getPlugin=function(e){return this.visualPlugins[e]?this.visualPlugins[e]:i.prototype.getPlugin.call(this,e)},r.prototype.requireSandbox=function(e){return this.featureSwitches.sandboxVisualsEnabled&&(!e||e&&e.custom)},r}(d);i.InsightsPluginService=y;var v=function(i){function r(n){var o=this;i.call(this,void 0),this.smallViewPortProperties=n||{CartesianSmallViewPortProperties:{hideAxesOnSmallViewPort:!0,hideLegendOnSmallViewPort:!0,MinHeightLegendVisible:r.MinHeightLegendVisible,MinHeightAxesVisible:r.MinHeightAxesVisible},GaugeSmallViewPortProperties:{hideGaugeSideNumbersOnSmallViewPort:!0,smallGaugeMarginsOnSmallViewPort:!0,MinHeightGaugeSideNumbersVisible:r.MinHeightGaugeSideNumbersVisible,GaugeMarginsOnSmallViewPort:r.GaugeMarginsOnSmallViewPort},FunnelSmallViewPortProperties:{hideFunnelCategoryLabelsOnSmallViewPort:!0,minHeightFunnelCategoryLabelsVisible:r.MinHeightFunnelCategoryLabelsVisible}},t.TooltipManager.ShowTooltips=!1,this.visualPlugins={},a(this.visualPlugins,e.visuals.plugins.lineChart,function(){return new t.CartesianChart({chartType:0,cartesianSmallViewPortProperties:o.smallViewPortProperties.CartesianSmallViewPortProperties})}),a(this.visualPlugins,e.visuals.plugins.lineClusteredColumnComboChart,function(){return new t.CartesianChart({chartType:13,cartesianSmallViewPortProperties:o.smallViewPortProperties.CartesianSmallViewPortProperties})}),a(this.visualPlugins,e.visuals.plugins.lineStackedColumnComboChart,function(){return new t.CartesianChart({chartType:14,cartesianSmallViewPortProperties:o.smallViewPortProperties.CartesianSmallViewPortProperties})}),a(this.visualPlugins,e.visuals.plugins.scatterChart,function(){return new t.CartesianChart({chartType:9,cartesianSmallViewPortProperties:o.smallViewPortProperties.CartesianSmallViewPortProperties,behavior:new t.CartesianChartBehavior([new t.ScatterChartMobileBehavior])})}),a(this.visualPlugins,e.visuals.plugins.gauge,function(){return new t.Gauge({gaugeSmallViewPortProperties:o.smallViewPortProperties.GaugeSmallViewPortProperties})}),a(this.visualPlugins,e.visuals.plugins.funnel,function(){return new t.FunnelChart({animator:null,funnelSmallViewPortProperties:o.smallViewPortProperties.FunnelSmallViewPortProperties})}),a(this.visualPlugins,e.visuals.plugins.donutChart,function(){return new t.DonutChart({disableGeometricCulling:!0})}),a(this.visualPlugins,e.visuals.plugins.pieChart,function(){return new t.DonutChart({sliceWidthRatio:0,disableGeometricCulling:!0})})}return __extends(r,i),r.prototype.getPlugin=function(e){return this.visualPlugins[e]?this.visualPlugins[e]:i.prototype.getPlugin.call(this,e)},r.MinHeightLegendVisible=80,r.MinHeightAxesVisible=80,r.MinHeightGaugeSideNumbersVisible=80,r.GaugeMarginsOnSmallViewPort=10,r.MinHeightFunnelCategoryLabelsVisible=80,r}(d);i.MobileVisualPluginService=v,i.create=s,i.createVisualPluginService=l,i.createMinerva=u,i.createDashboard=c,i.createInsights=h,i.createMobile=p}(i=t.visualPluginFactory||(t.visualPluginFactory={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){if(e)for(var i=0;i<e.length;i++){var a=e[i];a(t)}}var i="unselectable";e.fire=t;var a=function(){function t(e,t){this._owner=e,this._direction=t,this._timerHandle=void 0,this.createView();var a=this;this._element.addEventListener("mousedown",function(e){a.onMouseDown(e)}),$(this._element).addClass(i),$(this._svg).addClass(i),$(this._polygon).addClass(i)}return Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),t.prototype.createView=function(){var e="http://www.w3.org/2000/svg";this._polygon=document.createElementNS(e,"polygon"),this._polygon.setAttributeNS(null,"points","3,3 6,3 13,8 6,13 3,13 10,8"),this._polygon.setAttributeNS(null,"fill",t.ARROW_COLOR),this._svg=document.createElementNS(e,"svg");var i=this._svg.style;i.position="absolute",i.left="0px",i.top="0px",this._svg.appendChild(this._polygon),this._element=document.createElement("div"),this._element.className=r.arrowClassName,this._element.appendChild(this._svg),this._owner.element.appendChild(this._element)},t.prototype.onMouseDown=function(e){var t=this;if(clearTimeout(this._timerHandle),!this._mouseUpWrapper){e.cancelBubble=!0;var i=this;this._mouseUpWrapper=function(e){i.onMouseUp(e)},r.addDocumentMouseUpEvent(this._mouseUpWrapper)}this._owner._scrollSmallIncrement(this._direction),this._owner.refresh(),this._timerHandle=setTimeout(function(){t.onMouseDown(e)},100),e.preventDefault&&e.preventDefault()},t.prototype.onMouseUp=function(e){clearTimeout(this._timerHandle),r.removeDocumentMouseUpEvent(this._mouseUpWrapper),this._mouseUpWrapper=void 0},t.prototype.arrange=function(t,i,a){var r=Math.min(t,i),n=r/16,o=(t-r)/2,s=(i-r)/2;this._polygon.setAttributeNS(null,"transform","translate("+o+", "+s+") scale("+n+") rotate("+a+",8,8)"),this._svg.setAttributeNS(null,"width",t+"px"),this._svg.setAttributeNS(null,"height",i+"px"),e.HTMLElementUtils.setElementWidth(this._element,t),e.HTMLElementUtils.setElementHeight(this._element,i)},t.MIN_WIDTH=26,t.ARROW_COLOR="#404040",t}();e.ScrollbarButton=a;var r=function(){function r(e){this.MIN_BAR_SIZE=10,this.min=0,this.max=10,this.viewMin=0,this.viewSize=2,this.smallIncrement=1,this._onscroll=[],this._screenToOffsetScale=1,this.createView(e);var t=this;this._element.addEventListener("mousedown",function(e){t.onBackgroundMouseDown(e)}),this._middleBar.addEventListener("mousedown",function(e){t.onMiddleBarMouseDown(e)}),this._timerHandle=void 0,this._visible=!0,this.element.winControl=this,$(this._touchPanel).addClass(i)}return r.prototype.scrollBy=function(e){this.scrollTo(this.viewMin+e)},r.prototype.scrollUp=function(){this.scrollBy(-this.smallIncrement)},r.prototype.scrollDown=function(){this.scrollBy(this.smallIncrement)},r.prototype.scrollPageUp=function(){this.scrollBy(-this.viewSize)},r.prototype.scrollPageDown=function(){this.scrollBy(this.viewSize)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._element.style.width=e,this.invalidateArrange()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._element.style.height=e,this.invalidateArrange()},enumerable:!0,configurable:!0}),r.prototype.refresh=function(){},Object.defineProperty(r.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxButton",{get:function(){return this._maxButton},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"middleBar",{get:function(){return this._middleBar},enumerable:!0,configurable:!0}),r.prototype._scrollSmallIncrement=function(e){this.scrollBy(this.smallIncrement*e)},Object.defineProperty(r.prototype,"visible",{get:function(){return this._visible},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isInMouseCapture",{get:function(){return void 0!==this._timerHandle},enumerable:!0,configurable:!0}),r.prototype.show=function(e){this._visible=e,this.element.style.visibility=e?"visible":"hidden",this.invalidateArrange()},r.prototype._getMouseOffset=function(e){return void 0!==e.offsetX?{x:e.offsetX,y:e.offsetY}:void 0!==e.layerX?{x:e.layerX,y:e.layerY}:{x:e.screenX,y:e.screenY}},r.prototype._getOffsetXDelta=function(e){return(e.screenX-this._screenPrevMousePos.x)/this._screenToOffsetScale},r.prototype._getOffsetYDelta=function(e){return(e.screenY-this._screenPrevMousePos.y)/this._screenToOffsetScale},r.prototype._getOffsetXTouchDelta=function(e){return this._getMouseOffset(e).x-this._offsetTouchPrevPos.x},r.prototype._getOffsetYTouchDelta=function(e){return this._getMouseOffset(e).y-this._offsetTouchPrevPos.y},r.prototype.initTouch=function(e,t){var i=this;this._touchPanel=e,this._allowMouseDrag=void 0===t?!0:t,"ontouchmove"in e?(e.addEventListener("touchstart",function(e){return i.onTouchStart(e)}),e.addEventListener("touchmove",function(e){return i.onTouchMove(e)}),e.addEventListener("touchend",function(e){return i.onTouchEnd(e)})):(e.addEventListener("mousedown",function(e){return i.onTouchMouseDown(e)}),e.addEventListener("mousemove",function(e){return i.onTouchMouseMove(e)}),e.addEventListener("mouseup",function(e){return i.onTouchMouseUp(e)}))},r.prototype.onTouchStart=function(e){1===e.touches.length&&this.onTouchMouseDown(e.touches[0])},r.prototype.onTouchMove=function(e){1===e.touches.length&&(e.preventDefault&&e.preventDefault(),this.onTouchMouseMove(e.touches[0]))},r.prototype.onTouchEnd=function(e){this.onTouchMouseUp(1===e.touches.length?e.touches[0]:e,!0)},r.prototype.onTouchMouseDown=function(e){(this._allowMouseDrag||e.pointerType!==MSPointerEvent.MSPOINTER_TYPE_MOUSE)&&("setCapture"in this._touchPanel&&this._touchPanel.setCapture(!0),this._offsetTouchPrevPos=this._offsetTouchStartPos=null,this._touchStarted=!0)},r.prototype._getOffsetTouchDelta=function(e){return null},r.prototype.onTouchMouseMove=function(e){if(this._touchStarted){this._offsetTouchStartPos||(this._offsetTouchPrevPos=this._offsetTouchStartPos=this._getMouseOffset(e));var t=this._getOffsetTouchDelta(e);0!==t&&(this.scrollBy(-t/this._getRunningSize(!1)*this.viewSize),this._offsetTouchPrevPos=this._getMouseOffset(e)),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0}},r.prototype.onTouchMouseUp=function(e,t){if(this._touchStarted&&this._offsetTouchStartPos){var i=this._getMouseOffset(e);!t&&(Math.abs(this._offsetTouchStartPos.x-i.x)>3||Math.abs(this._offsetTouchStartPos.y-i.y)>3)&&(e.preventDefault&&e.preventDefault(),e.cancelBubble=!0)}"releaseCapture"in this._touchPanel&&this._touchPanel.releaseCapture(),this._touchStarted=!1},r.prototype.registerElementForMouseWheelScrolling=function(e){var t=this;e.addEventListener("mousewheel",function(e){t.onMouseWheel(e)}),e.addEventListener("DOMMouseScroll",function(e){t.onFireFoxMouseWheel(e)})},r.prototype.createView=function(e){this._element=document.createElement("div"),this._element.className=r.className,this._element.setAttribute("drag-resize-disabled","true"),e.appendChild(this._element),this._minButton=new a(this,-1),this._maxButton=new a(this,1),this._middleBar=document.createElement("div"),this._middleBar.className=r.barClassName,this._element.appendChild(this._middleBar)},r.prototype.scrollTo=function(e){var i=Math.min(this.max-this.viewSize,Math.max(this.min,e));i!==this.viewMin&&(this.viewMin=i,t(this._onscroll,null))},r.prototype._scrollByPage=function(e){},r.prototype._getRunningSize=function(e){return null},r.prototype._getOffsetDelta=function(e){return null},r.prototype.scroll=function(e){var t=this._getOffsetDelta(e)/this._getRunningSize(!0)*(this.max-this.min);if(0>t){if(this._getScreenMousePos(e)>=this._screenMaxMousePos)return}else if(t>0&&this._getScreenMousePos(e)<=this._screenMinMousePos)return;this.scrollBy(t)},Object.defineProperty(r.prototype,"actualWidth",{get:function(){return void 0===this._actualWidth&&this.arrange(),this._actualWidth},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualHeight",{get:function(){return void 0===!this._actualHeight&&this.arrange(),this._actualHeight},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualButtonWidth",{get:function(){return void 0===!this._actualButtonWidth&&this.arrange(),this._actualButtonWidth},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualButtonHeight",{get:function(){return void 0===!this._actualButtonHeight&&this.arrange(),this._actualButtonHeight},enumerable:!0,configurable:!0}),r.prototype.arrange=function(){this._actualWidth||(this._actualWidth=this._element.offsetWidth,this._actualHeight=this._element.offsetHeight,this._actualButtonWidth=this._calculateButtonWidth(),this._actualButtonHeight=this._calculateButtonHeight(),this._minButton.arrange(this._actualButtonWidth,this._actualButtonHeight,this._getMinButtonAngle()),this._maxButton.arrange(this._actualButtonWidth,this._actualButtonHeight,this._getMaxButtonAngle()),this._setMaxButtonPosition())},r.prototype._calculateButtonWidth=function(){return null},r.prototype._calculateButtonHeight=function(){return null},r.prototype._getMinButtonAngle=function(){return null},r.prototype._getMaxButtonAngle=function(){return null},r.prototype._setMaxButtonPosition=function(){},r.prototype.invalidateArrange=function(){this._actualWidth=void 0,this._actualHeight=void 0,this._actualButtonWidth=void 0,this._actualButtonHeight=void 0},r.prototype.onHoldBackgroundMouseDown=function(e){var t=this,i=this._timerHandle?r.ScrollbarBackgroundMousedownHoldDelay:r.ScrollbarBackgroundFirstTimeMousedownHoldDelay;this._timerHandle=setTimeout(function(){t.onBackgroundMouseDown(e)},i)},r.prototype.onBackgroundMouseDown=function(e){var t=this;clearTimeout(this._timerHandle),this._backgroundMouseUpWrapper||(e.cancelBubble=!0,this._backgroundMouseUpWrapper=function(e){t.onBackgroundMouseUp(e)},r.addDocumentMouseUpEvent(this._backgroundMouseUpWrapper)),this._scrollByPage(e),this.refresh(),this.onHoldBackgroundMouseDown(e),e.preventDefault&&e.preventDefault()},r.prototype.onBackgroundMouseUp=function(e){clearTimeout(this._timerHandle),this._timerHandle=void 0,r.removeDocumentMouseUpEvent(this._backgroundMouseUpWrapper),this._backgroundMouseUpWrapper=void 0},r.prototype.getPinchZoomY=function(){return document.documentElement.clientHeight/window.innerHeight},r.prototype.onMiddleBarMouseDown=function(t){t.cancelBubble=!0,this._screenPrevMousePos={x:t.screenX,y:t.screenY},this._screenMinMousePos=this._getScreenMousePos(t)-(this._getScreenContextualLeft(this._middleBar)-this._getScreenContextualRight(this._minButton.element)),this._screenMaxMousePos=this._getScreenMousePos(t)+(this._getScreenContextualLeft(this._maxButton.element)-this._getScreenContextualRight(this._middleBar)),this._screenToOffsetScale=e.HTMLElementUtils.getAccumulatedScale(this.element)*this.getPinchZoomY();var i=this;this._middleBarMouseMoveWrapper=function(e){i.onMiddleBarMouseMove(e)},r.addDocumentMouseMoveEvent(this._middleBarMouseMoveWrapper),this._middleBarMouseUpWrapper=function(e){i.onMiddleBarMouseUp(e)},r.addDocumentMouseUpEvent(this._middleBarMouseUpWrapper),t.preventDefault&&t.preventDefault()},r.prototype.onMiddleBarMouseMove=function(e){this._screenPrevMousePos&&(this.scroll(e),this.refresh(),this._screenPrevMousePos={x:e.screenX,y:e.screenY})},r.prototype.onMiddleBarMouseUp=function(e){this._screenPrevMousePos=void 0,r.removeDocumentMouseMoveEvent(this._middleBarMouseMoveWrapper),this._middleBarMouseMoveWrapper=void 0,r.removeDocumentMouseUpEvent(this._middleBarMouseUpWrapper),this._middleBarMouseUpWrapper=void 0,e.preventDefault&&e.preventDefault()},r.prototype._getScreenContextualLeft=function(e){return null},r.prototype._getScreenContextualRight=function(e){return null},r.prototype.onMouseWheel=function(e){e.wheelDelta&&this.mouseWheel(e.wheelDelta)},r.prototype.onFireFoxMouseWheel=function(e){e.detail&&this.mouseWheel(-e.detail)},r.prototype.mouseWheel=function(e){this.visible&&(0>e?e=Math.min(-r.MouseWheelRange,e):e>0&&(e=Math.max(r.MouseWheelRange,e)),this.scrollBy(-e/r.MouseWheelRange*this.smallIncrement))},r.prototype._getScreenMousePos=function(e){return null},r.addDocumentMouseUpEvent=function(e){document.addEventListener("mouseup",e);
},r.removeDocumentMouseUpEvent=function(e){document.removeEventListener("mouseup",e)},r.addDocumentMouseMoveEvent=function(e){document.addEventListener("mousemove",e)},r.removeDocumentMouseMoveEvent=function(e){document.removeEventListener("mousemove",e)},r.DefaultScrollbarWidth="15px",r.ScrollbarBackgroundFirstTimeMousedownHoldDelay=500,r.ScrollbarBackgroundMousedownHoldDelay=50,r.MouseWheelRange=120,r.className="scroll-bar-div",r.barClassName="scroll-bar-part-bar",r.arrowClassName="scroll-bar-part-arrow",r}();e.Scrollbar=r;var n=function(t){function i(e){t.call(this,e),this.height=r.DefaultScrollbarWidth}return __extends(i,t),i.prototype._calculateButtonWidth=function(){return Math.min(this.actualWidth/2,Math.max(this.actualHeight,a.MIN_WIDTH))},i.prototype._calculateButtonHeight=function(){return this.actualHeight},i.prototype._getMinButtonAngle=function(){return-180},i.prototype._getMaxButtonAngle=function(){return 0},i.prototype._setMaxButtonPosition=function(){e.HTMLElementUtils.setElementLeft(this.maxButton.element,this.actualWidth-this.actualButtonWidth)},i.prototype.refresh=function(){this.arrange();var t=this.actualWidth-2*this.actualButtonWidth-2,i=this.viewSize/(this.max-this.min)*t;i<this.MIN_BAR_SIZE&&(t-=this.MIN_BAR_SIZE-i,i=this.MIN_BAR_SIZE),0>t&&(t=0,i=0),i=Math.min(i,t);var a=this.viewMin/(this.max-this.min)*t;e.HTMLElementUtils.setElementWidth(this.middleBar,i),e.HTMLElementUtils.setElementHeight(this.middleBar,this.actualHeight),e.HTMLElementUtils.setElementLeft(this.middleBar,this.actualButtonWidth+1+a)},i.prototype.show=function(i){i!==this.visible&&(t.prototype.show.call(this,i),i?this.element.style.height=this.height:e.HTMLElementUtils.setElementHeight(this.element,0))},i.prototype._scrollByPage=function(e){var t=this.middleBar.offsetLeft,i=t+this.middleBar.offsetWidth,a=void 0===e.offsetX?e.layerX:e.offsetX;a>i?this.scrollPageDown():t>a&&this.scrollPageUp()},i.prototype._getRunningSize=function(e){var t=this.actualWidth;if(e){var i=this.actualButtonWidth+1;t-=2*i;var a=t*(this.viewSize/(this.max-this.min));a<this.MIN_BAR_SIZE&&(t-=this.MIN_BAR_SIZE-a)}return t},i.prototype._getOffsetDelta=function(e){return this._getOffsetXDelta(e)},i.prototype._getOffsetTouchDelta=function(e){return this._getOffsetXTouchDelta(e)},i.prototype._getScreenContextualLeft=function(e){return e.getBoundingClientRect().left},i.prototype._getScreenContextualRight=function(e){return e.getBoundingClientRect().right},i.prototype._getScreenMousePos=function(e){return e.screenX},i}(r);e.HorizontalScrollbar=n;var o=function(t){function i(e){t.call(this,e),this.width=r.DefaultScrollbarWidth}return __extends(i,t),i.prototype._calculateButtonWidth=function(){return this.actualWidth},i.prototype._calculateButtonHeight=function(){return Math.min(this.actualHeight/2,Math.max(this.actualWidth,a.MIN_WIDTH))},i.prototype._getMinButtonAngle=function(){return-90},i.prototype._getMaxButtonAngle=function(){return 90},i.prototype._setMaxButtonPosition=function(){e.HTMLElementUtils.setElementTop(this.maxButton.element,this.actualHeight-this.actualButtonHeight)},i.prototype.refresh=function(){this.arrange();var t=this.actualHeight-2*this.actualButtonHeight-2,i=this.viewSize/(this.max-this.min)*t;i<this.MIN_BAR_SIZE&&(t-=this.MIN_BAR_SIZE-i,i=this.MIN_BAR_SIZE),0>t&&(t=0,i=0);var a=this.viewMin/(this.max-this.min)*t;e.HTMLElementUtils.setElementWidth(this.middleBar,this.actualWidth),e.HTMLElementUtils.setElementHeight(this.middleBar,i),e.HTMLElementUtils.setElementTop(this.middleBar,this.actualButtonHeight+1+a)},i.prototype.show=function(i){i!==this.visible&&(t.prototype.show.call(this,i),i?this.element.style.width=this.width:e.HTMLElementUtils.setElementWidth(this.element,0))},i.prototype._scrollByPage=function(e){var t=this.middleBar.offsetTop,i=t+this.middleBar.offsetHeight,a=void 0===e.offsetY?e.layerY:e.offsetY;a>i?this.scrollPageDown():t>a&&this.scrollPageUp()},i.prototype._getRunningSize=function(e){var t=this.actualHeight;if(e){var i=this.actualButtonHeight+1;t-=2*i;var a=t*(this.viewSize/(this.max-this.min));a<this.MIN_BAR_SIZE&&(t-=this.MIN_BAR_SIZE-a)}return t},i.prototype._getOffsetDelta=function(e){return this._getOffsetYDelta(e)},i.prototype._getOffsetTouchDelta=function(e){return this._getOffsetYTouchDelta(e)},i.prototype._getScreenContextualLeft=function(e){return e.getBoundingClientRect().top},i.prototype._getScreenContextualRight=function(e){return e.getBoundingClientRect().bottom},i.prototype._getScreenMousePos=function(e){return e.screenY},i}(r);e.VerticalScrollbar=o}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){var i="unselectable",a=function(){function e(e,t){this._element=e,this._handler=t,this._elementMouseDownWrapper=null,this._elementMouseMoveWrapper=null,this._elementMouseOutWrapper=null,this._documentMouseMoveWrapper=null,this._documentMouseUpWrapper=null,this._startMousePosition=null,this._originalCursor=null}return e.addDocumentMouseUpEvent=function(e){document.addEventListener("mouseup",e)},e.removeDocumentMouseUpEvent=function(e){document.removeEventListener("mouseup",e)},e.addDocumentMouseMoveEvent=function(e){document.addEventListener("mousemove",e)},e.removeDocumentMouseMoveEvent=function(e){document.removeEventListener("mousemove",e)},e.getMouseCoordinates=function(e){return{x:e.pageX,y:e.pageY}},e.getMouseCoordinateDelta=function(e,t){return{x:t.x-e.x,y:t.y-e.y}},e.prototype.initialize=function(){var e=this;this._elementMouseDownWrapper=function(t){return e.onElementMouseDown(t)},this._element.addEventListener("mousedown",this._elementMouseDownWrapper),this._elementMouseMoveWrapper=function(t){return e.onElementMouseMove(t)},this._element.addEventListener("mousemove",this._elementMouseMoveWrapper),this._elementMouseOutWrapper=function(t){return e.onElementMouseOut(t)},this._element.addEventListener("mouseout",this._elementMouseOutWrapper),this._elementMouseDoubleClickOutWrapper=function(t){return e.onElementMouseDoubleClick(t)},this._element.addEventListener("dblclick",this._elementMouseDoubleClickOutWrapper)},e.prototype.uninitialize=function(){this._element.removeEventListener("mousedown",this._elementMouseDownWrapper),this._elementMouseDownWrapper=null,this._element.removeEventListener("mousemove",this._elementMouseMoveWrapper),this._elementMouseMoveWrapper=null,this._element.removeEventListener("mouseout",this._elementMouseOutWrapper),this._elementMouseOutWrapper=null,this._element.removeEventListener("dblclick",this._elementMouseDoubleClickOutWrapper),this._elementMouseDoubleClickOutWrapper=null},Object.defineProperty(e.prototype,"cell",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),e.prototype._hotSpot=function(e){return!1},e.prototype.onElementMouseDown=function(t){var i=this,a=e.getMouseCoordinates(t);this._hotSpot(a)&&("setCapture"in this._element&&this._element.setCapture(),t.cancelBubble=!0,this._startMousePosition=a,this._documentMouseMoveWrapper=function(e){return i.onDocumentMouseMove(e)},e.addDocumentMouseMoveEvent(this._documentMouseMoveWrapper),this._documentMouseUpWrapper=function(e){return i.onDocumentMouseUp(e)},e.addDocumentMouseUpEvent(this._documentMouseUpWrapper),document.documentElement&&(this._originalCursor=document.documentElement.style.cursor,document.documentElement.style.cursor=e.resizeCursor),this._handler.onStartResize(this.cell,this._startMousePosition.x,this._startMousePosition.y))},e.prototype.onElementMouseMove=function(t){this._startMousePosition||(this._hotSpot(e.getMouseCoordinates(t))?null===this._originalCursor&&(this._originalCursor=this._element.style.cursor,this._element.style.cursor=e.resizeCursor):null!==this._originalCursor&&(this._element.style.cursor=this._originalCursor,this._originalCursor=null))},e.prototype.onElementMouseOut=function(e){this._startMousePosition||null!==this._originalCursor&&(this._element.style.cursor=this._originalCursor,this._originalCursor=null)},e.prototype.onElementMouseDoubleClick=function(t){this._hotSpot(e.getMouseCoordinates(t))&&this._handler.onReset(this.cell)},e.prototype.onDocumentMouseMove=function(t){if(this._startMousePosition){var i=e.getMouseCoordinateDelta(this._startMousePosition,e.getMouseCoordinates(t));this._handler.onResize(this.cell,i.x,i.y)}},e.prototype.onDocumentMouseUp=function(t){this._startMousePosition=null,"releaseCapture"in this._element&&this._element.releaseCapture(),e.removeDocumentMouseMoveEvent(this._documentMouseMoveWrapper),this._documentMouseMoveWrapper=null,e.removeDocumentMouseUpEvent(this._documentMouseUpWrapper),this._documentMouseUpWrapper=null,document.documentElement&&(document.documentElement.style.cursor=this._originalCursor),t.preventDefault&&t.preventDefault(),this._handler.onEndResize(this.cell)},e.resizeHandleSize=4,e.resizeCursor="e-resize",e}();t.TablixResizer=a;var r=function(e){function t(t,i,a){this._cell=t,e.call(this,i,a)}return __extends(t,e),Object.defineProperty(t.prototype,"cell",{get:function(){return this._cell},enumerable:!0,configurable:!0}),t.prototype._hotSpot=function(e){return e.x>=this.element.getBoundingClientRect().right-a.resizeHandleSize},t}(a);t.TablixDomResizer=r;var n=function(){function i(a,r){this._tableCell=null,this._contentElement=t.TablixUtils.createDiv(),this._contentElement.style.position="relative",a||this._contentElement.style.setProperty("float","left"),this._contentHost=t.TablixUtils.createDiv(),this._contentHost.style.position="relative",this._contentHost.style.textOverflow="ellipsis",r===e.TablixLayoutKind.DashboardTile&&(this._contentHost.style.paddingRight="2px",this._contentHost.style.height="100%"),this._contentElement.appendChild(this._contentHost),this._resizer=null,i.addNoMarginStyle()}return i.prototype.initialize=function(e){this._owner=e},Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),i.prototype.registerTableCell=function(e){this._tableCell=e,e.appendChild(this._contentElement),e.className=i._noMarginsStyleName,e.style.verticalAlign="top",e.style.lineHeight="normal"},Object.defineProperty(i.prototype,"tableCell",{get:function(){return this._tableCell},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentElement",{get:function(){return this._contentElement},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentHost",{get:function(){return this._contentHost},enumerable:!0,configurable:!0}),i.prototype.registerClickHandler=function(e){this._contentElement.onclick=e},i.prototype.unregisterClickHandler=function(){this._contentElement.onclick=null},i.prototype.onContentWidthChanged=function(t){e.HTMLElementUtils.setElementWidth(this._contentElement,t)},i.prototype.onContentHeightChanged=function(t){e.HTMLElementUtils.setElementHeight(this._contentElement,t)},i.prototype.onColumnSpanChanged=function(e){this._tableCell.colSpan=e},i.prototype.onRowSpanChanged=function(e){this._tableCell.rowSpan=e},i.prototype.onTextAlignChanged=function(e){this._tableCell.style.textAlign=e},i.prototype.setColumnSeparator=function(e,i){this._tableCell.style.borderLeft=i+t.TablixUtils.UnitOfMeasurement+" "+t.TablixUtils.DefaultColumnSeparatorStyle+" "+e},i.prototype.setFontColor=function(e){this._tableCell.style.color=e},i.prototype.setBackgroundColor=function(e){this._tableCell.style.backgroundColor=e},i.prototype.setRowSeparator=function(){this._tableCell.style.borderBottom=t.TablixUtils.DefaultRowSeparatorWeight+t.TablixUtils.UnitOfMeasurement+" "+t.TablixUtils.DefaultRowSeparatorStyle+" "+t.TablixUtils.DefaultRowSeparatorColor},i.prototype.setOutline=function(e,t,i){this._tableCell.style.borderStyle=e,this._tableCell.style.borderColor=t,this._tableCell.style.borderWidth=i},i.prototype.setLeadingSpace=function(e){this._tableCell.style.paddingTop=e+t.TablixUtils.UnitOfMeasurement},i.prototype.onClear=function(){this._contentHost.className="",this._contentHostStyle="",this._tableCell.className=i._noMarginsStyleName,this._containerStyle=""},i.prototype.onHorizontalScroll=function(t,i){e.HTMLElementUtils.setElementLeft(this._contentHost,i),e.HTMLElementUtils.setElementWidth(this._contentHost,t)},i.prototype.onVerticalScroll=function(t,i){e.HTMLElementUtils.setElementTop(this._contentHost,i),e.HTMLElementUtils.setElementHeight(this._contentHost,t)},i.prototype.onInitializeScrolling=function(){e.HTMLElementUtils.setElementLeft(this._contentHost,0),e.HTMLElementUtils.setElementTop(this._contentHost,0),e.HTMLElementUtils.setElementWidth(this._contentHost,-1),e.HTMLElementUtils.setElementHeight(this._contentHost,-1)},i.prototype.setContentHostStyle=function(e){this._contentHostStyle!==e&&(this._contentHostStyle=e,this._contentHost.className=this._contentHostStyle)},i.prototype.setContainerStyle=function(e){this._containerStyle!==e&&(this._containerStyle=e,this._tableCell.className=this._containerStyle+" "+i._noMarginsStyleName)},i.prototype.clearContainerStyle=function(){this._containerStyle=void 0,this._tableCell.className!==i._noMarginsStyleName&&(this._tableCell.className=i._noMarginsStyleName),this._tableCell.style.border="",this._tableCell.style.background="",this._tableCell.style.color=""},i.prototype.enableHorizontalResize=function(e,t){e!==(null!==this._resizer)&&(e?(this._resizer=new r(this._owner,this._tableCell,t),this._resizer.initialize()):(this._resizer.uninitialize(),this._resizer=null))},i.addNoMarginStyle=function(){if(!i._noMarginsStyle){var e=document.createElement("style");e.appendChild(document.createTextNode("."+i._noMarginsStyleName+"{ padding: 0px; margin: 0px}")),document.head.appendChild(e),i._noMarginsStyle=e}},i.prototype.disableDragResize=function(){this._tableCell.setAttribute(i._dragResizeDisabledAttributeName,"true")},i._noMarginsStyleName="bi-tablix-cellNoMarginStyle",i._dragResizeDisabledAttributeName="drag-resize-disabled",i}();t.TablixCellPresenter=n;var o=function(){function e(e){this._tableRow=null,this._fitProportionally=e}return e.prototype.initialize=function(e){this._row=e},e.prototype.createCellPresenter=function(e){return new n(this._fitProportionally,e)},e.prototype.registerRow=function(e){this._tableRow=e},e.prototype.onAppendCell=function(e){var t=e._presenter;if(null===t.tableCell){var i=this._tableRow.insertCell(-1);t.registerTableCell(i)}else this._tableRow.appendChild(t.tableCell)},e.prototype.onInsertCellBefore=function(e,t){var i=e._presenter;if(null===i.tableCell){var a=this._tableRow.insertCell(Math.max(0,t._presenter.tableCell.cellIndex-1));i.registerTableCell(a)}else this._tableRow.insertBefore(e._presenter.tableCell,t._presenter.tableCell)},e.prototype.onRemoveCell=function(e){this._tableRow.removeChild(e._presenter.tableCell)},e.prototype.getHeight=function(){return this.getCellHeight(this._row.getTablixCell())},e.prototype.getCellHeight=function(e){return-1},e.prototype.getCellContentHeight=function(e){return-1},Object.defineProperty(e.prototype,"tableRow",{get:function(){return this._tableRow},enumerable:!0,configurable:!0}),e}();t.TablixRowPresenter=o;var s=function(e){function t(t,i){e.call(this,i),this._gridPresenter=t}return __extends(t,e),t.prototype.getCellHeight=function(e){return this._gridPresenter.sizeComputationManager.cellHeight},t.prototype.getCellContentHeight=function(e){return this._gridPresenter.sizeComputationManager.contentHeight},t}(o);t.DashboardRowPresenter=s;var l=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.getCellHeight=function(t){return t._presenter?e.HTMLElementUtils.getElementHeight(t._presenter.tableCell):0},i.prototype.getCellContentHeight=function(t){return t._presenter?e.HTMLElementUtils.getElementHeight(t._presenter.contentElement):0},i}(o);t.CanvasRowPresenter=l;var u=function(){function e(){}return e.prototype.initialize=function(e){this._column=e},e.prototype.getWidth=function(){return this.getCellWidth(this._column.getTablixCell())},e.prototype.getCellWidth=function(e){return-1},e.prototype.getCellContentWidth=function(e){return-1},e}();t.TablixColumnPresenter=u;var c=function(e){function t(t){e.call(this),this._gridPresenter=t}return __extends(t,e),t.prototype.getCellWidth=function(e){return this._gridPresenter.sizeComputationManager.cellWidth},t.prototype.getCellContentWidth=function(e){return this._gridPresenter.sizeComputationManager.contentWidth},t}(u);t.DashboardColumnPresenter=c;var h=function(t){function i(e,i){t.call(this),this._gridPresenter=e,this._columnIndex=i}return __extends(i,t),i.prototype.getCellWidth=function(t){var i=this._gridPresenter.getPersistedCellWidth(this._columnIndex);return _.isNumber(i)?i:t._presenter?e.HTMLElementUtils.getElementWidth(t._presenter.tableCell):0},i.prototype.getCellContentWidth=function(t){var i=this._gridPresenter.getPersistedCellWidth(this._columnIndex);return _.isNumber(i)?i:t._presenter?e.HTMLElementUtils.getElementWidth(t._presenter.contentElement):0},i}(u);t.CanvasColumnPresenter=h;var p=function(){function a(e){this._table=t.TablixUtils.createTable(),this._table.className=i,this._footerTable=t.TablixUtils.createTable(),this._footerTable.className=i,this._columnWidthManager=e}return a.prototype.initialize=function(e,t,i,a){this._owner=e,t.appendChild(this._table),i.appendChild(this._footerTable)},a.prototype.getWidth=function(){return-1},a.prototype.getHeight=function(){return-1},a.prototype.getScreenToCssRatioX=function(){return 1},a.prototype.getScreenToCssRatioY=function(){return 1},a.prototype.createRowPresenter=function(){return null},a.prototype.createColumnPresenter=function(e){return null},a.prototype.onAppendRow=function(e){var t=e.presenter;if(null===t.tableRow){var i=this._table.insertRow(-1);t.registerRow(i)}else this._table.tBodies[0].appendChild(e.presenter.tableRow)},a.prototype.onInsertRowBefore=function(e,t){var i=e.presenter;if(null===i.tableRow){var a=this._table.insertRow(Math.max(0,t.presenter.tableRow.rowIndex-1));i.registerRow(a)}else this._table.tBodies[0].insertBefore(e.presenter.tableRow,t.presenter.tableRow)},a.prototype.onRemoveRow=function(e){this._table.tBodies[0].removeChild(e.presenter.tableRow)},a.prototype.onAddFooterRow=function(e){var t=e.presenter;if(null===t.tableRow){var i=this._footerTable.insertRow(-1);t.registerRow(i)}else this._footerTable.tBodies[0].appendChild(e.presenter.tableRow)},a.prototype.onClear=function(){e.HTMLElementUtils.clearChildren(this._table),e.HTMLElementUtils.clearChildren(this._footerTable)},a.prototype.onFillColumnsProportionallyChanged=function(e){e?(this._table.style.width="100%",this._footerTable.style.width="100%"):(this._table.style.width="auto",this._footerTable.style.width="auto")},a.prototype.invokeColumnResizeCallBack=function(e,t){this._columnWidthManager&&this._columnWidthManager.columnWidthResizeCallback(e,t)},a.prototype.getPersistedCellWidth=function(e){return this._columnWidthManager?this._columnWidthManager.getPersistedCellWidth(e):void 0},a}();t.TablixGridPresenter=p;var d=function(e){function t(t){e.call(this),this._sizeComputationManager=t}return __extends(t,e),t.prototype.createRowPresenter=function(){return new s(this,this._owner.fillColumnsProportionally)},t.prototype.createColumnPresenter=function(e){return new c(this)},Object.defineProperty(t.prototype,"sizeComputationManager",{get:function(){return this._sizeComputationManager},enumerable:!0,configurable:!0}),t.prototype.getWidth=function(){return this._sizeComputationManager.gridWidth},t.prototype.getHeight=function(){return this._sizeComputationManager.gridHeight},t}(p);t.DashboardTablixGridPresenter=d;var g=function(t){function i(e){t.call(this,e)}return __extends(i,t),i.prototype.createRowPresenter=function(){return new l(this._owner.fillColumnsProportionally)},i.prototype.createColumnPresenter=function(e){return new h(this,e)},i.prototype.getWidth=function(){return e.HTMLElementUtils.getElementWidth(this._table)},i.prototype.getHeight=function(){return e.HTMLElementUtils.getElementHeight(this._table)},i}(p);t.CanvasTablixGridPresenter=g}(t=e.internal||(e.internal={}))}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i=function(){function e(e){this._binder=e,this._adjustmentFactor=1}return e.prototype._getOwner=function(){return null},Object.defineProperty(e.prototype,"binder",{get:function(){return this._binder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustmentFactor",{get:function(){return this._adjustmentFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsToRealizeCount",{get:function(){return this._itemsToRealizeCount},set:function(e){this._itemsToRealizeCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsEstimatedContextualWidth",{get:function(){return this._itemsEstimatedContextualWidth},set:function(e){this._itemsEstimatedContextualWidth=e},enumerable:!0,configurable:!0}),e.prototype.onStartRenderingIteration=function(){var e=this._getOwner();e.measureEnabled&&!e.done&&this._getEstimatedItemsToRealizeCount(),this._realizedLeavesCount=0},e.prototype.onEndRenderingIteration=function(e,t){t||this._getOwner().allItemsRealized||(this._adjustmentFactor*=this._getSizeAdjustment(e))},e.prototype.onEndRenderingSession=function(){this._adjustmentFactor=1},e.prototype.onCornerCellRealized=function(e,t){},e.prototype.onHeaderRealized=function(e,t,i){i&&this._realizedLeavesCount++},Object.defineProperty(e.prototype,"needsToRealize",{get:function(){return this._realizedLeavesCount<this._itemsToRealizeCount},enumerable:!0,configurable:!0}),e.prototype._getEstimatedItemsToRealizeCount=function(){},e.prototype._getSizeAdjustment=function(e){return 1},e}();t.TablixDimensionRealizationManager=i;var a=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),Object.defineProperty(t.prototype,"owner",{set:function(e){this._owner=e},enumerable:!0,configurable:!0}),t.prototype._getOwner=function(){return this._owner},t.prototype._getEstimatedItemsToRealizeCount=function(){this.estimateRowsToRealizeCount()},t.prototype.estimateRowsToRealizeCount=function(){return this._owner.dimension.model?void(this._owner.alignToEnd?this.itemsToRealizeCount=this._owner.dimension.getItemsCount()-this._owner.dimension.getIntegerScrollOffset()+1:this.itemsToRealizeCount=Math.ceil(this._owner.contextualWidthToFill/(this._owner.owner.getEstimatedRowHeight()*this.adjustmentFactor)+this._owner.dimension.getFractionScrollOffset())-this._owner.otherLayoutManager.dimension.getDepth()+1):void(this.itemsToRealizeCount=0)},t.prototype.getEstimatedRowHierarchyWidth=function(){if(!this._owner.dimension.model||0===this._owner.dimension.getItemsCount())return 0;var e=new n;this.updateRowHiearchyEstimatedWidth(this._owner.dimension.model,this._owner.dimension._hierarchyNavigator.getIndex(this._owner.dimension.getFirstVisibleItem(0)),e);for(var t=e.items,i=t.length,a=0,r=0;i>r;r++){var o=t[r];a+=0!==o.maxNonLeafWidth?o.maxNonLeafWidth:o.maxLeafWidth}return a},t.prototype.updateRowHiearchyEstimatedWidth=function(e,t,i){for(var a=this._owner.owner.owner.hierarchyNavigator,r=this.binder,n=a.getCount(e),s=t;n>s;s++){if(i.leafCount===this.itemsToRealizeCount)return;var l=a.getAt(e,s),u=r.getHeaderLabel(l),c=this._owner.getEstimatedHeaderWidth(u,t),h=a.isLeaf(l),p=a.getLevel(l),d=i.items[p];d||(d=new o,i.items[p]=d),h?(d.maxLeafWidth=Math.max(d.maxLeafWidth,c),i.leafCount=i.leafCount+1):(d.maxNonLeafWidth=Math.max(d.maxNonLeafWidth,c),this.updateRowHiearchyEstimatedWidth(a.getChildren(l),this._owner.dimension.getFirstVisibleChildIndex(l),i))}},t.prototype._getSizeAdjustment=function(e){return e/((this._owner.getRealizedItemsCount()-this._owner.dimension.getFractionScrollOffset())*this._owner.owner.getEstimatedRowHeight())},t}(i);t.RowRealizationManager=a;var r=function(i){function a(){i.apply(this,arguments)}return __extends(a,i),Object.defineProperty(a.prototype,"owner",{set:function(e){this._owner=e},enumerable:!0,configurable:!0}),a.prototype._getOwner=function(){return this._owner},a.prototype._getEstimatedItemsToRealizeCount=function(){this.estimateColumnsToRealizeCount(this.getEstimatedRowHierarchyWidth())},Object.defineProperty(a.prototype,"rowRealizationManager",{get:function(){return this._owner.otherLayoutManager.realizationManager},enumerable:!0,configurable:!0}),a.prototype.getEstimatedRowHierarchyWidth=function(){return this._owner.otherLayoutManager.done?this._owner.getOtherHierarchyContextualHeight():this.rowRealizationManager.getEstimatedRowHierarchyWidth()*this.adjustmentFactor},a.prototype.estimateColumnsToRealizeCount=function(i){var a=this._owner.contextualWidthToFill-i;if(!this._owner.dimension.model||e.Double.lessOrEqualWithPrecision(a,0,t.DimensionLayoutManager._pixelPrecision))return void(this.itemsToRealizeCount=0);var r=this.binder,n=this._owner.owner.owner.hierarchyNavigator,o=this._owner.dimension.getIntegerScrollOffset(),s=this._owner.dimension.getItemsCount(),l=s-o,u=this._owner.otherLayoutManager.dimension.getIntegerScrollOffset(),c=this._owner.otherLayoutManager.dimension.getItemsCount();if(this.itemsEstimatedContextualWidth=0,this._owner.alignToEnd)return void(this.itemsToRealizeCount=l);for(var h=o;s>h;h++){if(e.Double.greaterOrEqualWithPrecision(this.itemsEstimatedContextualWidth,a,t.DimensionLayoutManager._pixelPrecision))return void(this.itemsToRealizeCount=h-o);var p=0,d=void 0;d=h===o?this._owner.getVisibleSizeRatio():1;var g=n.getLeafAt(this._owner.dimension.model,h),m=r.getHeaderLabel(g);p=Math.max(p,this._owner.getEstimatedHeaderWidth(m,h));for(var f=u;c>f;f++){var y=n.getIntersection(n.getLeafAt(this._owner.otherLayoutManager.dimension.model,f),g);m=r.getCellContent(y),p=Math.max(p,this._owner.getEstimatedBodyCellWidth(m))}this.itemsEstimatedContextualWidth+=p*d*this.adjustmentFactor}this.itemsToRealizeCount=l},a.prototype._getSizeAdjustment=function(e){return e/(this.getEstimatedRowHierarchyWidth()+this.itemsEstimatedContextualWidth)},a}(i);t.ColumnRealizationManager=r;var n=function(){function e(){this.items=[],this.leafCount=0}return e}();t.RowWidths=n;var o=function(){function e(){this.maxLeafWidth=0,this.maxNonLeafWidth=0}return e}();t.RowWidth=o}(i=t.internal||(t.internal={}))}(i=t.controls||(t.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){var i=function(){function e(e,t,i){this._scrollable=!1,this._presenter=e,this.extension=t,this._presenter.initialize(this),this._row=i,this.item=null,this.type=null,this._horizontalOffset=0,this._verticalOffset=0,this._colSpan=1,this._rowSpan=1,this._contentWidth=-1,this._contentHeight=-1}return Object.defineProperty(e.prototype,"colSpan",{get:function(){return this._colSpan},set:function(e){this._colSpan!==e&&(this._presenter.onColumnSpanChanged(e),this._colSpan=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowSpan",{get:function(){return this._rowSpan},set:function(e){this._rowSpan!==e&&(this._presenter.onRowSpanChanged(e),this._rowSpan=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textAlign",{get:function(){return this._textAlign},set:function(e){e!==this._textAlign&&(this._presenter.onTextAlignChanged(e),this._textAlign=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalOffset",{get:function(){return this._horizontalOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalOffset",{get:function(){return this._verticalOffset},enumerable:!0,configurable:!0}),e.prototype.isScrollable=function(){return this._scrollable},e.prototype.clear=function(){this.isScrollable()&&this.initializeScrolling(),this._presenter.onClear(),this.setContentWidth(-1),this.setContentHeight(-1)},e.prototype.initializeScrolling=function(){this._presenter.onInitializeScrolling(),this._horizontalOffset=0,this._verticalOffset=0,this.setContentWidth(-1),this.setContentHeight(-1)},e.prototype.prepare=function(e){this.isScrollable()&&this.initializeScrolling(),this._scrollable=e},e.prototype.scrollVertically=function(e,t){if(this.isScrollable()){var i=-e*t;this._verticalOffset=i,this._presenter.onVerticalScroll(e,i),this.setContentHeight(e+i)}},e.prototype.scrollHorizontally=function(e,t){if(this.isScrollable()){var i=-e*t;this._horizontalOffset=i,this._presenter.onHorizontalScroll(e,i),this.setContentWidth(e+i)}},e.prototype.setContentWidth=function(e){e!==this._contentWidth&&(this._contentWidth=e,this._presenter.onContentWidthChanged(e))},e.prototype.setContentHeight=function(e){e!==this._contentHeight&&(this._contentHeight=e,this._presenter.onContentHeightChanged(e))},e.prototype.enableHorizontalResize=function(e,t){this._presenter.enableHorizontalResize(e,t)},e}();t.TablixCell=i;var a=function(){function t(e,t){this._presenter=e,this._presenter.initialize(this),this._contentWidth=-1,this._width=-1,this._sizeFixed=!1,this._aligningWidth=-1,this._fixedToAligningWidth=!1,this._items=[],this._itemType=null,this._footerCell=null,this._columnIndex=t}return t.prototype.initialize=function(e){this._owner=e,this._realizedRowHeaders=[],this._realizedColumnHeaders=[],this._realizedCornerCells=[],this._realizedBodyCells=[]},Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),t.prototype.getType=function(){return this._realizedCornerCells.length>0?e.TablixCellType.CornerCell:e.TablixCellType.ColumnHeader},t.prototype.getColumnHeadersOrCorners=function(){return this._realizedCornerCells.length>0?this._realizedCornerCells:this._realizedColumnHeaders},t.prototype.columnHeadersOrCornersEqual=function(e,t,i){if(this._items.length!==t.length)return!1;for(var a=this._items.length,r=0;a>r;r++)if(!this.columnHeaderOrCornerEquals(this._itemType,this._items[r],e,t[r].item,i))return!1;return!0},Object.defineProperty(t.prototype,"itemType",{get:function(){return this._itemType},enumerable:!0,configurable:!0}),t.prototype.getLeafItem=function(){return 0===this._items.length?null:this._items[this._items.length-1]},t.prototype.columnHeaderOrCornerEquals=function(t,i,a,r,n){if(t!==a)return!1;if(t===e.TablixCellType.CornerCell){if(!n.cornerCellItemEquals(i,r))return!1}else if(!n.headerItemEquals(i,r))return!1;return!0},t.prototype.OnLeafRealized=function(e){var t=this.getType(),i=this.getColumnHeadersOrCorners();if(this.columnHeadersOrCornersEqual(t,i,e))this.clearSpanningCellsWidth(this._realizedColumnHeaders);else{var a=i.length;this._items=[];for(var r=0;a>r;r++)this._items.push(i[r].item);this._itemType=t,this.clearSize()}},t.prototype.clearSpanningCellsWidth=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.colSpan>1&&i.setContentWidth(-1)}},t.prototype.addCornerCell=function(e){e._column=this,this._realizedCornerCells.push(e),e.setContentWidth(this._contentWidth)},t.prototype.addRowHeader=function(e){e._column=this,this._realizedRowHeaders.push(e),e.setContentWidth(this._contentWidth)},t.prototype.addColumnHeader=function(e,t){e._column=this,this._realizedColumnHeaders.push(e),t&&e.setContentWidth(this._contentWidth)},t.prototype.addBodyCell=function(e){e._column=this,this._realizedBodyCells.push(e),e.setContentWidth(this._contentWidth)},Object.defineProperty(t.prototype,"footer",{get:function(){return this._footerCell},set:function(e){this._footerCell=e,e._column=this,e.setContentWidth(this._contentWidth)},enumerable:!0,configurable:!0}),t.prototype.resize=function(e){if(e!==this.getContentContextualWidth()){this._contentWidth=e,this.setContentWidth(this._contentWidth),this._sizeFixed=!0,this._fixedToAligningWidth=!1,this._aligningWidth=-1;var t=this.owner._presenter;t&&t.invokeColumnResizeCallBack(this._columnIndex,e)}},t.prototype.fixSize=function(){var e=-1!==this._aligningWidth,t=e!==this._fixedToAligningWidth;
(!this._sizeFixed||t||e)&&(-1===this._aligningWidth?(this._contentWidth+=1,this.setContentWidth(this._contentWidth)):this.setContentWidth(this._aligningWidth),this._sizeFixed=!0,this._fixedToAligningWidth=-1!==this._aligningWidth)},t.prototype.clearSize=function(){this._contentWidth=-1,this.setContentWidth(this._contentWidth),this._sizeFixed=!1},t.prototype.getContentContextualWidth=function(){return this._contentWidth},t.prototype.getCellIContentContextualWidth=function(e){return this._presenter.getCellContentWidth(e)},t.prototype.getCellSpanningWidthWithScrolling=function(e,t){var i=this.getContextualWidth()+this.getScrollingOffset();if(e.colSpan>1)for(var a=this.getIndex(t),r=t.realizedColumns,n=1;n<e.colSpan;n++)i+=r[n+a].getContextualWidth();return i},t.prototype.getScrollingOffset=function(){var e=0;return this._realizedColumnHeaders.length>0&&(e=this._realizedColumnHeaders[this._realizedColumnHeaders.length-1].horizontalOffset),e},t.prototype.getContextualWidth=function(){return(-1===this._width||-1===this._contentWidth)&&(this._width=this._presenter.getWidth()),this._width},t.prototype.calculateSize=function(){if(this._sizeFixed)return this._contentWidth;for(var e=0,t=this._realizedColumnHeaders.length,i=0;t>i;i++){var a=this._realizedColumnHeaders[i];1===a.colSpan&&(e=Math.max(e,this._presenter.getCellContentWidth(a)))}t=this._realizedRowHeaders.length;for(var i=0;t>i;i++){var a=this._realizedRowHeaders[i];1===a.colSpan&&(e=Math.max(e,this._presenter.getCellContentWidth(a)))}t=this._realizedCornerCells.length;for(var i=0;t>i;i++)e=Math.max(e,this._presenter.getCellContentWidth(this._realizedCornerCells[i]));t=this._realizedBodyCells.length;for(var i=0;t>i;i++)e=Math.max(e,this._presenter.getCellContentWidth(this._realizedBodyCells[i]));return null!==this._footerCell&&1===this._footerCell.colSpan&&(e=Math.max(e,this._presenter.getCellContentWidth(this._footerCell))),this._contentWidth=e},t.prototype.setAligningContextualWidth=function(e){this._aligningWidth=e},t.prototype.getAligningContextualWidth=function(){return this._aligningWidth},t.prototype.setContentWidth=function(e){for(var t=this._realizedColumnHeaders.length,i=0;t>i;i++){var a=this._realizedColumnHeaders[i];1===a.colSpan&&a.setContentWidth(e)}t=this._realizedRowHeaders.length;for(var i=0;t>i;i++){var a=this._realizedRowHeaders[i];1===a.colSpan&&a.setContentWidth(e)}t=this._realizedCornerCells.length;for(var i=0;t>i;i++)this._realizedCornerCells[i].setContentWidth(e);t=this._realizedBodyCells.length;for(var i=0;t>i;i++)this._realizedBodyCells[i].setContentWidth(e);null!==this._footerCell&&1===this._footerCell.colSpan&&this._footerCell.setContentWidth(e),this._width=-1},t.prototype.getTablixCell=function(){var e=this._realizedColumnHeaders.length>0?this._realizedColumnHeaders:this._realizedCornerCells;return e[e.length-1]},t.prototype.getIndex=function(e){return e.realizedColumns.indexOf(this)},t.prototype.getHeaders=function(){return this._realizedColumnHeaders},t.prototype.getOtherDimensionHeaders=function(){return this._realizedRowHeaders},t.prototype.getCellContextualSpan=function(e){return e.colSpan},t.prototype.getOtherDimensionOwner=function(e){return e._row},t}();t.TablixColumn=a;var r=function(){function t(e){this._contentHeight=-1,this._presenter=e,this._presenter.initialize(this),this._allocatedCells=[],this._heightFixed=!1,this._contentHeight=-1,this._height=-1}return t.prototype.initialize=function(e){this._owner=e,this._realizedRowHeaders=[],this._realizedBodyCells=[],this._realizedCornerCells=[],this._realizedColumnHeaders=[],this._realizedCellsCount=0},Object.defineProperty(t.prototype,"presenter",{get:function(){return this._presenter},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),t.prototype.releaseUnusedCells=function(e){this.releaseCells(e,this._realizedCellsCount)},t.prototype.releaseAllCells=function(e){this.releaseCells(e,0)},t.prototype.releaseCells=function(e,t){for(var i=this._allocatedCells,a=i.length,r=t;a>r;r++){var n=i[r];e._unbindCell(n),n.clear()}},t.prototype.moveScrollableCellsToEnd=function(e){for(var t=Math.max(this._realizedRowHeaders.length,this._realizedCornerCells.length),i=t;t+e>i;i++){var a=this._allocatedCells[i];this._presenter.onRemoveCell(a),this._presenter.onAppendCell(a),this._allocatedCells.push(a)}this._allocatedCells.splice(t,e)},t.prototype.moveScrollableCellsToStart=function(e){for(var t=Math.max(this._realizedRowHeaders.length,this._realizedCornerCells.length),i=t;t+e>i;i++){var a=this._allocatedCells.pop();this._presenter.onRemoveCell(a),this._presenter.onInsertCellBefore(a,this._allocatedCells[t]),this._allocatedCells.splice(t,0,a)}},t.prototype.getOrCreateCornerCell=function(e){var t=this.getOrCreateCell();return t.prepare(!1),e.addCornerCell(t),this._realizedCornerCells.push(t),t.setContentHeight(this._contentHeight),t},t.prototype.getOrCreateRowHeader=function(e,t,i){var a=this.getOrCreateCell();return a.prepare(t),e.addRowHeader(a),this._realizedRowHeaders.push(a),i&&a.setContentHeight(this._contentHeight),a},t.prototype.getOrCreateColumnHeader=function(e,t,i){var a=this.getOrCreateCell();return a.prepare(t),e.addColumnHeader(a,i),this._realizedColumnHeaders.push(a),a.setContentHeight(this._contentHeight),a},t.prototype.getOrCreateBodyCell=function(e,t){var i=this.getOrCreateCell();return i.prepare(t),e.addBodyCell(i),this._realizedBodyCells.push(i),i.setContentHeight(this._contentHeight),i},t.prototype.getOrCreateFooterRowHeader=function(e){var t=this.getOrCreateCell();return t.prepare(!1),e.footer=t,this._realizedRowHeaders.push(t),t.setContentHeight(this._contentHeight),t},t.prototype.getOrCreateFooterBodyCell=function(e,t){var i=this.getOrCreateCell();return i.prepare(t),e.footer=i,this._realizedBodyCells.push(i),i.setContentHeight(this._contentHeight),i},t.prototype.getRowHeaderLeafIndex=function(){for(var t=-1,i=this._allocatedCells.length,a=0;i>a&&this._allocatedCells[a].type===e.TablixCellType.RowHeader;a++)t++;return t},t.prototype.getAllocatedCellAt=function(e){return this._allocatedCells[e]},t.prototype.moveCellsBy=function(e){if(0!==this._allocatedCells.length)if(e>0)for(var t=this._allocatedCells[0],i=0;e>i;i++){var a=this.createCell(this);this._presenter.onInsertCellBefore(a,t),this._allocatedCells.unshift(a),t=a}else{e=-e;for(var i=0;e>i;i++)this._presenter.onRemoveCell(this._allocatedCells[i]);this._allocatedCells.splice(0,e)}},t.prototype.getRealizedCellCount=function(){return this._realizedCellsCount},t.prototype.getRealizedHeadersCount=function(){return this._realizedRowHeaders.length},t.prototype.getRealizedHeaderAt=function(e){return this._realizedRowHeaders[e]},t.prototype.getTablixCell=function(){var e;return e=this._realizedRowHeaders.length>0?this._realizedRowHeaders:this._realizedCornerCells.length>0?this._realizedCornerCells:this._realizedColumnHeaders,e[e.length-1]},t.prototype.getOrCreateEmptySpaceCell=function(){var e=this._allocatedCells[this._realizedCellsCount];return void 0===e&&(e=this.createCell(this),this._allocatedCells[this._realizedCellsCount]=e,this._presenter.onAppendCell(e)),e},t.prototype.createCell=function(e){var t=this._presenter.createCellPresenter(this._owner.owner.layoutManager.getLayoutKind());return new i(t,t,this)},t.prototype.getOrCreateCell=function(){var e=this._allocatedCells[this._realizedCellsCount];return void 0===e?(e=this.createCell(this),this._allocatedCells[this._realizedCellsCount]=e,this._presenter.onAppendCell(e)):(e.colSpan=1,e.rowSpan=1),this._realizedCellsCount=this._realizedCellsCount+1,e},t.prototype.resize=function(e){e!==this.getContentContextualWidth()&&(this._contentHeight=e,this.setContentHeight(),this._heightFixed=!0,this.setAligningContextualWidth(-1))},t.prototype.fixSize=function(){this.sizeFixed()||(this.setContentHeight(),this._heightFixed=!0)},t.prototype.getContentContextualWidth=function(){return this._contentHeight},t.prototype.getCellIContentContextualWidth=function(e){return this.presenter.getCellContentHeight(e)},t.prototype.getCellSpanningHeight=function(e,t){var i=this.getContextualWidth();if(e.rowSpan>1)for(var a=this.getIndex(t),r=t.realizedRows,n=1;n<e.rowSpan;n++)i+=r[n+a].getContextualWidth();return i},t.prototype.getContextualWidth=function(){return(-1===this._height||-1===this._contentHeight)&&(this._height=this._presenter.getHeight()),this._height},t.prototype.sizeFixed=function(){return this._heightFixed},t.prototype.calculateSize=function(){if(this._heightFixed)return this._contentHeight;for(var e=0,t=this._realizedRowHeaders.length,i=0;t>i;i++){var a=this._realizedRowHeaders[i];1===a.rowSpan&&(e=Math.max(e,this._presenter.getCellContentHeight(a)))}t=this._realizedCornerCells.length;for(var i=0;t>i;i++)e=Math.max(e,this._presenter.getCellContentHeight(this._realizedCornerCells[i]));t=this._realizedColumnHeaders.length;for(var i=0;t>i;i++){var a=this._realizedColumnHeaders[i];1===a.rowSpan&&(e=Math.max(e,this._presenter.getCellContentHeight(a)))}t=this._realizedBodyCells.length;for(var i=0;t>i;i++)e=Math.max(e,this._presenter.getCellContentHeight(this._realizedBodyCells[i]));return this._contentHeight=e},t.prototype.setAligningContextualWidth=function(e){},t.prototype.getAligningContextualWidth=function(){return-1},t.prototype.setContentHeight=function(){for(var e=this._realizedRowHeaders.length,t=0;e>t;t++){var i=this._realizedRowHeaders[t];i.rowSpan&&i.setContentHeight(this._contentHeight)}e=this._realizedCornerCells.length;for(var t=0;e>t;t++)this._realizedCornerCells[t].setContentHeight(this._contentHeight);e=this._realizedColumnHeaders.length;for(var t=0;e>t;t++){var i=this._realizedColumnHeaders[t];1===i.rowSpan&&i.setContentHeight(this._contentHeight)}e=this._realizedBodyCells.length;for(var t=0;e>t;t++)this._realizedBodyCells[t].setContentHeight(this._contentHeight);this._height=-1},t.prototype.getIndex=function(e){return e.realizedRows.indexOf(this)},t.prototype.getHeaders=function(){return this._realizedRowHeaders},t.prototype.getOtherDimensionHeaders=function(){return this._realizedColumnHeaders},t.prototype.getCellContextualSpan=function(e){return e.rowSpan},t.prototype.getOtherDimensionOwner=function(e){return e._column},t}();t.TablixRow=r;var n=function(){function e(e){this._presenter=e,this._footerRow=null}return e.prototype.initialize=function(e,t,i){this._owner=e,this._presenter.initialize(this,t,i,e),this.fillColumnsProportionally=!1,this._realizedRows=[],this._realizedColumns=[],this._emptySpaceHeaderCell=null,this._emptyFooterSpaceCell=null},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillColumnsProportionally",{get:function(){return this._fillColumnsProportionally},set:function(e){this._fillColumnsProportionally!==e&&(this._fillColumnsProportionally=e,this._presenter.onFillColumnsProportionallyChanged(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realizedColumns",{get:function(){return this._realizedColumns},set:function(e){this._realizedColumns=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realizedRows",{get:function(){return this._realizedRows},set:function(e){this._realizedRows=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerRow",{get:function(){return this._footerRow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptySpaceHeaderCell",{get:function(){return this._emptySpaceHeaderCell},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptySpaceFooterCell",{get:function(){return this._emptyFooterSpaceCell},enumerable:!0,configurable:!0}),e.prototype.ShowEmptySpaceCells=function(e,t){0!==this._realizedRows.length&&(0===this._realizedRows.length||this._emptySpaceHeaderCell||(this._emptySpaceHeaderCell=this._realizedRows[0].getOrCreateEmptySpaceCell(),this._emptySpaceHeaderCell.rowSpan=e,this._emptySpaceHeaderCell.colSpan=1,this._emptySpaceHeaderCell.setContentWidth(t)),this._footerRow&&null===this._emptyFooterSpaceCell&&(this._emptyFooterSpaceCell=this._footerRow.getOrCreateEmptySpaceCell(),this._emptyFooterSpaceCell.rowSpan=1,this._emptyFooterSpaceCell.colSpan=1,this._emptyFooterSpaceCell.setContentWidth(t)))},e.prototype.HideEmptySpaceCells=function(){this._emptySpaceHeaderCell&&(this._emptySpaceHeaderCell.clear(),this._emptySpaceHeaderCell=null),this._emptyFooterSpaceCell&&(this._emptyFooterSpaceCell.clear(),this._emptyFooterSpaceCell=null)},e.prototype.onStartRenderingSession=function(e){e&&(this.clearRows(),this.clearColumns())},e.prototype.onStartRenderingIteration=function(){this.initializeRows(),this.initializeColumns()},e.prototype.onEndRenderingIteration=function(){var e=this._rows;if(void 0!==e)for(var t=e.length,i=0;t>i;i++)e[i].releaseUnusedCells(this._owner);this._footerRow&&this._footerRow.releaseUnusedCells(this._owner)},e.prototype.getOrCreateRow=function(e){var t=this._rows[e];return void 0===t&&(t=new r(this._presenter.createRowPresenter()),t.initialize(this),this._presenter.onAppendRow(t),this._rows[e]=t),void 0===this._realizedRows[e]&&(this._realizedRows[e]=t),t},e.prototype.getOrCreateFootersRow=function(){return null===this._footerRow&&(this._footerRow=new r(this._presenter.createRowPresenter()),this._footerRow.initialize(this),this._presenter.onAddFooterRow(this._footerRow)),this._footerRow},e.prototype.moveRowsToEnd=function(e,t){for(var i=0;t>i;i++){var a=this._rows[i+e];this._presenter.onRemoveRow(a),this._presenter.onAppendRow(a),this._rows.push(a)}this._rows.splice(e,t)},e.prototype.moveRowsToStart=function(e,t){for(var i=this._rows[e],a=0;t>a;a++){var r=this._rows.pop();this._presenter.onRemoveRow(r),this._presenter.onInsertRowBefore(r,i),this._rows.splice(e+a,0,r)}},e.prototype.moveColumnsToEnd=function(e,t){for(var i=this._rows[0]._realizedCornerCells.length,a=Math.max(this._columns[i]._realizedColumnHeaders.length-1,0),r=a;r<this._rows.length;r++)this._rows[r].moveScrollableCellsToEnd(t);for(var r=0;t>r;r++){var n=this._columns[r+e];this._columns.push(n)}this._columns.splice(e,t)},e.prototype.moveColumnsToStart=function(e,t){for(var i=this._rows[0]._realizedCornerCells.length,a=Math.max(this._columns[i]._realizedColumnHeaders.length-1,0),r=a;r<this._rows.length;r++)this._rows[r].moveScrollableCellsToStart(t);for(var r=0;t>r;r++){var n=this._columns.pop();this._columns.splice(e+r,0,n)}},e.prototype.getOrCreateColumn=function(e){var t=this._columns[e];return void 0===t&&(t=new a(this._presenter.createColumnPresenter(e),e),t.initialize(this),this._columns[e]=t),void 0===this._realizedColumns[e]&&(this._realizedColumns[e]=t),t},e.prototype.initializeColumns=function(){this._columns||(this._columns=[]);for(var e=this._columns.length,t=0;e>t;t++)this._columns[t].initialize(this);this._realizedColumns=[]},e.prototype.clearColumns=function(){this._columns=null,this._realizedColumns=null},e.prototype.initializeRows=function(){var e=this._owner.rowDimension.hasFooter()&&null!==this._footerRow;this._realizedRows=[],this._rows||(this._rows=[]);for(var t=this._rows,i=t.length,a=0;i>a;a++)t[a].initialize(this);e&&(this._footerRow||this.getOrCreateFootersRow(),this._footerRow.initialize(this))},e.prototype.clearRows=function(){var e=this._rows;if(e){for(var t=e.length,i=0;t>i;i++)e[i].releaseAllCells(this._owner);this._footerRow&&this._footerRow.releaseAllCells(this._owner),this._presenter.onClear(),this._footerRow=null,this._rows=null,this._realizedRows=null}},e.prototype.getWidth=function(){return this._presenter.getWidth()},e.prototype.getHeight=function(){return this._presenter.getHeight()},e}();t.TablixGrid=n}(t=e.internal||(e.internal={}))}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){var i;!function(i){var a=jsCommon.PixelConverter,r=function(){function e(){}return Object.defineProperty(e.prototype,"visibleWidth",{get:function(){return this._viewport?this._viewport.width:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleHeight",{get:function(){return this._viewport?this._viewport.height:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridWidth",{get:function(){return this.visibleWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridHeight",{get:function(){return this.visibleHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowHeight",{get:function(){return this._cellHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this._cellWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellHeight",{get:function(){return this._cellHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentWidth",{get:function(){return this._cellWidth-e.DashboardCellPaddingLeft-e.DashboardCellPaddingRight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentHeight",{get:function(){return this._cellHeight},enumerable:!0,configurable:!0}),e.prototype.updateColumnCount=function(e){this._columnCount=e},e.prototype.updateRowHeight=function(e){this._cellHeight=e},e.prototype.updateScalingFactor=function(e){this._scalingFactor=e,this._cellWidth=this.computeColumnWidth(this._columnCount)},e.prototype.updateViewport=function(e){this._viewport=e,this._cellWidth=this.computeColumnWidth(this._columnCount),this._cellHeight=this.computeColumnHeight()},e.prototype.computeColumnWidth=function(t){var i=this._scalingFactor;i||(i=1);var a=i*e.TablixMinimumColumnWidth,r=Math.floor(this._viewport.width/a);return this.fitToColumnCount(r,t)},e.prototype.computeColumnHeight=function(){if(!this.hasImageContent)return this._cellHeight;var e=this._viewport.width;return 250>=e?20:510>=e?51:770>=e?52:void 0},e.prototype.fitToColumnCount=function(e,t){var i=Math.min(e,t);return Math.floor(this._viewport.width/i)},e.DashboardCellPaddingLeft=10,e.DashboardCellPaddingRight=5,e.TablixMinimumColumnWidth=75,e}();i.SizeComputationManager=r;var n=function(){function t(e,t,i){this._owner=e,this._grid=t,this._lastScrollOffset=null,this._isScrolling=!1,this._fixedSizeEnabled=!0,this._done=!1,this._realizationManager=i}return Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"realizationManager",{get:function(){return this._realizationManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fixedSizeEnabled",{get:function(){return this._fixedSizeEnabled},set:function(e){this._fixedSizeEnabled=e},enumerable:!0,configurable:!0}),t.prototype.onCornerCellRealized=function(e,t,i){this._realizationManager.onCornerCellRealized(e,t)},t.prototype.onHeaderRealized=function(e,t,i){this._realizationManager.onHeaderRealized(e,t,i)},Object.defineProperty(t.prototype,"needsToRealize",{get:function(){return this._realizationManager.needsToRealize},enumerable:!0,configurable:!0}),t.prototype.getVisibleSizeRatio=function(){return 1-this.dimension.getFractionScrollOffset()},Object.defineProperty(t.prototype,"alignToEnd",{get:function(){return this._alignToEnd},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"done",{get:function(){return this._done},enumerable:!0,configurable:!0}),t.prototype._requiresMeasure=function(){return!0},t.prototype.startScrollingSession=function(){this._isScrolling=!0},t.prototype.endScrollingSession=function(){this._isScrolling=!1},t.prototype.isScrolling=function(){return this._isScrolling},t.prototype.isResizing=function(){return!1},t.prototype.getOtherHierarchyContextualHeight=function(){var e=this.dimension.otherDimension,t=e.getDepth(),i=0,a=this._getRealizedItems();if(a.length>0)for(var r=0;t>r;r++)i+=a[r].getContextualWidth();return i},t.prototype._isAutoSized=function(){return!1},t.prototype.onStartRenderingSession=function(){this._measureEnabled=this._requiresMeasure(),this._gridOffset=this.dimension.otherDimension.getDepth()},t.prototype.onEndRenderingSession=function(){this._realizationManager.onEndRenderingSession(),this._alignToEnd=!1,this._done=!1,this._measureEnabled=!0,this._sendDimensionsToControl()},t.prototype._sendDimensionsToControl=function(){},Object.defineProperty(t.prototype,"measureEnabled",{get:function(){return this._measureEnabled},enumerable:!0,configurable:!0}),t.prototype.getFooterContextualWidth=function(){return 0},t.prototype.onStartRenderingIteration=function(e,t){this._measureEnabled&&!this._done&&(this._contextualWidthToFill=(t-this.otherScrollbarContextualWidth)*this.getGridScale()-this.getFooterContextualWidth()),this._realizationManager.onStartRenderingIteration(),e?this._lastScrollOffset=null:null!==this._lastScrollOffset&&this.swapElements()},Object.defineProperty(t.prototype,"allItemsRealized",{get:function(){return this.getRealizedItemsCount()-this._gridOffset===this.dimension.getItemsCount()||0===this.dimension.getItemsCount()},enumerable:!0,configurable:!0}),t.prototype.onEndRenderingIteration=function(){if(!this._done){if(!this._measureEnabled)return this._lastScrollOffset=this.dimension.scrollOffset,void(this._done=!0);var i,a=this.getGridContextualWidth(),r=e.Double.greaterOrEqualWithPrecision(a,this._contextualWidthToFill,t._pixelPrecision),n=this.allItemsRealized;i=r?this.scrollForwardToAlignEnd(a):this.scrollBackwardToFill(a),this._realizationManager.onEndRenderingIteration(a,r);var o=this.dimension.scrollbar.visible;this.updateScrollbar(a),this._done=(r||n)&&this.dimension.scrollbar.visible===o&&e.Double.equalWithPrecision(i,this.dimension.scrollOffset,t._scrollOffsetPrecision),this.dimension.scrollOffset=i,this._lastScrollOffset=this.dimension.scrollOffset}},t.prototype.getScrollDeltaWithinPage=function(){if(null!==this._lastScrollOffset){var e=this.dimension.getIntegerScrollOffset()-Math.floor(this._lastScrollOffset);if(Math.abs(e)<this.getRealizedItemsCount()-this.dimension.otherDimension.getDepth())return e}return null},t.prototype.swapElements=function(){var e=this.getScrollDeltaWithinPage();if(null!==e){var t=this.dimension.otherDimension.getDepth();Math.abs(e)<this.getRealizedItemsCount()-t&&(e>0?this._moveElementsToBottom(t,e):0>e&&this._moveElementsToTop(t,-e))}},t.prototype._getRealizedItems=function(){return null},t.prototype.getRealizedItemsCount=function(){var e=this._getRealizedItems();return e.length},t.prototype._moveElementsToBottom=function(e,t){},t.prototype._moveElementsToTop=function(e,t){},t.prototype.isScrollingWithinPage=function(){return null!==this.getScrollDeltaWithinPage()},t.prototype.getGridContextualWidth=function(){return 0},t.prototype.updateScrollbar=function(e){var t=this.dimension.scrollbar;t.viewMin=this.dimension.scrollOffset,t.min=0,t.max=this.dimension.getItemsCount(),t.viewSize=this.getViewSize(e),this.dimension.scrollbar.show(this.canScroll(e))},t.prototype.getViewSize=function(i){var a=this.getRealizedItemsCount();if(0===a)return 0;for(var r=this._gridOffset,n=0,o=0,s=this._contextualWidthToFill,l=s-this.getOtherHierarchyContextualHeight(),u=this.getMeaurementError(i),c=r;a>c;c++){var h=void 0;h=c===r?this.getVisibleSizeRatio():1;var p=this.getItemContextualWidthWithScrolling(c)*u;if(o+=p,n+=h,e.Double.greaterWithPrecision(o,l,t._pixelPrecision)){n-=(o-l)/p*h;break}}return n},t.prototype.isScrollableHeader=function(e,t,i){if(0!==i||0===this.dimension.getFractionScrollOffset())return!1;var a=this.dimension._hierarchyNavigator;if(a.isLeaf(e))return!0;var r=e,n=t;do{if(n=a.getChildren(r),r=this.dimension.getFirstVisibleItem(a.getLevel(r)+1),void 0===r)break;if(!a.isLastItem(r,n))return!1}while(!a.isLeaf(r));return!0},t.prototype.reachedEnd=function(){return this.dimension.getIntegerScrollOffset()+(this.getRealizedItemsCount()-this._gridOffset)>=this.dimension.getItemsCount()},t.prototype.scrollBackwardToFill=function(i){var a=this.dimension.scrollOffset;if(this.reachedEnd()){var r=this._contextualWidthToFill-i;if(this.dimension.getItemsCount()>0){var n=i/(this.getRealizedItemsCount()-this.dimension.getFractionScrollOffset());a=this.dimension.getValidScrollOffset(Math.floor(this.dimension.scrollOffset-r/n))}this._alignToEnd=!e.Double.equalWithPrecision(a,this.dimension.scrollOffset,t._scrollOffsetPrecision)}return a},t.prototype.getItemContextualWidth=function(e){var t=this._getRealizedItems();return e>=t.length?null:t[e].getContextualWidth()},t.prototype.getItemContextualWidthWithScrolling=function(e){return this.getSizeWithScrolling(this.getItemContextualWidth(e),e)},t.prototype.getSizeWithScrolling=function(e,t){var i;return i=this._gridOffset===t?this.getVisibleSizeRatio():1,e*i},t.prototype.getGridContextualWidthFromItems=function(){for(var e=this.getRealizedItemsCount(),t=0,i=0;e>i;i++)t+=this.getItemContextualWidthWithScrolling(i);return t},t.prototype.getMeaurementError=function(e){return e/this.getGridContextualWidthFromItems()},t.prototype.scrollForwardToAlignEnd=function(i){var a=this.dimension.scrollOffset;if(this._alignToEnd){var r=e.Double.equalWithPrecision(i,this._contextualWidthToFill,t._pixelPrecision);if(!r)for(var n=this.getRealizedItemsCount(),o=this._gridOffset,s=i-this._contextualWidthToFill,l=this.getMeaurementError(i),u=o;n>u;u++){var c=this.getItemContextualWidth(u)*l;if(!e.Double.lessWithPrecision(c,s,t._pixelPrecision)){var h=o===u?1-this.dimension.getFractionScrollOffset():1;a=this.dimension.getValidScrollOffset(this.dimension.scrollOffset+(u-o)+s*h/c);break}s-=c}this._alignToEnd=!r}return a},Object.defineProperty(t.prototype,"dimension",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"otherLayoutManager",{get:function(){return this.dimension.otherDimension.layoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contextualWidthToFill",{get:function(){return this._contextualWidthToFill},enumerable:!0,configurable:!0}),t.prototype.getGridScale=function(){return 0},Object.defineProperty(t.prototype,"otherScrollbarContextualWidth",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.getActualContextualWidth=function(e){return this._isAutoSized()&&!this.canScroll(e)?e:this._contextualWidthToFill},t.prototype.canScroll=function(e){return!1},t.prototype.calculateSizes=function(){this.fixedSizeEnabled&&(this.calculateContextualWidths(),this.calculateSpans())},t.prototype._calculateSize=function(e){return null},t.prototype.calculateContextualWidths=function(){for(var e=this._getRealizedItems(),t=e.length,i=0;t>i;i++){var a=e[i];this.measureEnabled&&a.setAligningContextualWidth(-1),this._calculateSize(a)}},t.prototype.calculateSpans=function(){this.measureEnabled&&(this.updateNonScrollableItemsSpans(),this.updateScrollableItemsSpans())},t.prototype.updateNonScrollableItemsSpans=function(){for(var e=this.otherLayoutManager._getRealizedItems(),t=e.length,i=this.dimension.getDepth(),a=i;t>a;a++){var r=e[a];this.updateSpans(r,r.getHeaders())}},t.prototype.updateScrollableItemsSpans=function(){for(var e=this.otherLayoutManager._getRealizedItems(),t=Math.min(this.dimension.getDepth(),e.length),i=0;t>i;i++){var a=e[i];this.updateSpans(a,a.getOtherDimensionHeaders())}},t.prototype.fixSizes=function(){if(this.fixedSizeEnabled)for(var e=this._getRealizedItems(),t=e.length,i=0;t>i;i++)e[i].fixSize()},t.prototype.updateSpans=function(e,t){for(var i=this._getRealizedItems(),a=t.length,r=0;a>r;r++){var n=t[r],o=e.getOtherDimensionOwner(n),s=o.getCellContextualSpan(n);if(s>1)for(var l=0,u=o.getIndex(this._grid),c=0;s>c;c++){var h=i[c+u];l+=this.getSizeWithScrolling(h.getContentContextualWidth(),c+u),c===s-1&&this.updateLastChildSize(n,h,l)}}},t.prototype.updateLastChildSize=function(e,t,i){var a=t.getCellIContentContextualWidth(e)-i;a>0&&t.setAligningContextualWidth(Math.max(t.getAligningContextualWidth(),a+t.getContentContextualWidth()))},t._pixelPrecision=1.0001,t._scrollOffsetPrecision=.01,t}();i.DimensionLayoutManager=n;var o=function(){function e(e,t,i){this.column=e,this.item=e.getLeafItem(),this.itemType=e.itemType,this.startColumnWidth=t,this.resizingDelta=0,this.animationFrame=null,this.scale=i}return e}();i.ResizeState=o;var s=function(e){function i(t,i,a){e.call(this,t,i,a),a.owner=this,this.fillProportionally=!1,this._resizeState=null}return __extends(i,e),Object.defineProperty(i.prototype,"dimension",{get:function(){return this.owner.owner.columnDimension},enumerable:!0,configurable:!0}),i.prototype.isResizing=function(){return null!==this._resizeState},Object.defineProperty(i.prototype,"fillProportionally",{get:function(){return this._grid.fillColumnsProportionally},set:function(e){this._grid.fillColumnsProportionally=e},enumerable:!0,configurable:!0}),i.prototype.getGridScale=function(){return this._grid._presenter.getScreenToCssRatioX()},Object.defineProperty(i.prototype,"otherScrollbarContextualWidth",{get:function(){return this.dimension.otherDimension.scrollbar.visible?t.HTMLElementUtils.getElementWidth(this.dimension.otherDimension.scrollbar.element):0},enumerable:!0,configurable:!0}),i.prototype._getRealizedItems=function(){return this._grid.realizedColumns||(this._grid.realizedColumns=[]),this._grid.realizedColumns},i.prototype._moveElementsToBottom=function(e,t){this._grid.moveColumnsToEnd(e,t)},i.prototype._moveElementsToTop=function(e,t){this._grid.moveColumnsToStart(e,t)},i.prototype._requiresMeasure=function(){return!this.isScrolling()&&!this.otherLayoutManager.isScrolling()||this.isScrolling()||this.isResizing()},i.prototype.getGridContextualWidth=function(){return this._grid.getWidth()},i.prototype.getFirstVisibleColumn=function(){return this._grid.realizedColumns[this._gridOffset]},i.prototype._isAutoSized=function(){return this.owner.owner.autoSizeWidth},i.prototype.applyScrolling=function(){var e=this.dimension.getFractionScrollOffset(),t=0;if(0!==e){var i=this.getFirstVisibleColumn();void 0!==i&&(t=i.getContextualWidth(),this.scroll(i,t,e))}},i.prototype.scroll=function(e,t,i){this.scrollCells(e._realizedColumnHeaders,t,i),this.scrollBodyCells(this._grid.realizedRows,t,i),null!==e.footer&&e.footer.scrollHorizontally(t,i)},i.prototype.scrollCells=function(e,t,i){for(var a=e.length,r=0;a>r;r++)e[r].scrollHorizontally(t,i)},i.prototype.scrollBodyCells=function(e,t,i){for(var a,r,n=e.length,o=0;n>o;o++)a=e[o]._realizedBodyCells,void 0!==a&&(r=a[0],void 0!==r&&r.scrollHorizontally(t,i))},i.prototype.onStartResize=function(e,i,a){this._resizeState=new o(e._column,e._column.getContentContextualWidth(),t.HTMLElementUtils.getAccumulatedScale(this.owner.owner.container))},i.prototype.onResize=function(e,t,a){var r=this;this.isResizing()&&(this._resizeState.resizingDelta=Math.max(t/this._resizeState.scale,i.minColumnWidth-this._resizeState.startColumnWidth),null===this._resizeState.animationFrame&&(this._resizeState.animationFrame=requestAnimationFrame(function(){return r.performResizing()})))},i.prototype.onEndResize=function(e){this.isResizing()&&null!==this._resizeState.animationFrame&&this.performResizing(),this._resizeState=null},i.prototype.onReset=function(e){this._resizeState=new o(e._column,-1,1),e._column.clearSize(),this.owner.owner.refresh(!1),this._resizeState=null},i.prototype.updateItemToResizeState=function(e){if(null!==this._resizeState)for(var t=e.length,i=this.owner.owner.hierarchyNavigator,a=this.otherLayoutManager.dimension.getDepth(),r=a;t>r;r++){var n=e[r];if(n.columnHeaderOrCornerEquals(this._resizeState.itemType,this._resizeState.item,n.itemType,n.getLeafItem(),i)&&n!==this._resizeState.column){this._resizeState.column=n,n.resize(this._resizeState.startColumnWidth+this._resizeState.resizingDelta);break}}},i.prototype.performResizing=function(){if(null!==this._resizeState){this._resizeState.animationFrame=null;var e=this._resizeState.startColumnWidth+this._resizeState.resizingDelta;this._resizeState.column.resize(e),this.owner.owner.refresh(!1)}},i.prototype._sendDimensionsToControl=function(){
var e=this.getGridContextualWidth(),t=this.getActualContextualWidth(e),i=this.getOtherHierarchyContextualHeight(),a=this.getGridScale();this.owner.owner.updateColumnDimensions(i/a,(t-i)/a,this.getViewSize(e))},i.prototype.getEstimatedHeaderWidth=function(e,t){return-1},i.prototype.getEstimatedBodyCellWidth=function(e){return-1},i.minColumnWidth=10,i}(n);i.ColumnLayoutManager=s;var l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getEstimatedHeaderWidth=function(e,t){return this.ignoreColumn(t)?0:this.owner.getCellWidth(void 0)},t.prototype.getEstimatedBodyCellWidth=function(e){return this.owner.getCellWidth(void 0)},t.prototype.canScroll=function(e){return!1},t.prototype._calculateSize=function(e){var t=e.getIndex(this._grid),i=0;return this.ignoreColumn(t)||(i=this.owner.getContentWidth(void 0)),e.resize(i),i},t.prototype.ignoreColumn=function(e){return 0===e&&!this.owner.binder.hasRowGroups()},t}(s);i.DashboardColumnLayoutManager=l;var u=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.getEstimatedHeaderWidth=function(e,t){return this.owner.getEstimatedTextWidth(e)},i.prototype.getEstimatedBodyCellWidth=function(e){return this.owner.getEstimatedTextWidth(e)},i.prototype.calculateContextualWidths=function(){for(var e=this._getRealizedItems(),t=[],i=0;i<e.length;i++){var a=e[i];this.measureEnabled&&a.setAligningContextualWidth(-1),t.push(this._calculateSize(a))}this.owner.columnWidthsToPersist=t},i.prototype.canScroll=function(t){return!e.Double.equalWithPrecision(this.dimension.scrollOffset,0,n._scrollOffsetPrecision)||this.getRealizedItemsCount()-this._gridOffset<this.dimension.getItemsCount()&&this._contextualWidthToFill>0||e.Double.greaterWithPrecision(t,this._contextualWidthToFill,n._pixelPrecision)},i.prototype._calculateSize=function(e){return e.calculateSize()},i}(s);i.CanvasColumnLayoutManager=u;var c=function(e){function i(t,i,a){e.call(this,t,i,a),a.owner=this}return __extends(i,e),Object.defineProperty(i.prototype,"dimension",{get:function(){return this.owner.owner.rowDimension},enumerable:!0,configurable:!0}),i.prototype.getGridScale=function(){return this._grid._presenter.getScreenToCssRatioY()},Object.defineProperty(i.prototype,"otherScrollbarContextualWidth",{get:function(){return this.dimension.otherDimension.scrollbar.visible?t.HTMLElementUtils.getElementHeight(this.dimension.otherDimension.scrollbar.element):0},enumerable:!0,configurable:!0}),i.prototype.startScrollingSession=function(){e.prototype.startScrollingSession.call(this)},i.prototype._getRealizedItems=function(){return this._grid.realizedRows||(this._grid.realizedRows=[]),this._grid.realizedRows},i.prototype._moveElementsToBottom=function(e,t){this._grid.moveRowsToEnd(e,t)},i.prototype._moveElementsToTop=function(e,t){this._grid.moveRowsToStart(e,t)},i.prototype._requiresMeasure=function(){return!this.isScrolling()&&!this.otherLayoutManager.isScrolling()&&!this.otherLayoutManager.isResizing()||this.isScrolling()&&this.dimension.getIntegerScrollOffset()+(this.getRealizedItemsCount()-this._gridOffset)>=this.dimension.getItemsCount()},i.prototype.getGridContextualWidth=function(){return this._grid.getHeight()},i.prototype.getFirstVisibleRow=function(){return this._grid.realizedRows[this._gridOffset]},i.prototype._isAutoSized=function(){return this.owner.owner.autoSizeHeight},i.prototype.applyScrolling=function(){var e=this.dimension.getFractionScrollOffset(),t=0;if(0!==e){var i=this.getFirstVisibleRow();i&&(t=i.getContextualWidth(),this.scroll(i,t,e))}},i.prototype.scroll=function(e,t,i){this.scrollCells(e._realizedRowHeaders,t,i),this.scrollCells(e._realizedBodyCells,t,i)},i.prototype.scrollCells=function(e,t,i){for(var a=e.length,r=0;a>r;r++)e[r].scrollVertically(t,i)},i.prototype.getFooterContextualWidth=function(){return this.owner.owner.rowDimension.hasFooter()&&this.owner.grid.footerRow?this.owner.grid.footerRow.getContextualWidth():0},i.prototype.calculateContextualWidths=function(){if(e.prototype.calculateContextualWidths.call(this),this.fixedSizeEnabled){var t=this._grid.footerRow;t&&this._calculateSize(t)}},i.prototype.fixSizes=function(){e.prototype.fixSizes.call(this),this.fixedSizeEnabled&&this._grid.footerRow&&this._grid.footerRow.fixSize()},i.prototype._sendDimensionsToControl=function(){var e=this.getGridContextualWidth(),t=this.getActualContextualWidth(e),i=this.getOtherHierarchyContextualHeight(),a=this.getGridScale();this.owner.owner.updateRowDimensions(i/a,(t-i)/a,e/a,this.getViewSize(e),this._grid.footerRow?this._grid.footerRow.getContextualWidth()/a:0)},i.prototype.getEstimatedHeaderWidth=function(e,t){return-1},i}(n);i.RowLayoutManager=c;var h=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getEstimatedHeaderWidth=function(e,t){return this.getHeaderWidth(t)},t.prototype.canScroll=function(e){return!1},t.prototype._calculateSize=function(e){var t=this.owner.getEstimatedRowHeight();return e.resize(t),t},t.prototype.getHeaderWidth=function(e){return 0!==e||this.owner.binder.hasRowGroups()?this.owner.getEstimatedTextWidth(void 0):0},t}(c);i.DashboardRowLayoutManager=h;var p=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.getEstimatedHeaderWidth=function(e,t){return this.owner.getEstimatedTextWidth(e)},i.prototype.canScroll=function(t){return!e.Double.equalWithPrecision(this.dimension.scrollOffset,0,n._scrollOffsetPrecision)||this.getRealizedItemsCount()-this._gridOffset<this.dimension.getItemsCount()&&this._contextualWidthToFill>0||e.Double.greaterWithPrecision(t,this._contextualWidthToFill,n._pixelPrecision)},i.prototype._calculateSize=function(e){return e.calculateSize()},i}(c);i.CanvasRowLayoutManager=p;var d=function(){function e(e,t,i,a){this._allowHeaderResize=!0,this._binder=e,this._grid=t,this._columnLayoutManager=i,this._rowLayoutManager=a,this._columnWidthsToPersist=[]}return e.prototype.initialize=function(e){this._owner=e,this._container=e.container,this._gridHost=e.contentHost,this._footersHost=e.footerHost,this._grid.initialize(e,this._gridHost,this._footersHost)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binder",{get:function(){return this._binder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnWidthsToPersist",{get:function(){return this._columnWidthsToPersist},set:function(e){this._columnWidthsToPersist=e},enumerable:!0,configurable:!0}),e.prototype.getTablixClassName=function(){return null},e.prototype.getLayoutKind=function(){return null},e.prototype.getOrCreateColumnHeader=function(e,t,i,a){var r=this._grid.getOrCreateRow(i),n=this._grid.getOrCreateColumn(a+this._columnLayoutManager._gridOffset),o=this.owner.hierarchyNavigator.isLeaf(e),s=r.getOrCreateColumnHeader(n,this._columnLayoutManager.isScrollableHeader(e,t,a),o);return this.enableCellHorizontalResize(o,s),s},e.prototype.getOrCreateRowHeader=function(e,t,i,a){var r=this._grid.getOrCreateRow(i+this._rowLayoutManager._gridOffset),n=this._grid.getOrCreateColumn(a),o=this._rowLayoutManager.isScrollableHeader(e,t,i);0===r.getRealizedCellCount()&&this.alignRowHeaderCells(e,r);var s=r.getOrCreateRowHeader(n,o,this.owner.hierarchyNavigator.isLeaf(e));return s.enableHorizontalResize(!1,this._columnLayoutManager),s},e.prototype.getOrCreateCornerCell=function(e,t,i){var a=this._grid.getOrCreateRow(i),r=this._grid.getOrCreateColumn(t),n=a.getOrCreateCornerCell(r),o=this._columnLayoutManager.dimension.getDepth(),s=i===o-1;return this.enableCellHorizontalResize(s,n),n},e.prototype.getOrCreateBodyCell=function(e,t,i,a,r){var n,o=this._grid.getOrCreateRow(a+this._rowLayoutManager._gridOffset),s=this._grid.getOrCreateColumn(r+this._columnLayoutManager._gridOffset);n=0===o._realizedBodyCells.length&&0!==this._owner.columnDimension.getFractionScrollOffset()?!0:this._rowLayoutManager.isScrollableHeader(t,i,a);var l=o.getOrCreateBodyCell(s,n);return l.enableHorizontalResize(!1,this._columnLayoutManager),l},e.prototype.getOrCreateFooterBodyCell=function(e,t){var i,a=this._grid.getOrCreateFootersRow(),r=this._grid.getOrCreateColumn(t+this._columnLayoutManager._gridOffset);i=0===a._realizedBodyCells.length&&0!==this._owner.columnDimension.getFractionScrollOffset();var n=a.getOrCreateFooterBodyCell(r,i);return n.enableHorizontalResize(!1,this._columnLayoutManager),n},e.prototype.getOrCreateFooterRowHeader=function(e,t){var i=this._grid.getOrCreateFootersRow(),a=this._grid.getOrCreateColumn(0),r=i.getOrCreateFooterRowHeader(a);return r.enableHorizontalResize(!1,this._columnLayoutManager),r},e.prototype.getVisibleWidth=function(){return-1},e.prototype.getVisibleHeight=function(){return-1},e.prototype.updateColumnCount=function(e,t){},e.prototype.updateViewport=function(e){},e.prototype.getEstimatedRowHeight=function(){return-1},e.prototype.getCellWidth=function(e){return-1},e.prototype.getContentWidth=function(e){return-1},e.prototype.adjustContentSize=function(e){},e.prototype.alignRowHeaderCells=function(e,t){var i=t.getRowHeaderLeafIndex();if(-1!==i){var a=this._owner.rowDimension,r=a.getFirstVisibleChildLeaf(e);this.owner.hierarchyNavigator.headerItemEquals(r,t.getAllocatedCellAt(i).item)&&t.moveCellsBy(this.owner.hierarchyNavigator.getLevel(r)-this.owner.hierarchyNavigator.getLevel(e)-i)}},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowLayoutManager",{get:function(){return this._rowLayoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnLayoutManager",{get:function(){return this._columnLayoutManager},enumerable:!0,configurable:!0}),e.prototype.showEmptySpaceHeader=function(){return!1},e.prototype.onStartRenderingSession=function(e,t,i){if(this.showEmptySpaceHeader()){var a=this._grid.emptySpaceHeaderCell;a&&this._binder.unbindEmptySpaceHeaderCell(a),a=this._grid.emptySpaceFooterCell,a&&this._binder.unbindEmptySpaceFooterCell(a),this._grid.HideEmptySpaceCells()}this._scrollingDimension=e,this._scrollingDimension&&this._scrollingDimension.layoutManager.startScrollingSession(),this._rowLayoutManager.onStartRenderingSession(),this._columnLayoutManager.onStartRenderingSession(),this._grid.onStartRenderingSession(i);var r=this._columnLayoutManager.measureEnabled||this._rowLayoutManager.measureEnabled;r&&this.measureSampleText(t)},e.prototype.onEndRenderingSession=function(){if(this._rowLayoutManager.onEndRenderingSession(),this._columnLayoutManager.onEndRenderingSession(),this._scrollingDimension&&this._scrollingDimension.layoutManager.endScrollingSession(),this._scrollingDimension=null,this.showEmptySpaceHeader()){var e=this._columnLayoutManager.contextualWidthToFill-this._columnLayoutManager.getGridContextualWidth();if(e>0){this._grid.ShowEmptySpaceCells(this._owner.columnDimension.getDepth(),e);var t=this._grid.emptySpaceHeaderCell;t&&this._binder.bindEmptySpaceHeaderCell(t),t=this._grid.emptySpaceFooterCell,t&&this._binder.bindEmptySpaceFooterCell(t)}}},e.prototype.onStartRenderingIteration=function(e){this._rowLayoutManager.onStartRenderingIteration(e,this.getVisibleHeight()),this._columnLayoutManager.onStartRenderingIteration(e,this.getVisibleWidth()),this._grid.onStartRenderingIteration()},e.prototype.onEndRenderingIteration=function(){return this._grid.onEndRenderingIteration(),this._columnLayoutManager.calculateSizes(),this._rowLayoutManager.calculateSizes(),this._columnLayoutManager.fixSizes(),this._rowLayoutManager.fixSizes(),this._columnLayoutManager.updateItemToResizeState(this._grid.realizedColumns),this._columnLayoutManager.applyScrolling(),this._rowLayoutManager.applyScrolling(),this._columnLayoutManager.onEndRenderingIteration(),this._rowLayoutManager.onEndRenderingIteration(),this._columnLayoutManager.done&&this._rowLayoutManager.done},e.prototype.onCornerCellRealized=function(e,t){var i=this.owner.hierarchyNavigator.isColumnHierarchyLeaf(e),a=this.owner.hierarchyNavigator.isRowHierarchyLeaf(e);i&&t._column.OnLeafRealized(this._owner.hierarchyNavigator),this._columnLayoutManager.onCornerCellRealized(e,t,i),this._rowLayoutManager.onCornerCellRealized(e,t,a)},e.prototype.onRowHeaderRealized=function(e,t){var i=this._owner.hierarchyNavigator,a=i.isLeaf(e);this._rowLayoutManager.onHeaderRealized(e,t,a)},e.prototype.onRowHeaderFooterRealized=function(e,t){},e.prototype.onColumnHeaderRealized=function(e,t){var i=this._owner.hierarchyNavigator,a=i.isLeaf(e);a&&t._column.OnLeafRealized(this._owner.hierarchyNavigator),this._columnLayoutManager.onHeaderRealized(e,t,a)},e.prototype.onBodyCellRealized=function(e,t){},e.prototype.onBodyCellFooterRealized=function(e,t){},e.prototype.setAllowHeaderResize=function(e){this._allowHeaderResize=e},e.prototype.enableCellHorizontalResize=function(e,t){var i=e&&this._allowHeaderResize;t.enableHorizontalResize(i,this._columnLayoutManager)},e.prototype.getEstimatedTextWidth=function(e){return-1},e.prototype.measureSampleText=function(e){},e}();i.TablixLayoutManager=d;var g=function(n){function o(e,t,i,a,r){n.call(this,e,i,new l(this,i,r),new h(this,i,a)),this._sizeComputationManager=t}return __extends(o,n),o.createLayoutManager=function(e){var t=new r;return new o(e,t,new i.TablixGrid(new i.DashboardTablixGridPresenter(t)),new i.RowRealizationManager(e),new i.ColumnRealizationManager(e))},o.prototype.getTablixClassName=function(){return"bi-dashboard-tablix"},o.prototype.getLayoutKind=function(){return t.TablixLayoutKind.DashboardTile},o.prototype.showEmptySpaceHeader=function(){return!1},o.prototype.measureSampleText=function(i){var r=e.TextMeasurementService.getSvgMeasurementProperties(i);this._characterHeight=e.TextMeasurementService.estimateSvgTextHeight(r),this._sizeComputationManager.updateRowHeight(this._characterHeight);var n=a.toPoint(parseFloat(r.fontSize)),o=n/t.TablixDefaultTextSize;this._sizeComputationManager.updateScalingFactor(e.Double.toIncrement(o,.05))},o.prototype.getVisibleWidth=function(){return this._sizeComputationManager.visibleWidth},o.prototype.getVisibleHeight=function(){return this._sizeComputationManager.visibleHeight},o.prototype.getCellWidth=function(e){return this._sizeComputationManager.cellWidth},o.prototype.getContentWidth=function(e){return this._sizeComputationManager.contentWidth},o.prototype.getEstimatedTextWidth=function(e){return this._sizeComputationManager.contentWidth},o.prototype.adjustContentSize=function(e){this._sizeComputationManager.hasImageContent=e},o.prototype.updateColumnCount=function(e,t){var i=e?e.getDepth():0,a=t?t.getItemsCount():0,r=i+a;this.binder.hasRowGroups()||r--,this._sizeComputationManager.updateColumnCount(r)},o.prototype.updateViewport=function(e){this._sizeComputationManager.updateViewport(e)},o.prototype.getEstimatedRowHeight=function(){return this._characterHeight},o}(d);i.DashboardTablixLayoutManager=g;var m=function(e){function a(t,i,a,r){e.call(this,t,i,new u(this,i,r),new p(this,i,a))}return __extends(a,e),a.createLayoutManager=function(e,r){return new a(e,new i.TablixGrid(new t.internal.CanvasTablixGridPresenter(r)),new i.RowRealizationManager(e),new i.ColumnRealizationManager(e))},a.prototype.getTablixClassName=function(){return"bi-tablix"},a.prototype.getLayoutKind=function(){return t.TablixLayoutKind.Canvas},a.prototype.measureSampleText=function(e){var i=t.internal.TablixUtils.createDiv();i.style.cssFloat="left",e.appendChild(i);var a=document.createTextNode("a");i.appendChild(a),this.characterWidth=t.HTMLElementUtils.getElementWidth(i),this.characterHeight=t.HTMLElementUtils.getElementHeight(i),i.removeChild(a),e.removeChild(i)},a.prototype.showEmptySpaceHeader=function(){return!this._columnLayoutManager.fillProportionally},a.prototype.getVisibleWidth=function(){return this._columnLayoutManager.measureEnabled?this._owner.autoSizeWidth&&this._owner.maxWidth?this._owner.maxWidth:t.HTMLElementUtils.getElementWidth(this._container):-1},a.prototype.getVisibleHeight=function(){return this._rowLayoutManager.measureEnabled?this._owner.autoSizeHeight&&this._owner.maxHeight?this._owner.maxHeight:t.HTMLElementUtils.getElementHeight(this._container):-1},a.prototype.getCellWidth=function(e){return t.HTMLElementUtils.getElementWidth(e._presenter.tableCell)},a.prototype.getContentWidth=function(e){return t.HTMLElementUtils.getElementWidth(e._presenter.contentElement)},a.prototype.getEstimatedTextWidth=function(e){return e?e.length*this.characterWidth:0},a.prototype.updateColumnCount=function(e,t){},a.prototype.updateViewport=function(e){},a.prototype.getEstimatedRowHeight=function(){return this.characterHeight},a}(d);i.CanvasTablixLayoutManager=m}(i=t.internal||(t.internal={}))}(i=t.controls||(t.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e){if(e)for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function i(e,t){e.style.top=t+"px"}function a(e,t){e.style.left=t+"px"}function r(t,i){e.isAutoSize(i)?t.style.height="auto":t.style.height=i+"px"}function n(t,i){e.isAutoSize(i)?t.style.width="auto":t.style.width=i+"px"}function o(e){return e.offsetWidth}function s(e){return e.offsetHeight}function l(e){return-1===e}function u(t){for(var i=1;t;)i*=e.getScale(t),t=t.parentElement;return i}function c(e){e=$(e);var t=e.css("-webkit-transform")||e.css("-moz-transform")||e.css("-ms-transform")||e.css("-o-transform")||e.css("transform");return t&&(t.match(/\d*\.\d*/)&&Number(t.match(/\d*\.\d*/)[0])||t.match(/\d+/)&&Number(t.match(/\d+/)[0]))||1}e.clearChildren=t,e.setElementTop=i,e.setElementLeft=a,e.setElementHeight=r,e.setElementWidth=n,e.getElementWidth=o,e.getElementHeight=s,e.isAutoSize=l,e.getAccumulatedScale=u,e.getScale=c}(t=e.HTMLElementUtils||(e.HTMLElementUtils={}))}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){var a;!function(a){var r,n=InJs.DomFactory;!function(a){function r(){return document.createElement("table")}function o(){var e=document.createElement("div"),t=e.style;return t.whiteSpace="nowrap",t.overflow="hidden",t.lineHeight="normal",e}function s(e,t){var i=t.extension.contentHost,a=null;0===i.childElementCount?(a=document.createElement("a"),i.appendChild(a)):a=i.children[0],a.href=e,a.target="_blank",a.title=e,a.innerText=e}function l(e,t){var i,a=t.extension.contentHost,r=a.parentElement;0===a.childElementCount?(i=document.createElement("img"),a.appendChild(i)):i=a.children[0],r.style.paddingBottom="3px",r.style.paddingTop="3px",i.src=e,i.style.maxHeight="75px",i.style.maxWidth="100px",i.style.height="100%"}function u(e,i){var a=t.KpiUtil.getClassForKpi(e,i)||"";return n.div().addClass(a).css({display:"inline-block","vertical-align":"bottom",margin:"0 1px 1px 0"})}function c(e,t){if(e.sort){var i=e.sort;h(i,t,!0),h(K(i),t,!1)}else h(2,t,!1)}function h(e,i,r){var n=a.createDiv(),o=document.createElement("i");o.className=1===e?"powervisuals-glyph caret-up":"powervisuals-glyph caret-down",n.className=t.TableBinder.sortIconContainerClassName+" "+(r?"sorted":"future"),n.appendChild(o),i.extension.contentElement.insertBefore(n,i.extension.contentHost)}function p(e,i){return e&&void 0!==i?!!t.KpiUtil.getClassForKpi(e,i):!1}function d(e,t,i,r,n){var o=i.metadata.objects;switch(e.objectName){case"general":a.enumerateGeneralOptions(t,o,r,n);break;case"columns":r&&a.enumerateColumnsOptions(t,o);break;case"header":r&&a.enumerateHeaderOptions(t,o);break;case"rows":r&&a.enumerateRowsOptions(t,o);break;case"values":r&&a.enumerateValuesOptions(t,o);break;case"totals":r&&a.enumerateTotalsOptions(t,o)}}function g(e,t,r,n){if(this.isFormattingPropertiesEnabled)switch(n){case i.TablixType.Table:e.pushInstance({selector:null,objectName:"general",properties:{totals:a.shouldShowTableTotals(t),autoSizeColumnWidth:a.shouldAutoSizeColumnWidth(t),textSize:a.getTextSize(t),outlineColor:a.getTablixOutlineColor(t),outlineWeight:a.getTablixOutlineWeight(t)}});break;case i.TablixType.Matrix:e.pushInstance({selector:null,objectName:"general",properties:{autoSizeColumnWidth:a.shouldAutoSizeColumnWidth(t),textSize:a.getTextSize(t),rowSubtotals:a.shouldShowRowSubtotals(t),columnSubtotals:a.shouldShowColumnSubtotals(t),outlineColor:a.getTablixOutlineColor(t),outlineWeight:a.getTablixOutlineWeight(t)}})}else switch(n){case i.TablixType.Table:e.pushInstance({selector:null,objectName:"general",properties:{totals:a.shouldShowTableTotals(t),autoSizeColumnWidth:a.shouldAutoSizeColumnWidth(t),textSize:a.getTextSize(t)}});break;case i.TablixType.Matrix:case i.TablixType.Table:e.pushInstance({selector:null,objectName:"general",properties:{autoSizeColumnWidth:a.shouldAutoSizeColumnWidth(t),textSize:a.getTextSize(t),rowSubtotals:a.shouldShowRowSubtotals(t),columnSubtotals:a.shouldShowColumnSubtotals(t)}})}}function m(e,t){var i=a.getColumnSeparatorShow(t);e.pushInstance({selector:null,objectName:"columns",properties:{showSeparators:i,separatorColor:i?a.getColumnSeparatorColor(t):a.DefaultColumnSeparatorColor,columnSeparatorWeight:i?a.getColumnSeparatorWeight(t):a.DefaultColumnSeparatorWeight}})}function f(e,t){e.pushInstance({selector:null,objectName:"header",properties:{fontColor:a.getColumnHeaderFontColor(t),backgroundColor:a.getColumnHeaderBackgroundColor(t),outline:a.getColumnHeaderOutlineType(t)}})}function y(e,t){e.pushInstance({selector:null,objectName:"rows",properties:{showSeparators:a.getRowSeparatorShow(t),fontColor:a.getRowHeaderFontColor(t),backgroundColor:a.getRowHeaderBackgroundColor(t),outline:a.getRowHeaderOutlineStyle(t)}})}function v(e,t){e.pushInstance({selector:null,objectName:"values",properties:{fontColor:a.getValuesFontColor(t),backgroundColor:a.getValuesBackgroundColor(t),outline:a.getValuesOutlineType(t)}})}function b(e,t){e.pushInstance({selector:null,objectName:"totals",properties:{fontColor:a.getRowTotalsFontColor(t),backgroundColor:a.getRowTotalsBackgroundColor(t),outline:a.getRowTotalsOutlineType(t),leadingSpace:a.getRowTotalsLeadingSpace(t)}})}function C(e){var t;if(e&&e.metadata&&e.metadata.objects){var i=e.metadata.objects;t={general:{autoSizeColumnWidth:a.shouldAutoSizeColumnWidth(i),textSize:a.getTextSize(i),totals:a.shouldShowTableTotals(i),outlineColor:a.getTablixOutlineColor(i),outlineWeight:a.getTablixOutlineWeight(i)},columns:{showSeparators:a.getColumnSeparatorShow(i),separatorColor:a.getColumnSeparatorColor(i),separatorWeight:a.getColumnSeparatorWeight(i)},header:{fontColor:a.getColumnHeaderFontColor(i),backgroundColor:a.getColumnHeaderBackgroundColor(i),outline:a.getColumnHeaderOutlineType(i)},rows:{showSeparators:a.getRowSeparatorShow(i),fontColor:a.getRowHeaderFontColor(i),backgroundColor:a.getRowHeaderBackgroundColor(i),outline:a.getRowHeaderOutlineStyle(i)},totals:{fontColor:a.getRowTotalsFontColor(i),backgroundColor:a.getRowTotalsBackgroundColor(i),outline:a.getRowTotalsOutlineType(i),leadingSpace:a.getRowTotalsLeadingSpace(i)}}}return t}function x(e){var t;if(e&&e.metadata&&e.metadata.objects){var i=e.metadata.objects;t={general:{autoSizeColumnWidth:a.shouldAutoSizeColumnWidth(i),textSize:a.getTextSize(i),rowSubtotals:a.shouldShowRowSubtotals(i),columnSubtotals:a.shouldShowColumnSubtotals(i),outlineColor:a.getTablixOutlineColor(i),outlineWeight:a.getTablixOutlineWeight(i)},columns:{showSeparators:a.getColumnSeparatorShow(i),separatorColor:a.getColumnSeparatorColor(i),separatorWeight:a.getColumnSeparatorWeight(i)},header:{fontColor:a.getColumnHeaderFontColor(i),backgroundColor:a.getColumnHeaderBackgroundColor(i),outline:a.getColumnHeaderOutlineType(i)},rows:{showSeparators:a.getRowSeparatorShow(i),fontColor:a.getRowHeaderFontColor(i),backgroundColor:a.getRowHeaderBackgroundColor(i),outline:a.getRowHeaderOutlineStyle(i)},values:{fontColor:a.getValuesFontColor(i),backgroundColor:a.getValuesBackgroundColor(i),outline:a.getValuesOutlineType(i)},totals:{fontColor:a.getRowTotalsFontColor(i),backgroundColor:a.getRowTotalsBackgroundColor(i),outline:a.getRowTotalsOutlineType(i),leadingSpace:a.getRowTotalsLeadingSpace(i)}}}return t}function S(t){return e.DataViewObjects.getValue(t,a.TableTotalsProp,a.TableShowTotals)}function w(t){return e.DataViewObjects.getValue(t,a.TablixColumnAutoSizeProp,i.AutoSizeColumnWidthDefault)}function D(t){return e.DataViewObjects.getValue(t,a.TablixTextSizeProp,i.TablixDefaultTextSize)}function P(e){return jsCommon.PixelConverter.fromPoint(e)}function L(e){return e&&e.general?e.general.rowSubtotals!==!1:!0}function _(e){return e&&e.general?e.general.columnSubtotals!==!1:!0}function N(t){return e.DataViewObjects.getFillColor(t,a.ColumnSeparatorColorProp,a.DefaultColumnSeparatorColor)}function T(t){return e.DataViewObjects.getValue(t,a.ColumnSeparatorWeightProp,a.DefaultColumnSeparatorWeight)}function V(t){return e.DataViewObjects.getFillColor(t,a.TablixOutlineColorProp,a.DefaultOutlineColor)}function M(t){return e.DataViewObjects.getValue(t,a.TablixOutlineWeightProp,a.DefaultOutlineWeight)}function A(t){return e.DataViewObjects.getValue(t,a.ColumnSeparatorShowProp,a.DefaultColumnSeparatorShow)}function R(t){return e.DataViewObjects.getFillColor(t,a.ColumnHeaderFontColorProp,a.DefaultFontColor)}function I(t){return e.DataViewObjects.getFillColor(t,a.ColumnHeaderBackgroundColorProp,a.DefaultBackgroundColor)}function F(t){return e.DataViewObjects.getValue(t,a.ColumnHeaderOutlineProp,a.DefaultOutlineColumnHeader)}function E(t){return e.DataViewObjects.getValue(t,a.RowSeparatorProp,a.DefaultRowSeparatorShow)}function O(t){return e.DataViewObjects.getFillColor(t,a.RowHeaderFontColorProp,a.DefaultFontColor)}function G(t){return e.DataViewObjects.getFillColor(t,a.RowHeaderBackgroundColorProp,a.DefaultBackgroundColor)}function H(t){return e.DataViewObjects.getValue(t,a.RowHeaderOutlineStyleProp,a.DefaultOutlineRowHeader)}function z(t){return e.DataViewObjects.getFillColor(t,a.ValuesFontColorProp,a.DefaultFontColor)}function k(t){return e.DataViewObjects.getFillColor(t,a.ValuesBackgroundColorProp,a.DefaultBackgroundColor)}function B(t){return e.DataViewObjects.getValue(t,a.ValuesOutlineProp,a.DefaultOutlineValues)}function W(t){return e.DataViewObjects.getFillColor(t,a.RowTotalsFontColorProp,a.DefaultFontColor)}function U(t){return e.DataViewObjects.getFillColor(t,a.RowTotalsBackgroundColor,a.DefaultBackgroundColor)}function j(t){return e.DataViewObjects.getValue(t,a.RowTotalsOutlineProp,a.DefaultOutlineRowTotals)}function q(t){return e.DataViewObjects.getValue(t,a.RowTotalsLeadingSpaceProp,a.DefaultRowLeadingSpace)}function K(e){return 2===e?1:2}function Q(e){for(var i=0,a=e.extension.contentElement.children;i<a.length;i++){var r=a[i];if(r.className.indexOf(t.TableBinder.sortIconContainerClassName)>-1)return!0}return!1}function Y(e){Q(e)&&$(e.extension.contentElement).find("."+t.TableBinder.sortIconContainerClassName).remove()}a.TablixFormatStringProp={objectName:"general",propertyName:"formatString"},a.TableTotalsProp={objectName:"general",propertyName:"totals"},a.TablixColumnAutoSizeProp={objectName:"general",propertyName:"autoSizeColumnWidth"},a.TablixTextSizeProp={objectName:"general",propertyName:"textSize"},a.MatrixRowSubtotalsProp={objectName:"general",propertyName:"rowSubtotals"},a.MatrixColumnSubtotalsProp={objectName:"general",propertyName:"columnSubtotals"},a.TablixOutlineColorProp={objectName:"general",propertyName:"outlineColor"},a.TablixOutlineWeightProp={objectName:"general",propertyName:"outlineWeight"},a.ColumnSeparatorColorProp={objectName:"columns",propertyName:"separatorColor"},a.ColumnSeparatorShowProp={objectName:"columns",propertyName:"showSeparators"},a.ColumnSeparatorWeightProp={objectName:"columns",propertyName:"columnSeparatorWeight"},a.ColumnHeaderFontColorProp={objectName:"header",propertyName:"fontColor"},a.ColumnHeaderBackgroundColorProp={objectName:"header",propertyName:"backgroundColor"},a.ColumnHeaderOutlineProp={objectName:"header",propertyName:"outline"},a.RowSeparatorProp={objectName:"rows",propertyName:"showSeparators"},a.RowHeaderFontColorProp={objectName:"rows",propertyName:"fontColor"},a.RowHeaderBackgroundColorProp={objectName:"rows",propertyName:"backgroundColor"},a.RowHeaderOutlineStyleProp={objectName:"rows",propertyName:"outline"},a.ValuesFontColorProp={objectName:"values",propertyName:"fontColor"},a.ValuesBackgroundColorProp={objectName:"values",propertyName:"backgroundColor"},a.ValuesOutlineProp={objectName:"values",propertyName:"outline"},a.RowTotalsFontColorProp={objectName:"totals",propertyName:"fontColor"},a.RowTotalsBackgroundColor={objectName:"totals",propertyName:"backgroundColor"},a.RowTotalsOutlineProp={objectName:"totals",propertyName:"outline"},a.RowTotalsLeadingSpaceProp={objectName:"totals",propertyName:"leadingSpace"},a.DefaultColumnSeparatorShow=!1,a.DefaultColumnSeparatorColor="#E8E8E8",a.DefaultColumnSeparatorWeight=1,a.DefaultRowSeparatorWeight=1,a.DefaultRowSeparatorColor="#E8E8E8",a.DefaultRowSeparatorShow=!1,a.DefaultBackgroundColor="#FFFFFF",a.DefaultFontColor="#333333",a.DefaultOutlineColor="#E8E8E8",a.DefaultOutlineWeight=2,a.DefaultOutlineColumnHeader="BottomOnly",a.DefaultOutlineRowHeader="None",a.DefaultOutlineValues="LeftOnly",a.DefaultOutlineRowTotals="TopOnly",a.DefaultRowLeadingSpace=0,a.UnitOfMeasurement="px",a.DefaultColumnSeparatorStyle="solid",a.DefaultRowSeparatorStyle="solid",a.TableShowTotals=!0,a.createTable=r,a.createDiv=o,a.appendATagToBodyCell=s,a.appendImgTagToBodyCell=l,a.createKpiDom=u,a.appendSortImageToColumnHeader=c,a.isValidStatusGraphic=p,a.setEnumeration=d,a.enumerateGeneralOptions=g,a.enumerateColumnsOptions=m,a.enumerateHeaderOptions=f,a.enumerateRowsOptions=y,a.enumerateValuesOptions=v,a.enumerateTotalsOptions=b,a.getTableFormattingProperties=C,a.getMatrixFormattingProperties=x,a.shouldShowTableTotals=S,a.shouldAutoSizeColumnWidth=w,a.getTextSize=D,a.getTextSizeInPx=P,a.shouldShowRowSubtotals=L,a.shouldShowColumnSubtotals=_,a.getColumnSeparatorColor=N,a.getColumnSeparatorWeight=T,a.getTablixOutlineColor=V,a.getTablixOutlineWeight=M,a.getColumnSeparatorShow=A,a.getColumnHeaderFontColor=R,a.getColumnHeaderBackgroundColor=I,a.getColumnHeaderOutlineType=F,a.getRowSeparatorShow=E,a.getRowHeaderFontColor=O,a.getRowHeaderBackgroundColor=G,a.getRowHeaderOutlineStyle=H,a.getValuesFontColor=z,a.getValuesBackgroundColor=k,a.getValuesOutlineType=B,a.getRowTotalsFontColor=W,a.getRowTotalsBackgroundColor=U,a.getRowTotalsOutlineType=j,a.getRowTotalsLeadingSpace=q,a.reverseSort=K,a.removeSortIcons=Y}(r=a.TablixUtils||(a.TablixUtils={}))}(a=i.internal||(i.internal={}))}(i=t.controls||(t.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){!function(e){e[e.CornerCell=0]="CornerCell",e[e.RowHeader=1]="RowHeader",e[e.ColumnHeader=2]="ColumnHeader",e[e.BodyCell=3]="BodyCell"}(e.TablixCellType||(e.TablixCellType={})),e.TablixCellType}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){e.TablixDefaultTextSize=jsCommon.TextSizeDefaults.TextSizeMin,function(e){e[e.Canvas=0]="Canvas",e[e.DashboardTile=1]="DashboardTile"}(e.TablixLayoutKind||(e.TablixLayoutKind={}));var t=e.TablixLayoutKind,i=function(){function i(t,a,r,n,o){var s=this;this.scrollBarElementWidth=9,this.options=o;var l=o.interactive;this.isTouchEnabled=l&&o.enableTouchSupport,this.mainDiv=e.internal.TablixUtils.createDiv();var u=this.mainDiv.style;u.position="absolute",u.left="0px",u.top="0px",this.footerDiv=e.internal.TablixUtils.createDiv();var c=this.footerDiv.style;c.position="absolute",c.left="0px",this.isTouchEnabled&&this.InitializeTouchSupport(),this.gridDimensions={},this.containerElement=e.internal.TablixUtils.createDiv(),this.className=a.getTablixClassName(),this.autoSizeWidth=!1,this.autoSizeHeight=!1,this.fontSize=o.fontSize,n.className=i.TablixContainerClassName,n.appendChild(this.containerElement),
this.containerElement.addEventListener("mousewheel",function(e){s.onMouseWheel(e)}),this.containerElement.addEventListener("DOMMouseScroll",function(e){s.onFireFoxMouseWheel(e)}),this.containerElement.appendChild(this.mainDiv),this.containerElement.appendChild(this.footerDiv),this.isTouchEnabled&&(this.touchInterpreter.initTouch(this.mainDiv,null,!1),this.footerTouchInterpreter.initTouch(this.footerDiv,this.mainDiv,!1)),this.controlLayoutManager=a,this.controlLayoutManager.initialize(this),this.hierarchyTablixNavigator=t,this.binder=r,this.columnDim=new e.TablixColumnDimension(this),this.rowDim=new e.TablixRowDimension(this),this.columnDim._otherDimension=this.rowDimension,this.rowDim._otherDimension=this.columnDimension,this.InitializeScrollbars(),l||(this.scrollbarWidth=0),this.updateHorizontalPosition(),this.updateVerticalPosition(),this.updateFooterVisibility(),this.lastRenderingArgs={}}return i.prototype.InitializeTouchSupport=function(){this.touchManager=new e.TouchUtils.TouchManager,this.touchInterpreter=new e.TouchUtils.TouchEventInterpreter(this.touchManager),this.footerTouchInterpreter=new e.TouchUtils.TouchEventInterpreter(this.touchManager),this.columnTouchDelegate=new e.ColumnTouchDelegate(new e.TouchUtils.Rectangle),this.rowTouchDelegate=new e.RowTouchDelegate(new e.TouchUtils.Rectangle),this.bodyTouchDelegate=new e.BodyTouchDelegate(new e.TouchUtils.Rectangle),this.footerTouchDelegate=new e.ColumnTouchDelegate(new e.TouchUtils.Rectangle),this.columnTouchDelegate.setHandler(this,this.onTouchEvent),this.rowTouchDelegate.setHandler(this,this.onTouchEvent),this.bodyTouchDelegate.setHandler(this,this.onTouchEvent),this.footerTouchDelegate.setHandler(this,this.onTouchEvent),this.touchManager.addTouchRegion(this.columnTouchDelegate.dimension,this.columnTouchDelegate,this.columnTouchDelegate),this.touchManager.addTouchRegion(this.rowTouchDelegate.dimension,this.rowTouchDelegate,this.rowTouchDelegate),this.touchManager.addTouchRegion(this.bodyTouchDelegate.dimension,this.bodyTouchDelegate,this.bodyTouchDelegate),this.touchManager.addTouchRegion(this.footerTouchDelegate.dimension,this.footerTouchDelegate,this.footerTouchDelegate)},i.prototype.InitializeScrollbars=function(){this.rowDim._initializeScrollbar(this.containerElement,null);var e=this.rowDim.scrollbar.element.style;e.position="absolute",e.top="0"+i.UnitOfMeasurement,e.right="0"+i.UnitOfMeasurement,this.rowDim.scrollbar.width=this.scrollBarElementWidth+i.UnitOfMeasurement,this.rowDim.scrollbar.show(!0),this.columnDim._initializeScrollbar(this.containerElement,null);var t=this.columnDim.scrollbar.element.style;t.position="absolute",t.left="0"+i.UnitOfMeasurement,t.bottom="0"+i.UnitOfMeasurement,this.columnDim.scrollbar.height=this.scrollBarElementWidth+i.UnitOfMeasurement,this.columnDim.scrollbar.show(!1)},Object.defineProperty(i.prototype,"container",{get:function(){return this.containerElement},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentHost",{get:function(){return this.mainDiv},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"footerHost",{get:function(){return this.footerDiv},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"className",{set:function(e){this.containerElement.className=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hierarchyNavigator",{get:function(){return this.hierarchyTablixNavigator},enumerable:!0,configurable:!0}),i.prototype.getBinder=function(){return this.binder},Object.defineProperty(i.prototype,"autoSizeWidth",{get:function(){return this._autoSizeWidth},set:function(e){this._autoSizeWidth=e,this._autoSizeWidth?this.removeFixSizedClassName():(this.addFixedSizeClassNameIfNeeded(),this.containerElement.style.minWidth=this.containerElement.style.maxWidth="none")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"autoSizeHeight",{get:function(){return this._autoSizeHeight},set:function(e){this._autoSizeHeight=e,this._autoSizeHeight?this.removeFixSizedClassName():(this.addFixedSizeClassNameIfNeeded(),this.containerElement.style.minHeight=this.containerElement.style.maxHeight="none")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this.maximumWidth},set:function(e){this.maximumWidth=e,this.containerElement.style.maxWidth=this.maximumWidth+i.UnitOfMeasurement},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"viewport",{get:function(){return this.viewPort},set:function(e){this.viewPort=e,this.containerElement.style.width=this.viewPort.width+i.UnitOfMeasurement,this.containerElement.style.height=this.viewPort.height+i.UnitOfMeasurement,this.rowDim.scrollbar.invalidateArrange(),this.columnDim.scrollbar.invalidateArrange(),this.controlLayoutManager.updateViewport(this.viewPort)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"maxHeight",{get:function(){return this.maximumHeight},set:function(e){this.maximumHeight=e,this.containerElement.style.maxHeight=this.maximumHeight+i.UnitOfMeasurement},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minWidth",{get:function(){return this.minimumWidth},set:function(e){this.minimumWidth=e,this.containerElement.style.minWidth=this.minimumWidth+i.UnitOfMeasurement},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minHeight",{get:function(){return this.minimumHeight},set:function(e){this.minimumHeight=e,this.containerElement.style.minHeight=this.minimumHeight+i.UnitOfMeasurement},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{set:function(e){this.textFontSize=e?e:i.DefaultFontSize,this.containerElement.style.fontSize=this.textFontSize},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollbarWidth",{set:function(e){this.scrollBarElementWidth=e,this.rowDim.scrollbar.width=this.scrollBarElementWidth+i.UnitOfMeasurement,this.columnDim.scrollbar.height=this.scrollBarElementWidth+i.UnitOfMeasurement},enumerable:!0,configurable:!0}),i.prototype.updateModels=function(e,t,i){t&&(this.rowDim.model=t,e&&(this.rowDim.scrollOffset=0)),i&&(this.columnDim.model=i,e&&(this.columnDim.scrollOffset=0)),this.layoutManager.updateColumnCount(this.rowDim,this.columnDim)},i.prototype.updateColumnDimensions=function(e,t,i){var a=this.gridDimensions;a.columnCount=i,a.rowHierarchyWidth=e,a.columnHierarchyWidth=t},i.prototype.updateRowDimensions=function(e,t,i,a,r){var n=this.gridDimensions;n.rowCount=a,n.rowHierarchyHeight=t,n.rowHierarchyContentHeight=i,n.columnHierarchyHeight=e,n.footerHeight=r},i.prototype.updateTouchDimensions=function(){var e=this.gridDimensions;this.columnTouchDelegate.resize(e.rowHierarchyWidth,0,e.columnHierarchyWidth,e.columnHierarchyHeight),this.columnTouchDelegate.setScrollDensity(e.columnCount/e.columnHierarchyWidth),this.rowTouchDelegate.resize(0,e.columnHierarchyHeight,e.rowHierarchyWidth,e.rowHierarchyHeight),this.rowTouchDelegate.setScrollDensity(e.rowCount/e.rowHierarchyHeight),this.bodyTouchDelegate.resize(e.rowHierarchyWidth,e.columnHierarchyHeight,e.columnHierarchyWidth,e.rowHierarchyHeight),this.bodyTouchDelegate.setScrollDensity(e.columnCount/e.columnHierarchyWidth,e.rowCount/e.rowHierarchyHeight),this.footerTouchDelegate.resize(e.rowHierarchyWidth,e.columnHierarchyHeight+e.rowHierarchyHeight,e.columnHierarchyWidth,e.footerHeight),this.footerTouchDelegate.setScrollDensity(e.columnCount/e.columnHierarchyWidth)},i.prototype.onMouseWheel=function(e){var t=this.determineDimensionToScroll();t&&t.scrollbar.onMouseWheel(e)},i.prototype.onFireFoxMouseWheel=function(e){var t=this.determineDimensionToScroll();t&&t.scrollbar.onFireFoxMouseWheel(e)},i.prototype.determineDimensionToScroll=function(){return this.rowDim.scrollbar.visible?this.rowDim:this.columnDim.scrollbar.visible?this.columnDim:null},Object.defineProperty(i.prototype,"layoutManager",{get:function(){return this.controlLayoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnDimension",{get:function(){return this.columnDim},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rowDimension",{get:function(){return this.rowDim},enumerable:!0,configurable:!0}),i.prototype.refresh=function(e){this.render(e,null)},i.prototype._onScrollAsync=function(e){var t=this;requestAnimationFrame(function(){t.performPendingScroll(e)})},i.prototype.performPendingScroll=function(e){this.render(!1,e)},i.prototype.updateHorizontalPosition=function(){this.rowDim.scrollbar.visible?(this.columnDim.scrollbar.element.style.right=this.scrollBarElementWidth+i.UnitOfMeasurement,this.footerDiv.style.right=this.scrollBarElementWidth+i.UnitOfMeasurement,this.mainDiv.style.right=this.scrollBarElementWidth+i.UnitOfMeasurement):(this.columnDim.scrollbar.element.style.right="0"+i.UnitOfMeasurement,this.mainDiv.style.right="0"+i.UnitOfMeasurement,this.footerDiv.style.right="0"+i.UnitOfMeasurement)},i.prototype.updateFooterVisibility=function(){(this.rowDim.hasFooter()?"block"!==this.footerDiv.style.display:"none"!==this.footerDiv.style.display)&&(this.rowDim.hasFooter()?this.footerDiv.style.display="block":this.footerDiv.style.display="none")},i.prototype.updateVerticalPosition=function(){var e=0;this.rowDim.hasFooter()&&(e=this.gridDimensions.footerHeight),this.footerDiv.style.height=e+i.UnitOfMeasurement;var a=this.rowDim.scrollbar.visible,r=this.controlLayoutManager.getLayoutKind()===t.DashboardTile,n=a||r;if(n){var o=e,s=0,l=0,u=this.columnDim.scrollbar.visible;u&&(o+=this.scrollBarElementWidth,s+=this.scrollBarElementWidth,l=this.scrollBarElementWidth),this.mainDiv.style.bottom=o+i.UnitOfMeasurement,this.rowDim.scrollbar.element.style.bottom=l+i.UnitOfMeasurement,this.footerDiv.style.bottom=s+i.UnitOfMeasurement,this.footerDiv.style.removeProperty("top")}else this.footerDiv.style.top=this.gridDimensions.rowHierarchyContentHeight+i.UnitOfMeasurement,this.footerDiv.style.removeProperty("bottom"),this.mainDiv.style.removeProperty("bottom")},i.prototype.alreadyRendered=function(e){return e!==this.lastRenderingArgs.scrollingDimension||this.rowDimension.scrollOffset!==this.lastRenderingArgs.rowScrollOffset||this.columnDimension.scrollOffset!==this.lastRenderingArgs.columnScrollOffset?!1:!0},i.prototype.render=function(e,t){if(this.columnDim.makeScrollOffsetValid(),this.rowDim.makeScrollOffsetValid(),e||null===t)this.lastRenderingArgs={};else if(this.alreadyRendered(t))return;var a=!1;this.renderIterationCount=0,this.controlLayoutManager.onStartRenderingSession(t,this.mainDiv,e);var r=this.binder;r.onStartRenderingSession();for(var n=this.gridDimensions.footerHeight,o=this.gridDimensions.rowHierarchyHeight,s=this.gridDimensions.rowHierarchyContentHeight;!a&&this.renderIterationCount<i.MaxRenderIterationCount;){var l=this.columnDim.scrollbar.visible,u=this.rowDim.scrollbar.visible;this.columnDim._onStartRenderingIteration(),this.rowDim._onStartRenderingIteration(),this.controlLayoutManager.onStartRenderingIteration(e),this.renderCorner(),this.columnDim._render(),this.rowDim._render(),a=this.controlLayoutManager.onEndRenderingIteration(),this.columnDim._onEndRenderingIteration(),this.rowDim._onEndRenderingIteration(),l!==this.columnDim.scrollbar.visible&&this.updateVerticalPosition(),u!==this.rowDim.scrollbar.visible&&this.updateHorizontalPosition(),this.renderIterationCount++}this.controlLayoutManager.onEndRenderingSession(),r.onEndRenderingSession(),this.isTouchEnabled&&this.updateTouchDimensions(),this.lastRenderingArgs.rowScrollOffset=this.rowDimension.scrollOffset,this.lastRenderingArgs.columnScrollOffset=this.columnDimension.scrollOffset,this.updateContainerDimensions();var c=this.lastRenderingArgs;c.rowScrollOffset=this.rowDimension.scrollOffset,c.columnScrollOffset=this.columnDimension.scrollOffset,c.scrollingDimension=t,(n!==this.gridDimensions.footerHeight||o!==this.gridDimensions.rowHierarchyHeight||s!==this.gridDimensions.rowHierarchyContentHeight)&&this.updateVerticalPosition(),this.options.interactive&&(this.columnDim.scrollbar.refresh(),this.rowDim.scrollbar.refresh())},i.prototype.updateContainerDimensions=function(){var e=this.gridDimensions;if(this._autoSizeWidth){var t=this.rowDim.scrollbar.visible?this.scrollBarElementWidth:0;this.containerElement.style.width=e.rowHierarchyWidth+e.columnHierarchyWidth+t+i.UnitOfMeasurement}if(this._autoSizeHeight){var a=this.columnDim.scrollbar.visible?this.scrollBarElementWidth:0;this.containerElement.style.height=e.columnHierarchyHeight+e.rowHierarchyHeight+e.footerHeight+a+i.UnitOfMeasurement}},i.prototype.cornerCellMatch=function(t,i){var a=i.item;return i.type===e.TablixCellType.CornerCell&&a&&this.hierarchyTablixNavigator.cornerCellItemEquals(t,a)},i.prototype.renderCorner=function(){for(var t=this.columnDim.getDepth(),i=this.rowDim.getDepth(),a=0;t>a;a++)for(var r=0;i>r;r++){var n=this.hierarchyTablixNavigator.getCorner(r,a),o=this.controlLayoutManager.getOrCreateCornerCell(n,r,a),s=this.cornerCellMatch(n,o);s||(this._unbindCell(o),o.type=e.TablixCellType.CornerCell,o.item=n,this.binder.bindCornerCell(n,o)),this.controlLayoutManager.onCornerCellRealized(n,o)}},i.prototype._unbindCell=function(t){switch(t.type){case e.TablixCellType.BodyCell:this.binder.unbindBodyCell(t.item,t);break;case e.TablixCellType.ColumnHeader:this.binder.unbindColumnHeader(t.item,t);break;case e.TablixCellType.RowHeader:this.binder.unbindRowHeader(t.item,t);break;case e.TablixCellType.CornerCell:this.binder.unbindCornerCell(t.item,t)}t.item=null,t.type=null},i.prototype.onTouchEvent=function(e){var t,i,a;e&&e.length>0&&"columnDim"in e[0]&&"rowDim"in e[0]&&(a=e[0],t=a.columnDim.scrollbar.visible?e[1]:0,i=a.rowDim.scrollbar.visible?e[2]:0,a.columnDim.scrollbar.viewMin=Math.max(0,a.columnDim.scrollbar.viewMin+t),a.columnDim.scrollOffset=Math.max(0,a.columnDim.scrollOffset+t),a.rowDim.scrollbar.viewMin=Math.max(0,a.rowDim.scrollbar.viewMin+i),a.rowDim.scrollOffset=Math.max(0,a.rowDim.scrollOffset+i),0===t?a._onScrollAsync(a.rowDim):0===i?a._onScrollAsync(a.columnDim):a._onScrollAsync(null))},i.prototype.addFixedSizeClassNameIfNeeded=function(){this._autoSizeHeight||this._autoSizeWidth||-1!==this.containerElement.className.indexOf(i.TablixFixSizedClassName)||(this.containerElement.className+=" "+i.TablixFixSizedClassName)},i.prototype.removeFixSizedClassName=function(){this.containerElement.className=this.containerElement.className.replace(i.TablixFixSizedClassName,"")},i.UnitOfMeasurement="px",i.TablixContainerClassName="tablixContainer",i.TablixFixSizedClassName="bi-tablix-fixed-size",i.DefaultFontSize=jsCommon.PixelConverter.fromPoint(e.TablixDefaultTextSize),i.MaxRenderIterationCount=10,i}();e.TablixControl=i}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e){this._scrollStep=.1,this._owner=e,this._hierarchyNavigator=e.hierarchyNavigator,this._binder=e.getBinder(),this._tablixLayoutManager=e.layoutManager,this.scrollOffset=0}return e.prototype._onStartRenderingIteration=function(){this.updateScrollPosition()},e.prototype._onEndRenderingIteration=function(){},e.prototype.getValidScrollOffset=function(e){return Math.min(Math.max(e,0),Math.max(this.getItemsCount()-this._scrollStep,0))},e.prototype.makeScrollOffsetValid=function(){this.scrollOffset=this.getValidScrollOffset(this.scrollOffset)},e.prototype.getIntegerScrollOffset=function(){return Math.floor(this.scrollOffset)},e.prototype.getFractionScrollOffset=function(){return this.scrollOffset-this.getIntegerScrollOffset()},Object.defineProperty(e.prototype,"scrollbar",{get:function(){return this._scrollbar},enumerable:!0,configurable:!0}),e.prototype.getFirstVisibleItem=function(e){return this._scrollItems[e]},e.prototype.getFirstVisibleChild=function(e){return this._hierarchyNavigator.getAt(this._hierarchyNavigator.getChildren(e),this.getFirstVisibleChildIndex(e))},e.prototype.getFirstVisibleChildIndex=function(e){var t,i=this.getFirstVisibleItem(this._hierarchyNavigator.getLevel(e)+1);return t=void 0===i||void 0!==i&&this._hierarchyNavigator.getParent(i)!==e?0:this._hierarchyNavigator.getIndex(i)},e.prototype._initializeScrollbar=function(e,t){var i=this;this._scrollbar=this._createScrollbar(e),this._scrollbar._onscroll.push(function(e){return i.onScroll()}),t&&(this.scrollbar.initTouch(t,!0),t.style.setProperty("-ms-touch-action","pinch-zoom"))},e.prototype.getItemsCount=function(){return this.model?this._hierarchyNavigator.getLeafCount(this.model):0},e.prototype.getDepth=function(){return this.model?this._hierarchyNavigator.getDepth(this.model):0},e.prototype.onScroll=function(){this.scrollOffset=this._scrollbar.viewMin,this._owner._onScrollAsync(this)},Object.defineProperty(e.prototype,"otherDimension",{get:function(){return this._otherDimension},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!0,configurable:!0}),e.prototype._createScrollbar=function(e){return null},e.prototype.updateScrollPosition=function(){if(this._scrollItems=[],this.model){var e=this.getIntegerScrollOffset(),t=this._hierarchyNavigator.getLeafAt(this.model,e);if(t){this._firstVisibleScrollIndex=e;do this._scrollItems[this._hierarchyNavigator.getLevel(t)]=t,t=this._hierarchyNavigator.getParent(t);while(null!==t)}}},e}();e.TablixDimension=t;var i=function(t){function i(e){t.call(this,e),this._layoutManager=this._tablixLayoutManager.rowLayoutManager,this._footer=null}return __extends(i,t),i.prototype.setFooter=function(e){this._footer=e,this._owner.updateFooterVisibility()},i.prototype.hasFooter=function(){return null!==this._footer},i.prototype._render=function(){var e=this.getFirstVisibleItem(0);this.hasFooter()&&(this.addFooterRowHeader(this._footer),this.addFooterBodyCells(this._footer)),void 0!==e&&this.addNodes(this.model,0,this.getDepth(),this._hierarchyNavigator.getIndex(e))},i.prototype._createScrollbar=function(t){return new e.VerticalScrollbar(t)},i.prototype.addNodes=function(e,t,i,a){for(var r=this._hierarchyNavigator.getCount(e),n=a;r>n;n++){if(!this._layoutManager.needsToRealize)return;var o=this._hierarchyNavigator.getAt(e,n),s=this.addNode(o,e,t,i);t+=s.rowSpan}},i.prototype.getFirstVisibleChildLeaf=function(e){for(var t=e;!this._hierarchyNavigator.isLeaf(t);)t=this.getFirstVisibleChild(t);return t},i.prototype.bindRowHeader=function(e,t){this._binder.bindRowHeader(e,t)},i.prototype.addNode=function(t,i,a,r){var n,o=this._tablixLayoutManager.getOrCreateRowHeader(t,i,a,this._hierarchyNavigator.getLevel(t)),s=this.rowHeaderMatch(t,o);return s||(this._owner._unbindCell(o),o.type=e.TablixCellType.RowHeader,o.item=t),this._hierarchyNavigator.isLeaf(t)?(o.colSpan=r-this._hierarchyNavigator.getLevel(t),o.rowSpan=1,s||this.bindRowHeader(t,o),this._tablixLayoutManager.onRowHeaderRealized(t,o),this.addBodyCells(t,i,a)):(n=this._layoutManager.getRealizedItemsCount(),this.addNodes(this._hierarchyNavigator.getChildren(t),a,r,this.getFirstVisibleChildIndex(t)),o.colSpan=1,o.rowSpan=this._layoutManager.getRealizedItemsCount()-n+1,s||this.bindRowHeader(t,o),this._tablixLayoutManager.onRowHeaderRealized(t,o)),o},i.prototype.rowHeaderMatch=function(t,i){var a=i.item;return i.type===e.TablixCellType.RowHeader&&a&&this._hierarchyNavigator.headerItemEquals(t,a)},i.prototype.addBodyCells=function(e,t,i){for(var a=this._otherDimension.getIntegerScrollOffset(),r=this._otherDimension._layoutManager.getRealizedItemsCount()-this.getDepth(),n=this._hierarchyNavigator,o=this._otherDimension.model,s=this._tablixLayoutManager,l=0;r>l;l++){var u=n.getIntersection(e,n.getLeafAt(o,a+l)),c=s.getOrCreateBodyCell(u,e,t,i,l);this.bindBodyCell(u,c),s.onBodyCellRealized(u,c)}},i.prototype.bindBodyCell=function(t,i){var a=this.bodyCelMatch(t,i);a||(this._owner._unbindCell(i),i.type=e.TablixCellType.BodyCell,i.item=t,this._binder.bindBodyCell(t,i))},i.prototype.addFooterRowHeader=function(t){var i=this._tablixLayoutManager.getOrCreateFooterRowHeader(t,this.model);i.colSpan=this.getDepth();var a=this.rowHeaderMatch(t,i);a||(this._owner._unbindCell(i),i.type=e.TablixCellType.RowHeader,i.item=t,this.bindRowHeader(t,i),this._tablixLayoutManager.onRowHeaderFooterRealized(t,i))},i.prototype.addFooterBodyCells=function(e){for(var t=this._otherDimension.getIntegerScrollOffset(),i=this._otherDimension.layoutManager.getRealizedItemsCount()-this.getDepth(),a=this._tablixLayoutManager,r=0;i>r;r++){var n=this._hierarchyNavigator.getLeafAt(this._otherDimension.model,t+r),o=this._hierarchyNavigator.getIntersection(e,n),s=a.getOrCreateFooterBodyCell(o,r);this.bindBodyCell(o,s),a.onBodyCellFooterRealized(o,s)}},i.prototype.bodyCelMatch=function(t,i){var a=i.item;return i.type===e.TablixCellType.BodyCell&&a&&this._hierarchyNavigator.bodyCellItemEquals(t,a)},i}(t);e.TablixRowDimension=i;var a=function(t){function i(e){t.call(this,e),this._layoutManager=this._tablixLayoutManager.columnLayoutManager}return __extends(i,t),i.prototype._render=function(){var e=this.getFirstVisibleItem(0);void 0!==e&&this.addNodes(this.model,0,this.getDepth(),this._hierarchyNavigator.getIndex(e))},i.prototype._createScrollbar=function(t){var i=new e.HorizontalScrollbar(t);return i.smallIncrement=.2,i},i.prototype.addNodes=function(e,t,i,a){for(var r=this._hierarchyNavigator.getCount(e),n=a;r>n;n++){if(!this._layoutManager.needsToRealize)return;var o=this.addNode(this._hierarchyNavigator.getAt(e,n),e,t,i);t+=o.colSpan}},i.prototype.addNode=function(t,i,a,r){var n=this._tablixLayoutManager.getOrCreateColumnHeader(t,i,this._hierarchyNavigator.getLevel(t),a),o=this.columnHeaderMatch(t,n);if(o||(this._owner._unbindCell(n),n.type=e.TablixCellType.ColumnHeader,n.item=t),this._hierarchyNavigator.isLeaf(t))n.rowSpan=r-this._hierarchyNavigator.getLevel(t);else{var s=this._layoutManager.getRealizedItemsCount();this.addNodes(this._hierarchyNavigator.getChildren(t),a,r,this.getFirstVisibleChildIndex(t)),n.rowSpan=1,n.colSpan=this._layoutManager.getRealizedItemsCount()-s+1}return o||this._binder.bindColumnHeader(t,n),this._tablixLayoutManager.onColumnHeaderRealized(t,n),n},i.prototype.columnHeaderMatch=function(t,i){var a=i.item;return i.type===e.TablixCellType.ColumnHeader&&a&&this._hierarchyNavigator.headerItemEquals(t,a)},i}(t);e.TablixColumnDimension=a}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t=function(){function t(e){this.dim=e,this.averageSize=1,this.handlers=null,this.tablixControl=null}return Object.defineProperty(t.prototype,"dimension",{get:function(){return this.dim},enumerable:!0,configurable:!0}),t.prototype.setScrollDensity=function(e){this.averageSize=e},t.prototype.resize=function(e,t,i,a){this.dim.x=e,this.dim.y=t,this.dim.width=i,this.dim.height=a},t.prototype.getPixelToItem=function(t,i,a,r,n){return new e.TouchUtils.TouchEvent(t*this.averageSize,0,n,-a*this.averageSize,0)},t.prototype.touchEvent=function(t){var i=[];i[0]=this.tablixControl,i[1]=t.dx,i[2]=t.dy,this.handlers&&e.fire([this.handlers],i)},t.prototype.setHandler=function(e,t){this.handlers=t,this.tablixControl=e},t}();e.ColumnTouchDelegate=t;var i=function(){function t(e){this.dim=e,this.averageSize=30,this.handlers=null,this.tablixControl=null}return Object.defineProperty(t.prototype,"dimension",{get:function(){return this.dim},enumerable:!0,configurable:!0}),t.prototype.setScrollDensity=function(e){this.averageSize=e},t.prototype.resize=function(e,t,i,a){this.dim.x=e,this.dim.y=t,this.dim.width=i,this.dim.height=a},t.prototype.getPixelToItem=function(t,i,a,r,n){var o=new e.TouchUtils.TouchEvent(0,i*this.averageSize,n,0,-r*this.averageSize);return o},t.prototype.touchEvent=function(t){var i=[];i[0]=this.tablixControl,i[1]=t.dx,i[2]=t.dy,this.handlers&&e.fire([this.handlers],i)},t.prototype.setHandler=function(e,t){this.handlers=t,this.tablixControl=e},t}();e.RowTouchDelegate=i;var a=function(){function t(e){this.dim=e,this.averageSizeX=t.DefaultAverageSizeX,this.averageSizeY=t.DefaultAverageSizeY,this.handlers=null,this.tablixControl=null}return Object.defineProperty(t.prototype,"dimension",{get:function(){return this.dim},enumerable:!0,configurable:!0}),t.prototype.setScrollDensity=function(e,t){this.averageSizeX=e,this.averageSizeY=t},t.prototype.resize=function(e,t,i,a){var r=this.dim;r.x=e,r.y=t,r.width=i,r.height=a},t.prototype.getPixelToItem=function(t,i,a,r,n){return new e.TouchUtils.TouchEvent(t*this.averageSizeX,i*this.averageSizeY,n,-a*this.averageSizeX,-r*this.averageSizeY)},t.prototype.touchEvent=function(t){var i=[this.tablixControl,t.dx,t.dy];this.handlers&&e.fire([this.handlers],i)},t.prototype.setHandler=function(e,t){this.handlers=t,this.tablixControl=e},t.DefaultAverageSizeX=30,t.DefaultAverageSizeY=30,t}();e.BodyTouchDelegate=a}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){var i=function(){function e(e,t){this.x=e||0,this.y=t||0}return e.prototype.offset=function(e,t){this.x+=e,this.y+=t},e}();t.Point=i;var a=function(e){function t(t,i,a,r){e.call(this,t,i),this.width=a||0,this.height=r||0}return __extends(t,e),Object.defineProperty(t.prototype,"point",{get:function(){return new i(this.x,this.y)},enumerable:!0,configurable:!0}),t.prototype.contains=function(e){return t.contains(this,e)},t.contains=function(e,i){return i&&!t.isEmpty(e)?e.x<=i.x&&i.x<e.x+e.width&&e.y<=i.y&&i.y<e.y+e.height:!1},t.isEmpty=function(e){return!(void 0!==e&&e.width>=0&&e.height>=0)},t}(i);t.Rectangle=a,function(e){e[e.Vertical=0]="Vertical",e[e.Horizontal=1]="Horizontal",e[e.FreeForm=2]="FreeForm"}(t.SwipeDirection||(t.SwipeDirection={}));var r=t.SwipeDirection;!function(e){e[e.NoClick=0]="NoClick",e[e.LeftClick=1]="LeftClick",e[e.RightClick=2]="RightClick",e[e.CenterClick=3]="CenterClick"}(t.MouseButton||(t.MouseButton={}));var n=t.MouseButton,o=function(){function e(e,t,i,a,r){this._x=e,this._y=t,this.isMouseButtonDown=i,this._dx=a||0,this._dy=r||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dx",{get:function(){return this._dx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dy",{get:function(){return this._dy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMouseDown",{get:function(){return this.isMouseButtonDown},enumerable:!0,configurable:!0}),e}();t.TouchEvent=o;var s=function(){function e(){this.touchList=[],this.swipeDirection=r.FreeForm,this.matchingDirectionCount=0,this.lockThreshold=!0,this.scrollThreshold=!0,this.lastTouchEvent=new o(0,0,!1)}return Object.defineProperty(e.prototype,"lastEvent",{get:function(){return this.lastTouchEvent},enumerable:!0,configurable:!0}),e.prototype.addTouchRegion=function(e,t,i){var a={lastPoint:new o(0,0,!1),handler:t,region:e,converter:i};this.touchList=this.touchList.concat([a])},e.prototype.upAllTouches=function(){var e,t;t=this.touchList.length;for(var i=0;t>i;i++)this.touchList[i].lastPoint.isMouseDown&&(e=this.touchList[i].converter.getPixelToItem(this.touchList[i].lastPoint.x,this.touchList[i].lastPoint.y,0,0,!1),this.touchList[i].handler.touchEvent(e)),this.touchList[i].lastPoint=new o(this.touchList[i].lastPoint.x,this.touchList[i].lastPoint.y,!1);this.lastTouchEvent=new o(0,0,!1)},e.prototype.touchEvent=function(e){var t,i,a=0,n=0,s=0,l=0,u=0,c=null;t=this._getActive(),!this.lastTouchEvent.isMouseDown&&e.isMouseDown&&(t=this._findRegions(e)),s=this.lastTouchEvent.x-e.x,l=this.lastTouchEvent.y-e.y,this.lastTouchEvent=new o(e.x,e.y,e.isMouseDown,s,l),i=t.length;for(var h=0;i>h;h++)a=e.x-t[h].region.point.x,n=e.y-t[h].region.point.y,t[h].lastPoint.isMouseDown&&e.isMouseDown?(s=a-t[h].lastPoint.x,l=n-t[h].lastPoint.y,u=Math.abs(180/Math.PI*Math.atan(l/s)),this.scrollThreshold&&(this.lockThreshold&&this.matchingDirectionCount>5?this.swipeDirection===r.Horizontal?l=0:this.swipeDirection===r.Vertical&&(s=0):20>u?(l=0,this.swipeDirection===r.Horizontal?this.matchingDirectionCount++:(this.matchingDirectionCount=1,this.swipeDirection=r.Horizontal)):(u=Math.abs(180/Math.PI*Math.atan(s/l)),20>u?(s=0,this.swipeDirection===r.Vertical?this.matchingDirectionCount++:(this.matchingDirectionCount=1,this.swipeDirection=r.Vertical)):this.swipeDirection===r.FreeForm?this.matchingDirectionCount++:(this.swipeDirection=r.FreeForm,this.matchingDirectionCount=1)))):(s=0,l=0,this.swipeDirection=r.FreeForm,this.matchingDirectionCount=0),t[h].lastPoint=new o(a,n,e.isMouseDown,s,l),c=t[h].converter.getPixelToItem(a,n,s,l,e.isMouseDown),t[h].handler.touchEvent(c)},e.prototype._findRegions=function(e){var t,a=[];t=this.touchList.length;for(var r=0;t>r;r++)this.touchList[r].region.contains(new i(e.x,e.y))&&(a=a.concat([this.touchList[r]]));return a},e.prototype._getActive=function(){var e,t=[];e=this.touchList.length;for(var i=0;e>i;i++)this.touchList[i].lastPoint.isMouseDown&&(t=t.concat([this.touchList[i]]));return t},e}();t.TouchManager=s;var l=function(){function t(e){this.manager=e,this.allowMouseDrag=!0,this.touchPanel=null,this.scale=1,this.documentMouseMoveWrapper=null,this.documentMouseUpWrapper=null}return t.prototype.initTouch=function(e,t,i){var a=this;e.style.setProperty("-ms-touch-action","pinch-zoom"),this.touchReferencePoint=t,this.touchPanel=e,this.allowMouseDrag=void 0===i?!0:i,"ontouchmove"in e?(e.addEventListener("touchstart",function(e){return a.onTouchStart(e)}),e.addEventListener("touchend",function(e){return a.onTouchEnd(e)})):(e.addEventListener("mousedown",function(e){return a.onTouchMouseDown(e)}),e.addEventListener("mouseup",function(e){return a.onTouchMouseUp(e)}))},t.prototype.getXYByClient=function(e){var t=this.rect,a=t.left,r=t.top;void 0!==window.scrollX&&(a+=window.scrollX,r+=window.scrollY);var n=new i(0,0);return n.offset(e.pageX-a,e.pageY-r),n},t.prototype.onTouchStart=function(e){1===e.touches.length&&(e.cancelBubble=!0,this.onTouchMouseDown(e.touches[0]))},t.prototype.onTouchMove=function(e){1===e.touches.length&&(e.preventDefault&&e.preventDefault(),this.onTouchMouseMove(e.touches[0]))},t.prototype.onTouchEnd=function(e){this.onTouchMouseUp(1===e.touches.length?e.touches[0]:e,!0)},t.prototype.onTouchMouseDown=function(t){var i=this;this.scale=e.HTMLElementUtils.getAccumulatedScale(this.touchPanel),document.getSelection().removeAllRanges(),this.rect=(this.touchReferencePoint?this.touchReferencePoint:this.touchPanel).getBoundingClientRect(),"ontouchmove"in this.touchPanel?(this.documentMouseMoveWrapper=function(e){return i.onTouchMove(e)},document.addEventListener("touchmove",this.documentMouseMoveWrapper),this.documentMouseUpWrapper=function(e){return i.onTouchEnd(e)},document.addEventListener("touchend",this.documentMouseUpWrapper)):(this.documentMouseMoveWrapper=function(e){return i.onTouchMouseMove(e)},document.addEventListener("mousemove",this.documentMouseMoveWrapper),this.documentMouseUpWrapper=function(e){return i.onTouchMouseUp(e)},document.addEventListener("mouseup",this.documentMouseUpWrapper)),"setCapture"in this.touchPanel&&this.touchPanel.setCapture()},t.prototype.onTouchMouseMove=function(e){var t,i,a=null!==this.rect&&e.which!==n.NoClick;a&&(i=this.getXYByClient(e),t=new o(i.x/this.scale,i.y/this.scale,a),this.manager.touchEvent(t),e.preventDefault?e.preventDefault():"returnValue"in e&&(e.returnValue=!1))},t.prototype.onTouchMouseUp=function(e,t){this.rect=null,this.manager.upAllTouches(),"releaseCapture"in this.touchPanel&&this.touchPanel.releaseCapture(),null!==this.documentMouseMoveWrapper&&("ontouchmove"in this.touchPanel?(document.removeEventListener("touchmove",this.documentMouseMoveWrapper),document.removeEventListener("touchend",this.documentMouseUpWrapper)):(document.removeEventListener("mousemove",this.documentMouseMoveWrapper),
document.removeEventListener("mouseup",this.documentMouseUpWrapper)),this.documentMouseMoveWrapper=null,this.documentMouseUpWrapper=null)},t}();t.TouchEventInterpreter=l}(t=e.TouchUtils||(e.TouchUtils={}))}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=function(){function i(e){this.mainText=jsCommon.CssConstants.createClassAndSelector("mainText"),this.name=e,this.visualConfiguration={maxFontSize:60}}return i.prototype.getMetaDataColumn=function(e){if(e&&e.metadata&&e.metadata.columns)for(var t=0,i=e.metadata.columns.length;i>t;t++){var a=e.metadata.columns[t];if(a.isMeasure){this.metaDataColumn=a;break}}},i.prototype.getAdjustedFontHeight=function(e,t,i){var a=this.svg.append("text").text(t),r=this.getAdjustedFontHeightCore(a,e,i,0);return a.remove(),r},i.prototype.getAdjustedFontHeightCore=function(t,i,a,r){if(r>10)return a;t.attr("font-size",a);var n=e.TextMeasurementService.measureSvgTextElementWidth(t[0][0]);return i>n?a:this.getAdjustedFontHeightCore(t,i,.9*a,r+1)},i.prototype.clear=function(){this.svg.select(this.mainText.selector).text("")},i.prototype.doValueTransition=function(e,i,a,r,n,o,s){if(o||e!==i||null==i){e||(e=0);var l=this.svg,u=this.currentViewport,c=u.height,h=u.width,p=[i],d=this.getSeedFontHeight(h,c),g=this.getTranslateX(h),m=this.getTranslateY(d),f=this.metaDataColumn;s||(s=t.valueFormatter.create({format:this.getFormatString(f),value:i,displayUnitSystemType:a,formatSingleValues:!0,allowFormatBeautification:!0,columnType:f?f.type:void 0}));var y=s.format(e),v=s.format(i);l.attr("class",this.name);var b=l.selectAll("text").data(p);b.enter().append("text").attr("class",this.mainText["class"]);var C=this.getAdjustedFontHeight(h,v,d);m=this.getTranslateY(C+(c-C)/2);var x=b.text(y).attr({"text-anchor":this.getTextAnchor(),"font-size":C,transform:t.SVGUtil.translate(g,m)}).style({fill:this.style.titleText.color.value});if(null==i)x.text(v);else if(f&&t.AxisHelper.isDateTime(f.type))x.text(v);else{var S=e;x.transition().duration(n).tween("text",function(e){var t=d3.interpolate(S,e);return function(e){var i=t(e);this.textContent=s.format(i)}})}t.SVGUtil.flushAllD3TransitionsIfNeeded(r)}},i.prototype.setTextColor=function(e){this.style.titleText.color.value=e},i.prototype.getSeedFontHeight=function(e,t){var i=Math.floor(.75*Math.min(e,t)),a=this.visualConfiguration.maxFontSize;return a?Math.min(a,i):i},i.prototype.getTranslateX=function(e){if(this.visualConfiguration)switch(this.visualConfiguration.align){case"left":return 0;case"right":return e}return e/2},i.prototype.getTranslateY=function(e){return e},i.prototype.getTextAnchor=function(){if(this.visualConfiguration)switch(this.visualConfiguration.align){case"left":return"start";case"right":return"end"}return"middle"},i.prototype.getFormatString=function(e){return t.valueFormatter.getFormatString(e,i.formatStringProp)},i.formatStringProp={objectName:"general",propertyName:"formatString"},i}();t.AnimatedText=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(t){function i(e,i){t.call(this,"animatedNumber"),e&&(this.svg=e),i&&(this.animator=i)}return __extends(i,t),i.prototype.init=function(e){this.options=e;var t=e.element;this.svg||(this.svg=d3.select(t.get(0)).append("svg")),this.currentViewport=e.viewport,this.hostServices=e.host,this.style=e.style,this.updateViewportDependantProperties()},i.prototype.updateViewportDependantProperties=function(){var e=this.currentViewport;this.svg.attr("width",e.width).attr("height",e.height)},i.prototype.update=function(e){this.currentViewport=e.viewport;var t=this.dataViews=e.dataViews;if(t&&t[0]){var i=t[0];this.updateViewportDependantProperties(),this.getMetaDataColumn(i);var a=i&&i.single?i.single.value:0;null!=a&&this.updateInternal(a,e.suppressAnimations,!0,this.formatter)}},i.prototype.setFormatter=function(e){this.formatter=e},i.prototype.onDataChanged=function(e){this.update({dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewport:this.currentViewport})},i.prototype.onResizing=function(e){this.update({dataViews:this.dataViews,suppressAnimations:!0,viewport:e})},i.prototype.canResizeTo=function(e){return!0},i.prototype.updateInternal=function(t,i,a,r){void 0===a&&(a=!1);var n=this.value||0,o=e.AnimatorCommon.GetAnimationDuration(this.animator,i);this.doValueTransition(n,t,null,this.options.animation,o,a,r),this.value=t},i}(e.AnimatedText);e.AnimatedNumber=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=function(){function i(e){}return Object.defineProperty(i.prototype,"shapeType",{get:function(){return this.data?this.data.shapeType:i.DefaultShape},set:function(e){this.data.shapeType=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineColor",{get:function(){return this.data?this.data.lineColor:i.DefaultStrokeColor},set:function(e){this.data.lineColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineTransparency",{get:function(){return this.data?this.data.lineTransparency:i.DefaultLineTransValue},set:function(e){this.data.lineTransparency=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineWeight",{get:function(){return this.data?this.data.lineWeight:i.DefaultWeightValue},set:function(e){this.data.lineWeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"roundEdge",{get:function(){return this.data?this.data.roundEdge:i.DefaultRoundEdgeValue},set:function(e){this.data.roundEdge=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showFill",{get:function(){return this.data?this.data.showFill:i.DefaultFillShowValue},set:function(e){this.data.showFill=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillColor",{get:function(){return this.data?this.data.fillColor:i.DefaultFillColor},set:function(e){this.data.fillColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shapeTransparency",{get:function(){return this.data?this.data.shapeTransparency:i.DefaultFillTransValue},set:function(e){this.data.shapeTransparency=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"angle",{get:function(){return this.data?this.data.angle:i.DefaultAngle},set:function(e){this.data.angle=this.scaleTo360Deg(e)},enumerable:!0,configurable:!0}),i.prototype.init=function(e){this.element=e.element,this.selection=d3.select(this.element.context),this.currentViewport=e.viewport},i.prototype.update=function(e){this.currentViewport=e.viewport;var t=e.dataViews;if(!_.isEmpty(t)){var i=e.dataViews[0];if(i.metadata&&i.metadata.objects){var a=e.dataViews[0].metadata.objects;this.data=this.getDataFromDataView(a)}}this.render()},i.prototype.getDataFromDataView=function(a){return a?{shapeType:e.DataViewObjects.getValue(a,t.basicShapeProps.general.shapeType,i.DefaultShape),lineColor:this.getValueFromColor(e.DataViewObjects.getValue(a,t.basicShapeProps.line.lineColor,i.DefaultStrokeColor)),lineTransparency:e.DataViewObjects.getValue(a,t.basicShapeProps.line.transparency,i.DefaultLineTransValue),lineWeight:e.DataViewObjects.getValue(a,t.basicShapeProps.line.weight,i.DefaultWeightValue),roundEdge:e.DataViewObjects.getValue(a,t.basicShapeProps.line.roundEdge,i.DefaultRoundEdgeValue),shapeTransparency:e.DataViewObjects.getValue(a,t.basicShapeProps.fill.transparency,i.DefaultFillTransValue),fillColor:this.getValueFromColor(e.DataViewObjects.getValue(a,t.basicShapeProps.fill.fillColor,i.DefaultFillColor)),showFill:e.DataViewObjects.getValue(a,t.basicShapeProps.fill.show,i.DefaultFillShowValue),angle:this.scaleTo360Deg(e.DataViewObjects.getValue(a,t.basicShapeProps.rotation.angle,i.DefaultAngle))}:null},i.prototype.scaleTo360Deg=function(e){return 0!==e&&Math.abs(e)%360===0?e:(e%=360,e=(e+360)%360)},i.prototype.getValueFromColor=function(e){return e.solid?e.solid.color:e},i.prototype.enumerateObjectInstances=function(e){var i=[];switch(e.objectName){case"line":var a={selector:null,properties:{lineColor:this.lineColor,transparency:this.lineTransparency,weight:this.lineWeight},objectName:e.objectName};return this.data.shapeType===t.basicShapeType.rectangle&&(a.properties.roundEdge=this.roundEdge),i.push(a),i;case"fill":return this.shapeType!==t.basicShapeType.line&&i.push({selector:null,properties:{show:this.showFill,fillColor:this.fillColor,transparency:this.shapeTransparency},objectName:e.objectName}),i;case"rotation":return i.push({selector:null,properties:{angle:this.angle},objectName:e.objectName}),i}return null},i.prototype.render=function(){switch(this.selection.html(""),this.shapeType){case t.basicShapeType.rectangle:t.ShapeFactory.createRectangle(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case t.basicShapeType.oval:t.ShapeFactory.createOval(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case t.basicShapeType.line:t.ShapeFactory.createLine(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case t.basicShapeType.arrow:t.ShapeFactory.createUpArrow(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case t.basicShapeType.triangle:t.ShapeFactory.createTriangle(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle)}},i.DefaultShape=t.basicShapeType.rectangle,i.DefaultStrokeColor="#00B8AA",i.DefaultFillColor="#E6E6E6",i.DefaultFillShowValue=!0,i.DefaultFillTransValue=100,i.DefaultWeightValue=3,i.DefaultLineTransValue=100,i.DefaultRoundEdgeValue=0,i.DefaultAngle=0,i}();t.BasicShapeVisual=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(e,t,i){return i>1?e&&e.length>t?[e[t]]:[]:e}function a(e){return e.length>1}function r(e,t,i){return 0===e&&!!t&&!!t.showAxisTitle||1===e&&!i&&!!t&&!!t.secShowAxisTitle}function n(e,t){var i={domain:void 0,merged:!1,tickCount:void 0,forceStartToZero:!1};if(e.length<2)return i;var a,r,n,o,s=e[0].calculateAxesProperties(t)[1],l=e[1].calculateAxesProperties(t)[1],c=s.scale.domain(),h=l.scale.domain();if(c[0]>=0&&h[0]>=0&&(i.forceStartToZero=!0),s.values&&s.values.length>0&&l.values&&l.values.length>0&&(i.tickCount=Math.max(s.values.length,l.values.length)),a=Math.min(c[0],h[0]),r=Math.max(c[1],h[1]),t.forceMerge)return{domain:[a,r],merged:!0,tickCount:i.tickCount,forceStartToZero:!1};if(c[0]>h[1]||c[1]<h[0])return i;o=Math.max(c[0],h[0]),n=Math.min(c[1],h[1]);var p=r-a;if(0===p)return i;var d=Math.abs((n-o)/p);return u>d?i:{domain:[a,r],merged:!0,tickCount:i.tickCount,forceStartToZero:!1}}function o(i,o,s,l,u,c,h,p){var d,g={viewport:o,margin:s,forcedXDomain:[l?l.start:null,l?l.end:null],forceMerge:u&&u.secShow===!1,showCategoryAxisLabel:!1,showValueAxisLabel:!1,categoryAxisScaleType:l&&null!=l.axisScale?l.axisScale:t.axisScale.linear,valueAxisScaleType:u&&null!=u.axisScale?u.axisScale:t.axisScale.linear,categoryAxisDisplayUnits:l&&null!=l.labelDisplayUnits?l.labelDisplayUnits:0,valueAxisDisplayUnits:u&&null!=u.labelDisplayUnits?u.labelDisplayUnits:0,categoryAxisPrecision:l?t.CartesianHelper.getPrecision(l.labelPrecision):null,valueAxisPrecision:u?t.CartesianHelper.getPrecision(u.labelPrecision):null},m=u&&u.secShow===!0,f=!1;a(i)&&!m&&(d=n(i,g),f=d.merged,f?g.forcedYDomain=d.domain:g.forcedTickCount=d.tickCount),u&&(g.forcedYDomain=t.AxisHelper.applyCustomizedDomain([u.start,u.end],g.forcedYDomain));for(var y,v=0,b=i.length;b>v;v++){var C=i[v];1!==v||f||(g.forcedYDomain=u?[u.secStart,u.secEnd]:null,g.valueAxisScaleType=u&&null!=u.secAxisScale?u.secAxisScale:t.axisScale.linear,g.valueAxisDisplayUnits=u&&null!=u.secLabelDisplayUnits?u.secLabelDisplayUnits:0,g.valueAxisPrecision=u?t.CartesianHelper.getPrecision(u.secLabelPrecision):null,d&&d.forceStartToZero&&(g.forcedYDomain?null==g.forcedYDomain[0]&&(g.forcedYDomain[0]=0):g.forcedYDomain=[0,void 0])),g.showCategoryAxisLabel=!!l&&!!l.showAxisTitle,g.showValueAxisLabel=r(v,u,f);var x=C.calculateAxesProperties(g);if(0===v)y={x:x[0],y1:x[1]};else if(x&&!y.y2)if(x[0].axis.scale().domain().length>y.x.axis.scale().domain().length){g.showValueAxisLabel=!!u&&!!u.showAxisTitle;var S=C.calculateAxesProperties(g);y.x=S[0],y.y1=S[1]}else C.overrideXScale(y.x),f||x[1].usingDefaultDomain||(y.y2=x[1]);if(p&&p.x)y.x.willLabelsFit=p.x.willLabelsFit,y.x.willLabelsWordBreak=p.x.willLabelsWordBreak;else{var w=o.width-(s.left+s.right);y.x.willLabelsFit=t.AxisHelper.LabelLayoutStrategy.willLabelsFit(y.x,w,e.TextMeasurementService.measureSvgTextWidth,c),y.x.willLabelsWordBreak=!y.x.willLabelsFit&&!h&&t.AxisHelper.LabelLayoutStrategy.willLabelsWordBreak(y.x,s,w,e.TextMeasurementService.measureSvgTextWidth,e.TextMeasurementService.estimateSvgTextHeight,e.TextMeasurementService.getTailoredTextOrDefault,c)}}return y}var s=jsCommon.EnumExtensions,l=jsCommon.CssConstants.createClassAndSelector,u=.1,c={left:10,right:15,top:0,bottom:12},h=function(){function a(e){this.xRefLine=l("x-ref-line"),this.y1RefLine=l("y1-ref-line");var t=!1;e&&(this.tooltipsEnabled=e.tooltipsEnabled,this.type=e.chartType,this.seriesLabelFormattingEnabled=e.seriesLabelFormattingEnabled,this.isLabelInteractivityEnabled=e.isLabelInteractivityEnabled,this.referenceLinesEnabled=e.referenceLinesEnabled,this.backgroundImageEnabled=e.backgroundImageEnabled,this.lineChartLabelDensityEnabled=e.lineChartLabelDensityEnabled,e.isScrollable&&(t=e.isScrollable),this.animator=e.animator,e.cartesianSmallViewPortProperties&&(this.cartesianSmallViewPortProperties=e.cartesianSmallViewPortProperties),e.behavior&&(this.behavior=e.behavior)),this.axes=new f(t,g.ScrollbarWidth),this.svgAxes=new m(this.axes),this.svgBrush=new d(g.ScrollbarWidth),this.scrollableAxes=new g(this.axes,this.svgBrush)}return a.getAxisVisibility=function(e){switch(e){case 6:case 5:case 7:return 1;case 9:return 3;default:return 2}},a.prototype.init=function(e){this.visualInitOptions=e,this.layers=[];var i=this.element=e.element;this.currentViewport=e.viewport,this.hostServices=e.host,i.addClass(a.ClassName);var r=this.svg=d3.select(i.get(0)).append("svg").style("position","absolute");this.behavior&&(this.clearCatcher=t.appendClearCatcher(r),this.interactivityService=t.createInteractivityService(this.hostServices)),null!=e.style.maxMarginFactor&&this.axes.setMaxMarginFactor(e.style.maxMarginFactor);var n=a.getAxisVisibility(this.type);this.axes.setAxisLinesVisibility(n),this.svgAxes.init(r),this.svgBrush.init(r),this.sharedColorPalette=new y(e.style.colorPalette.dataColors),this.legend=t.createLegend(i,e.interactivity&&e.interactivity.isInteractiveLegend,12!==this.type?this.interactivityService:void 0,this.axes.isScrollable)},a.prototype.isPlayAxis=function(){if(!this.dataViews||!this.dataViews[0])return!1;var e=this.dataViews[0],t=e.categorical&&e.categorical.categories&&e.categorical.categories[0]&&e.categorical.categories[0].source&&e.categorical.categories[0].source.roles&&e.categorical.categories[0].source.roles.Play;return 9===this.type&&this.animator&&null!=e.matrix&&(!e.categorical||t)},a.getIsScalar=function(i,a,r){var n=e.DataViewObjects.getValue(i,a);return i&&void 0!==n?n===t.axisType.scalar&&!t.AxisHelper.isOrdinal(r):!t.AxisHelper.isOrdinal(r)},a.prototype.populateObjectProperties=function(i){if(i&&i.length>0){var a=i[0].metadata;a?(this.legendObjectProperties=e.DataViewObjects.getObject(a.objects,"legend",{}),this.xAxisReferenceLines=e.DataViewObjects.getUserDefinedObjects(a.objects,"xAxisReferenceLine"),this.y1AxisReferenceLines=e.DataViewObjects.getUserDefinedObjects(a.objects,"y1AxisReferenceLine")):this.legendObjectProperties={},this.categoryAxisProperties=t.CartesianHelper.getCategoryAxisProperties(a),this.valueAxisProperties=t.CartesianHelper.getValueAxisProperties(a)}},a.prototype.update=function(a){var r=this.dataViews=a.dataViews,n=this.currentViewport&&a.viewport&&(this.currentViewport.height!==a.viewport.height||this.currentViewport.width!==a.viewport.width);if(this.currentViewport=a.viewport,r){0===this.layers.length&&(this.layers=this.createAndInitLayers(r));var o=this.layers;if(r&&r.length>0){this.populateObjectProperties(r),this.axes.update(r),this.svgAxes.update(this.categoryAxisProperties,this.valueAxisProperties);var s=r[0];s.metadata&&(this.background={image:e.DataViewObjects.getValue(s.metadata.objects,t.scatterChartProps.plotArea.image),transparency:e.DataViewObjects.getValue(s.metadata.objects,t.scatterChartProps.plotArea.transparency,t.visualBackgroundHelper.getDefaultTransparency())})}this.sharedColorPalette.clearPreferredScale();for(var l=0,u=o.length;u>l;l++)o[l].setData(i(r,l,u),n),u>1&&this.sharedColorPalette.rotateScale();if(this.render(!this.hasSetData||a.suppressAnimations),this.hasSetData=this.hasSetData||r&&r.length>0,r&&r.length>0){var c=t.getInvalidValueWarnings(r,!1,!1,!1);this.axes.addWarnings(c),c&&c.length>0&&this.hostServices.setWarnings(c)}}},a.prototype.onDataChanged=function(e){this.update({dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewport:this.currentViewport})},a.prototype.onResizing=function(e){this.currentViewport&&this.currentViewport.height===e.height&&this.currentViewport.width===e.width||this.update({dataViews:this.dataViews,suppressAnimations:!0,viewport:e})},a.prototype.scrollTo=function(e){this.scrollableAxes.scrollTo(e)},a.prototype.enumerateObjectInstances=function(i){var a=new t.ObjectEnumerationBuilder,r=this.layers?this.layers.length:0;if("legend"===i.objectName){if(!this.shouldShowLegendCard())return;var n=e.DataViewObject.getValue(this.legendObjectProperties,t.legendProps.show,this.legend.isVisible()),o=e.DataViewObject.getValue(this.legendObjectProperties,t.legendProps.showTitle,!0),s=e.DataViewObject.getValue(this.legendObjectProperties,t.legendProps.titleText,this.layerLegendData?this.layerLegendData.title:""),l=e.DataViewObject.getValue(this.legendObjectProperties,t.legendProps.labelColor,this.layerLegendData?this.layerLegendData.labelColor:t.LegendData.DefaultLegendLabelFillColor),u=e.DataViewObject.getValue(this.legendObjectProperties,t.legendProps.fontSize,this.layerLegendData&&this.layerLegendData.fontSize?this.layerLegendData.fontSize:t.SVGLegend.DefaultFontSizeInPt);a.pushInstance({selector:null,properties:{show:n,position:t.LegendPosition[this.legend.getOrientation()],showTitle:o,titleText:s,labelColor:l,fontSize:u},objectName:i.objectName})}else if("categoryAxis"===i.objectName&&this.axes.hasCategoryAxis())this.getCategoryAxisValues(a);else if("valueAxis"===i.objectName)this.getValueAxisValues(a);else if("y1AxisReferenceLine"===i.objectName&&this.referenceLinesEnabled){var c=this.sharedColorPalette.getColorByIndex(0).value;t.ReferenceLineHelper.enumerateObjectInstances(a,this.y1AxisReferenceLines,c,i.objectName)}else if("xAxisReferenceLine"===i.objectName&&this.referenceLinesEnabled){var c=this.sharedColorPalette.getColorByIndex(0).value;t.ReferenceLineHelper.enumerateObjectInstances(a,this.xAxisReferenceLines,c,i.objectName)}else"plotArea"===i.objectName&&t.visualBackgroundHelper.enumeratePlot(a,this.background,this.backgroundImageEnabled);for(var h=0,p=r;p>h;h++){var d=this.layers[h];d.enumerateObjectInstances&&d.enumerateObjectInstances(a,i)}return a.complete()},a.prototype.shouldShowLegendCard=function(){var e=this.layers,t=this.dataViews;if(e&&t)for(var i=e.length,a=0,r=0;i>r;r++){if(e[r].hasLegend())return!0;var n=t[r];if(n&&n.categorical&&n.categorical.values&&n.categorical.values.length>0&&(a++,a>1))return!0}return!1},a.prototype.getCategoryAxisValues=function(e){if(this.categoryAxisProperties){var i=t.axisType.both,a=!1,r=this.axes.isLogScaleAllowed(0),n=[t.axisScale.log,t.axisScale.linear];this.layers&&this.layers[0].getSupportedCategoryAxisType&&(i=this.layers[0].getSupportedCategoryAxisType(),a=i===t.axisType.scalar?!0:t.CartesianHelper.isScalar(i===t.axisType.both,this.categoryAxisProperties)),a||(this.categoryAxisProperties.start=null,this.categoryAxisProperties.end=null);var o={selector:null,properties:{},objectName:"categoryAxis",validValues:{axisScale:n,axisStyle:this.axes.categoryAxisHasUnitType?[t.axisStyle.showTitleOnly,t.axisStyle.showUnitOnly,t.axisStyle.showBoth]:[t.axisStyle.showTitleOnly]}};if(o.properties.show=null!=this.categoryAxisProperties.show?this.categoryAxisProperties.show:!0,this.axes.isYAxisCategorical()&&(o.properties.position=this.valueAxisProperties&&null!=this.valueAxisProperties.position?this.valueAxisProperties.position:t.yAxisPosition.left),i===t.axisType.both&&(o.properties.axisType=a?t.axisType.scalar:t.axisType.categorical),a&&(o.properties.axisScale=null!=this.categoryAxisProperties.axisScale&&r?this.categoryAxisProperties.axisScale:t.axisScale.linear,o.properties.start=this.categoryAxisProperties.start,o.properties.end=this.categoryAxisProperties.end),o.properties.showAxisTitle=null!=this.categoryAxisProperties.showAxisTitle?this.categoryAxisProperties.showAxisTitle:!1,o.properties.axisStyle=this.categoryAxisProperties.axisStyle?this.categoryAxisProperties.axisStyle:t.axisStyle.showTitleOnly,o.properties.labelColor=this.categoryAxisProperties.labelColor,a){o.properties.labelDisplayUnits=this.categoryAxisProperties.labelDisplayUnits?this.categoryAxisProperties.labelDisplayUnits:0;var s=this.categoryAxisProperties.labelPrecision;o.properties.labelPrecision=void 0===s||0>s?t.dataLabelUtils.defaultLabelPrecision:s}e.pushInstance(o)}},a.prototype.getValueAxisValues=function(i){if(this.valueAxisProperties){var a=[t.axisScale.log,t.axisScale.linear],r=this.axes.isLogScaleAllowed(1),n=this.axes.isLogScaleAllowed(2),o={selector:null,properties:{},objectName:"valueAxis",validValues:{axisScale:a,secAxisScale:a,axisStyle:this.axes.valueAxisHasUnitType?[t.axisStyle.showTitleOnly,t.axisStyle.showUnitOnly,t.axisStyle.showBoth]:[t.axisStyle.showTitleOnly]}};if(o.properties.show=null!=this.valueAxisProperties.show?this.valueAxisProperties.show:!0,this.axes.isYAxisCategorical()||(o.properties.position=null!=this.valueAxisProperties.position?this.valueAxisProperties.position:t.yAxisPosition.left),o.properties.axisScale=null!=this.valueAxisProperties.axisScale&&r?this.valueAxisProperties.axisScale:t.axisScale.linear,o.properties.start=this.valueAxisProperties.start,o.properties.end=this.valueAxisProperties.end,o.properties.showAxisTitle=null!=this.valueAxisProperties.showAxisTitle?this.valueAxisProperties.showAxisTitle:!1,o.properties.axisStyle=null!=this.valueAxisProperties.axisStyle?this.valueAxisProperties.axisStyle:t.axisStyle.showTitleOnly,o.properties.labelColor=this.valueAxisProperties.labelColor,7!==this.type&&8!==this.type){o.properties.labelDisplayUnits=this.valueAxisProperties.labelDisplayUnits?this.valueAxisProperties.labelDisplayUnits:0;var s=this.valueAxisProperties.labelPrecision;o.properties.labelPrecision=void 0===s||0>s?t.dataLabelUtils.defaultLabelPrecision:s}if(i.pushInstance(o),2===this.layers.length&&(o.properties.secShow=null!=this.valueAxisProperties.secShow?this.valueAxisProperties.secShow:this.axes.hasY2Axis(),o.properties.secShow&&(o.properties.axisLabel="")),this.axes.hasY2Axis()&&o.properties.secShow){i.pushContainer({displayName:e.data.createDisplayNameGetter("Visual_YAxis_ShowSecondary")});var l={selector:null,properties:{},objectName:"valueAxis"};l.properties.secAxisLabel="",l.properties.secPosition=null!=this.valueAxisProperties.secPosition?this.valueAxisProperties.secPosition:t.yAxisPosition.right,l.properties.secAxisScale=null!=this.valueAxisProperties.secAxisScale&&n?this.valueAxisProperties.secAxisScale:t.axisScale.linear,l.properties.secStart=this.valueAxisProperties.secStart,l.properties.secEnd=this.valueAxisProperties.secEnd,l.properties.secShowAxisTitle=null!=this.valueAxisProperties.secShowAxisTitle?this.valueAxisProperties.secShowAxisTitle:!1,i.pushInstance(l).pushInstance({selector:null,properties:{secAxisStyle:this.valueAxisProperties.secAxisStyle?this.valueAxisProperties.secAxisStyle:t.axisStyle.showTitleOnly,labelColor:this.valueAxisProperties.secLabelColor,secLabelDisplayUnits:this.valueAxisProperties.secLabelDisplayUnits?this.valueAxisProperties.secLabelDisplayUnits:0,secLabelPrecision:this.valueAxisProperties.secLabelPrecision<0?0:this.valueAxisProperties.secLabelPrecision},objectName:"valueAxis",validValues:{secAxisStyle:this.axes.secondaryValueAxisHasUnitType?[t.axisStyle.showTitleOnly,t.axisStyle.showUnitOnly,t.axisStyle.showBoth]:[t.axisStyle.showTitleOnly]}}),i.popContainer()}}},a.prototype.onClearSelection=function(){if(this.hasSetData)for(var e=0,t=this.layers.length;t>e;e++){var i=this.layers[e];i.onClearSelection(),i.render(!0)}},a.prototype.createAndInitLayers=function(t){var i,a=this;if(t&&t.length>0){var r=t[0].metadata;r&&(i=r.objects)}var n=p.createLayers(this.type,i,this.interactivityService,this.animator,this.axes.isScrollable,this.seriesLabelFormattingEnabled,this.tooltipsEnabled,this.lineChartLabelDensityEnabled),o=e.Prototype.inherit(this.visualInitOptions);o.svg=this.svgAxes.getScrollableRegion(),o.labelsContext=this.svgAxes.getLabelsRegion(),o.cartesianHost={updateLegend:function(e){return a.legend.drawLegend(e,a.currentViewport)},getSharedColors:function(){return a.sharedColorPalette}},o.chartType=this.type;for(var s=0,l=n.length;l>s;s++)n[s].init(o);return n},a.prototype.renderLegend=function(){for(var e=this.layers,i={title:"",dataPoints:[]},a=0,r=e.length;r>a;a++)this.layerLegendData=e[a].calculateLegend(),this.layerLegendData&&(i.title=0===a?this.layerLegendData.title||"":i.title,i.labelColor=this.layerLegendData.labelColor,i.dataPoints=i.dataPoints.concat(this.layerLegendData.dataPoints||[]),i.fontSize=this.layerLegendData.fontSize||t.SVGLegend.DefaultFontSizeInPt,this.layerLegendData.grouped&&(i.grouped=!0));var n=this.legendObjectProperties;if(n){t.LegendData.update(i,n);var o=n[t.legendProps.position];o&&this.legend.changeOrientation(t.LegendPosition[o])}else this.legend.changeOrientation(t.LegendPosition.Top);(1===i.dataPoints.length&&!i.grouped||this.hideLegends())&&(i.dataPoints=[]),this.legend.drawLegend(i,this.currentViewport)},a.prototype.hideLegends=function(){return this.cartesianSmallViewPortProperties&&this.cartesianSmallViewPortProperties.hideLegendOnSmallViewPort&&this.currentViewport.height<this.cartesianSmallViewPortProperties.MinHeightLegendVisible?!0:!1},a.prototype.render=function(t){var i=this;this.visualInitOptions.interactivity&&this.visualInitOptions.interactivity.isInteractiveLegend||this.renderLegend();var r=this.legendMargins=this.legend.getMargins(),n=this.hideAxisLabels(r),o={height:this.currentViewport.height-r.height,width:this.currentViewport.width-r.width},s=e.Prototype.inherit(c);this.isPlayAxis()&&(o.height-=a.PlayAxisBottomMargin),this.svg.attr({width:o.width,height:o.height});var l=this.axes.negotiateAxes(this.layers,o,s,n,a.TextProperties);this.scrollableAxes.render(l,this.layers,t,function(e,t,a){return i.renderPlotArea(e,t,a,r)})},a.prototype.getPlotAreaRect=function(e,i){var a={left:e.margin.left,top:e.margin.top,width:e.plotArea.width,height:e.plotArea.height};if(this.legend){var r=this.legend.getOrientation();r===t.LegendPosition.Top||r===t.LegendPosition.TopCenter?a.top+=i.height:(r===t.LegendPosition.Left||r===t.LegendPosition.LeftCenter)&&(a.left+=i.width)}return a},a.prototype.renderBackgroundImage=function(e){t.visualBackgroundHelper.renderBackgroundImage(this.background,this.element,e)},a.prototype.hideAxisLabels=function(e){return this.cartesianSmallViewPortProperties&&this.cartesianSmallViewPortProperties.hideAxesOnSmallViewPort&&this.currentViewport.height+e.height<this.cartesianSmallViewPortProperties.MinHeightAxesVisible&&!this.visualInitOptions.interactivity.isInteractiveLegend?!0:!1},a.prototype.renderPlotArea=function(e,i,a,r){var n=i.axes,o=i.plotArea,s=this.getPlotAreaRect(i,r),l=t.AnimatorCommon.GetAnimationDuration(this.animator,a);this.renderBackgroundImage(s),this.svgAxes.renderAxes(i,l),this.renderReferenceLines(i),this.renderLayers(e,o,n,a)},a.prototype.renderReferenceLines=function(e){var i=e.axes,a=e.plotArea,r=this.svgAxes.getScrollableRegion(),n=this.sharedColorPalette.getColorByIndex(0).value,o=!1;if(this.y1AxisReferenceLines)for(var s=0,l=this.y1AxisReferenceLines;s<l.length;s++){var u=l[s],c=u.object;if(c[t.ReferenceLineHelper.referenceLineProps.show]){var h=!i.y1.isCategoryAxis,p={graphicContext:r,referenceLineProperties:c,axes:i,viewport:a,classAndSelector:this.y1RefLine,defaultColor:n,isHorizontal:h};t.ReferenceLineHelper.render(p),o=!0}}o||r.selectAll(this.y1RefLine.selector).remove();var d=!1;if(this.xAxisReferenceLines)for(var g=0,m=this.xAxisReferenceLines;g<m.length;g++){var u=m[g],c=u.object;if(c[t.ReferenceLineHelper.referenceLineProps.show]){var h=!1,f={graphicContext:r,referenceLineProperties:c,axes:i,viewport:a,classAndSelector:this.xRefLine,defaultColor:n,isHorizontal:h};t.ReferenceLineHelper.render(f),d=!0}}d||r.selectAll(this.xRefLine.selector).remove()},a.prototype.getReferenceLineDataLabels=function(e,i){var a=this.sharedColorPalette.getColorByIndex(0).value,r=[];if(this.y1AxisReferenceLines)for(var n=0,o=this.y1AxisReferenceLines;n<o.length;n++){var s=o[n],l=s.object;if(l[t.ReferenceLineHelper.referenceLineProps.show]&&l[t.ReferenceLineHelper.referenceLineProps.dataLabelShow]){var u=!e.y1.isCategoryAxis,c={referenceLineProperties:l,axes:e,viewport:i,defaultColor:a,isHorizontal:u};r.push(t.ReferenceLineHelper.createLabelDataPoint(c))}}if(this.xAxisReferenceLines)for(var h=0,p=this.xAxisReferenceLines;h<p.length;h++){var s=p[h],l=s.object;if(l[t.ReferenceLineHelper.referenceLineProps.show]&&l[t.ReferenceLineHelper.referenceLineProps.dataLabelShow]){var u=!1,d={referenceLineProperties:l,axes:e,viewport:i,defaultColor:a,isHorizontal:u};r.push(t.ReferenceLineHelper.createLabelDataPoint(d))}}return r},a.prototype.renderDataLabels=function(i,a,r,n,o){var s=this.svgAxes.getLabelBackground(),l=this.svgAxes.getLabelsRegion();if(this.behavior){var u=t.NewDataLabelUtils.getDataLabelLayoutOptions(this.type),c=new e.LabelLayout(u),h=c.layout(i,r);o&&t.NewDataLabelUtils.drawLabelBackground(s,h,"#FFFFFF",.7);var p;if(this.animator&&!n){var d=this.isPlayAxis(),g=d?t.PlayChart.FrameAnimationDuration:this.animator.getDuration();p=t.NewDataLabelUtils.animateDefaultLabels(l,h,g,a,d?"linear":void 0)}else p=t.NewDataLabelUtils.drawDefaultLabels(l,h,a);if(u.allowLeaderLines){var m=_.filter(h,function(e){return null!=e.leaderLinePoints&&!_.isEmpty(e.leaderLinePoints)&&null!=e.identity});t.NewDataLabelUtils.drawLabelLeaderLines(l,m,function(e){return e.identity.getKey()})}if(this.interactivityService&&this.isLabelInteractivityEnabled){var f={labelItems:p};this.interactivityService.bind(h,new t.LabelsBehavior,f,{isLabels:!0})}}else{var c=new e.LabelLayout({maximumOffset:t.NewDataLabelUtils.maxLabelOffset,startingOffset:t.NewDataLabelUtils.startingLabelOffset}),h=c.layout(i,r);o&&t.NewDataLabelUtils.drawLabelBackground(s,h,"#FFFFFF",.7),t.NewDataLabelUtils.drawDefaultLabels(l,h,a)}},a.prototype.renderLayers=function(e,i,a,r){for(var n=[],o=[],s=[],l=!0,u=0,c=e.length;c>u;u++){var h=e[u].render(r);if(h){if(this.behavior&&(o=o.concat(h.dataPoints),s.push(h.behaviorOptions)),h.labelDataPointGroups)for(var p=h.labelDataPointGroups,d=0;d<p.length;d++){var g=p[d];n.push({labelDataPoints:t.NewDataLabelUtils.removeDuplicates(g.labelDataPoints),maxNumberOfLabels:g.maxNumberOfLabels})}else{var m=h.labelDataPoints;n.push({labelDataPoints:t.NewDataLabelUtils.removeDuplicates(m),maxNumberOfLabels:m.length})}l=l&&h.labelsAreNumeric}}var f=this.getReferenceLineDataLabels(a,i);if(_.isEmpty(f)||n.unshift({labelDataPoints:f,maxNumberOfLabels:f.length}),this.renderDataLabels(n,l,i,r,e.length>1),this.interactivityService){var y={layerOptions:s,clearCatcher:this.clearCatcher};if(this.isPlayAxis()){var v=new t.CartesianChartBehavior([new t.PlayChartWebBehavior]);s[0].visualBehavior=this.behavior.behaviors[0],this.interactivityService.bind(o,v,y);
}else this.interactivityService.bind(o,this.behavior,y)}},a.getPreferredPlotArea=function(e,t,i,r,n){var o={height:i.height,width:i.width};if(!n&&r){var s=a.getPreferredCategorySpan(e,t);o.width=Math.max(s,i.width)}return o},a.getPreferredCategorySpan=function(e,t){return t*(e+2*a.OuterPaddingRatio)},a.getLayout=function(e,t){var i=t.categoryCount,r=t.availableWidth,n=t.domain,o=!!t.isScalar,s=!!t.isScrollable,l=a.getCategoryThickness(e?e.series:null,i,r,n,o),u=l*a.OuterPaddingRatio*2,c=Math.round((r-u)/l),h=Math.min(c,i),p=a.OuterPaddingRatio;if(!o){var d=(r-l*h)/2;p=d/l}return!o&&s&&(h=i),{categoryCount:h,categoryThickness:l,outerPaddingRatio:p,isScalar:o}},a.getCategoryThickness=function(e,t,i,r,n){var o;if(2>t)o=i*(1-a.OuterPaddingRatio);else if(n&&r&&r.length>1){var s=a.getMinInterval(e),l=r[r.length-1]-r[0],u=s/(l+s*a.OuterPaddingRatio*2);o=i*u,o=Math.max(o,a.MinScalarRectThickness)}else o=i/(t+2*a.OuterPaddingRatio),o=Math.max(o,a.MinOrdinalRectThickness);var c=i/(3+2*a.OuterPaddingRatio);return!n&&t>=3?Math.max(Math.min(o,c),a.MinOrdinalRectThickness):Math.min(o,c)},a.getMinInterval=function(e){var t=Number.MAX_VALUE;if(e.length>0)for(var i=e[0].data.filter(function(e){return!e.highlight}),a=0,r=i.length-1;r>a;a++)t=Math.min(t,Math.abs(i[a+1].categoryValue-i[a].categoryValue));return t},a.MinOrdinalRectThickness=20,a.MinScalarRectThickness=2,a.OuterPaddingRatio=.4,a.InnerPaddingRatio=.2,a.TickLabelPadding=2,a.ClassName="cartesianChart",a.PlayAxisBottomMargin=75,a.FontSize=11,a.FontSizeString=jsCommon.PixelConverter.toString(a.FontSize),a.TextProperties={fontFamily:"wf_segoe-ui_normal",fontSize:a.FontSizeString},a}();t.CartesianChart=h;var p,d=function(){function e(e){this.brush=d3.svg.brush(),this.brushWidth=e}return e.prototype.init=function(e){this.element=e},e.prototype.remove=function(){this.element.selectAll(e.Brush.selector).remove(),this.brushGraphicsContext=void 0},e.prototype.getExtent=function(){return this.brush.extent()},e.prototype.setExtent=function(e){this.brush.extent(e)},e.prototype.setScale=function(e){this.isHorizontal?this.brush.x(e):this.brush.y(e)},e.prototype.setOrientation=function(e){this.isHorizontal=e},e.prototype.renderBrush=function(i,a,r,n){var o=this;this.brushGraphicsContext||(this.brushGraphicsContext=this.element.append("g").classed(e.Brush["class"],!0)),this.scrollCallback=n,this.brush.on("brush",function(){return window.requestAnimationFrame(n)}).on("brushend",function(){return o.resizeExtent(i,o.isHorizontal)});var s=this.brushContext=this.brushGraphicsContext.attr({transform:t.SVGUtil.translate(a,r),"drag-resize-disabled":"true"}).call(this.brush);s.selectAll(".resize rect").remove(),s.select(".background").style("cursor","default"),s.selectAll(".extent").style({"fill-opacity":e.FillOpacity,cursor:"default"}),this.isHorizontal?s.selectAll("rect").attr("height",this.brushWidth):s.selectAll("rect").attr("width",this.brushWidth)},e.prototype.scroll=function(){this.scrollCallback()},e.prototype.resizeExtent=function(e,t){var i=this.brushContext;t?i.select(".extent").attr("width",e):i.select(".extent").attr("height",e)},e.Brush=l("brush"),e.FillOpacity=.125,e}(),g=function(){function e(e,t){this.axes=e,this.brush=t}return e.prototype.filterDataToViewport=function(e,t,i,a,r){if(a){var n,o=[],s=r[0],l=r[1],u=a(1)-a(0),c=Math.floor(s/u),h=Math.ceil((l-s)/u),p=c+h,d=a.domain();if(e.domain(d),n=d.slice(c,p),n&&n.length>0){for(var g=0;g<t.length;g++)o[g]=t[g].setFilteredData(n[0],n[n.length-1]+1);e.domain(n);var m;m=this.axes.isXScrollBarVisible?i.x:i.y1,m.axis.scale(e),m.scale(e),m.axis.ticks(n.length),m.axis.tickValues(n);var f=m.axis.tickFormat();m.values=_.map(n,function(e){return f(e)})}}},e.prototype.render=function(t,i,a,r){var n,o,s,l,u,c=this,h=t.plotArea;if(this.axes.isXScrollBarVisible)n=t.axes.x.scale,o=t.margin.left,s=t.viewport.height,l=t.preferredPlotArea.width,u=h.width;else{if(!this.axes.isYScrollBarVisible)return this.brush.remove(),void r(i,t,a);n=t.axes.y1.scale,o=t.viewport.width,s=t.margin.top,l=t.preferredPlotArea.height,u=h.height}this.brushMinExtent=e.getMinExtent(l,u),this.scrollScale=n.copy(),this.scrollScale.rangeBands([0,u]),this.brush.setOrientation(this.axes.isXScrollBarVisible),this.brush.setScale(this.scrollScale),this.brush.setExtent([0,this.brushMinExtent]);var p=function(e,a){c.filterDataToViewport(n,i,t.axes,c.scrollScale,e),r(i,t,a)},d=function(){return c.onBrushed(c.scrollScale,n,t,u,p)};this.brush.renderBrush(this.brushMinExtent,o,s,d),n.rangeBands([0,u]),p(this.brush.getExtent(),a)},e.prototype.scrollTo=function(t){var i=this.brush.getExtent(),a=i[1]-i[0];i[0]=this.scrollScale(t),i[1]=i[0]+a,this.brush.setExtent(i);var r=this.scrollScale.rangeExtent()[1];e.clampBrushExtent(this.brush,r,this.brushMinExtent),this.brush.scroll()},e.getMinExtent=function(e,t){return t*t/e},e.prototype.onBrushed=function(t,i,a,r,n){var o=this.brush;if(i&&t){e.clampBrushExtent(this.brush,r,this.brushMinExtent);var s=o.getExtent();n(s,!0)}},e.clampBrushExtent=function(e,t,i){var a=e.getExtent(),r=a[1]-a[0];if(!(r===i&&a[1]<=t&&a[0]>=0)){if(r>i){var n=(r-i)/2;a[0]+=n,a[1]-=n}else if(i>r){var n=(i-r)/2;a[0]-=n,a[1]+=n}a[0]<0?(a[0]=0,a[1]=i):a[0]>t-i&&(a[0]=t-i,a[1]=t),e.setExtent(a)}},e.ScrollbarWidth=10,e}(),m=function(){function i(e){this.axes=e}return i.prototype.getScrollableRegion=function(){return this.axisGraphicsContextScrollable},i.prototype.getLabelsRegion=function(){return this.labelRegion},i.prototype.getLabelBackground=function(){return this.labelBackgroundRegion},i.prototype.getXAxis=function(){return this.xAxisGraphicsContext},i.prototype.getY1Axis=function(){return this.y1AxisGraphicsContext},i.prototype.getY2Axis=function(){return this.y2AxisGraphicsContext},i.prototype.update=function(e,t){this.categoryAxisProperties=e,this.valueAxisProperties=t},i.prototype.init=function(e){var a=this.axisGraphicsContext=e.append("g").classed(i.AxisGraphicsContext["class"],!0);this.svgScrollable=e.append("svg").classed("svgScrollable",!0).style("overflow","hidden");var r=this.axisGraphicsContextScrollable=this.svgScrollable.append("g").classed(i.AxisGraphicsContext["class"],!0);this.labelBackgroundRegion=this.svgScrollable.append("g").classed(t.NewDataLabelUtils.labelBackgroundGraphicsContextClass["class"],!0),this.labelRegion=this.svgScrollable.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass["class"],!0);var n=this.axes.showLinesOnX,o=this.axes.showLinesOnY,s=o,l=!s;l?(this.y1AxisGraphicsContext=r.append("g").attr("class","y axis"),this.y2AxisGraphicsContext=r.append("g").attr("class","y axis")):(this.y1AxisGraphicsContext=a.append("g").attr("class","y axis"),this.y2AxisGraphicsContext=a.append("g").attr("class","y axis")),s?this.xAxisGraphicsContext=r.append("g").attr("class","x axis"):this.xAxisGraphicsContext=a.append("g").attr("class","x axis"),this.xAxisGraphicsContext.classed("showLinesOnAxis",n),this.y1AxisGraphicsContext.classed("showLinesOnAxis",o),this.y2AxisGraphicsContext.classed("showLinesOnAxis",o),this.xAxisGraphicsContext.classed("hideLinesOnAxis",!n),this.y1AxisGraphicsContext.classed("hideLinesOnAxis",!o),this.y2AxisGraphicsContext.classed("hideLinesOnAxis",!o)},i.prototype.renderAxes=function(a,r){var n,o,s,l=a.marginLimits,u=a.plotArea,h=a.viewport,p=a.margin,d=a.axes,g=a.tickLabelMargins,m=l.bottom,f=l.left;if(this.axes.shouldRenderAxis(d.x)){n=d.x.isCategoryAxis?this.categoryAxisProperties&&this.categoryAxisProperties.labelColor?this.categoryAxisProperties.labelColor:null:this.valueAxisProperties&&this.valueAxisProperties.labelColor?this.valueAxisProperties.labelColor:null,d.x.axis.orient("bottom"),d.x.willLabelsFit||d.x.axis.tickPadding(i.TickPaddingRotatedX);var y=this.xAxisGraphicsContext;r?y.transition().duration(r).call(d.x.axis):y.call(d.x.axis),y.call(i.darkenZeroLine).call(i.setAxisLabelColor,n);var v=y.selectAll("text");d.x.willLabelsWordBreak?v.call(t.AxisHelper.LabelLayoutStrategy.wordBreak,d.x,m):v.call(t.AxisHelper.LabelLayoutStrategy.rotate,m,e.TextMeasurementService.svgEllipsis,!d.x.willLabelsFit,m===g.xMax,d.x,p,this.axes.isXScrollBarVisible||this.axes.isYScrollBarVisible)}else this.xAxisGraphicsContext.selectAll("*").remove();if(this.axes.shouldRenderAxis(d.y1)){o=d.y1.isCategoryAxis?this.categoryAxisProperties&&this.categoryAxisProperties.labelColor?this.categoryAxisProperties.labelColor:null:this.valueAxisProperties&&this.valueAxisProperties.labelColor?this.valueAxisProperties.labelColor:null;var b=this.axes.shouldShowY1OnRight();d.y1.axis.tickSize(-u.width).tickPadding(i.TickPaddingY).orient(this.axes.getYAxisOrientation().toLowerCase());var C=this.y1AxisGraphicsContext;r?C.transition().duration(r).call(d.y1.axis):C.call(d.y1.axis),C.call(i.darkenZeroLine).call(i.setAxisLabelColor,o),g.yLeft>=f&&C.selectAll("text").call(t.AxisHelper.LabelLayoutStrategy.clip,f-c.left,e.TextMeasurementService.svgEllipsis),!d.y2||this.valueAxisProperties&&null!=this.valueAxisProperties.secShow&&!this.valueAxisProperties.secShow?this.y2AxisGraphicsContext.selectAll("*").remove():(s=this.valueAxisProperties&&this.valueAxisProperties.secLabelColor?this.valueAxisProperties.secLabelColor:null,d.y2.axis.tickPadding(i.TickPaddingY).orient(b?t.yAxisPosition.left.toLowerCase():t.yAxisPosition.right.toLowerCase()),r?this.y2AxisGraphicsContext.transition().duration(r).call(d.y2.axis):this.y2AxisGraphicsContext.call(d.y2.axis),this.y2AxisGraphicsContext.call(i.darkenZeroLine).call(i.setAxisLabelColor,s),g.yRight>=f&&this.y2AxisGraphicsContext.selectAll("text").call(t.AxisHelper.LabelLayoutStrategy.clip,f-c.right,e.TextMeasurementService.svgEllipsis))}else this.y1AxisGraphicsContext.selectAll("*").remove(),this.y2AxisGraphicsContext.selectAll("*").remove();var x=a.axisLabels,S=null!=x.x||null!=x.y||null!=x.y2;if(S){var w=!this.axes.shouldRenderAxisTitle(d.x,!0,!1),D=!this.axes.shouldRenderAxisTitle(d.y1,!0,!1),P=!this.axes.shouldRenderAxisTitle(d.y2,!1,!0),L={axisLabels:x,viewport:h,margin:p,hideXAxisTitle:w,hideYAxisTitle:D,hideY2AxisTitle:P,xLabelColor:n,yLabelColor:o,y2LabelColor:s,fontSize:i.AxisLabelFontSize};this.renderAxesLabels(L)}else this.axisGraphicsContext.selectAll(".xAxisLabel").remove(),this.axisGraphicsContext.selectAll(".yAxisLabel").remove();this.translateAxes(h,p)},i.prototype.renderAxesLabels=function(i){this.axisGraphicsContext.selectAll(".xAxisLabel").remove(),this.axisGraphicsContext.selectAll(".yAxisLabel").remove();var a=i.margin,r=i.viewport.width-(a.left+a.right),n=i.viewport.height,o=i.fontSize,s=o,l=this.axes.shouldShowY1OnRight();if(!i.hideXAxisTitle){var u=this.axisGraphicsContext.append("text").style("text-anchor","middle").text(i.axisLabels.x).call(function(e){e.each(function(){var e=d3.select(this);e.attr({"class":"xAxisLabel",transform:t.SVGUtil.translate(r/2,n-s)})})});u.style("fill",i.xLabelColor?i.xLabelColor.solid.color:null),u.call(t.AxisHelper.LabelLayoutStrategy.clip,r,e.TextMeasurementService.svgEllipsis)}if(!i.hideYAxisTitle){var c=this.axisGraphicsContext.append("text").style("text-anchor","middle").text(i.axisLabels.y).call(function(e){e.each(function(){var e=d3.select(this);e.attr({"class":"yAxisLabel",transform:"rotate(-90)",y:l?r+a.right-o:-a.left,x:-((n-a.top-a.bottom)/2),dy:"1em"})})});c.style("fill",i.yLabelColor?i.yLabelColor.solid.color:null),c.call(t.AxisHelper.LabelLayoutStrategy.clip,n-(a.bottom+a.top),e.TextMeasurementService.svgEllipsis)}if(!i.hideY2AxisTitle&&i.axisLabels.y2){var h=this.axisGraphicsContext.append("text").style("text-anchor","middle").text(i.axisLabels.y2).call(function(e){e.each(function(){var e=d3.select(this);e.attr({"class":"yAxisLabel",transform:"rotate(-90)",y:l?-a.left:r+a.right-o,x:-((n-a.top-a.bottom)/2),dy:"1em"})})});h.style("fill",i.y2LabelColor?i.y2LabelColor.solid.color:null),h.call(t.AxisHelper.LabelLayoutStrategy.clip,n-(a.bottom+a.top),e.TextMeasurementService.svgEllipsis)}},i.prototype.translateAxes=function(e,i){var a=e.width-(i.left+i.right),r=e.height-(i.top+i.bottom),n=this.axes.shouldShowY1OnRight();this.xAxisGraphicsContext.attr("transform",t.SVGUtil.translate(0,r)),this.y1AxisGraphicsContext.attr("transform",t.SVGUtil.translate(n?a:0,0)),this.y2AxisGraphicsContext.attr("transform",t.SVGUtil.translate(n?0:a,0)),this.svgScrollable.attr({x:0,width:e.width,height:e.height}),this.axisGraphicsContext.attr("transform",t.SVGUtil.translate(i.left,i.top)),this.axisGraphicsContextScrollable.attr("transform",t.SVGUtil.translate(i.left,i.top)),this.labelRegion.attr("transform",t.SVGUtil.translate(i.left,i.top)),this.labelBackgroundRegion.attr("transform",t.SVGUtil.translate(i.left,i.top)),this.axes.isXScrollBarVisible?(this.svgScrollable.attr({x:i.left}),this.axisGraphicsContextScrollable.attr("transform",t.SVGUtil.translate(0,i.top)),this.labelRegion.attr("transform",t.SVGUtil.translate(0,i.top)),this.labelBackgroundRegion.attr("transform",t.SVGUtil.translate(0,i.top)),this.svgScrollable.attr("width",a)):this.axes.isYScrollBarVisible&&this.svgScrollable.attr("height",r+i.top)},i.darkenZeroLine=function(e){var t=e.selectAll("g.tick").filter(function(e){return 0===e}).node();t&&d3.select(t).select("line").classed("zero-line",!0)},i.setAxisLabelColor=function(e,t){e.selectAll("g.tick text").style("fill",t?t.solid.color:null)},i.AxisGraphicsContext=l("axisGraphicsContext"),i.TickPaddingY=10,i.TickPaddingRotatedX=5,i.AxisLabelFontSize=11,i}(),f=function(){function i(e,a){this.scrollbarWidth=a,this.isScrollable=e,this.maxMarginFactor=i.MaxMarginFactor,this.yAxisOrientation=t.yAxisPosition.left,this.lastLeft=0}return i.prototype.shouldShowY1OnRight=function(){return this.yAxisOrientation===t.yAxisPosition.right},i.prototype.isYAxisCategorical=function(){return this.layout&&this.layout.axes.y1.isCategoryAxis},i.prototype.hasCategoryAxis=function(){var e=this.layout&&this.layout.axes;return e?this.isYAxisCategorical()?e.y1&&e.y1.values.length>0:e.x&&e.x.values.length>0:!1},i.prototype.hasY2Axis=function(){return this.layout&&null!=this.layout.axes.y2},i.prototype.getYAxisOrientation=function(){return this.yAxisOrientation},i.prototype.setAxisLinesVisibility=function(e){this.showLinesOnX=s.hasFlag(e,3)||s.hasFlag(e,1),this.showLinesOnY=s.hasFlag(e,3)||s.hasFlag(e,2)},i.prototype.setMaxMarginFactor=function(e){this.maxMarginFactor=e},i.prototype.update=function(e){if(e&&e.length>0){var i=e[0].metadata;this.categoryAxisProperties=t.CartesianHelper.getCategoryAxisProperties(i),this.valueAxisProperties=t.CartesianHelper.getValueAxisProperties(i)}var a=this.valueAxisProperties.position;this.yAxisOrientation=a?a.toString():t.yAxisPosition.left},i.prototype.addWarnings=function(e){var i=this.layout&&this.layout.axes;(i&&i.x&&i.x.hasDisallowedZeroInDomain||i.y1&&i.y1.hasDisallowedZeroInDomain||i.y2&&i.y2.hasDisallowedZeroInDomain)&&e.unshift(new t.ZeroValueWarning)},i.prototype.negotiateAxes=function(a,r,n,s,l){var u=e.Prototype.inherit(i.MinimumMargin),c=e.Prototype.inherit(r),h=c.width*this.maxMarginFactor,p=Math.max(i.MinimumMargin.bottom,Math.ceil(c.height*this.maxMarginFactor)),d={left:h,right:h,top:0,bottom:p};u.left=this.lastLeft;var g,m=o(a,c,u,this.categoryAxisProperties,this.valueAxisProperties,l,!1,null),f=this.shouldRenderAxis(m.x),y=this.shouldRenderAxis(m.y1),v=this.shouldRenderAxis(m.y2,!0),b=c.width-(u.left+u.right),C=!1;this.isXScrollBarVisible=!1,this.isYScrollBarVisible=!1;var x=this.shouldShowY1OnRight();if(a&&(a[0].getVisualCategoryAxisIsScalar&&(C=a[0].getVisualCategoryAxisIsScalar()),!C&&this.isScrollable&&a[0].getPreferredPlotArea)){var S=this.showLinesOnY?m.x.categoryThickness:m.y1.categoryThickness,w=this.showLinesOnY?m.x.values.length:m.y1.values.length;g=a[0].getPreferredPlotArea(C,w,S),this.showLinesOnY&&g&&g.width>c.width&&(this.isXScrollBarVisible=!0,c.height-=this.scrollbarWidth),this.showLinesOnX&&g&&g.height>c.height&&(this.isYScrollBarVisible=!0,c.width-=this.scrollbarWidth,b=c.width-(u.left+u.right))}m=o(a,c,u,this.categoryAxisProperties,this.valueAxisProperties,l,this.isXScrollBarVisible||this.isYScrollBarVisible,m);for(var D=void 0,P=void 0,L=0,_=!1;2>L&&!_;L++){D=t.AxisHelper.getTickLabelMargins({width:b,height:c.height},d.left,e.TextMeasurementService.measureSvgTextWidth,e.TextMeasurementService.estimateSvgTextHeight,m,d.bottom,l,this.isXScrollBarVisible||this.isYScrollBarVisible,x,f,y,v);var N=x?D.yRight:D.yLeft,T=x?D.yLeft:D.yRight,V=D.xMax;N+=n.left,(v&&!x||x&&y)&&(T+=n.right),V+=n.bottom,s&&(m.x.axisLabel=null,m.y1.axisLabel=null,m.y2&&(m.y2.axisLabel=null)),this.addUnitTypeToAxisLabels(m),P={x:m.x.axisLabel,y:m.y1.axisLabel,y2:m.y2?m.y2.axisLabel:null},null!=P.x&&(V+=i.XAxisLabelPadding),null!=P.y&&(N+=i.YAxisLabelPadding),null!=P.y2&&(T+=i.YAxisLabelPadding),u.left=x?T:N,u.right=x?N:T,u.bottom=V,b=c.width-(u.left+u.right);var M=m.y1.values.length,A=m.y2&&m.y2.values.length;m=o(a,c,u,this.categoryAxisProperties,this.valueAxisProperties,l,this.isXScrollBarVisible||this.isYScrollBarVisible,m),m.y1.values.length!==M||m.y2&&m.y2.values.length!==A||(_=!0)}var R={width:c.width-(u.left+u.right),height:c.height-(u.top+u.bottom)};return this.layout={axes:m,axisLabels:P,margin:u,marginLimits:d,viewport:c,plotArea:R,preferredPlotArea:g,tickLabelMargins:D},this.lastLeft=u.left,this.layout},i.prototype.isLogScaleAllowed=function(e){var t=this.layout&&this.layout.axes;if(!t)return!1;switch(e){case 0:return t.x.isLogScaleAllowed;case 1:return t.y1.isLogScaleAllowed;case 2:return t.y2&&t.y2.isLogScaleAllowed}},i.prototype.axesHaveTicks=function(e){if(!this.layout)return!1;var i=this.layout.margin,a=e.width-(i.left+i.right),r=e.height-(i.top+i.bottom);return 0===t.AxisHelper.getRecommendedNumberOfTicksForXAxis(a)&&0===t.AxisHelper.getRecommendedNumberOfTicksForYAxis(r)?!1:!0},i.prototype.shouldRenderAxisTitle=function(e,t,i){var a=i?"secShowAxisTitle":"showAxisTitle";return!!this.getAxisProperty(e,a,t)},i.prototype.shouldRenderAxis=function(e,t){if(void 0===t&&(t=!1),!e)return!1;var i=t?"secShow":"show";return this.getAxisProperty(e,i,!0)&&e.values&&e.values.length>0},i.prototype.getAxisProperty=function(e,t,i){if(!e)return i;var a=e.isCategoryAxis?this.categoryAxisProperties:this.valueAxisProperties;return a&&null!=a[t]?a[t]:i},i.prototype.addUnitTypeToAxisLabels=function(e){var a=i.getUnitType(e.x.formatter);if(e.x.isCategoryAxis?this.categoryAxisHasUnitType=null!=a:this.valueAxisHasUnitType=null!=a,e.x.axisLabel&&a&&(e.x.isCategoryAxis?e.x.axisLabel=t.AxisHelper.createAxisLabel(this.categoryAxisProperties,e.x.axisLabel,a):e.x.axisLabel=t.AxisHelper.createAxisLabel(this.valueAxisProperties,e.x.axisLabel,a)),a=i.getUnitType(e.y1.formatter),e.y1.isCategoryAxis?this.categoryAxisHasUnitType=null!=a:this.valueAxisHasUnitType=null!=a,e.y1.axisLabel&&a&&(e.y1.isCategoryAxis?e.y1.axisLabel=t.AxisHelper.createAxisLabel(this.categoryAxisProperties,e.y1.axisLabel,a):e.y1.axisLabel=t.AxisHelper.createAxisLabel(this.valueAxisProperties,e.y1.axisLabel,a)),e.y2){var r=i.getUnitType(e.y2.formatter);this.secondaryValueAxisHasUnitType=null!=r,e.y2.axisLabel&&r&&(e.y2.axisLabel=t.AxisHelper.createAxisLabel(this.valueAxisProperties,e.y2.axisLabel,r,!0))}},i.getUnitType=function(e){return e&&e.displayUnit&&e.displayUnit.value>1?e.displayUnit.title:void 0},i.YAxisLabelPadding=20,i.XAxisLabelPadding=18,i.MaxMarginFactor=.25,i.MinimumMargin={left:1,right:1,top:8,bottom:25},i}();!function(e){function i(e,i,u,c,h,p,d,g){void 0===h&&(h=!1),void 0===p&&(p=!1);var m=[],f={isScrollable:h,animator:c,interactivityService:u,tooltipsEnabled:d,seriesLabelFormattingEnabled:p,lineChartLabelDensityEnabled:g};switch(e){case 1:m.push(a(2,!1,f));break;case 0:m.push(a(1,!1,f));break;case 2:m.push(a(16,!1,f));break;case 9:m.push(r(f));break;case 12:m.push(n(f));break;case 11:m.push(o(f));break;case 4:m.push(s(t.ColumnChartType.stackedColumn,f));break;case 3:m.push(s(t.ColumnChartType.clusteredColumn,f));break;case 8:m.push(s(t.ColumnChartType.hundredPercentStackedColumn,f));break;case 6:m.push(s(t.ColumnChartType.stackedBar,f));break;case 5:m.push(s(t.ColumnChartType.clusteredBar,f));break;case 7:m.push(s(t.ColumnChartType.hundredPercentStackedBar,f));break;case 10:var y=l();m.push(s(y,f)),m.push(a(1,!0,f));break;case 13:m.push(s(t.ColumnChartType.clusteredColumn,f)),m.push(a(1,!0,f));break;case 14:m.push(s(t.ColumnChartType.stackedColumn,f)),m.push(a(1,!0,f));break;case 15:m.push(s(t.ColumnChartType.clusteredColumn,f)),m.push(o(f));break;case 16:m.push(s(t.ColumnChartType.stackedColumn,f)),m.push(o(f))}return m}function a(e,i,a){var r={animator:a.animator,interactivityService:a.interactivityService,isScrollable:a.isScrollable,tooltipsEnabled:a.tooltipsEnabled,seriesLabelFormattingEnabled:a.seriesLabelFormattingEnabled,chartType:e,lineChartLabelDensityEnabled:a.lineChartLabelDensityEnabled};return i&&(r.chartType=8|r.chartType),new t.LineChart(r)}function r(e){return e.isScrollable=!1,new t.ScatterChart(e)}function n(e){return new t.WaterfallChart(e)}function o(e){return new t.DataDotChart(e)}function s(e,i){var a={animator:i.animator,interactivityService:i.interactivityService,isScrollable:i.isScrollable,seriesLabelFormattingEnabled:i.seriesLabelFormattingEnabled,tooltipsEnabled:i.tooltipsEnabled,chartType:e};return new t.ColumnChart(a)}function l(e){var i=t.ColumnChartType.clusteredColumn;if(e){var a=e.general;if(a){switch(a.visualType1){case"Column":i=t.ColumnChartType.clusteredColumn;break;case"ColumnStacked":i=t.ColumnChartType.stackedColumn}a.visualType2}}return i}e.createLayers=i}(p||(p={}));var y=function(){function e(e){this.palette=e,this.clearPreferredScale()}return e.prototype.getColorScaleByKey=function(e){return this.setPreferredScale(e),this.preferredScale},e.prototype.getNewColorScale=function(){return this.preferredScale},e.prototype.getColorByIndex=function(e){return this.palette.getColorByIndex(e)},e.prototype.getSentimentColors=function(){return this.palette.getSentimentColors()},e.prototype.getBasePickerColors=function(){return this.palette.getBasePickerColors()},e.prototype.clearPreferredScale=function(){this.preferredScale=this.palette.getNewColorScale(),this.rotated=!1},e.prototype.rotateScale=function(){this.preferredScale=this.preferredScale.clone(),this.preferredScale.clearAndRotateScale(),this.rotated=!0},e.prototype.setPreferredScale=function(e){this.rotated||(this.preferredScale=this.palette.getColorScaleByKey(e))},e}();t.SharedColorPalette=y}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.EnumExtensions,a=2,r=4,n=8,o=16,s=32|o;!function(e){e[e.clusteredBar=a|n]="clusteredBar",e[e.clusteredColumn=r|n]="clusteredColumn",e[e.hundredPercentStackedBar=a|s]="hundredPercentStackedBar",e[e.hundredPercentStackedColumn=r|s]="hundredPercentStackedColumn",e[e.stackedBar=a|o]="stackedBar",e[e.stackedColumn=r|o]="stackedColumn"}(t.ColumnChartType||(t.ColumnChartType={}));var l=t.ColumnChartType,u={category:"Category",series:"Series",y:"Y"},c=function(){function n(e){var t=e.chartType;this.chartType=t,this.categoryAxisType=null,this.animator=e.animator,this.isScrollable=e.isScrollable,this.tooltipsEnabled=e.tooltipsEnabled,this.interactivityService=e.interactivityService,this.seriesLabelFormattingEnabled=e.seriesLabelFormattingEnabled}return n.customizeQuery=function(e){var i=e.dataViewMappings[0];if(i&&i.categorical&&i.categorical.categories){i.categorical.dataVolume=4;var a=i.categorical.categories,r=a["for"]["in"].items;if(!_.isEmpty(r)){var n,o=r[0].type;i.metadata&&(n=i.metadata.objects),t.CartesianChart.getIsScalar(n,t.columnChartProps.categoryAxis.axisType,o)&&(a.dataReductionAlgorithm={sample:{}})}}},n.getSortableRoles=function(e){var i=e.dataViewMappings[0];if(!i||!i.categorical||!i.categorical.categories)return null;var a=i.categorical.categories,r=a["for"]["in"].items;if(!_.isEmpty(r)){var n,o=r[0].type;if(i.metadata&&(n=i.metadata.objects),!t.CartesianChart.getIsScalar(n,t.columnChartProps.categoryAxis.axisType,o))return["Category","Y"]}return null},n.prototype.updateVisualMetadata=function(e,t,i){this.xAxisProperties=e,this.yAxisProperties=t,this.margin=i},n.prototype.init=function(e){this.svg=e.svg,this.mainGraphicsContext=this.svg.append("g").classed("columnChartMainGraphicsContext",!0),this.labelGraphicsContext=this.svg.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass["class"],!0),this.style=e.style,this.currentViewport=e.viewport,this.hostService=e.host,this.interactivity=e.interactivity,this.colors=this.style.colorPalette.dataColors,this.cartesianVisualHost=e.cartesianHost,this.options=e;var i=this.element=e.element;i.addClass(n.ColumnChartClassName)},n.prototype.getCategoryLayout=function(e,r){var n;n=i.hasFlag(this.chartType,a)?this.currentViewport.height-(this.margin.top+this.margin.bottom):this.currentViewport.width-(this.margin.left+this.margin.right);var o=this.data?this.data.categoryMetadata:void 0,s=t.AxisHelper.getCategoryValueType(o),l=this.data?this.data.scalarCategoryAxis:!1,u=t.AxisHelper.createDomain(this.data.series,s,l,r.forcedXDomain);return t.CartesianChart.getLayout(this.data,{availableWidth:n,categoryCount:e,domain:u,isScalar:l,isScrollable:this.isScrollable})},n.converter=function(a,s,l,c,p,d,g){void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===p&&(p=null);var m=t.CartesianHelper.getCategoryAxisProperties(p),f=t.CartesianHelper.getValueAxisProperties(p);c=t.CartesianHelper.isScalar(c,m),a=t.ColumnUtil.applyUserMinMax(c,a,m);var y=new h(a),v=t.converterHelper.getPivotedCategories(a,t.columnChartProps.general.formatString),b=v.categories,C=v.categoryFormatter,x=v.categoryIdentities,S=a.categories&&a.categories.length>0?a.categories[0].source:void 0,w=t.dataLabelUtils.getDefaultColumnLabelSettings(l||i.hasFlag(d,o)),D=t.LegendData.DefaultLegendLabelFillColor,P=void 0,L=void 0;if(p&&p.objects){var _=p.objects;P=e.DataViewObjects.getFillColor(_,t.columnChartProps.dataPoint.defaultColor),L=e.DataViewObjects.getValue(_,t.columnChartProps.dataPoint.showAllDataPoints),D=e.DataViewObjects.getFillColor(_,t.columnChartProps.legend.labelColor,t.LegendData.DefaultLegendLabelFillColor);var N=_.labels;t.dataLabelUtils.updateLabelSettingsFromLabelsObject(N,w)}for(var T=y.getLegend(s,D,P),V=T.legend.dataPoints,M=T.seriesSources,A=n.createDataPoints(a,b,x,V,T.seriesObjects,y,w,l,c,t.converterHelper.categoryIsAlsoSeriesRole(a,u.series,u.category),v.categoryObjects,P,d,S),R=A.series,I=[],F=0,E=V.length;E>F;F++)I.push(M[F]);var O=t.converterHelper.createAxesLabels(m,f,S,I);if(!i.hasFlag(d,r)){var G=O.xAxisLabel;O.xAxisLabel=O.yAxisLabel,O.yAxisLabel=G}if(g){for(var H=0;H<R.length;H++){var z=R[H];g.applySelectionStateToData(z.data)}g.applySelectionStateToData(T.legend.dataPoints)}return{categories:b,categoryFormatter:C,series:R,valuesMetadata:I,legendData:T.legend,hasHighlights:A.hasHighlights,categoryMetadata:S,scalarCategoryAxis:c,labelSettings:w,axesLabels:{x:O.xAxisLabel,y:O.yAxisLabel},hasDynamicSeries:A.hasDynamicSeries,isMultiMeasure:A.isMultiMeasure,defaultDataPointColor:P,showAllDataPoints:L}},n.canSupportOverflow=function(e,t){return!i.hasFlag(e,o)||1===t},n.createDataPoints=function(a,r,s,l,u,c,h,p,d,g,m,f,y,v){void 0===p&&(p=!1),void 0===d&&(d=!1);var b=a&&a.values?a.values.grouped():void 0,C=r.length,x=l.length,S=[];if(1>x||1>C)return{series:S,hasHighlights:!1,hasDynamicSeries:!1,isMultiMeasure:!1};var w=a.categories;v=w&&w.length>0?w[0].source:null;for(var D=t.AxisHelper.getCategoryValueType(v),P=t.AxisHelper.isDateTime(D),L=[],_=[],N=[],T=[],V=!(!a.values||!a.values.source),M=!V&&x>1,A=!1,R=c.hasHighlightValues(0),I=0;x>I;I++){for(var F=[],E=[],O=0;C>O;O++){var G=c.getValueBySeriesAndCategory(I,O);if(F[O]=G,R){var H=c.getHighlightBySeriesAndCategory(I,O);E[O]=H,G>=0&&H>=0&&G>=H||0>=G&&0>=H&&H>=G||(A=!0)}}N.push(F),R&&T.push(E)}A&&!n.canSupportOverflow(y,x)&&(A=!1,R=!1,N=T);for(var z=m,k=t.columnChartProps.general.formatString,I=0;x>I;I++){var B=[],W=l[I],U=void 0;if(!V){var j=b&&b.length>0&&b[0].values?b[0].values[I]:null,q=j&&j.source&&j.source.objects?j.source.objects.labels:null;q&&(U=e.Prototype.inherit(h),t.dataLabelUtils.updateLabelSettingsFromLabelsObject(q,U))}S.push({displayName:W.label,key:"series"+I,index:I,data:B,identity:W.identity,color:W.color,labelSettings:U}),x>1&&(z=u[I]);for(var K=a.values[I].source,O=0;C>O;O++){0===I&&(L.push(0),_.push(0));var G=t.AxisHelper.normalizeNonFiniteNumber(N[I][O]);if(!(null==G&&I>0)){var Q=G,Y=r[O];if(P&&Y&&(Y=Y.getTime()),!d||null!=Y&&!isNaN(Y)){var X=void 0;p&&(X=t.StackedUtil.getStackedMultiplier(a,O,x,C,c));var $=G,Z=0>G;X&&(G*=Z?X.neg:X.pos);var J=Math.abs(G),ee=void 0;Z?(ee=_[O],isNaN(J)||(_[O]-=J)):(isNaN(J)||(L[O]+=J),ee=L[O]);var te=b&&b.length>I&&b[I].values?b[I].values[0]:null,ie=a.categories&&a.categories.length>0?a.categories[0]:null,ae=t.SelectionIdBuilder.builder().withCategory(ie,O).withSeries(a.values,te).withMeasure(c.getMeasureNameByIndex(I)).createSelectionId(),re=r[O],ne=n.getDataPointColor(W,O,z),oe=t.TooltipBuilder.createTooltipInfo(k,a,re,Q,null,null,I,O),se=S[I],le=se.labelSettings?se.labelSettings:h,ue=le.labelColor,ce=void 0;i.hasFlag(y,o)&&(ce=this.getStackedLabelColor(Z,I,x,O,N),ue=ce||I===x-1&&!Z?ue:t.dataLabelUtils.defaultInsideLabelColor);var he={categoryValue:Y,value:G,position:ee,valueAbsolute:J,valueOriginal:$,seriesIndex:I,labelSettings:le,categoryIndex:O,color:ne,selected:!1,originalValue:G,originalPosition:ee,originalValueAbsolute:J,identity:ae,key:ae.getKey(),tooltipInfo:oe,labelFill:ue,labelFormatString:K.format,lastSeries:ce,chartType:y};if(B.push(he),R){var pe=T[I][O],de=pe,ge=!0;null===pe&&(pe=0,ge=!1),p&&(pe*=X.pos);var me=Math.abs(pe),fe=ee;pe>0?fe-=J-me:0===pe&&G>0&&(fe-=J);var ye=t.SelectionId.createWithHighlight(ae),ve=r[O],be=ge?pe:void 0,Ce=t.TooltipBuilder.createTooltipInfo(k,a,ve,Q,null,null,I,O,be);ge&&(he.tooltipInfo=Ce);var xe={categoryValue:Y,value:pe,position:fe,valueAbsolute:me,valueOriginal:de,seriesIndex:I,labelSettings:le,categoryIndex:O,color:ne,selected:!1,highlight:!0,originalValue:G,originalPosition:ee,originalValueAbsolute:J,drawThinner:A,identity:ye,key:ye.getKey(),tooltipInfo:Ce,labelFormatString:K.format,labelFill:ue,lastSeries:ce,chartType:y};B.push(xe)}}}}}return{series:S,hasHighlights:R,hasDynamicSeries:V,isMultiMeasure:M}},n.getDataPointColor=function(i,a,r){if(r){var n=e.DataViewObjects.getFillColor(r[a],t.columnChartProps.dataPoint.fill);if(n)return n}return i.color},n.getStackedLabelColor=function(e,i,a,r,n){for(var o=!(e&&i===a-1&&1!==a),s=i+1;a>s;s++){var l=t.AxisHelper.normalizeNonFiniteNumber(n[s][r]);if(null!==l&&((!e||e&&0===i)&&l>0||e&&0!==i)){o=!1;break}}return o},n.sliceSeries=function(t,i,a){void 0===a&&(a=0);var r=[];if(t&&t.length>0)for(var n=0,o=t.length;o>n;n++){var s=r[n]=e.Prototype.inherit(t[n]);s.data=t[n].data.filter(function(e){return e.categoryIndex>=a&&e.categoryIndex<i})}return r},n.getInteractiveColumnChartDomElement=function(e){return e.children("svg").get(0)},n.prototype.setData=function(e){var a=i.hasFlag(this.chartType,s);if(this.data={categories:[],categoryFormatter:null,series:[],valuesMetadata:[],legendData:null,hasHighlights:!1,categoryMetadata:null,scalarCategoryAxis:!1,labelSettings:t.dataLabelUtils.getDefaultColumnLabelSettings(a||i.hasFlag(this.chartType,o)),axesLabels:{x:null,y:null},hasDynamicSeries:!1,defaultDataPointColor:null,isMultiMeasure:!1},e.length>0){var r=e[0];if(r&&r.categorical){var l=this.dataViewCat=r.categorical,u=l.categories,c=u&&u.length>0?u[0].source:null,h=t.AxisHelper.getCategoryValueType(c);this.data=n.converter(l,this.cartesianVisualHost.getSharedColors(),a,t.CartesianChart.getIsScalar(r.metadata?r.metadata.objects:null,t.columnChartProps.categoryAxis.axisType,h),r.metadata,this.chartType,this.interactivityService)}}this.setChartStrategy()},n.prototype.setChartStrategy=function(){switch(this.chartType){case l.clusteredBar:this.columnChart=new t.ClusteredBarChartStrategy;break;case l.clusteredColumn:this.columnChart=new t.ClusteredColumnChartStrategy;break;case l.stackedBar:case l.hundredPercentStackedBar:this.columnChart=new t.StackedBarChartStrategy;
break;case l.stackedColumn:case l.hundredPercentStackedColumn:default:this.columnChart=new t.StackedColumnChartStrategy}if(i.hasFlag(this.chartType,o)&&1===this.data.series.length)switch(this.chartType){case l.stackedBar:this.columnChart=new t.ClusteredBarChartStrategy;break;case l.stackedColumn:this.columnChart=new t.ClusteredColumnChartStrategy}},n.prototype.calculateLegend=function(){if(this.interactivity&&this.interactivity.isInteractiveLegend)return this.createInteractiveLegendDataPoints(0);var e=this.data?this.data.legendData:null,t=e?e.dataPoints:[];return _.isEmpty(t)?null:e},n.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||this.data.series&&this.data.series.length>1)},n.prototype.enumerateObjectInstances=function(e,i){switch(i.objectName){case"dataPoint":t.GradientUtils.hasGradientRole(this.dataViewCat)||this.enumerateDataPoints(e);break;case"labels":this.enumerateDataLabels(e)}},n.prototype.enumerateDataLabels=function(e){var i=this.data,a=this.data.labelSettings,r=i.series.length,n=!i.hasDynamicSeries&&(r>1||!i.categoryMetadata)&&this.seriesLabelFormattingEnabled;if(t.dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(e,a,null,n)),0!==r&&n&&a.showLabelPerSeries)for(var o=0;r>o;o++){var s=i.series[o],l=s.labelSettings?s.labelSettings:this.data.labelSettings;e.pushContainer({displayName:s.displayName}),t.dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(e,l,s)),e.popContainer()}},n.prototype.getLabelSettingsOptions=function(e,t,a,r){return{enumeration:e,dataLabelsSettings:t,show:!0,displayUnits:!i.hasFlag(this.chartType,s),precision:!0,selector:a&&a.identity?a.identity.getSelector():null,showAll:r,fontSize:!0}},n.prototype.enumerateDataPoints=function(e){var i=this.data;if(i){var a=i.series.length;if(0!==a)if(i.hasDynamicSeries||a>1||!i.categoryMetadata)for(var r=0;a>r;r++){var n=i.series[r];e.pushInstance({objectName:"dataPoint",displayName:n.displayName,selector:t.ColorHelper.normalizeSelector(n.identity.getSelector()),properties:{fill:{solid:{color:n.color}}}})}else{var o=i.series[0].data,s=i.categoryFormatter;e.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:i.defaultDataPointColor||this.colors.getColorByIndex(0).value}}}}).pushInstance({objectName:"dataPoint",selector:null,properties:{showAllDataPoints:!!i.showAllDataPoints}});for(var r=0;r<o.length;r++){var l=o[r],u=i.categories[r];e.pushInstance({objectName:"dataPoint",displayName:s?s.format(u):u,selector:t.ColorHelper.normalizeSelector(l.identity.getSelector(),!0),properties:{fill:{solid:{color:l.color}}}})}}}},n.prototype.calculateAxesProperties=function(r){var o=this.data;this.currentViewport=r.viewport;var l=this.margin=r.margin,u=o&&o.categories?o.categories.length:0,c=o?this.getCategoryLayout(u,r):{categoryCount:0,categoryThickness:t.CartesianChart.MinOrdinalRectThickness,outerPaddingRatio:t.CartesianChart.OuterPaddingRatio,isScalar:!1};if(this.categoryAxisType=c.isScalar?t.axisType.scalar:null,o&&!c.isScalar&&!this.isScrollable){var h=Math.min(u,c.categoryCount);h!==u&&(o=e.Prototype.inherit(o),o.series=n.sliceSeries(o.series,h),o.categories=o.categories.slice(0,h))}this.columnChart.setData(o);var p=this.getPreferredPlotArea(c.isScalar,c.categoryCount,c.categoryThickness);p.width===this.currentViewport.width&&(p.width-=l.left+l.right),p.height-=l.top+l.bottom;var d=i.hasFlag(this.chartType,s),g={height:p.height,width:p.width,duration:0,hostService:this.hostService,mainGraphicsContext:this.mainGraphicsContext,labelGraphicsContext:this.labelGraphicsContext,margin:this.margin,layout:c,animator:this.animator,interactivityService:this.interactivityService,viewportHeight:this.currentViewport.height-(l.top+l.bottom),viewportWidth:this.currentViewport.width-(l.left+l.right),is100Pct:d};this.ApplyInteractivity(g),this.columnChart.setupVisualProps(g);var m=i.hasFlag(this.chartType,a);if(m){var f=r.forcedXDomain;r.forcedXDomain=r.forcedYDomain,r.forcedYDomain=f}return this.xAxisProperties=this.columnChart.setXScale(d,r.forcedTickCount,r.forcedXDomain,m?r.valueAxisScaleType:r.categoryAxisScaleType,m?r.valueAxisDisplayUnits:r.categoryAxisDisplayUnits,m?r.valueAxisPrecision:r.categoryAxisPrecision),this.yAxisProperties=this.columnChart.setYScale(d,r.forcedTickCount,r.forcedYDomain,m?r.categoryAxisScaleType:r.valueAxisScaleType,m?r.categoryAxisDisplayUnits:r.valueAxisDisplayUnits,m?r.categoryAxisPrecision:r.valueAxisPrecision),r.showCategoryAxisLabel&&this.xAxisProperties.isCategoryAxis||r.showValueAxisLabel&&!this.xAxisProperties.isCategoryAxis?this.xAxisProperties.axisLabel=o.axesLabels.x:this.xAxisProperties.axisLabel=null,r.showValueAxisLabel&&!this.yAxisProperties.isCategoryAxis||r.showCategoryAxisLabel&&this.yAxisProperties.isCategoryAxis?this.yAxisProperties.axisLabel=o.axesLabels.y:this.yAxisProperties.axisLabel=null,[this.xAxisProperties,this.yAxisProperties]},n.prototype.getPreferredPlotArea=function(e,r,n){var o={height:this.currentViewport.height,width:this.currentViewport.width};if(this.isScrollable&&!e){var s=t.CartesianChart.getPreferredCategorySpan(r,n);i.hasFlag(this.chartType,a)?o.height=Math.max(s,o.height):o.width=Math.max(s,o.width)}return o},n.prototype.ApplyInteractivity=function(e){var t=this,i=this.interactivity;if(i&&(i.dragDataPoint&&(e.onDragStart=function(e){e.identity&&t.hostService.onDragStart({event:d3.event,data:{data:e.identity.getSelector()}})}),i.isInteractiveLegend)){var a=function(){var e=d3.mouse(t.mainGraphicsContext[0][0]),i=e[0],a=e[1],r=t.columnChart.getClosestColumnIndex(i,a);t.selectColumn(r)},r=n.getInteractiveColumnChartDomElement(this.element);this.svg.on("click",a),d3.select(r).on("click",a);var o=d3.behavior.drag().origin(Object).on("drag",a);this.svg.call(o),d3.select(r).call(o)}},n.prototype.selectColumn=function(e,t){if(void 0===t&&(t=!1),t||this.lastInteractiveSelectedColumnIndex!==e){var i=this.createInteractiveLegendDataPoints(e),a=i.dataPoints;this.cartesianVisualHost.updateLegend(i),a.length>0&&this.columnChart.selectColumn(e,this.lastInteractiveSelectedColumnIndex),this.lastInteractiveSelectedColumnIndex=e}},n.prototype.createInteractiveLegendDataPoints=function(e){var i=this.data;if(!i||_.isEmpty(i.series))return{dataPoints:[]};for(var a=t.columnChartProps.general.formatString,r=[],n=i.categories&&i.categories[e],o=i.series,s=i.legendData&&i.legendData.dataPoints,l=new h(this.dataViewCat),u=0,c=o.length;c>u;u++){var p=l.getValueBySeriesAndCategory(u,e),d=i.valuesMetadata[u],g=t.converterHelper.getFormattedLegendLabel(d,this.dataViewCat.values,a),m=void 0;if(1===o.length){var f=o[0];m=f.data.length>e&&f.data[e].color}else m=s.length>u&&s[u].color;r.push({color:m,icon:t.LegendIcon.Box,label:g,category:i.categoryFormatter?i.categoryFormatter.format(n):n,measure:t.valueFormatter.format(p,t.valueFormatter.getFormatString(d,a)),identity:t.SelectionId.createNull(),selected:!1})}return{dataPoints:r}},n.prototype.overrideXScale=function(e){this.xAxisProperties=e},n.prototype.render=function(e){var i=this.columnChart.drawColumns(!e),a=this.data;this.tooltipsEnabled&&t.TooltipManager.addTooltip(i.shapesSelection,function(e){return e.data.tooltipInfo});var r=[],n=void 0;if(this.interactivityService){for(var o=0,s=a.series.length;s>o;o++)r=r.concat(a.series[o].data);n={datapoints:r,bars:i.shapesSelection,hasHighlights:a.hasHighlights,mainGraphicsContext:this.mainGraphicsContext,viewport:i.viewport,axisOptions:i.axisOptions,showLabel:a.labelSettings.show}}return this.interactivity&&this.interactivity.isInteractiveLegend&&this.data.series.length>0&&this.selectColumn(0,!0),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),{dataPoints:r,behaviorOptions:n,labelDataPoints:i.labelDataPoints,labelsAreNumeric:!0}},n.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},n.prototype.getVisualCategoryAxisIsScalar=function(){return this.data?this.data.scalarCategoryAxis:!1},n.prototype.getSupportedCategoryAxisType=function(){var e=this.data?this.data.categoryMetadata:void 0,i=t.AxisHelper.getCategoryValueType(e),a=t.AxisHelper.isOrdinal(i);return a?t.axisType.categorical:t.axisType.both},n.prototype.setFilteredData=function(t,i){var a=e.Prototype.inherit(this.data);return a.series=n.sliceSeries(a.series,i,t),a.categories=a.categories.slice(t,i),this.columnChart.setData(a),a},n.ColumnChartClassName="columnChart",n.clusteredValidLabelPositions=[e.RectLabelPosition.OutsideEnd,e.RectLabelPosition.InsideEnd,e.RectLabelPosition.InsideCenter,e.RectLabelPosition.InsideBase],n.stackedValidLabelPositions=[e.RectLabelPosition.InsideCenter,e.RectLabelPosition.InsideEnd,e.RectLabelPosition.InsideBase],n.SeriesClasses=jsCommon.CssConstants.createClassAndSelector("series"),n}();t.ColumnChart=c;var h=function(){function e(e){this.dataView=e}return e.prototype.getLegend=function(e,i,a){var r=[],n=[],o=[],s=!1,l=new t.ColorHelper(e,t.columnChartProps.dataPoint.fill,a),u=void 0;if(this.dataView&&this.dataView.values){for(var c=this.dataView.values,h=c.grouped(),p=!(!c||!c.source),d=t.columnChartProps.general.formatString,g=0,m=h.length;m>g;g++)for(var f=h[g],y=f.objects,v=f.values,b=0,C=v.length;C>b;b++){var x=v[b],S=x.source;if(!t.DataRoleHelper.hasRole(S,"Gradient")||t.DataRoleHelper.hasRole(S,"Y")){n.push(S),o.push(x.objects);var w=x.identity?t.SelectionId.createWithIdAndMeasure(x.identity,S.queryName):t.SelectionId.createWithMeasure(this.getMeasureNameByIndex(b)),D=t.converterHelper.getFormattedLegendLabel(S,c,d),P=p?l.getColorForSeriesValue(y||S.objects,c.identityFields,S.groupName):l.getColorForMeasure(y||S.objects,S.queryName);r.push({icon:t.LegendIcon.Box,color:P,label:D,identity:w,selected:!1}),x.identity&&void 0!==S.groupName&&(s=!0)}}var L=this.dataView.values;u=L&&L.source?L.source.displayName:""}var _={title:u,dataPoints:r,grouped:s,labelColor:i};return{legend:_,seriesSources:n,seriesObjects:o}},e.prototype.getValueBySeriesAndCategory=function(e,t){return this.dataView.values[e].values[t]},e.prototype.getMeasureNameByIndex=function(e){return this.dataView.values[e].source.queryName},e.prototype.hasHighlightValues=function(e){var t=this.dataView&&this.dataView.values?this.dataView.values[e]:void 0;return t&&!!t.highlights},e.prototype.getHighlightBySeriesAndCategory=function(e,t){return this.dataView.values[e].highlights[t]},e}()}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.PixelConverter,a=function(){function a(){}return a.prototype.setupVisualProps=function(e){this.graphicsContext=e,this.margin=e.margin,this.width=this.graphicsContext.width,this.height=this.graphicsContext.height,this.categoryLayout=e.layout,this.animator=e.animator,this.interactivityService=e.interactivityService,this.viewportHeight=e.viewportHeight,this.viewportWidth=e.viewportWidth},a.prototype.setData=function(e){this.data=e},a.prototype.setXScale=function(e,i,a,r,n,o){var s,l,u=this.width;a&&2===a.length&&(s=a[0],l=a[1]);var c=this.xProps=t.ColumnUtil.getCategoryAxis(this.data,u,this.categoryLayout,!1,s,l,r,n,o),h=this.data.series.length,p=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio)/h;return this.seriesOffsetScale=d3.scale.ordinal().domain(this.data.series.map(function(e){return e.index})).rangeBands([0,h*p]),c},a.prototype.setYScale=function(e,i,a,r,n,o){var s=this.viewportHeight,l=t.AxisHelper.createValueDomain(this.data.series,!0)||t.fallBackDomain,u=t.AxisHelper.combineDomain(a,l),c=t.AxisHelper.scaleShouldClamp(u,l);return this.yProps=t.AxisHelper.createAxis({pixelSpan:s,dataDomain:u,metaDataColumn:this.data.valuesMetadata[0],formatString:t.valueFormatter.getFormatString(this.data.valuesMetadata[0],t.columnChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!0,forcedTickCount:i,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:r,axisDisplayUnits:n,axisPrecision:o,shouldClamp:c}),this.yProps},a.prototype.drawColumns=function(e){var i=this.data;this.columnsCenters=null;var r=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio),n=r/i.series.length,o={columnWidth:n,categoryWidth:r,xScale:this.xProps.scale,yScale:this.yProps.scale,seriesOffsetScale:this.seriesOffsetScale,isScalar:this.categoryLayout.isScalar,margin:this.margin},s=this.layout=a.getLayout(i,o),l=i.labelSettings,u=[];l&&l.show&&(u=this.createLabelDataPoints());var c,h,p=t.ColumnUtil.drawSeries(i,this.graphicsContext.mainGraphicsContext,o);return this.animator&&e&&(c=this.animator.animate({viewModel:i,series:p,layout:s,itemCS:a.classes.item,interactivityService:this.interactivityService,mainGraphicsContext:this.graphicsContext.mainGraphicsContext,viewPort:{height:this.height,width:this.width}}),h=c.shapes),this.animator&&e&&!c.failed||(h=t.ColumnUtil.drawDefaultShapes(i,p,s,a.classes.item,!this.animator,this.interactivityService&&this.interactivityService.hasSelection())),t.ColumnUtil.applyInteractivity(h,this.graphicsContext.onDragStart),{shapesSelection:h,viewport:{height:this.height,width:this.width},axisOptions:o,labelDataPoints:u}},a.prototype.selectColumn=function(e,i){t.ColumnUtil.setChosenColumnOpacity(this.graphicsContext.mainGraphicsContext,a.classes.item.selector,e,i),this.moveHandle(e)},a.prototype.getClosestColumnIndex=function(e,i){return t.ColumnUtil.getClosestColumnIndex(e,this.getColumnsCenters())},a.prototype.getColumnsCenters=function(){var e=this;if(!this.columnsCenters){var i=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio);if(this.data.series.length>0){var a=0;this.categoryLayout.isScalar||(a=i/2);var r=this.data.series[0];this.columnsCenters=r.data.map(function(t){return e.xProps.scale(e.categoryLayout.isScalar?t.categoryValue:t.categoryIndex)+a})}}return this.columnsCenters},a.prototype.moveHandle=function(e){var t=this.getColumnsCenters(),i=t[e];if(this.columnSelectionLineHandle){var a=this.columnSelectionLineHandle;a.select("line").attr({x1:i,x2:i}),a.select("circle").attr({cx:i})}else{var a=this.columnSelectionLineHandle=this.graphicsContext.mainGraphicsContext.append("g");a.append("line").classed("interactive-hover-line",!0).attr({x1:i,x2:i,y1:0,y2:this.height}),a.append("circle").attr({cx:i,cy:this.height,r:"6px"}).classed("drag-handle",!0)}},a.getLayout=function(e,i){var a=i.columnWidth,r=.5*a,n=r/2,o=i.isScalar,s=i.xScale,l=i.yScale,u=i.seriesOffsetScale,c=l(0),h=0;return o&&(h=i.categoryWidth/2),{shapeLayout:{width:function(e){return e.drawThinner?r:a},x:function(e){return s(o?e.categoryValue:e.categoryIndex)+u(e.seriesIndex)-h+(e.drawThinner?n:0)},y:function(e){return c+t.AxisHelper.diffScaled(l,Math.max(0,e.value),0)},height:function(e){return Math.abs(t.AxisHelper.diffScaled(l,0,e.value))}},shapeLayoutWithoutHighlights:{width:function(e){return a},x:function(e){return s(o?e.categoryValue:e.categoryIndex)+u(e.seriesIndex)-h},y:function(e){return c+t.AxisHelper.diffScaled(l,Math.max(0,e.originalValue),0)},height:function(e){return Math.abs(t.AxisHelper.diffScaled(l,0,e.originalValue))}},zeroShapeLayout:{width:function(e){return e.drawThinner?r:a},x:function(e){return s(o?e.categoryValue:e.categoryIndex)+u(e.seriesIndex)-h+(e.drawThinner?n:0)},y:function(e){return c},height:function(e){return 0}}}},a.prototype.createLabelDataPoints=function(){for(var a=[],r=this.data,n=r.series,o=t.NewDataLabelUtils.createColumnFormatterCacheManager(),s=this.layout.shapeLayout,l=0;l<n.length;l++){var u=n[l],c=u.labelSettings?u.labelSettings:r.labelSettings;if(c.show)for(var h=t.NewDataLabelUtils.getDisplayUnitValueFromAxisFormatter(this.yProps.formatter,c),p=0,d=u.data;p<d.length;p++){var g=d[p];if((!r.hasHighlights||g.highlight)&&null!=g.value){var m={left:s.x(g),top:s.y(g),width:s.width(g),height:s.height(g)},f=g.labelFormatString,y=o.getOrCreate(f,c,h),v=t.NewDataLabelUtils.getLabelFormattedText(y.format(g.value)),b={text:v,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:i.fromPoint(c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},C=e.TextMeasurementService.measureSvgTextWidth(b),x=e.TextMeasurementService.estimateSvgTextHeight(b,!0);a.push({isPreferred:!0,text:v,textSize:{width:C,height:x},outsideFill:c.labelColor?c.labelColor:t.NewDataLabelUtils.defaultLabelColor,insideFill:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:1,parentShape:{rect:m,orientation:g.value>=0?e.NewRectOrientation.VerticalBottomBased:e.NewRectOrientation.VerticalTopBased,validPositions:t.ColumnChart.clusteredValidLabelPositions},identity:g.identity,fontSize:c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt})}}}return a},a.classes={item:{"class":"column",selector:".column"}},a}();t.ClusteredColumnChartStrategy=a;var r=function(){function a(){}return a.prototype.setupVisualProps=function(e){this.graphicsContext=e,this.margin=e.margin,this.width=this.graphicsContext.width,this.height=this.graphicsContext.height,this.categoryLayout=e.layout,this.animator=e.animator,this.interactivityService=e.interactivityService,this.viewportHeight=e.viewportHeight,this.viewportWidth=e.viewportWidth},a.prototype.setData=function(e){this.data=e},a.prototype.setYScale=function(e,i,a,r,n,o){var s,l,u=this.height;a&&2===a.length&&(s=a[0],l=a[1]);var c=this.yProps=t.ColumnUtil.getCategoryAxis(this.data,u,this.categoryLayout,!0,s,l,r,n,o),h=this.data.series.length,p=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio)/h;return this.seriesOffsetScale=d3.scale.ordinal().domain(this.data.series.map(function(e){return e.index})).rangeBands([0,h*p]),c},a.prototype.setXScale=function(e,i,a,r,n,o){var s=this.width,l=t.AxisHelper.createValueDomain(this.data.series,!0)||t.fallBackDomain,u=t.AxisHelper.combineDomain(a,l),c=t.AxisHelper.scaleShouldClamp(u,l);return this.xProps=t.AxisHelper.createAxis({pixelSpan:s,dataDomain:u,metaDataColumn:this.data.valuesMetadata[0],formatString:t.valueFormatter.getFormatString(this.data.valuesMetadata[0],t.columnChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!1,forcedTickCount:i,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:r,axisDisplayUnits:n,axisPrecision:o,shouldClamp:c}),this.xProps.axis.tickSize(-this.viewportHeight,0),this.xProps},a.prototype.drawColumns=function(e){var i=this.data;this.barsCenters=null;var r=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio),n=r/i.series.length,o={columnWidth:n,categoryWidth:r,xScale:this.xProps.scale,yScale:this.yProps.scale,seriesOffsetScale:this.seriesOffsetScale,isScalar:this.categoryLayout.isScalar,margin:this.margin},s=this.layout=a.getLayout(i,o),l=i.labelSettings,u=[];l&&l.show&&(u=this.createLabelDataPoints());var c,h,p=t.ColumnUtil.drawSeries(i,this.graphicsContext.mainGraphicsContext,o);return this.animator&&e&&(c=this.animator.animate({viewModel:i,series:p,layout:s,itemCS:a.classes.item,interactivityService:this.interactivityService,mainGraphicsContext:this.graphicsContext.mainGraphicsContext,viewPort:{height:this.height,width:this.width}}),h=c.shapes),this.animator&&e&&!c.failed||(h=t.ColumnUtil.drawDefaultShapes(i,p,s,a.classes.item,!this.animator,this.interactivityService&&this.interactivityService.hasSelection())),t.ColumnUtil.applyInteractivity(h,this.graphicsContext.onDragStart),{shapesSelection:h,viewport:{height:this.height,width:this.width},axisOptions:o,labelDataPoints:u}},a.prototype.selectColumn=function(e,i){t.ColumnUtil.setChosenColumnOpacity(this.graphicsContext.mainGraphicsContext,a.classes.item.selector,e,i),this.moveHandle(e)},a.prototype.getClosestColumnIndex=function(e,i){return t.ColumnUtil.getClosestColumnIndex(i,this.getBarsCenters())},a.prototype.getBarsCenters=function(){var e=this;if(!this.barsCenters){var i=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio);if(this.data.series.length>0){var a=0;this.categoryLayout.isScalar||(a=i/2);var r=this.data.series[0];this.barsCenters=r.data.map(function(t){return e.yProps.scale(e.categoryLayout.isScalar?t.categoryValue:t.categoryIndex)+a})}}return this.barsCenters},a.prototype.moveHandle=function(e){var t=this.getBarsCenters(),i=t[e];if(this.columnSelectionLineHandle){var a=this.columnSelectionLineHandle;a.select("line").attr({y1:i,y2:i}),a.select("circle").attr({cy:i})}else{var a=this.columnSelectionLineHandle=this.graphicsContext.mainGraphicsContext.append("g");a.append("line").classed("interactive-hover-line",!0).attr({x1:0,x2:this.width,y1:i,y2:i}),a.append("circle").attr({cx:0,cy:i,r:"6px"}).classed("drag-handle",!0)}},a.getLayout=function(e,i){var a=i.columnWidth,r=.5*a,n=r/2,o=i.isScalar,s=i.xScale,l=i.yScale,u=i.seriesOffsetScale,c=s(0),h=0;return o&&(h=i.categoryWidth/2),{shapeLayout:{width:function(e){return Math.abs(t.AxisHelper.diffScaled(s,0,e.value))},x:function(e){return c+t.AxisHelper.diffScaled(s,Math.min(0,e.value),0)},y:function(e){return l(o?e.categoryValue:e.categoryIndex)+u(e.seriesIndex)-h+(e.drawThinner?n:0)},height:function(e){return e.drawThinner?r:a}},shapeLayoutWithoutHighlights:{width:function(e){return Math.abs(t.AxisHelper.diffScaled(s,0,e.originalValue))},x:function(e){return c+t.AxisHelper.diffScaled(s,Math.min(0,e.originalValue),0)},y:function(e){return l(o?e.categoryValue:e.categoryIndex)+u(e.seriesIndex)-h},height:function(e){return a}},zeroShapeLayout:{width:function(e){return 0},x:function(e){return c+t.AxisHelper.diffScaled(s,Math.min(0,e.value),0)},y:function(e){return l(o?e.categoryValue:e.categoryIndex)+u(e.seriesIndex)-h+(e.drawThinner?n:0)},height:function(e){return e.drawThinner?r:a}}}},a.prototype.createLabelDataPoints=function(){for(var a=[],r=this.data,n=r.series,o=t.NewDataLabelUtils.createColumnFormatterCacheManager(),s=this.layout.shapeLayout,l=0;l<n.length;l++){var u=n[l],c=u.labelSettings?u.labelSettings:r.labelSettings;if(c.show)for(var h=t.NewDataLabelUtils.getDisplayUnitValueFromAxisFormatter(this.yProps.formatter,c),p=0,d=u.data;p<d.length;p++){var g=d[p];if(!(this.interactivityService&&this.interactivityService.hasSelection()&&!g.selected||r.hasHighlights&&!g.highlight||null==g.value)){var m=g.labelFormatString,f=o.getOrCreate(m,c,h),y=t.NewDataLabelUtils.getLabelFormattedText(f.format(g.value)),v={text:y,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:i.fromPoint(c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},b=e.TextMeasurementService.measureSvgTextWidth(v),C=e.TextMeasurementService.estimateSvgTextHeight(v,!0),x={left:s.x(g),top:s.y(g),width:s.width(g),height:s.height(g)};a.push({isPreferred:!0,text:y,textSize:{width:b,height:C},outsideFill:c.labelColor?c.labelColor:t.NewDataLabelUtils.defaultLabelColor,insideFill:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:1,parentShape:{rect:x,orientation:g.value>=0?e.NewRectOrientation.HorizontalLeftBased:e.NewRectOrientation.HorizontalRightBased,validPositions:t.ColumnChart.clusteredValidLabelPositions},identity:g.identity,fontSize:c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt})}}}return a},a.classes={item:{"class":"bar",selector:".bar"}},a}();t.ClusteredBarChartStrategy=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.PixelConverter,a=function(){function a(){}return a.prototype.setupVisualProps=function(e){this.graphicsContext=e,this.margin=e.margin,this.width=this.graphicsContext.width,this.height=this.graphicsContext.height,this.categoryLayout=e.layout,this.animator=e.animator,this.interactivityService=e.interactivityService,this.viewportHeight=e.viewportHeight,this.viewportWidth=e.viewportWidth},a.prototype.setData=function(e){this.data=e},a.prototype.setXScale=function(e,i,a,r,n,o){var s,l,u=this.width;a&&2===a.length&&(s=a[0],l=a[1]);var c=this.xProps=t.ColumnUtil.getCategoryAxis(this.data,u,this.categoryLayout,!1,s,l,r,n,o);return c},a.prototype.setYScale=function(e,i,a,r,n,o){var s=this.viewportHeight,l=t.StackedUtil.calcValueDomain(this.data.series,e),u=[l.min,l.max],c=t.AxisHelper.combineDomain(a,u),h=t.AxisHelper.scaleShouldClamp(c,u),p=this.data.valuesMetadata[0],d=e?this.graphicsContext.hostService.getLocalizedString("Percentage"):t.valueFormatter.getFormatString(p,t.columnChartProps.general.formatString);return this.yProps=t.AxisHelper.createAxis({pixelSpan:s,dataDomain:c,metaDataColumn:p,formatString:d,outerPadding:0,isScalar:!0,isVertical:!0,forcedTickCount:i,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:r,axisDisplayUnits:n,axisPrecision:o,is100Pct:e,shouldClamp:h}),this.yProps},a.prototype.drawColumns=function(e){var i=this.data;this.columnsCenters=null;var r={columnWidth:this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio),xScale:this.xProps.scale,yScale:this.yProps.scale,isScalar:this.categoryLayout.isScalar,margin:this.margin},n=this.layout=a.getLayout(i,r),o=i.labelSettings,s=[];o&&o.show&&(s=this.createLabelDataPoints());var l,u,c=t.ColumnUtil.drawSeries(i,this.graphicsContext.mainGraphicsContext,r);return this.animator&&e&&(l=this.animator.animate({viewModel:i,series:c,layout:n,itemCS:a.classes.item,interactivityService:this.interactivityService,mainGraphicsContext:this.graphicsContext.mainGraphicsContext,viewPort:{height:this.height,width:this.width}}),u=l.shapes),this.animator&&e&&!l.failed||(u=t.ColumnUtil.drawDefaultShapes(i,c,n,a.classes.item,!this.animator,this.interactivityService&&this.interactivityService.hasSelection())),t.ColumnUtil.applyInteractivity(u,this.graphicsContext.onDragStart),{shapesSelection:u,viewport:{height:this.height,width:this.width},axisOptions:r,labelDataPoints:s}},a.prototype.selectColumn=function(e,i){t.ColumnUtil.setChosenColumnOpacity(this.graphicsContext.mainGraphicsContext,a.classes.item.selector,e,i),this.moveHandle(e)},a.prototype.getClosestColumnIndex=function(e,i){return t.ColumnUtil.getClosestColumnIndex(e,this.getColumnsCenters())},a.prototype.getColumnsCenters=function(){var e=this;if(!this.columnsCenters){var i=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio);if(this.data.series.length>0){var a=0;this.categoryLayout.isScalar||(a=i/2);var r=this.data.series[0];this.columnsCenters=r.data.map(function(t){return e.xProps.scale(e.categoryLayout.isScalar?t.categoryValue:t.categoryIndex)+a})}}return this.columnsCenters},a.prototype.moveHandle=function(e){var t=this.getColumnsCenters(),i=t[e];if(this.columnSelectionLineHandle){var a=this.columnSelectionLineHandle;a.select("line").attr({x1:i,x2:i}),a.select("circle").attr({cx:i})}else{var a=this.columnSelectionLineHandle=this.graphicsContext.mainGraphicsContext.append("g");a.append("line").classed("interactive-hover-line",!0).attr({x1:i,x2:i,y1:0,y2:this.height}),a.append("circle").attr({cx:i,cy:this.height,r:"6px"}).classed("drag-handle",!0)}},a.getLayout=function(e,i){var a=i.columnWidth,r=i.isScalar,n=i.xScale,o=i.yScale,s=o(0),l=0;return r&&(l=a/2),{shapeLayout:{width:function(e){return a},x:function(e){return n(r?e.categoryValue:e.categoryIndex)-l},y:function(e){return s+t.AxisHelper.diffScaled(o,e.position,0)},height:function(e){return t.StackedUtil.getSize(o,e.valueAbsolute)}},shapeLayoutWithoutHighlights:{width:function(e){return a},x:function(e){return n(r?e.categoryValue:e.categoryIndex)-l},y:function(e){return s+t.AxisHelper.diffScaled(o,e.originalPosition,0)},height:function(e){return t.StackedUtil.getSize(o,e.originalValueAbsolute)}},zeroShapeLayout:{width:function(e){return a},x:function(e){return n(r?e.categoryValue:e.categoryIndex)-l},y:function(e){return s+t.AxisHelper.diffScaled(o,e.position,0)+t.StackedUtil.getSize(o,e.valueAbsolute)},height:function(e){return 0}}}},a.prototype.createLabelDataPoints=function(){for(var a=[],r=this.data,n=r.series,o=t.NewDataLabelUtils.createColumnFormatterCacheManager(),s=this.layout.shapeLayout,l=0;l<n.length;l++){var u=n[l],c=u.labelSettings?u.labelSettings:r.labelSettings;if(c.show)for(var h=t.NewDataLabelUtils.getDisplayUnitValueFromAxisFormatter(this.yProps.formatter,c),p=0,d=u.data;p<d.length;p++){var g=d[p];if((!r.hasHighlights||g.highlight)&&null!=g.value){var m={left:s.x(g),top:s.y(g),width:s.width(g),height:s.height(g)},f="";f=this.graphicsContext.is100Pct?t.NewDataLabelUtils.hundredPercentFormat:g.labelFormatString;var y=o.getOrCreate(f,c,h),v=t.NewDataLabelUtils.getLabelFormattedText(y.format(g.value)),b={text:v,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:i.fromPoint(c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},C=e.TextMeasurementService.measureSvgTextWidth(b),x=e.TextMeasurementService.estimateSvgTextHeight(b,!0);a.push({isPreferred:!0,text:v,textSize:{width:C,height:x},outsideFill:c.labelColor?c.labelColor:t.NewDataLabelUtils.defaultLabelColor,insideFill:c.labelColor?c.labelColor:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:1,parentShape:{rect:m,orientation:g.value>=0?e.NewRectOrientation.VerticalBottomBased:e.NewRectOrientation.VerticalTopBased,validPositions:t.ColumnChart.stackedValidLabelPositions},identity:g.identity,fontSize:c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt})}}}return a},a.classes={item:{"class":"column",selector:".column"},highlightItem:{"class":"highlightColumn",selector:".highlightColumn"}},a}();t.StackedColumnChartStrategy=a;var r=function(){function a(){}return a.prototype.setupVisualProps=function(e){this.graphicsContext=e,this.margin=e.margin,this.width=this.graphicsContext.width,this.height=this.graphicsContext.height,this.categoryLayout=e.layout,this.animator=e.animator,this.interactivityService=e.interactivityService,this.viewportHeight=e.viewportHeight,this.viewportWidth=e.viewportWidth},a.prototype.setData=function(e){this.data=e},a.prototype.setYScale=function(e,i,a,r,n,o){var s,l,u=this.height;a&&2===a.length&&(s=a[0],l=a[1]);var c=this.yProps=t.ColumnUtil.getCategoryAxis(this.data,u,this.categoryLayout,!0,s,l,r,n,o);return c},a.prototype.setXScale=function(e,i,a,r,n,o){var s=this.width,l=t.StackedUtil.calcValueDomain(this.data.series,e),u=[l.min,l.max],c=t.AxisHelper.combineDomain(a,u),h=t.AxisHelper.scaleShouldClamp(c,u),p=this.data.valuesMetadata[0],d=e?this.graphicsContext.hostService.getLocalizedString("Percentage"):t.valueFormatter.getFormatString(p,t.columnChartProps.general.formatString);return this.xProps=t.AxisHelper.createAxis({pixelSpan:s,dataDomain:c,metaDataColumn:p,formatString:d,outerPadding:0,isScalar:!0,isVertical:!1,forcedTickCount:i,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:r,axisDisplayUnits:n,axisPrecision:o,is100Pct:e,shouldClamp:h}),this.xProps.axis.tickSize(-this.viewportHeight,0),this.xProps},a.prototype.drawColumns=function(e){var i=this.data;this.barsCenters=null;var r={columnWidth:this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio),xScale:this.xProps.scale,yScale:this.yProps.scale,isScalar:this.categoryLayout.isScalar,margin:this.margin},n=this.layout=a.getLayout(i,r),o=i.labelSettings,s=[];o&&o.show&&(s=this.createLabelDataPoints());var l,u,c=t.ColumnUtil.drawSeries(i,this.graphicsContext.mainGraphicsContext,r);return this.animator&&e&&(l=this.animator.animate({viewModel:i,series:c,layout:n,itemCS:a.classes.item,interactivityService:this.interactivityService,mainGraphicsContext:this.graphicsContext.mainGraphicsContext,viewPort:{height:this.height,width:this.width}}),u=l.shapes),this.animator&&e&&!l.failed||(u=t.ColumnUtil.drawDefaultShapes(i,c,n,a.classes.item,!this.animator,this.interactivityService&&this.interactivityService.hasSelection())),t.ColumnUtil.applyInteractivity(u,this.graphicsContext.onDragStart),{shapesSelection:u,viewport:{height:this.height,width:this.width},axisOptions:r,labelDataPoints:s}},a.prototype.selectColumn=function(e,i){t.ColumnUtil.setChosenColumnOpacity(this.graphicsContext.mainGraphicsContext,a.classes.item.selector,e,i),
this.moveHandle(e)},a.prototype.getClosestColumnIndex=function(e,i){return t.ColumnUtil.getClosestColumnIndex(i,this.getBarsCenters())},a.prototype.getBarsCenters=function(){var e=this;if(!this.barsCenters){var i=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio);if(this.data.series.length>0){var a=0;this.categoryLayout.isScalar||(a=i/2);var r=this.data.series[0];this.barsCenters=r.data.map(function(t){return e.yProps.scale(e.categoryLayout.isScalar?t.categoryValue:t.categoryIndex)+a})}}return this.barsCenters},a.prototype.moveHandle=function(e){var t=this.getBarsCenters(),i=t[e];if(this.columnSelectionLineHandle){var a=this.columnSelectionLineHandle;a.select("line").attr({y1:i,y2:i}),a.select("circle").attr({cy:i})}else{var a=this.columnSelectionLineHandle=this.graphicsContext.mainGraphicsContext.append("g");a.append("line").classed("interactive-hover-line",!0).attr({x1:0,x2:this.width,y1:i,y2:i}),a.append("circle").classed("drag-handle",!0).attr({cx:0,cy:i,r:"6px"})}},a.getLayout=function(e,i){var a=i.columnWidth,r=i.isScalar,n=i.xScale,o=i.yScale,s=n(0),l=0;return r&&(l=a/2),{shapeLayout:{width:function(e){return-t.StackedUtil.getSize(n,e.valueAbsolute)},x:function(e){return s+t.AxisHelper.diffScaled(n,e.position-e.valueAbsolute,0)},y:function(e){return o(r?e.categoryValue:e.categoryIndex)-l},height:function(e){return a}},shapeLayoutWithoutHighlights:{width:function(e){return-t.StackedUtil.getSize(n,e.originalValueAbsolute)},x:function(e){return s+t.AxisHelper.diffScaled(n,e.originalPosition-e.originalValueAbsolute,0)},y:function(e){return o(r?e.categoryValue:e.categoryIndex)-l},height:function(e){return a}},zeroShapeLayout:{width:function(e){return 0},x:function(e){return s+t.AxisHelper.diffScaled(n,e.position-e.valueAbsolute,0)},y:function(e){return o(r?e.categoryValue:e.categoryIndex)-l},height:function(e){return a}}}},a.prototype.createLabelDataPoints=function(){for(var a=[],r=this.data,n=r.series,o=t.NewDataLabelUtils.createColumnFormatterCacheManager(),s=this.layout.shapeLayout,l=0;l<n.length;l++){var u=n[l],c=u.labelSettings?u.labelSettings:r.labelSettings;if(c.show)for(var h=t.NewDataLabelUtils.getDisplayUnitValueFromAxisFormatter(this.yProps.formatter,c),p=0,d=u.data;p<d.length;p++){var g=d[p];if(!(this.interactivityService&&this.interactivityService.hasSelection()&&!g.selected||r.hasHighlights&&!g.highlight||null==g.value)){var m=void 0;m=this.graphicsContext.is100Pct?t.NewDataLabelUtils.hundredPercentFormat:g.labelFormatString;var f=o.getOrCreate(m,c,h),y=t.NewDataLabelUtils.getLabelFormattedText(f.format(g.value)),v={text:y,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:i.fromPoint(c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},b=e.TextMeasurementService.measureSvgTextWidth(v),C=e.TextMeasurementService.estimateSvgTextHeight(v,!0),x={left:s.x(g),top:s.y(g),width:s.width(g),height:s.height(g)};a.push({isPreferred:!0,text:y,textSize:{width:b,height:C},outsideFill:c.labelColor?c.labelColor:t.NewDataLabelUtils.defaultLabelColor,insideFill:c.labelColor?c.labelColor:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:1,parentShape:{rect:x,orientation:g.value>=0?e.NewRectOrientation.HorizontalLeftBased:e.NewRectOrientation.HorizontalRightBased,validPositions:t.ColumnChart.stackedValidLabelPositions},identity:g.identity,fontSize:c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt})}}}return a},a.classes={item:{"class":"bar",selector:".bar"},highlightItem:{"class":"highlightBar",selector:".highlightBar"}},a}();t.StackedBarChartStrategy=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){var a=t.utility.SelectionManager,r=function(){function i(){}return i.converter=function(e){var a={size:i.getSize(e),color:i.getFill(e).solid.color,text:i.DefaultText,toolTipInfo:[{displayName:"Test",value:"1...2....3... can you see me? I am sending random strings to the tooltip"}],selector:t.SelectionId.createNull()},r=e.table;return r?(a.text=r.rows[0][0],e.categorical&&(a.selector=e.categorical.categories[0].identity?t.SelectionId.createWithId(e.categorical.categories[0].identity[0]):t.SelectionId.createNull()),a):a},i.prototype.init=function(e){this.root=d3.select(e.element.get(0)).append("svg").classed("hello",!0),this.svgText=this.root.append("text").style("cursor","pointer").style("stroke","green").style("stroke-width","0px").attr("text-anchor","middle"),this.selectiionManager=new a({hostServices:e.host})},i.prototype.update=function(a){if(a.dataViews||a.dataViews[0]){var r=this.dataView=a.dataViews[0],n=a.viewport,o=i.converter(r);this.root.attr({height:n.height,width:n.width});var s={fontFamily:"tahoma",fontSize:o.size+"px",text:o.text},l=e.TextMeasurementService.estimateSvgTextHeight(s),u=this.selectiionManager;this.svgText.style({fill:o.color,"font-size":s.fontSize,"font-family":s.fontFamily}).attr({y:n.height/2+l/3+"px",x:n.width/2}).text(o.text).on("click",function(){var e=this;u.select(o.selector).then(function(t){return d3.select(e).style("stroke-width",t.length>0?"2px":"0px")})}).data([o]),t.TooltipManager.addTooltip(this.svgText,function(e){return e.data.toolTipInfo})}},i.getFill=function(e){if(e){var t=e.metadata.objects;if(t){var i=t.general;if(i){var a=i.fill;if(a)return a}}}return{solid:{color:"red"}}},i.getSize=function(e){if(e){var t=e.metadata.objects;if(t){var i=t.general;if(i){var a=i.size;if(a)return a}}}return 100},i.prototype.enumerateObjectInstances=function(e){var t=[],a=this.dataView;switch(e.objectName){case"general":var r={objectName:"general",displayName:"General",selector:null,properties:{fill:i.getFill(a),size:i.getSize(a)}};t.push(r)}return t},i.prototype.destroy=function(){this.root=null},i.capabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.GroupingOrMeasure}],dataViewMappings:[{table:{rows:{"for":{"in":"Values"},dataReductionAlgorithm:{window:{count:100}}},rowCount:{preferred:{min:1}}}}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{fill:{type:{fill:{solid:{color:!0}}},displayName:"Fill"},size:{type:{numeric:!0},displayName:"Size"}}}}},i.DefaultText="Invalid DV",i}();i.HelloIVisual=r}(i=t.samples||(t.samples={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){var a=t.utility.SelectionManager,r=jsCommon.CssConstants.createClassAndSelector,n=function(){function i(){}return i.converter=function(e,i){if(e.categorical&&e.categorical.categories&&1===e.categorical.categories.length){var a=e.categorical,r=a.categories[0],n=r.values,o=a.values,s=[];if(!n||n.length<1||!o||o.length<1)return s;for(var l={objectName:"general",propertyName:"formatString"},u=t.valueFormatter.getFormatString(r.source,l),c=0,h=n.length;h>c;c++){var p=t.valueFormatter.format(n[c],u),d=t.TooltipBuilder.createTooltipInfo(l,a,p,o[0].values[c],null,null,0);if(o.length>1){var g=t.TooltipBuilder.createTooltipInfo(l,a,p,o[1].values[c],null,null,1)[1];g&&d.push(g)}s.push({sliceHeight:o[0].values[c],sliceWidth:o.length>1?o[1].values[c]:1,label:n[c],color:i.getColorByIndex(c).value,selector:t.SelectionId.createWithId(r.identity[c]),tooltipInfo:d})}return s}},i.prototype.init=function(e){var t=e.element;this.selectionManager=new a({hostServices:e.host});var r=this.svg=d3.select(t.get(0)).append("svg").classed(i.VisualClassName,!0);this.colors=e.style.colorPalette.dataColors,this.mainGroupElement=r.append("g"),this.centerText=this.mainGroupElement.append("text")},i.prototype.update=function(e){var a=this;if(e.dataViews&&e.dataViews[0]){var r=e.suppressAnimations?0:t.AnimatorCommon.MinervaAnimationDuration,n=e.viewport;this.svg.attr({height:n.height,width:n.width}).on("click",function(){return a.selectionManager.clear().then(function(){return v.style("opacity",1)})});var o=n.width-20,s=n.height-20,l=Math.min(o,s)/2,u=.3*l,c=this.mainGroupElement;c.attr("transform",t.SVGUtil.translate((o+10)/2,(s+10)/2));var h=this.dataView=e.dataViews[0],p=i.converter(h,this.colors);if(p){var d=d3.max(p,function(e){return e.sliceHeight}),g=d3.sum(p,function(e){return e.sliceWidth}),m=d3.layout.pie().sort(null).value(function(e){return(e&&e.sliceWidth?e.sliceWidth:1)/g}),f=d3.svg.arc().innerRadius(u).outerRadius(function(e){return(l-u)*(e&&e.data&&e.data.sliceHeight?e.data.sliceHeight:1)/d+u+1}),y=this.selectionManager,v=c.selectAll(i.AsterSlice.selector).data(m(p),function(e,t){return p[t]?p[t].selector.getKey():t});v.enter().append("path").attr("stroke","#333").classed(i.AsterSlice["class"],!0),v.on("click",function(e){var t=this;y.select(e.data.selector).then(function(e){e.length>0?(v.style("opacity",.5),d3.select(t).style("opacity",1)):v.style("opacity",1)}),d3.event.stopPropagation()}).attr("fill",function(e){return e.data.color}).transition().duration(r).attr("d",f),v.exit().remove(),this.drawCenterText(u),this.drawOuterLine(u,l,m(p)),t.TooltipManager.addTooltip(v,function(e){return e.data.data.tooltipInfo})}}},i.prototype.drawOuterLine=function(e,t,a){var r=this.mainGroupElement,n=d3.svg.arc().innerRadius(e).outerRadius(t);if(this.getShowOuterline(this.dataView)){var o=r.selectAll(i.OuterLine.selector).data(a);o.enter().append("path"),o.attr("fill","none").attr({stroke:"#333","stroke-width":this.getOuterThickness(this.dataView)+"px",d:n}).style("opacity",1).classed(i.OuterLine["class"],!0)}else r.selectAll(i.OuterLine.selector).style("opacity",0)},i.prototype.getCenterText=function(e){for(var t=e.metadata.columns,i=0;i<t.length;i++)if(!t[i].isMeasure)return t[i].displayName;return""},i.prototype.drawCenterText=function(e){var t=this.getCenterText(this.dataView);this.centerText.style({"line-height":1,"font-weight":"bold","font-size":.4*e+"px",fill:this.getLabelFill(this.dataView).solid.color}).attr({dy:"0.35em","text-anchor":"middle"}).text(t)},i.prototype.getShowOuterline=function(t){return t.metadata&&e.DataViewObjects.getValue(t.metadata.objects,i.properties.showLine,!1)},i.prototype.getOuterThickness=function(t){return t&&t.metadata&&t.metadata.objects?e.DataViewObjects.getValue(t.metadata.objects,{objectName:"outerLine",propertyName:"thickness"},1):1},i.prototype.getLabelFill=function(t){if(t&&t.metadata&&t.metadata.objects){var a=t.metadata.objects.label;if(a)return a.fill}return t.metadata&&e.DataViewObjects.getValue(t.metadata.objects,i.properties.labelFill,{solid:{color:"#333"}})},i.prototype.enumerateObjectInstances=function(e){var t=[];switch(e.objectName){case"label":var i={objectName:"label",displayName:"Label",selector:null,properties:{fill:this.getLabelFill(this.dataView)}};t.push(i);break;case"outerLine":var a={objectName:"outerLine",displayName:"Outer Line",selector:null,properties:{show:this.getShowOuterline(this.dataView),thickness:this.getOuterThickness(this.dataView)}};t.push(a)}return t},i.capabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping},{name:"Y",kind:e.VisualDataRoleKind.Measure}],dataViewMappings:[{conditions:[{Category:{max:1},Y:{max:2}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{bind:{to:"Y"}}]}}}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},label:{displayName:"Label",properties:{fill:{displayName:"Fill",type:{fill:{solid:{color:!0}}}}}},outerLine:{displayName:"Outer line",properties:{show:{displayName:"Show",type:{bool:!0}},thickness:{displayName:"Thickness",type:{numeric:!0}}}}}},i.properties={formatString:{objectName:"general",propertyName:"formatString"},labelFill:{objectName:"label",propertyName:"fill"},showLine:{objectName:"outerLine",propertyName:"show"},lineThickness:{objectName:"outerLine",propertyName:"thickness"}},i.VisualClassName="asterPlot",i.AsterSlice=r("asterSlice"),i.OuterLine=r("outerLine"),i}();i.AsterPlot=n}(i=t.samples||(t.samples={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){t.capabilities=e.comboChartCapabilities}(t=e.ComboChart||(e.ComboChart={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=function(){function i(e){this.isScrollable=e.isScrollable,this.interactivityService=e.interactivityService}return i.prototype.init=function(e){this.options=e,this.svg=e.svg,this.mainGraphicsG=this.svg.append("g").classed("dataDotChartMainGraphicsContext",!0),this.mainGraphicsContext=this.mainGraphicsG.append("svg"),this.currentViewport=e.viewport,this.hostService=e.host,this.cartesianVisualHost=e.cartesianHost,this.style=e.style,this.colors=this.style.colorPalette.dataColors,this.interactivity=e.interactivity;var t=this.element=e.element;t.addClass(i.ClassName),t.css("overflow","visible")},i.prototype.setData=function(a){if(this.data={series:{data:[]},hasHighlights:!1,hasDynamicSeries:!1},a.length>0){var r=a[0];if(r&&r.categorical){var n=this.dataViewCategorical=r.categorical,o=n.categories,s=e.ValueType.fromDescriptor({text:!0});o&&o.length>0&&o[0].source&&o[0].source.type&&(s=o[0].source.type),this.data=i.converter(r,t.valueFormatter.format(null),this.interactivityService)}}},i.prototype.setFilteredData=function(t,i){var a=this.clippedData=e.Prototype.inherit(this.data);return a&&a.series&&a.series.data&&(a.series={data:a.series.data.slice(t,i),xCol:a.series.xCol,yCol:a.series.yCol}),a},i.prototype.calculateAxesProperties=function(a){var r=this;this.currentViewport=a.viewport,this.margin=a.margin;var n=this.clippedData=this.data,o=this.currentViewport,s=this.margin,l=n?n.series:null,u=l&&l.data&&l.data.length>0?[l]:[],c=l&&l.data?l.data.length:0;n.hasHighlights&&(c/=2);var h,p,d=o.width-(s.left+s.right),g=o.height-(s.top+s.bottom);i.hasDataPoint(l)&&(h=l.xCol,p=l.yCol);var m=t.CartesianChart.getLayout(null,{availableWidth:d,categoryCount:c,domain:null,isScalar:!1,isScrollable:this.isScrollable}),f=m.categoryThickness*t.CartesianChart.OuterPaddingRatio;this.isScrollable||(this.clippedData=i.createClippedDataIfOverflowed(n,m.categoryCount));var y=t.AxisHelper.createValueDomain(u,!0)||t.fallBackDomain,v=t.AxisHelper.combineDomain(a.forcedYDomain,y);this.yAxisProperties=t.AxisHelper.createAxis({pixelSpan:g,dataDomain:v,metaDataColumn:p,formatString:t.valueFormatter.getFormatString(p,i.formatStringProp),outerPadding:0,isScalar:!0,isVertical:!0,forcedTickCount:a.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!0});var b=this.xAxisProperties?this.xAxisProperties.axisType:e.ValueType.fromDescriptor({text:!0}),C=t.AxisHelper.createDomain(u,b,!1,a.forcedXDomain);return this.xAxisProperties=t.AxisHelper.createAxis({pixelSpan:d,dataDomain:C,metaDataColumn:h,formatString:t.valueFormatter.getFormatString(h,i.formatStringProp),outerPadding:f,isScalar:!1,isVertical:!1,forcedTickCount:a.forcedTickCount,useTickIntervalForDisplayUnits:!0,categoryThickness:m.categoryThickness,getValueFn:function(e,t){return r.lookupXValue(e,t)},isCategoryAxis:!1}),[this.xAxisProperties,this.yAxisProperties]},i.createClippedDataIfOverflowed=function(t,i){var a=t.hasHighlights?Math.min(t.series.data.length,2*i):Math.min(t.series.data.length,i);if(a>=t.series.data.length)return t;var r=e.Prototype.inherit(t);return r.series=e.Prototype.inherit(t.series),r.series.data=r.series.data.slice(0,a),r},i.hasDataPoint=function(e){return e&&e.data&&e.data.length>0},i.prototype.lookupXValue=function(e,i){var a=this.data,r=t.AxisHelper.isDateTime(i);if(r)return new Date(e);if(a&&a.series){var n=a.series.data;if(n){var o=n[e];if(o)return o.categoryValue}}return e},i.prototype.overrideXScale=function(e){this.xAxisProperties=e},i.prototype.render=function(a){var r=this;if(this.clippedData){var n=this.clippedData,o=n.series.data,s=n.hasHighlights,l=this.margin,u=this.currentViewport,c=u.width-(l.left+l.right),h=u.height-(l.top+l.bottom),p=this.xAxisProperties.scale,d=this.yAxisProperties.scale,g=this.xAxisProperties.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio),m=g/2,f=this.cartesianVisualHost.getSharedColors().getNewColorScale().getColor(i.DotColorKey),y=this.interactivityService?this.interactivityService.hasSelection():!1;this.mainGraphicsContext.attr("width",c).attr("height",h);var v=this.mainGraphicsContext.selectAll(i.DotClassSelector).data(o,function(e){return e.identity.getKey()});v.enter().append("circle").classed(i.DotClassName,!0),v.style({fill:f.value}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,y,s)}).classed("null-value",function(e){return null===e.value}).attr({r:function(e){return m},cx:function(e){return p(e.categoryIndex)+m},cy:function(e){return d(e.value)}}),v.exit().remove();var b=this.mainGraphicsContext.selectAll(i.DotLabelClassSelector).data(o,function(e){return e.identity.getKey()});b.enter().append("text").classed(i.DotLabelClassName,!0).attr({"text-anchor":i.DotLabelTextAnchor,dy:i.DotLabelVerticalOffset}),b.classed("null-value",function(e){return null===e.value}).classed("overflowed",!1).attr({x:function(e){return p(e.categoryIndex)+m},y:function(e){return d(e.value)}}).text(function(e){return r.yAxisProperties.formatter.format(e.value)});var C=!1;b.each(function(){if(!C&&!$("<div>").addClass($(this).attr("class")).hasClass("null-value")){var t=e.TextMeasurementService.measureSvgTextElementWidth(this);t>g&&(b.classed("overflowed",!0),C=!0)}}),b.exit().remove();var x=void 0;return this.interactivityService&&(x={dots:v,dotLabels:b,datapoints:o}),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),{dataPoints:o,behaviorOptions:x,labelDataPoints:[],labelsAreNumeric:!0}}},i.prototype.calculateLegend=function(){return this.createLegendDataPoints(0)},i.prototype.hasLegend=function(){return this.data&&this.data.hasDynamicSeries},i.prototype.createLegendDataPoints=function(a){var r=this.data;if(!r)return null;var n,o=r.series,s=o.data,l=[],u=this.xAxisProperties?this.xAxisProperties.axisType:e.ValueType.fromDescriptor({text:!0});if(r.series&&r.series.data){var c=r.series.data[0];n=c&&this.lookupXValue(c.categoryValue,u)}if(o.yCol){var h=i.formatStringProp,p=s[a],d=p&&p.value,g=t.converterHelper.getFormattedLegendLabel(o.yCol,this.dataViewCategorical.values,h),m=this.cartesianVisualHost.getSharedColors().getNewColorScale().getColor(i.DotColorKey),f=this.dataViewCategorical.values,y=f&&f.length>a?t.SelectionId.createWithIdAndMeasure(f[a].identity,f[a].source.queryName):t.SelectionId.createWithMeasure(f.source.queryName);l.push({color:m.value,icon:t.LegendIcon.Line,label:g,category:t.valueFormatter.format(n,t.valueFormatter.getFormatString(o.xCol,h)),measure:t.valueFormatter.format(d,t.valueFormatter.getFormatString(o.yCol,h)),identity:y,selected:!1})}return{dataPoints:l}},i.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},i.converter=function(e,i,a){var r=e.categorical,n=r.categories&&r.categories.length>0?r.categories[0]:{source:void 0,values:[i],identity:void 0},o=t.AxisHelper.getCategoryValueType(n.source),s=t.AxisHelper.isDateTime(o),l=n.values;if(!_.isEmpty(r.values)){for(var u=r.values[0],c=!!u.highlights,h=[],p=0,d=u.values.length;d>p;p++){var g=n.identity?t.SelectionId.createWithIdAndMeasure(n.identity[p],u.source.queryName):t.SelectionId.createWithMeasure(u.source.queryName),m=l[p];if(h.push({categoryValue:s&&m?m.getTime():m,value:u.values[p],categoryIndex:p,seriesIndex:0,selected:!1,identity:g,highlight:!1}),c){var f=t.SelectionId.createWithHighlight(g),y=u.highlights[p];h.push({categoryValue:s&&m?m.getTime():m,value:y,categoryIndex:p,seriesIndex:0,selected:!1,identity:f,highlight:!0})}}return a&&a.applySelectionStateToData(h),{series:{xCol:n.source,yCol:u.source,data:h},hasHighlights:c,hasDynamicSeries:!0}}return{series:{data:[]},hasHighlights:!1,hasDynamicSeries:!1}},i.formatStringProp={objectName:"general",propertyName:"formatString"},i.ClassName="dataDotChart",i.DotClassName="dot",i.DotClassSelector=".dot",i.DotColorKey="dataDot",i.DotLabelClassName="label",i.DotLabelClassSelector=".label",i.DotLabelVerticalOffset="0.4em",i.DotLabelTextAnchor="middle",i}();t.DataDotChart=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.CssConstants.createClassAndSelector,a=jsCommon.PixelConverter,r=function(){function r(e){this.labelPositionObjects=[t.labelPosition.outsideEnd,t.labelPosition.insideCenter],e&&(this.tooltipsEnabled=e.tooltipsEnabled,e.funnelSmallViewPortProperties&&(this.funnelSmallViewPortProperties=e.funnelSmallViewPortProperties),e.animator&&(this.animator=e.animator),e.behavior&&(this.behavior=e.behavior))}return r.isValidValueColumn=function(e){return t.DataRoleHelper.hasRole(e.source,"Y")},r.getFirstValidValueColumn=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(r.isValidValueColumn(i))return i}},r.converter=function(e,i,a,n){var o=[],s=t.funnelChartProps.general.formatString,l=e.categorical,u=l.categories||[],c=l.values,h=[];c&&(h=_.map(c,function(e){return e.source}));var p,d,g,m,f=c&&c.length>0&&c[0]&&!!c[0].highlights,y=!1,v=!1,b=!1,C=[],x=t.dataLabelUtils.getDefaultFunnelLabelSettings(),S=t.dataLabelUtils.getDefaultLabelSettings(!0),w=new t.ColorHelper(i,t.funnelChartProps.dataPoint.fill,n);if(e&&e.metadata&&e.metadata.objects){var D=e.metadata.objects.labels;D&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(D,x);var P=e.metadata.objects.percentBarLabel;P&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(P,S)}var L=!_.isEmpty(c)&&r.getFirstValidValueColumn(c);if(!L)return{slices:o,categoryLabels:C,valuesMetadata:h,hasHighlights:f,highlightsOverflow:y,canShowDataLabels:!0,dataLabelsSettings:x,hasNegativeValues:v,allValuesAreNegative:b,percentBarLabelSettings:S};if(p=L.values[0],f&&(d=L.highlights[0]),1===u.length)for(var N=u[0],T=N.values,V=t.valueFormatter.getFormatString(N.source,s),M=0,A=T.length;A>M;M++){var R=L.source.queryName,I=t.SelectionIdBuilder.builder().withCategory(N,M).withMeasure(R).createSelectionId(),F=L.values[M],E=t.valueFormatter.format(T[M],V),O=t.TooltipBuilder.createTooltipInfo(s,l,E,F,null,null,0,M);if(f){var G=L.highlights[M];0!==G&&(O=t.TooltipBuilder.createTooltipInfo(s,l,E,F,null,null,0,M,G))}r.addFunnelPercentsToTooltip(O,a,p?F/p:null,g?F/g:null);var H=w.getColorForMeasure(N.objects&&N.objects[M],"");if(o.push({label:E,value:F,originalValue:F,categoryOrMeasureIndex:M,identity:I,selected:!1,key:I.getKey(),tooltipInfo:O,color:H,labelFill:x.labelColor}),f){var z=t.SelectionId.createWithHighlight(I),G=L.highlights[M],k=0!==G?G:void 0,B=t.TooltipBuilder.createTooltipInfo(s,l,E,F,null,null,0,M,k);r.addFunnelPercentsToTooltip(B,a,d?G/d:null,m?G/m:null,!0),o.push({label:E,value:F,originalValue:F,categoryOrMeasureIndex:M,identity:z,selected:!1,key:z.getKey(),highlight:!0,highlightValue:G,originalHighlightValue:G,tooltipInfo:B,color:H}),m=G}g=F}else if(h.length>0&&c&&c.length>0)for(var M=0,W=c.length;W>M;M++){var U=c[M];if(r.isValidValueColumn(U)){var F=U.values[0],I=t.SelectionId.createWithMeasure(U.source.queryName),j=h[M].displayName,q=l.categories?null:M,O=t.TooltipBuilder.createTooltipInfo(s,l,j,F,null,null,q,M),H=w.getColorForMeasure(U.source.objects,"");if(f){var G=U.highlights[0];0!==G&&(O=t.TooltipBuilder.createTooltipInfo(s,l,j,F,null,null,0,M,G))}if(r.addFunnelPercentsToTooltip(O,a,p?F/p:null,g?F/g:null),o.push({label:h[M].displayName,value:F,originalValue:F,categoryOrMeasureIndex:M,identity:I,selected:!1,key:I.getKey(),tooltipInfo:O,color:H,labelFill:x.labelColor}),f){var z=t.SelectionId.createWithHighlight(I),G=U.highlights[0];G>F&&(y=!0);var k=0!==G?G:void 0,K=t.TooltipBuilder.createTooltipInfo(s,l,j,F,null,null,0,M,k);r.addFunnelPercentsToTooltip(K,a,d?G/d:null,m?G/m:null,!0),o.push({label:h[M].displayName,value:F,originalValue:F,categoryOrMeasureIndex:M,identity:z,key:z.getKey(),selected:!1,highlight:!0,originalHighlightValue:G,highlightValue:G,tooltipInfo:K,color:H}),m=G}g=F}}for(var M=0;M<o.length;M+=f?2:1){var Q=o[M];C.push(Q.label)}b=o.length>0&&_.every(o,function(e){return(e.highlight?e.highlightValue<=0:!0)&&e.value<0});for(var Y=0;Y<o.length;Y++){var Q=o[Y];if(b)Q.value=Math.abs(Q.value),Q.highlight&&(Q.highlightValue=Math.abs(Q.highlightValue));else{var F=Q.value,X=0>F;X&&(Q.value=0);var $=!1;if(Q.highlight){var Z=Q.highlightValue;$=0>Z,Q.highlightValue=$?0:Z}v||(v=X||$)}Q.highlightValue>Q.value&&(y=!0)}return{slices:o,categoryLabels:C,valuesMetadata:h,hasHighlights:f,highlightsOverflow:y,canShowDataLabels:!0,dataLabelsSettings:x,hasNegativeValues:v,allValuesAreNegative:b,percentBarLabelSettings:S}},r.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder;switch(e.objectName){case"dataPoint":var a=this.dataViews&&this.dataViews.length>0&&this.dataViews[0]&&this.dataViews[0].categorical,n=t.GradientUtils.hasGradientRole(a);n||this.enumerateDataPoints(i);break;case"labels":var o=r.getLabelSettingsOptions(i,this.data.dataLabelsSettings,!0,this.labelPositionObjects);t.dataLabelUtils.enumerateDataLabels(o);break;case"percentBarLabel":var s=r.getLabelSettingsOptions(i,this.data.percentBarLabelSettings,!1);t.dataLabelUtils.enumerateDataLabels(s)}return i.complete()},r.getLabelSettingsOptions=function(e,t,i,a){return{enumeration:e,dataLabelsSettings:t,show:!0,displayUnits:i,precision:i,position:i,positionObject:a,fontSize:!0}},r.prototype.enumerateDataPoints=function(e){var i=this.data;if(i){var a=i.slices;e.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:this.defaultDataPointColor||this.colors.getColorByIndex(0).value}}}});for(var r=0;r<a.length;r++){var n=a[r];if(!n.highlight){var o=n.color,s=n.identity.getSelector(),l=!!s.data;e.pushInstance({objectName:"dataPoint",displayName:n.label,selector:t.ColorHelper.normalizeSelector(s,l),properties:{fill:{solid:{color:o}}}})}}}},r.prototype.init=function(e){this.options=e;var i=e.element,a=this.svg=d3.select(i.get(0)).append("svg").classed(r.VisualClassName,!0);this.behavior&&(this.clearCatcher=t.appendClearCatcher(this.svg)),this.currentViewport=e.viewport,this.margin={left:5,right:5,top:0,bottom:0};var n=e.style;this.colors=n.colorPalette.dataColors,this.hostServices=e.host,this.behavior&&(this.interactivityService=t.createInteractivityService(this.hostServices)),this.percentGraphicsContext=a.append("g").classed(r.Selectors.percentBar.root["class"],!0),this.funnelGraphicsContext=a.append("g"),this.axisGraphicsContext=a.append("g"),this.updateViewportProperties()},r.prototype.updateViewportProperties=function(){var e=this.currentViewport;this.svg.attr("width",e.width).attr("height",e.height)},r.prototype.update=function(i){this.data={slices:[],categoryLabels:[],valuesMetadata:[],hasHighlights:!1,highlightsOverflow:!1,canShowDataLabels:!0,dataLabelsSettings:t.dataLabelUtils.getDefaultFunnelLabelSettings(),hasNegativeValues:!1,allValuesAreNegative:!1,percentBarLabelSettings:t.dataLabelUtils.getDefaultLabelSettings(!0)};var a=this.dataViews=i.dataViews;if(this.currentViewport=i.viewport,a&&a.length>0){var n=a[0];if(n.metadata&&n.metadata.objects){var o=e.DataViewObjects.getFillColor(n.metadata.objects,t.funnelChartProps.dataPoint.defaultColor);o&&(this.defaultDataPointColor=o)}n.categorical&&(this.data=r.converter(n,this.colors,this.hostServices,this.defaultDataPointColor),this.interactivityService&&this.interactivityService.applySelectionStateToData(this.data.slices));var s=t.getInvalidValueWarnings(a,!1,!1,!1);this.data.allValuesAreNegative?s.unshift(new t.AllNegativeValuesWarning):this.data.hasNegativeValues&&s.unshift(new t.NegativeValuesNotSupportedWarning),this.hostServices.setWarnings(s)}this.updateViewportProperties(),this.updateInternal(i.suppressAnimations)},r.prototype.onDataChanged=function(e){this.update({dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewport:this.currentViewport})},r.prototype.onResizing=function(e){this.currentViewport=e,this.update({dataViews:this.dataViews,suppressAnimations:!0,viewport:this.currentViewport})},r.prototype.getMaxLeftMargin=function(t,i){for(var a=0,n=e.TextMeasurementService.measureSvgTextWidth,o=0,s=t.length;s>o;o++)i.text=t[o],a=Math.max(a,n(i));return a+r.LabelFunnelPadding},r.prototype.updateInternal=function(e){if(null!=this.data){var i=this.data,a=i.slices,n=a.filter(function(e){return!e.highlight}),o=this.isHidingPercentBars(),s=this.setUpAxis(),l=s.margin,u=s.verticalRange,c=this.funnelGraphicsContext.attr("transform",t.SVGUtil.translateAndRotate(l.left,l.top,u/2,u/2,90));this.percentGraphicsContext.attr("transform",t.SVGUtil.translate(l.left,l.top)),this.svg.style("font-family",t.dataLabelUtils.StandardFontFamily);var h,p,d,g=r.getLayout(i,s),m=t.dataLabelUtils.getFunnelChartLabelLayout(i,s,r.InnerTextMinimumPadding,i.dataLabelsSettings,this.currentViewport);if(this.animator&&!e){var f={viewModel:i,interactivityService:this.interactivityService,layout:g,axisGraphicsContext:this.axisGraphicsContext,shapeGraphicsContext:c,percentGraphicsContext:this.percentGraphicsContext,labelGraphicsContext:this.svg,axisOptions:s,slicesWithoutHighlights:n,colors:this.colors,labelLayout:m,isHidingPercentBars:o,visualInitOptions:this.options};h=this.animator.animate(f),p=h.shapes,d=h.dataLabels}if((!this.animator||e||h.failed)&&(r.drawDefaultAxis(this.axisGraphicsContext,s,o),p=r.drawDefaultShapes(i,a,c,g,this.interactivityService&&this.interactivityService.hasSelection()),r.drawPercentBars(i,this.percentGraphicsContext,g,o),i.dataLabelsSettings.show&&i.canShowDataLabels?d=t.dataLabelUtils.drawDefaultLabelsForFunnelChart(i.slices,this.svg,m):t.dataLabelUtils.cleanDataLabels(this.svg)),this.interactivityService){var y=r.drawInteractorShapes(a,c,g),v={bars:p,interactors:y,clearCatcher:this.clearCatcher,hasHighlights:i.hasHighlights};this.interactivityService.bind(a,this.behavior,v),this.tooltipsEnabled&&(t.TooltipManager.addTooltip(p,function(e){return e.data.tooltipInfo}),t.TooltipManager.addTooltip(y,function(e){return e.data.tooltipInfo}))}else this.tooltipsEnabled&&t.TooltipManager.addTooltip(p,function(e){return e.data.tooltipInfo});t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)}},r.prototype.getUsableVerticalSpace=function(){var e=this.data.categoryLabels,t=this.margin,i=this.currentViewport.height-(t.top+t.bottom);return i-r.MinBarThickness*e.length},r.prototype.isHidingPercentBars=function(){var t=this.data;if(t.percentBarLabelSettings.show){var i=r.getTextProperties(t.percentBarLabelSettings.fontSize),a=2*e.TextMeasurementService.estimateSvgTextHeight(i),n=this.getUsableVerticalSpace()-2*r.MinBarThickness*r.PercentBarToBarRatio-a;return 0>=n}return!0},r.prototype.isSparklines=function(){return this.getUsableVerticalSpace()<=0},r.prototype.setUpAxis=function(){var e=this.data,t=e.slices,i=e.categoryLabels,a=this.currentViewport,n=this.margin,o=a.height-(n.top+n.bottom),s=this.isSparklines(),l=this.isHidingPercentBars();if(i.length>0&&s)i=[],e.canShowDataLabels=!1;else if(this.showCategoryLabels()){var u=r.getTextProperties();n.left=this.getMaxLeftMargin(i,u)}else i=[];var c,h=a.width-(n.left+n.right),p=r.BarToSpaceRatio,d=d3.max(t.map(function(e){return e.value})),g=0,m=0,f=o;c=l?o-i.length*r.MaxBarWidth:o-i.length*r.MaxBarWidth-2*r.MaxBarWidth*r.PercentBarToBarRatio,i.length>0&&c>0&&(m=Math.ceil(c/2),f=Math.ceil(o-c/2));var y=d3.scale.linear().domain([g,d]).range([h,0]),v=d3.scale.ordinal().domain(d3.range(0,e.categoryLabels.length)).rangeBands([m,f],p,l?p:r.PercentBarToBarRatio);return{margin:n,xScale:v,yScale:y,maxScore:d,verticalRange:h,rangeStart:m,rangeEnd:f,barToSpaceRatio:p,categoryLabels:i}},r.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},r.getLayout=function(e,i){var n=e.highlightsOverflow,o=i.yScale,s=i.xScale,l=i.maxScore,u=s.rangeBand(),c=Math.ceil(u/2),h=c,p=u*r.OverflowingHighlightWidthRatio,d=p/2,g=i.categoryLabels.length-1,m=Math.abs(o(l)-o(0)),f=function(e){
return(m-Math.abs(o(e)-o(0)))/2},y=function(e){return Math.max(r.MinimumInteractorSize,Math.abs(o(e)-o(0)))},v=a.fromPoint(e.percentBarLabelSettings.fontSize);return{percentBarLayout:{mainLine:{x2:function(e){return Math.abs(o(e.value)-o(0))},transform:function(e){var i=o(e.value)-f(e.value),a=e.isTop?s(0)-c:s(g)+u+c;return t.SVGUtil.translate(i,a)}},leftTick:{y2:function(e){return h},transform:function(e){var i=o(e.value)-f(e.value),a=e.isTop?s(0)-c-h/2:s(g)+u+c-h/2;return t.SVGUtil.translate(i,a)}},rightTick:{y2:function(e){return h},transform:function(e){var i=o(e.value)-f(e.value),a=Math.abs(o(e.value)-o(0)),r=i+a,n=e.isTop?s(0)-c-h/2:s(g)+u+c-h/2;return t.SVGUtil.translate(r,n)}},text:{x:function(e){return Math.ceil(Math.abs(o(l)-o(0))/2)},y:function(e){return e.isTop?-h/2:parseInt(v,10)+h/2},dy:function(e){return e.isTop?"":t.dataLabelUtils.DefaultDy},style:function(){return"font-size: "+v},transform:function(e){var i=e.isTop?s(0)-c:s(g)+u+c;return t.SVGUtil.translate(0,i)},fill:e.percentBarLabelSettings.labelColor,maxWidth:m}},shapeLayout:{width:function(e){return e.highlight&&n?p:u},height:function(e){return Math.abs(o(r.getFunnelSliceValue(e))-o(0))},x:function(e){return s(e.categoryOrMeasureIndex)+(e.highlight&&n?d:0)},y:function(e){var t=r.getFunnelSliceValue(e);return o(t)-f(t)}},shapeLayoutWithoutHighlights:{width:function(e){return u},height:function(e){return Math.abs(o(e.value)-o(0))},x:function(e){return s(e.categoryOrMeasureIndex)+0},y:function(e){return o(e.value)-f(e.value)}},zeroShapeLayout:{width:function(e){return e.highlight&&n?p:u},height:function(e){return 0},x:function(e){return s(e.categoryOrMeasureIndex)+(e.highlight&&n?d:0)},y:function(e){return o((o.domain()[0]+o.domain()[1])/2)}},interactorLayout:{width:function(e){return e.highlight&&n?p:u},height:function(e){return y(r.getFunnelSliceValue(e))},x:function(e){return s(e.categoryOrMeasureIndex)+(e.highlight&&n?d:0)},y:function(e){var t=y(r.getFunnelSliceValue(e));return(m-t)/2}}}},r.drawDefaultAxis=function(e,i,a){var n=d3.range(0,i.categoryLabels.length),o=d3.scale.ordinal().domain(n).rangeBands([i.rangeStart,i.rangeEnd],i.barToSpaceRatio,a?i.barToSpaceRatio:r.PercentBarToBarRatio),s=d3.svg.axis().scale(o).orient("right").tickPadding(r.TickPadding).innerTickSize(r.InnerTickSize).ticks(n.length).tickValues(n).tickFormat(function(e){return i.categoryLabels[e]});e.attr("class","axis hideLinesOnAxis").attr("transform",t.SVGUtil.translate(0,i.margin.top)).call(s)},r.drawDefaultShapes=function(e,i,a,n,o){var s=e.hasHighlights,l=a.selectAll(r.Selectors.funnel.bars.selector).data(i,function(e){return e.key});return l.enter().append("rect").attr("class",function(e){return e.highlight?r.FunnelBarHighlightClass:r.Selectors.funnel.bars["class"]}),l.style("fill",function(e){return e.color}).style("fill-opacity",function(e){return function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,o,s)}}).attr(n.shapeLayout),l.exit().remove(),l},r.getFunnelSliceValue=function(e,t){return void 0===t&&(t=!1),t?e.highlight?e.originalHighlightValue:e.originalValue:e.highlight?e.highlightValue:e.value},r.drawInteractorShapes=function(e,t,i){var a=e.filter(function(e){return!e.highlight&&i.interactorLayout.height(e)===r.MinimumInteractorSize}),n=t.selectAll(r.Selectors.funnel.interactors.selector).data(a,function(e){return e.key});return n.enter().append("rect").attr("class",r.Selectors.funnel.interactors["class"]),n.style("fill-opacity",0).attr(i.interactorLayout),n.exit().remove(),n},r.drawPercentBarComponents=function(e,i,a,n){var o=e.selectAll(r.Selectors.percentBar.mainLine.selector).data(i);o.exit().remove(),o.enter().append("line").classed(r.Selectors.percentBar.mainLine["class"],!0),o.attr(a.percentBarLayout.mainLine);var s=e.selectAll(r.Selectors.percentBar.leftTick.selector).data(i);s.exit().remove(),s.enter().append("line").classed(r.Selectors.percentBar.leftTick["class"],!0),s.attr(a.percentBarLayout.leftTick);var l=e.selectAll(r.Selectors.percentBar.rightTick.selector).data(i);l.exit().remove(),l.enter().append("line").classed(r.Selectors.percentBar.rightTick["class"],!0),l.attr(a.percentBarLayout.rightTick);var u=e.selectAll(r.Selectors.percentBar.text.selector).data(i);u.exit().remove(),u.enter().append("text").classed(r.Selectors.percentBar.text["class"],!0),u.attr(a.percentBarLayout.text).text(function(e){return t.dataLabelUtils.getLabelFormattedText({label:e.percent,format:t.valueFormatter.getLocalizedString("Percentage1"),fontSize:n.fontSize,maxWidth:a.percentBarLayout.text.maxWidth})})},r.drawPercentBars=function(e,t,i,a){if(a||!e.slices||(e.hasHighlights?e.slices.length/2:e.slices.length)<2)return void r.drawPercentBarComponents(t,[],i,e.percentBarLabelSettings);var n=[e.slices[e.hasHighlights?1:0],e.slices[e.slices.length-1]],o=r.getFunnelSliceValue(n[0]);if(0>=o)return void r.drawPercentBarComponents(t,[],i,e.percentBarLabelSettings);var s=[{value:r.getFunnelSliceValue(n[0]),percent:1,isTop:!0},{value:r.getFunnelSliceValue(n[1]),percent:r.getFunnelSliceValue(n[1])/o,isTop:!1}];r.drawPercentBarComponents(t,s,i,e.percentBarLabelSettings)},r.prototype.showCategoryLabels=function(){return this.funnelSmallViewPortProperties&&this.funnelSmallViewPortProperties.hideFunnelCategoryLabelsOnSmallViewPort&&this.currentViewport.height<this.funnelSmallViewPortProperties.minHeightFunnelCategoryLabelsVisible?!1:!0},r.addFunnelPercentsToTooltip=function(e,i,a,r,n){null!=a&&e.push({displayName:i.getLocalizedString("Funnel_PercentOfFirst"+(n?"_Highlight":"")),value:t.valueFormatter.format(a,"0.00 %;-0.00 %;0.00 %")}),null!=r&&e.push({displayName:i.getLocalizedString("Funnel_PercentOfPrevious"+(n?"_Highlight":"")),value:t.valueFormatter.format(r,"0.00 %;-0.00 %;0.00 %")})},r.getTextProperties=function(e){return{fontSize:a.fromPoint(e||t.dataLabelUtils.DefaultFontSizeInPt),fontFamily:t.dataLabelUtils.StandardFontFamily}},r.DefaultBarOpacity=1,r.DimmedBarOpacity=.4,r.PercentBarToBarRatio=2,r.TickPadding=0,r.InnerTickSize=0,r.MinimumInteractorSize=15,r.InnerTextClassName="labelSeries",r.Selectors={funnel:{bars:i("funnelBar"),highlights:i("highlight"),interactors:i("funnelBarInteractor")},percentBar:{root:i("percentBars"),mainLine:i("mainLine"),leftTick:i("leftTick"),rightTick:i("rightTick"),text:i("value")}},r.FunnelBarHighlightClass=[r.Selectors.funnel.bars["class"],r.Selectors.funnel.highlights["class"]].join(" "),r.VisualClassName="funnelChart",r.BarToSpaceRatio=.1,r.MaxBarWidth=40,r.MinBarThickness=12,r.LabelFunnelPadding=6,r.InnerTextMinimumPadding=10,r.OverflowingHighlightWidthRatio=.5,r}();t.FunnelChart=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.CssConstants.createClassAndSelector,a=jsCommon.PixelConverter,r=function(){function r(e){this.lastAngle=-Math.PI/2,e&&(e.gaugeSmallViewPortProperties&&(this.gaugeSmallViewPortProperties=e.gaugeSmallViewPortProperties),this.animator=e.animator,this.tooltipsEnabled=e.tooltipsEnabled)}return r.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder;switch(e.objectName){case"axis":this.enumerateAxis(i);break;case"labels":var a=this.data?this.data.dataLabelsSettings:t.dataLabelUtils.getDefaultGaugeLabelSettings();t.dataLabelUtils.enumerateDataLabels(this.getDataLabelSettingsOptions(i,a));break;case"calloutValue":var a=this.data?this.data.calloutValueLabelsSettings:t.dataLabelUtils.getDefaultGaugeLabelSettings();t.dataLabelUtils.enumerateDataLabels(this.getDataLabelSettingsOptions(i,a))}return i.complete()},r.prototype.getDataLabelSettingsOptions=function(e,t){return{dataLabelsSettings:t,show:!0,precision:!0,displayUnits:!0,fontSize:!0,enumeration:e}},r.prototype.enumerateAxis=function(e){var t=this.dataViews[0];if(t&&t.metadata){var i=r.getGaugeObjectsProperties(t);e.pushInstance({selector:null,objectName:"axis",properties:i})}},r.getGaugeObjectsProperties=function(e){var i={},a=e.metadata.objects,r=!!a&&!!a.axis;return t.DataRoleHelper.hasRoleInDataView(e,t.gaugeRoleNames.minValue)||(i.min=r?a.axis.min:void 0),t.DataRoleHelper.hasRoleInDataView(e,t.gaugeRoleNames.maxValue)||(i.max=r?a.axis.max:void 0),t.DataRoleHelper.hasRoleInDataView(e,t.gaugeRoleNames.targetValue)||(i.target=r?a.axis.target:void 0),i},r.prototype.init=function(e){this.element=e.element,this.currentViewport=e.viewport,this.style=e.style,this.options=e,this.settings=r.DefaultStyleProperties,this.targetSettings=r.DefaultTargetSettings,this.setMargins(),this.color=d3.scale.ordinal().range(this.style.colorPalette.dataColors.getSentimentColors().map(function(e){return e.value})),this.hostService=e.host;var i=this.svg=d3.select(this.element.get(0)).append("svg");i.classed(r.VisualClassName,!0);var a=this.mainGraphicsContext=i.append("g");a.attr("class",r.MainGaugeGroupClassName),this.initKpiBands();var n=this.backgroundArc=d3.svg.arc().innerRadius(0).outerRadius(0).startAngle(-Math.PI/2).endAngle(Math.PI/2),o=this.foregroundArc=d3.svg.arc().innerRadius(0).outerRadius(0).startAngle(-Math.PI/2);this.backgroundArcPath=a.append("path").classed("backgroundArc",!0).attr("d",n),this.foregroundArcPath=a.append("path").datum({endAngle:-Math.PI/2}).classed("foregroundArc",!0).attr("d",o);var s=this.animatedNumberGrapicsContext=i.append("g");this.animatedNumber=new t.AnimatedNumber(s),this.animatedNumber.init(e);var l=this.gaugeVisualProperties=this.getGaugeVisualProperties(),u=this.getAnimatedNumberProperties(l.radius,l.innerRadiusFactor,l.top,l.left);this.animatedNumberGrapicsContext.attr("transform",u.transformString),this.animatedNumber.onResizing(u.viewport)},r.prototype.update=function(e){this.currentViewport=e.viewport;var i=this.dataViews=e.dataViews;if(i&&i[0]){this.data=r.converter(i[0]),this.targetSettings=this.data.targetSettings,i[0]&&(i[0].single={value:this.data.total}),this.showTargetLabel=null!=this.targetSettings.target&&(this.currentViewport.width>r.MinWidthForTargetLabel||!this.showMinMaxLabelsOnBottom())&&this.showSideNumbersLabelText()&&this.data.dataLabelsSettings.show,this.setMargins(),this.gaugeVisualProperties=this.getGaugeVisualProperties(),this.drawViewPort(this.gaugeVisualProperties),this.updateInternal(e.suppressAnimations),this.updateCalloutValue(e.suppressAnimations);var a=t.getInvalidValueWarnings(i,!1,!1,!1);this.hostService.setWarnings(a)}},r.prototype.updateCalloutValue=function(e){if(this.data.calloutValueLabelsSettings.show){var t=this.getAnimatedNumberProperties(this.gaugeVisualProperties.radius,this.gaugeVisualProperties.innerRadiusFactor,this.gaugeVisualProperties.top,this.gaugeVisualProperties.left);this.animatedNumberGrapicsContext.attr("transform",t.transformString),this.animatedNumber.setTextColor(this.data.calloutValueLabelsSettings.labelColor);var i=this.data?this.data.total:null,a=this.getFormatter(this.data.calloutValueLabelsSettings,i);this.animatedNumber.setFormatter(a),this.animatedNumber.update({viewport:t.viewport,dataViews:this.dataViews,suppressAnimations:e})}else this.animatedNumber.clear()},r.prototype.onDataChanged=function(e){this.update({dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewport:this.currentViewport})},r.prototype.onResizing=function(t){this.update({dataViews:this.dataViews,suppressAnimations:!0,viewMode:e.ViewMode.View,viewport:t})},r.prototype.onStyleChanged=function(e){this.style=e,this.color=d3.scale.ordinal().range(e.colorPalette.dataColors.getSentimentColors().map(function(e){return e.value})),this.updateInternal(!0)},r.getValidSettings=function(e){var t=e.max===r.MAX_VALUE?r.DEFAULT_MAX:e.max,i=e.min===r.MIN_VALUE?r.DEFAULT_MIN:e.min,a=e.target;return{min:i,max:t,target:a}},r.getGaugeData=function(e){var i={max:r.MAX_VALUE,min:r.MIN_VALUE,target:void 0,total:0,tooltipItems:[]};if(e&&e.categorical&&e.categorical.values&&e.metadata&&e.metadata.columns){for(var a=e.categorical.values,n=e.metadata.columns,o=0;o<a.length;o++){var s=n[o],l=a[o].values[0]||0;s&&s.roles&&(s.roles[t.gaugeRoleNames.y]?(i.total=l,l&&i.tooltipItems.push({value:l,metadata:a[o]})):s.roles[t.gaugeRoleNames.minValue]?i.min=l:s.roles[t.gaugeRoleNames.maxValue]?i.max=l:s.roles[t.gaugeRoleNames.targetValue]&&(i.target=l,l&&i.tooltipItems.push({value:l,metadata:a[o]})))}var u=r.getGaugeObjectsProperties(e);u&&!$.isEmptyObject(u)&&r.overrideGaugeSettings(i,u)}return i},r.overrideGaugeSettings=function(e,t){$.isNumeric(t.min)&&(e.min=t.min),$.isNumeric(t.max)&&(e.max=t.max),$.isNumeric(t.target)&&(e.target=t.target)},r.converter=function(e){var i=r.getGaugeData(e),a=i.total,n=null,o=!1;e.metadata&&!_.isEmpty(e.metadata.columns)&&(n=t.valueFormatter.getFormatString(e.metadata.columns[0],r.formatStringProp,!0),null!=n&&(o=t.valueFormatter.getFormatMetadata(n).hasPercent)),a>0&&i.max===r.MAX_VALUE&&(i.max=o?r.DEFAULT_MAX:2*a);var s=r.getValidSettings(i),l=Math.max(a,s.min);l=Math.min(l,s.max);var u,c=s.min!==s.max?(l-s.min)/(s.max-s.min):0;if(e)if(i.tooltipItems.length>0)u=t.TooltipBuilder.createTooltipInfo(r.formatStringProp,null,null,null,null,i.tooltipItems);else{var h=e.categorical;if(h&&h.values&&h.values.length>0){var p=h.values[0],d=p.values[0];u=t.TooltipBuilder.createTooltipInfo(r.formatStringProp,h,null,d)}}return{percent:c,adjustedTotal:l,total:a,metadataColumn:r.getMetaDataColumn(e),targetSettings:s,tooltipInfo:u,dataLabelsSettings:r.convertDataLableSettings(e,"labels"),calloutValueLabelsSettings:r.convertDataLableSettings(e,"calloutValue")}},r.convertDataLableSettings=function(e,i){var a=e.metadata,r=t.dataLabelUtils.getDefaultGaugeLabelSettings();if(a){var n=a.objects;if(n){var o=n[i];t.dataLabelUtils.updateLabelSettingsFromLabelsObject(o,r)}}return r},r.getMetaDataColumn=function(e){if(e&&e.metadata&&e.metadata.columns)for(var t=0,i=e.metadata.columns.length;i>t;t++){var a=e.metadata.columns[t];if(a.isMeasure)return a}return null},r.prototype.initKpiBands=function(){if(this.settings.kpiBands.show)for(var e=this.kpiArcs=[],t=this.kpiArcPaths=[],i=this.mainGraphicsContext,a=0;3>a;a++){var r=d3.svg.arc().innerRadius(0).outerRadius(0).startAngle(0).endAngle(0);e.push(r);var n=i.append("path").attr("d",r);t.push(n)}},r.prototype.updateKpiBands=function(e,t,i,a){if(this.settings.kpiBands.show)for(var n=0;n<a.length;n++)this.kpiArcs[n].innerRadius(e*t-(r.KpiBandDistanceFromMainArc+this.settings.kpiBands.thickness)).outerRadius(e*t-r.KpiBandDistanceFromMainArc).startAngle(a[n].start).endAngle(a[n].end),this.kpiArcPaths[n].attr("fill",a[n].fill).attr("d",this.kpiArcs[n]).attr("transform",i)},r.prototype.removeTargetElements=function(){this.targetLine&&(this.targetLine.remove(),this.targetText.remove(),this.targetConnector.remove(),this.targetLine=this.targetConnector=this.targetText=null)},r.prototype.getTargetRatio=function(){var e=this.targetSettings,t=e.max-e.min;return 0!==t?(e.target-e.min)/t:0},r.prototype.updateTargetLine=function(e,t,i,a){this.targetLine||(this.targetLine=this.mainGraphicsContext.append("line"));var r=this.getTargetRatio()*Math.PI,n=a-e*Math.sin(r),o=i-e*Math.cos(r),s=a-t*Math.sin(r),l=i-t*Math.cos(r);this.targetLine.attr({x1:l,y1:s,x2:o,y2:n})},r.prototype.getAnimatedNumberProperties=function(e,i,a,n){var o=Math.PI/4,s=1,l=e*i,u=l-(this.settings.kpiBands.show?r.KpiBandDistanceFromMainArc+this.settings.kpiBands.thickness:0),c=u*Math.cos(o),h=u*Math.sin(o),p=a-h,d=n-c;p*=s,d*=s;var g=2*c,m={transformString:t.SVGUtil.translate(d,p),viewport:{height:h,width:g}};return m},r.prototype.getGaugeVisualProperties=function(){var e=this.currentViewport,i=this.margin,a=e.width-i.right-i.left,n=a/2,o=e.height-i.top-i.bottom,s=Math.min(n,o),l=r.InnerRadiusFactor,u=i.left+n,c=s+(o-s)/2+i.top,h=t.SVGUtil.translate(u,c),p=s*l,d={radius:s,innerRadiusOfArc:p,left:u,top:c,height:o,width:a,margin:i,transformString:h,innerRadiusFactor:l};return d},r.prototype.drawViewPort=function(e){var t=this.settings.kpiBands.separationRadians,i=r.InnerRadiusFactor,a=this.backgroundArc,n=this.color,o=[{fill:n(0),start:-Math.PI/2,end:-Math.PI/2+Math.PI/4-t},{fill:n(1),start:-Math.PI/2+1*Math.PI/4+t,end:-Math.PI/2+3*Math.PI/4-t},{fill:n(2),start:-Math.PI/2+3*Math.PI/4+t,end:Math.PI/2}],s=e.radius,l=e.transformString;this.updateKpiBands(s,i,l,o),a.innerRadius(s*i).outerRadius(s).startAngle(-Math.PI/2).endAngle(Math.PI/2),this.backgroundArcPath.attr("d",a).attr("transform",l);var u=this.foregroundArc;u.innerRadius(s*i).outerRadius(s).startAngle(-Math.PI/2),this.foregroundArcPath.datum({endAngle:this.lastAngle}).attr("transform",l).attr("d",u);var c=e.innerRadiusOfArc,h=e.left,p=e.top,d=e.margin,g=e.height,m=this.targetSettings;this.settings.targetLine.show&&null!=m.target?m.min>m.target||m.max<m.target?this.removeTargetElements():(this.updateTargetLine(s,c,h,p),this.appendTargetTextAlongArc(s,g,e.width,d)):this.removeTargetElements(),this.svg.attr("height",this.currentViewport.height).attr("width",this.currentViewport.width)},r.prototype.createTicks=function(){for(var e=this.settings,t=this.targetSettings,i=t.max-t.min,a=e.labels.count,r=i/a,n=[],o=this.getFormatter(this.data.dataLabelsSettings,t.max),s=0;a+1>s;s++)n.push(o.format(t.min+s*r));return n},r.prototype.updateInternal=function(e){var i=this.gaugeVisualProperties.height,a=this.gaugeVisualProperties.width,r=this.gaugeVisualProperties.radius,n=this.margin,o=t.AnimatorCommon.GetAnimationDuration(this.animator,e),s=this.data,l=this.lastAngle=-Math.PI/2+Math.PI*s.percent,u=this.createTicks();this.foregroundArcPath.transition().ease(this.settings.transition.ease).duration(o).call(this.arcTween,[l,this.foregroundArc]),this.appendTextAlongArc(u,r,i,a,n),this.updateVisualConfigurations(),this.updateVisualStyles(),this.tooltipsEnabled&&t.TooltipManager.addTooltip(this.foregroundArcPath,function(e){return s.tooltipInfo})},r.prototype.updateVisualStyles=function(){var e=this.data.dataLabelsSettings.labelColor||this.style.labelText.color.value;this.mainGraphicsContext.selectAll("text").style({fill:e})},r.prototype.updateVisualConfigurations=function(){var e=this.settings;this.mainGraphicsContext.select("line").attr({stroke:e.targetLine.color,"stroke-width":e.targetLine.thickness}),this.backgroundArcPath.style("fill",e.arcColors.background),this.foregroundArcPath.style("fill",e.arcColors.foreground)},r.prototype.appendTextAlongArc=function(e,i,n,o,s){if(this.svg.selectAll(r.LabelText.selector).remove(),this.data.dataLabelsSettings.show)for(var l=e.length,u=l-1,c=i+(n-i)/2+s.top,h=this.showMinMaxLabelsOnBottom(),p=a.fromPoint(this.data.dataLabelsSettings.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),d=this.settings.labels.padding,g=0;l>g;g++)if(Math.floor(l/2)!==g&&this.showSideNumbersLabelText()){var m=s.left+o/2-i*Math.cos(Math.PI*g/u),f=c-i*Math.sin(Math.PI*g/u),y=void 0,v=2*g>l,b=!1;!h||0!==g&&g!==l-1?(y=v?"start":"end",m+=d*(v?1:-1)):(b=!0,f+=d/2,y=v?"end":"start");var C=this.mainGraphicsContext.append("text").attr({x:m,y:f,dy:b?p:0,"class":r.LabelText["class"]}).style({"text-anchor":y,"font-size":p}).text(e[g]);b||this.truncateTextIfNeeded(C,m,v)}},r.prototype.truncateTextIfNeeded=function(i,a,r){var n=r?this.currentViewport.width-a:a;i.call(t.AxisHelper.LabelLayoutStrategy.clip,n,e.TextMeasurementService.svgEllipsis)},r.prototype.getFormatter=function(e,i){var a=0===e.displayUnits?i:null,n=t.valueFormatter.getFormatString(this.data.metadataColumn,r.formatStringProp),o=t.dataLabelUtils.getLabelPrecision(e.precision,n),s=t.dataLabelUtils.getOptionsForLabelFormatter(e,n,a,o);return s.formatSingleValues=e.displayUnits>0?!1:!0,t.valueFormatter.create(s)},r.prototype.appendTargetTextAlongArc=function(e,t,i,a){var n=this.targetSettings,o=n.target,s=this.getTargetRatio(),l=e+(t-e)/2+a.top,u=s>.5,c=this.settings.labels.padding,h=u?"start":"end",p=this.getFormatter(this.data.dataLabelsSettings,n.max),d=Math.asin(r.MinDistanceFromBottom/e)/Math.PI,g=d>s||s>1-d?u?1-d:d:s,m=a.left+i/2-(e+c)*Math.cos(Math.PI*g),f=l-(e+c)*Math.sin(Math.PI*g);this.targetText||(this.targetText=this.mainGraphicsContext.append("text").classed(r.TargetText["class"],!0)),this.targetText.attr({x:m,y:f}).style({"text-anchor":h,display:this.showTargetLabel?"":"none","font-size":this.style.labelText.fontSize}).text(p.format(o)),this.truncateTextIfNeeded(this.targetText,m,u),this.targetConnector||(this.targetConnector=this.mainGraphicsContext.append("line").classed(r.TargetConnector["class"],!0)),s===g?this.targetConnector.style("display","none"):this.targetConnector.attr({x1:a.left+i/2-e*Math.cos(Math.PI*s),y1:l-e*Math.sin(Math.PI*s),x2:m,y2:f}).style({"stroke-width":this.settings.targetLine.thickness,stroke:this.settings.targetLine.color,display:""})},r.prototype.arcTween=function(e,t){e.attrTween("d",function(e){var i=d3.interpolate(e.endAngle,t[0]);return function(a){return e.endAngle=i(a),t[1](e)}})},r.prototype.showMinMaxLabelsOnBottom=function(){if(this.currentViewport.height>this.currentViewport.width)return!0;if(this.data&&this.gaugeVisualProperties){var i=this.createTicks(),r=(this.currentViewport.width-2*this.gaugeVisualProperties.radius)/2,n=r-this.settings.labels.padding,o=e.TextMeasurementService.getMeasurementProperties($(this.svg.node()));o.fontSize=a.fromPoint(this.data.dataLabelsSettings.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt);for(var s,l=0,u=[i[0],i[i.length-1]];l<u.length;l++){var c=u[l];if(o.text=c,s=e.TextMeasurementService.measureSvgTextWidth(o),s>n)return!0}}return!1},r.prototype.setMargins=function(){if(this.gaugeSmallViewPortProperties&&this.gaugeSmallViewPortProperties.smallGaugeMarginsOnSmallViewPort&&this.currentViewport.height<this.gaugeSmallViewPortProperties.MinHeightGaugeSideNumbersVisible){var e=this.gaugeSmallViewPortProperties.GaugeMarginsOnSmallViewPort;return void(this.margin={top:e,bottom:e,left:e,right:e})}if(this.margin={top:r.DefaultTopBottomMargin,bottom:r.DefaultTopBottomMargin,left:r.DefaultLeftRightMargin,right:r.DefaultLeftRightMargin},!this.showSideNumbersLabelText()||this.showMinMaxLabelsOnBottom()){var i=this.targetSettings;if(this.showTargetLabel){var n=(i.target-i.min)/(i.max-i.min);n>.5?this.margin.left=r.ReducedLeftRightMargin:this.margin.right=r.ReducedLeftRightMargin}else this.margin.left=this.margin.right=r.ReducedLeftRightMargin}var o=0;this.data&&this.data.dataLabelsSettings&&this.data.dataLabelsSettings.fontSize&&this.data.dataLabelsSettings.fontSize>=t.NewDataLabelUtils.DefaultLabelFontSizeInPt&&(o=a.fromPointToPixel(this.data.dataLabelsSettings.fontSize-t.NewDataLabelUtils.DefaultLabelFontSizeInPt)),0!==o&&(this.margin.bottom+=o,this.margin.left+=o,this.margin.right+=o)},r.prototype.showSideNumbersLabelText=function(){return this.gaugeSmallViewPortProperties&&this.gaugeSmallViewPortProperties.hideGaugeSideNumbersOnSmallViewPort&&this.currentViewport.height<this.gaugeSmallViewPortProperties.MinHeightGaugeSideNumbersVisible?!1:!0},r.MIN_VALUE=-(1/0),r.MAX_VALUE=+(1/0),r.MinDistanceFromBottom=10,r.MinWidthForTargetLabel=150,r.DefaultTopBottomMargin=20,r.DefaultLeftRightMargin=45,r.ReducedLeftRightMargin=15,r.DEFAULT_MAX=1,r.DEFAULT_MIN=0,r.VisualClassName="gauge",r.DefaultStyleProperties={transition:{ease:"bounce"},arcColors:{background:"#e9e9e9",foreground:"#00B8AA"},targetLine:{show:!0,color:"#666666",thickness:2},labels:{count:2,padding:5,fontSize:t.NewDataLabelUtils.DefaultLabelFontSizeInPt},kpiBands:{show:!1,separationRadians:Math.PI/128,thickness:5}},r.DefaultTargetSettings={min:0,max:1,target:void 0},r.InnerRadiusFactor=.7,r.KpiBandDistanceFromMainArc=2,r.MainGaugeGroupClassName="mainGroup",r.LabelText=i("labelText"),r.TargetConnector=i("targetConnector"),r.TargetText=i("targetText"),r.formatStringProp={objectName:"general",propertyName:"formatString"},r}();t.Gauge=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=jsCommon.Utility,i=function(){function i(){this.scalingType=e.imageScalingType.normal}return i.prototype.init=function(e){this.element=e.element},i.prototype.enumerateObjectInstances=function(e){switch(e.objectName){case"imageScaling":return this.enumerateImageScaling()}return null},i.prototype.enumerateImageScaling=function(){return[{selector:null,objectName:"imageScaling",properties:{imageScalingType:this.scalingType}}]},i.prototype.update=function(i){var a=i.dataViews;if(a&&0!==a.length){var r=a[0].metadata.objects;if(r&&r.general){var n=this.imageBackgroundElement;n||(n=$("<div class='imageBackground' />"),this.imageBackgroundElement=n,this.imageBackgroundElement.appendTo(this.element));var o=i.viewport;n.css("height",o.height),r.imageScaling?this.scalingType=r.imageScaling.imageScalingType.toString():this.scalingType=e.imageScalingType.normal;var s=r.general.imageUrl;t.isValidImageDataUrl(s)&&n.css("backgroundImage","url("+s+")"),this.scalingType===e.imageScalingType.fit?n.css("background-size","100% 100%"):this.scalingType===e.imageScalingType.fill?n.css("background-size","cover"):n.css("background-size","contain")}}},i}();e.ImageVisual=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(e,i,a){switch(a){case t.kpiDirection.positive:if(i>e)return n.status.DROP;break;case t.kpiDirection.negative:if(e>i)return n.status.DROP}return n.status.INCREASE}function a(e){switch(e){case n.status.NOGOAL:return n.statusColor.NOGOAL;case n.status.INCREASE:return n.statusColor.GREEN;case n.status.DROP:return n.statusColor.RED}}function r(e){switch(e){case n.status.NOGOAL:return n.textStatusColor.NOGOAL;case n.status.INCREASE:return n.textStatusColor.GREEN;case n.status.DROP:return n.textStatusColor.RED}}var n=function(){function n(){}return n.prototype.init=function(e){this.svg=d3.select(e.element.get(0)).append("svg");var t=this.mainGroupElement=this.svg.append("g");this.mainGroupElement2=this.svg.append("g"),this.mainRect=t.append("rect"),this.areaFill=t.append("path"),this.kpiArrow=t.append("path"),this.kpiActualText=t.append("text"),this.host=e.host},n.prototype.update=function(e){if(e.dataViews&&e.dataViews[0]){var t=this.dataView=e.dataViews[0],i=e.viewport;if(!t.categorical||!t.categorical.values||t.categorical.values.length<1)return void this.svg.attr("visibility","hidden");this.svg.attr("visibility","visible");var a=n.converter(t,i,n.getProp_KPIFormat(t),n.getProp_KPIDirection(t));this.render(a,i)}},n.prototype.render=function(e,o){if(0===e.dataPoints.length)return void this.svg.attr("visibility","hidden");if(this.svg.attr({height:o.height,width:o.width}),this.setShowDataMissingWarning(!(e.indicatorExists&&e.trendExists)),!e.historyExists||!e.indicatorExists||!e.trendExists)return this.mainGroupElement2.attr("visibility","hidden"),void this.areaFill.attr("visibility","hidden");var s=n.status.NOGOAL;e.targetExists&&e.indicatorExists&&e.trendExists&&(s=i(e.actual,e.goal,e.directionType));var l=e.formattedValue+e.format;this.kpiActualText.attr("x",.5*o.width).attr("y",.5*o.height+n.actualTextConsts.VERTICAL_OFFSET_FROM_HALF_HEIGHT).attr("fill",r(s)).attr("style","font-family:wf_standard-font_light,helvetica,arial,sans-serif;font-size:60px").attr("text-anchor","middle").text(l),this.mainGroupElement2.attr("visibility","visible");var u=this.mainGroupElement2.selectAll("circle").data(e.dataPoints);this.mainGroupElement2.selectAll("rect").remove(),t.TooltipManager.addTooltip(u,function(e){return e.data.tooltipInfo});var c=d3.svg.area().x(function(e){return e.x}).y0(o.height).y1(function(e){return e.y});this.areaFill.attr("d",c(e.dataPoints)).attr("stroke","none").attr("visibility","visible").attr("fill",a(s))},n.prototype.setShowDataMissingWarning=function(e){this.host.setWarnings(e?[new t.VisualKPIDataMissingWarning]:[])},n.getDefaultFormatSettings=function(){return{labelSettings:t.dataLabelUtils.getDefaultLabelSettings(!0,t.Card.DefaultStyle.value.color),textSize:10,wordWrap:!1}},n.getMetaDataColumn=function(e){if(e&&e.metadata&&e.metadata.columns)for(var t=0,i=e.metadata.columns;t<i.length;t++){var a=i[t];if(a.isMeasure)return a}},n.getFormatString=function(e){return t.valueFormatter.getFormatString(e,t.AnimatedText.formatStringProp)},n.getProp_KPIFormat=function(t){return t.metadata?e.DataViewObjects.getValue(t.metadata.objects,n.kpiFormatStringProp,""):""},n.getProp_KPIDirection=function(i){return i.metadata?e.DataViewObjects.getValue(i.metadata.objects,n.directionTypeStringProp,t.kpiDirection.positive):t.kpiDirection.positive},n.getFormattedValue=function(i,a){var r=n.getDefaultFormatSettings(),o=r.labelSettings,s=0===o.displayUnits,l=t.valueFormatter.create({format:n.getFormatString(i),value:o.displayUnits,precision:o.precision,displayUnitSystemType:e.DisplayUnitSystemType.WholeUnits,formatSingleValues:s?!0:!1,allowFormatBeautification:!0,columnType:i?i.type:void 0});return l.format(a)},n.converter=function(e,i,a,r){var o=[],s=e.categorical,l=n.getMetaDataColumn(e),u=!0;void 0===e.categorical.categories&&(u=!1);var c,h;u&&(c=s.categories[0],h=c.values);var p=s.values,d=[],g=[],m=!1;p.length>1&&(m=!0);for(var f=!1,y=!1,v=e.metadata.columns,b=0;b<v.length;b++)t.DataRoleHelper.hasRole(v[b],"Indicator")&&(f=!0),t.DataRoleHelper.hasRole(v[b],"TrendLine")&&(y=!0);for(var b=0,C=p[0].values.length;C>b;b++){var x,S;m?(t.DataRoleHelper.hasRole(p[0].source,"Indicator")?(x=p[0].values[b],S=p[1].values[b]):(x=p[1].values[b],S=p[0].values[b]),g.push(S)):x=p[0].values[b],d.push(x)}for(var w=Math.max.apply(Math,d),D=Math.min.apply(Math,d),P=i.height*n.trendAreaFilePercentage,b=0;b<d.length;b++){var L=P*(d[b]-D)/(w-D),_="actual "+n.getFormattedValue(l,d[b]);m&&(_+=" ; Target "+n.getFormattedValue(l,g[b]));var N="",T=null;u&&(N=h[b],T=t.SelectionId.createWithId(c.identity[b]).getSelector()),o.push({x:b*i.width/(d.length-1),y:i.height-L-.1*i.height,actual:d[b],goal:g[b],selector:T,tooltipInfo:[{displayName:N,value:_}]})}var V,M;o.length>0&&(V=o[o.length-1].actual,M=o[o.length-1].goal),1===o.length&&(u=!1);var A=n.getFormattedValue(l,V);return{dataPoints:o,format:a,directionType:r,actual:V,goal:M,targetExists:m,historyExists:u,indicatorExists:f,trendExists:y,formattedValue:A}},n.getColumnsByRole=function(e,i){for(var a=[],r=0;r<e.length;r++)t.DataRoleHelper.hasRole(e[r].source,i)&&a.push(e[r].values);return a},n.prototype.enumerateObjectInstances=function(e){var t=[],i=this.dataView;switch(e.objectName){case"general":var a={objectName:"general",displayName:"General",selector:null,properties:{kpiFormat:n.getProp_KPIFormat(i)}};t.push(a);break;case"status":return[{selector:null,objectName:"status",properties:{direction:n.getProp_KPIDirection(i)}}];case"format":return[{selector:null,objectName:"format",properties:{show:!0,kpiFormat:n.getProp_KPIFormat(i)}}]}return t},n.prototype.destroy=function(){this.svg=null},n.kpiFormatStringProp={objectName:"format",propertyName:"kpiFormat"},n.directionTypeStringProp={objectName:"status",propertyName:"direction"},n.status={INCREASE:"increase",DROP:"drop",NOGOAL:"no-goal"},n.textStatusColor={RED:"#ee0000",GREEN:"#3bb44a",YELLOW:"#f2b311",NOGOAL:"#212121"},n.statusColor={RED:"#fef0f0",GREEN:"#ebf7ec",YELLOW:"#fdf9e7",NOGOAL:"#f2f2f2"},n.statusBandingType={Below:"BELOW",Above:"ABOVE"},n.actualTextConsts={VERTICAL_OFFSET_FROM_HALF_HEIGHT:20,FONT_WIDTH_FACTOR:14,RIGHT_MARGIN:10},n.trendAreaFilePercentage=.34,n}();t.KPIStatusWithHistory=n}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=jsCommon.EnumExtensions,r=jsCommon.CssConstants.createClassAndSelector,n=jsCommon.PixelConverter;!function(e){e[e.none=0]="none",e[e.equal=1]="equal",e[e.lesser=2]="lesser",e[e.greater=3]="greater"}(i||(i={}));var o=function(){function i(e){this.isScrollable=e.isScrollable?e.isScrollable:!1,this.tooltipsEnabled=e.tooltipsEnabled,this.lineType=e.chartType?e.chartType:1,this.interactivityService=e.interactivityService,this.animator=e.animator,this.seriesLabelFormattingEnabled=e.seriesLabelFormattingEnabled,this.lineChartLabelDensityEnabled=e.lineChartLabelDensityEnabled}return i.customizeQuery=function(e){var i=e.dataViewMappings[0];if(i&&i.categorical&&i.categorical.categories){var a=i.categorical.categories,r=a["for"]["in"].items;
if(!_.isEmpty(r)){var n,o=r[0].type;i.metadata&&(n=i.metadata.objects),t.CartesianChart.getIsScalar(n,t.lineChartProps.categoryAxis.axisType,o)&&(a.dataReductionAlgorithm={sample:{}})}}},i.getSortableRoles=function(e){var i=e.dataViewMappings[0];if(!i||!i.categorical||!i.categorical.categories)return null;var a=i.categorical.categories,r=a["for"]["in"].items;if(!_.isEmpty(r)){var n,o=r[0].type;if(i.metadata&&(n=i.metadata.objects),!t.CartesianChart.getIsScalar(n,t.lineChartProps.categoryAxis.axisType,o))return["Category"]}return null},i.converter=function(i,a,r,n,o,s,l){var u=i.categorical,c=u.categories&&u.categories.length>0?u.categories[0]:{source:void 0,values:[a],identity:void 0},h=t.CartesianHelper.getCategoryAxisProperties(i.metadata);n=t.CartesianHelper.isScalar(n,h),u=t.ColumnUtil.applyUserMinMax(n,u,h);var p,d=t.lineChartProps.general.formatString,g=t.AxisHelper.getCategoryValueType(c.source,n),m=t.AxisHelper.isDateTime(g),f=c.values,y=[],v=[],b=u.values?u.values.length:0,C=!(!u.values||!u.values.source),x=u.values,S=t.dataLabelUtils.getDefaultLineChartLabelSettings(l);if(i.metadata&&i.metadata.objects){var w=i.metadata.objects;p=e.DataViewObjects.getFillColor(w,t.lineChartProps.dataPoint.defaultColor);var D=w.labels;t.dataLabelUtils.updateLineChartLabelSettingsFromLabelsObject(D,S)}var P,L=new t.ColorHelper(r,t.lineChartProps.dataPoint.fill,p);i.categorical.values&&(P=i.categorical.values.grouped());var N;s&&(N=u.values&&u.values.length>0?_.times(u.values[0].values.length,function(){return 0}):[]);for(var T=0;b>T;T++){var V=u.values[T],M=V.source,A=[],R=P[T],I=C&&R?t.SelectionId.createWithIdAndMeasure(R.identity,V.source.queryName):t.SelectionId.createWithMeasure(V.source.queryName),F=I.getKey(),E=this.getColor(L,C,x,P,T,R),O=void 0;if(!C){var G=P&&P.length>0&&P[0].values?P[0].values[T]:null,H=G&&G.source&&G.source.objects?G.source.objects.labels:null;H&&(O=e.Prototype.inherit(S),t.dataLabelUtils.updateLineChartLabelSettingsFromLabelsObject(H,O))}for(var z=O?O:S,k=V.highlights&&V.highlights.length>0,B=k?V.highlights:V.values,W=0,U=B.length;U>W;W++){var j=f[W],q=t.AxisHelper.normalizeNonFiniteNumber(B[W]);if(!n||null!=j&&null!=q){var K=i.categorical,Q=t.TooltipBuilder.createTooltipInfo(d,K,j,q,null,null,T),Y={categoryValue:m&&j?j.getTime():j,value:q,categoryIndex:W,seriesIndex:T,tooltipInfo:Q,selected:!1,identity:I,key:JSON.stringify({ser:F,catIdx:W}),labelFill:z.labelColor,labelFormatString:M.format,labelSettings:z};s&&(N[W]+=q,Y.stackedValue=N[W]),c.objects&&c.objects[W]&&(Y.pointColor=e.DataViewObjects.getFillColor(c.objects[W],t.lineChartProps.dataPoint.fill)),A.push(Y),y[W]||(y[W]=Y)}}o&&o.applySelectionStateToData(A),A.length>0&&v.push({displayName:M.displayName,key:F,lineIndex:T,color:E,xCol:c.source,yCol:V.source,data:A,identity:I,selected:!1,labelSettings:O})}h=t.CartesianHelper.getCategoryAxisProperties(i.metadata);var X=t.CartesianHelper.getValueAxisProperties(i.metadata),$=[];if(x)for(var Z=0;Z<x.length;Z++)x[Z]&&x[Z].source&&x[Z].source.displayName&&$.push({displayName:x[Z].source.displayName});var J=t.converterHelper.createAxesLabels(h,X,c.source,$);return o&&o.applySelectionStateToData(v),{series:v,isScalar:n,dataLabelsSettings:S,axesLabels:{x:J.xAxisLabel,y:J.yAxisLabel},hasDynamicSeries:C,categoryMetadata:c.source,categories:f,categoryData:y}},i.getInteractiveLineChartDomElement=function(e){return e.children("svg").get(0)},i.getColor=function(e,t,i,a,r,n){var o;return t?a&&a[r]&&(o=a[r].objects):i[r]&&(o=i[r].source.objects),t&&n?e.getColorForSeriesValue(o,i.identityFields,n.name):e.getColorForMeasure(o,i[r].source.queryName)},i.createStackedValueDomain=function(e){if(0===e.length)return null;var t=d3.min(e,function(e){return d3.min(e.data,function(e){return e.stackedValue})}),i=d3.max(e,function(e){return d3.max(e.data,function(e){return e.stackedValue})});return[t,i]},i.prototype.init=function(e){var a=this;this.options=e;var r=this.element=e.element;this.cartesainSVG=e.svg,this.host=e.host,this.currentViewport=e.viewport,this.colors=e.style.colorPalette.dataColors,this.isInteractiveChart=e.interactivity&&e.interactivity.isInteractiveLegend,this.cartesianVisualHost=e.cartesianHost;var n=e.chartType;this.isComboChart=10===n||13===n||14===n,r.addClass(i.ClassName);var o=e.svg,s=this.mainGraphicsSVG=o.append("svg").classed("lineChartSVG",!0);this.isComboChart||this.isInteractiveChart||(this.overlayRect=s.append(i.RectOverlayName).style("opacity",t.SVGUtil.AlmostZero)),this.mainGraphicsContext=s.append("g").classed(i.MainGraphicsContextClassName,!0),this.hoverLineContext=o.append("g").classed("hover-line",!0),this.hoverLineContext.append(i.LineElementName).attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0);var l=this.hoverLine=this.hoverLineContext.select(i.LineElementName);if(this.isInteractiveChart&&l.classed("interactive",!0),l.style("opacity",t.SVGUtil.AlmostZero),this.selectionCircles=[],this.xAxisProperties={axis:null,scale:null,axisType:null,formatter:null,graphicsContext:null,values:null,axisLabel:null,isCategoryAxis:!0},this.isInteractiveChart){var u=i.getInteractiveLineChartDomElement(this.element),c=function(){var e=d3.mouse(u)[0],t=a.findIndex(e-a.margin.left);a.selectColumn(t)},h=d3.behavior.drag().origin(Object).on("drag",c);d3.select(u).call(h),d3.select(u).on("click",c)}},i.prototype.setData=function(r){if(this.data={series:[],dataLabelsSettings:t.dataLabelUtils.getDefaultLineChartLabelSettings(this.isComboChart),axesLabels:{x:null,y:null},hasDynamicSeries:!1,categories:[],categoryMetadata:void 0,categoryData:[]},r.length>0){var n=r[0];if(n&&n.categorical){var o=this.dataViewCat=n.categorical,s=o.categories,l=e.ValueType.fromDescriptor({text:!0});s&&s.length>0&&s[0].source&&s[0].source.type&&(l=s[0].source.type);var u=i.converter(n,t.valueFormatter.format(null),this.cartesianVisualHost.getSharedColors(),t.CartesianChart.getIsScalar(n.metadata?n.metadata.objects:null,t.lineChartProps.categoryAxis.axisType,l),this.interactivityService,a.hasFlag(this.lineType,16),this.isComboChart);this.data=u}}},i.prototype.calculateLegend=function(){return this.createLegendDataPoints(0)},i.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||this.data.series&&this.data.series.length>1)},i.prototype.setFilteredData=function(t,a){var r=a-t,n=this.clippedData=e.Prototype.inherit(this.data);return n.series=i.sliceSeries(n.series,r,t),n.categories=n.categories.slice(t,a),n},i.prototype.calculateAxesProperties=function(r){var n=this,o=this.data,s=r.viewport,l=r.margin;this.currentViewport=s,this.margin=l;var u=o.series&&o.series.length>0?o.series[0].data.length:0,c=t.CartesianChart.MinOrdinalRectThickness,h=this.data.isScalar,p=this.getPreferredPlotArea(h,u,c);if(p.width===this.currentViewport.width&&(p.width-=l.left+l.right),p.height-=l.top+l.bottom,this.clippedData=void 0,o&&!h&&!this.isScrollable){var d=this.getCategoryCount(u),g=Math.min(u,d);g!==u&&(o=this.clippedData=e.Prototype.inherit(o),this.clippedData.series=i.sliceSeries(o.series,g))}var m,f;o.series&&o.series.length>0&&(m=o.series[0].xCol,f=o.series[0].yCol);var y=a.hasFlag(this.lineType,16)?i.createStackedValueDomain(o.series):t.AxisHelper.createValueDomain(o.series,!1),v=r.valueAxisScaleType===t.axisScale.log&&!t.AxisHelper.isLogScalePossible(y),b=t.AxisHelper.combineDomain(r.forcedYDomain,y);this.yAxisProperties=t.AxisHelper.createAxis({pixelSpan:p.height,dataDomain:b,metaDataColumn:f,formatString:t.valueFormatter.getFormatString(f,t.lineChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!0,forcedTickCount:r.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:r.valueAxisScaleType,axisDisplayUnits:r.valueAxisDisplayUnits,axisPrecision:r.valueAxisPrecision});var C=t.AxisHelper.createDomain(o.series,this.xAxisProperties.axisType,this.data.isScalar,r.forcedXDomain),x=r.valueAxisScaleType===t.axisScale.log&&!t.AxisHelper.isLogScalePossible(C);return this.xAxisProperties=t.AxisHelper.createAxis({pixelSpan:p.width,dataDomain:C,metaDataColumn:m,formatString:t.valueFormatter.getFormatString(m,t.lineChartProps.general.formatString),outerPadding:this.data.isScalar?i.ScalarOuterPadding:0,isScalar:this.data.isScalar,isVertical:!1,forcedTickCount:r.forcedTickCount,useTickIntervalForDisplayUnits:!0,getValueFn:function(e,i){return t.CartesianHelper.lookupXValue(n.data,e,i,n.data.isScalar)},categoryThickness:t.CartesianChart.getCategoryThickness(o.series,u,this.getAvailableWidth(),C,h),isCategoryAxis:!0,scaleType:r.categoryAxisScaleType,axisDisplayUnits:r.categoryAxisDisplayUnits,axisPrecision:r.categoryAxisPrecision}),this.xAxisProperties.axisLabel=r.showCategoryAxisLabel?o.axesLabels.x:null,this.yAxisProperties.axisLabel=r.showValueAxisLabel?o.axesLabels.y:null,this.xAxisProperties.hasDisallowedZeroInDomain=x,this.yAxisProperties.hasDisallowedZeroInDomain=v,[this.xAxisProperties,this.yAxisProperties]},i.prototype.enumerateObjectInstances=function(e,t){switch(t.objectName){case"dataPoint":this.enumerateDataPoints(e);break;case"labels":this.enumerateDataLabels(e)}},i.prototype.enumerateDataPoints=function(e){var i=this.data;if(i&&i.series&&0!==i.series.length)for(var a=t.lineChartProps.general.formatString,r=i.series,n=r.length,o=0;n>o;o++){var s=t.ColorHelper.normalizeSelector(r[o].identity.getSelector()),l=t.converterHelper.getFormattedLegendLabel(r[o].yCol,this.dataViewCat.values,a);e.pushInstance({objectName:"dataPoint",displayName:l,selector:s,properties:{fill:{solid:{color:i.defaultSeriesColor||r[o].color}}}})}},i.prototype.enumerateDataLabels=function(e){var i=this.data,a=this.data.dataLabelsSettings,r=i.series.length,n=this.showLabelPerSeries();if(this.lineChartLabelDensityEnabled?t.dataLabelUtils.enumerateLineChartDataLabels(this.getLabelSettingsOptions(e,a,null,n),a.labelDensity):t.dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(e,a,null,n)),0!==r&&n&&a.showLabelPerSeries)for(var o=0;r>o;o++){var s=i.series[o],l=s.labelSettings?s.labelSettings:this.data.dataLabelsSettings;e.pushContainer({displayName:s.displayName}),this.lineChartLabelDensityEnabled?t.dataLabelUtils.enumerateLineChartDataLabels(this.getLabelSettingsOptions(e,l,s),l.labelDensity):t.dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(e,l,s)),e.popContainer()}},i.prototype.getLabelSettingsOptions=function(e,t,i,a){return{enumeration:e,dataLabelsSettings:t,show:!0,displayUnits:!0,precision:!0,selector:i&&i.identity?i.identity.getSelector():null,showAll:a,fontSize:!0,labelDensity:!0}},i.prototype.overrideXScale=function(e){this.xAxisProperties=e},i.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},i.prototype.render=function(e){var i,a=t.AnimatorCommon.GetAnimationDuration(this.animator,e);return i=this.isInteractiveChart?this.renderOld(a):this.renderNew(a),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),i},i.prototype.renderNew=function(e){var r=this,n=this.clippedData?this.clippedData:this.data;if(n){var o,s=a.hasFlag(this.lineType,16),l=this.margin,u=this.currentViewport,c=u.height-(l.top+l.bottom),h=u.width-(l.left+l.right),p=this.xAxisProperties.scale,d=this.yAxisProperties.scale,g=i.HorizontalShift+this.extraLineShift(),m=this.interactivityService&&this.interactivityService.hasSelection(),f=a.hasFlag(this.lineType,2)||a.hasFlag(this.lineType,16),y=d.domain(),v=function(e){return p(r.getXValue(e))+g},b=s?function(e){return d(Math.max(e.stackedValue-e.value,y[0]))}:function(e){return c},C=s?function(e){return d(e.stackedValue)}:function(e){return d(e.value)};f&&(o=d3.svg.area().x(v).y0(b).y1(C).defined(function(e){return null!==e.value}));var x=d3.svg.line().x(v).y(C).defined(function(e){return null!==e.value});a.hasFlag(this.lineType,4)&&(x.interpolate("basis"),o&&o.interpolate("basis")),this.mainGraphicsSVG.attr("height",c).attr("width",h);var S=void 0;f&&(S=this.mainGraphicsContext.selectAll(i.CategoryAreaSelector.selector).data(n.series,function(e){return e.identity.getKey()}),S.enter().append(i.PathElementName).classed(i.CategoryAreaSelector["class"],!0),S.style("fill",function(e){return e.color}).style("fill-opacity",function(e){return m&&!e.selected?i.DimmedAreaFillOpacity:i.AreaFillOpacity}).transition().ease("linear").duration(e).attr("d",function(e){return o(e.data)}),S.exit().remove());var w=this.mainGraphicsContext.selectAll(".line").data(n.series,function(e){return e.identity.getKey()});w.enter().append(i.PathElementName).classed("line",!0),w.style("stroke",function(e){return e.color}).style("stroke-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,m,!1)}).transition().ease("linear").duration(e).attr("d",function(e){return x(e.data)}),w.exit().remove();var D;this.interactivityService&&(D=this.mainGraphicsContext.selectAll(".interactivity-line").data(n.series,function(e){return e.identity.getKey()}),D.enter().append(i.PathElementName).classed("interactivity-line",!0),D.attr("d",function(e){return x(e.data)}),D.exit().remove());var P=this.mainGraphicsContext.selectAll(i.CategorySelector.selector).data(n.series,function(e){return e.identity.getKey()});P.enter().append("g").classed(i.CategorySelector["class"],!0),P.exit().remove();var L=P.selectAll(i.CategoryValuePoint.selector).data(function(e){return e.data.filter(function(t,i){return r.shouldDrawCircle(e,i)})},function(e){return e.key});L.enter().append(i.CircleElementName).classed(i.CategoryValuePoint["class"],!0),L.style("fill",function(){var e=d3.select(this.parentNode).datum();return e.color}).style("fill-opacity",function(){var e=d3.select(this.parentNode).datum();return t.ColumnUtil.getFillOpacity(e.selected,!1,m,!1)}).transition().duration(e).attr({cx:function(e,t){return p(r.getXValue(e))+g},cy:function(e,t){return d(e.value)},r:i.CircleRadius}),L.exit().remove();var N=P.selectAll(i.CategoryPointSelector.selector).data(function(e){return _.filter(e.data,function(e){return null!=e.pointColor})},function(e){return e.key});N.enter().append(i.CircleElementName).classed(i.CategoryPointSelector["class"],!0),N.style("fill",function(e){return e.pointColor}).transition().duration(e).attr({cx:function(e){return p(r.getXValue(e))},cy:function(e){return d(e.value)},r:i.PointRadius}),N.exit().remove();var T;if(n.dataLabelsSettings.show&&(T=this.createLabelDataPoints()),this.tooltipsEnabled)if(this.isComboChart){var V=function(e){var t=e.elementCoordinates[0];return r.getTooltipInfoByPathPointX(e,t)};D&&t.TooltipManager.addTooltip(D,V,!0),t.TooltipManager.addTooltip(L,function(e){return e.data.tooltipInfo},!0),t.TooltipManager.addTooltip(N,function(e){return e.data.tooltipInfo},!0)}else{this.overlayRect.attr({x:0,width:h,height:c});var V=function(e){var t=e.elementCoordinates[0],i=r.findIndex(t),a=r.selectColumnForTooltip(i);return r.getSeriesTooltipInfo(a)},M=function(){r.hoverLine.style("opacity",t.SVGUtil.AlmostZero),r.hoverLineContext.selectAll(i.HoverLineCircleDot.selector).remove()};t.TooltipManager.addTooltip(this.mainGraphicsSVG,V,!0,M)}var A=void 0,R=void 0;if(this.interactivityService){A=n.series.slice();for(var I=0,F=n.series.length;F>I;I++)A=A.concat(n.series[I].data);R={lines:w,interactivityLines:D,dots:L,areas:S,tooltipOverlay:this.overlayRect}}return{dataPoints:A,behaviorOptions:R,labelDataPoints:[],labelsAreNumeric:!0,labelDataPointGroups:T}}},i.prototype.renderOld=function(e){var r=this,n=this.clippedData?this.clippedData:this.data;if(n){var o,s=this.margin,l=this.currentViewport,u=l.height-(s.top+s.bottom),c=this.xAxisProperties.scale,h=this.yAxisProperties.scale,p=this.interactivityService&&this.interactivityService.hasSelection();a.hasFlag(this.lineType,2)&&(o=d3.svg.area().x(function(e){return c(r.getXValue(e))}).y0(u).y1(function(e){return h(e.value)}).defined(function(e){return null!==e.value}));var d=d3.svg.line().x(function(e){return c(r.getXValue(e))}).y(function(e){return h(e.value)}).defined(function(e){return null!==e.value});a.hasFlag(this.lineType,4)&&(d.interpolate("basis"),o&&o.interpolate("basis"));var g=this.extraLineShift();if(this.mainGraphicsContext.attr("transform",t.SVGUtil.translate(i.HorizontalShift+g,0)),this.mainGraphicsSVG.attr("height",this.getAvailableHeight()).attr("width",this.getAvailableWidth()),this.hoverLineContext.attr("transform",t.SVGUtil.translate(i.HorizontalShift+g,0)),a.hasFlag(this.lineType,2)){var m=this.mainGraphicsContext.selectAll(i.CategoryAreaSelector.selector).data(n.series,function(e){return e.identity.getKey()}),f=m.enter().append("g").classed(i.CategoryAreaSelector["class"],!0);f.append(i.PathElementName);var y=this.mainGraphicsContext.selectAll(i.CategoryAreaSelector.selector);y.select(i.PathElementName).transition().ease("linear").duration(e).attr("d",function(e){return o(e.data)}).style("fill",function(e){return e.color}).style("fill-opacity",function(e){return p&&!e.selected?i.DimmedAreaFillOpacity:i.AreaFillOpacity}),m.exit().remove()}var v=this.mainGraphicsContext.selectAll(i.CategorySelector.selector).data(n.series,function(e){return e.identity.getKey()}),b=v.enter().append("g").classed(i.CategorySelector["class"],!0);if(b.append(i.PathElementName),b.selectAll(i.CategoryValuePoint.selector).data(function(e){return e.data}).enter().append(i.CircleElementName).classed(i.CategoryValuePoint["class"],!0),v.exit().remove(),this.isInteractiveChart&&!this.dragHandle){var C=this.getAvailableHeight();this.dragHandle=this.hoverLineContext.append("circle").attr("cx",0).attr("cy",C).attr("r","6px").classed("drag-handle",!0)}for(var x=v.data().length;this.selectionCircles.length<x;){var S=this.hoverLineContext.append(i.CircleElementName).classed(i.CircleClassName,!0).attr("r",i.CircleRadius).style("opacity",0);this.selectionCircles.push(S)}for(;this.selectionCircles.length>x;)this.selectionCircles.pop().remove();var w=this.mainGraphicsContext.selectAll(i.CategorySelector.selector),D=w.select(i.PathElementName).classed("line",!0).style("stroke",function(e){return e.color}).style("stroke-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,p,!1)});D.transition().ease("linear").duration(e).attr("d",function(e){return d(e.data)});var P=this,L=w.selectAll(i.CategoryValuePoint.selector),_=L.style("fill",function(){var e=d3.select(this.parentNode).datum();return e.color}).style("fill-opacity",function(){var e=d3.select(this.parentNode).datum();return t.ColumnUtil.getFillOpacity(e.selected,!1,p,!1)}).transition().duration(e).attr({cx:function(e,t){var i=d3.select(this.parentNode).datum(),a=P.shouldDrawCircle(i,t);return a?c(P.getXValue(e)):0},cy:function(e,t){var i=d3.select(this.parentNode).datum(),a=P.shouldDrawCircle(i,t);return a?h(e.value):0},r:function(e,t){var a=d3.select(this.parentNode).datum(),r=P.shouldDrawCircle(a,t);return r?i.CircleRadius:0}});if(this.isInteractiveChart&&this.hasDataPoint(n.series)){var N=L.size(),T=0;_.each("end",function(){T++,T===N&&r.selectColumn(0,!0)})}if(n.dataLabelsSettings.show){for(var V=t.dataLabelUtils.getLineChartLabelLayout(c,h,n.dataLabelsSettings,n.isScalar,this.yAxisProperties.formatter),M=[],A=0,R=n.series.length;R>A;A++)Array.prototype.push.apply(M,n.series[A].data);t.dataLabelUtils.drawDefaultLabelsForDataPointChart(M,this.mainGraphicsSVG,V,this.currentViewport),this.mainGraphicsSVG.select(".labels").attr("transform",t.SVGUtil.translate(i.HorizontalShift+g,0))}else t.dataLabelUtils.cleanDataLabels(this.mainGraphicsSVG);return v.exit().remove(),null}},i.prototype.getSeriesTooltipInfo=function(e){for(var t=[],i=10,a=0,r=0;r<e.length;r++){var n=e[r];if(a>=i)break;null!=n.value&&(t.push({header:n.category,color:n.color,displayName:n.label,value:n.measure}),a++)}return 0===t.length?null:t},i.prototype.getTooltipInfoByPathPointX=function(e,t){var i=e.data,a=e.context;a&&a.pathSegList&&a.pathSegList.getItem(0)&&a.pathSegList.getItem(0).pathSegType===SVGPathSeg.PATHSEG_MOVETO_ABS&&(t+=a.pathSegList.getItem(0).x);var r=this.findIndex(t),n=_.find(i.data,function(e){return e.categoryIndex===r});return n?n.tooltipInfo:void 0},i.prototype.getVisualCategoryAxisIsScalar=function(){return this.data?this.data.isScalar:!1},i.prototype.getSupportedCategoryAxisType=function(){var i=this.dataViewCat?this.dataViewCat.categories:void 0,a=e.ValueType.fromDescriptor({text:!0});i&&i.length>0&&i[0].source&&i[0].source.type&&(a=i[0].source.type);var r=t.AxisHelper.isOrdinal(a);return r?t.axisType.categorical:t.axisType.both},i.prototype.getPreferredPlotArea=function(e,i,a){return t.CartesianChart.getPreferredPlotArea(i,a,this.currentViewport,this.isScrollable,e)},i.prototype.getCategoryCount=function(e){var i=this.getAvailableWidth(),a=t.CartesianChart.MinOrdinalRectThickness;return Math.min(Math.round((i-a*t.CartesianChart.OuterPaddingRatio*2)/a),e)},i.prototype.getAvailableWidth=function(){return this.currentViewport.width-(this.margin.left+this.margin.right)},i.prototype.getAvailableHeight=function(){return this.currentViewport.height-(this.margin.top+this.margin.bottom)},i.sliceSeries=function(t,i,a){void 0===a&&(a=0);var r=[];if(t&&t.length>0)for(var n=0,o=t.length;o>n;n++)r[n]=e.Prototype.inherit(t[n]),r[n].data=t[n].data.slice(a,a+i);return r},i.prototype.extraLineShift=function(){if(!this.data.isScalar){var e=this.xAxisProperties.scale;if(e.rangeBand)return e.rangeBand()/2}return 0},i.prototype.hasDataPoint=function(e){if(0===e.length)return!1;for(var t=0,i=e.length;i>t;t++)if(e[t].data.length>0)return!0;return!1},i.prototype.getXValue=function(e){return this.data.isScalar?e.categoryValue:e.categoryIndex},i.prototype.shouldDrawCircle=function(e,t){var i=e.data.length,a=t===i-1,r=0===t;return t>i-1||null===e.data[t]||null===e.data[t].value?!1:r&&a?!0:r&&i>1&&null===e.data[t+1].value?!0:!r&&a&&null===e.data[t-1].value?!0:r||a||null!==e.data[t-1].value||null!==e.data[t+1].value?!1:!0},i.prototype.selectColumnForTooltip=function(e,t){void 0===t&&(t=!1);var a=i.HorizontalShift+this.extraLineShift(),r=this.getChartX(e)+a,n=this.createTooltipDataPoints(e);return n.length>0&&this.setHoverLineForTooltip(r),this.setDotsForTooltip(r,n),n},i.prototype.setHoverLineForTooltip=function(e){e=e||0,this.hoverLine.attr("x1",e).attr("x2",e).attr("y1",0).attr("y2",this.getAvailableHeight()).style("opacity",1)},i.prototype.setDotsForTooltip=function(e,t){var r=this,n=a.hasFlag(this.lineType,16),o=n?function(e){return r.yAxisProperties.scale(e.stackedValue)}:function(e){return r.yAxisProperties.scale(e.value)},s=this.hoverLineContext.selectAll(i.HoverLineCircleDot.selector).data(t);s.enter().append(i.CircleElementName).classed(i.HoverLineCircleDot["class"],!0),s.filter(function(e){return e.value}).attr("fill",function(e){return e.color}).attr("r",3).attr("cx",e).attr("cy",o),s.exit().remove()},i.prototype.selectColumn=function(e,t){if(void 0===t&&(t=!1),t||this.lastInteractiveSelectedColumnIndex!==e){this.lastInteractiveSelectedColumnIndex=e;var i=this.getChartX(e);this.setHoverLine(i);var a=this.createLegendDataPoints(e);this.options.cartesianHost.updateLegend(a)}},i.prototype.setHoverLine=function(e){this.hoverLine.attr("x1",e).attr("x2",e).attr("y1",0).attr("y2",this.getAvailableHeight()).style("opacity",1);var t=this;this.mainGraphicsContext.selectAll(i.CategorySelector.selector).selectAll(i.PathElementName).each(function(i){var a=this,r=i.color,n=t.selectionCircles[i.lineIndex];n.attr({cx:e,cy:function(){var i=d3.select(a).node(),r=t.getPosition(e,i);return r.y}}).style({opacity:1,fill:r}),t.dragHandle&&t.dragHandle.attr("cx",e)})},i.prototype.getChartX=function(t){var i=0;this.data.isScalar?t>=0&&t<this.data.categoryData.length&&(i=Math.max(0,this.xAxisProperties.scale(this.data.categoryData[t].categoryValue))):i=Math.max(0,this.xAxisProperties.scale(t));var a=e.visuals.AxisHelper.extent(this.xAxisProperties.scale)[1];return i=Math.min(i,a),isNaN(i)?void 0:i},i.prototype.findIndex=function(i){var a=this.mainGraphicsSVG.node(),r=t.SVGUtil.getTransformScaleRatios(a);e.Double.equalWithPrecision(r.x,1,1e-5)||(i/=r.x);var n=e.visuals.AxisHelper.invertScale(this.xAxisProperties.scale,i);return this.data.isScalar&&(n=t.AxisHelper.findClosestXAxisIndex(n,this.data.categoryData)),n},i.prototype.getPosition=function(e,i){for(var a,r,n=i.getTotalLength(),o=0,s=n;r=Math.floor((o+s)/2),a=i.getPointAtLength(r),t.SVGUtil.ensureValidSVGPoint(a),r!==s&&r!==o||a.x===e;)if(a.x>e)s=r;else{if(!(a.x<e))break;o=r}return a},i.prototype.createTooltipDataPoints=function(e){var i=this.data;if(!i||0===i.series.length)return[];var a,r=[],n=i.categoryData[e];a=this.data.isScalar?t.AxisHelper.isDateTime(this.xAxisProperties.axisType)?t.CartesianHelper.lookupXValue(this.data,n.categoryValue,this.xAxisProperties.axisType,this.data.isScalar):n.categoryValue:t.CartesianHelper.lookupXValue(this.data,e,this.xAxisProperties.axisType,this.data.isScalar);for(var o=t.lineChartProps.general.formatString,s=0,l=i.series;s<l.length;s++){var u=l[s],c=u.data,h=c[e];this.data.isScalar&&(h=c.filter(function(e){return e.categoryValue===n.categoryValue})[0]);var p=h&&h.value;if(null!=p){var d=t.converterHelper.getFormattedLegendLabel(u.yCol,this.dataViewCat.values,o);r.push({color:u.color,label:d,category:t.valueFormatter.format(a,t.valueFormatter.getFormatString(u.xCol,o)),measure:t.valueFormatter.format(p,t.valueFormatter.getFormatString(u.yCol,o)),value:p,stackedValue:h.stackedValue})}}return r},i.prototype.createLegendDataPoints=function(e){var i=this.data;if(i&&i.series&&!(i.series.length<1)){var a,r=[],n=i.categoryData[e];this.isInteractiveChart&&n&&(this.data.isScalar?(a=n.categoryValue,t.AxisHelper.isDateTime(this.xAxisProperties.axisType)&&(a=new Date(a))):a=t.CartesianHelper.lookupXValue(this.data,e,this.xAxisProperties.axisType,this.data.isScalar));for(var o=t.lineChartProps.general.formatString,s=null,l=0,u=i.series.length;u>l;l++){var c=i.series[l],h=c.data,p=void 0;if(this.isInteractiveChart){var d=void 0;if(this.data.isScalar){if(n)for(var g=n.categoryValue,m=0;m<h.length;m++)if(h[m].categoryValue===g){d=h[m];break}}else d=h[e];p=d&&d.value}var f=t.converterHelper.getFormattedLegendLabel(c.yCol,this.dataViewCat.values,o);s=c.yCol,r.push({color:c.color,icon:t.LegendIcon.Line,label:f,category:t.valueFormatter.format(a,t.valueFormatter.getFormatString(c.xCol,o)),measure:t.valueFormatter.format(p,t.valueFormatter.getFormatString(c.yCol,o)),identity:c.identity,selected:c.selected})}var y=this.dataViewCat?this.dataViewCat.values:null,v=y&&y.source?y.source.displayName:"";return{title:v,dataPoints:r}}},i.prototype.createLabelDataPoints=function(){for(var r,o,s,l,u=this.xAxisProperties.scale,c=this.yAxisProperties.scale,h=i.HorizontalShift+this.extraLineShift(),p=[],d=[],g=this.data,m=g.series,f=t.NewDataLabelUtils.createColumnFormatterCacheManager(),y=0,v=0,b=0,C=g.dataLabelsSettings,x=this.showLabelPerSeries()&&C.showLabelPerSeries,S=a.hasFlag(this.lineType,16),w=[],D=0;D<m.length;D++){var P=m[D],L=P.labelSettings?P.labelSettings:C;if(L.show){for(var _=t.NewDataLabelUtils.getDisplayUnitValueFromAxisFormatter(this.yAxisProperties.formatter,L),N=P.data,T=[],V=[],M=0,A=0,R=0,I=0,F=void 0,E=void 0,O=0;O<N.length;O++){var G=N[O];if(null!=G.value){var H="";H=G.labelFormatString;var z=f.getOrCreate(H,L,_),k=t.NewDataLabelUtils.getLabelFormattedText(z.format(G.value)),B={text:k,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:n.fromPoint(L.fontSize),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},W=e.TextMeasurementService.measureSvgTextWidth(B)+t.NewDataLabelUtils.LabelDensityPadding,U=e.TextMeasurementService.estimateSvgTextHeight(B,!0),j=void 0,q=!1;if(S){var K=Math.max(G.stackedValue-G.value,c.domain()[0]);j={rect:{left:u(this.getXValue(G)),top:c(Math.max(G.stackedValue,G.stackedValue-G.value)),width:2*h,height:Math.abs(c(G.stackedValue)-c(K))},orientation:G.value>=0?e.NewRectOrientation.VerticalBottomBased:e.NewRectOrientation.VerticalTopBased,validPositions:i.validStackedLabelPositions},q=!0}else j={point:{x:u(this.getXValue(G))+h,y:c(G.value)},radius:0,validPositions:this.lineChartLabelDensityEnabled?i.validLabelPositions:[e.NewPointLabelPosition.Above]};A+=W;var Q={isPreferred:!1,text:k,textSize:{width:W,height:U},outsideFill:L.labelColor?L.labelColor:t.NewDataLabelUtils.defaultLabelColor,insideFill:L.labelColor&&S?L.labelColor:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:q?1:0,parentShape:j,fontSize:L.fontSize,identity:void 0};x?(T.push(Q),V.push(G)):(p.push(Q),d.push(G));var Y=G.value;(void 0===E||E>Y)&&(I=M,E=Y),(void 0===F||Y>F)&&(R=M,F=Y),M++,y++}}if(0!==M){if(b+=A,(void 0===o||l>E)&&(o=y-M+I,l=E),(void 0===r||F>s)&&(r=y-M+R,s=F),x){var X=this.calculateNumberOfLabelsToRender(L.labelDensity,A,T.length);w[v]={labelDataPoints:this.prepareLabelsToRender(T,V,I,R,X),maxNumberOfLabels:X}}v++}}}if(!x){var X=this.calculateNumberOfLabelsToRender(C.labelDensity,b,p.length);w[0]={labelDataPoints:this.prepareLabelsToRender(p,d,o,r,X),maxNumberOfLabels:X}}return w},i.prototype.isMinMax=function(e,t){if(!t[e-1]||!t[e+1])return!0;var i=t[e].value,a=t[e-1].value,r=t[e+1].value;return a>i&&r>i||i>a&&i>r},i.prototype.calculatePointsWeight=function(e,t,i,a){var r=0;e[0].weight=t[0].weight=0;for(var n=t[0],o=e.length,s=this.yAxisProperties.scale,l=s(t[a].value)-s(t[i].value),u=1;o>u;u++){var c=t[u],h=Math.abs(s(n.value)-s(c.value))/l+(u-r)/o;e[u].weight=h,this.isMinMax(u,t)&&(n.weight+=h,n=c,r=u)}},i.prototype.sortByWeightAndPreferrance=function(e,t){return!e.isPreferred&&t.isPreferred?1:e.isPreferred&&!t.isPreferred?-1:!e.weight&&t.weight||e.weight<t.weight?1:e.weight&&!t.weight||e.weight>t.weight?-1:0},i.prototype.calculateNumberOfLabelsToRender=function(e,a,r){if(!this.lineChartLabelDensityEnabled)return r;var n=a/r,o=i.NumberOfPreferredLabels+Math.round((r-i.NumberOfPreferredLabels)*(e/t.NewDataLabelUtils.LabelDensityMax));return Math.min(o,Math.round(this.currentViewport.width/n))},i.prototype.prepareLabelsToRender=function(e,i,a,r,n){if(_.isEmpty(e))return[];this.calculatePointsWeight(e,i,a,r),e[0].isPreferred=e[e.length-1].isPreferred=!0,e[a].isPreferred=e[r].isPreferred=!0;var o=e.sort(this.sortByWeightAndPreferrance);if(!this.data.isScalar)return o;for(var s=[],l=0,u=n*t.NewDataLabelUtils.LabelDensityBufferFactor;u>l&&l<o.length;l++)s.push(o[l]);return s},i.prototype.showLabelPerSeries=function(){var e=this.data;return!e.hasDynamicSeries&&(e.series.length>1||!e.categoryMetadata)&&this.seriesLabelFormattingEnabled},i.ClassName="lineChart",i.MainGraphicsContextClassName="mainGraphicsContext",i.CategorySelector=r("cat"),i.CategoryValuePoint=r("dot"),i.CategoryPointSelector=r("point"),i.CategoryAreaSelector=r("catArea"),i.HoverLineCircleDot=r("circle-item"),i.PointRadius=5,i.HorizontalShift=0,i.CircleRadius=4,i.PathElementName="path",i.CircleElementName="circle",i.CircleClassName="selection-circle",i.LineElementName="line",i.RectOverlayName="rect",i.NumberOfPreferredLabels=4,i.ScalarOuterPadding=10,i.AreaFillOpacity=.4,i.DimmedAreaFillOpacity=.2,i.validLabelPositions=[e.NewPointLabelPosition.Above,e.NewPointLabelPosition.Below,e.NewPointLabelPosition.Right,e.NewPointLabelPosition.Left,e.NewPointLabelPosition.AboveRight,e.NewPointLabelPosition.AboveLeft,e.NewPointLabelPosition.BelowRight,e.NewPointLabelPosition.BelowLeft],i.validStackedLabelPositions=[e.RectLabelPosition.InsideCenter,e.RectLabelPosition.InsideEnd,e.RectLabelPosition.InsideBase],i}();t.LineChart=o}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.ArrayExtensions,a=jsCommon.Color,r=jsCommon.PixelConverter,n=t.shapes.Polygon;t.MaxLevelOfDetail=23,t.MinLevelOfDetail=1,t.DefaultFillOpacity=.5,t.DefaultBackgroundColor="#000000",t.LeaderLineColor="#000000";var o=function(){function i(e){this.values=[],this.tooltipsEnabled=e}return i.prototype.init=function(e,i,a){this.mapControl=e;var r=i[0];r.setAttribute("drag-resize-disabled","true");var n=this.svg=d3.select(r).append("svg").style("position","absolute").style("pointer-events","none");if(a){var o=this.clearSvg=d3.select(this.mapControl.getRootElement()).append("svg").style("position","absolute");
this.clearCatcher=t.appendClearCatcher(o)}this.bubbleGraphicsContext=n.append("g").classed("mapBubbles",!0),this.sliceGraphicsContext=n.append("g").classed("mapSlices",!0),this.labelBackgroundGraphicsContext=n.append("g").classed(t.NewDataLabelUtils.labelBackgroundGraphicsContextClass["class"],!0),this.labelGraphicsContext=n.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass["class"],!0),this.sliceLayout=d3.layout.pie().sort(null).value(function(e){return e.value}),this.arc=d3.svg.arc(),this.clearMaxDataPointRadius(),this.dataLabelsSettings=t.dataLabelUtils.getDefaultMapLabelSettings()},i.prototype.addDataPoint=function(e){this.values.push(e)},i.prototype.clearDataPoints=function(){this.values=[]},i.prototype.getDataPointCount=function(){return _.filter(this.values,function(e){return!!e.cachedLocation}).length},i.prototype.getDataPointPadding=function(){return 2*this.maxDataPointRadius},i.prototype.clearMaxDataPointRadius=function(){this.maxDataPointRadius=0},i.prototype.setMaxDataPointRadius=function(e){this.maxDataPointRadius=Math.max(e,this.maxDataPointRadius)},i.prototype.beginDataPointUpdate=function(e,t){this.values.length=0},i.prototype.getDefaultMap=function(e,t){this.values.length=0},i.prototype.converter=function(e,i,a,r){var n=this.mapControl,o=e.width/2,s=e.height/2,l=1;this.dataLabelsSettings=a;var u=Math.min(e.width,e.height)/384;this.clearMaxDataPointRadius();var c,h,p=[],d=[],g=t.mapProps.general.formatString,m=i?i.categorical:null,f=-1;m&&m.values&&(c=m.values.grouped(),f=t.DataRoleHelper.getMeasureIndexOfRole(c,"Size"),h=m.values.source);for(var y=0,v=this.values.length;v>y;y++){var b=this.values[y],C=b.categoryValue,x=b.cachedLocation;if(x){var S=n.tryLocationToPixel(new Microsoft.Maps.Location(x.latitude,x.longitude)),w=S.x+o,D=S.y+s,P=b.radius*u;this.setMaxDataPointRadius(P);var L=b.seriesInfo.sizeValuesForGroup,_=m.categories[0],N={},T=L?L.length:1;if(1===T){var V=L[0],M=V.value,A=V.index,R=[];h&&R.push({value:c[A].name,metadata:{source:h,values:[]}}),f>-1&&R.push({value:M,metadata:c[0].values[f]});var I=t.TooltipBuilder.createTooltipInfo(g,null,C,null,m.categories,R),F=L[0];N[_.source.queryName]=b.categoryIdentity;var E=t.SelectionId.createWithSelectorForColumnAndMeasure(N,null);p.push({x:w,y:D,labeltext:C,radius:P,fill:F.fill,stroke:F.stroke,strokeWidth:l,tooltipInfo:I,identity:E,selected:!1,labelFill:a.labelColor})}else{var O=[],G=m.values[0];N[_.source.queryName]=b.categoryIdentity;for(var H=0;T>H;++H){var V=L[H],M=V.value,A=V.index,R=[];h&&R.push({value:c[A].name,metadata:{source:h,values:[]}}),f>-1&&R.push({value:M,metadata:c[0].values[f]});var I=t.TooltipBuilder.createTooltipInfo(g,null,C,null,m.categories,R),z=L[H];N[G.source.queryName]=z.seriesId;var E=t.SelectionId.createWithSelectorForColumnAndMeasure(N,null);O.push({x:w,y:D,labeltext:C,radius:P,fill:z.fill,stroke:z.stroke,strokeWidth:l,value:M,tooltipInfo:I,identity:E,selected:!1,labelFill:a.labelColor})}r&&r.applySelectionStateToData(O),d.push(O)}}}return r&&r.applySelectionStateToData(p),{bubbleData:p,sliceData:d}},i.prototype.updateInternal=function(i,a,r,n){this.mapData=i,this.svg&&this.svg.style("width",a.width.toString()+"px").style("height",a.height.toString()+"px"),this.clearSvg&&this.clearSvg.style("width",a.width.toString()+"px").style("height",a.height.toString()+"px");var o=this.arc,s=n&&n.hasSelection(),l=this.bubbleGraphicsContext.selectAll(".bubble").data(i.bubbleData,function(e){return e.identity.getKey()});l.enter().append("circle").classed("bubble",!0),l.attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}).attr("r",function(e){return e.radius}).style("fill",function(e){return e.fill}).style("stroke",function(e){return e.stroke}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,s,!1)}).style("strokeWidth",function(e){return e.strokeWidth}).style("stroke-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,s,!1)}).style("cursor","default"),l.exit().remove(),this.tooltipsEnabled&&(t.TooltipManager.addTooltip(l,function(e){return e.data.tooltipInfo}),l.style("pointer-events","all"));var u=i.sliceData,c=this.sliceGraphicsContext.selectAll(".sliceContainer").data(u);c.enter().append("g").classed("sliceContainer",!0),c.exit().remove();var h=this.sliceLayout,p=c.selectAll(".slice").data(function(e){return h(e)},function(e){return e.data.identity.getKey()});p.enter().append("path").classed("slice",!0),p.style("fill",function(e){return e.data.fill}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.data.selected,!1,s,!1)}).style("stroke",function(e){return e.data.stroke}).style("strokeWidth",function(e){return e.data.strokeWidth}).style("stroke-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.data.selected,!1,s,!1)}).style("cursor","default").attr("transform",function(e){return t.SVGUtil.translate(e.data.x,e.data.y)}).attr("d",function(e){return o.innerRadius(0).outerRadius(function(e){return e.data.radius})(e)}),p.exit().remove();var d=this.dataLabelsSettings,g=[];if(d&&(d.show||d.showCategory)){var m=this.createLabelDataPoints(),f=new e.LabelLayout({maximumOffset:t.NewDataLabelUtils.maxLabelOffset,startingOffset:t.NewDataLabelUtils.startingLabelOffset}),y={labelDataPoints:m,maxNumberOfLabels:m.length};g=f.layout([y],{width:a.width,height:a.height})}t.NewDataLabelUtils.drawLabelBackground(this.labelGraphicsContext,g,e.visuals.DefaultBackgroundColor,e.visuals.DefaultFillOpacity),t.NewDataLabelUtils.drawDefaultLabels(this.labelGraphicsContext,g,!1),this.tooltipsEnabled&&(t.TooltipManager.addTooltip(p,function(e){return e.data.data.tooltipInfo}),p.style("pointer-events","all"));for(var v=i.bubbleData.slice(),b=0,C=u.length;C>b;b++)v.push.apply(v,u[b]);var x={bubbles:l,slices:this.sliceGraphicsContext.selectAll("path"),clearCatcher:this.clearCatcher,dataPoints:v};return x},i.prototype.createLabelDataPoints=function(){var a=this.mapData,n=[],o=a.bubbleData;o=o.concat(_.map(a.sliceData,function(e){return e[0]}));for(var s=this.dataLabelsSettings,l=0;l<o.length;l++){var u=o[l],c=u.labeltext,h={text:c,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:r.fromPoint(s.fontSize),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},p=e.TextMeasurementService.measureSvgTextWidth(h),d=e.TextMeasurementService.estimateSvgTextHeight(h);n.push({isPreferred:!0,text:c,textSize:{width:p,height:d},outsideFill:s.labelColor?s.labelColor:t.NewDataLabelUtils.defaultInsideLabelColor,insideFill:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:0,parentShape:{point:{x:u.x,y:u.y},radius:u.radius,validPositions:i.validLabelPositions},fontSize:s.fontSize,identity:void 0})}return n},i.validLabelPositions=[e.NewPointLabelPosition.Above,e.NewPointLabelPosition.Below,e.NewPointLabelPosition.Left,e.NewPointLabelPosition.Right],i}();t.MapBubbleDataPointRenderer=o;var s=function(){function i(e,t){this.values=[],this.filledMapDataLabelsEnabled=e,this.tooltipsEnabled=t}return i.getFilledMapParams=function(e,i){switch(e){case t.MapUtil.CategoryTypes.Continent:case t.MapUtil.CategoryTypes.CountryRegion:return 10>i?{level:2,maxPolygons:50,strokeWidth:0}:30>i?{level:2,maxPolygons:20,strokeWidth:0}:{level:1,maxPolygons:3,strokeWidth:0};default:return 100>i?{level:1,maxPolygons:5,strokeWidth:6}:200>i?{level:0,maxPolygons:5,strokeWidth:6}:{level:0,maxPolygons:5,strokeWidth:0}}},i.buildPaths=function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i],r=a.geographic;r.length>2&&t.push(a)}return t},i.prototype.init=function(e,i,a){this.mapControl=e,this.polygonInfo=new t.MapPolygonInfo;var r=i[0];r.setAttribute("drag-resize-disabled","true");var n=this.svg=d3.select(r).append("svg").style("position","absolute").style("pointer-events","none");if(a){var o=this.clearSvg=d3.select(this.mapControl.getRootElement()).append("svg").style("position","absolute");this.clearCatcher=t.appendClearCatcher(o)}this.shapeGraphicsContext=n.append("g").classed("mapShapes",!0),this.labelBackgroundGraphicsContext=n.append("g").classed(t.NewDataLabelUtils.labelBackgroundGraphicsContextClass["class"],!0),this.labelGraphicsContext=n.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass["class"],!0),this.clearMaxShapeDimension(),this.dataLabelsSettings=t.dataLabelUtils.getDefaultMapLabelSettings()},i.prototype.beginDataPointUpdate=function(e,t){this.geocodingCategory=e,this.values=[]},i.prototype.addDataPoint=function(e){this.values.push(e)},i.prototype.clearDataPoints=function(){this.values=[]},i.prototype.getDataPointCount=function(){return _.filter(this.values,function(e){return!!e.paths}).length},i.prototype.converter=function(e,i,a,r){this.clearMaxShapeDimension(),this.dataLabelsSettings=a;for(var n=1,o=[],s=t.mapProps.general.formatString,l=0,u=this.values.length;u>l;l++){var c=i?i.categorical:null,h=this.values[l],p=h.categoryValue,d=h.paths,g=h.seriesInfo.sizeValuesForGroup,m=g&&g[0],f=void 0,y=-1,v=void 0;if(c&&c.values&&(f=c.values.grouped(),y=t.DataRoleHelper.getMeasureIndexOfRole(f,"Size"),v=c.values.source),d&&m){var b=m.value,C=m.index,x=[];v&&x.push({value:f[C].name,metadata:{source:v,values:[]}}),y>-1&&x.push({value:b,metadata:f[0].values[y]});var S=t.TooltipBuilder.createTooltipInfo(s,null,p,null,c.categories,x),w=c.categories[0],D={};D[w.source.queryName]=h.categoryIdentity;for(var P=t.SelectionId.createWithSelectorForColumnAndMeasure(D,null),L=P.getKey(),N=t.NewDataLabelUtils.createColumnFormatterCacheManager(),T=0,V=d.length;V>T;T++){var M=d[T],A=i&&i.categorical&&!_.isEmpty(i.categorical.values)?t.valueFormatter.getFormatString(i.categorical.values[0].source,t.filledMapProps.general.formatString):void 0;this.setMaxShapeDimension(M.absoluteBounds.width,M.absoluteBounds.height);var R=N.getOrCreate(A,a);o.push({absolutePointArray:h.paths[T].absolute,path:M.absoluteString,fill:m.fill,stroke:m.stroke,strokeWidth:n,tooltipInfo:S,identity:P,selected:!1,key:JSON.stringify({id:L,pIdx:T}),displayLabel:0===T,labeltext:p,catagoryLabeltext:null!=b?t.NewDataLabelUtils.getLabelFormattedText(R.format(b)):void 0,labelFormatString:A})}}}return r&&r.applySelectionStateToData(o),{shapeData:o}},i.prototype.updateInternal=function(i,a,r,n){this.mapData=i,this.svg&&this.svg.style("width",a.width.toString()+"px").style("height",a.height.toString()+"px"),this.clearSvg&&this.clearSvg.style("width",a.width.toString()+"px").style("height",a.height.toString()+"px"),this.polygonInfo.reCalc(this.mapControl,a.width,a.height),this.shapeGraphicsContext.attr("transform",this.polygonInfo.transformToString(this.polygonInfo.transform));var o=n&&n.hasSelection(),s=this.shapeGraphicsContext.selectAll("polygon").data(i.shapeData,function(e){return e.key});s.enter().append("polygon").classed("shape",!0).attr("points",function(e){return e.path}),s.style("fill",function(e){return e.fill}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,o,!1)}).style("cursor","default"),r&&s.attr("points",function(e){return e.path}),s.exit().remove();var l,u=this.dataLabelsSettings;if(u&&(u.show||u.showCategory)){var c=this.createLabelDataPoints(),h=new e.FilledMapLabelLayout;l=h.layout(c,{width:a.width,height:a.height},this.polygonInfo.transform)}this.drawLabelStems(this.labelGraphicsContext,l,u.show,u.showCategory),t.NewDataLabelUtils.drawLabelBackground(this.labelGraphicsContext,l,e.visuals.DefaultBackgroundColor,e.visuals.DefaultFillOpacity),t.NewDataLabelUtils.drawDefaultLabels(this.labelGraphicsContext,l,!1,u.show&&u.showCategory),this.tooltipsEnabled&&(t.TooltipManager.addTooltip(s,function(e){return e.data.tooltipInfo}),s.style("pointer-events","all"));var p={shapes:s,clearCatcher:this.clearCatcher,dataPoints:i.shapeData};return p},i.prototype.getDataPointPadding=function(){return 12},i.prototype.clearMaxShapeDimension=function(){this.maxShapeDimension=0},i.prototype.setMaxShapeDimension=function(e,t){this.maxShapeDimension=Math.max(e,this.maxShapeDimension),this.maxShapeDimension=Math.max(t,this.maxShapeDimension)},i.prototype.createLabelDataPoints=function(){var a=this.mapData,r=[];if(this.filledMapDataLabelsEnabled)for(var o=a.shapeData,s=this.dataLabelsSettings,l=0;l<o.length;l++){var u=o[l];if(u.displayLabel){var c=void 0,h=void 0,p=0,d=!1;if(this.dataLabelsSettings.show&&!this.dataLabelsSettings.showCategory){if(c=u.catagoryLabeltext,void 0===c||null===c)continue}else if(this.dataLabelsSettings.showCategory&&!this.dataLabelsSettings.show){if(c=u.labeltext,void 0===c||null===c)continue}else if(this.dataLabelsSettings.showCategory&&this.dataLabelsSettings.show){if(c=u.catagoryLabeltext,h=u.labeltext,!(void 0!==c&&null!==c||void 0!==h&&null!==h))continue;d=!0}if(d){var g={text:h,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:t.NewDataLabelUtils.LabelTextProperties.fontSize,fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight};p=e.TextMeasurementService.measureSvgTextWidth(g)}var m={text:c,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:t.NewDataLabelUtils.LabelTextProperties.fontSize,fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},f=e.TextMeasurementService.measureSvgTextWidth(m),y=e.TextMeasurementService.estimateSvgTextHeight(m);h&&void 0!==u.labeltext&&void 0!==u.catagoryLabeltext&&(y=2*y);var v={parentType:2,parentShape:{polygon:new n(u.absolutePointArray),validPositions:i.validLabelPolygonPositions},text:c,secondRowText:h,textSize:{width:Math.max(f,p),height:y},insideFill:s.labelColor,outsideFill:s.labelColor?s.labelColor:t.NewDataLabelUtils.defaultInsideLabelColor,isPreferred:!1,identity:void 0};r.push(v)}}return r},i.prototype.drawLabelStems=function(e,i,a,r){var n=_.filter(i,function(e){return e.isVisible}),o=function(e,t){return e.identity?e.identity.getKeyWithoutHighlight():t};t.NewDataLabelUtils.drawLabelLeaderLines(e,n,o,t.LeaderLineColor)},i.validLabelPolygonPositions=[e.NewPointLabelPosition.Center,e.NewPointLabelPosition.Below,e.NewPointLabelPosition.Above,e.NewPointLabelPosition.Right,e.NewPointLabelPosition.Left,e.NewPointLabelPosition.BelowRight,e.NewPointLabelPosition.BelowLeft,e.NewPointLabelPosition.AboveRight,e.NewPointLabelPosition.AboveLeft],i}();t.MapShapeDataPointRenderer=s;var l=function(){function r(e){this.receivedExternalViewChange=!1,this.executingInternalViewChange=!1,e.filledMap?(this.dataPointRenderer=new s(e.filledMapDataLabelsEnabled,e.tooltipsEnabled),this.filledMapDataLabelsEnabled=e.filledMapDataLabelsEnabled,this.enableGeoShaping=!0):(this.dataPointRenderer=new o(e.tooltipsEnabled),this.enableGeoShaping=!1),this.mapControlFactory=e.mapControlFactory?e.mapControlFactory:this.getDefaultMapControlFactory(),this.behavior=e.behavior,this.tooltipsEnabled=e.tooltipsEnabled,this.disableZooming=e.disableZooming,this.disablePanning=e.disablePanning,this.isLegendScrollable=!!e.behavior}return r.prototype.init=function(i){var a=this,r=this.element=i.element;this.pendingGeocodingRender=!1,this.currentViewport=i.viewport,this.style=i.style,this.colors=this.style.colorPalette.dataColors,this.behavior&&(this.interactivityService=t.createInteractivityService(i.host)),this.dataLabelsSettings=t.dataLabelUtils.getDefaultMapLabelSettings(),this.legend=e.visuals.createLegend(r,i.interactivity&&i.interactivity.isInteractiveLegend,this.interactivityService,this.isLegendScrollable),this.legendHeight=0,this.legendData={dataPoints:[]},this.geoTaggingAnalyzerService=e.createGeoTaggingAnalyzerService(i.host.getLocalizedString),this.host=i.host,i.host.locale&&(this.locale=i.host.locale()),this.geocoder=i.host.geocoder(),this.resetBounds(),this.mapControlFactory.ensureMap(this.locale,function(){Microsoft.Maps.loadModule("Microsoft.Maps.Overlays.Style",{callback:function(){a.initialize(r[0])}})})},r.prototype.addDataPoint=function(e){var t=e.cachedLocation;this.updateBounds(t.latitude,t.longitude),this.scheduleRedraw()},r.prototype.scheduleRedraw=function(){var e=this;!this.pendingGeocodingRender&&this.mapControl&&(this.pendingGeocodingRender=!0,setTimeout(function(){e.updateInternal(!0),e.pendingGeocodingRender=!1},3e3))},r.prototype.enqueueGeoCode=function(e){var t=this;this.geocoder.geocode(e.geocodingQuery,this.geocodingCategory).then(function(i){i&&(e.cachedLocation=i,t.addDataPoint(e))})},r.prototype.enqueueGeoCodeAndGeoShape=function(e,t){var i=this;this.geocoder.geocode(e.geocodingQuery,this.geocodingCategory).then(function(a){a&&(e.cachedLocation=a,i.enqueueGeoShape(e,t))})},r.prototype.enqueueGeoShape=function(e,i){var a=this;this.geocoder.geocodeBoundary(e.cachedLocation.latitude,e.cachedLocation.longitude,this.geocodingCategory,i.level,i.maxPolygons).then(function(i){var r;0===i.locations.length||i.locations[0].geographic?r=s.buildPaths(i.locations):(t.MapUtil.calcGeoData(i),r=s.buildPaths(i.locations)),e.paths=r,a.addDataPoint(e)})},r.prototype.getOptimumLevelOfDetail=function(e,i){var a=this.dataPointRenderer.getDataPointCount();if(0===a)return t.MapUtil.MinLevelOfDetail;for(var r=this.dataPointRenderer.getDataPointPadding(),n=t.MapUtil.MaxLevelOfDetail;n>=t.MapUtil.MinLevelOfDetail;n--){var o=t.MapUtil.latLongToPixelXY(this.minLatitude,this.minLongitude,n),s=t.MapUtil.latLongToPixelXY(this.maxLatitude,this.maxLongitude,n);if(s.x-o.x+r<=e&&o.y-s.y+r<=i)return 2>a&&(n=Math.min(t.MapUtil.MaxAutoZoomLevel,n)),n}return t.MapUtil.MinLevelOfDetail},r.prototype.getViewCenter=function(e){var i=t.MapUtil.latLongToPixelXY(this.minLatitude,this.minLongitude,e),a=t.MapUtil.latLongToPixelXY(this.maxLatitude,this.maxLongitude,e);return t.MapUtil.pixelXYToLocation((i.x+a.x)/2,(a.y+i.y)/2,e)},r.prototype.resetBounds=function(){this.minLongitude=t.MapUtil.MaxAllowedLongitude,this.maxLongitude=t.MapUtil.MinAllowedLongitude,this.minLatitude=t.MapUtil.MaxAllowedLatitude,this.maxLatitude=t.MapUtil.MinAllowedLatitude},r.prototype.updateBounds=function(e,t){t<this.minLongitude&&(this.minLongitude=t),t>this.maxLongitude&&(this.maxLongitude=t),e<this.minLatitude&&(this.minLatitude=e),e>this.maxLatitude&&(this.maxLatitude=e)},r.legendObject=function(e){return e&&e.metadata&&e.metadata.objects&&e.metadata.objects.legend},r.isLegendHidden=function(e){var i=r.legendObject(e);return null!=i&&i[t.legendProps.show]===!1},r.legendPosition=function(e){var i=r.legendObject(e);return i&&t.LegendPosition[i[t.legendProps.position]]},r.getLegendFontSize=function(e){var i=r.legendObject(e);return i&&i[t.legendProps.fontSize]||t.SVGLegend.DefaultFontSizeInPt},r.isShowLegendTitle=function(e){var i=r.legendObject(e);return i&&i[t.legendProps.showTitle]},r.prototype.legendTitle=function(){var e=r.legendObject(this.dataView);return e&&e[t.legendProps.titleText]||this.legendData.title},r.prototype.renderLegend=function(e){var i=r.isLegendHidden(this.dataView),a=r.isShowLegendTitle(this.dataView),n=this.legendTitle(),o={dataPoints:i?[]:e.dataPoints,grouped:e.grouped,title:a?n:"",fontSize:r.getLegendFontSize(this.dataView)},s=r.legendPosition(this.dataView);void 0!==s?this.legend.changeOrientation(s):this.legend.changeOrientation(t.LegendPosition.Top),this.legend.drawLegend(o,this.currentViewport)},r.calculateGroupSizes=function(e,t,i,a,r){for(var n=e.values[0].values.length,o=t.length,s=0,l=n;l>s;++s){var u=null;if(a>=0)for(var c=0;o>c;++c){var h=t[c].values[a].values[s];h&&(null===u?u=h:u+=h)}i.push(u),u&&(r?(r.min=Math.min(r.min,u),r.max=Math.max(r.max,u)):r={min:u,max:u})}return r},r.createMapDataPoint=function(e,t,i,a,r,n){if(i){var o=i.latitude,s=i.longitude,l={geocodingQuery:e,location:null!==o&&null!==s?new Microsoft.Maps.Location(o,s):null,value:t,radius:a,seriesInfo:i,categoryIdentity:n,categoryValue:e};return null===l.geocodingQuery&&null===l.location?null:(l.cachedLocation=l.location,l)}return null},r.calculateSeriesLegend=function(e,i,a,r,n,o,s){for(var l=e?e.length:0,u=[],c=new t.ColorHelper(r,t.mapProps.dataPoint.fill,n),h=0;l>h;++h){var p=e[h],d=void 0,g=void 0;if(a>=0){var m=p.values[a];d=m.values[i],g=m.source.queryName}else d=null,g="";if(null!==d||0>a){var f=p.identity?t.SelectionId.createWithId(p.identity):t.SelectionId.createNull(),y=void 0!==o?c.getColorForSeriesValue(p.objects,o,p.name):c.getColorForMeasure(p.objects,g);u.push({color:y,label:t.valueFormatter.format(p.name),icon:t.LegendIcon.Circle,identity:f,selected:!1})}}return s&&s.applySelectionStateToData(u),u},r.calculateSeriesInfo=function(e,i,n,o,s,l,u,c,h){var p=null,d=null,g=[],m=e?e.length:0,f=new t.ColorHelper(l,t.mapProps.dataPoint.fill,u);if(m>0)for(var y=0;m>y;++y){var v=e[y],b=void 0,C=void 0;if(n>=0){var x=v.values[n];b=x.values[i],C=x.source.queryName}else b=null,C="";var S=c&&c[i]||v&&v.objects;if(null!==b||0>n){var w=e[y].identity,D=void 0!==h?f.getColorForSeriesValue(S,h,v.name):f.getColorForMeasure(S,C),P=a.parseColorString(D),L=a.hexString(a.darken(P,r.StrokeDarkenColorValue));P.A=.6;var _=a.rgbString(P);g.push({value:b,index:y,fill:_,stroke:L,seriesId:w})}p=r.getOptionalMeasure(v,s,i,p),d=r.getOptionalMeasure(v,o,i,d)}else{var S=c&&c[i],D=f.getColorForMeasure(S,""),P=a.parseColorString(D),L=a.hexString(a.darken(P,r.StrokeDarkenColorValue));P.A=.6;var _=a.rgbString(P);g=[{value:null,index:0,fill:_,stroke:L,seriesId:null}]}return{sizeValuesForGroup:g,latitude:p,longitude:d}},r.getOptionalMeasure=function(e,t,i,a){if(t>=0){var r=e.values[t].values[i];if(null!=r)return r}return a},r.calculateRadius=function(e,t,i){var a=6;return null!=e&&0!==t&&(a=14*((i-e.min)/t)+6),a},r.getGeocodingCategory=function(e,t){if(e&&e.categories&&e.categories.length>0&&e.categories[0].source){var i=e.categories[0].source.type;if(i&&i.categoryString)return t.getFieldType(i.categoryString);var a=e.categories[0].source.displayName,r=t.getFieldType(a);if(r)return r;var n=e.categories[0].source.roles;if(n)for(var o=Object.keys(n),s=0,l=o.length;l>s;++s){var u=t.getFieldType(o[s]);if(u)return u}}},r.hasSizeField=function(e,t){if(i.isUndefinedOrEmpty(e))return!1;for(var a=0,r=e.length;r>a;a++){var n=e[a].source.roles;if(!n&&a===t&&e[a].source.type.numeric)return!0;if(n)for(var o=Object.keys(n),s=0,l=o.length;l>s;s++){var u=o[s];if("Size"===u)return!0}}return!1},r.shouldEnumerateDataPoints=function(e,i){var a=t.DataRoleHelper.hasRoleInDataView(e,"Series"),r=i?"Size":"Gradient",n=t.DataRoleHelper.hasRoleInDataView(e,r);return a||!n},r.shouldEnumerateCategoryLabels=function(e,t){return!e||t},r.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder;switch(e.objectName){case"dataPoint":if(r.shouldEnumerateDataPoints(this.dataView,this.enableGeoShaping)){var a=[],n=this.hasDynamicSeries;if(!n){var o=this.dataPointRenderer.converter(this.getMapViewPort(),this.dataView,this.dataLabelsSettings,this.interactivityService);a=o.bubbleData}r.enumerateDataPoints(i,this.dataPointsToEnumerate,this.colors,n,this.defaultDataPointColor,this.showAllDataPoints,a)}break;case"categoryLabels":r.shouldEnumerateCategoryLabels(this.enableGeoShaping,this.filledMapDataLabelsEnabled)&&t.dataLabelUtils.enumerateCategoryLabels(i,this.dataLabelsSettings,!0,!0);break;case"legend":this.hasDynamicSeries&&r.enumerateLegend(i,this.dataView,this.legend,this.legendTitle());break;case"labels":if(this.filledMapDataLabelsEnabled){this.dataLabelsSettings=this.dataLabelsSettings?this.dataLabelsSettings:t.dataLabelUtils.getDefaultMapLabelSettings();var s={enumeration:i,dataLabelsSettings:this.dataLabelsSettings,show:!0,displayUnits:!0,precision:!0};t.dataLabelUtils.enumerateDataLabels(s)}}return i.complete()},r.enumerateDataPoints=function(e,t,i,r,n,o,s){var l=t&&t.length;if(r)for(var u=0;l>u;u++){var c=t[u];e.pushInstance({objectName:"dataPoint",displayName:c.label,selector:c.identity.getSelector(),properties:{fill:{solid:{color:c.color}}}})}else if(e.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:n||i.getColorByIndex(0).value}}}}).pushInstance({objectName:"dataPoint",selector:null,properties:{showAllDataPoints:!!o}}),s)for(var u=0;u<s.length;u++){var h=s[u];e.pushInstance({objectName:"dataPoint",displayName:h.labeltext,selector:h.identity.getSelector(),properties:{fill:{solid:{color:a.normalizeToHexString(h.fill)}}}})}},r.enumerateLegend=function(e,i,a,n){e.pushInstance({selector:null,properties:{show:!r.isLegendHidden(i),position:t.LegendPosition[a.getOrientation()],showTitle:r.isShowLegendTitle(i),titleText:n,fontSize:r.getLegendFontSize(i)},objectName:"legend"})},r.prototype.onDataChanged=function(i){var a=this;this.receivedExternalViewChange=!1;var n=i.dataViews[0];this.dataView=n;var o=this.enableGeoShaping;this.dataLabelsSettings=t.dataLabelUtils.getDefaultMapLabelSettings(),this.defaultDataPointColor=null,this.showAllDataPoints=null;var l=void 0;if(n){if(n.metadata&&n.metadata.objects){var u=n.metadata.objects;if(this.defaultDataPointColor=e.DataViewObjects.getFillColor(u,t.mapProps.dataPoint.defaultColor),this.showAllDataPoints=e.DataViewObjects.getValue(u,t.mapProps.dataPoint.showAllDataPoints),this.dataLabelsSettings.showCategory=e.DataViewObjects.getValue(u,t.filledMapProps.categoryLabels.show,this.dataLabelsSettings.showCategory),o){this.dataLabelsSettings.precision=e.DataViewObjects.getValue(u,t.filledMapProps.labels.labelPrecision,this.dataLabelsSettings.precision),this.dataLabelsSettings.precision=this.dataLabelsSettings.precision!==t.dataLabelUtils.defaultLabelPrecision&&this.dataLabelsSettings.precision<0?0:this.dataLabelsSettings.precision,this.dataLabelsSettings.displayUnits=e.DataViewObjects.getValue(u,t.filledMapProps.labels.labelDisplayUnits,this.dataLabelsSettings.displayUnits);var c=u.labels;c&&(this.dataLabelsSettings.show=void 0!==c.show?c.show:this.dataLabelsSettings.show,void 0!==c.color&&(this.dataLabelsSettings.labelColor=c.color.solid.color))}else{var h=u.categoryLabels;h&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(h,this.dataLabelsSettings)}}l=r.showLocationMissingWarningIfNecessary(n);var p=n.categorical;if(p&&p.categories&&p.categories.length>0){this.resetBounds();var d;p.values&&(d=p.values.grouped());var g=d&&!!p.values.source;this.hasDynamicSeries=g;var m;g?m=p.values.identityFields:p.values&&p.values.length>0&&(m=p.categories[0].identityFields);var f=t.DataRoleHelper.getMeasureIndexOfRole(d,"Size"),y=t.DataRoleHelper.getMeasureIndexOfRole(d,"X"),v=t.DataRoleHelper.getMeasureIndexOfRole(d,"Y"),b=[];this.valueScale=null,-1!==f&&(this.valueScale=r.calculateGroupSizes(p,d,b,f,this.valueScale)),this.geocodingCategory=r.getGeocodingCategory(p,this.geoTaggingAnalyzerService);var C=this.valueScale?this.valueScale.max-this.valueScale.min:0;!o||this.geocodingCategory&&this.geoTaggingAnalyzerService.isGeoshapable(this.geocodingCategory)||l.push(new t.FilledMapWithoutValidGeotagCategoryWarning),this.mapControlFactory.ensureMap(this.locale,function(){var e=r.calculateSeriesLegend(d,u,f,a.colors,a.defaultDataPointColor,m,a.interactivityService);1===e.length&&(e=[]);var t=p.categories[0].values,i=n.categorical.categories[0].identity;a.dataPointRenderer.beginDataPointUpdate(a.geocodingCategory,t.length);for(var l=n.categorical.categories[0].objects,u=0,c=t.length;c>u;u++){var h=t[u],g=b[u],x=r.calculateSeriesInfo(d,u,f,y,v,a.colors,a.defaultDataPointColor,l,m),S=r.calculateRadius(a.valueScale,C,g),w=void 0;o&&(w=s.getFilledMapParams(a.geocodingCategory,t.length));var D=r.createMapDataPoint(h,g,x,S,a.colors,i?i[u]:void 0);D&&(a.dataPointRenderer.addDataPoint(D),D.location?o&&!D.paths?a.enqueueGeoShape(D,w):a.addDataPoint(D):o?a.enqueueGeoCodeAndGeoShape(D,w):a.enqueueGeoCode(D))}var P=p.values,L=P&&P.source?P.source.displayName:"";a.legendData={title:L,dataPoints:e},a.dataPointsToEnumerate=e,a.renderLegend(a.legendData)})}else this.clearDataPoints()}else this.clearDataPoints();this.host.setWarnings(l),this.updateInternal(!0)},r.prototype.swapLogoContainerChildElement=function(){var e=this.element.find(".LogoContainer");if(e){var t=e.find("a");if(null==t)return;var i=$("<div>");t.children().clone().appendTo(i),t.remove(),i.appendTo(e)}},r.showLocationMissingWarningIfNecessary=function(e){var i=e.metadata;if(i&&i.columns){for(var a=i.columns,r=!1,n=0;n<a.length;n++)t.DataRoleHelper.hasRole(a[n],"Category")&&(r=!0);if(!r)return[new t.NoMapLocationWarning]}return[]},r.prototype.onResizing=function(e){(this.currentViewport.width!==e.width||this.currentViewport.height!==e.height)&&(this.currentViewport=e,this.renderLegend(this.legendData),this.updateInternal(!1))},r.prototype.initialize=function(e){var i=this,a={credentials:t.MapUtil.Settings.BingKey,showMapTypeSelector:!1,enableClickableLogo:!1,enableSearchLogo:!1,mapTypeId:Microsoft.Maps.MapTypeId.road,customizeOverlays:!0,showDashboard:!1,showScalebar:!1,disableKeyboardInput:!0,disableZooming:this.disableZooming,disablePanning:this.disablePanning},n=InJs.DomFactory.div().addClass(r.MapContainer.cssClass).appendTo(e);this.mapControl=this.mapControlFactory.createMapControl(n[0],a),Microsoft.Maps.Events.addHandler(this.mapControl,"viewchange",function(){i.onViewChanged()}),this.dataPointRenderer.init(this.mapControl,n,!!this.behavior),this.pendingGeocodingRender||this.updateInternal(!0)},r.prototype.onViewChanged=function(){this.executingInternalViewChange?this.executingInternalViewChange=!1:this.receivedExternalViewChange=!0,this.updateOffsets(!1),this.behavior&&this.behavior.viewChanged(),this.swapLogoContainerChildElement()},r.prototype.getMapViewPort=function(){var e=this.currentViewport,t=this.legend.getMargins(),i={width:e.width-t.width,height:e.height-t.height};return i},r.prototype.updateInternal=function(e){if(this.mapControl){var t=this.legend.isVisible();t||(this.legendData={dataPoints:[]});var i=this.element.children(r.MapContainer.selector),a=this.getMapViewPort();i.height(a.height),i.width(a.width),this.updateOffsets(e);var n=this.getOptimumLevelOfDetail(a.width,a.height),o=this.getViewCenter(n);this.receivedExternalViewChange&&this.interactivityService||(this.executingInternalViewChange=!0,this.mapControl.setView({center:o,zoom:n,animate:!0}))}},r.prototype.updateOffsets=function(e){var t,i=this.dataView,a=this.getMapViewPort();t=i&&i.categorical?this.dataPointRenderer.converter(a,this.dataView,this.dataLabelsSettings,this.interactivityService):{bubbleData:[],shapeData:[],sliceData:[]};var r=this.dataPointRenderer.updateInternal(t,a,e,this.interactivityService);this.interactivityService&&r&&this.interactivityService.bind(r.dataPoints,this.behavior,r)},r.prototype.onClearSelection=function(){this.interactivityService.clearSelection(),this.updateOffsets(!1)},r.prototype.clearDataPoints=function(){this.dataPointRenderer.clearDataPoints(),this.legend.drawLegend({dataPoints:[]},this.currentViewport)},r.prototype.getDefaultMapControlFactory=function(){return{createMapControl:function(e,t){return new Microsoft.Maps.Map(e,t)},ensureMap:jsCommon.ensureMap}},r.MapContainer={cssClass:"mapControl",selector:".mapControl"},r.StrokeDarkenColorValue=63.75,r}();t.Map=l}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(e){e.append("div").classed("imgCon",!0).append("img")}function a(e,t){e.selectAll(".imgCon").style({height:r(t.maxHeight)}).selectAll("img").style({"max-height":r(t.maxHeight),"max-width":r(t.maxWidth)})}function r(e){return e+"px"}var n=e.visuals.KpiUtil.getKpiImageMetadata,o=jsCommon.CssConstants.createClassAndSelector,s=jsCommon.PixelConverter,l="wf_segoe-ui_semibold",u="wf_segoe-ui_normal",c=10,h=13,p=9,d="#767676",g="#333333",m=function(){function m(){this.isInteractivityOverflowHidden=!1}return m.prototype.init=function(e){this.options=e,this.style=e.style;var t=this.currentViewport=e.viewport,i=this.interactivity=e.interactivity;i&&"hidden"===i.overflow&&(this.isInteractivityOverflowHidden=!0);var a=this.element=$("<div/>").addClass(m.MultiRowCardRoot["class"]).css({height:r(t.height)});e.element.append(a),this.initializeCardRowSelection()},m.prototype.onDataChanged=function(t){var i=t.dataViews;if(i&&i.length>0){var a=this.dataView=i[0],r=a.table.columns,n=a.table.rows,o=t.operationKind!==e.VisualDataChangeOperationKind.Append,s=this.data=m.converter(a,r.length,n.length,this.isInteractivityOverflowHidden);
this.setCardDimensions(),this.listView.data(s.dataModel,function(e){return s.dataModel.indexOf(e)},o)}this.waitingForData=!1},m.prototype.onResizing=function(e){var t=this.currentViewport.height===e.height;if(this.currentViewport=e,this.element.css("height",r(e.height)),this.dataView){var i=this.maxColPerRow;this.maxColPerRow=this.getMaxColPerRow();var a=i===this.maxColPerRow;t&&a||this.listView.viewport(e)}},m.converter=function(i,a,r,o){void 0===o&&(o=!1);var s,l,u,f=[],y=i.table.rows,v=i.table.columns;if(s=t.dataLabelUtils.getDefaultLabelSettings(!0,d,h),l=t.dataLabelUtils.getDefaultLabelSettings(!0,g,c),u=t.dataLabelUtils.getDefaultLabelSettings(!0,g,p),i.metadata&&i.metadata.objects){var b=e.DataViewObjects.getObject(i.metadata.objects,"cardTitle");t.dataLabelUtils.updateLabelSettingsFromLabelsObject(b,s);var C=e.DataViewObjects.getObject(i.metadata.objects,"dataLabels");t.dataLabelUtils.updateLabelSettingsFromLabelsObject(C,l);var x=e.DataViewObjects.getObject(i.metadata.objects,"categoryLabels");t.dataLabelUtils.updateLabelSettingsFromLabelsObject(x,u)}for(var S=0,w=r;w>S;S++){for(var D=y[S],P=void 0,L=void 0,_=!1,N=!1,T=!1,V=[],M=0;a>M;M++){var A=v[M],R=n(A,D[M]),I=void 0,F=void 0;R&&(I=R["class"],F=R.statusGraphic),I||(I=t.valueFormatter.format(D[M],t.valueFormatter.getFormatString(A,m.formatStringProp)));var E=void 0!==R&&void 0!==R.caption,O=v[M].displayName;o||A.type.numeric||(void 0===P?(P=!0,L=I,_=t.UrlHelper.isValidUrl(A,L),N=t.UrlHelper.isValidImage(A,I),T=E):P&&(P=!1)),V.push({caption:I,details:O,showURL:t.UrlHelper.isValidUrl(A,I),showImage:t.UrlHelper.isValidImage(A,I),showKPI:E,columnIndex:M})}f.push({title:P?L:void 0,showTitleAsURL:_,showTitleAsImage:N,showTitleAsKPI:T,cardItemsData:P?V.filter(function(e){return e.caption!==L}):V})}return{dataModel:f,cardTitleSettings:s,categoryLabelsSettings:u,dataLabelsSettings:l}},m.prototype.initializeCardRowSelection=function(){var n=this,o=this.isInteractivityOverflowHidden,l=function(e){var t=e.append("div").classed(m.Card["class"],!0);o?t.classed("mrtile",!0):n.cardHasTitle&&t.append("div").classed(m.Title["class"],!0).each(function(e){e.showTitleAsImage?i(d3.select(this)):e.showTitleAsURL?d3.select(this).append("a"):e.showTitleAsKPI&&d3.select(this).append("div").classed(m.KPITitle["class"],!0).classed(e.title,!0).style({display:"inline-block",verticalAlign:"sub"})});var a=t.selectAll(m.CardItemContainer.selector).data(function(e){return e.cardItemsData}).enter().append("div").classed(m.CardItemContainer["class"],!0);a.append("div").classed(m.Caption["class"],!0).each(function(e){e.showURL?d3.select(this).append("a"):e.showImage?i(d3.select(this)):e.showKPI&&d3.select(this).append("div").classed(e.caption,!0).style({display:"inline-block",verticalAlign:"sub"})}),a.append("div").classed(m.Details["class"],!0)},u=function(t){var i=n.getStyle(),l=e.TextMeasurementService.estimateSvgTextHeight(m.getTextProperties(!1,i.caption.fontSize)),u=e.TextMeasurementService.estimateSvgTextHeight(m.getTextProperties(!1,i.details.fontSize)),c=e.TextMeasurementService.estimateSvgTextHeight(m.getTextProperties(!0,i.title.fontSize));!o&&n.cardHasTitle&&(t.selectAll(m.Title.selector).filter(function(e){return!e.showTitleAsImage&&!e.showTitleAsKPI}).style({"font-size":s.fromPoint(i.title.fontSize),"line-height":s.toString(c),color:i.title.color}),t.selectAll(m.Title.selector).filter(function(e){return!e.showTitleAsURL&&!e.showTitleAsImage&&!e.showTitleAsKPI}).text(function(e){return e.title}),t.selectAll(m.TitleUrlSelector).text(function(e){return e.title}).attr({href:function(e){return e.title},target:"_blank"}),t.selectAll(m.TitleImageSelector).attr("src",function(e){return e.title}),a(t.selectAll(m.Title.selector),i.imageTitle),t.selectAll(m.KPITitle.selector).each(function(e){var t=d3.select(this);t.classed(e.title)}));var h=t.selectAll(m.Card.selector);h.selectAll(m.Caption.selector).filter(function(e){return!(e.showImage||e.showKPI)}).style({"line-height":s.toString(l),"font-size":s.fromPoint(i.caption.fontSize),color:i.caption.color}).filter(function(e){return!e.showURL}).text(function(e){return e.caption}),h.selectAll(m.CaptionImageSelector).attr("src",function(e){return e.caption}).style(i.imageCaption),h.selectAll(m.CardItemContainer.selector).style({"padding-right":function(e){return n.isLastRowItem(e.columnIndex,n.dataView.metadata.columns.length)?"0px":r(i.cardItemContainer.paddingRight)},width:function(e){return n.getColumnWidth(e.columnIndex,n.dataView.metadata.columns.length)},display:function(e){return n.hideColumn(e.columnIndex)?"none":"inline-block"}}),a(h.selectAll(m.Caption.selector),i.imageCaption),h.selectAll(m.CaptionUrlSelector).attr({href:function(e){return e.caption},target:"_blank"}).text(function(e){return e.caption}),i.details.isVisible&&h.selectAll(m.Details.selector).text(function(e){return e.details}).style({"font-size":s.fromPoint(i.details.fontSize),"line-height":s.toString(u),color:i.details.color}),h.style("margin-bottom",o?"0px":n.isSingleRowCard?"0px":r(i.card.marginBottom))},c=function(e){e.remove()},h={rowHeight:void 0,enter:l,exit:c,update:u,loadMoreData:function(){return n.onLoadMoreData()},viewport:this.currentViewport,baseContainer:d3.select(this.element.get(0)),scrollEnabled:!this.isInteractivityOverflowHidden};this.listView=t.ListViewFactory.createListView(h)},m.prototype.getMaxColPerRow=function(){var e=this.currentViewport.width,t=this.getStyle().cardItemContainer.minWidth,i=this.dataView.metadata.columns.length,a=Math.floor(e/t)||1;return Math.min(i,a)},m.prototype.getRowIndex=function(e){return Math.floor(1*e/this.getMaxColPerRow())},m.prototype.getStyle=function(){var e=this.getOverridenStyle();if(!this.isInteractivityOverflowHidden)return $.extend(!0,{},e);for(var t=this.currentViewport.width,i={},a=0,r=m.tileMediaQueries;a<r.length;a++){var n=r[a];if(t<=n.maxWidth){i=n.style;break}}return $.extend(!0,{},e,i)},m.prototype.getOverridenStyle=function(){var e=m.DefaultStyle,t=this.data.dataLabelsSettings,i=this.data.categoryLabelsSettings,a=this.data.cardTitleSettings,r={caption:{fontSize:t.fontSize,color:t.labelColor},title:{fontSize:a.fontSize,color:a.labelColor},details:{fontSize:i.fontSize,color:i.labelColor,isVisible:i.show}};return $.extend(!0,r,e)},m.getTextProperties=function(e,t){return{fontFamily:e?l:u,fontSize:s.fromPoint(t)}},m.prototype.hideColumn=function(e){var t=this.getRowIndex(e),i=this.getStyle().card.maxRows;return i&&t>=i},m.prototype.getColumnWidth=function(e,t){var i=this.getMaxColPerRow();if(i>=t)return 100/t+"%";var a=this.getRowIndex(e),r=Math.ceil(1*t/i),n=t%i;return r>a||0===n?100/i+"%":100/n+"%"},m.prototype.isLastRowItem=function(e,t){if(e+1===t)return!0;var i=this.getMaxColPerRow();return i-e%i===1?!0:!1},m.prototype.setCardDimensions=function(){this.cardHasTitle=!1;var e=this.data.dataModel;!this.isInteractivityOverflowHidden&&e&&e.length>0&&(this.cardHasTitle=void 0!==e[0].title,this.isSingleRowCard=1===e.length?!0:!1)},m.prototype.onLoadMoreData=function(){!this.waitingForData&&this.dataView.metadata&&this.dataView.metadata.segment&&(this.options.host.loadMoreData(),this.waitingForData=!0)},m.getDataLabelSettingsOptions=function(e,t,i){return void 0===i&&(i=!1),{enumeration:e,dataLabelsSettings:t,show:i,fontSize:!0}},m.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder,a=this.data.cardTitleSettings,r=this.data.dataLabelsSettings,n=this.data.categoryLabelsSettings;switch(e.objectName){case"cardTitle":!this.isInteractivityOverflowHidden&&this.cardHasTitle&&t.dataLabelUtils.enumerateDataLabels(m.getDataLabelSettingsOptions(i,a));break;case"dataLabels":t.dataLabelUtils.enumerateDataLabels(m.getDataLabelSettingsOptions(i,r));break;case"categoryLabels":t.dataLabelUtils.enumerateDataLabels(m.getDataLabelSettingsOptions(i,n,!0))}return i.complete()},m.formatStringProp={objectName:"general",propertyName:"formatString"},m.MultiRowCardRoot=o("multiRowCard"),m.Card=o("card"),m.Title=o("title"),m.CardItemContainer=o("cardItemContainer"),m.Caption=o("caption"),m.Details=o("details"),m.TitleUrlSelector=m.Title.selector+" a",m.CaptionUrlSelector=m.Caption.selector+" a",m.TitleImageSelector=m.Title.selector+" img",m.CaptionImageSelector=m.Caption.selector+" img",m.KPITitle=o("kpiTitle"),m.DefaultStyle={card:{marginBottom:20},cardItemContainer:{paddingRight:20,minWidth:120},imageCaption:{maxHeight:75,maxWidth:100},imageTitle:{maxHeight:75,maxWidth:100}},m.tileMediaQueries=[{maxWidth:250,style:{card:{maxRows:2},cardItemContainer:{minWidth:110},imageCaption:{maxHeight:45}}},{maxWidth:490,style:{card:{maxRows:2},cardItemContainer:{minWidth:130},imageCaption:{maxHeight:52}}},{maxWidth:750,style:{card:{maxRows:1},cardItemContainer:{minWidth:120},imageCaption:{maxHeight:53}}}],m}();t.MultiRowCard=m}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.CssConstants.createClassAndSelector,a=function(){function t(){}return t.prototype.init=function(t){this.element=t.element,this.host=t.host,this.viewport=t.viewport,this.element.addClass("richtextbox"),this.element.css({"font-family":r.defaultFont,"font-size":r.defaultFontSize}),this.readOnly=this.host.getViewMode()===e.ViewMode.View,this.paragraphs=[],this.refreshView()},t.prototype.onResizing=function(e){this.viewport=e,this.updateSize()},t.prototype.onDataChanged=function(e){var t=e.dataViews;if(this.paragraphs=[],t&&t.length>0){var i=t[0].metadata.objects;i&&i.general&&(this.paragraphs=i.general.paragraphs)}this.refreshView()},t.prototype.destroy=function(){},t.prototype.focus=function(){return this.editor?(this.editor.focus(),!0):void 0},t.prototype.onViewModeChanged=function(t){this.readOnly=t===e.ViewMode.View,this.refreshView()},t.prototype.setSelection=function(e,t){this.editor&&this.editor.setSelection(e,t)},t.prototype.refreshView=function(){var e=this;this.readOnly?(this.editor&&(this.editor.formatUrls(),this.saveContents(),this.editor.destroy(),this.editor=null),this.element.empty(),this.element.append(t.convertParagraphsToHtml(this.paragraphs))):(this.editor||(this.editor=new r.QuillWrapper(this.readOnly,this.host),this.editor.textChanged=function(t,i){return e.saveContents()},this.element.empty(),this.element.append(this.editor.getElement())),this.editor.setContents(t.convertParagraphsToOps(this.paragraphs))),this.updateSize()},t.prototype.saveContents=function(){if(this.editor){var e=this.editor.getContents();this.paragraphs=t.convertDeltaToParagraphs(e);var i=[{objectName:"general",properties:{paragraphs:this.paragraphs},selector:null}];this.host.persistProperties(i)}},t.prototype.updateSize=function(){this.editor&&this.editor.resize(this.viewport)},t.convertDeltaToParagraphs=function(e){for(var i=[],a={textRuns:[]},r=0,n=e.ops.length;n>r;r++){var o=e.ops[r];if("string"==typeof o.insert){var s=o.insert,l=o.attributes;l&&l.align&&(a.horizontalTextAlignment=l.align);var u=0,c=0,h=void 0;do{if(c=s.indexOf("\n",u),0>c?(h=!1,c=s.length):h=!0,c-u>0){var p=s.substring(u,c),d={value:p};if(l){void 0!==l.link&&(d.url=l.link);var g=t.convertFormatAttributesToTextStyle(l);g&&(d.textStyle=g)}a.textRuns.push(d)}h&&(0===a.textRuns.length&&a.textRuns.push({value:""}),i.push(a),a={textRuns:[]}),u=c+1}while(u<s.length)}}return a.textRuns.length>0&&a.textRuns[0].value.length>0&&i.push(a),i},t.convertParagraphsToHtml=function(e){for(var t=$(),i=0,a=e.length;a>i;++i){var n=e[i],o=!0,s=$("<div>");n.horizontalTextAlignment&&s.css("text-align",n.horizontalTextAlignment);for(var l=0,u=n.textRuns.length;u>l;++l){var c=n.textRuns[l],h=$("<span>"),p=c.textStyle;if(p){var d={};p.fontFamily&&(d["font-family"]=r.getFontFamily(p.fontFamily)),p.fontSize&&(d["font-size"]=p.fontSize),p.fontStyle&&(d["font-style"]=p.fontStyle),p.fontWeight&&(d["font-weight"]=p.fontWeight),p.textDecoration&&(d["text-decoration"]=p.textDecoration),h.css(d)}var g=c.value;if(jsCommon.StringExtensions.isNullOrEmpty(g)||(o=!1),void 0!==c.url){var m=$("<a>").attr("href",c.url).attr("target","_blank").text(g);h.append(m)}else h.text(g);s.append(h)}o&&s.append($("<br>")),t=t.add(s)}return t},t.convertParagraphsToOps=function(e){for(var t=[],i=0,a=e.length;a>i;++i)for(var n=e[i],o=0,s=n.textRuns.length;s>o;++o){var l=n.textRuns[o],u={};n.horizontalTextAlignment&&(u.align=n.horizontalTextAlignment);var c=l.textStyle;c&&(c.fontFamily&&(u.font=r.getFontFamily(c.fontFamily)),c.fontSize&&(u.size=c.fontSize),u.italic="italic"===c.fontStyle,u.bold="bold"===c.fontWeight,u.underline="underline"===c.textDecoration);var h=l.value;l.url&&(u.link=l.url);var p={insert:h,attributes:u};t.push(p),o!==s-1||jsCommon.StringExtensions.endsWith(h,"\n")||t.push({insert:"\n",attributes:u})}return t},t.convertFormatAttributesToTextStyle=function(e){var t={};return e.bold&&(t.fontWeight="bold"),e.font&&(t.fontFamily=e.font),e.italic&&(t.fontStyle="italic"),e.size&&(t.fontSize=e.size),e.underline&&(t.textDecoration="underline"),t},t}();t.Textbox=a;var r;!function(t){function a(e){var t=r[e];return void 0!==t?t:e}var r={"Segoe (Bold)":"wf_segoe-ui_bold","Segoe UI":"wf_segoe-ui_normal","Segoe UI Light":"wf_segoe-ui_light",Heading:"wf_segoe-ui_light",Body:"wf_segoe-ui_normal"},n=["Arial","Arial Black","Arial Unicode MS","Calibri","Cambria","Cambria Math","Candara","Comic Sans MS","Consolas","Constantia","Corbel","Courier New","Georgia","Lucida Sans Unicode","Segoe (Bold)","Segoe UI","Segoe UI Light","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"].map(function(e){return{label:e,value:a(e)}});t.defaultFont=a("Segoe UI Light");var o=["8","9","10","10.5","11","12","14","16","18","20","24","28","32","36","40","42","44","54","60","66","72","80","88","96"].map(function(e){return{label:e,value:e+"px"}});t.defaultFontSize="14px";var s=["Left","Center","Right"].map(function(e){return{label:e,value:e.toLowerCase()}});t.getFontFamily=a;var l=function(){function i(e,t){var a=this;this.QuillPackage={javaScriptFiles:i.quillJsFiles,cssFiles:i.quillCssFiles},this.textChanged=function(e,t){},this.host=t,this.$container=$("<div>"),this.readOnly=e,this.localizationProvider={get:function(e){return a.host.getLocalizedString(e)}},this.dependenciesLoaded=$.Deferred(),i.loadQuillResources?(this.initialized=!1,this.dependenciesLoaded.done(function(){a.rebuildQuillEditor(),a.initialized=!0}),jsCommon.requires(this.QuillPackage,function(){return a.dependenciesLoaded.resolve()})):(this.rebuildQuillEditor(),this.initialized=!0,this.dependenciesLoaded.resolve())}return i.prototype.addModule=function(e,t){return this.editor?this.editor.addModule(e,t):void 0},i.prototype.getElement=function(){return this.$container},i.prototype.getContents=function(){return this.initialized?this.editor.getContents():void 0},i.prototype.setContents=function(e){var t=this;return this.initialized?(this.editor.setHTML("","api"),e&&this.editor.setContents(e,"api"),void this.formatUrls()):void this.dependenciesLoaded.done(function(){return t.setContents(e)})},i.prototype.resize=function(e){this.$container.width(e.width),this.$container.height(e.height)},i.prototype.setReadOnly=function(e){var t=e!==this.readOnly;this.readOnly=e,this.initialized&&t&&this.rebuildQuillEditor()},i.prototype.formatUrls=function(){if(null!=this.editor){for(var e,t=this.editor.getText(),i=/http[s]?:\/\/(\S)+/gi;null!==(e=i.exec(t));){var a=e[0],r=e.index,n=i.lastIndex;this.editor.formatText(r,n,"link",!1,"api"),this.editor.formatText(r,n,"link",a,"api")}this.editor.emit(Quill.events.SELECTION_CHANGE,this.getSelection(),"api")}},i.prototype.setSelection=function(e,t){this.editor&&this.editor.setSelection(e,t,"api")},i.prototype.getSelection=function(){return this.editor?this.editor.getSelection():void 0},i.prototype.focus=function(){this.editor&&0===$(document.activeElement).closest(this.$container).length&&this.editor.focus()},i.prototype.destroy=function(){this.host.setToolbar(null),this.$container.remove(),this.$container=null,this.$toolbarDiv=null,this.$editorDiv=null,this.editor=null},i.prototype.getSelectionAtCursor=function(){var e=this.getTextWithoutTrailingBreak();this.editor.focus();var t=this.getSelection();return t&&t.start===t.end?jsCommon.WordBreaker.find(t.start,e):t},i.prototype.getWord=function(){var e=this.getSelectionAtCursor();return this.getTextWithoutTrailingBreak().slice(e.start,e.end)},i.prototype.insertLinkAtCursor=function(e,t){var i=t+e.length;return this.editor.insertText(t,e,"api"),this.editor.formatText(t,i,"link",e,"api"),this.setSelection(t,i),i},i.prototype.getEditorContainer=function(){return this.editor?$(this.editor.container):void 0},i.prototype.getTextWithoutTrailingBreak=function(){return this.editor.getText().slice(0,-1)},i.prototype.rebuildQuillEditor=function(){var e=this,a=null;this.editor&&(this.editor.removeAllListeners(),a=this.editor.getContents()),this.$container.empty(),this.$container.keydown(function(e){e.ctrlKey&&_.contains(i.preventDefaultKeys,e.which)&&e.stopPropagation()});var r=this.$editorDiv=$("<div>");r.css("font-family",t.defaultFont),r.css("font-size",t.defaultFontSize);var n={readOnly:this.readOnly,formats:["bold","italic","underline","font","size","link","align"],styles:!1};if(this.editor=new Quill(r.get(0),n),!this.readOnly){var o=this.$toolbarDiv;o||(this.$toolbarDiv=o=u.buildToolbar(this,this.localizationProvider)),o.addClass("unselectable"),this.host.setToolbar(o),this.editor.addModule("toolbar",{container:o.get(0)}),r.attr("drag-resize-disabled","true")}this.$container.append(r),a&&this.setContents(a);var s=new jsCommon.ThrottleUtility(i.textChangeThrottle);this.editor.on("text-change",function(t,i){"api"!==i&&s.run(function(){return e.onTextChanged(t,i)})});var l=new jsCommon.ThrottleUtility(i.formatUrlThrottle);this.editor.on("text-change",function(t,i){"api"!==i&&l.run(function(){return e.formatUrls()})}),this.editor.root.addEventListener("blur",function(t){var i=t.relatedTarget||document.activeElement;i&&"SELECT"===i.tagName||"INPUT"===i.tagName||i.getAttribute("contentEditable")||e.setSelection(null,null)},!1)},i.prototype.onTextChanged=function(e,t){this.textChanged(e,t)},i.textChangeThrottle=200,i.formatUrlThrottle=1e3,i.preventDefaultKeys=[jsCommon.DOMConstants.aKeyCode,jsCommon.DOMConstants.cKeyCode,jsCommon.DOMConstants.xKeyCode,jsCommon.DOMConstants.vKeyCode],i.loadQuillResources=!0,i.quillJsFiles=[e.build+"/externals/quill.min.js"],i.quillCssFiles=[e.build+"/externals/quill.base.css"],i}();t.QuillWrapper=l;var u;!function(e){function a(e,i){var a=u(i);e.addModule("link-tooltip",{template:a});var r=C(e,v("Link",i),i.get("RichTextbox_Link_DefaultText")),l=m(v("Font",i),n,"font",t.defaultFont,function(e,t){return e.css("font-family",t.value),e}),d=p().addClass("toolbar ql-toolbar").append(c().append(h(i.get("RichTextbox_Font_Label"))).append(l).append(m(v("Size",i),o,"size",t.defaultFontSize))).append(c().append(y(v("Bold",i),"bold")).append(y(v("Italic",i),"italic")).append(y(v("Underline",i),"underline"))).append(c().append(g("Text Alignment",s,"align","Left",i))).append(r);return d.on("mousedown",function(e){var t=e.target||document.activeElement;"INPUT"!==t.tagName&&"SELECT"!==t.tagName&&e.preventDefault()}),d}function r(e,t){e.val(t);var i=document.createEvent("UIEvent");i.initUIEvent("change",!1,!1,null,0),e.get(0).dispatchEvent(i)}function l(e,t){return $('\n                        <a href="#" class="url" target="_blank"></a>\n                        <input class="input" type="text">\n                        <span class="bar">&nbsp;|&nbsp;</span>\n                        <a class="change"></a>\n                        <a class="remove">'+e+'</a>\n                        <a class="done">'+t+"</a>\n                    ")}function u(e){var t=p(),i=e.get("RichTextbox_Link_Done"),a=e.get("RichTextbox_Link_Remove");return t.append(l(a,i)),t.html()}function c(){return d().addClass("ql-format-group").attr("drag-resize-disabled","true")}function h(e){return $("<label>").text(e)}function p(){return $("<div>")}function d(){return $("<span>")}function g(e,t,i,a,n){var o=v(e,n),s=d().attr("title",o).addClass("ql-toggle-group"),l=f(o,t,a).addClass("ql-picker ql-"+i).css("display","none"),u=t.map(function(e){var t=y(v(e.label,n),"align"+e.value).attr("data-value",e.value).click(function(t){return r(l,e.value)});return t});return l.change(function(e){for(var t=l.val(),i=0;i<u.length;i++)u[i].toggleClass("ql-active",u[i].attr("data-value")===t)}),s.append(l),s.append(u),s}function m(e,t,i,a,r){var n=f(e,t,a,r).addClass("ql-picker ql-"+i);return n}function f(e,t,i,a){for(var r=$("<select>").attr("title",e),n=0;n<t.length;n++){var o=t[n],s=$("<option>").attr("value",o.value).text(o.label);o.value===i&&s.attr("selected","selected"),void 0!==a&&(s=a(s,o)),r.append(s)}return r}function y(e,t){var i=d().addClass("ql-format-button");return null!=e&&i.attr("title",e),null!=t&&(i.addClass("ql-"+t),i.addClass("powervisuals-glyph "+t)),i}function v(e,t){return t.get("RichTextbox_"+e+"_ToolTip")}function b(e){e.removeClass("editing"),e.removeClass("blank-editing"),e.find(".input").val(x)}function C(t,i,a){var r=t.getEditorContainer().find(e.selectors.linkTooltip.selector),n=c().addClass(e.selectors.toolbarUrlInput["class"]).append(y(i,"link").append("<div>")).append(r);return n.on("keydown mousedown",function(e){if(e.keyCode===jsCommon.DOMConstants.enterKeyCode||e.target.classList.contains("done")){if(!r.hasClass("blank-editing"))return!0;var i=n.find(".input").val(),a=t.getSelectionAtCursor(),o=t.getWord();if(!o){var s=t.insertLinkAtCursor(i,a.start);return b(r),t.setSelection(s,s),!1}}}),n.find(".input").blur(function(e){var t=e.relatedTarget;(null===t||t&&!t.classList.contains("done"))&&b(r)}),n.find(".ql-link div").click(function(e){var i=e.target.parentElement;if(i&&i.classList.contains("ql-active"))return n.find(".change")[0].click(),!1;var a=t.getWord();if(!a){r.addClass("editing blank-editing");var o=n.find(".input").get(0);return o.value=x,o.selectionStart=o.selectionEnd=x.length,o.focus(),!1}}).mousedown(function(e){var i=e.target.parentElement;if(i&&!i.classList.contains("ql-active")){var a=t.getSelectionAtCursor();t.setSelection(a.start,a.end)}}),n}var x="http://";e.selectors={linkTooltip:i("ql-link-tooltip"),toolbarUrlInput:i("toolbar-url-input")},e.buildToolbar=a,e.setSelectValue=r}(u||(u={}))}(r=t.RichText||(t.RichText={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=t.utility.SelectionManager;t.cheerMeterProps={dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"}}};var a=function(){function a(){this.isFirstTime=!0}return a.converter=function(i){if(!i.categorical||!i.categorical.categories)return null;var r=i.categorical.categories[0];if(!r)return null;var n=r.values;if(!n||_.isEmpty(i.categorical.values))return null;var o=i.categorical.values[0].values,s=i.categorical.categories[0].objects,l=s&&s.length>0?s[0]:void 0,u=s&&s.length>1?s[1]:void 0,c=i.metadata.objects,h=a.DefaultBackgroundColor;if(c){var p=c.general;if(p){var d=p.fill;d&&(h=d.solid.color)}}var g=e.DataViewObjects.getFillColor(l,t.cheerMeterProps.dataPoint.fill,a.DefaultFontColor),m=e.DataViewObjects.getFillColor(u,t.cheerMeterProps.dataPoint.fill,a.DefaultFontColor),f=t.SelectionIdBuilder.builder().withCategory(r,0).createSelectionId(),y=t.SelectionIdBuilder.builder().withCategory(r,1).createSelectionId(),v={teamA:{name:n[0],value:o[0],color:g,identity:f},teamB:{name:n[1],value:o[1],color:m,identity:y},background:h};return v},a.prototype.init=function(e){this.selectionManager=new i({hostServices:e.host});var t=this.svg=d3.select(e.element.get(0)).append("svg");this.textOne=t.append("text").style("font-family",a.DefaultFontFamily),this.textTwo=t.append("text").style("font-family",a.DefaultFontFamily)},a.prototype.update=function(e){if(e.dataViews[0]){var i=this.data=a.converter(e.dataViews[0]);if(i){var r=e.suppressAnimations?0:t.AnimatorCommon.MinervaAnimationDuration;this.draw(i,r,e.viewport)}}},a.prototype.getRecomendedFontProperties=function(t,i,r){for(var n,o={fontSize:"",fontFamily:a.DefaultFontFamily,text:t+i},s=1,l=1e3,u=r.width,c=0;l>=s;)if(n=(s+l)/2|0,o.fontSize=n+"px",c=e.TextMeasurementService.measureSvgTextWidth(o),u>c)s=n+1;else{if(!(c>u))break;l=n-1}return o.fontSize=n+"px",c=e.TextMeasurementService.measureSvgTextWidth(o),c>u&&(n--,o.fontSize=n+"px"),o},a.prototype.calculateLayout=function(t,i){var r=t.teamA.name,n=t.teamB.name,o={height:i.height,width:i.width-a.PaddingBetweenText},s=this.getRecomendedFontProperties(r,n,o);s.text=r;var l=0|e.TextMeasurementService.measureSvgTextWidth(s);s.text=n;var u=0|e.TextMeasurementService.measureSvgTextWidth(s),c=(i.width-l-u-a.PaddingBetweenText)/2|0;s.text=r+n;var h=0|e.TextMeasurementService.measureSvgTextHeight(s),p=t.teamA.value+t.teamB.value,d=i.height-h,g=(p-t.teamA.value)/p*d+h/2|0,m=(p-t.teamB.value)/p*d+h/2|0;return{x1:c,x2:c+l+a.PaddingBetweenText,y1:g,y2:m,fontSize:s.fontSize}},a.prototype.ensureStartState=function(e,t){if(this.isFirstTime){this.isFirstTime=!1;var i=t.height/2;this.textOne.attr({x:e.x1,y:i}),this.textTwo.attr({x:e.x2,y:i})}},a.prototype.clearSelection=function(){var e=this;this.selectionManager.clear().then(function(){e.clearSelectionUI()})},a.prototype.clearSelectionUI=function(){this.textOne.style("stroke","#FFF").style("stroke-width",0),this.textTwo.style("stroke","#FFF").style("stroke-width",0)},a.prototype.updateSelectionUI=function(e){this.textOne.style("stroke","#FFF").style("stroke-width",i.containsSelection(e,this.data.teamA.identity)?"2px":"0px"),this.textTwo.style("stroke","#FFF").style("stroke-width",i.containsSelection(e,this.data.teamB.identity)?"2px":"0px")},a.prototype.draw=function(e,t,i){var a=this,r="back",n=this.textOne,o=this.textTwo;this.svg.attr({height:i.height,width:i.width}).on("click",function(){a.clearSelection()}).style("background-color",e.background);var s=this.calculateLayout(e,i);this.ensureStartState(s,i),n.style("font-size",s.fontSize).style("fill",e.teamA.color).on("click",function(){a.selectionManager.select(e.teamA.identity,d3.event.ctrlKey).then(function(e){a.updateSelectionUI(e)}),d3.event.stopPropagation()}).text(e.teamA.name),o.style("font-size",s.fontSize).style("fill",e.teamB.color).on("click",function(){a.selectionManager.select(e.teamB.identity,d3.event.ctrlKey).then(function(e){a.updateSelectionUI(e)}),d3.event.stopPropagation()}).text(e.teamB.name),n.transition().duration(t).ease(r).attr({y:s.y1,x:s.x1}),o.transition().duration(t).ease(r).attr({y:s.y2,x:s.x2})},a.prototype.destroy=function(){this.svg=null,this.textOne=this.textTwo=null},a.prototype.enumerateObjectInstances=function(e){var t=[],i=this.data;switch(e.objectName){case"dataPoint":if(i)for(var r=[i.teamA,i.teamB],n=0;n<r.length;n++){var o=r[n],s=o.color,l=o.identity,u={objectName:"dataPoint",displayName:o.name,selector:l,properties:{fill:{solid:{color:s}}}};t.push(u)}break;case"general":var c={objectName:"general",displayName:"General",selector:null,properties:{fill:{solid:{color:i?i.background:a.DefaultBackgroundColor}}}};t.push(c)}return t},a.capabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping},{displayName:"Noise Measure",name:"Y",kind:e.VisualDataRoleKind.Measure}],dataViewMappings:[{categorical:{categories:{"for":{"in":"Category"}},values:{select:[{bind:{to:"Y"}}]}}}],objects:{dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},width:{displayName:"",type:{numeric:!0}}}},general:{displayName:"General",properties:{fill:{displayName:"Background color",type:{fill:{solid:{color:!0}}}}}}}},a.DefaultFontFamily="cursive",a.DefaultFontColor="rgb(165, 172, 175)",a.DefaultBackgroundColor="#243C18",a.PaddingBetweenText=15,a}();t.CheerMeter=a}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.Color,a=jsCommon.PixelConverter,r=function(){function r(e){e&&(this.tooltipsEnabled=e.tooltipsEnabled,this.interactivityService=e.interactivityService,this.animator=e.animator)}return r.prototype.init=function(e){this.options=e;var i=this.element=e.element;this.currentViewport=e.viewport,this.style=e.style,this.host=e.host,this.colors=this.style.colorPalette.dataColors,this.interactivity=e.interactivity,this.cartesianVisualHost=e.cartesianHost,this.isInteractiveChart=e.interactivity&&e.interactivity.isInteractiveLegend,i.addClass(r.ClassName+" "+t.PlayChart.ClassName);var a=this.svg=e.svg;this.mainGraphicsG=a.append("g").classed(r.MainGraphicsContextClassName,!0),this.isInteractiveChart&&(this.mainGraphicsBackgroundRect=this.mainGraphicsG.append("rect").classed("backgroundRect",!0).attr({width:"100%",height:"100%"})),this.mainGraphicsContext=this.mainGraphicsG.append("svg"),this.labelGraphicsContext=e.labelsContext},r.getObjectProperties=function(i,a){var r={};if(i&&i.objects){var n=i.objects;r.defaultDataPointColor=e.DataViewObjects.getFillColor(n,t.columnChartProps.dataPoint.defaultColor),r.showAllDataPoints=e.DataViewObjects.getValue(n,t.columnChartProps.dataPoint.showAllDataPoints);var o=n.categoryLabels;o&&a&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(o,a),r.fillPoint=e.DataViewObjects.getValue(n,t.scatterChartProps.fillPoint.show,!1),r.colorBorder=e.DataViewObjects.getValue(n,t.scatterChartProps.colorBorder.show,!1),r.colorByCategory=e.DataViewObjects.getValue(n,t.scatterChartProps.colorByCategory.show,!1)}return r},r.converter=function(e,i){var a,n,o,s,l,u=i.viewport,c=i.colors,h=i.interactivityService,p=i.categoryAxisProperties,d=i.valueAxisProperties,g=e.categorical,m=e.metadata;g.categories&&g.categories.length>0?(a=g.categories[0].values,n=t.valueFormatter.create({format:t.valueFormatter.getFormatString(g.categories[0].source,t.scatterChartProps.general.formatString),value:a[0],value2:a[a.length-1]}),s=g.categories[0].identity,o=g.categories[0].objects,l=g.categories[0].source.queryName):(a=[null],n=t.valueFormatter.createDefaultFormatter(null));var f=g.categories,y=g.values,v=!!y.source,b=y.grouped(),C=y.source,x=r.getMetadata(b,C),S=t.dataLabelUtils.getDefaultPointLabelSettings(),w=r.getObjectProperties(m,S),D=r.createDataPoints(y,x,f,a,n,s,o,c,u,v,S,w.defaultDataPointColor,l,w.colorByCategory),P=v?r.createSeriesLegend(y,c,y,t.valueFormatter.getFormatString(C,t.scatterChartProps.general.formatString),w.defaultDataPointColor):[],L=y&&C?C.displayName:"";L||(L=f&&f.length>0&&f[0].source.displayName?f[0].source.displayName:"");var _=r.getSizeRangeForGroups(b,x.idx.size);return p&&null!==p.showAxisTitle&&p.showAxisTitle===!1&&(x.axesLabels.x=null),d&&null!==d.showAxisTitle&&d.showAxisTitle===!1&&(x.axesLabels.y=null),h&&(h.applySelectionStateToData(D),h.applySelectionStateToData(P)),{xCol:x.cols.x,yCol:x.cols.y,dataPoints:D,legendData:{title:L,dataPoints:P},axesLabels:x.axesLabels,size:x.cols.size,sizeRange:_,dataLabelsSettings:S,defaultDataPointColor:w.defaultDataPointColor,hasDynamicSeries:v,showAllDataPoints:w.showAllDataPoints,fillPoint:w.fillPoint,colorBorder:w.colorBorder,colorByCategory:w.colorByCategory}},r.getSizeRangeForGroups=function(e,i){var a={};return e&&e.forEach(function(e){var n=r.getMeasureValue(i,e.values),o=t.AxisHelper.getRangeForColumn(n);(null==a.min||a.min>o.min)&&(a.min=o.min),(null==a.max||a.max<o.max)&&(a.max=o.max)}),a},r.createDataPoints=function(e,i,a,n,o,s,l,u,c,h,p,d,g,m){for(var f=[],y=i.idx,v=t.scatterChartProps.general.formatString,b=e.source,C=e.grouped(),x=new t.ColorHelper(u,t.scatterChartProps.dataPoint.fill,d),S=0,w=n.length;w>S;S++)for(var D=n[S],P=0,L=C.length;L>P;P++){var _=C[P],N=_.values,T=r.getMeasureValue(y.x,N),V=r.getMeasureValue(y.y,N),M=r.getMeasureValue(y.size,N),A=T&&T.values?T.values[S]:null,R=V&&V.values?V.values[S]:0,I=M&&M.values?M.values[S]:null,F=null==A||null==R;
if(!F){var E=void 0;if(h)E=x.getColorForSeriesValue(_.objects,e.identityFields,_.name);else if(m)E=x.getColorForSeriesValue(l&&l[S],e.identityFields,D);else{var O=null!=M?M.source.queryName:"";E=x.getColorForMeasure(l&&l[S],O)}var G=a&&a.length>0?a[0]:null,H=t.SelectionIdBuilder.builder().withCategory(G,S).withSeries(e,_).createSelectionId(),z=[];b&&z.push({value:_.name,metadata:{source:b,values:[]}}),T&&z.push({value:A,metadata:T}),V&&z.push({value:R,metadata:V}),M&&M.values&&M.values.length>0&&z.push({value:M.values[S],metadata:M});var k=t.TooltipBuilder.createTooltipInfo(v,null,D,null,a,z),B={x:A,y:R,size:I,radius:{sizeMeasure:M,index:S},fill:E,category:null!=a?o.format(D):_.name,selected:!1,identity:H,tooltipInfo:k,labelFill:p.labelColor};f.push(B)}}return f},r.createSeriesLegend=function(e,i,a,r,n){for(var o=e.grouped(),s=new t.ColorHelper(i,t.scatterChartProps.dataPoint.fill,n),l=[],u=0,c=o.length;c>u;u++){var h=o[u],p=s.getColorForSeriesValue(h.objects,e.identityFields,h.name);l.push({color:p,icon:t.LegendIcon.Circle,label:t.valueFormatter.format(h.name,r),identity:h.identity?t.SelectionId.createWithId(h.identity):t.SelectionId.createNull(),selected:!1})}return l},r.getBubbleRadius=function(e,t,i){var a=null,n=null,o=e.sizeMeasure;if(!o)return r.BubbleRadius;var s=t.min?t.min:0,l=t.max?t.max:0,u=Math.min(s,0),c=Math.max(l,0);if(a={minRange:u,maxRange:c,delta:c-u},n=r.getBubblePixelAreaSizeRange(i,r.MinSizeRange,r.MaxSizeRange),o.values){var h=o.values[e.index];if(null!=h)return r.projectSizeToPixels(h,a,n)/2}return r.BubbleRadius},r.getMeasureValue=function(e,t){return e>=0?t[e]:null},r.getMetadata=function(e,i){var a,n,o,s=t.DataRoleHelper.getMeasureIndexOfRole(e,"X"),l=t.DataRoleHelper.getMeasureIndexOfRole(e,"Y"),u=t.DataRoleHelper.getMeasureIndexOfRole(e,"Size"),c="",h="";if(e&&e.length){var p=e[0],d=p.values.length;s>=0||(s=r.getDefaultMeasureIndex(d,l,u)),l>=0||(l=r.getDefaultMeasureIndex(d,s,u)),u>=0||(u=r.getDefaultMeasureIndex(d,s,l)),s>=0&&(a=p.values[s].source,c=p.values[s].source.displayName),l>=0&&(n=p.values[l].source,h=p.values[l].source.displayName),u>=0&&(o=p.values[u].source)}return{idx:{x:s,y:l,size:u},cols:{x:a,y:n,size:o},axesLabels:{x:c,y:h}}},r.getDefaultMeasureIndex=function(e,t,i){for(var a=0;e>a;a++)if(a!==t&&a!==i)return a},r.getDefaultData=function(){return{xCol:void 0,yCol:void 0,dataPoints:[],legendData:{dataPoints:[]},axesLabels:{x:"",y:""},sizeRange:[],dataLabelsSettings:t.dataLabelUtils.getDefaultPointLabelSettings(),defaultDataPointColor:null,hasDynamicSeries:!1}},r.prototype.renderAtFrameIndex=function(i){if(this.playData&&i<this.playData.allViewModels.length){this.data=this.playData.allViewModels[i];var a=this.render(!1),r=t.NewDataLabelUtils.getDataLabelLayoutOptions(9),n=new e.LabelLayout(r),o=a.labelDataPoints,s={labelDataPoints:o,maxNumberOfLabels:o.length},l=n.layout([s],this.currentViewport);if(t.NewDataLabelUtils.animateDefaultLabels(this.labelGraphicsContext,l,t.PlayChart.FrameAnimationDuration,!1,"linear"),r.allowLeaderLines){var u=_.filter(l,function(e){return null!=e.leaderLinePoints&&!_.isEmpty(e.leaderLinePoints)&&null!=e.identity});t.NewDataLabelUtils.drawLabelLeaderLines(this.labelGraphicsContext,u,function(e){return e.identity.getKey()})}if(this.interactivityService){var c=new t.PlayChartWebBehavior,h=new t.ScatterChartWebBehavior;a.behaviorOptions.visualBehavior=h,this.interactivityService.bind(a.dataPoints,c,a.behaviorOptions)}}},r.prototype.setData=function(e,i){var a=this;if(this.data=r.getDefaultData(),e.length>0){var n=e[0]||e[1];if(n){this.categoryAxisProperties=t.CartesianHelper.getCategoryAxisProperties(n.metadata,!0),this.valueAxisProperties=t.CartesianHelper.getValueAxisProperties(n.metadata,!0),this.dataView=n;var o={viewport:this.currentViewport,colors:this.colors,interactivityService:this.interactivityService,categoryAxisProperties:this.categoryAxisProperties,valueAxisProperties:this.valueAxisProperties},s=n.categorical&&n.categorical.categories&&n.categorical.categories[0]&&n.categorical.categories[0].source&&n.categorical.categories[0].source.roles&&n.categorical.categories[0].source.roles.Play;!n.matrix||n.categorical&&!s?(this.playData&&(t.PlayChart.clearPlayDOM(this.playData),this.playData=null),n.categorical&&n.categorical.values&&(this.data=r.converter(n,o))):(this.playData||(this.playData=t.PlayChart.getDefaultPlayData(),t.PlayChart.init(this.options,this.playData)),this.playData=t.PlayChart.setData(this.playData,n,r.converter,o,i),this.mergeSizeRanges(),this.data=this.playData.currentViewModel,this.playData.renderAtFrameIndexFn=function(e){return a.renderAtFrameIndex(e)})}}else this.playData&&(t.PlayChart.clearPlayDOM(this.playData),this.playData=null)},r.prototype.mergeSizeRanges=function(){if(this.playData&&this.playData.currentViewModel){for(var e=this.playData.currentViewModel.sizeRange,t=0,i=this.playData.allViewModels;t<i.length;t++){var a=i[t],r=a.sizeRange;null!=r.min&&(e.min=Math.min(e.min,r.min)),null!=r.max&&(e.max=Math.max(e.max,r.max))}for(var n=0,o=this.playData.allViewModels;n<o.length;n++){var s=o[n];s.sizeRange=e}}},r.prototype.calculateLegend=function(){return this.data.legendData},r.prototype.hasLegend=function(){return this.data&&this.data.hasDynamicSeries},r.prototype.enumerateObjectInstances=function(e,i){switch(i.objectName){case"colorByCategory":this.data&&(this.data.hasDynamicSeries||e.pushInstance({objectName:"colorByCategory",selector:null,properties:{show:this.data.colorByCategory}}));break;case"dataPoint":if(!this.playData){var a=this.dataView&&this.dataView.categorical?this.dataView.categorical:null;if(!t.GradientUtils.hasGradientRole(a))return this.enumerateDataPoints(e)}break;case"categoryAxis":e.pushInstance({selector:null,properties:{showAxisTitle:this.categoryAxisProperties&&null!=this.categoryAxisProperties.showAxisTitle?this.categoryAxisProperties.showAxisTitle:!0},objectName:"categoryAxis"});break;case"valueAxis":e.pushInstance({selector:null,properties:{showAxisTitle:this.valueAxisProperties&&null!=this.valueAxisProperties.showAxisTitle?this.valueAxisProperties.showAxisTitle:!0},objectName:"valueAxis"});break;case"categoryLabels":this.data?t.dataLabelUtils.enumerateCategoryLabels(e,this.data.dataLabelsSettings,!0):t.dataLabelUtils.enumerateCategoryLabels(e,null,!0);break;case"fillPoint":if(this.hasSizeMeasure())return;e.pushInstance({objectName:"fillPoint",selector:null,properties:{show:this.data.fillPoint}});break;case"colorBorder":this.hasSizeMeasure()&&e.pushInstance({objectName:"colorBorder",selector:null,properties:{show:this.data.colorBorder}})}},r.prototype.hasSizeMeasure=function(){var e=this.data.sizeRange;return e&&void 0!==e.min},r.prototype.enumerateDataPoints=function(e){var i=this.data;if(i){var a=i.dataPoints.length;if(i.hasDynamicSeries)for(var r=i.legendData.dataPoints.length,n=0;r>n;n++){var o=i.legendData.dataPoints[n];e.pushInstance({objectName:"dataPoint",displayName:o.label,selector:t.ColorHelper.normalizeSelector(o.identity.getSelector()),properties:{fill:{solid:{color:o.color}}}})}else{e.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:i.defaultDataPointColor||this.colors.getColorByIndex(0).value}}}}).pushInstance({objectName:"dataPoint",selector:null,properties:{showAllDataPoints:!!i.showAllDataPoints}});for(var n=0;a>n;n++){var s=i.dataPoints[n];e.pushInstance({objectName:"dataPoint",displayName:s.category,selector:t.ColorHelper.normalizeSelector(s.identity.getSelector(),!0),properties:{fill:{solid:{color:s.fill}}}})}}}},r.prototype.calculateAxesProperties=function(e){var i=this.data,a=i.dataPoints,r=this.currentViewport=e.viewport,n=e.margin;this.currentViewport=r,this.margin=n;var o=r.width-(n.left+n.right),s=r.height-(n.top+n.bottom),l=0,u=10,c=0,h=10;if(this.playData&&this.playData.allViewModels&&this.playData.allViewModels.length>0){this.playData.currentViewport=r;var p=t.PlayChart.getMinMaxForAllFrames(this.playData);c=p.xRange.min,h=p.xRange.max,l=p.yRange.min,u=p.yRange.max}else a.length>0&&(l=d3.min(a,function(e){return e.y}),u=d3.max(a,function(e){return e.y}),c=d3.min(a,function(e){return e.x}),h=d3.max(a,function(e){return e.x}));var d=[c,h],g=t.AxisHelper.combineDomain(e.forcedXDomain,d);this.xAxisProperties=t.AxisHelper.createAxis({pixelSpan:o,dataDomain:g,metaDataColumn:i.xCol,formatString:t.valueFormatter.getFormatString(i.xCol,t.scatterChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!1,forcedTickCount:e.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!0,scaleType:e.categoryAxisScaleType,axisDisplayUnits:e.categoryAxisDisplayUnits,axisPrecision:e.categoryAxisPrecision}),this.xAxisProperties.axis.tickSize(-s,0),this.xAxisProperties.axisLabel=this.data.axesLabels.x;var m=t.AxisHelper.combineDomain(e.forcedYDomain,[l,u]);return this.yAxisProperties=t.AxisHelper.createAxis({pixelSpan:s,dataDomain:m,metaDataColumn:i.yCol,formatString:t.valueFormatter.getFormatString(i.yCol,t.scatterChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!0,forcedTickCount:e.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:e.valueAxisScaleType,axisDisplayUnits:e.valueAxisDisplayUnits,axisPrecision:e.valueAxisPrecision}),this.yAxisProperties.axisLabel=this.data.axesLabels.y,[this.xAxisProperties,this.yAxisProperties]},r.prototype.overrideXScale=function(e){this.xAxisProperties=e},r.prototype.render=function(e){if(this.data){var i=this.data,a=this.data.dataPoints,n=this.margin,o=this.currentViewport,s=o.width-(n.left+n.right),l=o.height-(n.top+n.bottom),u=this.interactivityService&&this.interactivityService.hasSelection();this.mainGraphicsContext.attr("width",s).attr("height",l);var c=t.AnimatorCommon.GetAnimationDuration(this.animator,e);this.playData&&c>0&&(c=t.PlayChart.FrameAnimationDuration);var h,p=this.playData?"linear":"cubic-in-out";this.hasSizeMeasure()?(a=a.sort(r.sortBubbles),h=this.drawScatterMarkers(a,u,i.sizeRange,c,p),h.order()):h=this.drawScatterMarkers(a,u,i.sizeRange,c,p);var d=[];(i.dataLabelsSettings&&i.dataLabelsSettings.show||i.dataLabelsSettings.showCategory)&&(d=this.createLabelDataPoints());var g,m;this.interactivityService&&(g={host:this.cartesianVisualHost,root:this.svg,dataPointsSelection:h,mainContext:this.mainGraphicsContext,data:this.data,visualInitOptions:this.options,xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties,background:d3.select(this.element.get(0))},this.playData&&(m={data:this.playData,svg:this.mainGraphicsContext,renderTraceLine:t.PlayChart.renderScatterTraceLine,dataPointSelection:h,visualBehaviorOptions:g,xScale:this.xAxisProperties.scale,yScale:this.yAxisProperties.scale,colorBorder:this.data.colorBorder})),this.tooltipsEnabled&&t.TooltipManager.addTooltip(h,function(e){return e.data.tooltipInfo});var f;return this.playData&&(f=t.PlayChart.render(this.playData,m,this.options.interactivity,this.interactivityService,e)),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),{dataPoints:f?f.dataPoints:i.dataPoints,behaviorOptions:m&&!this.options.interactivity.isInteractiveLegend?m:g,labelDataPoints:d,labelsAreNumeric:!1}}},r.prototype.drawScatterMarkers=function(e,t,i,a,n){var o=this,s=this.xAxisProperties.scale,l=this.yAxisProperties.scale,u=(!i||!i.min)&&this.data.fillPoint,c=this.data.colorBorder,h=this.mainGraphicsContext.selectAll(r.DotClasses.selector).data(e,function(e){return e.identity.getKey()});return h.enter().append(r.ScatterChartCircleTagName).classed(r.DotClasses["class"],!0).style("opacity",0).attr("r",0),h.style({"stroke-opacity":function(e){return null!=e.size&&c?1:r.getBubbleOpacity(e,t)},"stroke-width":"1px",stroke:function(e){return r.getStrokeFill(e,c)},fill:function(e){return e.fill},"fill-opacity":function(e){return null!=e.size||u?r.getBubbleOpacity(e,t):0}}).transition().ease(n).duration(a).style("opacity",1).attr({r:function(e){return r.getBubbleRadius(e.radius,i,o.currentViewport)},cx:function(e){return s(e.x)},cy:function(e){return l(e.y)}}),h.exit().transition().ease(n).duration(a).style("opacity",0).attr("r",0).remove(),h},r.getStrokeFill=function(e,t){if(null!=e.size&&t){var a=i.parseColorString(e.fill);return i.hexString(i.darken(a,r.StrokeDarkenColorValue))}return e.fill},r.getBubblePixelAreaSizeRange=function(e,t,i){var a=1;if(e.height>0&&e.width>0){var n=Math.min(e.height,e.width);a=n*n/r.AreaOf300By300Chart}var o=Math.round(t*a),s=Math.round(i*a);return{minRange:o,maxRange:s,delta:s-o}},r.project=function(e,t,i){if(0===t.delta||0===i.delta)return r.rangeContains(t,e)?i.minRange:null;var a=(e-t.minRange)/t.delta;return i.minRange+a*i.delta},r.projectSizeToPixels=function(e,t,i){var a=0;if(t){if(a=i.maxRange,0!==t.delta){var n=Math.min(Math.max(e,t.minRange),t.maxRange);a=r.project(n,t,i)}a=2*Math.sqrt(a/Math.PI)}return Math.round(a)},r.rangeContains=function(e,t){return e.minRange<=t&&t<=e.maxRange},r.getBubbleOpacity=function(e,t){return t&&!e.selected?r.DimmedBubbleOpacity:r.DefaultBubbleOpacity},r.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},r.prototype.getSupportedCategoryAxisType=function(){return t.axisType.scalar},r.prototype.createLabelDataPoints=function(){for(var i=this.xAxisProperties.scale,n=this.yAxisProperties.scale,o=this.data.sizeRange,s=[],l=this.data.dataPoints,u=this.data.dataLabelsSettings,c=this.getPreferredLabelsKeys(l),h=0;h<l.length;h++){var p=l[h],d=p.category,g={text:d,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:a.fromPoint(u.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},m=e.TextMeasurementService.measureSvgTextWidth(g),f=e.TextMeasurementService.estimateSvgTextHeight(g);s.push({isPreferred:c?this.isLabelPreferred(p.identity.getKey(),c):!1,text:d,textSize:{width:m,height:f},outsideFill:u.labelColor?u.labelColor:t.NewDataLabelUtils.defaultLabelColor,insideFill:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:0,parentShape:{point:{x:i(p.x),y:n(p.y)},radius:r.getBubbleRadius(p.radius,o,this.currentViewport),validPositions:r.validLabelPositions},identity:p.identity,fontSize:u.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt})}return s},r.sortBubbles=function(e,t){var i=t.radius.sizeMeasure.values[t.radius.index]-e.radius.sizeMeasure.values[e.radius.index];return 0!==i?i:t.identity.getKey().localeCompare(e.identity.getKey())},r.prototype.getPreferredLabelsKeys=function(e){var i=this.currentViewport.width-(this.margin.left+this.margin.right),a=this.currentViewport.height-(this.margin.top+this.margin.bottom),r=new t.Point(i/2,a/2),n=this.getQuadrantsCenters(i,a);return this.getCandidateLabels(r,n,e)},r.prototype.getQuadrantsCenters=function(e,i){var a=[],r=e/4,n=i/4;return a.push(new t.Point(r,n)),a.push(new t.Point(3*r,n)),a.push(new t.Point(r,3*n)),a.push(new t.Point(3*r,3*n)),a},r.prototype.getCandidateLabels=function(e,t,i){for(var a,r=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],n=[],o=this.xAxisProperties.scale,s=this.yAxisProperties.scale,l=0;l<i.length;l++){var u=i[l],c=o(u.x),h=s(u.y),p=this.getPointQuadrantNumber(c,h,e);this.hasSizeMeasure()?n[p]||(n[p]=u.identity):(a=this.getDistanceBetweenPoints(t[p].x,t[p].y,c,h),a<r[p]&&(n[p]=u.identity,r[p]=a))}for(var d=[],g=0;g<n.length;g++){var m=n[g];m&&d.push(m.getKey())}return d},r.prototype.getPointQuadrantNumber=function(e,t,i){return e>i.x&&t<=i.y?0:e<=i.x&&t<=i.y?1:e<=i.x&&t>i.y?2:3},r.prototype.getDistanceBetweenPoints=function(e,t,i,a){return Math.sqrt((e-i)*(e-i)+(t-a)*(t-a))},r.prototype.isLabelPreferred=function(e,t){for(var i=0;i<t.length;i++){var a=t[i];if(0===e.localeCompare(a))return!0}return!1},r.ScatterChartCircleTagName="circle",r.BubbleRadius=6,r.DefaultBubbleOpacity=.85,r.DimmedBubbleOpacity=.4,r.StrokeDarkenColorValue=63.75,r.dataLabelLayoutStartingOffset=2,r.dataLabelLayoutOffsetIterationDelta=6,r.dataLabelLayoutMaximumOffset=r.dataLabelLayoutStartingOffset+2*r.dataLabelLayoutOffsetIterationDelta,r.AreaOf300By300Chart=9e4,r.MinSizeRange=200,r.MaxSizeRange=3e3,r.ClassName="scatterChart",r.MainGraphicsContextClassName="mainGraphicsContext",r.validLabelPositions=[e.NewPointLabelPosition.Below,e.NewPointLabelPosition.Above,e.NewPointLabelPosition.Right,e.NewPointLabelPosition.Left,e.NewPointLabelPosition.BelowRight,e.NewPointLabelPosition.BelowLeft,e.NewPointLabelPosition.AboveRight,e.NewPointLabelPosition.AboveLeft],r.DotClasses=jsCommon.CssConstants.createClassAndSelector("dot"),r}();t.ScatterChart=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){function a(e,t){t.element=e.element,t.svg=e.svg?$(e.svg.node()):null,t.currentViewport={height:e.viewport.height,width:e.viewport.width},t.host=e.host}function r(t,i){var a={categories:[],values:e.data.DataViewTransform.createValueColumns()};if(t.rows.levels.length<2&&0===t.columns.levels.length)return a;var r={source:t.rows.levels.length>1?t.rows.levels[1].sources[0]:t.columns.levels[0].sources[0],values:[],objects:void 0,identity:[]},n=t.rows.root.children,o=t.columns.root.children,s=t.columns.levels.length>1&&o,l=t.rows.levels.length>1&&n;if(s&&!l){a.categories=void 0;var u=t.columns.root;a.values.source=t.columns.levels[0].sources[0];for(var c=t.valueSources.length,h=0,p=u.children.length;p>h;h++)for(var d=u.children[h],g=0;c>g;g++){var m=_.create(t.valueSources[g],{groupName:d.value}),f={identity:d.identity,values:[],source:m};a.values.push(f)}for(var y=t.rows.root.children[i],h=0,p=u.children.length;p>h;h++)for(var g=0;c>g;g++)a.values[h*c+g].values.push(y.values[h*c+g].value)}else if(s&&n){for(var u=t.rows.root.children[i],h=0,p=u.children.length;p>h;h++){var v=u.children[h];r.identity.push(v.identity),r.values.push(v.value)}a.values.source=t.columns.levels[0].sources[0];for(var b=[],d=t.columns.root,C=-1;d;){if(d.children&&d.children[0].children)for(var g=0,x=d.children.length;x>g;g++)b.push(d.children[g]);else if(d.children&&u.children){for(var c=d.children.length,g=0;c>g;g++){var m=_.create(t.valueSources[g],{groupName:d.value}),f={identity:d.identity,values:[],source:m};a.values.push(f)}for(var h=0,p=u.children.length;p>h;h++)for(var v=u.children[h],g=0;c>g;g++)a.values[C*c+g].values.push(v.values[C*c+g].value)}b.length>0?(d=b[0],b=b.splice(1),C++):d=void 0}}else if(l){for(var u=t.rows.root.children[i],S=t.valueSources.length,g=0;S>g;g++){var f={identity:void 0,values:[],source:t.valueSources[g]};a.values.push(f)}for(var h=0,p=u.children.length;p>h;h++){var v=u.children[h];r.identity.push(v.identity),r.values.push(v.value);for(var g=0;S>g;g++)a.values[g].values.push(v.values[g].value)}}return a.categories&&a.categories.push(r),a}function n(i,a){var r={};if(i&&i.objects){var n=i.objects;r.currentFrameIndex=e.DataViewObjects.getValue(n,t.scatterChartProps.currentFrameIndex.index,null)}return r}function o(e,a,r){var o=e.metadata,s=t.dataLabelUtils.getDefaultPointLabelSettings(),l=n(o,s),u=[],c=[],h=void 0,p=e.matrix.rows,d=p.root.children?p.root.children.length:0;if(e.matrix&&d>0)for(var g=p.levels[0].sources[0],m=t.valueFormatter.create({format:t.valueFormatter.getFormatString(g,t.scatterChartProps.general.formatString),value:p.root.children[0],value2:p.root.children[d-1]}),f=0,y=d;y>f;f++){var v=p.root.children[f];c.push(m.format(v.value));var b=i.convertMatrixToCategorical(e.matrix,f);h=a({metadata:e.metadata,categorical:b},r),u.push(h)}else{var b=i.convertMatrixToCategorical(e.matrix,0);h=a({metadata:e.metadata,categorical:b},r),u.push(h)}return l.currentFrameIndex=c.length-1,{isPlaying:!1,allViewModels:u,currentViewModel:h,frameKeys:c,currentFrameIndex:l.currentFrameIndex,lastRenderedViewport:{width:0,height:0}}}function s(){var e={frameKeys:[]};return e}function l(e,t,a,r,n){if(e&&r.viewport&&(e.currentViewport={height:r.viewport.height,width:r.viewport.width}),t){if(e&&e.ridiculousFlagForPersistProperties&&t.metadata)return e.ridiculousFlagForPersistProperties=!1,e;if(t.matrix||t.categorical){if(n)return e;var o=i.converter(t,a,r);if(o&&e)return o.element=e.element,o.svg=e.svg,o.host=e.host,o.callout=e.callout,o.playAxisContainer=e.playAxisContainer,o.playButton=e.playButton,o.slider=e.slider,o.playButtonCircle=e.playButtonCircle,o.ridiculousFlagForPersistProperties=e.ridiculousFlagForPersistProperties,o.renderAtFrameIndexFn=e.renderAtFrameIndexFn,o}}return s()}function u(e){var t=0,i=10,a=0,r=10;if(e.allViewModels&&e.allViewModels.length>0){t=a=Number.MAX_VALUE,i=r=Number.MIN_VALUE;for(var n=0,o=e.allViewModels.length;o>n;n++){var s=e.allViewModels[n].dataPoints;t=Math.min(d3.min(s,function(e){return e.y}),t),i=Math.max(d3.max(s,function(e){return e.y}),i),a=Math.min(d3.min(s,function(e){return e.x}),a),r=Math.max(d3.max(s,function(e){return e.x}),r)}}return{xRange:{min:a,max:r},yRange:{min:t,max:i}}}function c(e){e&&(e.playAxisContainer&&e.playAxisContainer.remove(),e.callout&&e.callout.remove())}function h(e,t,i){e.playAxisContainer=$('<div class="play-axis-container"></div>').appendTo(e.element),e.playButtonCircle=$('<div class="button-container"></div>').appendTo(e.playAxisContainer),e.playButton=$('<div class="play"></div>').appendTo(e.playButtonCircle),e.slider=$('<div class="sliders"></div>').appendTo(e.playAxisContainer)}function p(e,t,i,a){t[0].noUiSlider&&t[0].noUiSlider.destroy();var r=e.frameKeys.length;if(r>0){var n=g(e,i,a),o=r-1;noUiSlider.create(t[0],{step:1,start:[e.currentFrameIndex],range:{min:[0],max:[o]},pips:{mode:"steps",density:Math.round(100/r),format:{to:function(t){return e.frameKeys[t]},from:function(t){return e.frameKeys.indexOf(t)}},filter:n}}),t[0].noUiSlider.on("slide",function(){e.isPlaying=!1;var i=Math.round(t[0].noUiSlider.get());if(i>=0&&i!==e.currentFrameIndex&&i<e.allViewModels.length){e.currentFrameIndex=i;var a=e.allViewModels[i];e.currentViewModel=a,e.renderAtFrameIndexFn(i)}})}else noUiSlider.create(t[0],{step:1,start:[0],range:{min:[0],max:[0]}});$(".noUi-value",t).each(function(e,t){var i=a.labelInfo.filter(function(e){return e.label===$(t).text()})[0].labelWidth;$(t).width(i),$(t).css("margin-left",-i/2+"px")})}function d(t){for(var i={fontFamily:"wf_segoe-ui_normal",fontSize:jsCommon.PixelConverter.toString(14)},a=[],r=!1,n=0,o=t.frameKeys;n<o.length;n++){var s=o[n],l=jsCommon.WordBreaker.getMaxWordWidth(s+"",e.TextMeasurementService.measureSvgTextWidth,i);r=r||jsCommon.WordBreaker.hasBreakers(s)||s.indexOf("-")>-1,a.push({label:s,labelWidth:l})}return{labelInfo:a,anyWordBreaks:r}}function g(e,t,i){var a=_.max(i.labelInfo,"labelWidth").labelWidth,r=1,n=1,o=e.frameCount>1?t/(e.frameCount-1):t,s=a/o;s>1.25?(n=Math.ceil(s),r=2):(s>1||i.anyWordBreaks)&&(r=2);var l=function(e,t){return e%n===0?r:0};return l}function m(e){var t=$(".legend",e.element),i=0,a=0;if(e.playAxisContainer&&(e.playAxisContainer.css("left",""),e.playAxisContainer.css("bottom","")),t.length>0){var r=16;e.callout.css("right",""),e.callout.css("top","");var n=t.css("float"),o=t.css("bottom");"right"===n?e.callout.css("right",t.width()+r):"left"===n?i=t.width():("none"===n||""===n)&&(""===o||"inherit"===o||"auto"===o?e.callout.css("top",t.height()+r):a=t.height()+35),e.playAxisContainer&&(i&&e.playAxisContainer.css("left",i),a&&e.playAxisContainer.css("bottom",a))}}function f(e,t,a,r,n){if(!e)return{dataPoints:[],behaviorOptions:null,labelDataPoints:null,labelsAreNumeric:!1};var o=!1;r&&(r.applySelectionStateToData(e.currentViewModel.dataPoints),o=r.hasSelection());var s=e.frameKeys,l=e.currentFrameIndex,u=e.currentViewport.height,c=e.currentViewport.width;e.playAxisContainer||!r||a.isInteractiveLegend||h(e,t,r),e.playAxisContainer&&(e.playButtonCircle.off("click"),e.playButtonCircle.on("click",function(){i.play(e,t,r)})),e.callout||(e.callout=$('<span class="callout"></span>').appendTo(e.element)),m(e);var g=d(e),f=g.labelInfo.length,y=S,v=w;f>0&&(y=Math.max(g.labelInfo[0].labelWidth/2,y),v=Math.max(g.labelInfo[f-1].labelWidth/2,v),y=Math.min(D,y),v=Math.min(D,v));var b=e.slider,C=c-y-v;1>C&&(C=1),b&&b.css("width",C+"px");var x=e.currentViewport.width!==e.lastRenderedViewport.width||e.currentViewport.height!==e.lastRenderedViewport.height,P=!e.playAxisContainer||s.length!==e.frameCount||x;e.frameCount&&(s.length!==e.frameCount||l>=s.length)&&(l=s.length-1),P&&b&&(e.frameCount=s.length,p(e,b,C,g));var L=Math.min(u,1.3*c),N=Math.max(12,Math.round(L/7));if(N=Math.min(N,70),l<s.length&&l>=0){e.callout.width("auto"),e.callout.height("auto"),e.callout.text(s[l]).css("font-size",N+"px");var T=getComputedStyle(e.callout[0]),V=Math.ceil(parseFloat(T.width)),M=Math.ceil(parseFloat(T.height));e.callout.width(Math.min(V,C)),e.callout.height(M)}else e.callout.text("");b&&b[0].noUiSlider.set([l]),e.lastRenderedViewport={height:e.currentViewport.height,width:e.currentViewport.width};var A=e.allViewModels.map(function(e){return e.dataPoints}),R=_.flatten(A);if(r&&o&&t){var I=_.uniq(R,function(e){return e.identity.getKey()});t.renderTraceLine(t,_.filter(I,"selected"),!n)}return{dataPoints:R,behaviorOptions:t,labelDataPoints:null,labelsAreNumeric:!1}}function y(e,a,r){var n=[];if(a&&a.length>0){for(var o=e.data.currentFrameIndex,s=e.data.lastRenderedTraceFrameIndex,l=[],u=0,c=a.length;c>u;u++){n[u]=[],l[u]=!1;for(var h=0,p=e.data.allViewModels.length;p>h&&o>=h;h++){var d=e.data.allViewModels[h].dataPoints.filter(function(e,t){return e.identity.getKey()===a[u].identity.getKey()});if(d&&d.length>0){var g=d[0];g.frameIndex=h,n[u].push(g),h===o&&(l[u]=!0)}}}if(n.length>0){var m=e.xScale,f=e.yScale,y=d3.svg.line().x(function(e){return m(e.x)}).y(function(e){return f(e.y)}).defined(function(e){return null!==e.x&&null!==e.y}),v=e.svg.selectAll(".traceLine").data(a,function(e){return e.identity.getKey()});v.enter().append("path").classed("traceLine",!0);var b=[],C=[];v.each(function(e,t){var i=this,a=i.hasAttribute("d")?i.getTotalLength():0;b.push(a);var r=$("<svg><path></path></svg>"),o=$("path",r);o.attr("d",y(n[t]));var s=n[t].length>0?o.get()[0].getTotalLength():0;C.push(s)}),null==s||o>=s?(v.style("stroke",function(e){return t.ScatterChart.getStrokeFill(e,!0)}).attr({d:function(e,t){return y(n[t])},"stroke-dasharray":function(e,t){return C[t]+" "+C[t]},"stroke-dashoffset":function(e,t){return C[t]-b[t]}}),r?v.transition().ease("linear").duration(i.FrameAnimationDuration).attr("stroke-dashoffset",0):v.attr("stroke-dashoffset",0)):r?v.transition().ease("linear").duration(i.FrameAnimationDuration).attr("stroke-dashoffset",function(e,t){return b[t]-C[t]}).transition().ease("linear").duration(1).delay(i.FrameAnimationDuration).style("stroke",function(e){return t.ScatterChart.getStrokeFill(e,!0)}).attr({d:function(e,t){return y(n[t])},"stroke-dasharray":function(e,t){return C[t]+" "+C[t]},"stroke-dashoffset":0}):v.style("stroke",function(e){return t.ScatterChart.getStrokeFill(e,!0)}).attr({d:function(e,t){return y(n[t])},"stroke-dasharray":function(e,t){return C[t]+" "+C[t]},"stroke-dashoffset":0}),v.exit().remove();for(var x=[],S=0;S<n.length;S++){var w=n[S],D=l[S]?w.slice(0,w.length-1):w;x=x.concat(D)}var P=e.svg.selectAll(".traceBubble").data(x,function(e){return e.identity.getKey()+e.x+e.y+e.size});P.enter().append("circle").style("opacity",0).classed("traceBubble",!0),P.attr("cx",function(e){return m(e.x)}).attr("cy",function(e){return f(e.y)}).attr("r",function(i){return t.ScatterChart.getBubbleRadius(i.radius,e.data.currentViewModel.sizeRange,e.data.currentViewport)}).style({"stroke-opacity":function(e){return t.ScatterChart.getBubbleOpacity(e,!0)},"stroke-width":"1px",stroke:function(i){return t.ScatterChart.getStrokeFill(i,e.colorBorder)},fill:function(e){return e.fill},"fill-opacity":function(e){return null!=e.size?.2+e.frameIndex/o*.6:0}}).transition().ease("linear").duration(i.FrameAnimationDuration).style("opacity",1),P.exit().transition().ease("linear").duration(i.FrameAnimationDuration).style("opacity",0).remove(),t.TooltipManager.addTooltip(P,function(e){return e.data.tooltipInfo}),P.sort(function(e,t){return t.size-e.size}),e.data.lastRenderedTraceFrameIndex=e.data.currentFrameIndex}else e.svg.selectAll(".traceLine").remove(),e.svg.selectAll(".traceBubble").remove(),e.data.lastRenderedTraceFrameIndex=null}else e.svg.selectAll(".traceLine").remove(),e.svg.selectAll(".traceBubble").remove(),e.data.lastRenderedTraceFrameIndex=null}function v(e,t,i){if(e.isPlaying)e.isPlaying=!1;else if(null!=e.slider[0].noUiSlider){e.isPlaying=!0,e.playButton.removeClass("play").addClass("pause");var a=Math.round(e.slider[0].noUiSlider.get());a>=e.allViewModels.length-1?e.currentFrameIndex=-1:e.currentFrameIndex=a-1,b(e,t,i)}}function b(e,t,i,a,r){if(!e.isPlaying)return void C(e,t,i);var n=e.currentFrameIndex+1;if(null!=a&&null!=r&&(n=Math.abs(r-a+1),a=n),n<e.allViewModels.length&&n>-1){if(e.currentFrameIndex=n,e.currentViewModel=e.allViewModels[n],e.renderAtFrameIndexFn(n),e.slider[0].noUiSlider.set([n]),n<e.allViewModels.length){var o=x;window.setTimeout(function(){e.slider[0].noUiSlider.set([n]),b(e,t,i,a,r)},o)}}else C(e,t,i)}function C(e,t,i){e.playButton.removeClass("pause").addClass("play"),e.isPlaying=!1}var x=800;i.FrameAnimationDuration=750;var S=59,w=20,D=100;i.ClassName="playChart",i.init=a,i.convertMatrixToCategorical=r,i.converter=o,i.getDefaultPlayData=s,i.setData=l,i.getMinMaxForAllFrames=u,i.clearPlayDOM=c,i.render=f,i.renderScatterTraceLine=y,i.play=v}(i=t.PlayChart||(t.PlayChart={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=t.SlicerUtil.DisplayNameKeys,a=t.SlicerUtil.DOMHelper,r=t.SlicerUtil.SettingsHelper,n=t.slicerOrientation.Orientation,o=function(){function o(e){e&&(this.behavior=e.behavior),this.domHelper=new a}return o.DefaultStyleProperties=function(){return{general:{outlineColor:"#808080",outlineWeight:1,orientation:n.Vertical},header:{borderBottomWidth:1,show:!0,outline:"BottomOnly",fontColor:"#000000",textSize:10},slicerText:{color:"#666666",outline:"None",textSize:10},selection:{selectAllCheckboxEnabled:!1,singleSelect:!0}}},o.prototype.init=function(e){this.initOptions=e,this.element=e.element,this.currentViewport=e.viewport,this.hostServices=e.host;var t=this.settings=o.DefaultStyleProperties();this.slicerOrientation=t.general.orientation,this.waitingForData=!1,this.initializeSlicerRenderer(this.slicerOrientation)},o.prototype.onDataChanged=function(t){var i=t.dataViews;if(!_.isEmpty(i)){var a=this.dataView;this.dataView=i[0];var r=t.operationKind!==e.VisualDataChangeOperationKind.Append&&!e.DataViewAnalysis.hasSameCategoryIdentity(a,this.dataView),n=this.dataView.metadata;this.renderAsImage=n&&!_.isEmpty(n.columns)&&n.columns[0].type&&n.columns[0].type.misc&&n.columns[0].type.misc.imageUrl?jsCommon.Utility.isValidUrl:$.noop,this.render(r,!0)}},o.prototype.onResizing=function(e){this.currentViewport=e,this.render(!1)},o.prototype.enumerateObjectInstances=function(e){return s.enumerateObjectInstances(e,this.slicerData,this.settings)},o.prototype.loadMoreData=function(){var e=this.dataView;if(e){var t=e.metadata;!this.waitingForData&&t&&t.segment&&(this.hostServices.loadMoreData(),this.waitingForData=!0)}},o.prototype.render=function(e,a){var n=this,s=this.hostServices.getLocalizedString(i.SelectAll);t.DataConversion.convert(this.dataView,s,this.interactivityService,this.hostServices).then(function(t){if(t){t.slicerSettings.general.outlineWeight=t.slicerSettings.general.outlineWeight<0?0:t.slicerSettings.general.outlineWeight,n.settings=t.slicerSettings,n.slicerData=t;var i=r.areSettingsDefined(t)&&t.slicerSettings.general&&t.slicerSettings.general.orientation?t.slicerSettings.general.orientation:o.DefaultStyleProperties().general.orientation,s=n.orientationHasChanged(i);s&&(n.slicerOrientation=i,n.element.empty(),n.initializeSlicerRenderer(i)),n.slicerRenderer.render({dataView:n.dataView,data:t,viewport:n.currentViewport,renderAsImage:n.renderAsImage,resetScrollbarPosition:e}),a&&(n.waitingForData=!1)}})},o.prototype.orientationHasChanged=function(e){
return this.slicerOrientation!==e},o.prototype.initializeSlicerRenderer=function(e){switch(e){case n.Horizontal:this.initializeHorizontalSlicer();break;case n.Vertical:this.initializeVerticalSlicer()}},o.prototype.initializeVerticalSlicer=function(){var e=this.slicerRenderer=new t.VerticalSlicerRenderer({domHelper:this.domHelper,behavior:this.behavior}),i=this.createInitOptions();this.interactivityService=e.init(i)},o.prototype.initializeHorizontalSlicer=function(){var e=this.slicerRenderer=new t.HorizontalSlicerRenderer({domHelper:this.domHelper,behavior:this.behavior}),i=this.createInitOptions();this.interactivityService=e.init(i)},o.prototype.createInitOptions=function(){var e=this;return{visualInitOptions:this.initOptions,loadMoreData:function(){return e.loadMoreData()}}},o}();t.Slicer=o;var s;!function(e){function t(e,t,r){if(t)switch(e.objectName){case"items":return n(t,r);case"header":return a(t,r);case"general":return o(t,r);case"selection":return i(t,r)}}function i(e,t){var i=t,a=r.areSettingsDefined(e)&&e.slicerSettings.selection,n=a&&e.slicerSettings.selection.selectAllCheckboxEnabled?e.slicerSettings.selection.selectAllCheckboxEnabled:i.selection.selectAllCheckboxEnabled,o=e&&e.slicerSettings&&e.slicerSettings.selection&&void 0!==e.slicerSettings.selection.singleSelect?e.slicerSettings.selection.singleSelect:i.selection.singleSelect;return[{selector:null,objectName:"selection",properties:{selectAllCheckboxEnabled:n,singleSelect:o}}]}function a(e,t){var i=t,a=r.areSettingsDefined(e)&&e.slicerSettings.header,n=a&&e.slicerSettings.header.fontColor?e.slicerSettings.header.fontColor:i.header.fontColor,o=a&&e.slicerSettings.header.background?e.slicerSettings.header.background:i.header.background;return[{selector:null,objectName:"header",properties:{show:i.header.show,fontColor:n,background:o,outline:i.header.outline,textSize:i.header.textSize}}]}function n(e,t){var i=t,a=r.areSettingsDefined(e)&&e.slicerSettings.slicerText,n=a&&e.slicerSettings.slicerText.color?e.slicerSettings.slicerText.color:i.slicerText.color,o=a&&e.slicerSettings.slicerText.background?e.slicerSettings.slicerText.background:i.slicerText.background;return[{selector:null,objectName:"items",properties:{fontColor:n,background:o,outline:i.slicerText.outline,textSize:i.slicerText.textSize}}]}function o(e,t){var i=t,a=r.areSettingsDefined(e)&&null!=e.slicerSettings.general,n=a&&e.slicerSettings.general.outlineColor?e.slicerSettings.general.outlineColor:i.general.outlineColor,o=a&&e.slicerSettings.general.outlineWeight?e.slicerSettings.general.outlineWeight:i.general.outlineWeight,s=a&&null!=e.slicerSettings.general.orientation?e.slicerSettings.general.orientation:i.general.orientation;return[{selector:null,objectName:"general",properties:{outlineColor:n,outlineWeight:o,orientation:s}}]}e.enumerateObjectInstances=t}(s||(s={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=t.controls.internal.TablixUtils,a=function(){function a(e,t){this.tableDataView=e,this.formatter=t}return a.prototype.getDepth=function(e){return 1},a.prototype.getLeafCount=function(e){return e.length},a.prototype.getLeafAt=function(e,t){return e[t]},a.prototype.getParent=function(e){return null},a.prototype.getIndex=function(e){return e?this.isRow(e)?e.index:this.getColumnIndex(e):-1},a.prototype.isRow=function(e){if(!e)return!1;var t=e;return void 0!==t.index&&void 0!==t.values},a.prototype.getColumnIndex=function(e){return a.getIndex(this.tableDataView.columns,e)},a.prototype.isLeaf=function(e){return!0},a.prototype.isRowHierarchyLeaf=function(e){return!1},a.prototype.isColumnHierarchyLeaf=function(e){return!0},a.prototype.isLastItem=function(e,t){return!1},a.prototype.getChildren=function(e){return null},a.prototype.getCount=function(e){return e.length},a.prototype.getAt=function(e,t){return e[t]},a.prototype.getLevel=function(e){return 0},a.prototype.getIntersection=function(e,r){var n,o=!1,s=!1,l=a.getIndex(this.tableDataView.columns,r),u=0===l?!0:!1,c=e;if(null!=c.totalCells)o=!0,n=c.totalCells[l];else{var h=this.tableDataView.visualRows[this.tableDataView.visualRows.length-1];s=h===e,n=e.values[l]}var p,d,g=this.formatter(n,r,i.TablixFormatStringProp);return i.isValidStatusGraphic(r.kpi,g)?p=i.createKpiDom(r.kpi,g):d=g,{textContent:d,domContent:p,isMeasure:r.isMeasure,isTotal:o,isBottomMost:s,showUrl:t.UrlHelper.isValidUrl(r,g),showImage:t.UrlHelper.isValidImage(r,g),isLeftMost:u}},a.prototype.getCorner=function(e,t){return null},a.prototype.headerItemEquals=function(t,i){if(t===i)return!0;if(t.displayName&&i.displayName){var a=t,r=i;return e.DataViewAnalysis.areMetadataColumnsEquivalent(a,r)}return this.isRow(t)&&this.isRow(i)?t.index===i.index:!1},a.prototype.bodyCellItemEquals=function(e,t){return e===t},a.prototype.cornerCellItemEquals=function(e,t){return!0},a.prototype.update=function(e){this.tableDataView=e},a.getIndex=function(e,t){for(var i=0,a=e.length;a>i;i++){var r=e[i];if(null!=r.index&&null!=t.index&&r.index===t.index)return i;if(t===e[i])return i}return-1},a}();t.TableHierarchyNavigator=a;var r=function(){function e(e){this.options=e}return e.prototype.onDataViewChanged=function(e){this.tableDataView=e,this.formattingProperties=e.formattingProperties},e.prototype.setTablixColumnSeparator=function(e){this.formattingProperties.columns.showSeparators&&e.extension.setColumnSeparator(this.formattingProperties.columns.separatorColor,this.formattingProperties.columns.separatorWeight)},e.prototype.setTablixRegionStyle=function(e,i,a,r,n,o){""!==i&&e.extension.setFontColor(i),a&&e.extension.setBackgroundColor(a);var s=t.VisualBorderUtil.getBorderStyleWithWeight(r,n),l=t.VisualBorderUtil.getBorderWidth(r,n);e.extension.setOutline(s,o,l)},e.prototype.onStartRenderingSession=function(){},e.prototype.onEndRenderingSession=function(){},e.prototype.bindRowHeader=function(e,t){this.ensureHeight(e,t),this.options.onBindRowHeader&&this.options.onBindRowHeader(e)},e.prototype.unbindRowHeader=function(e,t){},e.prototype.bindColumnHeader=function(t,r){var n=this,o=a.getIndex(this.tableDataView.columns,t);if(r.extension.setContainerStyle(e.columnHeaderClassName),r.extension.disableDragResize(),r.extension.contentHost.textContent=t.displayName,this.sortIconsEnabled()&&i.appendSortImageToColumnHeader(t,r),this.options.onColumnHeaderClick){var s=function(e){var a=i.reverseSort(t.sort);n.options.onColumnHeaderClick(t.queryName?t.queryName:t.displayName,a)};r.extension.registerClickHandler(s)}this.formattingProperties&&(this.setTablixRegionStyle(r,this.formattingProperties.header.fontColor,this.formattingProperties.header.backgroundColor,this.formattingProperties.header.outline,this.formattingProperties.general.outlineWeight,this.formattingProperties.general.outlineColor),o>0&&this.setTablixColumnSeparator(r))},e.prototype.unbindColumnHeader=function(e,t){t.extension.clearContainerStyle(),t.extension.contentHost.textContent="",this.sortIconsEnabled()&&i.removeSortIcons(t),this.options.onColumnHeaderClick&&t.extension.unregisterClickHandler()},e.prototype.bindBodyCell=function(t,a){t.showUrl?i.appendATagToBodyCell(t.textContent,a):t.showImage?i.appendImgTagToBodyCell(t.textContent,a):_.isEmpty(t.domContent)?t.textContent&&(a.extension.contentHost.textContent=t.textContent):$(a.extension.contentHost).append(t.domContent);var r=t.isTotal?e.footerClassName:t.isBottomMost?e.lastRowClassName:e.rowClassName;if(t.isMeasure&&(r+=" "+e.numericCellClassName),a.extension.setContainerStyle(r),this.formattingProperties){var n=t.isTotal?this.formattingProperties.totals.fontColor:this.formattingProperties.rows.fontColor,o=t.isTotal?this.formattingProperties.totals.backgroundColor:this.formattingProperties.rows.backgroundColor,s=t.isTotal?this.formattingProperties.totals.outline:this.formattingProperties.rows.outline;this.setTablixRegionStyle(a,n,o,s,this.formattingProperties.general.outlineWeight,this.formattingProperties.general.outlineColor),this.formattingProperties.rows.showSeparators&&a.extension.setRowSeparator(),t.isLeftMost||this.setTablixColumnSeparator(a)}},e.prototype.unbindBodyCell=function(e,t){t.extension.clearContainerStyle(),t.extension.contentHost.textContent=""},e.prototype.bindCornerCell=function(e,t){},e.prototype.unbindCornerCell=function(e,t){},e.prototype.bindEmptySpaceHeaderCell=function(e){},e.prototype.unbindEmptySpaceHeaderCell=function(e){},e.prototype.bindEmptySpaceFooterCell=function(e){},e.prototype.unbindEmptySpaceFooterCell=function(e){},e.prototype.getHeaderLabel=function(e){return e.displayName},e.prototype.getCellContent=function(e){return e},e.prototype.hasRowGroups=function(){return!1},e.prototype.ensureHeight=function(t,i){if(t.values){var a=t.values.length;if(0!==a){for(var r=!0,n=0;a>n;n++)if(t.values[n]){r=!1;break}r&&(i.extension.contentHost.innerHTML=e.nonBreakingSpace)}}},e.prototype.sortIconsEnabled=function(){return this.options.layoutKind===t.controls.TablixLayoutKind.Canvas},e.sortIconContainerClassName="bi-sort-icon-container",e.columnHeaderClassName="bi-table-column-header",e.rowClassName="bi-table-row",e.lastRowClassName="bi-table-last-row",e.footerClassName="bi-table-footer",e.numericCellClassName="bi-table-cell-numeric",e.nonBreakingSpace="&nbsp;",e}();t.TableBinder=r;var n=function(){function n(e){this.isFormattingPropertiesEnabled=e}return n.customizeQuery=function(e){var t=e.dataViewMappings[0];if(t&&t.table&&t.metadata){var a=t.table.rows,r=t.metadata.objects;a["for"]["in"].subtotalType=i.shouldShowTableTotals(r)?1:0}},n.getSortableRoles=function(){return["Values"]},n.prototype.init=function(e){this.element=e.element,this.style=e.style,this.updateViewport(e.viewport),this.formatter=t.valueFormatter.formatValueColumn,this.isInteractive=e.interactivity&&null!=e.interactivity.selection,this.getLocalizedString=e.host.getLocalizedString,this.hostServices=e.host,this.waitingForData=!1,this.lastAllowHeaderResize=!0,this.waitingForSort=!1},n.converter=function(t,a){var r=t.table,n=e.Prototype.inherit(r);n.visualRows=[];for(var o=0;o<r.rows.length;o++){var s={index:o,values:r.rows[o]};n.visualRows.push(s)}return a&&(n.formattingProperties=i.getTableFormattingProperties(t)),n},n.prototype.onResizing=function(e){this.updateViewport(e)},n.prototype.getColumnWidthManager=function(){return this.columnWidthManager},n.prototype.onDataChanged=function(t){if(this.columnWidthManager&&this.columnWidthManager.suppressOnDataChangedNotification)return void(this.columnWidthManager.suppressOnDataChangedNotification=!1);var a=this.dataView,r=t.dataViews;if(r&&r.length>0){this.dataView=r[0];var o=n.converter(this.dataView,this.isFormattingPropertiesEnabled),s=o.formattingProperties?o.formattingProperties.general.textSize:i.getTextSize(this.dataView.metadata.objects);if(t.operationKind===e.VisualDataChangeOperationKind.Append)this.hierarchyNavigator.update(o),this.tablixControl.updateModels(!1,o.visualRows),this.refreshControl(!1);else{this.createOrUpdateHierarchyNavigator(o),this.createColumnWidthManager(),this.createTablixControl(s);var l=this.tablixControl.getBinder();l.onDataViewChanged(o),this.populateColumnWidths(),this.updateInternal(this.dataView,s,a,o)}}this.waitingForData=!1,this.waitingForSort=!1},n.prototype.populateColumnWidths=function(){this.columnWidthManager&&(this.columnWidthManager.deserializeTablixColumnWidths(),this.columnWidthManager.persistColumnWidthsOnHost()&&this.persistColumnWidths(this.columnWidthManager.getVisualObjectInstancesToPersist()))},n.prototype.columnWidthChanged=function(e,t){this.columnWidthManager.columnWidthChanged(e,t),this.persistColumnWidths(this.columnWidthManager.getVisualObjectInstancesToPersist())},n.prototype.persistColumnWidths=function(e){this.hostServices.persistProperties(e)},n.prototype.updateViewport=function(e){this.currentViewport=e,this.tablixControl&&(this.tablixControl.viewport=this.currentViewport,this.verifyHeaderResize(),this.refreshControl(!1))},n.prototype.refreshControl=function(e){(t.visibilityHelper.partiallyVisible(this.element)||this.getLayoutKind()===t.controls.TablixLayoutKind.DashboardTile)&&this.tablixControl.refresh(e)},n.prototype.getLayoutKind=function(){return this.isInteractive?t.controls.TablixLayoutKind.Canvas:t.controls.TablixLayoutKind.DashboardTile},n.prototype.createOrUpdateHierarchyNavigator=function(e){if(this.tablixControl)this.hierarchyNavigator.update(e);else{var t=new a(e,this.formatter);this.hierarchyNavigator=t}},n.prototype.createTablixControl=function(e){this.tablixControl||(this.tablixControl=this.createControl(this.hierarchyNavigator,e))},n.prototype.createColumnWidthManager=function(){var e=this;this.columnWidthManager?this.columnWidthManager.updateDataView(this.dataView):(this.columnWidthManager=new t.controls.TablixColumnWidthManager(this.dataView,!1),this.columnWidthManager.columnWidthResizeCallback=function(t,i){return e.columnWidthChanged(t,i)})},n.prototype.createControl=function(e,a){var n=this,o=this.getLayoutKind(),s={onBindRowHeader:function(e){return n.onBindRowHeader(e)},onColumnHeaderClick:function(e,t){return n.onColumnHeaderClick(e,t)},layoutKind:o},l=new r(s),u=o===t.controls.TablixLayoutKind.DashboardTile?t.controls.internal.DashboardTablixLayoutManager.createLayoutManager(l):t.controls.internal.CanvasTablixLayoutManager.createLayoutManager(l,this.columnWidthManager),c=document.createElement("div");this.element.append(c);var h={interactive:this.isInteractive,enableTouchSupport:!1,layoutKind:o,fontSize:i.getTextSizeInPx(a)};return new t.controls.TablixControl(e,u,l,c,h)},n.prototype.updateInternal=function(e,a,r,n){var o=this;this.getLayoutKind()===t.controls.TablixLayoutKind.DashboardTile&&this.tablixControl.layoutManager.adjustContentSize(t.UrlHelper.hasImageColumn(e)),this.tablixControl.fontSize=i.getTextSizeInPx(a),this.verifyHeaderResize(),this.tablixControl.updateModels(!0,n.visualRows,n.columns);var s=this.createTotalsRow(e);this.tablixControl.rowDimension.setFooter(s),this.tablixControl.viewport=this.currentViewport;var l=this.shouldClearControl(r,e);setTimeout(function(){o.refreshControl(l),o.columnWidthManager.persistAllColumnWidths(o.tablixControl.layoutManager.columnWidthsToPersist),o.columnWidthManager.persistColumnWidthsOnHost()&&o.persistColumnWidths(o.columnWidthManager.getVisualObjectInstancesToPersist())},0)},n.prototype.shouldClearControl=function(t,i){return this.waitingForSort&&t&&i?!e.DataViewAnalysis.isMetadataEquivalent(t.metadata,i.metadata):!0},n.prototype.createTotalsRow=function(e){if(!i.shouldShowTableTotals(e.metadata.objects))return null;var t=e.table.totals;if(!t||0===t.length)return null;for(var a=[],r=e.table.columns,n=0,o=r.length;o>n;++n){var s=r[n],l=t[s.index];null!=l?a.push(l):a.push(0===n?this.getLocalizedString("TableTotalLabel"):"")}return{totalCells:a}},n.prototype.onBindRowHeader=function(e){this.needsMoreData(e)&&(this.hostServices.loadMoreData(),this.waitingForData=!0)},n.prototype.onColumnHeaderClick=function(e,t){var i=[{queryName:e,sortDirection:t}],a={sortDescriptors:i};this.waitingForSort=!0,this.hostServices.onCustomSort(a)},n.prototype.needsMoreData=function(e){if(this.waitingForData||!this.dataView.metadata||!this.dataView.metadata.segment)return!1;var t=this.tablixControl.rowDimension.getItemsCount(),i=t*n.preferredLoadMoreThreshold;return this.hierarchyNavigator.getIndex(e)>=i},n.prototype.enumerateObjectInstances=function(e){var a=new t.ObjectEnumerationBuilder;return this.dataView&&i.setEnumeration(e,a,this.dataView,this.isFormattingPropertiesEnabled,t.controls.TablixType.Table),a.complete()},n.prototype.shouldAllowHeaderResize=function(){return this.hostServices.getViewMode()===e.ViewMode.Edit},n.prototype.verifyHeaderResize=function(){var e=this.shouldAllowHeaderResize();e!==this.lastAllowHeaderResize&&(this.lastAllowHeaderResize=e,this.tablixControl.layoutManager.setAllowHeaderResize(e))},n.preferredLoadMoreThreshold=.8,n}();t.Table=n}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(e,t){return new r(e,t)}var a=t.controls.internal.TablixUtils;t.createMatrixHierarchyNavigator=i;var r=function(){function i(e,t){this.matrix=e,this.rowHierarchy=i.wrapMatrixHierarchy(e.rows),this.columnHierarchy=i.wrapMatrixHierarchy(e.columns),this.formatter=t,this.update()}return i.prototype.getDataViewMatrix=function(){return this.matrix},i.prototype.getDepth=function(e){var t=this.getMatrixHierarchy(e);return t?Math.max(t.levels.length,1):0},i.prototype.getLeafCount=function(e){var t=this.getMatrixHierarchy(e);return t?t.leafNodes.length:0},i.prototype.getLeafAt=function(e,t){var i=this.getMatrixHierarchy(e);return i?i.leafNodes[t]:null},i.prototype.getLeafIndex=function(e){return e.leafIndex},i.prototype.getParent=function(e){return 0===e.level?null:e.parent},i.prototype.getIndex=function(e){return e.index},i.prototype.isLeaf=function(e){return!e.children||0===e.children.length},i.prototype.isRowHierarchyLeaf=function(e){return!0},i.prototype.isColumnHierarchyLeaf=function(e){return!1},i.prototype.isLastItem=function(e,t){return t[t.length-1]===e},i.prototype.getChildren=function(e){return e.children},i.prototype.getCount=function(e){return e.length},i.prototype.getAt=function(e,t){return e[t]},i.prototype.getLevel=function(e){return e.level},i.prototype.getIntersection=function(e,t){var i=e.isSubtotal===!0||t.isSubtotal===!0;if(!e.values)return{textContent:"",isSubtotal:i,isLeftMost:0===t.index};var r=e.values[t.leafIndex];if(!r)return{isSubtotal:i,isLeftMost:0===t.index};var n=this.matrix.valueSources[r.valueSourceIndex||0],o=this.formatter(r.value,n,a.TablixFormatStringProp);return a.isValidStatusGraphic(n.kpi,o)?{domContent:a.createKpiDom(n.kpi,r.value),isSubtotal:i,isLeftMost:0===t.index}:{textContent:o,isSubtotal:i,isLeftMost:0===t.index}},i.prototype.getCorner=function(e,t){var i=this.columnHierarchy.levels,a=this.rowHierarchy.levels;if(t===i.length-1||0===i.length){var r=a[e];if(r)return{metadata:r.sources[0],isColumnHeaderLeaf:!0,isRowHeaderLeaf:e===a.length-1}}if(e===a.length-1){var r=i[t];if(r)return{metadata:r.sources[0],isColumnHeaderLeaf:!1,isRowHeaderLeaf:!0}}return{metadata:null,isColumnHeaderLeaf:!1,isRowHeaderLeaf:!1}},i.prototype.headerItemEquals=function(e,t){return e===t},i.prototype.bodyCellItemEquals=function(e,t){return e===t},i.prototype.cornerCellItemEquals=function(e,t){return e===t},i.prototype.getMatrixColumnHierarchy=function(){return this.columnHierarchy},i.prototype.getMatrixRowHierarchy=function(){return this.rowHierarchy},i.prototype.update=function(e,t){void 0===t&&(t=!0),e&&(this.matrix=e,this.rowHierarchy=i.wrapMatrixHierarchy(e.rows),t&&(this.columnHierarchy=i.wrapMatrixHierarchy(e.columns))),this.updateHierarchy(this.rowHierarchy),t&&(this.updateHierarchy(this.columnHierarchy),i.updateStaticColumnHeaders(this.columnHierarchy))},i.wrapMatrixHierarchy=function(t){var i=e.Prototype.inherit(t);return i.leafNodes=[],i},i.prototype.updateHierarchy=function(e){e.leafNodes.length>0&&(e.leafNodes.length=0),e.root.children&&this.updateRecursive(e,e.root.children,null,e.leafNodes)},i.prototype.updateRecursive=function(e,i,r,n){for(var o,s=0,l=i.length;l>s;s++){var u=i[s];if(r&&(u.parent=r),o||(o=e.levels[u.level]),o){var c=o.sources[u.levelSourceIndex?u.levelSourceIndex:0],h=t.valueFormatter.getFormatString(c,a.TablixFormatStringProp);h&&(u.name=this.formatter(u.value,c,a.TablixFormatStringProp)),u.queryName=c.queryName}u.index=s,u.children&&u.children.length>0?this.updateRecursive(e,u.children,u,n):(u.leafIndex=n.length,n.push(u))}},i.updateStaticColumnHeaders=function(e){var t=e.leafNodes;if(t&&t.length>0)for(var i=e.levels[t[0].level].sources,a=0,r=t.length;r>a;a++){var n=t[a];if(!n.identity&&void 0===n.value){var o=i[n.levelSourceIndex?n.levelSourceIndex:0];o&&(n.name=o.displayName)}}},i.prototype.getMatrixHierarchy=function(e){var t=this.rowHierarchy.root.children;if(t&&e===t)return this.rowHierarchy;var i=this.columnHierarchy.root.children;return i&&e===i?this.columnHierarchy:null},i}(),n=function(){function e(e,t){this.hierarchyNavigator=e,this.options=t}return e.prototype.onDataViewChanged=function(e){this.formattingProperties=e},e.prototype.setTablixColumnSeparator=function(e){this.formattingProperties.columns.showSeparators&&e.extension.setColumnSeparator(this.formattingProperties.columns.separatorColor,this.formattingProperties.columns.separatorWeight)},e.prototype.setTablixRegionStyle=function(e,i,a,r,n,o){""!==i&&e.extension.setFontColor(i),a&&e.extension.setBackgroundColor(a);var s=t.VisualBorderUtil.getBorderStyleWithWeight(r,n),l=t.VisualBorderUtil.getBorderWidth(r,n);e.extension.setOutline(s,o,l)},e.prototype.onStartRenderingSession=function(){},e.prototype.onEndRenderingSession=function(){},e.prototype.bindRowHeader=function(t,i){var a,r=this.hierarchyNavigator&&this.hierarchyNavigator.isLeaf(t);if(a=r?t.identity?e.rowHeaderLeafClassName:0===t.level?e.rowHeaderTopLevelStaticLeafClassName:e.rowHeaderStaticLeafClassName:e.headerClassName,t.isSubtotal&&(a+=" "+e.totalClassName),i.extension.setContainerStyle(a),this.bindHeader(t,i,this.getRowHeaderMetadata(t)),this.options.onBindRowHeader&&this.options.onBindRowHeader(t),this.formattingProperties){var n=t.isSubtotal?this.formattingProperties.totals.fontColor:this.formattingProperties.rows.fontColor,o=t.isSubtotal?this.formattingProperties.totals.backgroundColor:this.formattingProperties.rows.backgroundColor,s=t.isSubtotal?this.formattingProperties.totals.outline:this.formattingProperties.rows.outline;this.setTablixRegionStyle(i,n,o,s,this.formattingProperties.general.outlineWeight,this.formattingProperties.general.outlineColor),this.formattingProperties.rows.showSeparators&&i.extension.setRowSeparator(),t.isSubtotal&&i.extension.setLeadingSpace(this.formattingProperties.totals.leadingSpace)}},e.prototype.unbindRowHeader=function(e,i){i.extension.clearContainerStyle(),t.controls.HTMLElementUtils.clearChildren(i.extension.contentHost)},e.prototype.bindColumnHeader=function(t,i){var a,r=!1,n=this.hierarchyNavigator&&this.hierarchyNavigator.isLeaf(t);if(n){a=e.columnHeaderLeafClassName;var o=this.getSortableHeaderColumnMetadata(t);o&&this.registerColumnHeaderClickHandler(o,i),t.isSubtotal&&t.parent&&t.parent.children.length>1&&t.parent.children[0].isSubtotal&&(r=!0)}else a=e.headerClassName;t.isSubtotal&&(a+=" "+e.totalClassName),a+=" "+e.numericCellClassName,i.extension.setContainerStyle(a),this.formattingProperties&&(this.setTablixRegionStyle(i,this.formattingProperties.header.fontColor,this.formattingProperties.header.backgroundColor,this.formattingProperties.header.outline,this.formattingProperties.general.outlineWeight,this.formattingProperties.general.outlineColor),this.setTablixColumnSeparator(i)),i.extension.disableDragResize(),this.bindHeader(t,i,this.getColumnHeaderMetadata(t),r)},e.prototype.unbindColumnHeader=function(e,t){t.extension.clearContainerStyle(),t.extension.contentHost.textContent="";var i=this.getSortableHeaderColumnMetadata(e);i&&this.unregisterColumnHeaderClickHandler(t)},e.prototype.bindBodyCell=function(t,i){var a=e.bodyCellClassName;if(t.isSubtotal&&(a+=" "+e.totalClassName),i.extension.setContainerStyle(a),t.textContent?i.extension.contentHost.textContent=t.textContent:_.isEmpty(t.domContent)||$(i.extension.contentHost).append(t.domContent),this.formattingProperties){var r=t.isSubtotal?this.formattingProperties.totals.outline:t.isLeftMost?this.formattingProperties.values.outline:"None",n=t.isSubtotal?this.formattingProperties.totals.fontColor:this.formattingProperties.values.fontColor,o=t.isSubtotal?this.formattingProperties.totals.backgroundColor:this.formattingProperties.values.backgroundColor;this.setTablixRegionStyle(i,n,o,r,this.formattingProperties.general.outlineWeight,this.formattingProperties.general.outlineColor),t.isSubtotal&&i.extension.setLeadingSpace(this.formattingProperties.totals.leadingSpace),this.formattingProperties.rows.showSeparators&&i.extension.setRowSeparator(),this.setTablixColumnSeparator(i)}},e.prototype.unbindBodyCell=function(e,t){t.extension.clearContainerStyle(),t.extension.contentHost.textContent=""},e.prototype.registerColumnHeaderClickHandler=function(e,t){var i=this;if(this.options.onColumnHeaderClick){var a=function(t){i.options.onColumnHeaderClick(e.queryName?e.queryName:e.displayName)};t.extension.registerClickHandler(a)}},e.prototype.unregisterColumnHeaderClickHandler=function(e){this.options.onColumnHeaderClick&&e.extension.unregisterClickHandler()},e.prototype.bindCornerCell=function(t,i){var a;if(t.isColumnHeaderLeaf){a=e.columnHeaderLeafClassName;var r=this.getSortableCornerColumnMetadata(t);r&&this.registerColumnHeaderClickHandler(r,i)}t.isRowHeaderLeaf&&(a?a+=" ":a="",a+=e.rowHeaderLeafClassName),a?i.extension.setContainerStyle(a):i.extension.setContainerStyle(e.headerClassName),i.extension.disableDragResize(),i.extension.contentHost.textContent=t.metadata?t.metadata.displayName:"",this.formattingProperties&&this.setTablixRegionStyle(i,this.formattingProperties.header.fontColor,this.formattingProperties.header.backgroundColor,this.formattingProperties.header.outline,this.formattingProperties.general.outlineWeight,this.formattingProperties.general.outlineColor)},e.prototype.unbindCornerCell=function(e,t){t.extension.clearContainerStyle(),t.extension.contentHost.textContent="",e.isColumnHeaderLeaf&&this.unregisterColumnHeaderClickHandler(t)},e.prototype.bindEmptySpaceHeaderCell=function(e){},e.prototype.unbindEmptySpaceHeaderCell=function(e){},e.prototype.bindEmptySpaceFooterCell=function(e){},e.prototype.unbindEmptySpaceFooterCell=function(e){},e.prototype.getHeaderLabel=function(t){return e.getNodeLabel(t)},e.prototype.getCellContent=function(e){return e.textContent||""},e.prototype.hasRowGroups=function(){var e=this.hierarchyNavigator.getDataViewMatrix();return e&&e.rows&&e.rows.levels&&0!==e.rows.levels.length?!0:!1},e.getNodeLabel=function(e){return e.name?e.name:null!=e.value?e.value.toString():""},e.prototype.bindHeader=function(i,r,n,o){if(i.isSubtotal&&!o)return void(r.extension.contentHost.textContent=this.options.totalLabel);var s=e.getNodeLabel(i);return s?void(n&&t.UrlHelper.isValidUrl(n,s)?a.appendATagToBodyCell(i.value,r):n&&t.UrlHelper.isValidImage(n,s)?a.appendImgTagToBodyCell(i.value,r):r.extension.contentHost.textContent=s):void(r.extension.contentHost.innerHTML=e.nonBreakingSpace)},e.prototype.getSortableCornerColumnMetadata=function(e){return e.isColumnHeaderLeaf?e.metadata:null},e.prototype.getRowHeaderMetadata=function(e){if(this.hierarchyNavigator&&e){var t=this.hierarchyNavigator.getDataViewMatrix();if(t&&t.rows)return this.getHierarchyMetadata(t.rows,e.level)}},e.prototype.getColumnHeaderMetadata=function(e){if(this.hierarchyNavigator&&e){var t=this.hierarchyNavigator.getDataViewMatrix();if(t&&t.columns)return this.getHierarchyMetadata(t.columns,e.level)}},e.prototype.getHierarchyMetadata=function(e,t){if(e&&e.levels&&!(e.levels.length<t)){var i=e.levels[t];if(i&&i.sources&&0!==i.sources.length)return i.sources[0]}},e.prototype.getSortableHeaderColumnMetadata=function(e){var t=this.hierarchyNavigator.getDataViewMatrix();if(!t.rows||!t.rows.levels||0===t.rows.levels.length)return null;var i=t.columns?t.columns.levels.length-1:0,a=-1;if(0===i)a=e.levelSourceIndex;else if(e.isSubtotal){var r=t.valueSources&&t.valueSources.length>1;r?e.parent&&0===e.parent.level&&(a=e.levelSourceIndex):0===e.level&&(a=e.levelSourceIndex)}return-1!==a?(a=a?a:0,t.valueSources[a]):null},e.headerClassName="bi-tablix-header",e.numericCellClassName="bi-table-cell-numeric",e.columnHeaderLeafClassName="bi-tablix-column-header-leaf",e.rowHeaderLeafClassName="bi-tablix-row-header-leaf",e.rowHeaderStaticLeafClassName="bi-tablix-row-header-static-leaf",e.rowHeaderTopLevelStaticLeafClassName="bi-tablix-row-header-toplevel-static-leaf",e.bodyCellClassName="bi-matrix-body-cell",e.totalClassName="total",e.nonBreakingSpace="&nbsp;",e}();t.MatrixBinder=n;var o=function(){function r(e){this.isFormattingPropertiesEnabled=e}return r.customizeQuery=function(e){var t=e.dataViewMappings[0];if(t&&t.matrix&&t.metadata){var i=t.matrix;_.isEmpty(i.columns["for"]["in"].items)||(i.rows.dataReductionAlgorithm.window.count=100);var r=t.metadata.objects;i.rows["for"]["in"].subtotalType=a.shouldShowRowSubtotals(r)?2:0,i.columns["for"]["in"].subtotalType=a.shouldShowColumnSubtotals(r)?2:0}},r.getSortableRoles=function(){return["Rows","Values"]},r.prototype.init=function(e){this.element=e.element,this.style=e.style,this.updateViewport(e.viewport),this.formatter=t.valueFormatter.formatValueColumn,this.isInteractive=e.interactivity&&null!=e.interactivity.selection,this.hostServices=e.host,this.waitingForData=!1,this.lastAllowHeaderResize=!0,this.waitingForSort=!1},r.converter=function(e,t){var i;return t&&(i=a.getMatrixFormattingProperties(e)),i},r.prototype.onResizing=function(e){this.updateViewport(e)},r.prototype.getColumnWidthManager=function(){return this.columnWidthManager},r.prototype.onDataChanged=function(t){if(this.columnWidthManager&&this.columnWidthManager.suppressOnDataChangedNotification)return void(this.columnWidthManager.suppressOnDataChangedNotification=!1);var i=this.dataView;if(t.dataViews&&t.dataViews.length>0){this.dataView=t.dataViews[0];var n=r.converter(this.dataView,this.isFormattingPropertiesEnabled),o=n?n.general.textSize:a.getTextSize(this.dataView.metadata.objects);if(t.operationKind===e.VisualDataChangeOperationKind.Append){var s=i.matrix.rows.root!==this.dataView.matrix.rows.root;this.hierarchyNavigator.update(this.dataView.matrix,s),s&&this.tablixControl.updateModels(!1,this.dataView.matrix.rows.root.children,this.dataView.matrix.columns.root.children),this.refreshControl(!1)}else{this.createOrUpdateHierarchyNavigator(),this.createColumnWidthManager(),this.createTablixControl(o);var l=this.tablixControl.getBinder();l.onDataViewChanged(n),this.populateColumnWidths(),this.updateInternal(this.dataView,o,i)}}this.waitingForData=!1,this.waitingForSort=!1},r.prototype.populateColumnWidths=function(){this.columnWidthManager&&(this.columnWidthManager.deserializeTablixColumnWidths(),this.columnWidthManager.persistColumnWidthsOnHost()&&this.persistColumnWidths(this.columnWidthManager.getVisualObjectInstancesToPersist()))},r.prototype.columnWidthChanged=function(e,t){this.columnWidthManager.columnWidthChanged(e,t),this.persistColumnWidths(this.columnWidthManager.getVisualObjectInstancesToPersist())},r.prototype.persistColumnWidths=function(e){this.hostServices.persistProperties(e)},r.prototype.updateViewport=function(e){this.currentViewport=e,this.tablixControl&&(this.tablixControl.viewport=this.currentViewport,this.verifyHeaderResize(),this.refreshControl(!1))},r.prototype.refreshControl=function(e){(t.visibilityHelper.partiallyVisible(this.element)||this.getLayoutKind()===t.controls.TablixLayoutKind.DashboardTile)&&this.tablixControl.refresh(e)},r.prototype.getLayoutKind=function(){return this.isInteractive?t.controls.TablixLayoutKind.Canvas:t.controls.TablixLayoutKind.DashboardTile},r.prototype.createOrUpdateHierarchyNavigator=function(){if(this.tablixControl)this.hierarchyNavigator.update(this.dataView.matrix);else{var e=i(this.dataView.matrix,this.formatter);this.hierarchyNavigator=e}},r.prototype.createTablixControl=function(e){this.tablixControl||(this.tablixControl=this.createControl(this.hierarchyNavigator,e))},r.prototype.createColumnWidthManager=function(){var e=this,i=this.hierarchyNavigator.getMatrixColumnHierarchy();this.columnWidthManager?this.columnWidthManager.updateDataView(this.dataView,i.leafNodes):(this.columnWidthManager=new t.controls.TablixColumnWidthManager(this.dataView,!0,i.leafNodes),this.columnWidthManager.columnWidthResizeCallback=function(t,i){return e.columnWidthChanged(t,i)})},r.prototype.createControl=function(e,i){var o=this,s=this.getLayoutKind(),l={onBindRowHeader:function(e){o.onBindRowHeader(e)},totalLabel:this.hostServices.getLocalizedString(r.TotalLabel),onColumnHeaderClick:function(e){
return o.onColumnHeaderClick(e)}},u=new n(this.hierarchyNavigator,l),c=s===t.controls.TablixLayoutKind.DashboardTile?t.controls.internal.DashboardTablixLayoutManager.createLayoutManager(u):t.controls.internal.CanvasTablixLayoutManager.createLayoutManager(u,this.columnWidthManager),h=document.createElement("div");this.element.append(h);var p={interactive:this.isInteractive,enableTouchSupport:!1,fontSize:a.getTextSizeInPx(i)};return new t.controls.TablixControl(e,c,u,h,p)},r.prototype.updateInternal=function(e,i,r){var n=this;this.getLayoutKind()===t.controls.TablixLayoutKind.DashboardTile&&this.tablixControl.layoutManager.adjustContentSize(t.UrlHelper.hasImageColumn(e)),this.tablixControl.fontSize=a.getTextSizeInPx(i),this.verifyHeaderResize(),this.tablixControl.updateModels(!0,e.matrix.rows.root.children,e.matrix.columns.root.children),this.tablixControl.viewport=this.currentViewport;var o=this.shouldClearControl(r,e);setTimeout(function(){n.refreshControl(o),n.columnWidthManager.persistAllColumnWidths(n.tablixControl.layoutManager.columnWidthsToPersist),n.columnWidthManager.persistColumnWidthsOnHost()&&n.persistColumnWidths(n.columnWidthManager.getVisualObjectInstancesToPersist())},0)},r.prototype.shouldClearControl=function(t,i){return this.waitingForSort&&t&&i?!e.DataViewAnalysis.isMetadataEquivalent(t.metadata,i.metadata):!0},r.prototype.onBindRowHeader=function(e){this.needsMoreData(e)&&(this.hostServices.loadMoreData(),this.waitingForData=!0)},r.prototype.onColumnHeaderClick=function(e){var t=[{queryName:e}],i={sortDescriptors:t};this.waitingForSort=!0,this.hostServices.onCustomSort(i)},r.prototype.needsMoreData=function(e){if(this.waitingForData||!this.hierarchyNavigator.isLeaf(e)||!this.dataView.metadata||!this.dataView.metadata.segment)return!1;var t=this.tablixControl.rowDimension.getItemsCount(),i=t*r.preferredLoadMoreThreshold;return this.hierarchyNavigator.getLeafIndex(e)>=i},r.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder;return this.dataView&&a.setEnumeration(e,i,this.dataView,this.isFormattingPropertiesEnabled,t.controls.TablixType.Matrix),i.complete()},r.prototype.shouldAllowHeaderResize=function(){return this.hostServices.getViewMode()===e.ViewMode.Edit},r.prototype.verifyHeaderResize=function(){var e=this.shouldAllowHeaderResize();e!==this.lastAllowHeaderResize&&(this.lastAllowHeaderResize=e,this.tablixControl.layoutManager.setAllowHeaderResize(e))},r.preferredLoadMoreThreshold=.8,r.TotalLabel="TableTotalLabel",r}();t.Matrix=o}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.CssConstants,a=jsCommon.StringExtensions,r=function(){function r(e){this.tooltipsEnabled=e&&e.tooltipsEnabled,e&&e.animator&&(this.animator=e.animator,this.isScrollable=e.isScrollable?e.isScrollable:!1,this.behavior=e.behavior)}return r.getLayout=function(e,i){var a=t.dataLabelUtils.createColumnFormatterCacheManager(),n=e.showCategory,o=e.show||e.showCategory;return{shapeClass:function(e){return r.getNodeClass(e,!1)},shapeLayout:r.createTreemapShapeLayout(!1),highlightShapeClass:function(e){return r.getNodeClass(e,!0)},highlightShapeLayout:r.createTreemapShapeLayout(!0),zeroShapeLayout:r.createTreemapZeroShapeLayout(),majorLabelClass:function(e){return r.MajorLabelClassName},majorLabelLayout:{x:function(e){return e.x+r.TextMargin},y:function(e){return e.y+r.TextMargin+r.MajorLabelTextSize}},majorLabelText:function(t){return r.createMajorLabelText(t,e,i,a)},minorLabelClass:function(e){return r.MinorLabelClassName},minorLabelLayout:{x:function(e){return e.x+r.TextMargin},y:function(e){return e.y+e.dy-r.TextMargin}},minorLabelText:function(t){return r.createMinorLabelText(t,e,i,a)},areMajorLabelsEnabled:function(){return n},areMinorLabelsEnabled:function(){return o}}},r.prototype.init=function(e){this.options=e;var i=e.element;i.empty(),this.svg=d3.select(i.get(0)).append("svg").style("position","absolute").classed(r.ClassName,!0),this.shapeGraphicsContext=this.svg.append("g").classed(r.ShapesClassName,!0),this.labelGraphicsContext=this.svg.append("g").classed(r.LabelsGroupClassName,!0),this.element=i,this.currentViewport={height:e.viewport.height,width:e.viewport.width},this.style=e.style,this.treemap=d3.layout.treemap().sticky(!1).sort(function(e,t){return e.size-t.size}).value(function(e){return e.size}).round(!1),this.behavior&&(this.interactivityService=t.createInteractivityService(e.host)),this.legend=t.createLegend(i,e.interactivity&&e.interactivity.isInteractiveLegend,this.interactivityService,this.isScrollable),this.colors=this.style.colorPalette.dataColors,this.hostService=e.host},r.converter=function(i,a,n,o,s,l){var u,c={key:"root",name:"root",children:[],selected:!1,highlightMultiplier:0,identity:t.SelectionId.createNull(),color:void 0},h=[],p=[],d="",g=new t.ColorHelper(a,t.treemapProps.dataPoint.fill),m=void 0;if(i&&i.metadata&&i.metadata.objects){var f=i.metadata.objects;n.show=e.DataViewObjects.getValue(f,t.treemapProps.labels.show,n.show),n.labelColor=e.DataViewObjects.getFillColor(f,t.treemapProps.labels.color,n.labelColor),n.displayUnits=e.DataViewObjects.getValue(f,t.treemapProps.labels.labelDisplayUnits,n.displayUnits),n.precision=e.DataViewObjects.getValue(f,t.treemapProps.labels.labelPrecision,n.precision),n.showCategory=e.DataViewObjects.getValue(f,t.treemapProps.categoryLabels.show,n.showCategory)}if(i&&i.categorical&&i.categorical.values){var y=i.categorical,v=y.values;u=!!(v.length>0&&v[0].highlights);var b=t.treemapProps.general.formatString,C=r.getValuesFromCategoricalDataView(y,u),x=C.values,S=C.highlights,w=C.totalValue;C.highlightsOverflow&&(u=!1,x=S);var D=r.getCullableValue(w,s),P=v.grouped(),L=P&&P.length>0&&P[0].values&&P[0].values.length>1,N=!!v.source;m=!1;var T=void 0,V=void 0;if(null!=y.categories||_.isEmpty(x)){if(y.categories&&y.categories.length>0){var M=y.categories[0],A=v.length,R=t.valueFormatter.getFormatString(M.source,b);d=M.source?M.source.displayName:"";for(var I=void 0,F=0,E=x.length;E>F;F++){var O=t.SelectionIdBuilder.builder().withCategory(M,F).createSelectionId(),G=JSON.stringify({nodeKey:O.getKey(),depth:1}),f=M.objects&&M.objects[F],H=g.getColorForSeriesValue(f,M.identityFields,M.values[F]),z=t.valueFormatter.format(M.values[F],R),k=x[F][0],B=u&&S?S[F][0]:void 0;I=i.categorical;var W=t.TooltipBuilder.createTooltipInfo(b,I,z,k),U=void 0;void 0!==B&&(U=t.TooltipBuilder.createTooltipInfo(b,I,z,k,null,null,0,F,B));var j={key:G,name:z,color:H,selected:!1,identity:O,tooltipInfo:W,highlightedTooltipInfo:U,labelFormatString:1===A?t.valueFormatter.getFormatString(y.values[0].source,b):R};p.push({label:z,color:H,icon:t.LegendIcon.Box,identity:O,selected:!1});for(var q=0,K=0,Q=1===A&&null==v[0].source.groupName,Y=x[F],X=0,$=Y.length;$>X;X++){var Z=v[X],J=Y[X],ee=void 0;if(T=D>J,r.checkValueForShape(J)&&!T){if(q+=J,u&&(ee=S[F][X],K+=ee),!Q){var te=null;te=L?Z.source.displayName:Z.source.groupName;var ie=I?I.values:null,ae=L?Z.source.queryName:void 0,re=t.SelectionIdBuilder.builder().withCategory(M,F).withSeries(ie,Z).withMeasure(ae).createSelectionId(),ne=JSON.stringify({nodeKey:re.getKey(),depth:2}),oe=u&&0!==ee?ee:void 0;I=i.categorical;var se=t.TooltipBuilder.createTooltipInfo(b,I,z,J,null,null,X,F),le=void 0;void 0!==oe&&(le=t.TooltipBuilder.createTooltipInfo(b,I,z,J,null,null,X,F,oe));var ue={key:ne,name:te,size:J,color:H,selected:!1,identity:re,tooltipInfo:se,highlightedTooltipInfo:le,labelFormatString:t.valueFormatter.getFormatString(Z.source,b)};u&&(ue.highlightMultiplier=J?ee/J:0),null==j.children&&(j.children=[]),j.children.push(ue),h.push(ue)}}else m=m||T}r.checkValueForShape(q)&&(j.size=q,c.children.push(j),h.push(j)),u&&(j.highlightMultiplier=q?K/q:0)}}}else for(var F=0,E=x[0].length;E>F;F++){var k=x[0][F];if(r.checkValueForShape(k))if(D>k)m=m||T;else{var Z=v[F],ce=t.converterHelper.getFormattedLegendLabel(Z.source,v,b),O=N?t.SelectionId.createWithId(v[F].identity):t.SelectionId.createWithMeasure(v[F].source.queryName),G=O.getKey(),H=N?g.getColorForSeriesValue(P[F]&&P[F].objects,y.values.identityFields,t.converterHelper.getSeriesName(Z.source)):g.getColorForMeasure(Z.source.objects,Z.source.queryName),B=u&&0!==V?V:void 0,I=i.categorical,he=F,W=t.TooltipBuilder.createTooltipInfo(b,I,ce,k,null,null,he,F),U=void 0;void 0!==B&&(U=t.TooltipBuilder.createTooltipInfo(b,I,ce,k,null,null,he,F,B));var j={key:G,name:ce,size:k,color:H,selected:!1,identity:O,tooltipInfo:W,highlightedTooltipInfo:U,labelFormatString:t.valueFormatter.getFormatString(Z.source,b)};u&&S&&(j.highlightMultiplier=k?S[0][F]/k:0),c.children.push(j),h.push(j),p.push({label:ce,color:H,icon:t.LegendIcon.Box,identity:O,selected:!1})}}}return o&&(o.applySelectionStateToData(h),o.applySelectionStateToData(p)),{root:c,hasHighlights:u,legendData:{title:d,dataPoints:p,fontSize:t.SVGLegend.DefaultFontSizeInPt},dataLabelsSettings:n,legendObjectProperties:l,dataWasCulled:m}},r.getValuesFromCategoricalDataView=function(e,t){var i,a=e.values;a&&null==e.categories?i=1:a&&e.categories&&e.categories.length>0&&(i=e.categories[0].values.length);for(var r=[],n=[],o=0,s=0;i>s;s++)r.push([]),t&&n.push([]);for(var l,u=0;u<a.length;u++)for(var c=a[u],s=0;i>s;s++){var h=c.values[s];if(r[s].push(h),o+=isNaN(h)?0:h,t){var p=c.highlights[s];p||(p=0),n[s].push(p),p>h&&(l=!0)}}return{values:r,highlights:t?n:void 0,highlightsOverflow:t?l:void 0,totalValue:o}},r.getCullableValue=function(e,t){var i=t.width*t.height,a=r.CullableArea/i;return a*e},r.prototype.update=function(e){var i=this.dataViews=e.dataViews;this.currentViewport=e.viewport;var a=i&&i.length>0&&i[0].categorical?i[0].categorical:void 0,n=t.dataLabelUtils.getDefaultTreemapLabelSettings(),o=null;if(a){var s,l=i[0],u=l.metadata;u&&(s=u.objects),s&&(o=s.legend),this.data=r.converter(l,this.colors,n,this.interactivityService,this.currentViewport,o)}else{var c={key:"root",name:"root",children:[],selected:!1,highlightMultiplier:0,identity:t.SelectionId.createNull(),color:void 0},h={title:"",dataPoints:[]},p={root:c,hasHighlights:!1,legendData:h,dataLabelsSettings:n,dataWasCulled:!1};this.data=p}if(this.updateInternal(e.suppressAnimations),i){var d=t.getInvalidValueWarnings(i,!1,!1,!1);this.data.dataWasCulled&&d.unshift(new t.GeometryCulledWarning),this.hostService.setWarnings(d)}},r.prototype.onDataChanged=function(e){this.update({suppressAnimations:e.suppressAnimations,dataViews:e.dataViews,viewport:this.currentViewport})},r.prototype.onResizing=function(e){this.update({suppressAnimations:!0,dataViews:this.dataViews,viewport:e})},r.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},r.prototype.enumerateObjectInstances=function(e){var i=this.data;if(i){var a=e.objectName,r=new t.ObjectEnumerationBuilder,n=this.data.dataLabelsSettings?this.data.dataLabelsSettings:t.dataLabelUtils.getDefaultTreemapLabelSettings();switch(a){case"dataPoint":var o=this.dataViews&&this.dataViews.length>0&&this.dataViews[0]&&this.dataViews[0].categorical,s=t.GradientUtils.hasGradientRole(o);s||this.enumerateDataPoints(r,i);break;case"legend":return this.enumerateLegend(i);case"labels":var l={enumeration:r,dataLabelsSettings:n,show:!0,displayUnits:!0,precision:!0};t.dataLabelUtils.enumerateDataLabels(l);break;case"categoryLabels":t.dataLabelUtils.enumerateCategoryLabels(r,n,!1,!0)}return r.complete()}},r.prototype.enumerateDataPoints=function(e,t){var i=t.root.children;if(!_.isEmpty(i))for(var a=0;a<i.length;a++){var r=i[a];e.pushInstance({displayName:r.name,selector:r.identity.getSelector(),properties:{fill:{solid:{color:r.color}}},objectName:"dataPoint"})}},r.prototype.enumerateLegend=function(i){var a={legend:i.legendObjectProperties},r=e.DataViewObjects.getValue(a,t.treemapProps.legend.show,this.legend.isVisible()),n=e.DataViewObjects.getValue(a,t.treemapProps.legend.showTitle,!0),o=e.DataViewObjects.getValue(a,t.treemapProps.legend.titleText,this.data.legendData.title),s=e.DataViewObject.getValue(a,t.legendProps.labelColor,this.data.legendData?this.data.legendData.labelColor:t.LegendData.DefaultLegendLabelFillColor),l=e.DataViewObject.getValue(a,t.legendProps.fontSize,this.data.legendData&&this.data.legendData.fontSize?this.data.legendData.fontSize:t.SVGLegend.DefaultFontSizeInPt);return[{selector:null,objectName:"legend",properties:{show:r,position:t.LegendPosition[this.legend.getOrientation()],showTitle:n,titleText:o,labelColor:s,fontSize:l}}]},r.checkValueForShape=function(e){return e?e>0:!1},r.prototype.calculateTreemapSize=function(){var e=this.legend.getMargins();return{height:this.currentViewport.height-e.height,width:this.currentViewport.width-e.width}},r.prototype.initViewportDependantProperties=function(e){void 0===e&&(e=0);var i=this.calculateTreemapSize();this.svg.attr({width:i.width,height:i.height}),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)},r.hasChildrenWithIdentity=function(e){var t=e.children;if(!t)return!1;var i=t.length;if(0===i)return!1;for(var a=i-1;a>=0;a--)if(t[a].identity.hasIdentity())return!0;return!1},r.canDisplayMajorLabel=function(e){if(1!==e.depth)return!1;if(a.isNullOrEmpty(e.name))return!1;var t=e.dx-2*r.TextMargin;if(t<r.MinTextWidthForMajorLabel)return!1;var i=r.MajorLabelTextSize+2*r.TextMargin;return e.dy<i?!1:!0},r.canDisplayMinorLabel=function(e,t){if(e.depth<1||e.depth>2)return!1;if(1===e.depth&&(e.children||!t.show))return!1;if(a.isNullOrEmpty(e.name))return!1;var i=e.dx-2*r.TextMargin;if(i<r.MinTextWidthForMinorLabel)return!1;var n=r.MinorLabelTextSize+2*r.TextMargin;if(e.dy<n)return!1;if(2===e.depth){var o=e.parent,s=Math.max(o.y+r.MajorLabelTextSize+2*r.TextMargin,e.y);if(e.y+e.dy-s<n)return!1}return!0},r.createMajorLabelText=function(t,i,a,n){var o=t.dx-2*r.TextMargin,s=r.MajorLabelTextProperties,l={text:t.name,fontFamily:s.fontFamily,fontSize:s.fontSize};return e.TextMeasurementService.getTailoredTextOrDefault(l,o)},r.createMinorLabelText=function(e,i,a,n){var o=e.dx-2*r.TextMargin,s=e.name;if(i.show){var l=n.getOrCreate(e.labelFormatString,i,a);s=t.dataLabelUtils.getLabelFormattedText({label:e.value,maxWidth:o,formatter:l}),i.showCategory&&2===e.depth&&(s=t.dataLabelUtils.getLabelFormattedText({label:e.name,maxWidth:o})+" "+s)}return t.dataLabelUtils.getLabelFormattedText({label:s,maxWidth:o,fontSize:i.fontSize})},r.getFill=function(e,t){return e.depth>1&&!e.identity.hasIdentity()&&!t?i.noneValue:r.hasChildrenWithIdentity(e)?i.noneValue:e.color},r.getFillOpacity=function(e,t,i,a){return i?a?null:r.DimmedShapeOpacity.toString():!t||e.selected?null:e.depth>1&&e.parent.selected?null:r.hasChildrenWithIdentity(e)?null:r.DimmedShapeOpacity.toString()},r.prototype.updateInternal=function(e){var i=this.data,a=i&&i.hasHighlights,n=i?i.dataLabelsSettings:null,o=t.AnimatorCommon.GetAnimationDuration(this.animator,e);this.options.interactivity&&this.options.interactivity.isInteractiveLegend||!this.data||this.renderLegend(),this.initViewportDependantProperties(o);var s=this.calculateTreemapSize();this.treemap.size([s.width,s.height]);var l=i&&i.root?this.treemap.nodes(i.root):[],u=l.filter(function(e){return null!=e.highlightMultiplier&&(!e.children||0===e.children.length)}),c=[],h=[],p=null;n.showCategory&&(c=l.filter(function(e){return r.canDisplayMajorLabel(e)})),(n.show||n.showCategory)&&(h=l.filter(function(e){return r.canDisplayMinorLabel(e,n)}),0===n.displayUnits&&(p=d3.max(h,function(e){return Math.abs(e.value)})));var d,g,m,f,y,v=r.getLayout(n,p);if(this.animator&&!e){var b={viewModel:i,nodes:l,highlightNodes:u,majorLabeledNodes:c,minorLabeledNodes:h,shapeGraphicsContext:this.shapeGraphicsContext,labelGraphicsContext:this.labelGraphicsContext,interactivityService:this.interactivityService,layout:v,labelSettings:n};y=this.animator.animate(b),d=y.shapes,g=y.highlightShapes,m=y.majorLabels,f=y.minorLabels}if(!this.animator||e||y.failed){var C=this.interactivityService&&this.interactivityService.hasSelection(),x=this.shapeGraphicsContext;d=r.drawDefaultShapes(x,l,C,a,v),g=r.drawDefaultHighlightShapes(x,u,C,a,v);var S=this.labelGraphicsContext;m=r.drawDefaultMajorLabels(S,c,n,v),f=r.drawDefaultMinorLabels(S,h,n,v)}if(this.interactivityService){var w={shapes:d,highlightShapes:g,majorLabels:m,minorLabels:f,nodes:l,hasHighlights:i.hasHighlights};this.interactivityService.bind(l,this.behavior,w)}this.tooltipsEnabled&&(t.TooltipManager.addTooltip(d,function(e){return e.data.tooltipInfo}),t.TooltipManager.addTooltip(g,function(e){return e.data.highlightedTooltipInfo})),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)},r.prototype.renderLegend=function(){var e=this.data.legendObjectProperties;if(e){var i=this.data.legendData;t.LegendData.update(i,e);var a=e[t.legendProps.position];a&&this.legend.changeOrientation(t.LegendPosition[a]),this.legend.drawLegend(i,this.currentViewport)}else this.legend.changeOrientation(t.LegendPosition.Top),this.legend.drawLegend({dataPoints:[]},this.currentViewport)},r.getNodeClass=function(e,t){var i;switch(e.depth){case 1:i=r.ParentGroupClassName;break;case 2:i=r.NodeGroupClassName;break;case 0:i=r.RootNodeClassName}return i+=" "+(t?r.HighlightNodeClassName:r.TreemapNodeClassName)},r.createTreemapShapeLayout=function(e){return void 0===e&&(e=!1),{x:function(e){return e.x},y:function(t){return t.y+(e?t.dy*(1-t.highlightMultiplier):0)},width:function(e){return Math.max(0,e.dx)},height:function(t){return Math.max(0,t.dy*(e?t.highlightMultiplier:1))}}},r.createTreemapZeroShapeLayout=function(){return{x:function(e){return e.x},y:function(e){return e.y+e.dy},width:function(e){return Math.max(0,e.dx)},height:function(e){return 0}}},r.drawDefaultShapes=function(e,t,i,a,n){var o=!1,s=e.selectAll("."+r.TreemapNodeClassName).data(t,function(e){return e.key});return s.enter().append("rect").attr("class",n.shapeClass),s.style("fill",function(e){return r.getFill(e,o)}).style("fill-opacity",function(e){return r.getFillOpacity(e,i,a,o)}).attr(n.shapeLayout),s.exit().remove(),s},r.drawDefaultHighlightShapes=function(e,t,i,a,n){var o=!0,s=e.selectAll("."+r.HighlightNodeClassName).data(t,function(e){return e.key+"highlight"});return s.enter().append("rect").attr("class",n.highlightShapeClass),s.style("fill",function(e){return r.getFill(e,o)}).style("fill-opacity",function(e){return r.getFillOpacity(e,i,a,o)}).attr(n.highlightShapeLayout),s.exit().remove(),s},r.drawDefaultMajorLabels=function(e,t,i,a){var n=e.selectAll("."+r.MajorLabelClassName).data(t,function(e){return e.key});return n.enter().append("text").attr("class",a.majorLabelClass),n.attr(a.majorLabelLayout).text(a.majorLabelText).style("fill",function(){return i.labelColor}),n.exit().remove(),n},r.drawDefaultMinorLabels=function(e,t,i,a){var n=e.selectAll("."+r.MinorLabelClassName).data(t,function(e){return e.key});return n.enter().append("text").attr("class",a.minorLabelClass),n.attr(a.minorLabelLayout).text(a.minorLabelText).style("fill",function(){return i.labelColor}),n.exit().remove(),n},r.cleanMinorLabels=function(e){var t=[],i=e.selectAll("."+r.LabelsGroupClassName).selectAll("."+r.MinorLabelClassName).data(t);i.exit().remove()},r.DimmedShapeOpacity=.4,r.ClassName="treemap",r.LabelsGroupClassName="labels",r.MajorLabelClassName="majorLabel",r.MinorLabelClassName="minorLabel",r.ShapesClassName="shapes",r.TreemapNodeClassName="treemapNode",r.RootNodeClassName="rootNode",r.ParentGroupClassName="parentGroup",r.NodeGroupClassName="nodeGroup",r.HighlightNodeClassName="treemapNodeHighlight",r.TextMargin=5,r.MinorLabelTextSize=10,r.MinTextWidthForMinorLabel=18,r.MajorLabelTextSize=12,r.MinTextWidthForMajorLabel=22,r.MajorLabelTextProperties={fontFamily:"wf_segoe-ui_normal",fontSize:r.MajorLabelTextSize+"px"},r.CullableArea=9,r}();t.Treemap=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=e.visuals.KpiUtil.getKpiImageMetadata,a=jsCommon.CssConstants.createClassAndSelector,r=function(r){function n(t){r.call(this,n.cardClassName),this.isScrollable=!1,this.displayUnitSystemType=e.DisplayUnitSystemType.WholeUnits,t&&(this.isScrollable=!!t.isScrollable,t.animator&&(this.animator=t.animator),null!=t.displayUnitSystemType&&(this.displayUnitSystemType=t.displayUnitSystemType))}return __extends(n,r),n.prototype.init=function(e){this.animationOptions=e.animation;var t=e.element;this.kpiImage=d3.select(t.get(0)).append("div").classed(n.KPIImage["class"],!0);var i=this.svg=d3.select(t.get(0)).append("svg");this.graphicsContext=i.append("g"),this.currentViewport=e.viewport,this.hostServices=e.host,this.style=e.style,this.updateViewportProperties(),this.isScrollable&&(i.attr("class",n.cardClassName),this.labelContext=i.append("g"))},n.prototype.onDataChanged=function(i){var a,r=i.dataViews[0];if(r){this.getMetaDataColumn(r),r.single&&(a=r.single.value),this.cardFormatSetting=this.getDefaultFormatSettings();var n=r.metadata;if(n){var o=n.objects;if(o){var s=this.cardFormatSetting.labelSettings;s.labelColor=e.DataViewObjects.getFillColor(o,t.cardProps.labels.color,s.labelColor),s.precision=e.DataViewObjects.getValue(o,t.cardProps.labels.labelPrecision,s.precision),s.fontSize=e.DataViewObjects.getValue(o,t.cardProps.labels.fontSize,s.fontSize),s.precision!==t.dataLabelUtils.defaultLabelPrecision&&s.precision<0&&(s.precision=0),s.displayUnits=e.DataViewObjects.getValue(o,t.cardProps.labels.labelDisplayUnits,s.displayUnits),s.showCategory=e.DataViewObjects.getValue(o,t.cardProps.categoryLabels.show,s.showCategory),s.categoryLabelColor=e.DataViewObjects.getFillColor(o,t.cardProps.categoryLabels.color,s.categoryLabelColor),this.cardFormatSetting.wordWrap=e.DataViewObjects.getValue(o,t.cardProps.wordWrap.show,this.cardFormatSetting.wordWrap),this.cardFormatSetting.textSize=e.DataViewObjects.getValue(o,t.cardProps.categoryLabels.fontSize,this.cardFormatSetting.textSize)}}}this.updateInternal(a,!0,!0)},n.prototype.onResizing=function(e){this.currentViewport=e,this.updateViewportProperties(),this.updateInternal(this.value,!0,!0)},n.prototype.updateViewportProperties=function(){var e=this.currentViewport;this.svg.attr("width",e.width).attr("height",e.height)},n.prototype.setTextProperties=function(e,t){n.cardTextProperties.fontSize=jsCommon.PixelConverter.fromPoint(t),n.cardTextProperties.text=e},n.prototype.getCardFormatTextSize=function(){return this.cardFormatSetting.textSize},n.prototype.getAdjustedFontHeight=function(e,t,i){var a=r.prototype.getAdjustedFontHeight.call(this,e,t,i);return Math.min(a,n.DefaultStyle.card.maxFontSize)},n.prototype.clear=function(e){void 0===e&&(e=!1),this.svg.select(n.Value.selector).text(""),e||this.svg.select(n.Label.selector).text(""),r.prototype.clear.call(this)},n.prototype.updateInternal=function(a,r,o){void 0===o&&(o=!1);var s=this.value,l=t.AnimatorCommon.GetAnimationDuration(this.animator,r);if(void 0===a)return void(void 0!==s&&this.clear());var u=this.metaDataColumn,c=this.cardFormatSetting.labelSettings,h=0===c.displayUnits,p=this.getFormatString(u),d=t.valueFormatter.create({format:p,value:h?a:c.displayUnits,precision:t.dataLabelUtils.getLabelPrecision(c.precision,p),displayUnitSystemType:h&&c.precision===t.dataLabelUtils.defaultLabelPrecision?this.displayUnitSystemType:e.DisplayUnitSystemType.WholeUnits,formatSingleValues:h?!0:!1,allowFormatBeautification:!0,columnType:u?u.type:void 0}),g=this.cardFormatSetting,m=jsCommon.PixelConverter.fromPointToPixel(c.fontSize),f=n.DefaultStyle.value;this.setTextProperties(a,this.getCardFormatTextSize());var y=e.TextMeasurementService.estimateSvgTextHeight(n.cardTextProperties),v=this.currentViewport.width,b=this.currentViewport.height,C=this.getTranslateX(v),x=(b-y-m)/2,S=i(u,a,1);if(this.isScrollable){if(!o&&s===a)return;s!==a&&(a=d.format(a));var w=u?u.displayName:void 0,D=c.showCategory?[w]:[],P=this.getTranslateY(m+y+x),L=this.labelContext.attr("transform",t.SVGUtil.translate(C,P)).selectAll("text").data(D);L.enter().append("text").attr("class",n.Label["class"]),L.text(function(e){return e}).style({"font-size":jsCommon.PixelConverter.fromPoint(this.getCardFormatTextSize()),fill:c.categoryLabelColor,"text-anchor":this.getTextAnchor()}),L.exit().remove();var _=L.node();if(_&&(g.wordWrap?e.TextMeasurementService.wordBreak(_,v/2,b-P):L.call(t.AxisHelper.LabelLayoutStrategy.clip,v,e.TextMeasurementService.svgEllipsis)),S)this.graphicsContext.selectAll("text").remove(),this.displayStatusGraphic(S,C,x,f);else{this.kpiImage.selectAll("div").remove();var N=this.graphicsContext.attr("transform",t.SVGUtil.translate(C,this.getTranslateY(m+x))).selectAll("text").data([a]);N.enter().append("text").attr("class",n.Value["class"]),N.text(function(e){return e}).style({"font-size":jsCommon.PixelConverter.fromPoint(c.fontSize),fill:c.labelColor,"font-family":f.fontFamily,"text-anchor":this.getTextAnchor()}),N.call(t.AxisHelper.LabelLayoutStrategy.clip,v,e.TextMeasurementService.svgEllipsis),N.exit().remove()}}else S?(this.graphicsContext.selectAll("text").remove(),this.displayStatusGraphic(S,C,x,f)):(this.kpiImage.selectAll("div").remove(),this.doValueTransition(s,a,this.displayUnitSystemType,this.animationOptions,l,o,d));this.updateTooltip(a),this.value=a},n.prototype.displayStatusGraphic=function(e,i,a,r){this.graphicsContext.selectAll("text").remove();var n=this.kpiImage.select("div");(!n||n.empty())&&(n=this.kpiImage.append("div")),n.attr("class",e["class"]).style("position","absolute");var o=n.node().offsetWidth,s=n.node().offsetHeight;n.style("transform",t.SVGUtil.translateWithPixels(i-o/2,this.getTranslateY(r.textSize+a)-s))},n.prototype.updateTooltip=function(e){this.toolTip||(this.toolTip=this.graphicsContext.append("svg:title")),this.toolTip.text(e)},n.prototype.getDefaultFormatSettings=function(){return{labelSettings:t.dataLabelUtils.getDefaultCardLabelSettings(n.DefaultStyle.value.color,n.DefaultStyle.label.color,n.DefaultStyle.value.textSize),wordWrap:!1,textSize:n.DefaultStyle.label.textSize}},n.prototype.enumerateObjectInstances=function(e){this.cardFormatSetting||(this.cardFormatSetting=this.getDefaultFormatSettings());var i=this.cardFormatSetting,a=new t.ObjectEnumerationBuilder;switch(e.objectName){case"categoryLabels":t.dataLabelUtils.enumerateCategoryLabels(a,i.labelSettings,!0,!0,i.textSize);break;case"labels":var r={enumeration:a,dataLabelsSettings:i.labelSettings,show:!0,displayUnits:!0,precision:!0,fontSize:!0};t.dataLabelUtils.enumerateDataLabels(r);break;case"wordWrap":a.pushInstance({objectName:"wordWrap",selector:null,properties:{show:i.wordWrap}})}return a.complete()},n.cardClassName="card",n.Label=a("label"),n.Value=a("value"),n.KPIImage=a("caption"),n.cardTextProperties={fontSize:null,text:null,fontFamily:t.dataLabelUtils.LabelTextProperties.fontFamily},n.DefaultStyle={card:{maxFontSize:200},label:{textSize:12,color:"#a6a6a6"},value:{textSize:27,color:"#333333",fontFamily:"wf_segoe-ui_Semibold"}},n}(t.AnimatedText);t.Card=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(e){e[e.Sad=0]="Sad",e[e.Meh=1]="Meh",e[e.Happy=2]="Happy"}(i||(i={}));var a=function(){function a(){}return a.converter=function(e){return{}},a.getGaugeData=function(e){var i={max:100,min:0,target:void 0,total:0,tooltipItems:[]};if(e&&e.categorical&&e.categorical.values&&e.metadata&&e.metadata.columns)for(var a=e.categorical.values,r=e.metadata.columns,n=0;n<a.length;n++){var o=r[n],s=a[n].values[0]||0;o&&o.roles&&(o.roles[t.gaugeRoleNames.y]?(i.total=s,s&&i.tooltipItems.push({value:s,metadata:a[n]})):o.roles[t.gaugeRoleNames.minValue]?i.min=s:o.roles[t.gaugeRoleNames.maxValue]?i.max=s:o.roles[t.gaugeRoleNames.targetValue]&&(i.target=s,s&&i.tooltipItems.push({value:s,metadata:a[n]})))}return i},a.prototype.init=function(e){var t=this;this.rootElem=e.element,this.rootElem.addClass("owlGaugeVisual"),this.svgTailElem=$(a.owlTailSvg),this.svgBgElem=$(a.visualBgSvg),this.svgBodyElem=$(a.owlBodySvg),this.rootElem.append(this.svgBgElem).append(this.svgTailElem).append(this.svgBodyElem),a.OwlDemoMode&&window.setInterval(function(){var e=100*Math.random()+1;t.updateGauge(e)},2e3),this.updateViewportSize(e.viewport.width,e.viewport.height)},a.prototype.update=function(e){this.updateViewportSize(e.viewport.width,e.viewport.height);var t=e.dataViews.length>0?e.dataViews[0]:null;if(t){var i=a.getGaugeData(e.dataViews[0]),r=(i.total-i.min)/(i.max-i.min);this.updateGauge(100*r|0)}else this.updateGauge(0)},a.prototype.updateGauge=function(e){if(e>=0&&100>=e){var t=-180+180*e/100;this.svgBgElem.css({transform:"rotate("+t+"deg)"}),e>=66?this.happinessLevel=i.Happy:e>=33?this.happinessLevel=i.Meh:this.happinessLevel=i.Sad}},Object.defineProperty(a.prototype,"happinessLevel",{set:function(e){switch(this.rootElem.removeClass("sad").removeClass("meh").removeClass("happy"),e){case i.Sad:this.rootElem.addClass("sad");break;case i.Meh:this.rootElem.addClass("meh");break;case i.Happy:this.rootElem.addClass("happy")}},enumerable:!0,configurable:!0}),a.prototype.updateViewportSize=function(e,t){var i=this,r=window.setImmediate||window.requestAnimationFrame;r(function(){i.rootElem.css({height:t,width:e}),i.svgBodyElem.height(i.svgBodyElem.width()*a.owlBodyHeightMultiplier),i.svgBgElem.height(i.svgBgElem.width()*a.visualBgHeightMultiplier),i.svgTailElem.height(i.svgTailElem.width()*a.owlTailHeightMultiplier)})},a.owlBodySvg='<svg version="1.1" class="owlGaugeBody" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 267.7 291.2" style="enable-background:new 0 0 267.7 291.2;" xml:space="preserve"> <style type="text/css"> .owlGaugeBody .st0{fill:#A87D50;} .owlGaugeBody .st1{fill:#C2B59B;} .owlGaugeBody .st2{fill:#EB2227;} .owlGaugeBody .st3{fill:#FFFFFF;} .owlGaugeBody .st4{fill:#F9D018;} .owlGaugeBody .st5{fill:none;} .owlGaugeBody .st6{fill:#83381B;} .owlGaugeBody .st7{fill:#231F20;} </style> <g id="XMLID_31_"> <g id="XMLID_34_"> <ellipse id="XMLID_21_" transform="matrix(0.9998 1.947640e-02 -1.947640e-02 0.9998 2.8614 -2.5802)" class="st0" cx="133.9" cy="145.6" rx="133.9" ry="145.6"/> <polygon id="XMLID_20_" class="st0" points="199.2,32.8 184,11.3 209,9.7 "/> <polygon id="XMLID_19_" class="st0" points="73.9,31.2 62.1,7.7 87.1,9.8 "/> <circle id="XMLID_18_" class="st1" cx="134.8" cy="189.2" r="89.8"/> <path id="XMLID_17_" class="st2" d="M140.1,88c-2.7,3.8-7.9,4.7-11.7,2c-2.7-1.9-3.9-5.1-3.4-8.1c0,0,9.6-41.8,9.6-41.8l6.9,40.8 C142,83.2,141.6,85.8,140.1,88z"/> <path id="XMLID_16_" class="st3" d="M164.6,16.2c-14.2,0-26.3,9.2-30.6,21.9c-4.1-13.1-16.3-22.6-30.8-22.6 C85.4,15.6,71,30,71,47.8s14.4,32.3,32.3,32.3c14.2,0,26.3-9.2,30.6-21.9c4.1,13.1,16.3,22.6,30.8,22.6 c17.8,0,32.3-14.4,32.3-32.3S182.4,16.2,164.6,16.2z"/> <path id="XMLID_15_" class="st4" d="M122,58.7l23.3-0.1c0,0-9,14.8-10.2,16.6c-1.2,1.9-2.2,0.1-2.2,0.1L122,58.7z"/> <rect id="XMLID_14_" x="-11.4" y="-68.8" class="st5" width="288.3" height="259.7"/> <g id="XMLID_37_"> <path id="XMLID_13_" class="st6" d="M121.6,125.5c0,3.7-3.5,6.6-7.7,6.6c-4.2,0-7.7-3-7.7-6.6"/> <path id="XMLID_12_" class="st6" d="M160.1,126.5c0,3.7-3.5,6.6-7.7,6.6s-7.7-3-7.7-6.6"/> <path id="XMLID_11_" class="st6" d="M142.4,148.1c0,3.7-3.5,6.6-7.7,6.6c-4.2,0-7.7-3-7.7-6.6"/> <path id="XMLID_10_" class="st6" d="M183.1,148.8c0,3.7-3.5,6.6-7.7,6.6c-4.2,0-7.7-3-7.7-6.6"/> <path id="XMLID_9_" class="st6" d="M160.9,177.4c0,3.7-3.5,6.6-7.7,6.6s-7.7-3-7.7-6.6"/> <path id="XMLID_8_" class="st6" d="M201.6,178c0,3.7-3.5,6.6-7.7,6.6s-7.7-3-7.7-6.6"/> <path id="XMLID_7_" class="st6" d="M76.4,177.4c0,3.7-3.5,6.6-7.7,6.6c-4.2,0-7.7-3-7.7-6.6"/> <path id="XMLID_6_" class="st6" d="M117,178c0,3.7-3.5,6.6-7.7,6.6s-7.7-3-7.7-6.6"/> <path id="XMLID_5_" class="st6" d="M98.6,148.1c0,3.7-3.5,6.6-7.7,6.6c-4.2,0-7.7-3-7.7-6.6"/> </g> <circle id="XMLID_4_" class="st7" cx="164.1" cy="49" r="6.4"/> <circle id="XMLID_3_" class="st7" cx="102.7" cy="47.7" r="6.4"/> </g> <path id="XMLID_2_" class="st0" d="M160.1,140.9c11.1-8.4,55.6-36,55.6-36l4.7,0.8l10.2,38.8c0,0-3,3-9.2,3.1 c-5.1,0.1-45.9-2.6-60.2-3.5C158.1,143.9,157.7,142.7,160.1,140.9z"/> <path id="XMLID_1_" class="st0" d="M110.6,140.8c-11.1-8.4-55.6-36-55.6-36l-4.7,0.8L40,144.4c0,0,3,3,9.2,3.1 c5.1,0.1,45.9-2.6,60.2-3.5C112.5,143.8,113,142.6,110.6,140.8z"/> </g> </svg>',
a.owlTailSvg='<svg version="1.1" class="owlGaugeTail" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 587.8 295.5" style="enable-background:new 0 0 587.8 295.5;" xml:space="preserve"> <style type="text/css"> .owlGaugeTail .st0{fill:#3B2416;} .owlGaugeTail .st1{fill:#5B4B43;} .owlGaugeTail .st2{fill:#603A17;} .owlGaugeTail .st3{fill:#726659;} </style> <g id="XMLID_55_"> <path id="XMLID_29_" class="st0" d="M85.2,106.2c-27.1,0-49.2,22-49.2,49.2c0,19.1,10.9,35.7,26.9,43.8c0,0,231.2,95.9,231.2,95.9 l-171-171C114.1,113.2,100.5,106.2,85.2,106.2z"/> <g id="XMLID_56_"> <path id="XMLID_28_" class="st1" d="M482.5,86.4c0-27.1-22-49.2-49.2-49.2c-19.1,0-35.7,10.9-43.8,26.9c0,0-95.9,231.2-95.9,231.2 l171-171C475.5,115.3,482.5,101.7,482.5,86.4z"/> <path id="XMLID_27_" class="st2" d="M573.5,281.3c19.2-19.2,19.2-50.3,0-69.5c-13.5-13.5-33-17.5-50-12c0,0-231.3,95.7-231.3,95.7 l241.8,0C548,296.9,562.6,292.1,573.5,281.3z"/> <path id="XMLID_26_" class="st3" d="M279.9,14.4c-19.2-19.2-50.3-19.2-69.5,0c-13.5,13.5-17.5,33-12,50c0,0,95.7,231.3,95.7,231.3 L294,54C295.4,39.8,290.7,25.2,279.9,14.4z"/> <path id="XMLID_25_" class="st2" d="M105.3,86.4c0-27.1,22-49.2,49.2-49.2c19.1,0,35.7,10.9,43.8,26.9c0,0,95.9,231.2,95.9,231.2 l-171-171C112.3,115.3,105.3,101.7,105.3,86.4z"/> <path id="XMLID_24_" class="st2" d="M14.4,281.4c-19.2-19.2-19.2-50.3,0-69.5c13.5-13.5,33-17.5,50-12c0,0,231.3,95.7,231.3,95.7 l-241.8,0C39.8,297,25.2,292.3,14.4,281.4z"/> <path id="XMLID_23_" class="st2" d="M308.2,14c19.2-19.2,50.3-19.2,69.5,0c13.5,13.5,17.5,33,12,50c0,0-95.7,231.3-95.7,231.3 l0-241.8C292.6,39.4,297.4,24.8,308.2,14z"/> <path id="XMLID_22_" class="st0" d="M503.2,106c27.1,0,49.2,22,49.2,49.2c0,19.1-10.9,35.7-26.9,43.8c0,0-231.2,95.9-231.2,95.9 l171-171C474.2,113,487.8,106,503.2,106z"/> </g> </g> </svg>',a.visualBgSvg='<svg version="1.1" class="owlGaugeBg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="123.8 94.9 349.1 175.3" style="enable-background:new 123.8 94.9 349.1 175.3;" xml:space="preserve"> <style type="text/css"> .owlGaugeBg .st0{fill:#EF4137;} .owlGaugeBg .st1{fill:#FAAF42;} .owlGaugeBg .st2{fill:#F15B2A;} .owlGaugeBg .st3{fill:#F69321;} </style> <g id="XMLID_10_"> <path id="XMLID_8_" class="st0" d="M174.3,158c-16.1,0-29.2,13.1-29.2,29.2c0,11.4,6.5,21.2,16,26.1l137.3,57L196.9,168.7 C191.5,162.2,183.4,158,174.3,158z"/> <g id="XMLID_11_"> <path id="XMLID_7_" class="st1" d="M410.2,146.3c0-16.1-13.1-29.2-29.2-29.2c-11.4,0-21.2,6.5-26,16l-57,137.5L399.5,169 C406.1,163.5,410.2,155.4,410.2,146.3z"/> <path id="XMLID_6_" class="st0" d="M464.3,262.2c11.4-11.4,11.4-29.9,0-41.3c-8-8-19.6-10.4-29.7-7.1l-137.4,56.9h143.6 C449.2,271.4,457.9,268.6,464.3,262.2z"/> <path id="XMLID_5_" class="st2" d="M290,103.5c-11.4-11.4-29.9-11.4-41.3,0c-8,8-10.4,19.6-7.1,29.7l56.8,137.5V127 C299.2,118.6,296.4,109.9,290,103.5z"/> <path id="XMLID_4_" class="st3" d="M186.3,146.3c0-16.1,13.1-29.2,29.2-29.2c11.4,0,21.2,6.5,26,16l57,137.5L197,168.8 C190.5,163.5,186.3,155.4,186.3,146.3z"/> <path id="XMLID_3_" class="st2" d="M132.3,262.2c-11.4-11.4-11.4-29.9,0-41.3c8-8,19.6-10.4,29.7-7.1l137.4,56.9H155.8 C147.4,271.5,138.7,268.7,132.3,262.2z"/> <path id="XMLID_2_" class="st3" d="M306.8,103.2c11.4-11.4,29.9-11.4,41.3,0c8,8,10.4,19.6,7.1,29.7l-56.8,137.5V126.7 C297.5,118.3,300.3,109.7,306.8,103.2z"/> <path id="XMLID_1_" class="st2" d="M422.5,157.9c16.1,0,29.2,13.1,29.2,29.2c0,11.4-6.5,21.2-16,26.1l-137.3,57L400,168.6 C405.3,162.1,413.4,157.9,422.5,157.9z"/> </g> </g> </svg>',a.owlBodyHeightMultiplier=291.2/267.7,a.owlTailHeightMultiplier=295.5/587.8,a.visualBgHeightMultiplier=295.5/587.8,a.OwlDemoMode=!1,a.capabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping},{name:"Y",kind:e.VisualDataRoleKind.Measure}],dataViewMappings:[{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{bind:{to:"Y"}}]}}]},a}();t.OwlGauge=a}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){var a=e.visuals.valueFormatter,r=t.utility.SelectionManager,n=function(){function i(){this.margin={left:45,right:30,bottom:25,top:25}}return i.prototype.converter=function(e,i){for(var r,n=e.categorical,o=n.values,s=[],l={dataPoints:[],title:o[0].source.displayName,fontSize:3*parseInt(this.fontSize,10)/4},u=[],c=0,h=0,p=o.length;p>h;h++){s.push([]),o[h].source.groupName&&l.dataPoints.push({label:o[h].source.groupName,color:i.getColorByIndex(h).value,icon:t.LegendIcon.Box,selected:!1,identity:t.SelectionId.createWithId(o[h].identity)});for(var d=0,g=o[h].values.length;g>d;d++){var m=t.SelectionIdBuilder.builder().withSeries(e.categorical.values,e.categorical.values[h]).createSelectionId(),f=o[h].values[d];f>c&&(c=f),s[h].push({x:d,y:f,identity:m})}}return r=a.create({format:"g",value:c}),n.categories&&n.categories[0]&&n.categories[0].values&&(u=n.categories[0].values),{dataPoints:s,legendData:l,valueFormatter:r,axisXData:this.parseAxisXData(n.categories[0].source,u)}},i.prototype.parseAxisXData=function(e,t){var r=i.MaxNumberOfAxisXValues;if(!(t&&t.length>0))return{valueFormatter:null,values:[],maxNumverOfValues:r};var n,o=a.create({format:a.getFormatString(e,i.Properties.general.formatString),value:t[0]}),s=[this.margin.left,this.viewport.width-this.margin.right],l=t;return e.type.dateTime?(n=d3.time.scale(),n.domain([t[0],t[t.length-1]]),n.range(s)):e.type.numeric?(n=d3.scale.linear(),n.domain([t[0],t[t.length-1]]),n.range(s)):(n=d3.scale.ordinal(),n.domain(t),n.rangePoints(s)),{valueFormatter:o,values:l,maxNumverOfValues:r,scale:n}},i.prototype.init=function(e){var a=e.element;this.selectionManager=new r({hostServices:e.host}),this.svg=d3.select(a.get(0)).append("svg").classed(i.VisualClassName,!0),this.xAxis=this.svg.append("g"),this.yAxis=this.svg.append("g"),this.colors=e.style.colorPalette.dataColors,this.legend=t.createLegend(a,!1,null,!0)},i.prototype.update=function(e){var a=this;if(e.dataViews&&e.dataViews[0]){this.viewport=e.viewport;var r=e.suppressAnimations?0:250,n=this.dataView=e.dataViews[0],o=this.converter(n,this.colors),s=o.dataPoints;if(0===s.length)return void this.svg.selectAll(i.Layer.selector).remove();this.legend.changeOrientation(t.LegendPosition.Top),this.legend.drawLegend(o.legendData,this.viewport);var l=e.viewport.height-this.margin.top;this.svg.attr({width:this.viewport.width,height:l});var u=d3.layout.stack();this.getWiggle(n)&&u.offset("wiggle");var c=u(s),h=d3.scale.linear().domain([0,s[0].length-1]).range([this.margin.left,this.viewport.width-this.margin.right]),p=d3.scale.linear().domain([0,d3.max(c,function(e){return d3.max(e,function(e){return e.y0+e.y})})]).range([l-this.margin.bottom,this.margin.top]),d=d3.svg.area().interpolate("basis").x(function(e){return h(e.x)}).y0(function(e){return p(e.y0)}).y1(function(e){return p(e.y0+e.y)}),g=this.selectionManager,m=this.svg.selectAll(i.Layer.selector).data(c);m.enter().append("path").classed(i.Layer["class"],!0),m.style("fill",function(e,t){return a.colors.getColorByIndex(t).value}).on("click",function(e){var t=this;g.select(e[0].identity).then(function(e){e.length>0?(m.style("opacity",.5),d3.select(t).style("opacity",1)):m.style("opacity",1)})}).transition().duration(r).attr("d",d),m.exit().remove(),this.drawAxis(o,p)}},i.prototype.drawAxis=function(i,a){var r=this,n=this.viewport.height-this.margin.bottom-this.margin.top,o=this.viewport.width-this.margin.left-this.margin.right,s=this.getTextPropertiesFunction(),l=d3.svg.axis();l.scale(i.axisXData.scale).orient("bottom").tickFormat(function(t,a){return i.axisXData.valueFormatter&&(t=i.axisXData.valueFormatter.format(t)),null==a||!l.tickValues()||0!==a&&a!==l.tickValues().length-1||(t=e.TextMeasurementService.getTailoredTextOrDefault(s(t),2*(a?r.margin.right:r.margin.left))),t}.bind(l));var u=d3.svg.axis().scale(a).orient("left").tickFormat(function(e){return i.valueFormatter?i.valueFormatter.format(e):e});this.setMaxTicks(l,o,i.axisXData.maxNumverOfValues),this.setMaxTicks(u,n),this.xAxis.attr("class","x axis").attr("transform",t.SVGUtil.translate(0,n)).call(l),this.yAxis.attr("class","y axis").attr("transform",t.SVGUtil.translate(this.margin.left,0)).call(u)},i.prototype.setMaxTicks=function(e,t,i){var a=void 0===i?this.getTicksByAxis(e).length:Math.min(i,this.getTicksByAxis(e).length);e.scale().domain.toString()===d3.scale.linear().domain.toString()?e.ticks(this.getFittedTickLength(e,t,a)):e.tickValues(this.getFittedTickValues(e,t,a))},i.prototype.getFittedTickLength=function(e,t,i){for(var a=this.getTicksByAxis(e),r=this.getMeasureTickFunction(e,a);i>0&&t>0&&(this.measureTicks(a,r)>t||e.scale().ticks([i]).length>i);i--,a=this.getTicksByAxis(e))e.ticks(i);return i},i.prototype.getFittedTickValues=function(e,t,i){for(var a=this.getTicksByAxis(e),r=this.getMeasureTickFunction(e,a),n=i,o=[];i>0&&t>0;n--,o=[]){switch(n){case 0:return[];case 1:o=[0];break;case 2:o=[0,a.length-1];break;default:for(var s=a.length/(n-1),l=0;n-1>l;l++)o.push(Math.round(s*l));o.push(a.length-1)}var u=o.map(function(e){return[a[e],e]}),c=t/a.length*2,h=[];if(u.reduce(function(e,t){return h.push([r(e[0])+r(t[0]),(t[1]-e[1])*c]),t}),!h.some(function(e){return e[0]>e[1]}))return u.map(function(e){return e[0]})}return[]},i.prototype.measureTicks=function(e,t){return e.map(function(e){return t(e)}).reduce(function(e,t){return e+t})},i.prototype.getTicksByAxis=function(e){var t=e.scale(),i=null===e.tickValues()?t.ticks?t.ticks.apply(t,e.ticks()):t.domain():e.tickValues();return void 0===i.length?[i]:i},i.prototype.getMeasureTickFunction=function(t,i){var a="top"===t.orient()||"bottom"===t.orient()?e.TextMeasurementService.measureSvgTextWidth:e.TextMeasurementService.measureSvgTextHeight,r=this.getTextPropertiesFunction(),n={};return function(e){return n[e]?n[e]:n[e]=a(r(t.tickFormat()(e)))+t.tickPadding()}},i.prototype.getTextPropertiesFunction=function(){var e=this.fontFamily,t=this.fontSize,i=this.fontWeight;return function(a){return{text:a,fontFamily:e,fontSize:t,fontWeight:i}}},Object.defineProperty(i.prototype,"fontSize",{get:function(){return this.svg.style("font-size")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontFamily",{get:function(){return this.svg.style("font-family")},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fontWeight",{get:function(){return this.svg.style("font-weight")},enumerable:!0,configurable:!0}),i.prototype.getWiggle=function(e){if(e){var t=e.metadata.objects;if(t){var i=t.general;if(i)return i.wiggle}}return!0},i.prototype.enumerateObjectInstances=function(e){var t=[],i=this.dataView;switch(e.objectName){case"general":var a={objectName:"general",displayName:"General",selector:null,properties:{wiggle:this.getWiggle(i)}};t.push(a)}return t},i.VisualClassName="streamGraph",i.Properties={general:{formatString:{objectName:"general",propertyName:"formatString"}}},i.Layer={"class":"layer",selector:".layer"},i.MaxNumberOfAxisXValues=5,i.capabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:"Category"},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:"Series"},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values")}],dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:0}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{bottom:{}}},values:{group:{by:"Series",select:[{"for":{"in":"Y"}}],dataReductionAlgorithm:{bottom:{}}}}}}],objects:{general:{displayName:"General",properties:{formatString:{type:{formatting:{formatString:!0}}},wiggle:{type:{bool:!0},displayName:"Wiggle"}}}}},i}();i.StreamGraph=n}(i=t.samples||(t.samples={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){var a=t.utility.SelectionManager;i.sunburstRoleNames={nodes:"Nodes",values:"Values"};var r=function(){function i(){this.total=0}return i.prototype.init=function(e){var t=this;this.arc=d3.svg.arc().startAngle(function(e){return e.x}).endAngle(function(e){return e.x+e.dx}).innerRadius(function(e){return Math.sqrt(e.y)}).outerRadius(function(e){return Math.sqrt(e.y+e.dy)}),this.colors=e.style.colorPalette.dataColors,this.selectionManager=new a({hostServices:e.host}),this.svg=d3.select(e.element.get(0)).append("svg"),this.svg.classed("mainDrawArea",!0),this.g=this.svg.append("g"),this.g.classed("container",!0),this.svg.append("text").classed("sunBurstPercentageFixed",!0),this.svg.on("mousedown",function(e){t.svg.selectAll("path").style("opacity",1),t.svg.select(".sunBurstPercentageFixed").style("opacity",0),t.selectionManager.clear()})},i.setAllUnhide=function(e){e.attr("setUnHide","true")},i.prototype.update=function(e){if(e.dataViews.length>0){var t=this.converter(e.dataViews[0],this.colors);this.viewport=e.viewport,this.updateInternal(t)}},i.prototype.updateInternal=function(e){var a=this;this.svg.attr({height:this.viewport.height,width:this.viewport.width}),this.g.attr("transform",t.SVGUtil.translate(this.viewport.width/2,this.viewport.height/2));var r=Math.min(this.viewport.width,this.viewport.height)/2,n=d3.layout.partition().size([2*Math.PI,r*r]).value(function(e){return e.value}),o=this.g.datum(e).selectAll("path").data(n.nodes);o.enter().append("path"),o.attr("display",function(e){return e.depth?null:"none"}).attr("d",this.arc).style("stroke","#fff").style("fill",function(e){return e.color}).style("fill-rule","evenodd").on("mousedown",function(e){e.selector&&a.selectionManager.select(e.selector),d3.selectAll("path").call(i.setAllUnhide).attr("setUnHide",null),a.highlightPath(e,a,!0);var t=a.svg.select(".sunBurstPercentageFixed"),r=0===a.total?0:(100*e.total/a.total).toPrecision(3);t.text(e?r+"%":""),t.style("fill",e.color),a.onResize(),event.stopPropagation()}),this.renderTooltip(o),o.exit().remove(),this.onResize()},i.getTreePath=function(e){for(var t=[],i=e;i.parent;)t.unshift(i),i=i.parent;return t},i.prototype.onResize=function(){var e=this.viewport.width,t=this.viewport.height,i=this.svg.select(".sunBurstPercentageFixed");i.style("opacity",1),i.attr("y",t/2),i.attr("x",e/2-i.node().clientWidth/2)},i.prototype.highlightPath=function(e,t,a){var r=e?i.getTreePath(e):[];t.svg.selectAll("path").each(function(){"true"!==d3.select(this).attr("setUnHide")&&d3.select(this).style("opacity",i.minOpacity)}),t.svg.selectAll("path").filter(function(e){return r.indexOf(e)>=0}).each(function(){d3.select(this).style("opacity",1),a===!0&&d3.select(this).attr("setUnHide","true")})},i.prototype.renderTooltip=function(e){t.TooltipManager.addTooltip(e,function(e){return e.data.tooltipInfo})},i.getTooltipData=function(e,t){return[{displayName:e,value:0>t?"":t.toString()}]},i.prototype.covertTreeNodeToSunBurstNode=function(e,a,r,n,o){var s;e.identity&&(n=n.concat([e.identity]),s={data:n});var l=0===n.length?null:new t.SelectionId(s,!1),u=e.values?e.values[0].value:0,c={name:e.name,value:Math.max(u,0),selector:l,key:l?l.getKey():null,total:u};if(e.value&&(c.color=o?o:r.getColor(e.value).value),this.total+=c.value,e.children&&e.children.length>0){c.tooltipInfo=i.getTooltipData(e.value,-1),c.children=[];for(var h=0;h<e.children.length;h++){var p=this.covertTreeNodeToSunBurstNode(e.children[h],c,r,n,c.color);c.children.push(p),c.total+=p.total}}else c.tooltipInfo=i.getTooltipData(e.value,u);return a&&(c.parent=a),c},i.prototype.converter=function(e,t){var i=t.getNewColorScale();this.total=0;var a=this.covertTreeNodeToSunBurstNode(e.matrix.rows.root,null,i,[],void 0);return a},i.minOpacity=.2,i.roleNames={nodes:"Nodes",values:"Values"},i.capabilities={dataRoles:[{name:i.roleNames.nodes,kind:e.VisualDataRoleKind.Grouping,displayName:"Groups"},{name:i.roleNames.values,kind:e.VisualDataRoleKind.Measure,displayName:"Values"}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}}},dataViewMappings:[{conditions:[{Groups:{min:0},Values:{max:1}}],matrix:{rows:{"for":{"in":i.roleNames.nodes}},values:{"for":{"in":i.roleNames.values}}}}]},i}();i.Sunburst=r}(i=t.samples||(t.samples={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){var a=t.utility.SelectionManager,r=function(){function i(e){e&&(e.svg&&(this.svg=e.svg),e.animator&&(this.animator=e.animator),e.margin&&(this.margin=e.margin))}return i.converter=function(e,i){if(!(e&&e.categorical&&e.categorical.categories&&e.categorical.categories.length>0&&e.categorical.categories[0]&&e.categorical.values&&e.categorical.values.length>0))return{dataPoints:[],legendData:{dataPoints:[]}};for(var a=e.categorical,r=a.values,n=[],o={fontSize:8.25,dataPoints:[],title:a.categories[0].source.displayName},s=0,l=r.length;l>s;s++){var u=i.getColorByIndex(s).value,c=void 0;r[s].source&&r[s].source.queryName&&(c=r[s].source.queryName),n.push([]),o.dataPoints.push({label:r[s].source.displayName,color:u,icon:t.LegendIcon.Box,selected:!1,identity:t.SelectionId.createWithMeasure(c)});for(var h=0,p=r[s].values.length;p>h;h++){var d=t.SelectionIdBuilder.builder().withSeries(e.categorical.values,e.categorical.values[s]).createSelectionId();n[s].push({x:h,y:r[s].values[h],color:u,identity:d})}}return{dataPoints:n,legendData:o}},i.prototype.init=function(e){var r=e.element;this.selectionManager=new a({hostServices:e.host}),this.svg||(this.svg=d3.select(r.get(0)).append("svg")),this.margin||(this.margin=i.DefaultMargin),this.svg.classed(i.VisualClassName,!0),this.colors=e.style.colorPalette.dataColors,this.mainGroupElement=this.svg.append("g"),this.legend=t.createLegend(r,!1,null,!0,t.LegendPosition.Top),this.segments=this.mainGroupElement.append("g").classed(i.Segments["class"],!0),this.axis=this.mainGroupElement.append("g").classed(i.Axis["class"],!0),this.chart=this.mainGroupElement.append("g").classed(i.Chart["class"],!0)},i.prototype.update=function(e){if(e.dataViews&&e.dataViews[0]){var a,r=e.dataViews[0],n=[],o=i.converter(r,this.colors),s=o.dataPoints,l=t.AnimatorCommon.GetAnimationDuration(this.animator,e.suppressAnimations);r.categorical&&r.categorical.categories&&r.categorical.categories[0]&&r.categorical.categories[0].values&&(n=r.categorical.categories[0].values),r.metadata&&r.metadata.columns&&r.metadata.columns.length>0&&(a=r.metadata.columns[0]),this.viewport={height:e.viewport.height>0?e.viewport.height:0,width:e.viewport.width>0?e.viewport.width:0},this.legend.changeOrientation(t.LegendPosition.Top),this.legend.drawLegend(o.legendData,this.viewport),this.svg.attr({height:this.viewport.height,width:this.viewport.width});var u=this.mainGroupElement;u.attr("transform",t.SVGUtil.translate(this.viewport.width/2,this.viewport.height/2));var c=this.viewport.width-this.margin.left-this.margin.right,h=this.viewport.height-this.margin.top-this.margin.bottom;this.angle=i.Radians/n.length,this.radius=i.SegmentFactor*i.Scale*Math.min(c,h)/2,this.drawCircularSegments(n),this.drawAxes(n),this.drawAxesLabels(n,a),this.drawChart(s,l)}},i.prototype.drawCircularSegments=function(e){for(var t=[],a=this.angle,r=i.SegmentFactor,n=i.SegmentLevels,o=this.radius,s=0;n-1>s;s++)for(var l=o*((s+1)/n),u=-1*l,c=0;c<e.length;c++)t.push({x1:l*(1-r*Math.sin(c*a)),y1:l*(1-r*Math.cos(c*a)),x2:l*(1-r*Math.sin((c+1)*a)),y2:l*(1-r*Math.cos((c+1)*a)),translate:"translate("+u+","+u+")"});var h=this.mainGroupElement.select(i.Segments.selector).selectAll(i.SegmentNode.selector).data(t);h.enter().append("svg:line").classed(i.SegmentNode["class"],!0),h.attr("x1",function(e){return e.x1}).attr("y1",function(e){return e.y1}).attr("x2",function(e){return e.x2}).attr("y2",function(e){return e.y2}).attr("transform",function(e){return e.translate}),h.exit().remove()},i.prototype.drawAxes=function(e){var t=this.angle,a=-1*this.radius,r=this.mainGroupElement.select(i.Axis.selector).selectAll(i.AxisNode.selector),n=r.data(e);n.enter().append("svg:line"),n.attr("x1",0).attr("y1",0).attr("x2",function(e,i){return a*Math.sin(i*t)}).attr("y2",function(e,i){return a*Math.cos(i*t)}).classed(i.AxisNode["class"],!0),n.exit().remove()},i.prototype.drawAxesLabels=function(e,a){var r=this.angle,n=-1*this.radius,o=e.length,s=t.valueFormatter.create({format:t.valueFormatter.getFormatString(a,i.formatStringProp,!0),value:e[0],value2:e[o-1]}),l=this.mainGroupElement.select(i.Axis.selector).selectAll(i.AxisLabel.selector),u=l.data(e);u.enter().append("svg:text"),u.attr("text-anchor","middle").attr("dy","1.5em").attr("transform","translate(0, -10)").attr("x",function(e,t){return(n-20)*Math.sin(t*r)}).attr("y",function(e,t){return(n-10)*Math.cos(t*r)}).text(function(e){return s.format(e)}).classed(i.AxisLabel["class"],!0),u.exit().remove()},i.prototype.drawChart=function(e,t){var a=this.angle,r=this.radius,n=.5,o=5,s=d3.layout.stack(),l=s(e),u=d3.scale.linear().domain([0,d3.max(l,function(e){return d3.max(e,function(e){return e.y0+e.y})})]).range([0,r]),c=function(e){return e.map(function(e,t){var i=-1*u(e.y)*Math.sin(t*a),r=-1*u(e.y)*Math.cos(t*a);return i+","+r}).join(" ")},h=this.selectionManager,p=this.chart.selectAll(i.ChartNode.selector).data(l);p.enter().append("g").classed(i.ChartNode["class"],!0);var d=p.selectAll(i.ChartPolygon.selector).data(function(e){return e&&e.length>0?[e]:[]});d.enter().append("polygon").classed(i.ChartPolygon["class"],!0),d.style("fill",function(e){return e[0].color}).style("opacity",n).on("mouseover",function(e){var i=this;h.select(e[0].identity).then(function(e){d3.select(i).transition().duration(t).style("opacity",1)})}).on("mouseout",function(e){var i=this;h.select(e[0].identity).then(function(e){d3.select(i).transition().duration(t).style("opacity",n)})}).attr("points",c),d.exit().remove();var g=p.selectAll(i.ChartDot.selector).data(function(e){return e});g.enter().append("svg:circle").classed(i.ChartDot["class"],!0),g.attr("r",o).attr("cx",function(e,t){return-1*u(e.y)*Math.sin(t*a)}).attr("cy",function(e,t){return-1*u(e.y)*Math.cos(t*a)}).style("fill",function(e){return e.color}),g.exit().remove(),p.exit().remove()},i.capabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping},{name:"Y",kind:e.VisualDataRoleKind.Measure}],dataViewMappings:[{conditions:[{Category:{min:1,max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{bind:{to:"Y"}}]}}}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},label:{displayName:"Label",properties:{fill:{displayName:"Fill",type:{fill:{solid:{color:!0}}}}}}}},i.formatStringProp={objectName:"general",propertyName:"formatString"},i.VisualClassName="radarChart",i.Segments={"class":"segments",selector:".segments"},i.SegmentNode={"class":"segmentNode",selector:".segmentNode"},i.Axis={"class":"axis",selector:".axis"},i.AxisNode={"class":"axisNode",selector:".axisNode"},i.AxisLabel={"class":"axisLabel",selector:".axisLabel"},i.Chart={"class":"chart",selector:".chart"},i.ChartNode={"class":"chartNode",selector:".chartNode"},i.ChartPolygon={"class":"chartPolygon",selector:".chartPolygon"},i.ChartDot={"class":"chartDot",selector:".chartDot"},i.DefaultMargin={top:50,bottom:50,right:100,left:100},i.SegmentLevels=6,i.SegmentFactor=1,i.Radians=2*Math.PI,i.Scale=1,i}();i.RadarChart=r}(i=t.samples||(t.samples={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){var a=t.utility.SelectionManager,r=function(){function i(e){e&&(e.svg&&(this.svg=e.svg),e.animator&&(this.animator=e.animator),this.margin=e.margin||i.DefaultMargin,this.radius=e.radius||i.DefaultRadius,this.strokeWidth=e.strokeWidth||i.DefaultStrokeWidth)}return i.round10=function(e,t){void 0===t&&(t=2);var i=Math.pow(10,t);return Math.round(i*e)/i},i.getTooltipData=function(e){return[{displayName:i.FrequencyText,value:e.toString()}]},i.converter=function(e,a,r,n){var o=[],s={dataPoints:[]};if(!e||!e.categorical||!e.categorical.values||e.categorical.values.length<1||!e.categorical||!e.categorical.categories||!e.categorical.categories[0])return{dataPoints:o,legendData:s};var l=e.categorical,u=l.values,c=l.categories[0].values;if(!u[0].source.type.integer){var h={message:'This visual expects integer Values. Try adding a text field to create a "Count of" value.',title:"Integer Value Expected",detail:""},p={code:"UnexpectedValueType",getMessages:function(){return h}};return n.setWarnings([p]),{dataPoints:o,legendData:s}}for(var d=0,g=u.length;g>d;d++){for(var m={},f=u[d].values,y=0,v=f.length;v>y;y++){var b=c[y],C=f[y];m[b]||(m[b]=0),m[b]+=C}var x=u[d].source.displayName,S=r.getColorByIndex(d).value,w=d3.entries(m),D=d3.min(w,function(e){return e.value}),P=d3.max(w,function(e){return e.value}),L=d3.scale.linear().domain([D,P]);if(P>a){L.rangeRound([0,a]);var _=i.round10(P/a);x+=" (1 dot = x"+_+")"}else L.rangeRound([D,P]);for(var N=0,T=w.length;T>N;N++)for(var V=L(w[N].value),M=0;V>M;M++){var A=t.SelectionIdBuilder.builder().withSeries(e.categorical.values,e.categorical.values[d]).createSelectionId();o.push({x:w[N].key,y:M,color:S,identity:A,tooltipInfo:i.getTooltipData(w[N].value)})}s.dataPoints.push({label:x,color:S,icon:t.LegendIcon.Box,selected:!1,identity:null})}return{dataPoints:o,legendData:s}},i.prototype.init=function(e){var r=e.element;this.selectionManager=new a({hostServices:e.host}),this.hostService=e.host,this.svg||(this.svg=d3.select(r.get(0)).append("svg")),this.margin||(this.margin=i.DefaultMargin),this.radius||(this.radius=i.DefaultRadius),this.strokeWidth||(this.strokeWidth=i.DefaultStrokeWidth),this.svg.classed(i.VisualClassName,!0),this.colors=e.style.colorPalette.dataColors,this.legend=t.createLegend(r,!1,null),this.dotPlot=this.svg.append("g").classed(i.DotPlot["class"],!0),this.axis=this.svg.append("g").classed(i.Axis["class"],!0)},i.prototype.update=function(e){if(e.dataViews&&e.dataViews[0]){var t=this.dataView=e.dataViews[0],a=this.viewport=e.viewport;this.svg.attr({height:a.height,width:a.width});var r=this.radius+this.strokeWidth,n=a.height-this.margin.bottom-this.margin.top,o=Math.round(n/(2*r)),s=i.converter(t,o,this.colors,this.hostService),l=s.dataPoints,u=t.categorical&&t.categorical.categories&&t.categorical.categories.length>0?t.categorical.categories[0].values:[],c=d3.set(u).values(),h=d3.scale.ordinal().domain(c).rangeBands([this.margin.left,a.width-this.margin.right]),p=d3.scale.linear().domain([0,o]).range([n-r,this.margin.top]);this.drawAxis(c,h,n),this.drawDotPlot(l,h,p)}},i.prototype.drawDotPlot=function(e,t,a){var r=this.dotPlot.selectAll(i.Dot.selector).data(e);r.enter().append("circle").classed(i.Dot["class"],!0),r.attr("cx",function(e){return t(e.x)+t.rangeBand()/2}).attr("cy",function(e){return a(e.y)}).attr("fill",function(e){return e.color}).attr("stroke","black").attr("stroke-width",this.strokeWidth).attr("r",this.radius),this.renderTooltip(r),r.exit().remove()},i.prototype.renderTooltip=function(e){t.TooltipManager.addTooltip(e,function(e){return e.data.tooltipInfo})},i.prototype.drawAxis=function(e,i,a){var r=d3.svg.axis().scale(i).orient("bottom").tickValues(e);this.axis.attr("class","x axis").attr("transform",t.SVGUtil.translate(0,a)),this.axis.call(r)},i.capabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Category")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Value")}],dataViewMappings:[{conditions:[{Category:{max:1},Y:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{bind:{to:"Y"}}]}}}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},label:{displayName:"Label",properties:{fill:{displayName:"Fill",type:{fill:{solid:{color:!0}}}}}}}},i.VisualClassName="dotPlot",i.DotPlot={"class":"dotPlot",selector:".dotPlot"},i.Axis={"class":"axis",selector:".axis"},i.Dot={"class":"dot",selector:".dot"},i.DefaultMargin={top:40,bottom:40,right:50,left:50},i.DefaultRadius=5,i.DefaultStrokeWidth=1,i.FrequencyText="Frequency",i}();i.DotPlot=r}(i=t.samples||(t.samples={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){var a=function(){function i(){var e=this;this.selector=["Y","Q","M","D"],this.selectorNames=["year","quarter","month","day"],this.drag=d3.behavior.drag().origin(function(e){return e}).on("dragstart",function(t){e.dragstarted(t,e)}).on("drag",function(t){e.dragged(t,e)}).on("dragend",function(t){e.dragended(t,e)})}return i.isIE=function(){var e,t=navigator.userAgent,i=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],!0):"Chrome"===i[1]&&(e=t.match(/\b(OPR|Edge)\/(\d+)/),null!==e)?e.slice(1).join(" ").replace("OPR","Opera"):(i=i[2]?[i[1],i[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&i.splice(1,1,e[1]),!1)},i.prototype.init=function(e){var t=this;this.hostServices=e.host;var a="month",r=2;this.timelineData={granuralityChanged:!1,elementsCount:0,granularity:a,timelineDatapoints:[],cursorDataPoints:new Array},this.timelineData.cursorDataPoints.push({dx:0,cursorIndex:0}),this.timelineData.cursorDataPoints.push({dx:0,cursorIndex:1});var n=i.isIE(),o=e.element;this.timelineFormat={showHeader:!0,leftMargin:15,rightMargin:15,topMargin:8,bottomMargin:10,timeRangeSize:11,textSize:11,cellWidth:40,cellHeight:25,textYPosition:0,cellsYPosition:0,cellColor:{solid:{color:"#ADD8E6"}},cellColorOut:{solid:{color:"#A4C7F2"}}},this.timelineFormat.textYPosition=2*this.timelineFormat.topMargin+this.timelineFormat.timeRangeSize,this.timelineFormat.cellsYPosition=3*this.timelineFormat.topMargin+2*this.timelineFormat.textSize+this.timelineFormat.timeRangeSize,n&&(this.timelineFormat.bottomMargin=25),this.timelineFormat.textYPosition=2*this.timelineFormat.topMargin+this.timelineFormat.timeRangeSize,this.timelineFormat.cellsYPosition=3*this.timelineFormat.topMargin+2*this.timelineFormat.textSize+this.timelineFormat.timeRangeSize;var s=d3.select(o.get(0)).append("div").classed(i.TimelineContainer["class"],!0).style({"overflow-y":"auto",position:"relative"}),l=s.append("div").classed(i.Header["class"],!0);this.header=l;var u=this.body=s.append("div").classed(i.CellContainer["class"],!0);this.rangeText=u.append("div").style({"float":"left",position:"absolute",left:"10px"}),d3.select(o.get(0)).append("div").classed(i.Clear["class"],!0).attr("title","clear").style({top:"8px",right:"5px",position:"absolute","background-image":'url("https://raw.githubusercontent.com/Microsoft/PowerBI-visuals/master/src/Clients/Visuals/images/sprite-src/slicer_reset.png")',"background-position":"0px 0px",width:"13px",height:"12px",cursor:"pointer"}).on("click",function(e){var i={merge:[{objectName:"general",selector:void 0,properties:{filter:void 0}}]};t.hostServices.persistProperties(i),t.hostServices.onSelect({data:[]})});var c;c=this;var h=this.svg=u.append("svg").attr("width",e.viewport.width).classed(i.VisualClassName,!0),p=this.headerTextContainer=this.header.append("div");p.append("g").attr("transform","translate(0,10)").append("text").attr({x:20,y:10}),this.mainGroupElement=h.append("g"),this.cursorGroupElement=h.append("g");var d=d3.select(o.get(0)).append("div").style({position:"absolute",width:"120px",height:"45px",top:"0px",right:"17px"}),g=d.append("svg").attr("width",120).attr("height",45);this.selectorContainer=g.append("g");var m=10,f=20,y=30,v=this.selectorContainer.append("rect"),b=this.selector;v.attr("height",1).attr("x",m).attr("y",f+2).attr("width",(b.length-1)*y).attr("fill","#000000");var C=this.selectorContainer.selectAll("vertLines").data(b).enter().append("rect");
C.attr("x",function(e){return m+b.indexOf(e)*y}).attr("y",f).attr("width",2).attr("height",3).attr("fill","#000000").style({cursor:"pointer"});var x,S=this.selectorContainer.selectAll("selperiodtext").data(b).enter().append("text");x=S.attr("x",function(e){return m-3+b.indexOf(e)*y}).attr("y",f-3).text(function(e){return e}).attr("font-family","sans-serif").attr("font-size","10px").attr("fill","black"),this.selectedText=this.selectorContainer.append("text"),this.selectedText.attr("x",m+35).attr("y",f+17).text(a).attr("font-family","sans-serif").attr("font-size","10px").attr("fill","black");var w=this.selectorContainer.selectAll("selRects").data(b).enter().append("rect");w.attr("x",function(e){return m-y/2+b.indexOf(e)*y}).attr("y",3).attr("width",y).attr("height",23).attr("fill","transparent").style({cursor:"pointer"}).on("click",function(e){t.selectPriod(e,m+b.indexOf(e)*y)}),this.periodSlicerRect=this.selectorContainer.append("rect").attr("x",m-6+r*y).attr("y",f-16).attr("rx",4).attr("width",15).attr("height",23).style({stroke:"#aaa","stroke-width":"2"}).attr("fill","transparent")},i.prototype.selectPriod=function(e,t){this.periodSlicerRect.transition().attr("x",t-7);var i=this.selectorNames[this.selector.indexOf(e)];this.selectedText.text(i),this.timelineData.granularity=i,this.timelineData.granuralityChanged=!0,this.update(this.options)},i.converter=function(e,t){var i=!1,a=e.dataView;if(a&&a.metadata&&a.categorical&&a.categorical.categories&&!(a.categorical.categories.length<=0)&&void 0!==a.categorical.categories[0]&&void 0!==a.categorical.categories[0].identityFields&&!(a.categorical.categories[0].identityFields.length<=0)){if(a&&a.metadata&&a.metadata.objects){var r=a.metadata.objects.header;r&&void 0!==r.show&&(i=r.show)}t.showHeader=i,e.categorySourceName=a.categorical.categories[0].source.displayName,e.columnIdentity=a.categorical.categories[0].identityFields[0];var n=e.dataView.categorical.categories[0].values;if(!(n.length<=0)&&void 0!==n[0].getTime){e.startDate=new Date(n[0].getTime()),e.selectionStartDate=new Date(n[0].getTime()),e.endDate=new Date(n[n.length-1].getTime()),e.selectionEndDate=new Date(n[n.length-1].getTime());var o=a.metadata.objects;if(a.metadata.objects&&o.general&&o.general.filter&&o.general.filter.whereItems&&o.general.filter.whereItems[0]&&o.general.filter.whereItems&&o.general.filter.whereItems[0].condition){var s=o.general.filter.whereItems[0].condition.lower.value,l=o.general.filter.whereItems[0].condition.upper.value;e.selectionStartDate=new Date(s.getTime()),e.selectionEndDate=new Date(l.getTime())}var u={solid:{color:"#333333"}};if(a&&a.metadata.objects){var c=a.metadata.objects.timeRangeColor;c&&c.fill&&(u=c.fill)}var h={solid:{color:"#ADD8E6"}},p={solid:{color:"#A4C7F2"}};if(a&&a.metadata.objects){var d=a.metadata.objects.cellColor,g=a.metadata.objects.cellColorOut;d&&d.fill&&(h=d.fill),g&&g.fill&&(p=g.fill)}switch(t.cellColor=h,t.cellColorOut=p,e.elementsCount=0,e.granularity){case"day":e.elementsCount=Math.round(Math.abs(e.startDate.getTime()-e.endDate.getTime())/864e5);break;case"month":e.elementsCount=12*(e.endDate.getFullYear()-e.startDate.getFullYear()),e.elementsCount+=e.endDate.getMonth()-e.startDate.getMonth(),e.elementsCount=e.elementsCount<=0?0:e.elementsCount;break;case"quarter":e.elementsCount=12*(e.endDate.getFullYear()-e.startDate.getFullYear()),e.elementsCount+=e.endDate.getMonth()-e.startDate.getMonth(),e.elementsCount=e.elementsCount<=0?0:e.elementsCount,e.elementsCount=Math.ceil(e.elementsCount/3);break;case"year":e.elementsCount=e.endDate.getFullYear()-e.startDate.getFullYear()}e.timelineDatapoints=[];for(var m=0,f=0,y=e.elementsCount;y>=f;f++){var v,b;switch(e.granularity){case"day":v=new Date(e.startDate.getTime()),v.setDate(v.getDate()+f),b=v;break;case"month":var C=e.startDate.getFullYear(),x=e.startDate.getMonth();v=new Date(C,x+f,1),b=new Date(C,x+f+1,0);break;case"quarter":var C=e.startDate.getFullYear(),x=e.startDate.getMonth(),S=Math.floor(x/3);x=3*S,v=new Date(C,x+3*f,1),b=new Date(C,x+3+3*f,0);break;case"year":var C=e.startDate.getFullYear()+f;v=new Date(C,0,1),b=new Date(C,12,0)}var w=0,D=t.cellWidth*f,P=t.cellWidth*(f+1);e.granuralityChanged&&(v.getTime()===e.selectionStartDate.getTime()&&(e.cursorDataPoints[0].dx=D),b.getTime()===e.selectionEndDate.getTime()&&(e.cursorDataPoints[1].dx=P));var L=!1,_=0;if(v.getTime()<e.selectionStartDate.getTime()&&e.selectionStartDate.getTime()<=b.getTime()){w=(b.getTime()-e.selectionStartDate.getTime())/(b.getTime()-v.getTime()),L=!0;var N=1-w,T=new Date(e.selectionStartDate.getTime()-864e5),V={isAdditional:!0,dateStart:v,dateEnd:T,label:a.categorical.categories[0].values[f],index:m,unitIndex:f,fillPart:N,dx:D,dx2:D+t.cellWidth*N};_=t.cellWidth*w,D=V.dx2,e.cursorDataPoints[0].dx=D,e.timelineDatapoints.push(V),v=new Date(e.selectionStartDate.getTime()),m+=1}var M=void 0;if(v.getTime()<=e.selectionEndDate.getTime()&&e.selectionEndDate.getTime()<b.getTime()){L=!0;var A=(b.getTime()-e.selectionEndDate.getTime())/(b.getTime()-(e.selectionStartDate.getTime()>v.getTime()?e.selectionStartDate.getTime():v.getTime()));w=1-A;var R=new Date(e.selectionEndDate.getTime()+864e5);M={isAdditional:!0,dateStart:R,dateEnd:b,label:a.categorical.categories[0].values[f],index:m,unitIndex:f,fillPart:A,dx:D+(t.cellWidth-_)-(t.cellWidth-_)*A,dx2:P},e.cursorDataPoints[1].dx=M.dx,b=new Date(e.selectionEndDate.getTime())}var V={isAdditional:!1,dateStart:v,dateEnd:b,label:a.categorical.categories[0].values[f],index:m,unitIndex:f,fillPart:w,dx:D,dx2:P};e.timelineDatapoints.push(V),M&&(m+=1,e.timelineDatapoints.push(M),V=M),V.dateStart<=e.selectionStartDate&&(e.cursorDataPoints[0].dx=V.dx),V.dateEnd<=e.selectionEndDate&&(e.cursorDataPoints[1].dx=V.dx2),m+=1}e.granuralityChanged&&(e.granuralityChanged=!1)}}},i.prototype.update=function(e){if(this.timelineData.granuralityChanged=!0,this.options=e,e.dataViews&&e.dataViews[0]){var t;t=this.dataView=e.dataViews[0],this.timelineData.dataView=e.dataViews[0],this.timelineData.options=e,i.converter(this.timelineData,this.timelineFormat),this.render(this.timelineData,this.timelineFormat)}},i.prototype.render=function(e,t){var i=e.options.viewport;this.timelineFormat.showHeader?(this.headerTextContainer.style("display","block"),this.headerTextContainer.style({color:this.getHeaderFill(e.dataView).solid.color,"font-size":t.timeRangeSize+"px","border-style":"solid","border-width":"0px 0px 2px","border-color":"black"}).text(e.categorySourceName).attr({height:t.topMargin+t.textSize+t.bottomMargin,width:i.width-t.rightMargin})):this.headerTextContainer.style("display","none"),this.renderTimeRangeText(e,t);var a=3*t.topMargin+t.timeRangeSize+t.cellHeight+2*t.textSize+t.bottomMargin;this.body.attr({height:a,width:i.width,"drag-resize-disabled":!0}).style({"overflow-x":"auto","overflow-y":"auto"});var r=t.leftMargin+t.cellWidth*e.timelineDatapoints.length+t.rightMargin;this.timelineData.options.viewport.width>r&&(r=this.timelineData.options.viewport.width),this.svg.attr({height:a,width:r}),this.mainGroupElement.attr("transform","translate("+t.leftMargin+","+t.topMargin+")"),this.cursorGroupElement.attr("transform","translate("+t.leftMargin+","+t.topMargin+")"),this.renderCells(e,t),this.renderCellLabels(e,t),this.renderCursors(e,t)},i.prototype.fillCells=function(){var e=this,t=this.timelineData.timelineDatapoints,a=this.mainGroupElement.selectAll(i.Cell.selector).data(t);a.attr("fill",function(t){return i.getCellColor(t,e.timelineData,e.timelineFormat)})},i.prototype.cellMouseOver=function(e){this.currentlyMouceOverElement=e},i.prototype.renderCells=function(e,a){var r=this,n=e.options.suppressAnimations?0:t.AnimatorCommon.MinervaAnimationDuration,o=e.timelineDatapoints;this.mainGroupElement.selectAll(i.Cell.selector).remove();var s=this.mainGroupElement.selectAll(i.Cell.selector).data(o);return s.enter().append("rect").attr("stroke","#333444").classed(i.Cell["class"],!0).transition().duration(n).attr("height",a.cellHeight).attr("width",function(e){return e.fillPart>0?a.cellWidth*e.fillPart:a.cellWidth}).attr("x",function(e){return e.dx}).attr("y",a.cellsYPosition),s.on("click",function(t){d3.event.preventDefault();var i=r.timelineData.cursorDataPoints,a=d3.event;a.altKey||a.shiftKey?i[0].dx<t.dx?(i[1].dx=t.dx2,e.selectionEndDate=t.dateEnd):(i[0].dx=t.dx,e.selectionStartDate=t.dateStart):(e.selectionStartDate=t.dateStart,e.selectionEndDate=t.dateEnd,i[0].dx=t.dx,i[1].dx=t.dx2),r.fillCells(),r.renderCursors(r.timelineData,r.timelineFormat),r.setSelection(e)}),s.on("mouseover",function(e){r.cellMouseOver(e)}),this.fillCells(),s.exit().remove(),s},i.prototype.dragstarted=function(e,t){t.timelineData.dragging=!0},i.prototype.dragged=function(e,t){if(t.timelineData.dragging===!0){var a=1,r=1,n=d3.select(".timelineContainer");if(void 0!==n){var o=n.style("transform");if(void 0!==o&&"none"!==o){var s=o.split("(")[1];a=Number(s.split(", ")[0]),r=Number(s.split(", ")[3])}}var l=void 0===d3.event.sourceEvent.x?d3.event.sourceEvent.clientX:d3.event.sourceEvent.x,u=(l-t.mainGroupElement.node().getBoundingClientRect().left)/a;i.isIE()===!0&&(u=d3.event.sourceEvent.x/a+d3.select(".cellContainer").node().scrollLeft);var c=this.currentlyMouceOverElement;0===e.cursorIndex&&c&&c.dx2<=t.timelineData.cursorDataPoints[1].dx&&(t.timelineData.selectionStartDate=c.dateStart,t.timelineData.cursorDataPoints[0].dx=c.dx),1===e.cursorIndex&&c&&c.dx>=t.timelineData.cursorDataPoints[0].dx&&(t.timelineData.selectionEndDate=c.dateEnd,t.timelineData.cursorDataPoints[1].dx=c.dx2),this.fillCells(),this.renderCursors(this.timelineData,this.timelineFormat)}},i.prototype.dragended=function(e,t){this.setSelection(t.timelineData)},i.prototype.renderCursors=function(e,t){this.cursorGroupElement.selectAll(i.Cursor.selector).remove();var a=this.cursorGroupElement.selectAll(i.Cursor.selector).data(e.cursorDataPoints);a.enter().append("path").classed(i.Cursor["class"],!0).attr("d",d3.svg.arc().innerRadius(0).outerRadius(t.cellHeight/2).startAngle(function(e){return e.cursorIndex*Math.PI+Math.PI}).endAngle(function(e){return e.cursorIndex*Math.PI+2*Math.PI})).attr("fill","grey").attr("transform",function(e){return"translate("+e.dx+","+(t.cellHeight/2+t.cellsYPosition)+")"}),a.call(this.drag),a.exit().remove();var r=this.body[0][0].scrollLeft,n=Number(r)+Number(e.options.viewport.width);return(e.cursorDataPoints[0].dx<r||e.cursorDataPoints[0].dx>n)&&(this.body[0][0].scrollLeft=e.cursorDataPoints[0].dx),a},i.prototype.renderCellLabels=function(e,t){var a=e.timelineDatapoints.filter(function(e){return!e.isAdditional});this.mainGroupElement.selectAll(i.CellTextLevel1.selector).remove();var r=this.mainGroupElement.selectAll(i.CellTextLevel1.selector).data(a);r.enter().append("text").classed(i.CellTextLevel1["class"],!0).text(function(t){switch(e.granularity){case"day":return 1===t.dateStart.getDate()?i.monthNames[t.dateStart.getMonth()]+" "+t.dateStart.getFullYear():"";case"quarter":return 1===t.dateStart.getDate()?t.dateStart.getFullYear():"";case"year":return 1===t.dateStart.getMonth()?t.dateStart.getFullYear():""}}).attr({x:function(e){return t.cellWidth*(e.unitIndex+.5)},y:t.textYPosition}).attr("text-anchor","middle").style({"font-size":t.textSize+"px",fill:"#777777"}),r.exit().remove(),this.mainGroupElement.selectAll(i.CellTextLevel2.selector).remove();var n=this.mainGroupElement.selectAll(i.CellTextLevel2.selector).data(a);return n.enter().append("text").classed(i.CellTextLevel2["class"],!0).text(function(t){switch(e.granularity){case"day":return t.dateStart.getDate();case"quarter":return"Q"+(Math.floor(t.dateEnd.getMonth()/3)+1);case"month":return i.monthNames[t.dateStart.getMonth()];case"year":return t.dateStart.getFullYear()}}).attr({x:function(e){return t.cellWidth*(e.unitIndex+.5)},y:t.topMargin+t.textSize+t.textYPosition}).attr("text-anchor","middle").style({"font-size":t.textSize+"px",fill:"#777777"}),n.exit().remove(),r},i.prototype.renderTimeRangeText=function(e,t){var a="";if(void 0!==e.selectionStartDate&&void 0!==e.selectionEndDate){switch(e.granularity){case"day":a=i.monthNames[e.selectionStartDate.getMonth()]+" "+e.selectionStartDate.getDate()+" "+e.selectionStartDate.getFullYear()+" - "+i.monthNames[e.selectionEndDate.getMonth()]+" "+e.selectionEndDate.getDate()+" "+e.selectionEndDate.getFullYear();break;case"month":a=i.monthNames[e.selectionStartDate.getMonth()]+" "+e.selectionStartDate.getFullYear()+" - "+i.monthNames[e.selectionEndDate.getMonth()]+" "+e.selectionEndDate.getFullYear();break;case"quarter":var r=Math.ceil((e.selectionStartDate.getMonth()+1)/3),n=Math.ceil((e.selectionEndDate.getMonth()+1)/3);a="Q"+r+" "+e.selectionStartDate.getFullYear()+" - Q"+n+" "+e.selectionEndDate.getFullYear();break;case"year":a=e.selectionStartDate.getFullYear()+" - "+e.selectionEndDate.getFullYear()}this.rangeText.selectAll(i.SelectionRange.selector).remove();var o=this.getTimeRangeColorFill(this.dataView).solid.color;this.rangeText.append("text").classed(i.SelectionRange["class"],!0).style({"font-size":t.timeRangeSize+"px",color:o}).text(a)}},i.getCellColor=function(e,t,i){var a=i.cellColor,r=i.cellColorOut;return e.dateStart>=t.selectionStartDate&&e.dateEnd<=t.selectionEndDate?a.solid.color:r.solid.color},i.prototype.getTimeRangeColorFill=function(e){if(e&&e.metadata&&e.metadata.objects){var t=e.metadata.objects.timeRangeColor;if(t)return t.fill}return{solid:{color:"#333222"}}},i.prototype.getHeaderFill=function(e){var t={solid:{color:"#333111"}};if(e&&e.metadata&&e.metadata.objects){var i=e.metadata.objects.header;i&&i.fontColor&&(t=i.fontColor)}return t},i.prototype.setSelection=function(t){var i=e.data.SQExprBuilder.between(t.columnIdentity,e.data.SQExprBuilder.dateTime(t.selectionStartDate),e.data.SQExprBuilder.dateTime(t.selectionEndDate)),a=e.data.SemanticFilter.fromSQExpr(i),r={merge:[{objectName:"general",selector:void 0,properties:{filter:a}}]};this.hostServices.persistProperties(r),this.hostServices.onSelect({data:[]})},i.prototype.enumerateObjectInstances=function(e){var t=[];switch(e.objectName){case"cellColor":var i={objectName:"cellColor",displayName:"Selection Color",selector:null,properties:{fill:this.timelineFormat.cellColor}};t.push(i);break;case"cellColorOut":var a={objectName:"cellColorOut",displayName:"Selection Color Out",selector:null,properties:{fill:this.timelineFormat.cellColorOut}};t.push(a);break;case"timeRangeColor":var r={objectName:"timeRangeColor",displayName:"Time Range Text Color",selector:null,properties:{fill:this.getTimeRangeColorFill(this.dataView)}};t.push(r)}return t},i.capabilities={dataRoles:[{name:"Time",kind:e.VisualDataRoleKind.Grouping,displayName:"Time"}],dataViewMappings:[{conditions:[{Time:{max:1}}],categorical:{categories:{"for":{"in":"Time"},dataReductionAlgorithm:{sample:{}}},values:{select:[]}}}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}},selected:{type:{bool:!0}},filter:{type:{filter:{}},rule:{output:{property:"selected",selector:["Time"]}}}}},header:{displayName:e.data.createDisplayNameGetter("Visual_Header"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}}}},granularity:{displayName:"Granularity",properties:{types:{displayName:"Type",type:{text:!0}}}},timeRangeColor:{displayName:"Time Range Text Color",properties:{fill:{displayName:"Fill",type:{fill:{solid:{color:!0}}}}}},cellColorOut:{displayName:"Cells",properties:{fill:{displayName:"Fill out selected",type:{fill:{solid:{color:!0}}}}}},cellColor:{displayName:"Cells selected",properties:{fill:{displayName:"Fill selected",type:{fill:{solid:{color:!0}}}}}}}},i.monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i.VisualClassName="Timeline",i.TimelineContainer={"class":"timelineContainer",selector:".timelineContainer"},i.Header={"class":"header",selector:".header"},i.CellContainer={"class":"cellContainer",selector:".cellContainer"},i.CellTextLevel1={"class":"cellTextLevel1",selector:".cellTextLevel1"},i.CellTextLevel2={"class":"cellTextLevel2",selector:".cellTextLevel2"},i.Cursor={"class":"cursor",selector:".cursor"},i.Cell={"class":"cell",selector:".cell"},i.Clear={"class":"clear",selector:".clear"},i.SelectionRange={"class":"selectionRange",selector:".selectionRange"},i}();i.Timeline=a}(i=t.samples||(t.samples={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){var a=t.utility.SelectionManager,r=e.visuals.valueFormatter,n=jsCommon.CssConstants.createClassAndSelector,o=function(){function i(e){this.scaleType=t.axisScale.linear,e&&(this.animator=e.animator),this.margin=i.DefaultMargin}return i.prototype.init=function(e){var r=e.element;this.selectionManager=new a({hostServices:e.host}),this.colors=e.style.colorPalette.dataColors,this.legend=t.createLegend(r,!1,null),this.svg=d3.select(r.get(0)).append("svg").classed(i.VisualClassName,!0),this.chart=this.svg.append("g").classed(i.Chart["class"],!0),this.axis=this.svg.append("g").classed(i.Axis["class"],!0),this.axisX=this.axis.append("g").classed(i.Axis["class"],!0),this.axisY=this.axis.append("g").classed(i.Axis["class"],!0)},i.prototype.update=function(e){if(e.dataViews&&e.dataViews[0]){var i=this.dataView=e.dataViews[0];this.setSize(e.viewport);var a=this.data=this.converter(i,this.colors),r=t.AnimatorCommon.GetAnimationDuration(this.animator,e.suppressAnimations);this.render(a,r)}},i.prototype.render=function(e,i){if(!e||!e.settings)return void this.svg.empty();var a=e.legendData;this.renderAxis(e,i),this.renderChart(e,i),e.settings.legend&&(t.LegendData.update(a,e.settings.legend),this.legend.changeOrientation(e.settings.legend.position)),this.legend.drawLegend(a,this.viewport)},i.prototype.setSize=function(e){var t,i;t=e.height-this.margin.top-this.margin.bottom,i=e.width-this.margin.left-this.margin.right,this.viewport={height:t,width:i},this.updateElements(e.height,e.width)},i.prototype.updateElements=function(e,i){this.svg.attr({height:e,width:i}),this.chart.attr("transform",t.SVGUtil.translate(this.margin.left,this.margin.top)),this.axisY.attr("transform",t.SVGUtil.translate(this.margin.left,this.margin.top)),this.axisX.attr("transform",t.SVGUtil.translate(this.margin.left,this.margin.top+this.viewport.height))},i.prototype.getObjectsFromDataView=function(e){return e&&e.metadata&&e.metadata.columns&&e.metadata.objects?this.dataView.metadata.objects:null},i.prototype.getPrecision=function(t){var a=e.DataViewObjects.getValue(t,i.properties.labels.labelPrecision,i.DefaultSettings.precision);return a},i.prototype.getLegendSettings=function(t){var a=t.legend;return a.show=e.DataViewObjects.getValue(t,i.properties.legend.show,i.DefaultSettings.legend.show),a.position=e.DataViewObjects.getValue(t,i.properties.legend.position,i.DefaultSettings.legend.position),a.showTitle=e.DataViewObjects.getValue(t,i.properties.legend.showTitle,i.DefaultSettings.legend.showTitle),a.titleText=e.DataViewObjects.getValue(t,i.properties.legend.titleText,i.DefaultSettings.legend.titleText),a},i.prototype.getDataColorsSettings=function(e){var t=e.dataPoints;return t},i.prototype.parseSettings=function(e){var t,a={};return a.displayName=i.DefaultSettings.displayName,a.fillColor=i.DefaultSettings.fillColor,t=this.getObjectsFromDataView(e),t&&(a.precision=this.getPrecision(t),a.legend=this.getLegendSettings(t),a.colors=this.getDataColorsSettings(t)),a},i.prototype.getTooltipData=function(e,t,i,a,r){return[{displayName:e.source.displayName,value:e.values[a]},{displayName:t.source.displayName,value:r.format(t.values[a])},{displayName:i.source.displayName,value:r.format(i.values[a])}]},i.prototype.converter=function(e,a){var n,o,s,l;if(e&&e.categorical&&e.categorical.categories&&e.categorical.categories[0]&&e.categorical.categories[0].values&&e.categorical.categories[0].values.length>0&&e.categorical.values&&(n=this.parseSettings(e))){var u=e.categorical.categories[0];o=u.values,s=e.categorical.values;var c=s.grouped(),h=t.DataRoleHelper.getMeasureIndexOfRole(c,i.RoleNames.Lower),p=t.DataRoleHelper.getMeasureIndexOfRole(c,i.RoleNames.Upper),d=new t.ColorHelper(this.colors,i.properties.dataPoint.fill,n.fillColor),g=!!s.source;if(!(0>h||0>p)){l=r.create({format:r.getFormatString(s[0].source,i.properties.general.formatString),value:s[0],precision:n.precision});for(var m=[],f=0;f<c.length;f++){for(var y=c[f],v=d.getColorForSeriesValue(y.objects,s.identityFields,y.name),b=t.SelectionIdBuilder.builder().withSeries(s,y).createSelectionId(),C=[],x=0;x<o.length;x++){var S=y.values[h],w=y.values[p],D=S.values[x],P=w.values[x],L=t.SelectionIdBuilder.builder().withSeries(s,y).withCategory(u,x).createSelectionId();C.push({x:x,y0:D,y1:P,tooltipInfo:this.getTooltipData(u,S,w,x,l),identity:L,selected:!1})}m.push({name:y.name,color:v,data:C,identity:b})}var _=g?s.source.displayName:"";return{xAxisProperties:this.getXAxisProperties(u),yAxisProperties:this.getYAxisProperties(s,h,p),settings:n,series:m,legendData:this.getLegend(m,_),categories:o,formatter:l}}}},i.prototype.calculateYDomain=function(e,i,a){for(var r=0,n=0,o=0;o<e.length;o++){var s=t.AxisHelper.getRangeForColumn(e[o]);s.min<r&&(r=s.min),s.max>n&&(n=s.max)}return[r,n]},i.prototype.getXAxisProperties=function(e){var a=_.range(0,e.values.length),r=this.viewport.width/(a.length+2*t.CartesianChart.OuterPaddingRatio);r=Math.max(r,t.CartesianChart.MinOrdinalRectThickness);var n=t.AxisHelper.createAxis({pixelSpan:this.viewport.width,dataDomain:a,metaDataColumn:e.source,formatString:t.valueFormatter.getFormatString(e.source,i.properties.general.formatString),outerPadding:0,isScalar:!1,isVertical:!1,useTickIntervalForDisplayUnits:!0,getValueFn:function(t,i){return e.values[t]},categoryThickness:r,isCategoryAxis:!0,scaleType:this.scaleType});return n},i.prototype.getYAxisProperties=function(e,a,r){var n=e.grouped(),o=this.calculateYDomain(e,a,r),s=n[0].values[a].source,l=t.AxisHelper.createAxis({pixelSpan:this.viewport.height,dataDomain:o,metaDataColumn:s,formatString:t.valueFormatter.getFormatString(s,i.properties.general.formatString),outerPadding:0,isScalar:!0,isVertical:!0,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:this.scaleType});return l},i.prototype.renderAxis=function(e,t){var i=e.xAxisProperties.axis,a=e.yAxisProperties.axis;i.orient("bottom"),a.orient("left"),this.axisX.transition().duration(t).call(i),this.axisY.transition().duration(t).call(a)},i.prototype.renderChart=function(e,t){var a=e.series,r=e.xAxisProperties.scale,n=e.yAxisProperties.scale,o=this.selectionManager,s=d3.svg.area().x(function(e){return r(e.x)+r.rangeBand()/2}).y0(function(e){return n(e.y0)}).y1(function(e){return n(e.y1)}),l=this.chart.selectAll(i.Area.selector).data(a);l.enter().append("svg:path").classed(i.Area["class"],!0),l.attr("fill",function(e){return e.color}).attr("stroke",function(e){return e.color}).attr("d",function(e){return s(e.data)}).style("fill-opacity",i.DimmedFillOpacity).on("click",function(e){var a=this;o.select(e.identity).then(function(e){e.length>0?(l.style("fill-opacity",i.DimmedFillOpacity),d3.select(a).transition().duration(t).style("fill-opacity",i.FillOpacity)):l.style("fill-opacity",i.DimmedFillOpacity)}),d3.event.stopPropagation()}),l.exit().remove(),this.renderTooltip(l,r)},i.findClosestXAxisIndex=function(e,t){var i=-1,a=Number.MAX_VALUE;for(var r in t){var n=Math.abs(e-t[r].x);a>n&&(a=n,i=r)}return i},i.getTooltipInfoByPointX=function(t,a,r){var n=0,o=e.visuals.AxisHelper.invertScale(a,r);return n=i.findClosestXAxisIndex(o,t.data),t.data[n].tooltipInfo},i.prototype.renderTooltip=function(e,a){t.TooltipManager.addTooltip(e,function(e){var t=e.elementCoordinates[0];return i.getTooltipInfoByPointX(e.data,a,t)},!0)},i.prototype.getLegend=function(e,i){for(var a=[],r=0;r<e.length;r++){var n=e[r];n.identity.hasIdentity()&&a.push({label:n.name,color:n.color,icon:t.LegendIcon.Box,selected:!1,identity:n.identity})}return{dataPoints:a,title:i}},i.prototype.enumerateLegend=function(a){var r=this.data;if(r){var n={legend:r.settings.legend},o=e.DataViewObjects.getValue(n,i.properties.legend.show,this.legend.isVisible()),s=e.DataViewObjects.getValue(n,i.properties.legend.showTitle,!0),l=e.DataViewObjects.getValue(n,i.properties.legend.titleText,this.data.legendData.title);a.pushInstance({selector:null,objectName:"legend",properties:{show:o,position:t.LegendPosition[this.legend.getOrientation()],showTitle:s,titleText:l}})}},i.prototype.enumerateDataPoints=function(e){var i=this.data;if(i)for(var a=i.series,r=0;r<a.length;r++){var n=a[r],o=n.color,s=n.identity.getSelector(),l=!!s.data;e.pushInstance({objectName:"dataPoint",displayName:n.name,selector:t.ColorHelper.normalizeSelector(s,l),properties:{fill:{solid:{color:o}}}})}},i.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder;switch(e.objectName){case"legend":this.enumerateLegend(i);break;case"dataPoint":this.enumerateDataPoints(i)}return i.complete()},i.properties={general:{formatString:{objectName:"general",propertyName:"formatString"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"},showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}},labels:{labelPrecision:{objectName:"labels",propertyName:"labelPrecision"}}},i.RoleNames={Category:"Category",Series:"Series",Lower:"Lower",Upper:"Upper"},i.capabilities={dataRoles:[{name:i.RoleNames.Category,kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Category")},{name:i.RoleNames.Series,kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Series")},{name:i.RoleNames.Lower,kind:e.VisualDataRoleKind.Measure,displayName:"Y1"},{name:i.RoleNames.Upper,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Y2")}],dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:1},Lower:{max:1},Upper:{max:1}}],categorical:{categories:{"for":{"in":i.RoleNames.Category},dataReductionAlgorithm:{top:{}}},values:{group:{by:i.RoleNames.Series,select:[{bind:{to:i.RoleNames.Lower}},{bind:{to:i.RoleNames.Upper}}]}}}}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),type:{formatting:{legendPosition:!0}}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleText"),type:{text:!0}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}}}},label:{displayName:e.data.createDisplayNameGetter("Label"),properties:{fill:{displayName:e.data.createDisplayNameGetter("Fill"),type:{fill:{solid:{color:!0}}}}}}}},i.VisualClassName="areaRangeChart",i.Chart=n("chart"),i.Area=n("area"),i.Axis=n("axis"),i.DimmedFillOpacity=.5,i.FillOpacity=.9,i.DefaultSettings={displayName:"Area Range Chart",precision:2,legend:{show:!0,position:t.LegendPosition.Top,showTitle:!0}},i.DefaultMargin={top:20,bottom:50,right:0,left:50},i}();i.AreaRangeChart=o}(i=t.samples||(t.samples={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"NoMapLocation"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="NoMapLocationMessage",i="NoMapLocationKey",a="NoMapLocationValue",r={message:e.get(t),title:e.get(i),detail:e.get(a)};return r},e}();e.NoMapLocationWarning=t;var i=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"NoValidGeotaggedCategory"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="NoValidGeotaggedCategoryMessage",i="NoValidGeotaggedCategoryKey",a="NoValidGeotaggedCategoryValue",r={message:e.get(t),title:e.get(i),detail:e.get(a)};return r},e}();e.FilledMapWithoutValidGeotagCategoryWarning=i;var a=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"GeometryCulledWarning"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="GeometryCulledWarningMessage",i="GeometryCulledWarningKey",a="GeometryCulledWarningVal",r={message:e.get(t),title:e.get(i),detail:e.get(a)};return r},e}();e.GeometryCulledWarning=a;var r=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"NegativeValuesNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_NegativeValues",i={message:e.get(t),title:"",detail:""};return i},e}();e.NegativeValuesNotSupportedWarning=r;var n=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"AllNegativeValuesNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_AllNegativeValues",i={message:e.get(t),title:"",detail:""};return i},e}();e.AllNegativeValuesWarning=n;var o=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"NaNNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_NanValues",i={message:e.get(t),title:"",detail:""};return i},e}();e.NaNNotSupportedWarning=o;var s=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"InfinityValuesNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_InfinityValues",i={message:e.get(t),title:"",detail:""};return i},e}();e.InfinityValuesNotSupportedWarning=s;var l=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"ValuesOutOfRange"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_VisualizationOutOfRange",i={message:e.get(t),title:"",detail:""};return i},e}();e.ValuesOutOfRangeWarning=l;var u=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"ZeroValuesNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_ZeroValues",i={message:e.get(t),title:"",detail:""};return i},e}();e.ZeroValueWarning=u;var c=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"VisualKPIDataMissing"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="Visual_KPI_DataMissing",i={message:e.get(t),title:"",detail:""};return i},e}();e.VisualKPIDataMissingWarning=c;var h=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"ScriptVisualNotRefreshed"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="ScriptVisualRefreshWarningMessage",i="ScriptVisualRefreshWarningValue",a={message:e.get(t),title:e.get(t),detail:e.get(i)};return a},e}();e.ScriptVisualRefreshWarning=h}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));
var powerbi;!function(e){var t;!function(t){var i=jsCommon.PixelConverter,a=jsCommon.CssConstants.createClassAndSelector,r=function(){function r(e){this.isScrollable=e.isScrollable,this.tooltipsEnabled=e.tooltipsEnabled,this.interactivityService=e.interactivityService}return r.prototype.init=function(e){this.svg=e.svg,this.style=e.style,this.currentViewport=e.viewport,this.hostServices=e.host,this.interactivity=e.interactivity,this.cartesianVisualHost=e.cartesianHost,this.options=e,this.element=e.element,this.colors=this.style.colorPalette.dataColors,this.element.addClass(r.WaterfallClassName),this.mainGraphicsSVG=this.svg.append("svg"),this.mainGraphicsContext=this.mainGraphicsSVG.append("g").classed(r.MainGraphicsContextClassName,!0),this.labelGraphicsContext=this.mainGraphicsSVG.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass["class"],!0)},r.converter=function(e,i,a,n,o,s){var l,u=r.formatStringProp,c=e.categorical.categories||[],h=o.increaseFill.solid.color,p=o.decreaseFill.solid.color,d=o.totalFill.solid.color,g=a.getLocalizedString(r.TotalLabel),m=a.getLocalizedString(r.IncreaseLabel),f=a.getLocalizedString(r.DecreaseLabel),y=[{label:m,color:h,icon:t.LegendIcon.Box,identity:t.SelectionIdBuilder.builder().withMeasure("increase").createSelectionId(),selected:!1},{label:f,color:p,icon:t.LegendIcon.Box,identity:t.SelectionIdBuilder.builder().withMeasure("decrease").createSelectionId(),selected:!1},{label:g,color:d,icon:t.LegendIcon.Box,identity:t.SelectionIdBuilder.builder().withMeasure("total").createSelectionId(),selected:!1}],v=0,b=0,C=0,x=[],S=[],w=e.categorical.values,D=void 0;if(!_.isEmpty(w)){var P=w[0];D=P.source;var L=D.format;if(_.isEmpty(c))v=C=P.values[0],b=0;else{var N=c[0];l=N.source,S=N.values.slice(),S.push(g);for(var T=0,V=P.values.length;V>T;T++){var M=S[T],A=P.values[T]||0,R=t.SelectionIdBuilder.builder().withCategory(N,T).createSelectionId(),I=t.TooltipBuilder.createTooltipInfo(u,e.categorical,M,A),F=A>0?h:p;x.push({value:A,position:v,color:F,categoryValue:M,categoryIndex:T,seriesIndex:0,selected:!1,identity:R,highlight:!1,key:R.getKey(),tooltipInfo:I,labelFill:n.labelColor,labelFormatString:L}),v+=A,v>C&&(C=v),b>v&&(b=v)}}var E=t.SelectionId.createNull();x.push({value:v,position:0,color:d,categoryValue:g,categoryIndex:T,identity:E,seriesIndex:0,selected:!1,highlight:!1,key:E.getKey(),tooltipInfo:t.TooltipBuilder.createTooltipInfo(u,e.categorical,g,v),labelFill:n.labelColor,labelFormatString:L,isTotal:!0})}s&&s.applySelectionStateToData(x);var O=t.CartesianHelper.getCategoryAxisProperties(e.metadata),G=t.CartesianHelper.getValueAxisProperties(e.metadata),H=t.converterHelper.createAxesLabels(O,G,l,[D]);return{series:[{data:x}],categories:S,categoryMetadata:l,valuesMetadata:D,legend:{dataPoints:y},hasHighlights:!1,positionMin:b,positionMax:C,dataLabelsSettings:n,sentimentColors:o,axesLabels:{x:H.xAxisLabel,y:H.yAxisLabel}}},r.prototype.setData=function(e){var i=this.getSentimentColorsFromObjects(null),a=e.length>0?e[0]:void 0;if(this.data={series:[{data:[]}],categories:[],valuesMetadata:null,legend:{dataPoints:[]},hasHighlights:!1,categoryMetadata:null,scalarCategoryAxis:!1,positionMax:0,positionMin:0,dataLabelsSettings:t.dataLabelUtils.getDefaultLabelSettings(!1,void 0),sentimentColors:i,axesLabels:{x:null,y:null}},a){if(a.metadata&&a.metadata.objects){var n=a.metadata.objects,o=n.labels;o&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(o,this.data.dataLabelsSettings),i=this.getSentimentColorsFromObjects(n)}a.categorical&&(this.data=r.converter(a,this.colors,this.hostServices,this.data.dataLabelsSettings,i,this.interactivityService))}},r.prototype.enumerateObjectInstances=function(e,i){switch(i.objectName){case"sentimentColors":this.enumerateSentimentColors(e);break;case"labels":var a={enumeration:e,dataLabelsSettings:this.data.dataLabelsSettings,show:!0,displayUnits:!0,precision:!0,fontSize:!0};t.dataLabelUtils.enumerateDataLabels(a)}},r.prototype.enumerateSentimentColors=function(e){var t=this.data.sentimentColors;e.pushInstance({selector:null,properties:{increaseFill:t.increaseFill,decreaseFill:t.decreaseFill,totalFill:t.totalFill},objectName:"sentimentColors"})},r.prototype.calculateLegend=function(){return this.data.legend},r.prototype.hasLegend=function(){return!0},r.createClippedDataIfOverflowed=function(t,i){var a=t,r=t.series[0].data;return t&&i<r.length&&(a=e.Prototype.inherit(t),a.series=[{data:r.slice(0,i)}],a.categories=t.categories.slice(0,i)),a},r.prototype.calculateAxesProperties=function(e){var i=this;this.currentViewport=e.viewport;var a=this.margin=e.margin,n=this.clippedData=this.data,o=n.categories.length,s=this.getPreferredPlotArea(!1,o,t.CartesianChart.MinOrdinalRectThickness);s.width===this.currentViewport.width&&(s.width-=a.left+a.right),s.height-=a.top+a.bottom;var l=t.CartesianChart.getLayout(null,{availableWidth:s.width,categoryCount:o,domain:null,isScalar:!1,isScrollable:this.isScrollable});this.isScrollable||(n=this.clippedData=r.createClippedDataIfOverflowed(n,l.categoryCount));var u=r.getXAxisCreationOptions(n,s.width,l,e),c=r.getYAxisCreationOptions(n,s.height,e),h=this.xAxisProperties=t.AxisHelper.createAxis(u),p=this.yAxisProperties=t.AxisHelper.createAxis(c),d=this.xAxisProperties.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio),g=t.dataLabelUtils.createColumnFormatterCacheManager(),m=n.dataLabelsSettings,f=r.getDisplayUnitValueFromAxisFormatter(p,m);return this.layout={categoryCount:l.categoryCount,categoryThickness:l.categoryThickness,isScalar:l.isScalar,outerPaddingRatio:l.outerPaddingRatio,categoryWidth:d,labelText:function(e){var i=g.getOrCreate(e.labelFormatString,m,f);return t.dataLabelUtils.getLabelFormattedText({label:i.format(e.value)})},labelLayout:t.dataLabelUtils.getLabelLayoutXYForWaterfall(h,d,p,c.dataDomain),filter:function(e){return t.dataLabelUtils.doesDataLabelFitInShape(e,p,i.layout)},style:{fill:function(e){return e.isLabelInside?t.dataLabelUtils.defaultInsideLabelColor:e.labelFill}}},this.xAxisProperties.axisLabel=e.showCategoryAxisLabel?n.axesLabels.x:null,this.yAxisProperties.axisLabel=e.showValueAxisLabel?n.axesLabels.y:null,[h,p]},r.getDisplayUnitValueFromAxisFormatter=function(e,t){return e.formatter&&e.formatter.displayUnit&&0===t.displayUnits?e.formatter.displayUnit.value:null},r.lookupXValue=function(e,i,a){var r=e.series[0].data;return i===r.length-1?r[i].categoryValue:t.CartesianHelper.lookupXValue(e,i,a,!1)},r.getXAxisCreationOptions=function(e,i,a,n){var o=t.AxisHelper.getCategoryValueType(e.categoryMetadata),s=t.AxisHelper.createDomain(e.series,o,!1,n.forcedXDomain),l=a.categoryThickness,u=l*a.outerPaddingRatio;return{pixelSpan:i,dataDomain:s,metaDataColumn:e.categoryMetadata,formatString:t.valueFormatter.getFormatString(e.categoryMetadata,r.formatStringProp),isScalar:!1,outerPadding:u,categoryThickness:l,getValueFn:function(t,i){return r.lookupXValue(e,t,i)},forcedTickCount:n.forcedTickCount,isCategoryAxis:!0,axisDisplayUnits:n.categoryAxisDisplayUnits,axisPrecision:n.categoryAxisPrecision}},r.getYAxisCreationOptions=function(e,i,a){var n=t.AxisHelper.combineDomain(a.forcedYDomain,[e.positionMin,e.positionMax]);return{pixelSpan:i,dataDomain:n,isScalar:!0,isVertical:!0,metaDataColumn:e.valuesMetadata,formatString:t.valueFormatter.getFormatString(e.valuesMetadata,r.formatStringProp),outerPadding:0,forcedTickCount:a.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,axisDisplayUnits:a.valueAxisDisplayUnits,axisPrecision:a.valueAxisPrecision}},r.prototype.getPreferredPlotArea=function(e,i,a){return t.CartesianChart.getPreferredPlotArea(i,a,this.currentViewport,this.isScrollable,e)},r.prototype.getVisualCategoryAxisIsScalar=function(){return!1},r.prototype.overrideXScale=function(e){this.xAxisProperties=e},r.prototype.setFilteredData=function(t,i){var a=this.clippedData=e.Prototype.inherit(this.data);return a.series=[{data:a.series[0].data.slice(t,i)}],a.categories=a.categories.slice(t,i),a},r.prototype.createRects=function(e){var t=this.mainGraphicsContext,i=t.selectAll(r.CategoryValueClasses.selector),a=i.data(e,function(e){return e.key});return a.enter().append("rect").attr("class",function(e){return r.CategoryValueClasses["class"].concat(e.highlight?"highlight":"")}),a.exit().remove(),a},r.prototype.createConnectors=function(e){var t=this.mainGraphicsContext,i=t.selectAll(r.WaterfallConnectorClasses.selector),a=i.data(e.slice(0,e.length-1),function(e){return e.key});return a.enter().append("line").classed(r.WaterfallConnectorClasses["class"],!0),a.exit().remove(),a},r.prototype.render=function(e){var i=this,a=this.clippedData.series[0].data,n=this.createRects(a),o=this.createConnectors(a);this.tooltipsEnabled&&t.TooltipManager.addTooltip(n,function(e){return e.data.tooltipInfo});var s=this.interactivityService&&this.interactivityService.hasSelection(),l=this.xAxisProperties.scale,u=this.yAxisProperties.scale,c=u(0);this.mainGraphicsSVG.attr("height",this.getAvailableHeight()).attr("width",this.getAvailableWidth()),n.style("fill",function(e){return e.color}).style("fill-opacity",function(e){return e.isTotal?t.ColumnUtil.DefaultOpacity:t.ColumnUtil.getFillOpacity(e.selected,e.highlight,s,i.data.hasHighlights)}).attr("width",this.layout.categoryWidth).attr("x",function(e){return l(e.categoryIndex)}).attr("y",function(e){return r.getRectTop(u,e.position,e.value)}).attr("height",function(e){return c-u(Math.abs(e.value))}),o.attr({x1:function(e){return l(e.categoryIndex)},y1:function(e){return u(e.position+e.value)},x2:function(e){return l(e.categoryIndex+1)+i.layout.categoryWidth},y2:function(e){return u(e.position+e.value)}});var h=this.data.dataLabelsSettings,p=[];(h&&h.show||h.showCategory)&&(p=this.createLabelDataPoints());var d=void 0;return this.interactivityService&&(d={bars:n,datapoints:a}),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),{dataPoints:a,behaviorOptions:d,labelDataPoints:p,labelsAreNumeric:!0}},r.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},r.prototype.getSupportedCategoryAxisType=function(){return t.axisType.categorical},r.getRectTop=function(e,t,i){return 0>i?e(t):e(t)-(e(0)-e(i))},r.prototype.getAvailableWidth=function(){return this.currentViewport.width-(this.margin.left+this.margin.right)},r.prototype.getAvailableHeight=function(){return this.currentViewport.height-(this.margin.top+this.margin.bottom)},r.prototype.getSentimentColorsFromObjects=function(i){var a=this.colors.getSentimentColors(),n=e.DataViewObjects.getFillColor(i,t.waterfallChartProps.sentimentColors.increaseFill,a[2].value),o=e.DataViewObjects.getFillColor(i,t.waterfallChartProps.sentimentColors.decreaseFill,a[0].value),s=e.DataViewObjects.getFillColor(i,t.waterfallChartProps.sentimentColors.totalFill,r.defaultTotalColor);return{increaseFill:{solid:{color:n}},decreaseFill:{solid:{color:o}},totalFill:{solid:{color:s}}}},r.prototype.createLabelDataPoints=function(){for(var a=[],n=this.data,o=this.xAxisProperties.scale,s=this.yAxisProperties.scale,l=s(0),u=n.series,c=t.NewDataLabelUtils.createColumnFormatterCacheManager(),h=t.NewDataLabelUtils.getDisplayUnitValueFromAxisFormatter(this.yAxisProperties.formatter,n.dataLabelsSettings),p=this.data.dataLabelsSettings,d=0;d<u.length;d++)for(var g=u[d],m=0,f=g.data;m<f.length;m++){var y=f[m],v={left:o(y.categoryIndex),top:r.getRectTop(s,y.position,y.value),width:this.layout.categoryWidth,height:l-s(Math.abs(y.value))},b=y.labelFormatString,C=c.getOrCreate(b,this.data.dataLabelsSettings,h),x=t.NewDataLabelUtils.getLabelFormattedText(C.format(y.value)),S={text:x,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:i.fromPoint(p.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},w=e.TextMeasurementService.measureSvgTextWidth(S),D=e.TextMeasurementService.estimateSvgTextHeight(S,!0);a.push({isPreferred:!0,text:x,textSize:{width:w,height:D},outsideFill:p.labelColor?p.labelColor:t.NewDataLabelUtils.defaultLabelColor,insideFill:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:1,parentShape:{rect:v,orientation:y.value>=0?e.NewRectOrientation.VerticalBottomBased:e.NewRectOrientation.VerticalTopBased,validPositions:0===y.value?r.validZeroLabelPosition:r.validLabelPositions},fontSize:p.fontSize,identity:void 0})}return a},r.formatStringProp={objectName:"general",propertyName:"formatString"},r.WaterfallClassName="waterfallChart",r.MainGraphicsContextClassName="mainGraphicsContext",r.IncreaseLabel="Waterfall_IncreaseLabel",r.DecreaseLabel="Waterfall_DecreaseLabel",r.TotalLabel="Waterfall_TotalLabel",r.CategoryValueClasses=a("column"),r.WaterfallConnectorClasses=a("waterfall-connector"),r.defaultTotalColor="#00b8aa",r.validLabelPositions=[e.RectLabelPosition.OutsideEnd,e.RectLabelPosition.InsideEnd],r.validZeroLabelPosition=[e.RectLabelPosition.OutsideEnd,e.RectLabelPosition.OutsideBase],r}();t.WaterfallChart=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){function a(){return new l}var r=t.utility.SelectionManager,n=e.visuals.valueFormatter,o=t.AnimatorCommon.GetAnimationDuration,s=function(){function e(e,t,i,a){this.scrollYBrush=d3.svg.brush(),this.getRoot=e,this.getViewport=t,this.getMargin=i,this.isScrollable=a}return Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewport",{get:function(){return this.getViewport()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"margin",{get:function(){return this.getMargin()},enumerable:!0,configurable:!0}),e.prototype.renderY=function(e,t,i){var a=this;if(this.isYScrollBarVisible=t>this.viewport.height&&this.viewport.height>0&&this.viewport.width>0,this.brushGraphicsContextY=this.createOrRemoveScrollbar(this.isYScrollBarVisible,this.brushGraphicsContextY,"y brush"),this.updateScrollViewport(),!this.isYScrollBarVisible)return void i.call(this,jQuery.extend(!0,{},e),0,1);var r=this.viewport.height,n=this.getExtentData(t,r),o=function(){var t=n.toScrollPosition(a.scrollYBrush.extent(),r);i.call(a,jQuery.extend(!0,{},e),t[0],t[1]),a.setScrollBarSize(a.brushGraphicsContextY,n.value[1],!0)},s=d3.scale.ordinal().rangeBands([0,r]);this.scrollYBrush.y(s).extent(n.value),this.renderScrollbar(this.scrollYBrush,this.brushGraphicsContextY,this.viewport.width,this.margin.top,o),o()},e.prototype.updateScrollViewport=function(){this.scrollViewport={height:this.viewport.height,width:this.viewport.width},this.isYScrollBarVisible&&this.isScrollable&&(this.scrollViewport.width-=e.ScrollBarWidth)},e.prototype.createOrRemoveScrollbar=function(e,t,i){return e&&this.isScrollable?t||this.root.append("g").classed(i,!0):t?void t.remove():void 0},e.prototype.renderScrollbar=function(e,i,a,r,n){e.on("brush",function(){return window.requestAnimationFrame(function(){return n()})}),i.attr({transform:t.SVGUtil.translate(a,r),"drag-resize-disabled":"true"}),i.call(e),i.selectAll(".resize rect").remove(),i.select(".background").remove(),i.selectAll(".extent").style({"fill-opacity":.125,cursor:"default"})},e.prototype.setScrollBarSize=function(t,i,a){t.selectAll("rect").attr(a?"width":"height",e.ScrollBarWidth),t.selectAll("rect").attr(a?"height":"width",i)},e.prototype.getExtentData=function(t,i){var a=i*i/t,r=e.ScrollBarMinLength<=a?1:a/e.ScrollBarMinLength;a=Math.max(a,e.ScrollBarMinLength);var n=function(e,t){var i=e[1]-e[0],a=e[0]/(t-i);i*=r;var n=a*(t-i),o=n+i;return[n/t,o/t]};return{value:[0,a],toScrollPosition:n}},e.ScrollBarWidth=10,e.ScrollBarMinLength=15,e}(),l=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"TornadoChartWarning"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t,i="This visual requires two distinct values to be returned for the Legend field.",a="",r="";return t={message:i,title:e.get(a),detail:e.get(r)}},e}();i.TornadoChartWarning=l,i.getTornadoChartWarning=a;var u=function(){function i(e){this.DefaultTornadoChartSettings={precision:2,showCategories:!0,showLegend:!0,showLabels:!0,labelInsideFillColour:"#fff",labelOutsideFillColour:"#777",categoriesFillColour:"#777"},this.DefaultFillColors=["purple","teal"],this.columnPadding=5,this.maxLabelWidth=55,this.leftLabelMargin=4,this.durationAnimations=200,this.InnerTextHeightDelta=2,this.textOptions={},this.sections={left:75,right:0,isPercent:!1},this.currentSections=_.clone(this.sections),this.margin={top:10,right:5,bottom:10,left:10},this.heightColumn=0,this.widthLeftSection=0,this.widthRightSection=0,e&&(this.svg=e.svg||this.svg,this.margin=e.margin||this.margin,this.sections=e.sections||this.sections,this.columnPadding=e.columnPadding||this.columnPadding,this.currentSections=_.clone(this.sections),e.animator&&(this.animator=e.animator))}return i.prototype.init=function(e){var a,n=this,o=e.style;this.hostService=e.host,this.selectionManager=new r({hostServices:this.hostService}),this.element=e.element,this.colors=o.colorPalette.dataColors,this.svg?this.root=this.svg:this.root=d3.select(this.element.get(0)).append("svg"),this.root.classed(i.ClassName,!0),a=this.root.style("font-size"),this.textOptions.sizeUnit=a.slice(a.length-2),this.textOptions.fontSize=Number(a.slice(0,a.length-2)),this.textOptions.fontFamily=this.root.style("font-family"),this.scrolling=new s(function(){return n.root},function(){return n.viewport},function(){return n.margin},!0),this.main=this.root.append("g"),this.columns=this.main.append("g").classed(i.Columns["class"],!0),this.axes=this.main.append("g").classed(i.Axes["class"],!0),this.labels=this.main.append("g").classed(i.Labels["class"],!0),this.categories=this.main.append("g").classed(i.Categories["class"],!0),this.legend=t.createLegend(this.element,!1,null)},i.prototype.update=function(e){e&&e.dataViews&&e.dataViews[0]&&(this.dataView=e.dataViews[0],this.durationAnimations=o(this.animator,e.suppressAnimations),this.tornadoChartDataView=this.converter(this.dataView),this.viewport={height:e.viewport.height,width:e.viewport.width},this.render(this.tornadoChartDataView))},i.prototype.subtractMargin=function(e){return{height:e.height-this.margin.top-this.margin.bottom,width:e.width-this.margin.left-this.margin.right}},i.prototype.updateElements=function(){var e=t.SVGUtil.translate(this.widthLeftSection,0);this.root.attr({height:this.viewport.height,width:this.viewport.width}),this.main.attr("transform",t.SVGUtil.translate(this.margin.left,this.margin.top)),this.columns.attr("transform",e),this.labels.attr("transform",e),this.axes.attr("transform",e)},i.prototype.getValueByPercent=function(e,t,i){return void 0===i&&(i=!0),i?e*t/100:e},i.prototype.converter=function(e){if(!(e&&e.categorical&&e.categorical.categories&&e.categorical.categories[0]&&e.categorical.categories[0].source&&e.categorical.values&&e.categorical.values[0]))return null;var t,i,a,r,n,o=e.categorical.values;return t=this.parseCategories(e),a=e.categorical.categories[0].source.displayName,r=this.getObjectsFromDataView(e),n=this.parseSettings(e,r,o[0].values[0]),i=this.parseSeries(o),0===i.length&&(t=[]),{displayName:a,categories:t,series:i,settings:n,legend:this.getLegendData(i)}},i.prototype.parseSettings=function(t,a,r){var o,s;return s=this.getPrecision(a),o=n.create({format:n.getFormatString(t.categorical.categories[0].source,i.Properties.general.formatString),precision:s,value:r}),this.parseLegendProperties(t),{formatter:o,precision:s,showCategories:e.DataViewObjects.getValue(a,i.Properties.categories.show,this.DefaultTornadoChartSettings.showCategories),showLabels:e.DataViewObjects.getValue(a,i.Properties.labels.show,this.DefaultTornadoChartSettings.showLabels),showLegend:e.DataViewObjects.getValue(a,i.Properties.legend.show,this.DefaultTornadoChartSettings.showLegend),labelInsideFillColour:this.getColor(i.Properties.labels.insideFill,this.DefaultTornadoChartSettings.labelInsideFillColour,a),labelOutsideFillColour:this.getColor(i.Properties.labels.outsideFill,this.DefaultTornadoChartSettings.labelOutsideFillColour,a),categoriesFillColour:this.getColor(i.Properties.categories.fill,this.DefaultTornadoChartSettings.categoriesFillColour,a)}},i.prototype.parseLegendProperties=function(t){return t&&t.metadata?void(this.legendObjectProperties=e.DataViewObjects.getObject(t.metadata.objects,"legend",{})):void(this.legendObjectProperties={})},i.prototype.getColor=function(e,i,a){var r;return r=new t.ColorHelper(this.colors,e,i),r.getColorForMeasure(a,"")},i.prototype.getPrecision=function(t){var a=e.DataViewObjects.getValue(t,i.Properties.labels.labelPrecision,this.DefaultTornadoChartSettings.precision);return a<=i.MinPrecision?i.MinPrecision:a},i.prototype.getObjectsFromDataView=function(e){return e&&e.metadata&&e.metadata.columns&&e.metadata.objects?e.metadata.objects:null},i.prototype.parseCategories=function(e){return e.categorical.categories[0].values.map(function(i,a){return{value:i,selectionId:t.SelectionId.createWithId(e.categorical.categories[0].identity[a])}})},i.prototype.parseSeries=function(e){var r=this;if(e.length>i.MaxSeries)return this.hostService.setWarnings([a()]),[];var n=!!e.source,o=[];return e.grouped&&(o=e.grouped()),e.map(function(e,a){var s,l,u,c="";return n&&o[a]?(l=t.SelectionId.createWithIdAndMeasure(e.identity,e.source.queryName),u=o[a].objects):(l=t.SelectionId.createWithMeasure(e.source.queryName),u=e.source.objects),e.source.groupName?c=e.source.groupName:e.source.displayName&&(c=e.source.displayName),s=r.getColor(i.Properties.dataPoint.fill,r.DefaultFillColors[a],u),{fill:s,name:c,values:e.values,selectionId:l}})},i.prototype.getLegendData=function(e){var i;return i=e.map(function(e){return{label:e.name,color:e.fill,icon:t.LegendIcon.Box,selected:!1,identity:e.selectionId}}),{dataPoints:i}},i.prototype.updateSections=function(e){if(e&&e.settings){var t=e.settings;this.currentSections.left=t.showCategories?this.sections.left:0,this.currentSections.right=this.currentSections.isPercent?i.MaxSizeSections-this.currentSections.left:this.scrolling.scrollViewport.width-this.currentSections.left}},i.prototype.render=function(e){if(e&&e.settings){this.renderLegend(e),this.updateViewport();var t=this.subtractMargin(this.viewport);t.width<=0||t.height<=0||(this.widthLeftSection=this.getValueByPercent(this.currentSections.left,this.viewport.width,this.currentSections.isPercent),this.updateElements(),this.viewport=t,this.scrolling.renderY(e,e.categories.length*i.CategoryMinHeight,this.renderWithScrolling.bind(this)))}},i.prototype.renderWithScrolling=function(e,t,a){var r=t*e.categories.length,n=a*e.categories.length,o=Math.floor(r),s=Math.floor(n),l=Math.floor(this.scrolling.scrollViewport.height/i.CategoryMinHeight);1>a-t&&s-o>l&&(r-o>n-s?o++:n--),e.categories=e.categories.slice(o,s),e.series.forEach(function(e){return e.values=e.values.slice(o,s)}),this.updateSections(e),this.widthRightSection=this.getValueByPercent(this.currentSections.right,this.viewport.width,this.currentSections.isPercent),this.computeHeightColumn(e),this.renderMiddleSection(e),this.renderAxes(e),this.renderCategories(e)},i.prototype.updateViewport=function(){var e,i=this.legend.getMargins();switch(e=t.LegendPosition[this.legendObjectProperties[t.legendProps.position]]){case t.LegendPosition.Top:case t.LegendPosition.TopCenter:case t.LegendPosition.Bottom:case t.LegendPosition.BottomCenter:this.viewport.height-=i.height;break;case t.LegendPosition.Left:case t.LegendPosition.LeftCenter:case t.LegendPosition.Right:case t.LegendPosition.RightCenter:this.viewport.width-=i.width}},i.prototype.computeHeightColumn=function(e){var t=e.categories.length;this.heightColumn=(this.scrolling.scrollViewport.height-(t-1)*this.columnPadding)/t},i.prototype.renderMiddleSection=function(e){var t=this.generateColumnDataBySeries(e);this.renderColumns(t,2===e.series.length),this.renderLabels(t,e.settings)},i.prototype.renderColumns=function(e,a){var r=this;void 0===a&&(a=!1);var n,o=this.main.select(i.Columns.selector).selectAll(i.Column.selector);n=o.data(e),n.enter().append("svg:rect"),n.attr("x",function(e){return e.x}).attr("y",function(e){return e.y}).on("click",function(e,t){r.selectionManager.select(e.selectionId,!1).then(function(){return r.setSelection(n,a)}),d3.event.stopPropagation()}),this.setSelection(n,a),(o[0]&&o[0].length===e.length?this.animation(n):n).attr("width",function(e){return Math.max(e.width,0)}).attr("height",function(e){return Math.max(e.height,0)}).attr("fill",function(e){return e.color}).attr("transform",function(e){return t.SVGUtil.translateAndRotate(e.dx,e.dy,e.px,e.py,e.angle)}),n.classed(i.Column["class"],!0),n.exit().remove(),this.renderTooltip(n),this.root.on("click",function(){var e=d3.mouse(r.root.node()),t=r.root.node().getBoundingClientRect(),i={x:r.viewport.height-r.scrolling.scrollViewport.height,y:r.viewport.width-r.scrolling.scrollViewport.width};(!i.y||t.width-(r.viewport.width-r.scrolling.scrollViewport.width)-r.margin.right>e[0])&&(!i.x||t.height-(r.viewport.height-r.scrolling.scrollViewport.height)-r.margin.bottom>e[1])&&(r.selectionManager.clear(),r.setSelection(n,a))})},i.prototype.setSelection=function(e,t){void 0===t&&(t=!1);var a=this.selectionManager.getSelectionIds();if(!a.length)return void this.setOpacity(e,i.MaxOpacity);var r=e.filter(function(e){return a.some(function(t){return t.getKey()===e.selectionId.getKey()})});this.setOpacity(e,i.MinColumnOpacity),this.setOpacity(r,i.MaxOpacity)},i.prototype.renderTooltip=function(e){t.TooltipManager.addTooltip(e,function(e){return e.data.tooltipData})},i.prototype.generateColumnDataBySeries=function(e){var t,a,r,n=this,o=e.categories,s=e.series,l=e.settings,u=e.displayName,c=l.formatter;return t=this.widthRightSection,s&&0===s.length?[]:(a=Math.min(d3.min(s[0].values),0),r=d3.max(s[0].values),s.length===i.MaxSeries&&(a=d3.min([a,d3.min(s[1].values)]),r=d3.max([r,d3.max(s[1].values)]),t/=i.MaxSeries),s.reduce(function(e,h,p){var d=0===p&&s.length===i.MaxSeries,g=1===p,m=h.name;return e.concat(n.generateColumnDataByValues(h,a,r,t,g,d,c,o,m,u,l.labelInsideFillColour,l.labelOutsideFillColour))},[]))},i.prototype.generateColumnDataByValues=function(e,t,i,a,r,n,o,s,l,u,c,h){var p=this;return e.values.map(function(d,g){return p.generateColumnData(d?d:0,t,i,a,n,r,e.fill,g,o,s[g],l,u,c,h)})},i.prototype.generateColumnData=function(e,t,i,a,r,n,o,s,l,u,c,h,p,d){var g,m,f,y,v=0,b=0,C=0,x=0;return g=this.getColumnWidth(e,t,i,a),C=a-g,f=C*Number(r)+a*Number(n),m=(this.heightColumn+this.columnPadding)*s,y=this.getLabelData(e,v,b,f,m,g,r,l,p,d),r&&(x=180),{x:v,y:b,dx:f,dy:m,px:g/2,py:this.heightColumn/2,angle:x,width:g,height:this.heightColumn,label:y,color:o,selectionId:u.selectionId,tooltipData:this.getTooltipData(h,u.value,c,y.value.toString())}},i.prototype.getColumnWidth=function(e,t,i,a){return t===i?a:a*(e-t)/(i-t)},i.prototype.getLabelData=function(t,a,r,n,o,s,l,u,c,h){var p,d,g,m=c,f=this.getTextData(u.format(t),!1,!0);return d=e.TextMeasurementService.getTailoredTextOrDefault(f.textProperties,this.maxLabelWidth),g=this.getTextData(d,!0),s>g.width+i.LabelPadding?p=n+s/2-g.width/2:(p=l?n-this.leftLabelMargin-g.width:n+s+this.leftLabelMargin,m=h),{x:a,y:r,dx:p,dy:o+this.heightColumn/2+f.height/2-this.InnerTextHeightDelta,source:t,value:d,colour:m,height:f.height,width:g.width}},i.prototype.getTooltipData=function(e,t,i,a){return[{displayName:e,value:t},{displayName:i,value:a}]},i.prototype.renderAxes=function(e){var t,a,r=this.main.select(i.Axes.selector).selectAll(i.Axis.selector);return e.series.length!==i.MaxSeries?void r.remove():(t=this.generateAxesData(),a=r.data(t),a.enter().append("svg:line").classed(i.Axis["class"],!0),this.animation(a).attr("x1",function(e){return e.x1}).attr("y1",function(e){return e.y1}).attr("x2",function(e){return e.x2}).attr("y2",function(e){return e.y2}),void a.exit().remove())},i.prototype.generateAxesData=function(){var e,t,i;return e=this.widthRightSection/2,t=0,i=this.scrolling.scrollViewport.height,[{x1:e,y1:t,x2:e,y2:i}]},i.prototype.renderLabels=function(e,a){var r,n,o,s=this,l=0,u=this.main.select(i.Labels.selector).selectAll(i.Label.selector);e[0]&&e[0].label&&(l=e[0].label.height),n=u.data(e),r=n.enter().append("g"),r.append("svg:title").classed(i.LabelTitle["class"],!0),r.append("svg:text").classed(i.LabelText["class"],!0),n.attr("x",function(e){return e.label.x}).attr("y",function(e){return e.label.y}).attr("display",function(e){var t=0,i=s.currentSections.right,a=e.label.x+e.label.dx;return a>t&&i>a+e.label.width?null:"none"}).attr("pointer-events","none").classed(i.Label["class"],!0),n.select(i.LabelTitle.selector).text(function(e){return e.label.source}),o=u[0]&&u[0].length===e.length?this.animation(n):n,o.attr("transform",function(e){return t.SVGUtil.translate(e.label.dx,e.label.dy)}),this.animation(n.select(i.LabelText.selector)).attr("fill",function(e){return e.label.colour}).text(function(e){return e.label.value}),!a.showLabels||l>this.heightColumn?this.setOpacity(o):this.setOpacity(o,i.MaxOpacity),n.exit().remove()},i.prototype.renderCategories=function(a){var r,n,o=this,s=a.settings,l=s.categoriesFillColour,u=this.main.select(i.Categories.selector).selectAll(i.Category.selector),c=this;return s.showCategories?(n=u.data(a.categories),r=n.enter().append("g"),r.append("svg:title").classed(i.CategoryTitle["class"],!0),r.append("svg:text").classed(i.CategoryText["class"],!0),n.attr("x",0).attr("y",0).attr("transform",function(e,i){var a=(o.heightColumn+o.columnPadding)*i+o.heightColumn/2,r=o.getTextData(e,!1,!0);return a=a+r.height/2-o.InnerTextHeightDelta,t.SVGUtil.translate(0,a)}).classed(i.Category["class"],!0),n.select(i.CategoryTitle.selector).text(function(e){return e.value}),n.select(i.CategoryText.selector).attr("fill",l).text(function(t){var i=c.getTextData(t.value);return e.TextMeasurementService.getTailoredTextOrDefault(i.textProperties,c.widthLeftSection)}),void n.exit().remove()):void u.remove()},i.prototype.renderLegend=function(e){if(e.legend){var i={title:e.legend.title,dataPoints:e.legend.dataPoints,fontSize:3*this.textOptions.fontSize/4};if(this.legendObjectProperties){var a;t.LegendData.update(i,this.legendObjectProperties),a=this.legendObjectProperties[t.legendProps.position],a&&this.legend.changeOrientation(t.LegendPosition[a])}this.legend.drawLegend(i,this.viewport)}},i.prototype.getTextData=function(t,i,a){void 0===i&&(i=!1),void 0===a&&(a=!1);var r,n=0,o=0;return t=t||"",r={text:t,fontFamily:this.textOptions.fontFamily,fontSize:""+this.textOptions.fontSize+this.textOptions.sizeUnit},i&&(n=e.TextMeasurementService.measureSvgTextWidth(r)),a&&(o=e.TextMeasurementService.measureSvgTextHeight(r)),{text:t,options:this.textOptions,width:n,height:o,textProperties:r}},i.prototype.enumerateObjectInstances=function(i){var a,r=new t.ObjectEnumerationBuilder;if(!this.tornadoChartDataView||!this.tornadoChartDataView.settings)return[];switch(a=this.tornadoChartDataView.settings,i.objectName){case"dataPoint":this.enumerateDataPoint(r);break;case"labels":var n={objectName:"labels",displayName:"labels",selector:null,properties:{show:a.showLabels,labelPrecision:a.precision,insideFill:a.labelInsideFillColour,outsideFill:a.labelOutsideFillColour}};r.pushInstance(n);break;case"legend":var o,s=!0,l="";s=e.DataViewObject.getValue(this.legendObjectProperties,t.legendProps.showTitle,s),l=e.DataViewObject.getValue(this.legendObjectProperties,t.legendProps.titleText,l),o={objectName:"legend",displayName:"legend",selector:null,properties:{show:a.showLegend,position:t.LegendPosition[this.legend.getOrientation()],showTitle:s,titleText:l}},r.pushInstance(o);break;case"categories":var u={objectName:"categories",displayName:"categories",selector:null,properties:{show:a.showCategories,fill:a.categoriesFillColour}};r.pushInstance(u)}return r.complete()},i.prototype.enumerateDataPoint=function(e){if(this.tornadoChartDataView&&this.tornadoChartDataView.series){
var i=this.tornadoChartDataView.series;i.forEach(function(i){e.pushInstance({objectName:"dataPoint",displayName:i.name,selector:t.ColorHelper.normalizeSelector(i.selectionId.getSelector(),!1),properties:{fill:{solid:{color:i.fill}}}})})}},i.prototype.setOpacity=function(e,t,a){void 0===t&&(t=i.MinOpacity),void 0===a&&(a=!1);var r=a?e:this.animation(e);return r.style("fill-opacity",t)},i.prototype.animation=function(e){return this.durationAnimations?e.transition().duration(this.durationAnimations):e},i.prototype.destroy=function(){this.root=null},i.ClassName="tornado-chart",i.Properties={general:{formatString:{objectName:"general",propertyName:"formatString"}},labels:{show:{objectName:"labels",propertyName:"show"},labelPrecision:{objectName:"labels",propertyName:"labelPrecision"},insideFill:{objectName:"labels",propertyName:"insideFill"},outsideFill:{objectName:"labels",propertyName:"outsideFill"}},dataPoint:{fill:{objectName:"dataPoint",propertyName:"fill"}},legend:{show:{objectName:"legend",propertyName:"show"}},categories:{show:{objectName:"categories",propertyName:"show"},fill:{objectName:"categories",propertyName:"fill"}}},i.Columns={"class":"columns",selector:".columns"},i.Column={"class":"column",selector:".column"},i.Axes={"class":"axes",selector:".axes"},i.Axis={"class":"axis",selector:".axis"},i.Labels={"class":"labels",selector:".labels"},i.Label={"class":"label",selector:".label"},i.LabelTitle={"class":"label-title",selector:".label-title"},i.LabelText={"class":"label-text",selector:".label-text"},i.Categories={"class":"categories",selector:".categories"},i.Category={"class":"category",selector:".category"},i.CategoryTitle={"class":"category-title",selector:".category-title"},i.CategoryText={"class":"category-text",selector:".category-text"},i.MaxSeries=2,i.MinPrecision=0,i.MinOpacity=0,i.MinColumnOpacity=.2,i.MaxOpacity=1,i.MaxSizeSections=100,i.LabelPadding=2.5,i.CategoryMinHeight=25,i.capabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Group")},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend")},{name:"Values",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values")}],dataViewMappings:[{conditions:[{Category:{max:1},Values:{min:0,max:1},Series:{min:0,max:1}},{Category:{max:1},Values:{min:2,max:2},Series:{max:0}}],categorical:{categories:{"for":{"in":"Category"}},values:{group:{by:"Series",select:[{"for":{"in":"Values"}}],dataReductionAlgorithm:{top:{}}}}}}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),properties:{fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),type:{numeric:!0}},insideFill:{displayName:"Inside fill",type:{fill:{solid:{color:!0}}}},outsideFill:{displayName:"Outside fill",type:{fill:{solid:{color:!0}}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0}}}},categories:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Group"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}}}}}},i}();i.TornadoChart=u}(i=t.samples||(t.samples={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=e.visuals.controls.TouchUtils,a=jsCommon.CssConstants.createClassAndSelector,r=a("tooltip-container"),n=a("tooltip-content-container"),o=a("arrow"),s=a("tooltip-header"),l=a("tooltip-row"),u=a("tooltip-color-cell"),c=a("tooltip-title-cell"),h=a("tooltip-value-cell"),p=function(){function e(t){this.tooltipOptions=t,this.isTooltipVisible=!1,t||(this.tooltipOptions=e.DefaultTooltipOptions)}return e.prototype.isTooltipComponentVisible=function(){return this.isTooltipVisible},e.prototype.setTestScreenSize=function(e,t){this.customScreenWidth=e,this.customScreenHeight=t},e.prototype.show=function(e,t){this.isTooltipVisible=!0,this.tooltipContainer||(this.tooltipContainer=this.createTooltipContainer()),this.setTooltipContent(e),this.tooltipContainer.style("visibility","visible").transition().duration(0).style("opacity",this.tooltipOptions.opacity),this.setPosition(t)},e.prototype.move=function(e,t){this.isTooltipVisible&&(e&&this.setTooltipContent(e),this.setPosition(t))},e.prototype.hide=function(){this.isTooltipVisible&&(this.isTooltipVisible=!1,this.tooltipContainer.transition().duration(this.tooltipOptions.animationDuration).style("opacity",0).each("end",function(){this.style.visibility="hidden"}))},e.prototype.createTooltipContainer=function(){var t=d3.select(e.parentContainerSelector).append("div").attr("class",r["class"]);return t.append("div").attr("class",o["class"]),t.append("div").attr("class",n["class"]),t},e.prototype.setTooltipContent=function(e){if(!_.isEqual(e,this.currentTooltipData)){this.currentTooltipData=e;var t=l.selector,i=this.tooltipContainer.select(n.selector);if(i.selectAll(s.selector).remove(),i.selectAll(l.selector).remove(),0!==e.length){e[0].header&&i.append("div").attr("class",s["class"]).text(e[0].header);var a=i.selectAll(t).data(e),r=a.enter().append("div").attr("class",l["class"]);if(e[0].color){var o=r.append("div").attr("class",u["class"]);o.append("svg").attr({width:"100%",height:"15px"}).append("circle").attr({cx:"5",cy:"8",r:"5"}).style({fill:function(e){return e.color}})}var p=r.append("div").attr("class",c["class"]),d=r.append("div").attr("class",h["class"]);p.text(function(e){return e.displayName}),d.text(function(e){return e.value})}}},e.prototype.getTooltipPosition=function(e,t){var a=this.tooltipContainer.node().getBoundingClientRect(),r=Math.floor(e.width/2),n=0,o=0,s=new i.Point(e.x+r,e.y+r),l=7;return 0===t?(n+=3*l+r,o-=2*l+r):1===t?(n-=2*l+a.width+r,o-=2*l+r):3===t?(n+=3*l+r,o-=a.height-2*l+r):2===t&&(n-=2*l+a.width+r,o-=a.height-2*l+r),s.offset(n,o),s},e.prototype.setPosition=function(e){var t=this.getClickedScreenArea(e),i=this.getTooltipPosition(e,t);this.tooltipContainer.style({left:i.x+"px",top:i.y+"px"}),this.setArrowPosition(e,t)},e.prototype.setArrowPosition=function(e,t){var i,a=this.getArrowElement();0===t?i="top left":1===t?i="top right":3===t?i="bottom left":2===t&&(i="bottom right"),a.attr("class","arrow").classed(i,!0)},e.prototype.getArrowElement=function(){return this.tooltipContainer.select(o.selector)},e.prototype.getClickedScreenArea=function(e){var t=this.customScreenWidth||window.innerWidth,a=this.customScreenHeight||window.innerHeight,r=e.width/2,n=new i.Point(e.x+r,e.y+r),o=t/2,s=a/2;return n.x<o&&n.y<s?0:n.x>=o&&n.y<s?1:n.x<o&&n.y>=s?3:n.x>=o&&n.y>=s?2:void 0},e.DefaultTooltipOptions={opacity:1,animationDuration:250,offsetX:10,offsetY:10},e.parentContainerSelector="body",e.highlightedValueDisplayNameResorceKey="Tooltip_HighlightedValueDisplayName",e}();t.ToolTipComponent=p;var d;!function(e){function t(t,i,n,o){if(e.ShowTooltips){var f=d3.select(p.parentContainerSelector).node(),b=h(),L=d(),_="pointerdown"===b||"MSPointerDown"===b;t.on("mouseover",function(t,r){if(!P&&c(d3.event)){v=g(f,!0);var n=g(this,!0),o={data:t,index:r,coordinates:v,elementCoordinates:n,context:this,isTouchEvent:!1};u();var s=e.ToolTipInstance.isTooltipComponentVisible()?16:x;y=a(o,i,s)}}),t.on("mouseout",function(e,t){P||(u(),y=r(S)),o&&o()}),t.on("mousemove",function(e,t){if(!P&&c(d3.event)){v=g(f,!0);var a=g(this,!0),r={data:e,index:t,coordinates:v,elementCoordinates:a,context:this,isTouchEvent:!1};s(r,i,n)}}),C||(m(b),C=!0),t.on(b,function(e,t){l();var r=g(f,_),n=g(this,_),o={data:e,index:t,coordinates:r,elementCoordinates:n,context:this,isTouchEvent:!0};u(),y=a(o,i,w)}),t.on(L,function(e,t){u(),P&&clearTimeout(P),P=setTimeout(function(){P=0},D)})}}function a(e,t,i){return setTimeout(function(){return o(e,t)},i)}function r(e){return setTimeout(function(){return l()},e)}function n(e){p.localizationOptions=e}function o(t,i){var a=b||i(t);if(!_.isEmpty(a)){var r=v||t.coordinates,n=f(r[0],r[1],t.isTouchEvent);e.ToolTipInstance.show(a,n)}}function s(t,i,a){b=void 0,a&&(b=i(t));var r=f(t.coordinates[0],t.coordinates[1],t.isTouchEvent);e.ToolTipInstance.move(b,r)}function l(){e.ToolTipInstance.hide()}function u(){y&&clearTimeout(y)}function c(e){var t=!0,i=e;if(void 0!==i.buttons){var a=0!==i.buttons;t=!a}return t}function h(){var e="touchstart";return window.PointerEvent?e="pointerdown":window.MSPointerEvent&&(e="MSPointerDown"),e}function d(){var e="touchend";return window.PointerEvent?e="pointerup":window.MSPointerEvent&&(e="MSPointerUp"),e}function g(e,t){var i;if(t){for(var a,r=d3.event;a=r.sourceEvent;)r=a;var n=e.getBoundingClientRect();i=[r.clientX-n.left-e.clientLeft,r.clientY-n.top-e.clientTop]}else{var o=d3.touches(e);o&&o.length>0&&(i=o[0])}return i}function m(t){d3.select(p.parentContainerSelector).on(t,function(t,i){e.ToolTipInstance.hide()})}function f(e,t,a){var r=0,n=e,o=t;if(a){r=12;var s=r/2;n=Math.max(e-s,0),o=Math.max(t-s,0)}return new i.Rectangle(n,o,r,r)}e.ShowTooltips=!0,e.ToolTipInstance=new p;var y,v,b,C=!1,x=350,S=500,w=350,D=1e3,P=0;e.addTooltip=t,e.showDelayedTooltip=a,e.hideDelayedTooltip=r,e.setLocalizedStrings=n}(d=t.TooltipManager||(t.TooltipManager={}));var g;!function(e){function i(e,i,r,n,o,s,l,u,c){var h,p=[],d=void 0;l=0|l;var g=i?i.categories:o;if(g&&g.length>0&&(h={value:r,metadata:g[0].source}),i&&i.values){if(h&&h.metadata===i.values.source||(d=i.values.source),i.values.length>0){var m=i.values[l],f=!!(m&&m.source&&m.source.isAutoGeneratedColumn);f||p.push({value:n,highlightedValue:c,metadata:m})}var y=t.GradientUtils.getGradientMeasureIndex(i),v=-1===y?null:i.values[y];v&&l!==y&&p.push({value:v.values[u],metadata:{source:v.source,values:[]}})}if(s)for(var b=0,C=s.length;C>b;b++){var x=s[b];h&&h.metadata===x.metadata.source||p.push({value:x.value,metadata:x.metadata})}var S=a(e,h,d,p);return S}function a(e,t,i,a){var n=[];if(t){var o=r(t.metadata,e,t.value);n.push({displayName:t.metadata.displayName,value:o})}if(i){var s;if(a.length>0){var l=a[0].metadata.source;s=r(i,e,l.groupName)}n.push({displayName:i.displayName,value:s})}for(var u=0;u<a.length;u++){var c=a[u];if(c&&c.metadata){var h=c.metadata.source,d=c.value,g=c.highlightedValue;if(d||0===d){var m=r(h,e,d);n.push({displayName:h.displayName,value:m})}if(g||0===g){var f=r(h,e,g),y=p.localizationOptions.highlightedValueDisplayName;n.push({displayName:y,value:f})}}}return n}function r(e,i,a){var r=n(e,i);return t.valueFormatter.format(a,r)}function n(e,i){if(e){var a=t.valueFormatter.getFormatString(e,i,!0);return a||e.format}return null}e.createTooltipInfo=i}(g=t.TooltipBuilder||(t.TooltipBuilder={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function i(t){return void 0===t&&(t=new e.DataColorPalette),{titleText:{color:{value:"rgba(51,51,51,1)"}},subTitleText:{color:{value:"rgba(145,145,145,1)"}},colorPalette:{dataColors:t},labelText:{color:{value:"rgba(51,51,51,1)"},fontSize:"11px"},isHighContrast:!1}}t.create=i}(t=e.visualStyles||(e.visualStyles={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.CssConstants.createClassAndSelector,a=jsCommon.PixelConverter,r=function(){function r(e){e&&(this.sliceWidthRatio=e.sliceWidthRatio,this.animator=e.animator,this.isScrollable=e.isScrollable?e.isScrollable:!1,this.disableGeometricCulling=e.disableGeometricCulling?e.disableGeometricCulling:!1,this.behavior=e.behavior,this.tooltipsEnabled=e.tooltipsEnabled),null==this.sliceWidthRatio&&(this.sliceWidthRatio=r.defaultSliceWidthRatio)}return r.converter=function(e,t,i,a,o,s){var l=new n.DonutChartConverter(e,t,i);l.convert();var u=d3.layout.pie().sort(null).value(function(e){return e.percentage});s&&(s.applySelectionStateToData(l.dataPoints),s.applySelectionStateToData(l.legendData.dataPoints));var c=!o&&a?r.cullDataByViewport(l.dataPoints,l.maxValue,a):l.dataPoints;return{dataPointsToDeprecate:c,dataPoints:u(c),unCulledDataPoints:l.dataPoints,dataPointsToEnumerate:l.legendData.dataPoints,legendData:l.legendData,hasHighlights:l.hasHighlights,dataLabelsSettings:l.dataLabelsSettings,legendObjectProperties:l.legendObjectProperties,maxValue:l.maxValue,visibleGeometryCulled:l.dataPoints.length!==c.length}},r.prototype.init=function(e){this.options=e;var i=e.element;i.empty(),this.parentViewport=e.viewport,this.currentViewport={height:e.viewport.height,width:e.viewport.width},this.formatter=t.valueFormatter.format,this.data={dataPointsToDeprecate:[],dataPointsToEnumerate:[],dataPoints:[],unCulledDataPoints:[],legendData:{title:"",dataPoints:[],fontSize:t.SVGLegend.DefaultFontSizeInPt},hasHighlights:!1,dataLabelsSettings:t.dataLabelUtils.getDefaultDonutLabelSettings()},this.drilled=!1,this.allowDrilldown=!1,this.style=e.style,this.colors=this.style.colorPalette.dataColors,this.radius=0,this.isInteractive=e.interactivity&&e.interactivity.isInteractiveLegend;var a=this.settings;if(this.behavior&&(this.interactivityService=t.createInteractivityService(e.host)),this.legend=t.createLegend(i,e.interactivity&&e.interactivity.isInteractiveLegend,this.interactivityService,this.isScrollable),this.hostService=e.host,this.isInteractive){this.chartRotationAnimationDuration=a&&a.chartRotationAnimationDuration?a.chartRotationAnimationDuration:0;var n=this.legendContainer=d3.select(i.get(0)).append("div").classed(r.InteractiveLegendClassName,!0);this.interactivityState={interactiveLegend:new o(this,n,this.colors,e,this.settings),valueToAngleFactor:0,sliceAngles:[],currentRotate:0,interactiveChosenSliceFinishedSetting:!1,lastChosenInteractiveSliceIndex:0,totalDragAngleDifference:0,currentIndexDrag:0,previousIndexDrag:0,previousDragAngle:0,donutCenter:{x:0,y:0}}}this.svg=d3.select(i.get(0)).append("svg").style("position","absolute").classed(r.ClassName,!0),this.behavior&&(this.clearCatcher=t.appendClearCatcher(this.svg)),this.mainGraphicsContext=this.svg.append("g"),this.mainGraphicsContext.append("g").classed("slices",!0),this.labelGraphicsContext=this.svg.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass["class"],!0),this.pie=d3.layout.pie().sort(null).value(function(e){return e.percentage})},r.prototype.update=function(i){var a=i.viewport;this.parentViewport=a;var n=this.dataViews=i.dataViews;if(n&&n.length>0&&n[0].categorical){var o=n[0].metadata,s=void 0,l=void 0;if(o){var u=o.objects;u&&(s=e.DataViewObjects.getValue(u,t.donutChartProps.dataPoint.showAllDataPoints),l=e.DataViewObjects.getFillColor(u,t.donutChartProps.dataPoint.defaultColor))}this.data=r.converter(n[0],this.colors,l,this.currentViewport,this.disableGeometricCulling,this.interactivityService),this.data.showAllDataPoints=s,this.data.defaultDataPointColor=l,this.options.interactivity&&this.options.interactivity.isInteractiveLegend||this.renderLegend()}else this.data={dataPointsToDeprecate:[],dataPointsToEnumerate:[],dataPoints:[],unCulledDataPoints:[],legendData:{title:"",dataPoints:[]},hasHighlights:!1,dataLabelsSettings:t.dataLabelUtils.getDefaultDonutLabelSettings()};if(this.initViewportDependantProperties(),this.updateInternal(this.data,i.suppressAnimations),this.hasSetData=!0,n){var c=t.getInvalidValueWarnings(n,!1,!1,!1);this.data.visibleGeometryCulled&&c.unshift(new t.GeometryCulledWarning),this.hostService.setWarnings(c)}},r.prototype.onDataChanged=function(e){this.update({dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewport:this.currentViewport})},r.prototype.onResizing=function(e){this.update({dataViews:this.dataViews,suppressAnimations:!0,viewport:e})},r.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder,a=this.data&&this.data.dataLabelsSettings?this.data.dataLabelsSettings:t.dataLabelUtils.getDefaultDonutLabelSettings();switch(e.objectName){case"legend":this.enumerateLegend(i);break;case"dataPoint":this.enumerateDataPoints(i);break;case"labels":var r={enumeration:i,dataLabelsSettings:a,show:!0,displayUnits:!0,precision:!0,fontSize:!0,labelStyle:!0};t.dataLabelUtils.enumerateDataLabels(r)}return i.complete()},r.prototype.enumerateDataPoints=function(e){var i=this.data;if(i){e.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:i.defaultDataPointColor||this.colors.getColorByIndex(0).value}}}}).pushInstance({objectName:"dataPoint",selector:null,properties:{showAllDataPoints:!!i.showAllDataPoints}});for(var a=i.dataPointsToEnumerate,r=a.length,n=0;r>n;n++){var o=a[n];e.pushInstance({objectName:"dataPoint",displayName:o.label,selector:t.ColorHelper.normalizeSelector(o.identity.getSelector()),properties:{fill:{solid:{color:o.color}}}})}}},r.prototype.enumerateLegend=function(i){var a=this.data;if(a){var r={legend:a.legendObjectProperties},n=e.DataViewObjects.getValue(r,t.donutChartProps.legend.show,this.legend.isVisible()),o=e.DataViewObjects.getValue(r,t.donutChartProps.legend.showTitle,!0),s=e.DataViewObjects.getValue(r,t.donutChartProps.legend.titleText,this.data.legendData.title),l=e.DataViewObject.getValue(r,t.legendProps.labelColor,this.data.legendData.labelColor),u=e.DataViewObject.getValue(r,t.legendProps.fontSize,this.data.legendData.fontSize);i.pushInstance({selector:null,objectName:"legend",properties:{show:n,position:t.LegendPosition[this.legend.getOrientation()],showTitle:o,titleText:s,labelColor:l,fontSize:u}})}},r.prototype.setInteractiveChosenSlice=function(e){var i=this;if(0!==this.interactivityState.sliceAngles.length){this.interactivityState.lastChosenInteractiveSliceIndex=e,this.interactivityState.interactiveChosenSliceFinishedSetting=!1;var a=this.currentViewport,r=e%this.data.dataPoints.length,n=this.interactivityState.sliceAngles[r];this.svg.select("g").transition().duration(this.chartRotationAnimationDuration).ease("elastic").attr("transform",t.SVGUtil.translateAndRotate(a.width/2,a.height/2,0,0,n)).each("end",function(){i.interactivityState.interactiveChosenSliceFinishedSetting=!0}),this.interactivityState.currentRotate=n,this.interactivityState.interactiveLegend.updateLegend(r),this.svg.selectAll(".slice").attr("opacity",function(e,t){return t===r?1:.6}),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)}},r.prototype.calculateRadius=function(){var e=this.currentViewport;if(!this.isInteractive&&this.data&&this.data.dataLabelsSettings.show){var t=e.height/e.width,i=2+1/(1+Math.exp(-5*(t-1)));return Math.min(e.height,e.width)/i}return Math.min(e.height,e.width)/2},r.prototype.initViewportDependantProperties=function(e){void 0===e&&(e=0),this.currentViewport.height=this.parentViewport.height,this.currentViewport.width=this.parentViewport.width;var i=this.currentViewport;if(this.isInteractive)i.height-=r.InteractiveLegendContainerHeight;else{var a=this.legend.getMargins();i.height-=a.height,i.width-=a.width}this.svg.attr({width:i.width,height:i.height}),this.isInteractive&&(this.legendContainer.style({width:"100%",height:r.InteractiveLegendContainerHeight+"px",overflow:"hidden",top:0}),this.svg.style("top",r.InteractiveLegendContainerHeight)),this.previousRadius=this.radius;var n=this.radius=this.calculateRadius(),o=i.width/2,s=i.height/2;this.arc=d3.svg.arc(),this.outerArc=d3.svg.arc().innerRadius(n*r.OuterArcRadiusRatio).outerRadius(n*r.OuterArcRadiusRatio),this.isInteractive?(this.mainGraphicsContext.attr("transform",t.SVGUtil.translate(o,s)),this.labelGraphicsContext.attr("transform",t.SVGUtil.translate(o,s))):(this.mainGraphicsContext.transition().duration(e).attr("transform",t.SVGUtil.translate(o,s)),this.labelGraphicsContext.transition().duration(e).attr("transform",t.SVGUtil.translate(o,s))),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)},r.prototype.mergeDatasets=function(t,i){var a=d3.set();i.forEach(function(e){a.add(e.identity?e.identity.getKey():e.data.identity.getKey())});var r=t.filter(function(e){return!a.has(e.identity?e.identity.getKey():e.data.identity.getKey())}).map(function(t){var i=e.Prototype.inherit(t);return void 0===i.percentage?i.data.percentage=0:i.percentage=0,i});return d3.merge([i,r])},r.prototype.updateInternal=function(e,i,a){void 0===a&&(a=0);var n=this.currentViewport;if(a=a||t.AnimatorCommon.GetAnimationDuration(this.animator,i),this.animator){var o,s,l,u=r.getLayout(this.radius,this.sliceWidthRatio,n,e.dataLabelsSettings),c=e.dataLabelsSettings,h=[];if(c&&c.show&&(h=this.createLabels()),!i){var p={viewModel:e,colors:this.colors,graphicsContext:this.mainGraphicsContext,labelGraphicsContext:this.labelGraphicsContext,interactivityService:this.interactivityService,layout:u,radius:this.radius,sliceWidthRatio:this.sliceWidthRatio,viewport:n,labels:h,innerArcRadiusRatio:r.InnerArcRadiusRatio};o=this.animator.animate(p),s=o.shapes,l=o.highlightShapes}(i||o.failed)&&(s=r.drawDefaultShapes(this.svg,e,u,this.colors,this.radius,this.interactivityService&&this.interactivityService.hasSelection(),this.sliceWidthRatio,this.data.defaultDataPointColor),l=r.drawDefaultHighlightShapes(this.svg,e,u,this.colors,this.radius,this.sliceWidthRatio),t.NewDataLabelUtils.drawDefaultLabels(this.labelGraphicsContext,h,!1),t.NewDataLabelUtils.drawLabelLeaderLines(this.labelGraphicsContext,h)),this.assignInteractions(s,l,e),this.tooltipsEnabled&&(t.TooltipManager.addTooltip(s,function(e){return e.data.data.tooltipInfo}),t.TooltipManager.addTooltip(l,function(e){return e.data.data.tooltipInfo}))}else this.updateInternalToMove(e,a);t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)},r.prototype.createLabels=function(){var i=[],a=this.createLabelDataPoints(),n=new e.DonutLabelLayout({maximumOffset:t.NewDataLabelUtils.maxLabelOffset,startingOffset:t.NewDataLabelUtils.startingLabelOffset}),o={viewport:this.currentViewport,radius:this.radius,arc:this.arc.innerRadius(0).outerRadius(this.radius*r.InnerArcRadiusRatio),outerArc:this.outerArc,innerArcRadiusRatio:r.InnerArcRadiusRatio,outerArcRadiusRatio:r.OuterArcRadiusRatio,dataLabelsSettings:this.data.dataLabelsSettings};return i=n.layout(a,o)},r.prototype.createLabelDataPoints=function(){for(var e=this.data,t=[],i=0;i<this.data.dataPoints.length;i++){var a=null;0===e.dataLabelsSettings.displayUnits&&(a=d3.max(e.dataPoints,function(e){return Math.abs(e.data.measure)}));var r=this.createLabelDataPoint(e.dataPoints[i],a);t.push(r)}return t},r.prototype.createLabelDataPoint=function(i,r){var n,o,s,l=this.outerArc.centroid(i),u=this.currentViewport,c=t.NewDataLabelUtils.getXPositionForDonutLabel(l[0]),h=l[1],p=this.data.dataLabelsSettings,d=t.dataLabelUtils.createColumnFormatterCacheManager(),g=d.getOrCreate(i.data.measureFormat,p,r),m=u.width/2-Math.abs(c)-t.NewDataLabelUtils.maxLabelOffset,f=!1;if(p.show)switch(p.labelStyle){case t.labelStyle.both:o={text:i.data.label,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:a.fromPoint(p.fontSize),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},s=e.TextMeasurementService.measureSvgTextWidth(o),s>m/2&&(f=!0);var y={text:" ("+g.format(i.data.measure)+")",fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:a.fromPoint(p.fontSize),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},v=e.TextMeasurementService.measureSvgTextWidth(y);s+=v,v>m/2&&(f=!0);break;case t.labelStyle.category:case t.labelStyle.data:o={text:p.labelStyle===t.labelStyle.category?i.data.label:g.format(i.data.measure),fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:a.fromPoint(p.fontSize),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},s=e.TextMeasurementService.measureSvgTextWidth(o),s>m&&(f=!0)}var b=t.NewDataLabelUtils.setLabelTextDonutChart(i,c,u,p,r);o={text:b,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:a.fromPoint(p.fontSize),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight};var C={width:e.TextMeasurementService.measureSvgTextWidth(o),height:e.TextMeasurementService.measureSvgTextHeight(o)},x=0>c?e.NewPointLabelPosition.Left:e.NewPointLabelPosition.Right,S={point:{x:c,y:h},validPositions:[x],radius:0};return n={isPreferred:!0,text:b,textSize:C,outsideFill:p.labelColor?p.labelColor:t.NewDataLabelUtils.defaultLabelColor,isParentRect:!1,fontSize:p.fontSize,identity:i.data.identity,donutArcDescriptor:i,parentShape:S,insideFill:t.NewDataLabelUtils.defaultInsideLabelColor,alternativeScale:r,isTruncated:f,parentType:0}},r.prototype.renderLegend=function(){if(!this.isInteractive){var e=this.data.legendObjectProperties;if(e){var i=this.data.legendData;t.LegendData.update(i,e);var a=e[t.legendProps.position];a&&this.legend.changeOrientation(t.LegendPosition[a]),this.legend.drawLegend(i,this.parentViewport)}else this.legend.changeOrientation(t.LegendPosition.Top),this.legend.drawLegend({dataPoints:[]},this.parentViewport)}},r.prototype.addInteractiveLegendArrow=function(){var e=11,i=16.5;if(!this.interactiveLegendArrow){var a=this.svg.append("g");a.append("path").classed(r.InteractiveLegendArrowClassName,!0).attr("d","M1.5,2.6C0.65,1.15,1.85,0,3,0l27,0c1.65,0,2.35,1.15,1.5,2.6L18,26.45c-0.8,1.45-2.15,1.45-2.95,0L1.95,2.6z"),this.interactiveLegendArrow=a}var n=this.currentViewport,o=(n.height-2*this.radius)/2+e,s=n.width/2-i;this.interactiveLegendArrow.attr("transform",t.SVGUtil.translate(s,o))},r.prototype.calculateSliceAngles=function(){var e=[],t=this.data.dataPoints;if(0===t.length)return this.interactivityState.valueToAngleFactor=0,void(this.interactivityState.sliceAngles=[]);for(var i=0,a=0,r=t.length;r>a;a++)i+=t[a].data.percentage;this.interactivityState.valueToAngleFactor=360/i;for(var n=0,a=0,r=t.length;r>a;a++){var o=t[a].data.percentage*this.interactivityState.valueToAngleFactor;n+=o,e.push(o/2-n)}this.interactivityState.sliceAngles=e},r.prototype.assignInteractions=function(e,t,i){if(this.isInteractive)this.assignInteractiveChartInteractions(e);else if(this.interactivityService){var a=i.dataPoints.map(function(e){return e.data}),r={clearCatcher:this.clearCatcher,slices:e,highlightSlices:t,allowDrilldown:this.allowDrilldown,visual:this,hasHighlights:i.hasHighlights,svg:this.svg};this.interactivityService.bind(a,this.behavior,r)}},r.prototype.setDrilldown=function(e){if(e){var i=d3.layout.pie().sort(null).value(function(e){return e.percentage}),a=[{label:e.label,color:e.color,icon:t.LegendIcon.Box,identity:e.identity,selected:e.selected}],n={title:"",dataPoints:a},o=i(e.internalDataPoints);this.updateInternal({dataPointsToDeprecate:e.internalDataPoints,dataPoints:o,unCulledDataPoints:o.map(function(e){return e.data}),legendData:n,hasHighlights:!1,dataLabelsSettings:this.data.dataLabelsSettings},!1,r.DrillDownAnimationDuration)}else this.updateInternal(this.data,!1,r.DrillDownAnimationDuration)},r.prototype.assignInteractiveChartInteractions=function(e){var t=this,i=this.svg;this.interactivityState.interactiveChosenSliceFinishedSetting=!0;var a=i.node().getBoundingClientRect();this.interactivityState.donutCenter={x:a.left+a.width/2,y:a.top+a.height/2},this.interactivityState.totalDragAngleDifference=0,this.interactivityState.currentRotate=0,this.calculateSliceAngles(),e.on("click",function(e,i){d3.event.defaultPrevented||t.setInteractiveChosenSlice(i)});var r=d3.behavior.drag().origin(Object).on("dragstart",function(){return t.interactiveDragStart()}).on("drag",function(){return t.interactiveDragMove()}).on("dragend",function(){return t.interactiveDragEnd()});i.call(r)},r.prototype.getAngleFromDragEvent=function(){var e,t,i=this.interactivityState,a=d3.event.sourceEvent;if(-1!==a.type.toLowerCase().indexOf("touch")){if(1!==a.touches.length)return null;var r=a.touches[0];e=r.pageX,t=r.pageY}else e=a.pageX,t=a.pageY;var n={x:e-i.donutCenter.x,y:-t+i.donutCenter.y},o=180*Math.atan2(n.y,n.x)/Math.PI;return o},r.prototype.interactiveDragStart=function(){this.interactivityState.totalDragAngleDifference=0,this.interactivityState.previousDragAngle=this.getAngleFromDragEvent()},r.prototype.interactiveDragMove=function(){var e=this.data.dataPoints,i=this.currentViewport,a=this.interactivityState;if(a.interactiveChosenSliceFinishedSetting===!0){var n=this.getAngleFromDragEvent();if(!n)return;var o=a.previousDragAngle-n;a.totalDragAngleDifference+=o,a.previousDragAngle=n,a.currentRotate+=o,this.svg.select("g").attr("transform",t.SVGUtil.translateAndRotate(i.width/2,i.height/2,0,0,this.interactivityState.currentRotate));var s=e[0].data.percentage*a.valueToAngleFactor,l=a.currentRotate<=0?-1*a.currentRotate%360:360-a.currentRotate%360;a.currentIndexDrag=0;for(var u=e.length;a.currentIndexDrag<u&&l>s;)a.currentIndexDrag<u-1&&(s+=e[a.currentIndexDrag+1].data.percentage*a.valueToAngleFactor),a.currentIndexDrag++;a.currentIndexDrag!==a.previousIndexDrag&&(a.interactiveLegend.updateLegend(a.currentIndexDrag),this.svg.selectAll(".slice").attr("opacity",function(e,t){return t===a.currentIndexDrag?r.OpaqueOpacity:r.SemiTransparentOpacity}),a.previousIndexDrag=a.currentIndexDrag)}},r.prototype.interactiveDragEnd=function(){0!==this.interactivityState.totalDragAngleDifference&&(this.setInteractiveChosenSlice(this.interactivityState.currentIndexDrag),d3.event.sourceEvent.stopPropagation())},r.prototype.updateInternalToMove=function(e,i){void 0===i&&(i=0);var a=this.svg,n=this.pie,o=this.key,s=this.arc,l=this.radius,u=this.previousRadius,c=this.sliceWidthRatio,h=this.svg.select(".slices").selectAll("path"+r.sliceClass.selector).data().map(function(e){return e.data});0===h.length&&(h=e.dataPointsToDeprecate);var p=this.mergeDatasets(h,e.dataPointsToDeprecate),d=a.select(".slices").selectAll("path"+r.sliceClass.selector).data(n(e.dataPointsToDeprecate),o);d.enter().insert("path").classed(r.sliceClass["class"],!0).each(function(e){this._current=e}),d=a.select(".slices").selectAll("path"+r.sliceClass.selector).data(n(p),o);var g=l*c;if(r.isSingleColor(e.dataPoints),d.style("fill",function(e){return e.data.color}).style("fill-opacity",function(i){return t.ColumnUtil.getFillOpacity(i.data.selected,!1,!1,e.hasHighlights)}).style("stroke","white").style("stroke-dasharray",function(e){return r.drawStrokeForDonutChart(l,r.InnerArcRadiusRatio,e,c)}).style("stroke-width",function(e){return e.data.strokeWidth}).transition().duration(i).attrTween("d",function(e){var t=d3.interpolate(this._current,e),i=d3.interpolate(u*r.InnerArcRadiusRatio,l*r.InnerArcRadiusRatio);return this._current=t(0),function(e){return s.innerRadius(g).outerRadius(i(e))(t(e))}}),d=a.select(".slices").selectAll("path"+r.sliceClass.selector).data(n(e.dataPointsToDeprecate),o),d.exit().transition().delay(i).duration(0).remove(),!this.isInteractive){var m=e.dataLabelsSettings,f=[];m&&m.show&&(f=this.createLabels()),t.NewDataLabelUtils.drawDefaultLabels(this.labelGraphicsContext,f,!1),t.NewDataLabelUtils.drawLabelLeaderLines(this.labelGraphicsContext,f)}var y=void 0;e.hasHighlights?(y=a.select(".slices").selectAll("path"+r.sliceHighlightClass.selector).data(n(e.dataPointsToDeprecate),o),y.enter().insert("path").classed(r.sliceHighlightClass["class"],!0).each(function(e){
this._current=e}),r.isSingleColor(e.dataPoints),y.style("fill",function(e){return e.data.color}).style("fill-opacity",1).style("stroke","white").style("stroke-dasharray",function(e){return r.drawStrokeForDonutChart(l,r.InnerArcRadiusRatio,e,c,e.data.highlightRatio)}).style("stroke-width",function(e){return 0===e.data.highlightRatio?0:e.data.strokeWidth}).transition().duration(i).attrTween("d",function(e){var t=d3.interpolate(this._current,e),i=d3.interpolate(u*r.InnerArcRadiusRatio,r.getHighlightRadius(l,c,e.data.highlightRatio));return this._current=t(0),function(e){return s.innerRadius(g).outerRadius(i(e))(t(e))}}),y.exit().transition().delay(i).duration(0).remove()):a.selectAll("path"+r.sliceHighlightClass.selector).transition().delay(i).duration(0).remove(),this.assignInteractions(d,y,e),this.tooltipsEnabled&&(t.TooltipManager.addTooltip(d,function(e){return e.data.data.tooltipInfo}),e.hasHighlights&&t.TooltipManager.addTooltip(y,function(e){return e.data.data.tooltipInfo})),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),this.isInteractive&&(this.addInteractiveLegendArrow(),this.interactivityState.interactiveLegend.drawLegend(this.data.dataPointsToDeprecate),this.setInteractiveChosenSlice(this.interactivityState.lastChosenInteractiveSliceIndex?this.interactivityState.lastChosenInteractiveSliceIndex:0))},r.drawDefaultShapes=function(e,i,a,n,o,s,l,u){var c=e.select(".slices").selectAll("path"+r.sliceClass.selector).data(i.dataPoints,function(e){return e.data.identity.getKey()});return c.enter().insert("path").classed(r.sliceClass["class"],!0),r.isSingleColor(i.dataPoints),c.style("fill",function(e){return e.data.color}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.data.selected,!1,s,i.hasHighlights)}).style("stroke-dasharray",function(e){return r.drawStrokeForDonutChart(o,r.InnerArcRadiusRatio,e,l)}).style("stroke-width",function(e){return e.data.strokeWidth}).attr(a.shapeLayout),c.exit().remove(),c},r.drawDefaultHighlightShapes=function(e,i,a,n,o,s){var l=e.select(".slices").selectAll("path"+r.sliceHighlightClass.selector).data(i.dataPoints.filter(function(e){return null!=e.data.highlightRatio}),function(e){return e.data.identity.getKey()});return l.enter().insert("path").classed(r.sliceHighlightClass["class"],!0).each(function(e){this._current=e}),r.isSingleColor(i.dataPoints),l.style("fill",function(e){return e.data.color}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.data.selected,!0,!1,i.hasHighlights)}).style("stroke","white").style("stroke-dasharray",function(e){return r.drawStrokeForDonutChart(o,r.InnerArcRadiusRatio,e,s,e.data.highlightRatio)}).style("stroke-width",function(e){return 0===e.data.highlightRatio?0:e.data.strokeWidth}).attr(a.highlightShapeLayout),l.exit().remove(),l},r.isSingleColor=function(e){if(e.length>1){var t=e.length-1;e[t].data.isLastInDonut=e[t].data.color===e[0].data.color}},r.drawStrokeForDonutChart=function(e,t,i,a,n){void 0===n&&(n=1);var o,s,l=e*t*n,u=(i.endAngle-i.startAngle)*l;if(a){var c=e*a,h=n*e*(r.InnerArcRadiusRatio-a),p=(i.endAngle-i.startAngle)*c;if(i.data.highlightRatio&&(u=(i.endAngle-i.startAngle)*(h+c)),i.data.isLastInDonut)return"0 "+u+" "+h+" "+p+" "+h;o=u+h+p,s=h}else i.data.isLastInDonut?(o=u,s=2*l):(o=u+l,s=l);return"0 "+o+" "+s},r.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},r.getLayout=function(e,t,i,n){var o=e*t,s=d3.svg.arc().innerRadius(o),l=s.outerRadius(e*r.InnerArcRadiusRatio),u=a.fromPoint(n.fontSize);return{fontSize:u,shapeLayout:{d:function(e){return l(e)}},highlightShapeLayout:{d:function(i){var a=s.outerRadius(r.getHighlightRadius(e,t,i.data.highlightRatio));return a(i)}},zeroShapeLayout:{d:function(e){var t=s.outerRadius(o||r.EffectiveZeroValue);return t(e)}}}},r.getHighlightRadius=function(e,t,i){var a=e*t;return a+i*e*(r.InnerArcRadiusRatio-t)},r.cullDataByViewport=function(e,t,i){for(var a,n=Math.min(i.width,i.height)/2,o=this.invisibleArcLengthInPixels/(n*r.twoPi),s=o*t,l=[],u=0;u<e.length;u++){var c=e[u];c.measure>=s&&(c.strokeWidth=a===c.color?1:0,a=c.color,l.push(c))}return l},r.ClassName="donutChart",r.InteractiveLegendClassName="donutLegend",r.InteractiveLegendArrowClassName="donutLegendArrow",r.DrillDownAnimationDuration=1e3,r.OuterArcRadiusRatio=.9,r.InnerArcRadiusRatio=.8,r.InteractiveLegendContainerHeight=70,r.OpaqueOpacity=1,r.SemiTransparentOpacity=.6,r.defaultSliceWidthRatio=.48,r.invisibleArcLengthInPixels=3,r.sliceClass=i("slice"),r.sliceHighlightClass=i("slice-highlight"),r.twoPi=2*Math.PI,r.EffectiveZeroValue=1e-9,r.PolylineOpacity=.5,r}();t.DonutChart=r;var n,o=function(){function e(e,t,i,a,r){this.legendContainerParent=t,this.colors=i,this.donutChart=e,this.visualInitOptions=a,this.legendItemsPositions=[],this.legendTransitionAnimationDuration=r&&r.legendTransitionAnimationDuration?r.legendTransitionAnimationDuration:0}return e.prototype.drawLegend=function(i){var a=this;this.data=i,this.currentNumberOfLegendItems=i.length,this.currentIndex=0,this.leftMostIndex=0,this.rightMostIndex=i.length-1,this.legendContainerParent.select(e.LegendContainerSelector).empty()&&(this.legendContainer=this.legendContainerParent.append("div").classed(e.LegendContainerClassName,!0));var r=this.legendContainer.selectAll(e.LegendItemSelector).data(i),n=this.legendContainerWidth=this.legendContainer.node().getBoundingClientRect().width,o=n/2-.4*n/2+e.ItemMargin,s=o;this.currentXOffset=o;var l=function(i,r){i.attr("data-legend-index",r.index).css({position:"absolute",left:s});var n=t.valueFormatter.format(r.label),o=t.valueFormatter.format(r.measure,r.measureFormat),l=t.valueFormatter.format(r.percentage,"0.00 %;-0.00 %;0.00 %"),u=r.color,c=e.createBasicLegendItemSpan(e.LegendItemValueClassName,o,11),h=e.createBasicLegendItemSpan(e.LegendItemCategoryClassName,n,11),p=e.createBasicLegendItemSpan(e.LegendItemPercentageClassName,l,20),d=e.spanWidth(c),g=e.spanWidth(h),m=e.spanWidth(p),f=e.legendBoxSize(d,g,m);i.css("width",f);var y=function(e){return f-e>0?(f-e)/2:0},v=y(d),b=y(g),C=y(m);e.createLegendItemSpan(h,b),e.createLegendItemSpan(c,v),e.createLegendItemSpan(p,C).css("color",u),i.append(h),i.append(p),i.append(c),a.legendItemsPositions.push({startX:s,boxWidth:f}),s+=f+e.ItemMargin};r.enter().insert("div").classed(e.LegendItemClassName,!0).each(function(e){l($(this),e)}),r.exit().remove(),this.assignInteractions()},e.prototype.updateLegend=function(e){var i=this;if(!(this.currentNumberOfLegendItems<=1)){var a=this.legendContainerWidth;this.currentIndex=e,this.updateLabelBlocks(e);var r=this.legendTransitionAnimationDuration,n=-1*(this.legendItemsPositions[e].startX+this.legendItemsPositions[e].boxWidth/2-a/2);this.legendContainer.transition().styleTween("-webkit-transform",function(e,a,r){return d3.interpolate(t.SVGUtil.translateWithPixels(i.currentXOffset,0),t.SVGUtil.translateWithPixels(n,0))}).styleTween("transform",function(e,a,r){return d3.interpolate(t.SVGUtil.translateWithPixels(i.currentXOffset,0),t.SVGUtil.translateWithPixels(n,0))}).duration(r).ease("bounce").each("end",function(){i.currentXOffset=n}),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.visualInitOptions)}},e.prototype.assignInteractions=function(){var t=this,i=0,a=!1,r=function(){i=0,a=!1},n=function(){if(i+=d3.event.dx,!(a||Math.abs(i)<e.MinimumSwipeDX)){var r=0>i;t.dragLegend(r),a=!0}},o=d3.behavior.drag().origin(Object).on("drag",n).on("dragstart",r);this.legendContainer.call(o)},e.prototype.dragLegend=function(t){this.currentNumberOfLegendItems>e.MinimumItemsInLegendForCycled-1?this.currentIndex=this.getCyclingCurrentIndex(t):this.shouldChangeIndexInNonCycling(t)&&(t?this.currentIndex++:this.currentIndex--),this.donutChart.setInteractiveChosenSlice(this.currentIndex)},e.prototype.shouldChangeIndexInNonCycling=function(e){return 0===this.currentIndex&&!e||this.currentIndex===this.currentNumberOfLegendItems-1&&e?!1:!0},e.prototype.getCyclingCurrentIndex=function(e){var t=this.data.length,i=e?1:-1,a=(this.currentIndex+i)%(t||1);return 0>a?a+t:a},e.prototype.updateLegendItemsBlocks=function(t,i){var a=$(this.legendContainer[0]);if(t){var r=a.find("[data-legend-index="+this.leftMostIndex+"]");r.remove().insertAfter(a.find("[data-legend-index="+this.rightMostIndex+"]"));var n=this.legendItemsPositions[this.rightMostIndex].startX+this.legendItemsPositions[this.rightMostIndex].boxWidth+e.ItemMargin;this.legendItemsPositions[this.leftMostIndex].startX=n,r.css("left",n),this.rightMostIndex=this.leftMostIndex,this.leftMostIndex=(this.leftMostIndex+1)%this.data.length}else{var o=a.find("[data-legend-index="+this.rightMostIndex+"]");o.remove().insertBefore(a.find("[data-legend-index="+this.leftMostIndex+"]"));var n=this.legendItemsPositions[this.leftMostIndex].startX-this.legendItemsPositions[this.rightMostIndex].boxWidth-e.ItemMargin;this.legendItemsPositions[this.rightMostIndex].startX=n,o.css("left",n),this.leftMostIndex=this.rightMostIndex,this.rightMostIndex=this.rightMostIndex-1===-1?this.legendItemsPositions.length-1:this.rightMostIndex-1}i-1!==0&&this.updateLegendItemsBlocks(t,i-1)},e.prototype.updateLabelBlocks=function(t){this.currentNumberOfLegendItems>e.MinimumItemsInLegendForCycled?(this.rightMostIndex===t&&this.updateLegendItemsBlocks(!0,2),this.leftMostIndex===t&&this.updateLegendItemsBlocks(!1,2),(this.rightMostIndex===t+1||0===this.rightMostIndex&&t===this.currentNumberOfLegendItems-1)&&this.updateLegendItemsBlocks(!0,1),(this.leftMostIndex===t-1||this.leftMostIndex===this.currentNumberOfLegendItems-1&&0===t)&&this.updateLegendItemsBlocks(!1,1)):this.currentNumberOfLegendItems===e.MinimumItemsInLegendForCycled&&(this.rightMostIndex===t&&this.updateLegendItemsBlocks(!0,1),this.leftMostIndex===t&&this.updateLegendItemsBlocks(!1,1))},e.createBasicLegendItemSpan=function(e,t,i){return $("<span/>").addClass(e).css({"white-space":"nowrap","font-size":i+"px"}).text(t)},e.createLegendItemSpan=function(e,t){return e.css({overflow:"hidden","text-overflow":"ellipsis",display:"inline-block",width:"100%","margin-left":t}),e},e.legendBoxSize=function(t,i,a){var r=t>i?t:i;return r=r>a?r:a,r=r>e.MaxLegendItemBoxSize?e.MaxLegendItemBoxSize:r+2},e.spanWidth=function(e){return this.FakeElementSpan||(this.FakeElementSpan=$("<span>").hide().appendTo(document.body)),this.FakeElementSpan.empty(),this.FakeElementSpan.append(e),this.FakeElementSpan.width()},e.LegendContainerClassName="legend-container",e.LegendContainerSelector=".legend-container",e.LegendItemClassName="legend-item",e.LegendItemSelector=".legend-item",e.LegendItemCategoryClassName="category",e.LegendItemPercentageClassName="percentage",e.LegendItemValueClassName="value",e.MaxLegendItemBoxSize=160,e.ItemMargin=30,e.MinimumSwipeDX=15,e.MinimumItemsInLegendForCycled=3,e}();!function(e){var i=function(){function e(e,i,a){var r=e.categorical;if(this.dataViewCategorical=r,this.dataViewMetadata=e.metadata,this.seriesCount=r.values?r.values.length:0,this.colorHelper=new t.ColorHelper(i,t.donutChartProps.dataPoint.fill,a),this.maxValue=0,r.categories&&r.categories.length>0){var n=r.categories[0];this.categoryIdentities=n.identity,this.categoryValues=n.values,this.allCategoryObjects=n.objects,this.categoryColumnRef=n.identityFields,this.categoryFormatString=t.valueFormatter.getFormatString(n.source,t.donutChartProps.general.formatString)}var o=this.grouped=r&&r.values?r.values.grouped():void 0;this.isMultiMeasure=o&&o.length>0&&o[0].values&&o[0].values.length>1,this.isSingleMeasure=o&&1===o.length&&o[0].values&&1===o[0].values.length,this.isDynamicSeries=!(!r.values||!r.values.source),this.hasHighlights=this.seriesCount>0&&!_.isEmpty(r.values)&&!!r.values[0].highlights,this.highlightsOverflow=!1,this.total=0,this.highlightTotal=0,this.dataPoints=[],this.legendDataPoints=[],this.dataLabelsSettings=null;for(var s=0;s<this.seriesCount;s++)for(var l=r.values[s],u=0;u<l.values.length;u++)this.total+=Math.abs(l.values[u]),this.highlightTotal+=this.hasHighlights?Math.abs(l.highlights[u]):0;this.total=t.AxisHelper.normalizeNonFiniteNumber(this.total),this.highlightTotal=t.AxisHelper.normalizeNonFiniteNumber(this.highlightTotal)}return e.normalizedMeasureAndValue=function(e){var i=$.extend(!0,{},e);return i.measure=t.AxisHelper.normalizeNonFiniteNumber(i.measure),i.value=t.AxisHelper.normalizeNonFiniteNumber(i.value),i},e.prototype.convert=function(){var i;i=0!==this.total?this.categoryValues?this.convertCategoricalWithSlicing():this.isDynamicSeries?this.convertSeries():this.convertMeasures():[];for(var a=!1,n=0,o=i.length;o>n&&!a;n++){var s=i[n];Math.abs(s.highlightMeasureValue.measure)>Math.abs(s.measureValue.measure)&&(a=!0)}this.dataLabelsSettings=this.convertDataLabelSettings();var l=this.dataViewMetadata;if(l){var u=l.objects;u&&(this.legendObjectProperties=u.legend)}this.dataPoints=[];for(var c,h=t.donutChartProps.general.formatString,n=0,o=i.length;o>n;n++){var s=i[n],p=e.normalizedMeasureAndValue(s.highlightMeasureValue),d=e.normalizedMeasureAndValue(s.measureValue),g=d.measure,m=this.total>0?d.value/this.total:0,f=0;d.value>this.maxValue&&(this.maxValue=d.value),p.value>this.maxValue&&(this.maxValue=p.value),this.hasHighlights&&(a?(g=p.measure,m=this.highlightTotal>0?p.value/this.highlightTotal:0,f=1):f=p.value/d.value,f||(f=r.EffectiveZeroValue));var y=s.categoryLabel,v=this.dataViewCategorical,b=v.categories?null:n;b=void 0!==s.seriesIndex?s.seriesIndex:b;var C=v.values[b].source,x=s.measureValue.measure,S=this.hasHighlights&&0!==s.highlightMeasureValue.value?s.highlightMeasureValue.measure:void 0,w=t.TooltipBuilder.createTooltipInfo(h,v,y,x,null,null,b,n,S),D=c===s.color&&x&&x>0?1:0;c=x&&x>0?s.color:c,this.dataPoints.push({identity:s.identity,measure:g,measureFormat:s.measureFormat,percentage:m,index:s.index,label:s.label,highlightRatio:f,selected:!1,tooltipInfo:w,color:s.color,strokeWidth:D,labelFormatString:C.format})}this.legendData=this.convertLegendData()},e.prototype.getLegendTitle=function(){if(0!==this.total){var e=this.dataViewCategorical.values&&this.dataViewCategorical.values.source?this.dataViewCategorical.values.source.displayName:"",t=this.dataViewCategorical.categories&&this.dataViewCategorical.categories.length>0&&this.dataViewCategorical.categories[0].source?this.dataViewCategorical.categories[0].source.displayName:"";return this.categoryValues?t:e}return""},e.prototype.convertCategoricalWithSlicing=function(){for(var e=this.dataViewCategorical,i=t.donutChartProps.general.formatString,a=[],r=0,n=this.categoryValues.length;n>r;r++){for(var o=this.categoryValues[r],s=this.allCategoryObjects?this.allCategoryObjects[r]:void 0,l=t.SelectionId.createWithId(this.categoryIdentities[r]),u=this.colorHelper.getColorForSeriesValue(s,this.categoryColumnRef,o),c=t.valueFormatter.format(o,this.categoryFormatString),h=0;h<this.seriesCount;h++){var p=e.values[h],d=this.isSingleMeasure?c:t.converterHelper.getFormattedLegendLabel(p.source,e.values,i),g=p.values[r]||0,m=this.hasHighlights?p.highlights[r]||0:0,f=void 0,y=void 0;this.isMultiMeasure?f=p.source.queryName:p.identity&&(y=p);var v=t.SelectionIdBuilder.builder().withCategory(e.categories[0],r).withSeries(y,y).withMeasure(f).createSelectionId(),b={identity:v,measureFormat:t.valueFormatter.getFormatString(p.source,i,!0),measureValue:{measure:g,value:Math.abs(g)},highlightMeasureValue:{measure:m,value:Math.abs(m)},index:r,label:d,categoryLabel:c,color:u,seriesIndex:h};a.push(b)}this.legendDataPoints.push({label:c,color:u,icon:t.LegendIcon.Box,identity:l,selected:!1})}return a},e.prototype.convertMeasures=function(){for(var e=this.dataViewCategorical,i=[],a=t.donutChartProps.general.formatString,r=0;r<this.seriesCount;r++){var n=e.values[r],o=t.valueFormatter.getFormatString(n.source,a,!0),s=n.source.displayName,l=t.SelectionId.createWithMeasure(n.source.queryName),u=n.values[0]||0,c=this.hasHighlights?n.highlights[0]||0:0,h=this.colorHelper.getColorForMeasure(n.source.objects,n.source.queryName),p={identity:l,measureFormat:o,measureValue:{measure:u,value:Math.abs(u)},highlightMeasureValue:{measure:c,value:Math.abs(c)},index:r,label:s,categoryLabel:s,color:h};i.push(p),this.legendDataPoints.push({label:p.label,color:p.color,icon:t.LegendIcon.Box,identity:p.identity,selected:!1})}return i},e.prototype.convertSeries=function(){for(var e=this.dataViewCategorical,i=[],a=t.donutChartProps.general.formatString,r=0;r<this.seriesCount;r++){var n=e.values[r],o=t.valueFormatter.getFormatString(n.source,a,!0),s=t.converterHelper.getFormattedLegendLabel(n.source,e.values,a),l=t.SelectionId.createWithId(n.identity),u=t.converterHelper.getSeriesName(n.source),c=this.grouped&&this.grouped[r]&&this.grouped[r].objects,h=n.values[0]||0,p=this.hasHighlights?n.highlights[0]||0:0,d=this.colorHelper.getColorForSeriesValue(c,e.values.identityFields,u),g={identity:l,measureFormat:o,measureValue:{measure:h,value:Math.abs(h)},highlightMeasureValue:{measure:p,value:Math.abs(p)},index:r,label:s,categoryLabel:s,color:d,seriesIndex:r};i.push(g),this.legendDataPoints.push({label:g.label,color:g.color,icon:t.LegendIcon.Box,identity:g.identity,selected:!1})}return i},e.prototype.convertDataLabelSettings=function(){var e=this.dataViewMetadata,i=t.dataLabelUtils.getDefaultDonutLabelSettings();if(e){var a=e.objects;if(a){var r=a.labels;r&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(r,i)}}return i},e.prototype.convertLegendData=function(){return{dataPoints:this.legendDataPoints,labelColor:t.LegendData.DefaultLegendLabelFillColor,title:this.getLegendTitle(),fontSize:t.SVGLegend.DefaultFontSizeInPt}},e}();e.DonutChartConverter=i}(n||(n={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){var a=t.utility.SelectionManager,r=e.visuals.valueFormatter,n=t.AnimatorCommon.GetAnimationDuration,o=function(){function i(e){this.ColumnPadding=1,this.MinColumnHeight=1,this.MinOpacity=.3,this.MaxOpacity=1,this.NumberOfLabelsOnAxisY=5,this.MinNumberOfBins=0,this.MinPrecision=0,this.TooltipDisplayName="Range",this.SeparatorNumbers=", ",this.LegendSize=50,this.AxisSize=30,this.ExcludeBrackets={left:"(",right:")"},this.IncludeBrackets={left:"[",right:"]"},this.margin={top:10,right:10,bottom:10,left:10},this.durationAnimations=200,e&&(e.svg&&(this.svg=e.svg),e.animator&&(this.animator=e.animator),this.margin=e.margin||this.margin)}return i.prototype.init=function(e){this.svg?this.root=this.svg:this.root=d3.select(e.element.get(0)).append("svg");var r=e.style;this.colors=r&&r.colorPalette?r.colorPalette.dataColors:new t.DataColorPalette,this.root.classed(i.ClassName,!0),this.main=this.root.append("g"),this.axes=this.main.append("g").classed(i.Axes["class"],!0),this.axisX=this.axes.append("g").classed(i.Axis["class"],!0),this.axisY=this.axes.append("g").classed(i.Axis["class"],!0),this.legend=this.main.append("g").classed(i.Legends["class"],!0),this.columns=this.main.append("g").classed(i.Columns["class"],!0),this.selectionManager=new a({hostServices:e.host})},i.prototype.converter=function(e){var t=this;if(!(e&&e.categorical&&e.categorical.categories&&e.categorical.categories[0]&&e.categorical.categories[0].values&&e.categorical.categories[0].values.length>0))return null;var a,n,o,s,l,u,c,h=[],p=[],d=[],g=0,m=0;return e.categorical.values&&e.categorical.values[0]&&e.categorical.values[0].values&&(p=e.categorical.values[0].values),e.categorical.categories[0].identity&&e.categorical.categories[0].identity.length>0&&(d=e.categorical.categories[0].identity),(a=this.parseSettings(e))?(o=this.getValuesByFrequencies(e.categorical.categories[0].values,p,d),o.forEach(function(e){h.push(e.value),m+=e.frequency}),n=d3.layout.histogram(),a.bins&&a.bins>this.MinNumberOfBins&&(n=n.bins(a.bins)),s=n.frequency(a.frequency)(h),s.forEach(function(e,i){var r,n;r=o.filter(function(a){return t.isValueContainedInRange(a,e,i)}),n=r.reduce(function(e,t){return e+t.frequency},0),e.y=a.frequency?n:n/m,g+=e.length}),l=d3.scale.linear().domain([d3.min(s,function(e){return d3.min(e)}),d3.max(s,function(e){return d3.max(e)})]).range([0,this.viewport.width-this.LegendSize-this.AxisSize]),u=d3.scale.linear().domain([0,d3.max(s,function(e){return e.y})]).range([this.viewport.height-this.LegendSize,0]),c=r.create({format:r.getFormatString(e.categorical.categories[0].source,i.Properties.general.formatString),value:o[0].value,value2:o[o.length-1].value,precision:a.precision}),{xScale:l,yScale:u,settings:a,data:this.getData(o,h,s,a,c),formatter:c}):null},i.prototype.getValuesByFrequencies=function(e,i,a){var r=[];return e.forEach(function(e,n){var o=1,s=Number(e);s=isNaN(s)?0:s,i&&i[n]&&!isNaN(i[n])&&i[n]>1&&(o=i[n]),r.push({value:s,frequency:o,selectionId:t.SelectionId.createWithId(a[n])})}),r},i.prototype.getData=function(e,t,i,a,r){var n=this,o=d3.min(t),s=d3.max(t);return i.map(function(t,i){return t.range=n.getRange(o,s,t.dx,i),t.tooltipInfo=n.getTooltipData(t.y,t.range,a,0===i,r),t.selectionIds=n.getSelectionIds(e,t,i),t})},i.prototype.getRange=function(e,t,i,a){var r=e+a*i,n=r+i;return[r,n]},i.prototype.getTooltipData=function(e,t,i,a,r){return[{displayName:this.getLegendText(i),value:r.format(e)},{displayName:this.TooltipDisplayName,value:this.rangeToString(t,a,r)}]},i.prototype.getSelectionIds=function(e,t,i){var a=this,r=[];return e.forEach(function(e){a.isValueContainedInRange(e,t,i)&&r.push(e.selectionId)}),r},i.prototype.isValueContainedInRange=function(e,t,i){return(0===i&&e.value>=t.x||e.value>t.x)&&e.value<=t.x+t.dx},i.prototype.parseSettings=function(e){if(!(e&&e.metadata&&e.metadata.columns&&e.metadata.columns[0]))return null;var a,r,n={};return r=new t.ColorHelper(this.colors,i.Properties.dataPoint.fill,i.DefaultHistogramSettings.fillColor),n.displayName=i.DefaultHistogramSettings.displayName,n.fillColor=i.DefaultHistogramSettings.fillColor,n.bins=i.DefaultHistogramSettings.bins,n.frequency=i.DefaultHistogramSettings.frequency,n.displayName=e.metadata.columns[0].displayName||i.DefaultHistogramSettings.displayName,a=this.getObjectsFromDataView(e),a&&(n.fillColor=r.getColorForMeasure(a,""),n.bins=this.getBins(a),n.frequency=this.getFrequency(a),n.precision=this.getPrecision(a)),n},i.prototype.getBins=function(t){var a;return a=Number(e.DataViewObjects.getValue(t,i.Properties.general.bins,i.DefaultHistogramSettings.bins)),!a||isNaN(a)||a<=this.MinNumberOfBins?i.DefaultHistogramSettings.bins:a},i.prototype.getFrequency=function(t){return e.DataViewObjects.getValue(t,i.Properties.general.frequency,i.DefaultHistogramSettings.frequency)},i.prototype.getPrecision=function(t){var a=e.DataViewObjects.getValue(t,i.Properties.labels.labelPrecision,i.DefaultHistogramSettings.precision);return a<=this.MinPrecision?this.MinPrecision:a},i.prototype.update=function(e){if(e&&e.dataViews&&e.dataViews[0]){var t=e.dataViews[0];this.durationAnimations=n(this.animator,e.suppressAnimations),this.setSize(e.viewport),this.histogramDataView=this.converter(t),this.render()}},i.prototype.setSize=function(e){var t,i;t=e.height-this.margin.top-this.margin.bottom,i=e.width-this.margin.left-this.margin.right,this.viewport={height:t,width:i},this.updateElements(e.height,e.width)},i.prototype.updateElements=function(e,i){var a=this.margin.left+this.LegendSize;this.root.attr({height:e,width:i}),this.main.attr("transform",t.SVGUtil.translate(this.margin.left,this.margin.top)),this.legend.attr("transform",t.SVGUtil.translate(this.margin.left,this.margin.top)),this.columns.attr("transform",t.SVGUtil.translate(a,0)),this.axes.attr("transform",t.SVGUtil.translate(a,0)),this.axisX.attr("transform",t.SVGUtil.translate(0,this.viewport.height-this.LegendSize))},i.prototype.render=function(){if(this.histogramDataView&&this.histogramDataView.settings){var e;this.renderAxes(),e=this.renderColumns(),this.renderLegend(),this.bindSelectionHandler(e)}},i.prototype.renderColumns=function(){var e,a,r=this,n=this.histogramDataView.data,o=this.histogramDataView.yScale,s=n.length,l=this.main.select(i.Columns.selector).selectAll(i.Column.selector);return e=(this.viewport.width-this.AxisSize-this.LegendSize)/s-this.ColumnPadding,0>e&&(e=0),a=l.data(n),a.enter().append("svg:rect"),a.attr("x",this.ColumnPadding/2).attr("width",e).attr("height",function(e){return r.getColumnHeight(e,o)}).style("fill",this.histogramDataView.settings.fillColor).attr("class",i.Column["class"]).attr("transform",function(i,a){return t.SVGUtil.translate(e*a+r.ColumnPadding*a,o(i.y)-r.ColumnPadding/2.5)}).classed(i.Column["class"]),a.exit().remove(),this.renderTooltip(a),a},i.prototype.renderTooltip=function(e){t.TooltipManager.addTooltip(e,function(e){return e.data.tooltipInfo})},i.prototype.getColumnHeight=function(e,t){var i=this.viewport.height-this.LegendSize-t(e.y);return i>0?i:this.MinColumnHeight},i.prototype.renderAxes=function(){var e,t,i=this.histogramDataView.xScale,a=this.histogramDataView.yScale,r=this.histogramDataView.formatter;e=d3.svg.axis().scale(i).orient("bottom").tickValues(this.rangesToArray(this.histogramDataView.data)).tickFormat(function(e){return r.format(e)}),t=d3.svg.axis().scale(a).orient("left").ticks(this.NumberOfLabelsOnAxisY),this.axisX.call(e),this.axisY.call(t)},i.prototype.rangesToArray=function(e){return e.reduce(function(e,t,i){var a;return a=0===i?t.range:t.range.slice(1),e.concat(a)},[])},i.prototype.rangeToString=function(e,t,i){var a,r=this.IncludeBrackets.right,n=i.format(e[0]),o=i.format(e[1]);return a=t?this.IncludeBrackets.left:this.ExcludeBrackets.left,""+a+n+this.SeparatorNumbers+o+r},i.prototype.renderLegend=function(){var e,t,a=this.getDataLegends(this.histogramDataView.settings);e=this.main.select(i.Legends.selector).selectAll(i.Legend.selector),t=e.data(a),t.enter().append("svg:text"),t.attr("x",0).attr("y",0).attr("dx",function(e){return e.dx}).attr("dy",function(e){return e.dy}).attr("transform",function(e){return e.transform}).attr("class",i.Legend["class"]).text(function(e){return e.text}).classed(i.Legend["class"],!0),t.exit().remove()},i.prototype.getDataLegends=function(e){var i=this.getLegendText(e);return[{transform:t.SVGUtil.translate(this.viewport.width/2,this.viewport.height),text:e.displayName,dx:"1em",dy:"-1em"},{transform:t.SVGUtil.translateAndRotate(0,this.viewport.height/2,0,0,270),text:i,dx:"3em"}]},i.prototype.getLegendText=function(e){return e.frequency?i.FrequencyText:i.DensityText},i.prototype.bindSelectionHandler=function(e){var t=this;this.setSelection(e),e.on("click",function(i){t.selectionManager.clear(),i.selectionIds.forEach(function(a){t.selectionManager.select(a,!0).then(function(a){a.length>0?t.setSelection(e,i):t.setSelection(e)})}),d3.event.stopPropagation()}),this.root.on("click",function(){t.selectionManager.clear(),t.setSelection(e)})},i.prototype.setSelection=function(e,t){e.transition().duration(this.durationAnimations).style("fill-opacity",this.MaxOpacity),t&&e.filter(function(e){return e!==t}).transition().duration(this.durationAnimations).style("fill-opacity",this.MinOpacity)},i.prototype.enumerateObjectInstances=function(e){var t,i=[];if(!this.histogramDataView||!this.histogramDataView.settings)return i;switch(t=this.histogramDataView.settings,e.objectName){case"general":var a={objectName:"general",displayName:"general",selector:null,properties:{bins:t.bins,frequency:t.frequency}};i.push(a);break;case"dataPoint":var r={objectName:"dataPoint",displayName:"dataPoint",selector:null,properties:{fill:t.fillColor}};i.push(r);break;case"labels":var n={objectName:"labels",displayName:"labels",selector:null,properties:{labelPrecision:t.precision}};i.push(n)}return i},i.prototype.getObjectsFromDataView=function(e){return e&&e.metadata&&e.metadata.columns&&e.metadata.objects?e.metadata.objects:null},i.prototype.destroy=function(){this.root=null},i.ClassName="histogram",i.FrequencyText="Frequency",i.DensityText="Density",i.Properties={general:{bins:{objectName:"general",propertyName:"bins"},frequency:{objectName:"general",propertyName:"frequency"},formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{fill:{objectName:"dataPoint",propertyName:"fill"}},labels:{labelPrecision:{objectName:"labels",propertyName:"labelPrecision"}}},i.DefaultHistogramSettings={frequency:!0,displayName:"Histogram",bins:null,fillColor:"cadetblue",precision:2},i.Axes={"class":"axes",selector:".axes"},i.Axis={"class":"axis",selector:".axis"},i.Columns={"class":"columns",selector:".columns"},i.Column={"class":"column",selector:".column"},i.Legends={"class":"legends",selector:".legends"},i.Legend={"class":"legend",selector:".legend"},i.capabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values")},{name:"Frequency",kind:e.VisualDataRoleKind.Measure,displayName:"Frequency"}],dataViewMappings:[{conditions:[{Values:{min:1,max:1},Frequency:{min:0,max:1}}],categorical:{categories:{bind:{to:"Values"},dataReductionAlgorithm:{top:{}}},values:{"for":{"in":"Frequency"}}}}],sorting:{implicit:{clauses:[{role:"Values",direction:1}]}},objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}},bins:{displayName:"Bins",type:{numeric:!0}},frequency:{displayName:"Frequency",type:{bool:!0}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),properties:{fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),properties:{labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),type:{numeric:!0}}}}}},i}();i.Histogram=o}(i=t.samples||(t.samples={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=jsCommon.Utility,i=function(){function i(e){this.canRefresh=e.canRefresh}return i.prototype.init=function(t){this.element=t.element,this.hostServices=t.host,this.canRefresh||this.hostServices.setWarnings([new e.ScriptVisualRefreshWarning])},i.prototype.update=function(e){var i=e.dataViews;if(i&&0!==i.length){var a=i[0];if(a&&a.metadata){var r,n=!0;a.scriptResult&&a.scriptResult.imageBase64?r="data:image/svg+xml;base64,"+a.scriptResult.imageBase64:(r=this.getLastSavedImage(a),n=!1);var o=this.imageBackgroundElement;if(o||(o=$("<div class='imageBackground' />"),this.imageBackgroundElement=o,this.imageBackgroundElement.appendTo(this.element)),r&&t.isValidImageDataUrl(r)){var s=e.viewport;o.css({height:s.height,width:s.width,"background-image":"url("+r+")"}),n&&this.updateLastSavedImage(a,r,e.viewport)}else o.css({"background-image":"none"})}}},i.prototype.getLastSavedImage=function(e){var i=null;if(!e||!e.metadata)return i;var a=e.metadata.objects;if(!a||!a.lastSavedImage)return i;var r=a.lastSavedImage.imageUrl;return t.isValidImageDataUrl(r)?r:i},i.prototype.updateLastSavedImage=function(e,i,a){if(t.isValidImageDataUrl(i)&&e&&e.metadata){var r=[{objectName:"lastSavedImage",properties:{imageUrl:i,viewportHeight:a.height,viewportWidth:a.width},selector:null}];this.hostServices.persistProperties(r)}},i}();e.ScriptVisual=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){t.animatedNumber={name:"animatedNumber",capabilities:e.capabilities.animatedNumber,create:function(){return new e.AnimatedNumber}},t.areaChart={name:"areaChart",watermarkKey:"area",capabilities:e.capabilities.lineChart,create:function(){return new e.CartesianChart({chartType:1})},customizeQuery:e.LineChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.barChart={name:"barChart",watermarkKey:"bar",capabilities:e.capabilities.barChart,create:function(){return new e.CartesianChart({chartType:6})},customizeQuery:e.ColumnChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.basicShape={name:"basicShape",capabilities:e.basicShapeCapabilities,create:function(){return new e.BasicShapeVisual;
}},t.card={name:"card",watermarkKey:"card",capabilities:e.capabilities.card,create:function(){return new e.Card}},t.multiRowCard={name:"multiRowCard",watermarkKey:"multiRowCard",capabilities:e.capabilities.multiRowCard,create:function(){return new e.MultiRowCard}},t.clusteredBarChart={name:"clusteredBarChart",watermarkKey:"clusteredBar",capabilities:e.capabilities.clusteredBarChart,create:function(){return new e.CartesianChart({chartType:5})},customizeQuery:e.ColumnChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.clusteredColumnChart={name:"clusteredColumnChart",watermarkKey:"clusteredColumn",capabilities:e.capabilities.clusteredColumnChart,create:function(){return new e.CartesianChart({chartType:3})},customizeQuery:e.ColumnChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.columnChart={name:"columnChart",watermarkKey:"column",capabilities:e.capabilities.columnChart,create:function(){return new e.CartesianChart({chartType:4})},customizeQuery:e.ColumnChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.comboChart={name:"comboChart",watermarkKey:"combo",capabilities:e.capabilities.comboChart,create:function(){return new e.CartesianChart({chartType:10})}},t.dataDotChart={name:"dataDotChart",capabilities:e.capabilities.dataDotChart,create:function(){return new e.CartesianChart({chartType:11})}},t.dataDotClusteredColumnComboChart={name:"dataDotClusteredColumnComboChart",watermarkKey:"combo",capabilities:e.capabilities.dataDotClusteredColumnComboChart,create:function(){return new e.CartesianChart({chartType:15})}},t.dataDotStackedColumnComboChart={name:"dataDotStackedColumnComboChart",watermarkKey:"combo",capabilities:e.capabilities.dataDotStackedColumnComboChart,create:function(){return new e.CartesianChart({chartType:16})}},t.donutChart={name:"donutChart",watermarkKey:"donut",capabilities:e.capabilities.donutChart,create:function(){return new e.DonutChart}},t.funnel={name:"funnel",watermarkKey:"funnel",capabilities:e.capabilities.funnel,create:function(){return new e.FunnelChart}},t.gauge={name:"gauge",watermarkKey:"gauge",capabilities:e.capabilities.gauge,create:function(){return new e.Gauge}},t.hundredPercentStackedBarChart={name:"hundredPercentStackedBarChart",watermarkKey:"100stackedbar",capabilities:e.capabilities.hundredPercentStackedBarChart,create:function(){return new e.CartesianChart({chartType:7})},customizeQuery:e.ColumnChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.hundredPercentStackedColumnChart={name:"hundredPercentStackedColumnChart",watermarkKey:"100stackedcolumn",capabilities:e.capabilities.hundredPercentStackedColumnChart,create:function(){return new e.CartesianChart({chartType:8})},customizeQuery:e.ColumnChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.image={name:"image",capabilities:e.capabilities.image,create:function(){return new e.ImageVisual}},t.lineChart={name:"lineChart",watermarkKey:"line",capabilities:e.capabilities.lineChart,create:function(){return new e.CartesianChart({chartType:0})},customizeQuery:e.LineChart.customizeQuery,getSortableRoles:function(t){return e.LineChart.getSortableRoles(t)}},t.lineStackedColumnComboChart={name:"lineStackedColumnComboChart",watermarkKey:"combo",capabilities:e.capabilities.lineStackedColumnComboChart,create:function(){return new e.CartesianChart({chartType:14})},getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.lineClusteredColumnComboChart={name:"lineClusteredColumnComboChart",watermarkKey:"combo",capabilities:e.capabilities.lineClusteredColumnComboChart,create:function(){return new e.CartesianChart({chartType:13})},getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.map={name:"map",watermarkKey:"map",capabilities:e.capabilities.map,create:function(){return new e.Map({filledMap:!1})}},t.filledMap={name:"filledMap",watermarkKey:"filledMap",capabilities:e.capabilities.filledMap,create:function(){return new e.Map({filledMap:!0})}},t.treemap={name:"treemap",watermarkKey:"tree",capabilities:e.capabilities.treemap,create:function(){return new e.Treemap}},t.sunburst={name:"sunburst",watermarkKey:"defaultWatermark",capabilities:e.capabilities.sunburst,create:function(){return new e.samples.Sunburst}},t.pieChart={name:"pieChart",watermarkKey:"pie",capabilities:e.capabilities.donutChart,create:function(){return new e.DonutChart({sliceWidthRatio:0})}},t.scatterChart={name:"scatterChart",watermarkKey:"scatterplot",capabilities:e.capabilities.scatterChart,create:function(){return new e.CartesianChart({chartType:9})}},t.stackedAreaChart={name:"stackedAreaChart",watermarkKey:"stackedarea",capabilities:e.capabilities.lineChart,create:function(){return new e.CartesianChart({chartType:2})},customizeQuery:e.LineChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.table={name:"table",watermarkKey:"table",capabilities:e.capabilities.table,create:function(){return new e.Table},customizeQuery:e.Table.customizeQuery,getSortableRoles:function(t){return e.Table.getSortableRoles()}},t.matrix={name:"matrix",watermarkKey:"matrix",capabilities:e.capabilities.matrix,create:function(){return new e.Matrix},customizeQuery:e.Matrix.customizeQuery,getSortableRoles:function(t){return e.Matrix.getSortableRoles()}},t.slicer={name:"slicer",watermarkKey:"slicer",capabilities:e.capabilities.slicer,create:function(){return new e.Slicer}},t.textbox={name:"textbox",capabilities:e.capabilities.textbox,create:function(){return new e.Textbox}},t.waterfallChart={name:"waterfallChart",watermarkKey:"waterfall",capabilities:e.capabilities.waterfallChart,create:function(){return new e.CartesianChart({chartType:12})}},t.cheerMeter={name:"cheerMeter",capabilities:e.CheerMeter.capabilities,create:function(){return new e.CheerMeter}},t.consoleWriter={name:"consoleWriter",capabilities:e.samples.consoleWriterCapabilities,create:function(){return new e.samples.ConsoleWriter}},t.helloIVisual={name:"helloIVisual",capabilities:e.samples.HelloIVisual.capabilities,create:function(){return new e.samples.HelloIVisual}},t.asterPlot={name:"asterPlot",capabilities:e.samples.AsterPlot.capabilities,create:function(){return new e.samples.AsterPlot}},t.owlGauge={name:"owlGauge",watermarkKey:"gauge",capabilities:e.OwlGauge.capabilities,create:function(){return new e.OwlGauge}},t.streamGraph={name:"streamGraph",watermarkKey:"lineChart",capabilities:e.samples.StreamGraph.capabilities,create:function(){return new e.samples.StreamGraph}},t.scriptVisual={name:"scriptVisual",watermarkKey:"scriptvisual",capabilities:e.capabilities.scriptVisual,create:function(){return new e.ScriptVisual({canRefresh:!1})}},t.radarChart={name:"radarChart",capabilities:e.samples.RadarChart.capabilities,create:function(){return new e.samples.RadarChart}},t.dotPlot={name:"dotPlot",capabilities:e.samples.DotPlot.capabilities,create:function(){return new e.samples.DotPlot}},t.histogram={name:"histogram",capabilities:e.samples.Histogram.capabilities,create:function(){return new e.samples.Histogram}},t.areaRangeChart={name:"areaRangeChart",capabilities:e.samples.AreaRangeChart.capabilities,create:function(){return new e.samples.AreaRangeChart}},t.timeline={name:"timeline",capabilities:e.samples.Timeline.capabilities,create:function(){return new e.samples.Timeline}},t.tornadoChart={name:"tornadoChart",capabilities:e.samples.TornadoChart.capabilities,create:function(){return new e.samples.TornadoChart}},t.kpi={name:"kpi",watermarkKey:"kpi",capabilities:e.capabilities.kpi,create:function(){return new e.KPIStatusWithHistory}}}(t=e.plugins||(e.plugins={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=jsCommon.ArrayExtensions,i=function(){function e(e){this.sentimentColors=[{value:"#C0433A"},{value:"#E8D62E"},{value:"#79C75B"}],this.basePickerColors=[{value:"#FFFFFF"},{value:"#000000"},{value:"#00B8AA"},{value:"#374649"},{value:"#FD625E"},{value:"#F2C811"},{value:"#5F6B6D"},{value:"#8AD4EB"},{value:"#FE9666"},{value:"#A66999"}],this.colors=e||r.getDefaultTheme(),this.scales={}}return e.prototype.getColorScaleByKey=function(e){var t=this.scales[e];return void 0===t&&(t=this.createScale(),this.scales[e]=t),t},e.prototype.getNewColorScale=function(){return this.createScale()},e.prototype.getColorByIndex=function(e){return this.colors[e]},e.prototype.getSentimentColors=function(){return this.sentimentColors},e.prototype.getBasePickerColors=function(){return this.basePickerColors},e.prototype.getAllColors=function(){return this.colors},e.prototype.createScale=function(){return a.createFromColors(this.colors)},e}();e.DataColorPalette=i;var a=function(){function e(e){this.scale=e}return e.prototype.getColor=function(e){return this.scale(e)},e.prototype.clearAndRotateScale=function(){var e=this.scale.domain().length,i=t.rotate(this.scale.range(),e);this.scale=d3.scale.ordinal().range(i)},e.prototype.clone=function(){return new e(this.scale.copy())},e.prototype.getDomain=function(){return this.scale.domain()},e.createFromColors=function(t){return new e(d3.scale.ordinal().range(t))},e}();e.D3ColorScale=a;var r=function(){function e(){}return e.getDefaultTheme=function(){if(!e.defaultTheme){e.defaultTheme=[];for(var t=e.defaultBaseColors,i=0;i<e.colorSectorCount;++i)for(var a=0,r=t.length;r>a;++a)e.defaultTheme.push({value:jsCommon.Color.rotate(t[a].value,i/e.colorSectorCount)})}return e.defaultTheme},e.colorSectorCount=12,e.defaultBaseColors=[{value:"#01B8AA"},{value:"#374649"},{value:"#FD625E"},{value:"#F2C80F"},{value:"#5F6B6D"},{value:"#8AD4EB"},{value:"#FE9666"},{value:"#A66999"},{value:"#3599B8"},{value:"#DFBFBF"},{value:"#4AC5BB"},{value:"#5F6B6D"},{value:"#FB8281"},{value:"#F4D25A"},{value:"#7F898A"},{value:"#A4DDEE"},{value:"#FDAB89"},{value:"#B687AC"},{value:"#28738A"},{value:"#A78F8F"},{value:"#168980"},{value:"#293537"},{value:"#BB4A4A"},{value:"#B59525"},{value:"#475052"},{value:"#6A9FB0"},{value:"#BD7150"},{value:"#7B4F71"},{value:"#1B4D5C"},{value:"#706060"},{value:"#0F5C55"},{value:"#1C2325"},{value:"#7D3231"},{value:"#796419"},{value:"#303637"},{value:"#476A75"},{value:"#7E4B36"},{value:"#52354C"},{value:"#0D262E"},{value:"#544848"}],e}()}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(e){this.behaviors=e}return e.prototype.bindEvents=function(e,t){for(var i=this.behaviors,a=0,r=i.length;r>a;a++)i[a].bindEvents(e.layerOptions[a],t);e.clearCatcher.on("click",function(){t.handleClearSelection()})},e.prototype.renderSelection=function(e){for(var t=0,i=this.behaviors;t<i.length;t++){var a=i[t];a.renderSelection(e)}},e}();e.CartesianChartBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(t,i){this.itemLabels=t.itemLabels,this.dataPoints=t.dataPoints,this.interactivityService=t.interactivityService,this.slicerSettings=t.settings,e.SlicerWebBehavior.bindSlicerEvents(t.slicerContainer,this.itemLabels,t.clear,i,this.slicerSettings,this.interactivityService)},t.prototype.renderSelection=function(t){e.SlicerWebBehavior.setSelectionOnSlicerItems(this.itemLabels,this.itemLabels,t,this.interactivityService,this.slicerSettings)},t}();e.HorizontalSlicerWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.bindEvents=function(e,t){this.labelItems=e.labelItems,this.labelItems.on("click",function(e){t.handleSelection(e,d3.event.ctrlKey)})},e.prototype.renderSelection=function(t){t?this.labelItems.style({opacity:function(t){return t.selected?e.DefaultLabelOpacity:e.DimmedLabelOpacity}}):this.labelItems.style({opacity:e.DefaultLabelOpacity})},e.DefaultLabelOpacity=1,e.DimmedLabelOpacity=.6,e}();e.LabelsBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.bindEvents=function(e,t){this.options=e,e&&e.visualBehavior&&e.visualBehaviorOptions&&e.visualBehavior.bindEvents(e.visualBehaviorOptions,t)},e.prototype.renderSelection=function(e){if(this.options.visualBehavior&&this.options.visualBehaviorOptions&&this.options.visualBehavior.renderSelection(e),this.options.dataPointSelection){var t=this.options.dataPointSelection,i=t.filter(function(e){return e.selected});i&&i.data().length>0&&null!=this.options.renderTraceLine?this.options.renderTraceLine(this.options,i.data(),!0):(this.options.svg.selectAll(".traceLine").remove(),this.options.svg.selectAll(".traceBubble").remove())}},e}();e.PlayChartWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(t,i){var a=t.itemContainers;this.itemLabels=t.itemLabels,this.itemInputs=t.itemInputs,this.dataPoints=t.dataPoints,this.interactivityService=t.interactivityService,this.settings=t.settings,e.SlicerWebBehavior.bindSlicerEvents(t.slicerContainer,a,t.clear,i,this.settings,this.interactivityService)},t.prototype.renderSelection=function(t){e.SlicerWebBehavior.setSelectionOnSlicerItems(this.itemInputs,this.itemLabels,t,this.interactivityService,this.settings)},t}();e.VerticalSlicerWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.playChartCapabilities={dataRoles:[{name:"Rows",kind:e.VisualDataRoleKind.Grouping,displayName:"Play / Detail"},{name:"Columns",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend")},{name:"Values",kind:e.VisualDataRoleKind.Measure,displayName:"X / Y / Size"}],objects:{dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}},colorByCategory:{displayName:"Color by Category",type:{bool:!0}},frozenIndex:{type:{numeric:!0}}}},categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),type:{numeric:!0}},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),type:{numeric:!0}},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{formatting:{axisStyle:!0}}}}},valueAxis:{displayName:e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),type:{formatting:{yAxisPosition:!0}}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),type:{numeric:!0}},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),type:{numeric:!0}},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{formatting:{axisStyle:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),type:{formatting:{legendPosition:!0}}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleText"),type:{text:!0}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),type:{fill:{solid:{color:!0}}}}}}},dataViewMappings:[{conditions:[{Rows:{min:1,max:2},Columns:{min:0,max:1},Values:{min:0,max:3}},{Rows:{min:0,max:2},Columns:{min:1,max:1},Values:{min:0,max:3}},{Rows:{min:0,max:2},Columns:{min:0,max:1},Values:{min:1,max:3}}],matrix:{rows:{"for":{"in":"Rows"},dataReductionAlgorithm:{window:{count:1e3}}},columns:{"for":{"in":"Columns"},dataReductionAlgorithm:{top:{count:100}}},values:{"for":{"in":"Values"}}}}],sorting:{custom:{}}},t.playChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(){return"#FFFFFF"}function i(){return{color:t()}}e.getDefaultColor=t,e.getDefaultValues=i}(t=e.CanvasBackgroundHelper||(e.CanvasBackgroundHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e,t){return{m00:1,m01:0,m02:e,m10:0,m11:1,m12:t}}function i(e,t){return{m00:e,m01:0,m02:0,m10:0,m11:t,m12:0}}function a(e){var t=e,i=Math.sin(t),a=Math.cos(t);return{m00:a,m01:-i,m02:0,m10:i,m11:a,m12:0}}function r(e){var t=e.m00*e.m11-e.m01*e.m10,i=1/t;return{m00:e.m11*i,m01:-e.m01*i,m02:(e.m01*e.m12-e.m02*e.m11)*i,m10:-e.m10*i,m11:e.m00*i,m12:-(e.m00*e.m12-e.m10*e.m02)*i}}function n(e,t){return{m00:e.m00*t.m00+e.m01*t.m10,m01:e.m00*t.m01+e.m01*t.m11,m02:e.m00*t.m02+e.m01*t.m12+e.m02,m10:e.m10*t.m00+e.m11*t.m10,m11:e.m10*t.m01+e.m11*t.m11,m12:e.m10*t.m02+e.m11*t.m12+e.m12}}var o=function(){function e(e){this.matrix=e||{m00:1,m01:0,m02:0,m10:0,m11:1,m12:0}}return e.prototype.applyToPoint=function(e){if(!e)return e;var t=this.matrix;return{x:t.m00*e.x+t.m01*e.y+t.m02,y:t.m10*e.x+t.m11*e.y+t.m12}},e.prototype.applyToRect=function(e){if(!e)return e;var t=e.left,i=e.top,a=this.matrix,r=1!==a.m00||1!==a.m11,n=0!==a.m01||0!==a.m10;if(!n&&!r)return{left:t+a.m02,top:i+a.m12,width:e.width,height:e.height};var o,s,l,u,c=e.left+e.width,h=e.top+e.height;if(n){var p=a.m00*t+a.m01*i+a.m02,d=a.m10*t+a.m11*i+a.m12,g=a.m00*t+a.m01*h+a.m02,m=a.m10*t+a.m11*h+a.m12,f=a.m00*c+a.m01*i+a.m02,y=a.m10*c+a.m11*i+a.m12,v=a.m00*c+a.m01*h+a.m02,b=a.m10*c+a.m11*h+a.m12;o=Math.min(p,g,f,v),s=Math.max(p,g,f,v),l=Math.min(d,m,y,b),u=Math.max(d,m,y,b)}else{var p=a.m00*t+a.m02,d=a.m11*i+a.m12,v=a.m00*c+a.m02,b=a.m11*h+a.m12;o=Math.min(p,v),s=Math.max(p,v),l=Math.min(d,b),u=Math.max(d,b)}return{left:o,top:l,width:s-o,height:u-l}},e.prototype.translate=function(e,i){if(0!==e||0!==i){var a=t(e,i);this.matrix=n(this.matrix,a),this._inverse=null}},e.prototype.scale=function(e,t){if(1!==e||1!==t){var a=i(e,t);this.matrix=n(this.matrix,a),this._inverse=null}},e.prototype.rotate=function(e){if(0!==e){var t=a(e);this.matrix=n(this.matrix,t),this._inverse=null}},e.prototype.add=function(e){e&&(this.matrix=n(this.matrix,e.matrix),this._inverse=null)},e.prototype.getInverse=function(){return this._inverse||(this._inverse=new e(r(this.matrix))),this._inverse},e}();e.Transform=o,e.createTranslateMatrix=t,e.createScaleMatrix=i,e.createRotationMatrix=a,e.createInverseMatrix=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e){return e.is(":visible")}e.partiallyVisible=t}(t=e.visibilityHelper||(e.visibilityHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e){return"0px"===e?"none":"solid"}function i(e,t){return"None"===e||0===t?"none":"solid"}function a(e,t){switch(e){case"None":return"0px";case"BottomOnly":return"0px 0px "+t+"px 0px";case"TopOnly":return t+"px 0px 0px 0px";case"LeftOnly":return"0px 0px 0px "+t+"px";case"RightOnly":return"0px "+t+"px 0px 0px";case"TopBottom":return t+"px 0px "+t+"px 0px";case"LeftRight":return"0px "+t+"px 0px "+t+"px";case"Frame":return t+"px";default:return e.replace("1",t.toString())}}e.getBorderStyle=t,e.getBorderStyleWithWeight=i,e.getBorderWidth=a}(t=e.VisualBorderUtil||(e.VisualBorderUtil={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t=e.visuals.NewDataLabelUtils,i=jsCommon.PixelConverter,a=function(){function a(e){this.startingOffset=e.startingOffset,this.maximumOffset=e.maximumOffset,null!=e.offsetIterationDelta&&(this.offsetIterationDelta=e.offsetIterationDelta)}return a.prototype.layout=function(t,i){for(var a=0;a<t.length;a++){var r=t[a];r.hasBeenRendered=!1}for(var n=[],o=[],s=i.viewport,l={labelDataPoints:t,maxNumberOfLabels:t.length},u=new e.LabelArrangeGrid([l],s),c=t.length-1;c>=0;c--){var r=t[c];if(r.isPreferred){var h=t.splice(c,1);o=h.concat(o)}}if(o.length>0&&(n=this.positionLabels(o,i,u)),t.length>0){var p=this.positionLabels(t,i,u);n=n.concat(p)}return n},a.prototype.positionLabels=function(e,t,i){for(var a=[],r=this.offsetIterationDelta,n=this.startingOffset,o=0;n<=this.maximumOffset;){for(var s=0;s<e.length;s++){var l=e[s];if(!l.hasBeenRendered){var u=void 0;u=this.tryPositionForDonut(l,i,t,n),u&&a.push(u)}}n+=r,o+=r}return a},a.prototype.tryPositionForDonut=function(t,i,r,n){var o={x:r.viewport.width/2,y:r.viewport.height/2},s=t.parentShape,l=s.validPositions&&s.validPositions[0]?s.validPositions[0]:void 0;if(!l)return null;var u=a.tryPositionPoint(i,l,t,n,o),c=[];u?t.isTruncated&&(c=this.getLabelPointPositions(t,!0)):c=this.getLabelPointPositions(t,!1);for(var h=0;h<c.length;h++){var p=c[h],d=this.getDataPointByPosition(t,r,p),g=d.parentShape.validPositions[0],m=a.tryPositionPoint(i,g,d,n,o);if(m){u=m,t=d;break}}if(u){i.add(u),t.hasBeenRendered=!0;var f=u.left-o.x;f+=0>f?u.width/2:-(u.width/2);var y=t.parentShape.validPositions[0]===e.NewPointLabelPosition.Right?"start":"end",v={left:f,top:u.top-o.y,height:u.height,width:u.width};return{boundingBox:v,text:t.text,isVisible:!0,fill:t.outsideFill,isInsideParent:!1,identity:t.identity,fontSize:t.fontSize,selected:!1,textAnchor:y,leaderLinePoints:this.getLabelReferenceLineForDonutChart(t,r,v)}}return null},a.tryPositionPoint=function(t,i,a,r,n){void 0===n&&(n=null);var o=e.DataLabelPointPositioner.getLabelRect(a,i,r);return null!=n&&(o.left+=n.x,o.top+=n.y),t.hasConflict(o)?null:o},a.prototype.getLabelPointPositions=function(t,i){var a=t.parentShape,r=a.validPositions[0];if(i){var n=a.point.y;return 0>n?r===e.NewPointLabelPosition.Right?[e.NewPointLabelPosition.AboveRight]:[e.NewPointLabelPosition.AboveLeft]:r===e.NewPointLabelPosition.Right?[e.NewPointLabelPosition.BelowRight]:[e.NewPointLabelPosition.BelowLeft]}return r===e.NewPointLabelPosition.Left?[e.NewPointLabelPosition.AboveLeft,e.NewPointLabelPosition.BelowLeft]:[e.NewPointLabelPosition.BelowRight,e.NewPointLabelPosition.AboveRight]},a.prototype.getDataPointByPosition=function(a,r,n){var o,s=a.donutArcDescriptor,l=s.startAngle+(s.endAngle-s.startAngle)/2,u=r.radius*r.outerArcRadiusRatio;switch(n){case e.NewPointLabelPosition.AboveRight:case e.NewPointLabelPosition.BelowLeft:o=(+s.startAngle+ +l-Math.PI)/2;break;case e.NewPointLabelPosition.AboveLeft:case e.NewPointLabelPosition.BelowRight:o=(+l+ +s.endAngle-Math.PI)/2}var c=[Math.cos(o)*u,Math.sin(o)*u],h=t.getXPositionForDonutLabel(c[0]),p=c[1],d=t.setLabelTextDonutChart(a.donutArcDescriptor,h,r.viewport,r.dataLabelsSettings,a.alternativeScale),g={text:d,fontFamily:t.LabelTextProperties.fontFamily,fontSize:i.fromPoint(r.dataLabelsSettings.fontSize),fontWeight:t.LabelTextProperties.fontWeight},m={width:e.TextMeasurementService.measureSvgTextWidth(g),height:e.TextMeasurementService.measureSvgTextHeight(g)},f=0>h?e.NewPointLabelPosition.Left:e.NewPointLabelPosition.Right,y={point:{x:h,y:p},validPositions:[f],radius:0},v=_.clone(a);return v.arc=o,v.text=d,v.textSize=m,v.parentShape=y,v},a.prototype.getLabelReferenceLineForDonutChart=function(e,i,a){var r,n,o,s=2.05;if(e.arc){var l=e.arc,u=i.radius*i.outerArcRadiusRatio,c=i.radius/2*i.innerArcRadiusRatio;n=[Math.cos(l)*u,Math.sin(l)*u],o=[Math.cos(l)*c,Math.sin(l)*c]}else n=i.outerArc.centroid(e.donutArcDescriptor),o=i.arc.centroid(e.donutArcDescriptor);var h=a.left+e.textSize.width/2;return h+=0>h?t.maxLabelOffset/2:-(t.maxLabelOffset/2),r=[h,a.top+e.textSize.height/2],o[0]*=s,o[1]*=s,[o,n,r]},a}();e.DonutLabelLayout=a}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.PixelConverter,a=t.slicerOrientation.Orientation,r=50,n=80,o=.8,s={itemsContainer:{marginLeft:19,marginRight:19},labelText:{marginRight:2,paddingLeft:8,paddingRight:8,paddingTop:4,paddingBottom:4},navigationButtons:{leftButtonRightMargin:5,rightButtonLeftMargin:5,width:14}},l=function(){function l(e){this.dataStartIndex=0,this.textProperties={fontFamily:"wf_segoe-ui_normal",fontSize:"14px"},e&&(this.behavior=e.behavior),this.domHelper=e.domHelper}return l.prototype.getDefaultValue=function(){return t.SlicerUtil.DefaultValueHandler.getDefaultValue(this.dataView)},l.prototype.getIdentityFields=function(){return t.SlicerUtil.DefaultValueHandler.getIdentityFields(this.dataView)},l.prototype.init=function(e){this.element=e.visualInitOptions.element,this.currentViewport=e.visualInitOptions.viewport;var a=this.hostServices=e.visualInitOptions.host;this.behavior&&(this.interactivityService=t.createInteractivityService(a)),this.loadMoreData=function(){return e.loadMoreData()};var r=document.createElement("div");r.className=u.container["class"];var n=this.container=d3.select(r),o=this.domHelper.createSlicerHeader(this.hostServices);r.appendChild(o),this.header=d3.select(o);var l=this.body=n.append("div").classed(t.SlicerUtil.Selectors.Body["class"]+" "+u.FlexDisplay["class"],!0);return this.leftNavigationArrow=l.append("button").classed(u.NavigationArrow["class"]+" "+u.LeftNavigationArrow["class"],!0).style("margin-right",i.toString(s.navigationButtons.leftButtonRightMargin)),this.itemsContainer=l.append("div").classed(u.ItemsContainer["class"]+" "+u.FlexDisplay["class"],!0),this.rightNavigationArrow=l.append("button").classed(u.NavigationArrow["class"]+" "+u.RightNavigationArrow["class"],!0).style("margin-left",i.toString(s.navigationButtons.rightButtonLeftMargin)),this.element.get(0).appendChild(r),this.bindNavigationEvents(),this.interactivityService},l.prototype.render=function(e){var t=e.data;this.currentViewport=e.viewport;var i=e.dataView;i&&t&&(this.data=t,this.dataView=i,this.leftScrollRequested=!1,this.calculateAndSetMaxItemWidth(),this.renderCore())},l.prototype.renderCore=function(){var e=this.data;if(e&&e.slicerDataPoints){var t=this.itemsToDisplay=this.calculateVisibleItemCount();if(0!==t){var i=e.slicerDataPoints.slice(this.dataStartIndex,this.dataStartIndex+t),a=e.slicerSettings;this.updateStyle(e,t),this.renderItems(e,i,t,a),this.bindInteractivityService(e),this.dataStartIndex+t>=e.slicerDataPoints.length*o&&this.loadMoreData()}}},l.prototype.updateStyle=function(e,t){var a=this.currentViewport,r=e.slicerSettings,n=this.domHelper;this.container.classed(u.MultiSelectEnabled["class"],!e.slicerSettings.selection.singleSelect).style({width:i.toString(a.width),height:i.toString(a.height)}),n.styleSlicerHeader(this.header,r,e.categorySourceName);var o=n.getHeaderTextProperties(r),s=this.bodyViewport=n.getSlicerBodyViewport(a,r,o);this.body.style({height:i.toString(s.height),width:i.toString(s.width)}),this.rightNavigationArrow.classed("show",this.dataStartIndex+t<=this.data.slicerDataPoints.length-1),this.leftNavigationArrow.classed("show",this.dataStartIndex>0)},l.prototype.renderItems=function(a,r,n,o){var l=this,u=s,c=this.currentViewport,h=this.bodyViewport,p=c.width-(u.itemsContainer.marginLeft+u.itemsContainer.marginRight);this.itemsContainer.style({width:i.toString(p),height:i.toString(h.height)});var d=this.itemsContainer.selectAll(t.SlicerUtil.Selectors.LabelText.selector).data(r,function(e){return _.indexOf(a.slicerDataPoints,e)});d.enter().append("div").classed(t.SlicerUtil.Selectors.LabelText["class"],!0),d.order(),d.attr("title",function(e){return e.tooltip}).text(function(e){return e.value});var g=h.height-(u.labelText.paddingBottom+u.labelText.paddingTop),m=u.labelText.paddingLeft+u.labelText.paddingRight,f=p-(n*m+(n-1)*u.labelText.marginRight),y=f/n;d.style({"padding-left":i.toString(u.labelText.paddingLeft),"padding-right":i.toString(u.labelText.paddingRight),"padding-top":i.toString(u.labelText.paddingTop),"padding-bottom":i.toString(u.labelText.paddingBottom),"font-family":this.textProperties.fontFamily,"margin-right":function(e,t){return l.isLastRowItem(t,n)?"0px":i.toString(u.labelText.marginRight)},width:i.toString(y),height:i.toString(g)}),this.domHelper.setSlicerTextStyle(d,o);var v=this.element.find(t.SlicerUtil.Selectors.LabelText.selector);v.each(function(t,i){e.TextMeasurementService.wordBreakOverflowingText(i,y,g)}),d.exit().remove()},l.prototype.bindInteractivityService=function(e){if(this.interactivityService&&this.body){var i=this.body,r=i.selectAll(u.ItemsContainer.selector),n=i.selectAll(t.SlicerUtil.Selectors.LabelText.selector),o=this.header.select(t.SlicerUtil.Selectors.Clear.selector),s={dataPoints:e.slicerDataPoints,slicerContainer:this.container,itemsContainer:r,itemLabels:n,clear:o,interactivityService:this.interactivityService,settings:e.slicerSettings},l={behaviorOptions:s,orientation:a.Horizontal};this.interactivityService.bind(e.slicerDataPoints,this.behavior,l,{overrideSelectionFromData:!0,hasSelectionOverride:e.hasSelectionOverride}),t.SlicerWebBehavior.styleSlicerItems(this.itemsContainer.selectAll(t.SlicerUtil.Selectors.LabelText.selector),this.interactivityService.hasSelection(),this.interactivityService.isSelectionModeInverted())}else t.SlicerWebBehavior.styleSlicerItems(this.itemsContainer.selectAll(t.SlicerUtil.Selectors.LabelText.selector),!1,!1)},l.prototype.calculateVisibleItemCount=function(){var e=this.getDataPointsCount();if(0===e)return 0;var t=0,i=s.navigationButtons;this.normalizePosition(this.data.slicerDataPoints),t+=i.leftButtonRightMargin+i.rightButtonLeftMargin+2*i.width;var a=1;return a=this.leftScrollRequested?this.calculateNumberOfItemsOnLeftNavigation(t):this.calculateNumberOfItemsOnRightNavigation(t)},l.prototype.calculateNumberOfItemsOnLeftNavigation=function(e){var t=0,i=this.dataStartIndex,a=this.currentViewport.width-e,r=this.getNumberOfItemsToDisplay(a);return i=t>i-r?t:i-r+1,this.dataStartIndex=i,r},l.prototype.calculateNumberOfItemsOnRightNavigation=function(e){var t=this.dataStartIndex,i=this.data.slicerDataPoints,a=i.length-1,r=this.currentViewport.width-e,n=this.getNumberOfItemsToDisplay(r);return t+n>a&&(t=a-n+1),this.dataStartIndex=t,n},l.prototype.calculateTotalItemWidth=function(){return this.maxItemWidth+s.labelText.paddingLeft+s.labelText.paddingRight+s.labelText.marginRight},l.prototype.normalizePosition=function(e){var t=this.dataStartIndex;this.dataStartIndex=Math.min(t,e.length-1),this.dataStartIndex=Math.max(t,0)},l.prototype.bindNavigationEvents=function(){this.registerMouseWheelScrollEvents(),this.registerMouseClickEvents()},l.prototype.registerMouseClickEvents=function(){var e=this,t=this.container.selectAll(u.RightNavigationArrow.selector),i=this.container.selectAll(u.LeftNavigationArrow.selector);t.on("click",function(){e.scrollRight()}),i.on("click",function(){e.scrollLeft();
})},l.prototype.registerMouseWheelScrollEvents=function(){var e=this,t=this.body.node();t.addEventListener("mousewheel",function(t){e.onMouseWheel(t.wheelDelta)}),t.addEventListener("DOMMouseScroll",function(t){e.onMouseWheel(t.detail)})},l.prototype.onMouseWheel=function(e){0>e?this.scrollRight():e>0&&this.scrollLeft()},l.prototype.scrollRight=function(){var e=this.itemsToDisplay,t=this.dataStartIndex;e+t>=this.data.slicerDataPoints.length||(t+=1===e?e:e-1,this.dataStartIndex=t,this.leftScrollRequested=!1,this.renderCore())},l.prototype.scrollLeft=function(){var e=this.itemsToDisplay,t=this.dataStartIndex;0!==t&&(1===e&&(t-=e),this.dataStartIndex=t,this.leftScrollRequested=!0,this.renderCore())},l.prototype.isLastRowItem=function(e,t){return e===t-1},l.prototype.getScaledTextWidth=function(e){return e/jsCommon.TextSizeDefaults.TextSizeMin*n},l.prototype.calculateAndSetMaxItemWidth=function(){var t=this.data,a=t.slicerDataPoints,n=this.getDataPointsCount();if(0===n)return void(this.maxItemWidth=0);var o=Math.min(n,r),s=0,l=jQuery.extend(!0,{},this.textProperties);l.fontSize=i.fromPoint(t.slicerSettings.slicerText.textSize);for(var u=jsCommon.WordBreaker.getMaxWordWidth,c=0;o>c;c++){var h=a[c].value;l.text=h,s=Math.max(s,u(h,e.TextMeasurementService.measureSvgTextWidth,l))}this.maxItemWidth=Math.min(s,this.getScaledTextWidth(t.slicerSettings.slicerText.textSize))},l.prototype.getNumberOfItemsToDisplay=function(e){var t=this.calculateTotalItemWidth();if(0===t)return 0;var i=this.getDataPointsCount(),a=Math.min(i,Math.round(e/t));return Math.max(a,1)},l.prototype.getDataPointsCount=function(){return _.size(this.data.slicerDataPoints)},l}();t.HorizontalSlicerRenderer=l;var u;!function(e){var t=jsCommon.CssConstants.createClassAndSelector;e.container=t("horizontalSlicerContainer"),e.ItemsContainer=t("slicerItemsContainer"),e.NavigationArrow=t("navigationArrow"),e.LeftNavigationArrow=t("left"),e.RightNavigationArrow=t("right"),e.MultiSelectEnabled=t("isMultiSelectEnabled"),e.FlexDisplay=t("flexDisplay")}(u||(u={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.PixelConverter,a=t.slicerOrientation.Orientation,r=function(){function e(e){this.textProperties={fontFamily:"wf_segoe-ui_normal, helvetica, arial, sans-serif",fontSize:"14px"},e&&(this.behavior=e.behavior),this.renderAsImage=$.noop,this.domHelper=e.domHelper}return e.prototype.getDefaultValue=function(){return t.SlicerUtil.DefaultValueHandler.getDefaultValue(this.dataView)},e.prototype.getIdentityFields=function(){return t.SlicerUtil.DefaultValueHandler.getIdentityFields(this.dataView)},e.prototype.init=function(e){var a=this;this.element=e.visualInitOptions.element,this.currentViewport=e.visualInitOptions.viewport;var r,o=this.hostServices=e.visualInitOptions.host,s=this.settings=t.Slicer.DefaultStyleProperties(),l=this.domHelper,u=l.getSlicerBodyViewport(this.currentViewport,s,this.textProperties);this.behavior&&(r=t.createInteractivityService(o));var c=document.createElement("div");c.className=n.Container["class"];var h=this.container=d3.select(c),p=l.createSlicerHeader(o);c.appendChild(p),this.header=d3.select(p),this.body=h.append("div").classed(t.SlicerUtil.Selectors.Body["class"],!0).style({height:i.toString(u.height),width:i.toString(u.width)});var d=function(e){a.onEnterSelection(e)},g=function(e){a.onUpdateSelection(e,r)},m=function(e){e.remove()},f={rowHeight:l.getRowHeight(s,this.textProperties),enter:d,exit:m,update:g,loadMoreData:function(){return e.loadMoreData()},scrollEnabled:!0,viewport:l.getSlicerBodyViewport(this.currentViewport,s,this.textProperties),baseContainer:this.body};return this.listView=t.ListViewFactory.createListView(f),this.element.get(0).appendChild(c),r},e.prototype.render=function(e){var t=this.data=e.data;this.currentViewport=e.viewport;var i=e.dataView;if(i&&t){this.dataView=i,this.renderAsImage=e.renderAsImage;var a=this.settings=t.slicerSettings,r=this.domHelper;r.updateSlicerBodyDimensions(this.currentViewport,this.body,a),this.updateSelectionStyle(),this.listView.viewport(r.getSlicerBodyViewport(this.currentViewport,a,this.textProperties)).rowHeight(r.getRowHeight(a,this.textProperties)).data(t.slicerDataPoints,function(e){return $.inArray(e,t.slicerDataPoints)},e.resetScrollbarPosition)}},e.prototype.updateSelectionStyle=function(){var e=this.settings;this.container.classed("isMultiSelectEnabled",e&&e.selection&&!e.selection.singleSelect)},e.prototype.onEnterSelection=function(e){var a=this.settings,r=e.append("li").classed(n.ItemContainer["class"],!0),o=r.append("div").classed(n.Input["class"],!0);o.append("input").attr("type","checkbox"),o.append("span").classed(n.Checkbox["class"],!0).style(s.buildCheckboxStyle(a)),r.append("span").classed(t.SlicerUtil.Selectors.LabelText["class"],!0).style("font-size",i.fromPoint(a.slicerText.textSize))},e.prototype.onUpdateSelection=function(e,i){var r=this,o=this.settings,l=this.data;if(l&&o){var u=this.domHelper;u.styleSlicerHeader(this.header,o,l.categorySourceName);var c=e.selectAll(t.SlicerUtil.Selectors.LabelText.selector);c.html(function(e){return r.renderAsImage(e.value)?'<img src="'+e.value+'" />':e.value}),u.setSlicerTextStyle(c,o);var h=e.selectAll(n.Input.selector).selectAll("span");if(h.style(s.buildCheckboxStyle(o)),i&&this.body){var p=this.body.attr("width",this.currentViewport.width),d=p.selectAll(n.ItemContainer.selector),g=p.selectAll(t.SlicerUtil.Selectors.LabelText.selector),m=p.selectAll(n.Input.selector),f=this.header.select(t.SlicerUtil.Selectors.Clear.selector),y={dataPoints:l.slicerDataPoints,slicerContainer:this.container,itemContainers:d,itemLabels:g,itemInputs:m,clear:f,interactivityService:i,settings:l.slicerSettings},v={behaviorOptions:y,orientation:a.Vertical};i.bind(l.slicerDataPoints,this.behavior,v,{overrideSelectionFromData:!0,hasSelectionOverride:l.hasSelectionOverride,slicerDefaultValueHandler:this}),t.SlicerWebBehavior.styleSlicerItems(e.select(n.Input.selector),l.hasSelectionOverride,i.isSelectionModeInverted())}else t.SlicerWebBehavior.styleSlicerItems(e.select(n.Input.selector),!1,!1)}},e}();t.VerticalSlicerRenderer=r;var n;!function(e){var t=jsCommon.CssConstants.createClassAndSelector;e.Container=t("slicerContainer"),e.ItemContainer=t("slicerItemContainer"),e.Input=t("slicerCheckbox"),e.Checkbox=t("checkbox")}(n||(n={}));var o;!function(e){e.MinimumSize=8,e.Size=13,e.SizeRange=e.Size-e.MinimumSize}(o||(o={}));var s;!function(a){function r(e){var a=n(e),r=t.SVGUtil.transformOrigin("left","center");return{transform:a,"transform-origin":r,"font-size":i.fromPoint(e.slicerText.textSize)}}function n(i){var a=jsCommon.TextSizeDefaults.getScale(i.slicerText.textSize),r=o.MinimumSize+o.SizeRange*a,n=r/o.Size,s=e.Double.toIncrement(n,.05);return t.SVGUtil.scale(s)}a.buildCheckboxStyle=r}(s||(s={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){!function(e){e[e.Matrix=0]="Matrix",e[e.Table=1]="Table"}(e.TablixType||(e.TablixType={})),e.TablixType}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.AutoSizeColumnWidthDefault=!0;var i=function(){function i(e,t,i){this.columnWidths=[],this.tablixColumnWidthsObject=[],this.tablixQueryNames=[],this.dataView=e,this.matrixLeafNodes=i,this.isMatrix=t,this.suppressNotification=!1,this.currentPersistedWidths=[],this.visualObjectInstancesToPersist=[],this.callHostPersistProperties=!1,this.dataViewUpdated=!1}return i.prototype.getColumnWidths=function(){return this.columnWidths},i.prototype.getTablixColumnWidthsObject=function(){return this.tablixColumnWidthsObject},i.prototype.updateDataView=function(e,t){this.dataView=e,this.matrixLeafNodes=t,this.dataViewUpdated=!0},i.prototype.getVisualObjectInstancesToPersist=function(){return this.visualObjectInstancesToPersist},i.prototype.persistColumnWidthsOnHost=function(){return this.callHostPersistProperties},i.prototype.getTablixQueryNames=function(){return this.tablixQueryNames},Object.defineProperty(i.prototype,"suppressOnDataChangedNotification",{get:function(){return this.suppressNotification},set:function(e){this.suppressNotification=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnWidthResizeCallback",{get:function(){return this.columnResizeCallback},set:function(e){this.columnResizeCallback=e},enumerable:!0,configurable:!0}),i.prototype.getPersistedCellWidth=function(e){var t=this.getColumnWidths();return!_.isEmpty(t)&&e<t.length?t[e]:void 0},i.prototype.deserializeTablixColumnWidths=function(){var e=this.dataView&&this.dataView.metadata&&this.dataView.metadata.columns;if(e){var t=this.shouldAutoSizeColumnWidth();void 0===this.previousAutoColumnSizePropertyValue||this.previousAutoColumnSizePropertyValue||this.previousAutoColumnSizePropertyValue===t?(this.deserializeColumnWidths(e),this.callHostPersistProperties=!1):(this.columnWidths=[],this.removePersistedVisualObjectInstances(),this.tablixColumnWidthsObject=[],this.callHostPersistProperties=!0),this.previousAutoColumnSizePropertyValue=t}},i.prototype.columnWidthChanged=function(e,t){if(this.populateTablixQueryNames(),0!==this.tablixQueryNames.length){for(var i=this.isMatrix?e:Math.max(e-1,0),a={queryName:this.tablixQueryNames[i],width:t},r=!1,n=0,o=this.tablixColumnWidthsObject.length;o>n;n++)this.tablixColumnWidthsObject[n].queryName===a.queryName&&(this.tablixColumnWidthsObject[n]=a,r=!0);r||this.tablixColumnWidthsObject.push(a),this.suppressNotification=!this.isMatrix,this.generateVisualObjectInstancesToPersist(),this.callHostPersistProperties=!0,!this.shouldAutoSizeColumnWidth()&&this.currentPersistedWidths.length>0&&e<this.currentPersistedWidths.length&&(this.currentPersistedWidths[e]=t)}},i.prototype.persistAllColumnWidths=function(e){if(!this.shouldAutoSizeColumnWidth()&&this.dataViewUpdated){var t=!0;_.isEqual(e,this.currentPersistedWidths)?t=!1:(this.currentPersistedWidths=e,this.suppressNotification=!0);var i=this.isMatrix?e:e.slice(1,e.length),a=[];if(this.tablixQueryNames.length!==i.length&&(t=!1),!t)return this.suppressNotification=!1,void(this.callHostPersistProperties=!1);for(var r=0,n=i.length;n>r;r++){for(var o={queryName:this.tablixQueryNames[r],width:i[r]},s=0,l=this.tablixColumnWidthsObject;s<l.length;s++){var u=l[s];u.queryName===o.queryName&&(o.width=u.width)}a.push(o)}this.tablixColumnWidthsObject=a,this.generateVisualObjectInstancesToPersist(),this.callHostPersistProperties=!0}},i.prototype.shouldAutoSizeColumnWidth=function(){var e=this.dataView.metadata.objects;return e&&e[i.autoSizeWidthProp.objectName]?e[i.autoSizeWidthProp.objectName][i.autoSizeWidthProp.propertyName]!==!1:t.AutoSizeColumnWidthDefault},i.prototype.getAutoSizeColumnWidthObject=function(){return{selector:null,objectName:"general",properties:{autoSizeColumnWidth:this.shouldAutoSizeColumnWidth()}}},i.prototype.generateVisualObjectInstancesToPersist=function(){this.visualObjectInstancesToPersist={merge:[this.getAutoSizeColumnWidthObject()]};for(var e=0,t=this.tablixColumnWidthsObject;e<t.length;e++){var i=t[e],a=i.queryName;a&&this.visualObjectInstancesToPersist.merge.push({selector:{metadata:a},objectName:"general",properties:{columnWidth:i.width}})}},i.prototype.removePersistedVisualObjectInstances=function(){this.visualObjectInstancesToPersist={merge:[this.getAutoSizeColumnWidthObject()],remove:[]};for(var e=0,t=this.tablixColumnWidthsObject;e<t.length;e++){var i=t[e];this.visualObjectInstancesToPersist.remove.push({selector:{metadata:i.queryName},objectName:"general",properties:{columnWidth:void 0}})}},i.prototype.deserializeColumnWidths=function(t){if(this.columnWidths.length=0,this.tablixColumnWidthsObject.length=0,this.populateTablixQueryNames(),0!==this.tablixQueryNames.length)for(var a=0;a<t.length;a++){var r=t[a],n=e.DataViewObjects.getValue(r.objects,i.columnWidthProp);if(null!==n&&void 0!==n)for(var o=0,s=this.tablixQueryNames.length;s>o;o++){var l=this.tablixQueryNames[o];if(r.queryName===l){var u=n,c=this.isMatrix?o:o+1;this.columnWidths[c]=u,this.tablixColumnWidthsObject.push({queryName:l,width:u})}}}},i.prototype.populateTablixQueryNames=function(){this.isMatrix?this.getMatrixQueryNames():this.getTableQueryNames()},i.prototype.getTableQueryNames=function(){this.tablixQueryNames.length=0;for(var e=this.dataView.table.columns,t=0;t<e.length;t++){var i=e[t];this.tablixQueryNames.push(i.queryName)}},i.prototype.getMatrixQueryNames=function(){this.tablixQueryNames.length=0;for(var e=this.dataView.matrix.rows,t=0,i=e.levels;t<i.length;t++)for(var a=i[t],r=0,n=a.sources;r<n.length;r++){var o=n[r];this.tablixQueryNames.push(o.queryName)}if(this.matrixLeafNodes)for(var s=0,l=this.matrixLeafNodes;s<l.length;s++){var u=l[s];this.tablixQueryNames.push(u.queryName)}},i.columnWidthProp={objectName:"general",propertyName:"columnWidth"},i.autoSizeWidthProp={objectName:"general",propertyName:"autoSizeColumnWidth"},i}();t.TablixColumnWidthManager=i}(i=t.controls||(t.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));