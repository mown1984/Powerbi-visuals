var powerbi;!function(e){var t;!function(e){var t=function(){function e(e,t){this.x=e||0,this.y=t||0}return e}();e.Point=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(e,t,i,a){this.left=e||0,this.top=t||0,this.width=i||0,this.height=a||0}return e}();e.Rect=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(e,t,i,a,r){return void 0===a&&(a=!1),void 0===r&&(r=n.Top),t?new u(e):new s(e,r,i,a)}var a=jsCommon.CssConstants.createClassAndSelector,r=jsCommon.PixelConverter;!function(e){e[e.Box=0]="Box",e[e.Circle=1]="Circle",e[e.Line=2]="Line"}(t.LegendIcon||(t.LegendIcon={}));t.LegendIcon;!function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom",e[e.Right=2]="Right",e[e.Left=3]="Left",e[e.None=4]="None",e[e.TopCenter=5]="TopCenter",e[e.BottomCenter=6]="BottomCenter",e[e.RightCenter=7]="RightCenter",e[e.LeftCenter=8]="LeftCenter"}(t.LegendPosition||(t.LegendPosition={}));var n=t.LegendPosition;t.legendProps={show:"show",position:"position",titleText:"titleText",showTitle:"showTitle",labelColor:"labelColor",fontSize:"fontSize"},t.createLegend=i;var o;!function(e){function t(e){switch(e){case n.Left:case n.LeftCenter:return!0;default:return!1}}function i(e){switch(e){case n.Top:case n.TopCenter:return!0;default:return!1}}function a(t,i){var a=i.getMargins(),r=i.getOrientation();t.style({left:e.isLeft(r)?a.width+"px":null,top:e.isTop(r)?a.height+"px":null})}e.isLeft=t,e.isTop=i,e.positionChartArea=a}(o=t.Legend||(t.Legend={}));var s=function(){function i(e,i,a,r){this.legendDataStartIndex=0,this.arrowPosWindow=1,this.lastCalculatedWidth=0,this.visibleLegendWidth=0,this.visibleLegendHeight=0,this.legendFontSizeMarginDifference=0,this.legendFontSizeMarginValue=0,this.svg=d3.select(e.get(0)).append("svg").style("position","absolute"),this.svg.style("display","inherit"),this.svg.classed("legend",!0),a&&(this.clearCatcher=t.appendClearCatcher(this.svg)),this.group=this.svg.append("g").attr("id","legendGroup"),this.interactivityService=a,this.isScrollable=r,this.element=e,this.changeOrientation(i),this.parentViewport={height:0,width:0},this.calculateViewport(),this.updateLayout()}return i.prototype.updateLayout=function(){var e=this.viewport,t=this.orientation;this.svg.attr({height:e.height||(t===n.None?0:this.parentViewport.height),width:e.width||(t===n.None?0:this.parentViewport.width)});var i=t===n.Right||t===n.RightCenter,a=t===n.Bottom||t===n.BottomCenter;this.svg.style({left:i?this.parentViewport.width-e.width+"px":null,top:a?this.parentViewport.height-e.height+"px":null})},i.prototype.calculateViewport=function(){switch(this.orientation){case n.Top:case n.Bottom:case n.TopCenter:case n.BottomCenter:var e=r.fromPointToPixel(this.data&&this.data.fontSize?this.data.fontSize:i.DefaultFontSizeInPt),t=i.TopLegendHeight+(e-i.DefaultFontSizeInPt);return void(this.viewport={height:t,width:0});case n.Right:case n.Left:case n.RightCenter:case n.LeftCenter:var a=this.lastCalculatedWidth?this.lastCalculatedWidth:this.parentViewport.width*i.LegendMaxWidthFactor;return void(this.viewport={height:0,width:a});case n.None:this.viewport={height:0,width:0}}},i.prototype.getMargins=function(){return this.viewport},i.prototype.isVisible=function(){return this.orientation!==n.None},i.prototype.changeOrientation=function(e){e?this.orientation=e:this.orientation=n.Top,this.svg.attr("orientation",e)},i.prototype.getOrientation=function(){return this.orientation},i.prototype.drawLegend=function(t,i){for(var a=e.Prototype.inherit(t),r=[],n=0,o=t.dataPoints;n<o.length;n++){var s=o[n];r.push(e.Prototype.inherit(s))}a.dataPoints=r,this.setTooltipToLegendItems(a),this.drawLegendInternal(a,i,!0)},i.prototype.drawLegendInternal=function(a,o,s){this.parentViewport=o,this.data=a,this.interactivityService&&this.interactivityService.applySelectionStateToData(a.dataPoints),0===a.dataPoints.length&&this.changeOrientation(n.None),this.getOrientation()===n.None&&(a.dataPoints=[]);var l=this.element.children(".mapControl");l.length>0&&!this.isTopOrBottom(this.orientation)&&l.css("display","inline-block"),this.calculateViewport();var u=this.calculateLayout(a,s),c=u.title,h=c?[c]:[],d=this.interactivityService&&e.visuals.dataHasSelection(a.dataPoints),p=this.group;if(this.isCentered(this.orientation)){var g=0;this.isTopOrBottom(this.orientation)?(g=Math.max(0,(this.parentViewport.width-this.visibleLegendWidth)/2),p.attr("transform",t.SVGUtil.translate(g,0))):(g=Math.max((this.parentViewport.height-this.visibleLegendHeight)/2),p.attr("transform",t.SVGUtil.translate(0,g)))}else p.attr("transform",null);var m=p.selectAll(i.LegendTitle.selector).data(h);m.enter().append("text").classed(i.LegendTitle["class"],!0),m.style({fill:a.labelColor,"font-size":r.fromPoint(a.fontSize),"font-family":i.DefaultTitleFontFamily}).text(function(e){return e.text}).attr({x:function(e){return e.x},y:function(e){return e.y}}).append("title").text(a.title),m.exit().remove();var f=a.dataPoints.slice(this.legendDataStartIndex,this.legendDataStartIndex+u.numberOfItems),y=p.selectAll(i.LegendItem.selector).data(f,function(e){return e.identity.getKey()}),v=y.enter().append("g").classed(i.LegendItem["class"],!0);if(v.append("circle").classed(i.LegendIcon["class"],!0),v.append("text").classed(i.LegendText["class"],!0),v.append("title").text(function(e){return e.tooltip}),v.style({"font-family":i.DefaultFontFamily}),y.select(i.LegendIcon.selector).attr({cx:function(e,t){return e.glyphPosition.x},cy:function(e){return e.glyphPosition.y},r:i.LegendIconRadius}).style({fill:function(e){return d&&!e.selected?t.LegendBehavior.dimmedLegendColor:e.color}}),y.select("title").text(function(e){return e.tooltip}),y.select(i.LegendText.selector).attr({x:function(e){return e.textPosition.x},y:function(e){return e.textPosition.y}}).text(function(e){return e.label}).style("fill",a.labelColor).style("font-size",r.fromPoint(a.fontSize)),this.interactivityService){var b=y.select(i.LegendIcon.selector),C={legendItems:y,legendIcons:b,clearCatcher:this.clearCatcher};this.interactivityService.bind(a.dataPoints,new t.LegendBehavior,C,{isLegend:!0})}y.exit().remove(),this.drawNavigationArrows(u.navigationArrows),this.updateLayout()},i.prototype.normalizePosition=function(e){this.legendDataStartIndex>=e.length&&(this.legendDataStartIndex=e.length-1),this.legendDataStartIndex<0&&(this.legendDataStartIndex=0)},i.prototype.calculateTitleLayout=function(t){var a=0,r=!_.isEmpty(t);if(r){var n,o=this.isTopOrBottom(this.orientation);if(o){var s=this.legendFontSizeMarginValue>i.DefaultTextMargin?i.TextAndIconPadding+this.legendFontSizeMarginDifference:i.TextAndIconPadding,l=i.TextAndIconPadding+i.LegendIconRadius,u=i.LegendIconRadius+s+l;n=this.parentViewport.width*i.LegendMaxWidthFactor-u-i.LegendEdgeMariginWidth}else n=this.legendFontSizeMarginValue<i.DefaultTextMargin?i.MaxTitleLength:i.MaxTitleLength+i.DefaultMaxLegendFactor*this.legendFontSizeMarginDifference;var c=i.getTextProperties(!0,t,this.data.fontSize),h=t;return a=e.TextMeasurementService.measureSvgTextWidth(c),a>n&&(h=e.TextMeasurementService.getTailoredTextOrDefault(c,n),a=n),o&&(a+=i.TitlePadding),{x:0,y:0,text:h,width:a}}return null},i.prototype.calculateLayout=function(e,t){var a=e.dataPoints;if(0===e.dataPoints.length)return{startIndex:null,numberOfItems:0,title:null,navigationArrows:[]};this.legendFontSizeMarginValue=r.fromPointToPixel(this.data&&void 0!==this.data.fontSize?this.data.fontSize:i.DefaultFontSizeInPt),this.legendFontSizeMarginDifference=this.legendFontSizeMarginValue-i.DefaultTextMargin,this.normalizePosition(a),this.legendDataStartIndex<a.length&&(a=a.slice(this.legendDataStartIndex));var n,o,s=this.calculateTitleLayout(e.title);return this.isTopOrBottom(this.orientation)?(n=this.isScrollable?this.calculateHorizontalNavigationArrowsLayout(s):[],o=this.calculateHorizontalLayout(a,s,n)):(n=this.isScrollable?this.calculateVerticalNavigationArrowsLayout(s):[],o=this.calculateVerticalLayout(a,s,n,t)),{numberOfItems:o,title:s,navigationArrows:n}},i.prototype.updateNavigationArrowLayout=function(e,t,i){0===this.legendDataStartIndex&&e.shift();var a=this.arrowPosWindow;this.arrowPosWindow=i,e&&e.length>0&&this.arrowPosWindow===t&&(this.arrowPosWindow=a,e.length=e.length-1)},i.prototype.calculateHorizontalNavigationArrowsLayout=function(e){var a=i.LegendArrowHeight,r=i.LegendArrowWidth,n=i.LegendArrowTranslateY,o=[],s=e?e.x+e.width:0,l=t.SVGUtil.createArrow(r,a,180),u=t.SVGUtil.createArrow(r,a,0);return o.push({x:s,y:n,path:l.path,rotateTransform:l.transform,type:1}),o.push({x:this.parentViewport.width-r,y:n,path:u.path,rotateTransform:u.transform,type:0}),o},i.prototype.calculateVerticalNavigationArrowsLayout=function(e){var a=i.LegendArrowHeight,r=i.LegendArrowWidth,n=[],o=40,s=t.SVGUtil.createArrow(r,a,270),l=t.SVGUtil.createArrow(r,a,90);return n.push({x:o,y:a+i.LegendArrowOffset/2,path:s.path,rotateTransform:s.transform,type:1}),n.push({x:o,y:this.parentViewport.height-a,path:l.path,rotateTransform:l.transform,type:0}),n},i.prototype.calculateHorizontalLayout=function(t,a,r){var n=4,o=11,s=this.legendFontSizeMarginDifference>0,l=s?i.TextAndIconPadding+this.legendFontSizeMarginDifference:i.TextAndIconPadding,u=i.LegendIconRadius+l+n,c=o+(s?this.legendFontSizeMarginDifference:0),h=0,d=2*i.LegendIconRadius+3*l,p=t.length;a&&(h=a.width,a.y=u),this.legendDataStartIndex>0&&(h+=i.LegendArrowOffset);var g=t.length,m=this.parentViewport.width,f=g>0?(m-h-d*g)/g|0:0;f=f>i.MaxTextLength?f:i.MaxTextLength;for(var y=0;g>y;y++){var v=t[y];v.glyphPosition={x:h+i.LegendIconRadius,y:c},v.textPosition={x:h+u,y:u};var b=i.getTextProperties(!1,v.label,this.data.fontSize),C=e.TextMeasurementService.measureSvgTextWidth(b),S=0;if(f>C)S=d+C;else{var x=e.TextMeasurementService.getTailoredTextOrDefault(b,f);v.label=x,S=d+f}if(h+=S,h>m){p=y;break}}return this.visibleLegendWidth=h,this.updateNavigationArrowLayout(r,g,p),p},i.prototype.calculateVerticalLayout=function(t,a,r,n){var o=this,s=this.legendFontSizeMarginDifference>0,l=s?this.legendFontSizeMarginDifference:0,u=20+l,c=15+1.3*l,h=u,d=4+1.3*l,p=i.TextAndIconPadding+i.LegendIconRadius,g=i.LegendIconRadius+i.TextAndIconPadding+p,m=n?this.parentViewport.width*i.LegendMaxWidthFactor-g-i.LegendEdgeMariginWidth:this.lastCalculatedWidth-g-i.LegendEdgeMariginWidth,f=t.length,y=0,v=this.parentViewport.height;a&&(h+=c,a.x=i.TextAndIconPadding,a.y=c,y=a.width||0),this.legendDataStartIndex>0&&(h+=i.LegendArrowOffset);for(var b=t.length,C=0;b>C;C++){var S=t[C];S.glyphPosition={x:p,y:h+l},S.textPosition={x:g,y:h+d};var x=i.getTextProperties(!1,S.label,this.data.fontSize),w=e.TextMeasurementService.measureSvgTextWidth(x);if(w>y&&(y=w),w>m){var D=e.TextMeasurementService.getTailoredTextOrDefault(x,m);S.label=D}if(h+=u,h>v){f=C;break}}return n?m>y?this.lastCalculatedWidth=this.viewport.width=Math.ceil(y+g+i.LegendEdgeMariginWidth):this.lastCalculatedWidth=this.viewport.width=Math.ceil(this.parentViewport.width*i.LegendMaxWidthFactor):this.viewport.width=this.lastCalculatedWidth,this.visibleLegendHeight=h,r.forEach(function(e){return e.x=o.lastCalculatedWidth/2}),this.updateNavigationArrowLayout(r,b,f),f},i.prototype.drawNavigationArrows=function(e){var a=this,r=this.group.selectAll(i.NavigationArrow.selector).data(e);r.enter().append("g").on("click",function(e){var t=a.legendDataStartIndex;a.legendDataStartIndex=0===e.type?t+a.arrowPosWindow:t-a.arrowPosWindow,a.drawLegendInternal(a.data,a.parentViewport,!1)}).classed(i.NavigationArrow["class"],!0).append("path"),r.attr("transform",function(e){return t.SVGUtil.translate(e.x,e.y)}).select("path").attr({d:function(e){return e.path},transform:function(e){return e.rotateTransform}}),r.exit().remove()},i.prototype.isTopOrBottom=function(e){switch(e){case n.Top:case n.Bottom:case n.BottomCenter:case n.TopCenter:return!0;default:return!1}},i.prototype.isCentered=function(e){switch(e){case n.BottomCenter:case n.LeftCenter:case n.RightCenter:case n.TopCenter:return!0;default:return!1}},i.prototype.reset=function(){},i.getTextProperties=function(e,t,a){return{text:t,fontFamily:e?i.DefaultTitleFontFamily:i.DefaultFontFamily,fontSize:r.fromPoint(a||i.DefaultFontSizeInPt)}},i.prototype.setTooltipToLegendItems=function(e){for(var t=0,i=e.dataPoints;t<i.length;t++){var a=i[t];a.tooltip=a.label}},i.DefaultFontSizeInPt=8,i.LegendIconRadius=5,i.MaxTextLength=60,i.MaxTitleLength=80,i.TextAndIconPadding=5,i.TitlePadding=15,i.LegendEdgeMariginWidth=10,i.LegendMaxWidthFactor=.3,i.TopLegendHeight=24,i.DefaultTextMargin=r.fromPointToPixel(i.DefaultFontSizeInPt),i.DefaultMaxLegendFactor=i.MaxTitleLength/i.DefaultTextMargin,i.LegendArrowOffset=10,i.LegendArrowHeight=15,i.LegendArrowWidth=7.5,i.LegendArrowTranslateY=3.5,i.DefaultFontFamily="wf_segoe-ui_normal",i.DefaultTitleFontFamily="wf_segoe-ui_Semibold",i.LegendItem=a("legendItem"),i.LegendText=a("legendText"),i.LegendIcon=a("legendIcon"),i.LegendTitle=a("legendTitle"),i.NavigationArrow=a("navArrow"),i}();t.SVGLegend=s;var l,u=function(){function i(e){this.legendContainerParent=d3.select(e.get(0))}return i.prototype.getMargins=function(){return{height:i.LegendHeight,width:0}},i.prototype.drawLegend=function(e){var t=e.dataPoints;if(!(t.length<1)){var a=this.legendContainerParent.select(i.LegendContainerSelector);if(a.empty()){if(!t.length)return;var r=$("<div></div>").height(this.getMargins().height).addClass(i.LegendContainerClass);$(this.legendContainerParent[0]).prepend(r),a=d3.select(r.get(0))}this.legendContainerDiv=a,this.drawTitle(t),this.drawLegendItems(t)}},i.prototype.reset=function(){this.legendContainerDiv&&(this.legendContainerDiv.remove(),this.legendContainerDiv=null)},i.prototype.isVisible=function(){return!0},i.prototype.changeOrientation=function(e){},i.prototype.getOrientation=function(){return n.Top},i.prototype.drawTitle=function(e){var t=this.legendContainerDiv.selectAll("div."+i.LegendTitleClass),a=t.data([e[0]]),r=a.enter(),n=r.append("div").attr("class",i.LegendTitleClass);n.filter(function(e){return e.iconOnlyOnLabel}).append("span").attr("class",i.legendIconClass).html(i.legendPlaceSelector),n.append("span"),a.filter(function(e){return e.iconOnlyOnLabel}).select("span."+i.legendIconClass).style(i.legendColorCss,function(e){return e.color}),a.select("span:last-child").text(function(e){return e.category})},i.prototype.drawLegendItems=function(t){this.ensureLegendTableCreated();var a=i.splitArrayToOddEven(t),r=this.legendContainerDiv.select("tbody").selectAll("tr").data(a),n=r.enter(),o=n.append("tr"),s=o.selectAll("td").data(function(e){return e},function(e){return e.label}).enter().append("td").attr("class",i.LegendItem),l=s.append("span");l.filter(function(e){return!e.iconOnlyOnLabel}).append("span").html(i.legendPlaceSelector).attr("class",i.legendIconClass).attr("white-space","nowrap"),l.append("span").attr("class",i.legendItemNameClass),l.append("span").attr("class",i.legendItemMeasureClass);var u=r.selectAll("td").data(function(e){return e},function(e){return e.label});u.select("span."+i.legendItemNameClass).html(function(t){return e.visuals.TextUtil.removeBreakingSpaces(t.label)}),u.select("span."+i.legendItemMeasureClass).html(function(e){return"&nbsp;"+e.measure}),u.select("span."+i.legendIconClass).style("color",function(e){return e.color}),u.exit().remove()},i.prototype.ensureLegendTableCreated=function(){if(this.legendContainerDiv.select("div table").empty()){var e=this.legendContainerDiv.append("div").append("table");e.style("table-layout","fixed").append("tbody"),this.setPanGestureOnLegend(e)}},i.prototype.setPanGestureOnLegend=function(e){var i=$(this.legendContainerDiv.select("div:nth-child(2)")[0]).width(),a=d3.scale.linear().domain([0,i]).range([0,i]),r=d3.behavior.zoom().scaleExtent([1,1]).x(a).on("zoom",function(){if($(e[0]).width()>i){var a=r.translate(),n=a[0],o=a[1];n=Math.min(n,0),n=Math.max(n,i-$(e[0]).width()),r.translate([n,o]),e.style("-ms-transform",function(){return t.SVGUtil.translateXWithPixels(n)}),e.style("-webkit-transform",function(){return t.SVGUtil.translateXWithPixels(n)}),e.style("transform",function(){return t.SVGUtil.translateXWithPixels(n)})}});this.legendContainerDiv?this.legendContainerDiv.call(r):e.call(r)},i.splitArrayToOddEven=function(e){for(var t=[],i=[],a=0;a<e.length;++a)a%2===0?i.push(e[a]):t.push(e[a]);return[i,t]},i.LegendHeight=70,i.LegendContainerClass="interactive-legend",i.LegendContainerSelector=".interactive-legend",i.LegendTitleClass="title",i.LegendItem="item",i.legendPlaceSelector="â– ",i.legendIconClass="icon",i.legendColorCss="color",i.legendItemNameClass="itemName",i.legendItemMeasureClass="itemMeasure",i}();!function(e){function i(e,i){if(null==i[t.legendProps.show]&&(i[t.legendProps.show]=!0),i[t.legendProps.show]===!1&&(e.dataPoints=[]),i[t.legendProps.show]===!0&&null==i[t.legendProps.position]&&(i[t.legendProps.position]=t.legendPosition.top),void 0!==i[t.legendProps.fontSize]&&(e.fontSize=i[t.legendProps.fontSize]),void 0!==i[t.legendProps.labelColor]){var a=i[t.legendProps.labelColor];null!=a&&(e.labelColor=a.solid.color)}i[t.legendProps.showTitle]===!1?e.title="":void 0!==i[t.legendProps.titleText]&&(e.title=i[t.legendProps.titleText])}e.DefaultLegendLabelFillColor="#666666",e.update=i}(l=t.LegendData||(t.LegendData={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.linear="linear",t.log="log",t.type=e.createEnumType([{value:t.linear,displayName:function(e){return e.get("Visual_Axis_Linear")}},{value:t.log,displayName:function(e){return e.get("Visual_Axis_Log")}}])}(i=t.axisScale||(t.axisScale={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.showBoth="showBoth",t.showTitleOnly="showTitleOnly",t.showUnitOnly="showUnitOnly",t.type=e.createEnumType([{value:t.showTitleOnly,displayName:function(e){return e.get("Visual_Axis_ShowTitleOnly")}},{value:t.showUnitOnly,displayName:function(e){return e.get("Visual_Axis_ShowUnitOnly")}},{value:t.showBoth,displayName:function(e){return e.get("Visual_Axis_ShowBoth")}}])}(i=t.axisStyle||(t.axisStyle={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.scalar="Scalar",t.categorical="Categorical",t.both="Both",t.type=e.createEnumType([{value:t.scalar,displayName:function(e){return e.get("Visual_Axis_Scalar")}},{value:t.categorical,displayName:function(e){return e.get("Visual_Axis_Categorical")}}])}(i=t.axisType||(t.axisType={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.rectangle="rectangle",t.oval="oval",t.line="line",t.arrow="arrow",t.triangle="triangle",t.type=e.createEnumType([{value:t.rectangle,displayName:"rectangle"},{value:t.oval,displayName:"oval"},{value:t.line,displayName:"line"},{value:t.arrow,displayName:"arrow"},{value:t.triangle,displayName:"triangle"}])}(i=t.basicShapeType||(t.basicShapeType={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.normal="Normal",t.fit="Fit",t.fill="Fill",t.type=e.createEnumType([{value:t.normal,displayName:function(e){return e.get("Visual_ImageScalingType_Normal")}},{value:t.fit,displayName:function(e){return e.get("Visual_ImageScalingType_Fit")}},{value:t.fill,displayName:function(e){return e.get("Visual_ImageScalingType_Fill")}}])}(i=t.imageScalingType||(t.imageScalingType={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.insideEnd="InsideEnd",t.insideCenter="InsideCenter",t.outsideEnd="OutsideEnd",t.insideBase="InsideBase",t.type=e.createEnumType([{value:t.insideEnd,displayName:function(e){return e.get("Visual_LabelPosition_InsideEnd")}},{value:t.outsideEnd,displayName:function(e){return e.get("Visual_LabelPosition_OutsideEnd")}},{value:t.insideCenter,displayName:function(e){return e.get("Visual_LabelPosition_InsideCenter")}},{value:t.insideBase,displayName:function(e){return e.get("Visual_LabelPosition_InsideBase")}}])}(i=t.labelPosition||(t.labelPosition={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.category="Category",t.data="Data",t.both="Both",t.type=e.createEnumType([{value:t.category,displayName:function(e){return e.get("Visual_LabelStyle_Category")}},{value:t.data,displayName:function(e){return e.get("Visual_LabelStyle_DataValue")}},{value:t.both,displayName:function(e){return e.get("Visual_LabelStyle_Both")}}])}(i=t.labelStyle||(t.labelStyle={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.top="Top",t.bottom="Bottom",t.left="Left",t.right="Right",t.topCenter="TopCenter",t.bottomCenter="BottomCenter",t.leftCenter="LeftCenter",t.rightCenter="RightCenter",t.type=e.createEnumType([{value:t.top,displayName:function(e){return e.get("Visual_LegendPosition_Top")}},{value:t.bottom,displayName:function(e){return e.get("Visual_LegendPosition_Bottom")}},{value:t.left,displayName:function(e){return e.get("Visual_LegendPosition_Left")}},{value:t.right,displayName:function(e){return e.get("Visual_LegendPosition_Right")}},{value:t.topCenter,displayName:function(e){return e.get("Visual_LegendPosition_TopCenter")}},{value:t.bottomCenter,displayName:function(e){return e.get("Visual_LegendPosition_BottomCenter")}},{value:t.leftCenter,displayName:function(e){return e.get("Visual_LegendPosition_LeftCenter")}},{value:t.rightCenter,displayName:function(e){return e.get("Visual_LegendPosition_RightCenter")}}])}(i=t.legendPosition||(t.legendPosition={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.positive="Positive",t.negative="Negative",t.type=e.createEnumType([{value:t.positive,displayName:function(e){return e.get("Visual_KPI_Direction_Positive")}},{value:t.negative,displayName:function(e){return e.get("Visual_KPI_Direction_Negative")}}])}(i=t.kpiDirection||(t.kpiDirection={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.dashed="dashed",t.solid="solid",t.dotted="dotted",t.type=e.createEnumType([{value:t.dashed,displayName:function(e){return e.get("Visual_LineStyle_Dashed")}},{value:t.solid,displayName:function(e){return e.get("Visual_LineStyle_Solid")}},{value:t.dotted,displayName:function(e){return e.get("Visual_LineStyle_Dotted")}}])}(i=t.lineStyle||(t.lineStyle={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.none="None",t.bottomOnly="BottomOnly",t.topOnly="TopOnly",t.leftOnly="LeftOnly",t.rightOnly="RightOnly",t.topBottom="TopBottom",t.leftRight="LeftRight",t.frame="Frame",t.type=e.createEnumType([{value:t.none,displayName:function(e){return e.get("Visual_Outline_none")}},{value:t.bottomOnly,displayName:function(e){return e.get("Visual_Outline_bottom_only")}},{value:t.topOnly,displayName:function(e){return e.get("Visual_Outline_top_only")}},{value:t.leftOnly,displayName:function(e){return e.get("Visual_Outline_LeftOnly")}},{value:t.rightOnly,displayName:function(e){return e.get("Visual_Outline_RightOnly")}},{value:t.topBottom,displayName:function(e){return e.get("Visual_Outline_top_Bottom")}},{value:t.leftRight,displayName:function(e){return e.get("Visual_Outline_leftRight")}},{value:t.frame,displayName:function(e){return e.get("Visual_Outline_frame")}}])}(i=t.outline||(t.outline={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.back="back",t.front="front",t.type=e.createEnumType([{value:t.back,displayName:function(e){return e.get("Visual_Reference_Line_Behind")}},{value:t.front,displayName:function(e){return e.get("Visual_Reference_Line_InFront")}}])}(i=t.referenceLinePosition||(t.referenceLinePosition={}));var a;!function(t){t.left="left",t.right="right",t.type=e.createEnumType([{value:t.left,displayName:function(e){return e.get("Visual_Reference_Line_Data_Label_Left")}},{value:t.right,displayName:function(e){return e.get("Visual_Reference_Line_Data_Label_Right")}}])}(a=t.referenceLineDataLabelHorizontalPosition||(t.referenceLineDataLabelHorizontalPosition={}));var r;!function(t){t.above="above",t.under="under",t.type=e.createEnumType([{value:t.above,displayName:function(e){return e.get("Visual_Reference_Line_Data_Label_Above")}},{value:t.under,displayName:function(e){return e.get("Visual_Reference_Line_Data_Label_Under")}}])}(r=t.referenceLineDataLabelVerticalPosition||(t.referenceLineDataLabelVerticalPosition={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.type=e.createEnumType([{value:0,displayName:function(e){return e.get("Slicer_Orientation_Vertical")}},{value:1,displayName:function(e){return e.get("Slicer_Orientation_Horizontal")}}])}(i=t.slicerOrientation||(t.slicerOrientation={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.left="Left",t.right="Right",t.type=e.createEnumType([{value:t.left,displayName:function(e){return e.get("Visual_yAxis_Left")}},{value:t.right,displayName:function(e){return e.get("Visual_yAxis_Right")}}])}(i=t.yAxisPosition||(t.yAxisPosition={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){return t||!e?0:e.getDuration()}e.MinervaAnimationDuration=250,e.GetAnimationDuration=t}(t=e.AnimatorCommon||(e.AnimatorCommon={}));var i=function(){function e(e){e&&e.duration&&(this.animationDuration=e.duration),this.animationDuration=this.animationDuration>=0?this.animationDuration:t.MinervaAnimationDuration}return e.prototype.getDuration=function(){return this.animationDuration},e.prototype.animate=function(e){return null},e}();e.BaseAnimator=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var __extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var a in t)t.hasOwnProperty(a)&&(e[a]=t[a]);e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},powerbi;!function(e){var t;!function(e){var t=function(t){function i(e){t.call(this,e)}return __extends(i,t),i.prototype.animate=function(e){var t={failed:!0,shapes:null},i=e.viewModel,a=this.previousViewModel;return a&&(i.hasHighlights&&!a.hasHighlights?t=this.animateNormalToHighlighted(e):i.hasHighlights&&a.hasHighlights?t=this.animateHighlightedToHighlighted(e):!i.hasHighlights&&a.hasHighlights&&(t=this.animateHighlightedToNormal(e))),this.previousViewModel=i,t},i.prototype.animateNormalToHighlighted=function(t){var i=t.viewModel,a=t.itemCS,r=t.series.selectAll(a.selector),n=r.data(function(e){return e.data},function(e){return e.key}),o=i.hasHighlights;return n.enter().append("rect").attr("class",function(e){return a["class"].concat(e.highlight?" highlight":"")}).attr(t.layout.shapeLayoutWithoutHighlights),n.style("fill",function(e){return e.color}).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.selected,t.highlight,!1,o)}).transition().duration(this.animationDuration).attr(t.layout.shapeLayout),n.exit().remove(),{failed:!1,shapes:n}},i.prototype.animateHighlightedToHighlighted=function(e){var t=this.animateDefaultShapes(e.viewModel,e.series,e.layout,e.itemCS);return{failed:!1,shapes:t}},i.prototype.animateHighlightedToNormal=function(t){var i=t.itemCS,a=t.series.selectAll(i.selector),r=a.data(function(e){return e.data},function(e){return e.key}),n=t.interactivityService&&t.interactivityService.hasSelection();return r.enter().append("rect").attr("class",function(e){return i["class"].concat(e.highlight?" highlight":"")}),r.style("fill",function(e){return e.color}).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.selected,t.highlight,t.selected,!t.selected)}).transition().duration(this.animationDuration).attr(t.layout.shapeLayout).transition().duration(0).delay(this.animationDuration).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.selected,t.highlight,n,!1)}),r.exit().transition().duration(this.animationDuration).attr(n?t.layout.zeroShapeLayout:t.layout.shapeLayoutWithoutHighlights).remove(),{failed:!1,shapes:r}},i.prototype.animateDefaultShapes=function(t,i,a,r){var n=i.selectAll(r.selector),o=n.data(function(e){return e.data},function(e){return e.key});return o.enter().append("rect").attr("class",function(e){return r["class"].concat(e.highlight?" highlight":"")}),o.style("fill",function(e){return e.color}).style("fill-opacity",function(i){return e.ColumnUtil.getFillOpacity(i.selected,i.highlight,!1,t.hasHighlights)}).transition().duration(this.animationDuration).attr(a.shapeLayout),o.exit().remove(),o},i}(e.BaseAnimator);e.WebColumnChartAnimator=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(t){function i(e){t.call(this,e)}return __extends(i,t),i.prototype.animate=function(e){var t={failed:!0,shapes:null,highlightShapes:null},i=e.viewModel,a=this.previousViewModel;return a&&(i.hasHighlights&&!a.hasHighlights?t=this.animateNormalToHighlighted(e):i.hasHighlights&&a.hasHighlights?t=this.animateHighlightedToHighlighted(e):!i.hasHighlights&&a.hasHighlights&&(t=this.animateHighlightedToNormal(e))),this.previousViewModel=i,t},i.prototype.animateNormalToHighlighted=function(t){var i=this.animateDefaultShapes(t),a=t.graphicsContext.select(".slices").selectAll("path.slice-highlight").data(t.viewModel.dataPoints.filter(function(e){return null!=e.data.highlightRatio}),function(e){return e.data.identity.getKey()});return a.enter().insert("path").classed("slice-highlight",!0).each(function(e){this._current=e}),e.DonutChart.isSingleColor(t.viewModel.dataPoints.filter(function(e){return null!=e.data.highlightRatio})),a.style("fill",function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value}).style("fill-opacity",function(i){return e.ColumnUtil.getFillOpacity(i.data.selected,!0,!1,t.viewModel.hasHighlights)}).style("stroke-dasharray",function(i){return e.DonutChart.drawStrokeForDonutChart(t.radius,t.innerArcRadiusRatio,i,t.sliceWidthRatio,i.data.highlightRatio)}).style("stroke-width",function(e){return 0===e.data.highlightRatio?0:e.data.strokeWidth}).attr(t.layout.shapeLayout).transition().duration(this.animationDuration).attr(t.layout.highlightShapeLayout),a.exit().remove(),e.NewDataLabelUtils.drawDefaultLabels(t.labelGraphicsContext,t.labels,!1,!0),e.NewDataLabelUtils.drawLabelLeaderLines(t.labelGraphicsContext,t.labels),{failed:!1,shapes:i,highlightShapes:a}},i.prototype.animateHighlightedToHighlighted=function(t){var i=this.animateDefaultShapes(t),a=this.animateDefaultHighlightShapes(t);return e.NewDataLabelUtils.drawDefaultLabels(t.labelGraphicsContext,t.labels,!1,!0),e.NewDataLabelUtils.drawLabelLeaderLines(t.labelGraphicsContext,t.labels),{failed:!1,shapes:i,highlightShapes:a}},i.prototype.animateHighlightedToNormal=function(t){var i=t.interactivityService&&t.interactivityService.hasSelection(),a=this.animationDuration,r=t.graphicsContext.select(".slices").selectAll("path.slice").data(t.viewModel.dataPoints,function(e){return e.data.identity.getKey()});r.enter().insert("path").classed("slice",!0).each(function(e){this._current=e}),e.DonutChart.isSingleColor(t.viewModel.dataPoints),r.style("fill",function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value}).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.data.selected,!1,t.data.selected,!t.data.selected)}).style("stroke-dasharray",function(i){return e.DonutChart.drawStrokeForDonutChart(t.radius,t.innerArcRadiusRatio,i,t.sliceWidthRatio);
}).style("stroke-width",function(e){return e.data.strokeWidth}).transition().duration(a).attr(t.layout.shapeLayout).transition().duration(0).delay(a).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.data.selected,!1,i,!1)}),r.exit().remove();var n=t.graphicsContext.select(".slices").selectAll("path.slice-highlight").data(t.viewModel.dataPoints.filter(function(e){return null!=e.data.highlightRatio}),function(e){return e.data.identity.getKey()});return n.enter().insert("path").classed("slice-highlight",!0).each(function(e){this._current=e}),e.DonutChart.isSingleColor(t.viewModel.dataPoints.filter(function(e){return null!=e.data.highlightRatio})),n.style("fill",function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value}).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(!1,!0,!1,!0)}).style("stroke-dasharray",function(i){return e.DonutChart.drawStrokeForDonutChart(t.radius,t.innerArcRadiusRatio,i,t.sliceWidthRatio,i.data.highlightRatio)}).style("stroke-width",function(e){return 0===e.data.highlightRatio?0:e.data.strokeWidth}).transition().duration(a).attr(i?t.layout.zeroShapeLayout:t.layout.shapeLayout).remove(),n.exit().remove(),e.NewDataLabelUtils.drawDefaultLabels(t.labelGraphicsContext,t.labels,!1,!0),e.NewDataLabelUtils.drawLabelLeaderLines(t.labelGraphicsContext,t.labels),{failed:!1,shapes:r,highlightShapes:n}},i.prototype.animateDefaultShapes=function(t){var i=t.graphicsContext.select(".slices").selectAll("path.slice").data(t.viewModel.dataPoints,function(e){return e.data.identity.getKey()});return i.enter().insert("path").classed("slice",!0).each(function(e){this._current=e}),e.DonutChart.isSingleColor(t.viewModel.dataPoints),i.style("fill",function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value}).style("fill-opacity",function(i){return e.ColumnUtil.getFillOpacity(i.data.selected,!1,!1,t.viewModel.hasHighlights)}).style("stroke-dasharray",function(i){return e.DonutChart.drawStrokeForDonutChart(t.radius,t.innerArcRadiusRatio,i,t.sliceWidthRatio)}).style("stroke-width",function(e){return e.data.strokeWidth}).transition().duration(this.animationDuration).attr(t.layout.shapeLayout),i.exit().remove(),i},i.prototype.animateDefaultHighlightShapes=function(t){var i=t.graphicsContext.select(".slices").selectAll("path.slice-highlight").data(t.viewModel.dataPoints.filter(function(e){return null!=e.data.highlightRatio}),function(e){return e.data.identity.getKey()});return i.enter().insert("path").classed("slice-highlight",!0).each(function(e){this._current=e}),e.DonutChart.isSingleColor(t.viewModel.dataPoints.filter(function(e){return null!=e.data.highlightRatio})),i.style("fill",function(e){return e.data.color?e.data.color:t.colors.getNewColorScale().getColor(e.data.identity.getKey()).value}).style("fill-opacity",function(i){return e.ColumnUtil.getFillOpacity(i.data.selected,!0,!1,t.viewModel.hasHighlights)}).style("stroke-dasharray",function(i){return e.DonutChart.drawStrokeForDonutChart(t.radius,t.innerArcRadiusRatio,i,t.sliceWidthRatio,i.data.highlightRatio)}).style("stroke-width",function(e){return 0===e.data.highlightRatio?0:e.data.strokeWidth}).transition().duration(this.animationDuration).attr(t.layout.highlightShapeLayout),i.exit().remove(),i},i}(e.BaseAnimator);e.WebDonutChartAnimator=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=function(i){function a(e){i.call(this,e)}return __extends(a,i),a.prototype.animate=function(e){var t={failed:!0,shapes:null,dataLabels:null},i=e.viewModel,a=this.previousViewModel;return a&&(i.hasHighlights&&!a.hasHighlights?t=this.animateNormalToHighlighted(e):i.hasHighlights&&a.hasHighlights?t=this.animateHighlightedToHighlighted(e):!i.hasHighlights&&a.hasHighlights&&(t=this.animateHighlightedToNormal(e))),this.previousViewModel=i,t},a.prototype.animateNormalToHighlighted=function(e){var i=e.viewModel,a=e.layout,r=!0,n=!1;this.animateDefaultAxis(e.axisGraphicsContext,e.axisOptions,e.isHidingPercentBars);var o=e.shapeGraphicsContext.selectAll(t.FunnelChart.Selectors.funnel.bars.selector).data(i.slices,function(e){return e.key});o.enter().append("rect").attr("class",function(e){return e.highlight?t.FunnelChart.FunnelBarHighlightClass:t.FunnelChart.Selectors.funnel.bars["class"]}).attr(a.shapeLayoutWithoutHighlights),o.style("fill",function(e){return e.color}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,n,r)}).transition().duration(this.animationDuration).attr(a.shapeLayout),o.exit().remove(),this.animatePercentBars(e);var s=this.animateDefaultDataLabels(e);return{failed:!1,shapes:o,dataLabels:s}},a.prototype.animateHighlightedToHighlighted=function(e){var t=e.viewModel,i=e.layout;this.animateDefaultAxis(e.axisGraphicsContext,e.axisOptions,e.isHidingPercentBars);var a=this.animateDefaultShapes(t,t.slices,e.shapeGraphicsContext,i);this.animatePercentBars(e);var r=this.animateDefaultDataLabels(e);return{failed:!1,shapes:a,dataLabels:r}},a.prototype.animateHighlightedToNormal=function(e){var i=e.viewModel,a=e.layout,r=e.interactivityService?e.interactivityService.hasSelection():!1;this.animateDefaultAxis(e.axisGraphicsContext,e.axisOptions,e.isHidingPercentBars);var n=e.shapeGraphicsContext.selectAll(t.FunnelChart.Selectors.funnel.bars.selector).data(i.slices,function(e){return e.key});n.enter().append("rect").attr("class",function(e){return e.highlight?t.FunnelChart.FunnelBarHighlightClass:t.FunnelChart.Selectors.funnel.bars["class"]}),n.style("fill",function(e){return e.color}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,r,!e.selected)}).transition().duration(this.animationDuration).attr(a.shapeLayoutWithoutHighlights).transition().duration(0).delay(this.animationDuration).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,r,!1)});var o=n.exit();o.transition().duration(this.animationDuration).attr(r?a.zeroShapeLayout:a.shapeLayoutWithoutHighlights).remove(),this.animatePercentBars(e);var s=this.animateDefaultDataLabels(e);return{failed:!1,shapes:n,dataLabels:s}},a.prototype.animateDefaultAxis=function(e,i,a){var r=d3.scale.ordinal().domain(i.categoryLabels).rangeBands([i.rangeStart,i.rangeEnd],i.barToSpaceRatio,a?i.barToSpaceRatio:t.FunnelChart.PercentBarToBarRatio),n=d3.svg.axis().scale(r).orient("right").tickPadding(t.FunnelChart.TickPadding).innerTickSize(t.FunnelChart.InnerTickSize);e.classed("axis",!0).transition().duration(this.animationDuration).attr("transform",t.SVGUtil.translate(0,i.margin.top)).call(n)},a.prototype.animateDefaultShapes=function(e,i,a,r){var n=e.hasHighlights,o=a.selectAll(t.FunnelChart.Selectors.funnel.bars.selector).data(i,function(e){return e.key});return o.enter().append("rect").attr("class",function(e){return e.highlight?t.FunnelChart.FunnelBarHighlightClass:t.FunnelChart.Selectors.funnel.bars["class"]}),o.style("fill",function(e){return e.color}).style("fill-opacity",function(e){return function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,!1,n)}}).transition().duration(this.animationDuration).attr(r.shapeLayout),o.exit().remove(),o},a.prototype.animateDefaultDataLabels=function(e){var i;return e.viewModel.dataLabelsSettings.show&&e.viewModel.canShowDataLabels?i=t.dataLabelUtils.drawDefaultLabelsForFunnelChart(e.viewModel.slices,e.labelGraphicsContext,e.labelLayout,!0,this.animationDuration):t.dataLabelUtils.cleanDataLabels(e.labelGraphicsContext),i},a.prototype.animatePercentBars=function(e){var i=e.viewModel,a=e.isHidingPercentBars;if(a||!i.slices||(i.hasHighlights?i.slices.length/2:i.slices.length)<2)return void this.animatePercentBarComponents([],e);var r=[i.slices[i.hasHighlights?1:0],i.slices[i.slices.length-1]],n=t.FunnelChart.getFunnelSliceValue(r[0]);if(0>=n)return void this.animatePercentBarComponents([],e);var o=r.map(function(e,i){return{value:t.FunnelChart.getFunnelSliceValue(e),percent:0===i?1:t.FunnelChart.getFunnelSliceValue(e)/n,isTop:0===i}});this.animatePercentBarComponents(o,e)},a.prototype.animateToFunnelPercent=function(e,t,i){return e.data(t).transition().duration(this.animationDuration).attr(i)},a.prototype.animatePercentBarComponents=function(i,a){var r=a.percentGraphicsContext,n=a.layout,o=[{percent:0,value:0,isTop:!0},{percent:0,value:0,isTop:!1}],s=r.selectAll(t.FunnelChart.Selectors.percentBar.mainLine.selector).data(i);this.animateToFunnelPercent(s.exit(),o,n.percentBarLayout.mainLine).remove(),s.enter().append("line").classed(t.FunnelChart.Selectors.percentBar.mainLine["class"],!0).data(o).attr(n.percentBarLayout.mainLine),this.animateToFunnelPercent(s,i,n.percentBarLayout.mainLine);var l=r.selectAll(t.FunnelChart.Selectors.percentBar.leftTick.selector).data(i);this.animateToFunnelPercent(l.exit(),o,n.percentBarLayout.leftTick).remove(),l.enter().append("line").classed(t.FunnelChart.Selectors.percentBar.leftTick["class"],!0).data(o).attr(n.percentBarLayout.leftTick),this.animateToFunnelPercent(l,i,n.percentBarLayout.leftTick);var u=r.selectAll(t.FunnelChart.Selectors.percentBar.rightTick.selector).data(i);this.animateToFunnelPercent(u.exit(),o,n.percentBarLayout.rightTick).remove(),u.enter().append("line").classed(t.FunnelChart.Selectors.percentBar.rightTick["class"],!0).data(o).attr(n.percentBarLayout.rightTick),this.animateToFunnelPercent(u,i,n.percentBarLayout.rightTick);var c=r.selectAll(t.FunnelChart.Selectors.percentBar.text.selector).data(i);this.animateToFunnelPercent(c.exit(),o,n.percentBarLayout.text).remove(),c.enter().append("text").classed(t.FunnelChart.Selectors.percentBar.text["class"],!0).data(o).attr(n.percentBarLayout.text),this.animateToFunnelPercent(c,i,n.percentBarLayout.text).text(function(i){return e.formattingService.formatValue(i.percent,t.valueFormatter.getLocalizedString("Percentage1"))}),t.SVGUtil.flushAllD3TransitionsIfNeeded(a.visualInitOptions)},a}(t.BaseAnimator);t.WebFunnelAnimator=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(t){function i(e){t.call(this,e)}return __extends(i,t),i.prototype.animate=function(e){var t={failed:!0,shapes:null,highlightShapes:null,majorLabels:null,minorLabels:null},i=e.viewModel,a=this.previousViewModel;return a&&(i.hasHighlights&&!a.hasHighlights?t=this.animateNormalToHighlighted(e):i.hasHighlights&&a.hasHighlights?t=this.animateHighlightedToHighlighted(e):!i.hasHighlights&&a.hasHighlights&&(t=this.animateHighlightedToNormal(e))),this.previousViewModel=i,t},i.prototype.animateNormalToHighlighted=function(t){var i=!1,a=!0,r=this.animateDefaultShapes(t.shapeGraphicsContext,t.nodes,i,a,t.layout),n=t.shapeGraphicsContext.selectAll("."+e.Treemap.HighlightNodeClassName).data(t.highlightNodes,function(e){return e.key+"highlight"});n.enter().append("rect").attr("class",t.layout.highlightShapeClass).attr(t.layout.shapeLayout),n.style("fill",function(t){return e.Treemap.getFill(t,!0)}).style("fill-opacity",function(t){return e.Treemap.getFillOpacity(t,i,a,!0)}).transition().duration(this.animationDuration).attr(t.layout.highlightShapeLayout),n.exit().remove();var o=this.animateDefaultMajorLabels(t.labelGraphicsContext,t.majorLabeledNodes,t.labelSettings,t.layout),s=this.animateDefaultMinorLabels(t.labelGraphicsContext,t.minorLabeledNodes,t.labelSettings,t.layout);return{failed:!1,shapes:r,highlightShapes:n,majorLabels:o,minorLabels:s}},i.prototype.animateHighlightedToHighlighted=function(t){var i=!1,a=!0,r=this.animateDefaultShapes(t.shapeGraphicsContext,t.nodes,i,a,t.layout);t.shapeGraphicsContext.selectAll("."+e.Treemap.HighlightNodeClassName).data(t.highlightNodes,function(e){return e.key+"highlight"});var n=this.animateDefaultHighlightShapes(t.shapeGraphicsContext,t.highlightNodes,i,a,t.layout),o=this.animateDefaultMajorLabels(t.labelGraphicsContext,t.majorLabeledNodes,t.labelSettings,t.layout),s=this.animateDefaultMinorLabels(t.labelGraphicsContext,t.minorLabeledNodes,t.labelSettings,t.layout);return{failed:!1,shapes:r,highlightShapes:n,majorLabels:o,minorLabels:s}},i.prototype.animateHighlightedToNormal=function(t){var i=t.interactivityService?t.interactivityService.hasSelection():!1,a=t.shapeGraphicsContext.selectAll("."+e.Treemap.TreemapNodeClassName).data(t.nodes,function(e){return e.key});a.enter().append("rect").attr("class",t.layout.shapeClass),a.transition().duration(this.animationDuration).style("fill",function(t){return e.Treemap.getFill(t,!1)}).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.selected,!1,t.selected,!t.selected)}).attr(t.layout.shapeLayout).transition().duration(0).delay(this.animationDuration).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.selected,!1,i,!1)}),a.exit().remove();var r=t.shapeGraphicsContext.selectAll("."+e.Treemap.HighlightNodeClassName).data(t.nodes,function(e){return e.key+"highlight"});r.enter().append("rect").attr("class",t.layout.highlightShapeClass),r.style("fill",function(t){return e.Treemap.getFill(t,!0)}).style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.selected,!0,t.selected,!t.selected)}).transition().duration(this.animationDuration).attr(i?t.layout.zeroShapeLayout:t.layout.shapeLayout).remove(),r.exit().remove();var n=this.animateDefaultMajorLabels(t.labelGraphicsContext,t.majorLabeledNodes,t.labelSettings,t.layout),o=this.animateDefaultMinorLabels(t.labelGraphicsContext,t.minorLabeledNodes,t.labelSettings,t.layout);return{failed:!1,shapes:a,highlightShapes:r,majorLabels:n,minorLabels:o}},i.prototype.animateDefaultShapes=function(t,i,a,r,n){var o=!1,s=t.selectAll("."+e.Treemap.TreemapNodeClassName).data(i,function(e){return e.key});return s.enter().append("rect").attr("class",n.shapeClass),s.transition().duration(this.animationDuration).style("fill",function(t){return e.Treemap.getFill(t,o)}).style("fill-opacity",function(t){return e.Treemap.getFillOpacity(t,a,r,o)}).attr(n.shapeLayout),s.exit().remove(),s},i.prototype.animateDefaultHighlightShapes=function(t,i,a,r,n){var o=!0,s=t.selectAll("."+e.Treemap.HighlightNodeClassName).data(i,function(e){return e.key+"highlight"});return s.enter().append("rect").attr("class",n.highlightShapeClass),s.transition().duration(this.animationDuration).style("fill",function(t){return e.Treemap.getFill(t,o)}).style("fill-opacity",function(t){return e.Treemap.getFillOpacity(t,a,r,o)}).attr(n.highlightShapeLayout),s.exit().remove(),s},i.prototype.animateDefaultMajorLabels=function(t,i,a,r){var n=t.selectAll("."+e.Treemap.MajorLabelClassName).data(i,function(e){return e.key});return n.enter().append("text").attr("class",r.majorLabelClass),n.text(r.majorLabelText).style("fill",function(){return a.labelColor}).transition().duration(this.animationDuration).attr(r.majorLabelLayout),n.exit().remove(),n},i.prototype.animateDefaultMinorLabels=function(t,i,a,r){var n=t.selectAll("."+e.Treemap.MinorLabelClassName).data(i,function(e){return e.key});return n.enter().append("text").attr("class",r.minorLabelClass),n.text(r.minorLabelText).style("fill",function(){return a.labelColor}).transition().duration(this.animationDuration).attr(r.minorLabelLayout),n.exit().remove(),n},i}(e.BaseAnimator);e.WebTreemapAnimator=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){e.animatedTextObjectDescs={general:{properties:{formatString:{type:{formatting:{formatString:!0}}}}}},e.animatedNumberCapabilities={objects:e.animatedTextObjectDescs,dataViewMappings:[{single:{role:"Values"}}],supportsSelection:!1}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.basicShapeCapabilities={objects:{line:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Line"),properties:{lineColor:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_LineColor"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Background_Transparency"),description:e.data.createDisplayNameGetter("Visual_Background_TransparencyDescription"),type:{numeric:!0}},weight:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Weight"),type:{numeric:!0}},roundEdge:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_RoundEdges"),type:{numeric:!0}}}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},fillColor:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_FillColor"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Background_Transparency"),description:e.data.createDisplayNameGetter("Visual_Background_TransparencyDescription"),type:{numeric:!0}}}},rotation:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Rotate"),properties:{angle:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Rotate"),type:{numeric:!0}}}},general:{properties:{shapeType:{type:{text:!0}}}}},suppressDefaultTitle:!0,suppressDefaultPadding:!0,canRotate:!1,supportsSelection:!1},t.basicShapeProps={general:{shapeType:{objectName:"general",propertyName:"shapeType"}},line:{transparency:{objectName:"line",propertyName:"transparency"},weight:{objectName:"line",propertyName:"weight"},roundEdge:{objectName:"line",propertyName:"roundEdge"},lineColor:{objectName:"line",propertyName:"lineColor"}},fill:{transparency:{objectName:"fill",propertyName:"transparency"},fillColor:{objectName:"fill",propertyName:"fillColor"},show:{objectName:"fill",propertyName:"show"}},rotation:{angle:{objectName:"rotation",propertyName:"angle"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(i){return void 0===i&&(i=!1),{dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Axis"),description:e.data.createDisplayNameGetter("Role_DisplayName_AxisDescription")},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Value"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0},suppressFormatPainterCopy:!0},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},categoryAxis:{displayName:i?e.data.createDisplayNameGetter("Visual_YAxis"):e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),description:e.data.createDisplayNameGetter("Visual_YAxis_PositionDescription"),type:{enumeration:t.yAxisPosition.type}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0},suppressFormatPainterCopy:!0},axisType:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Type"),type:{enumeration:t.axisType.type}},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:i?e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"):e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_DisplayUnits_Auto"),type:{numeric:!0}}}},valueAxis:{displayName:i?e.data.createDisplayNameGetter("Visual_XAxis"):e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),description:e.data.createDisplayNameGetter("Visual_YAxis_PositionDescription"),type:{enumeration:t.yAxisPosition.type}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),suppressFormatPainterCopy:!0},intersection:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Intersection"),type:{numeric:!0},placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto")},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:i?e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"):e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_DisplayUnits_Auto"),type:{numeric:!0}}}},y1AxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},position:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange_Description"),type:{enumeration:t.referenceLinePosition.type}},dataLabelShow:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Show_Description"),type:{bool:!0}},dataLabelColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color_Description"),type:{fill:{solid:{color:!0}}}},dataLabelDecimalPoints:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Decimal_Points"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},dataLabelHorizontalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Horizontal_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Horizontal_Position_Description"),type:{enumeration:t.referenceLineDataLabelHorizontalPosition.type}},dataLabelVerticalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Vertical_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Vertical_Position_Description"),type:{enumeration:t.referenceLineDataLabelVerticalPosition.type}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},showSeries:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}},suppressFormatPainterCopy:!0},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0},suppressFormatPainterCopy:!0},showAll:{displayName:e.data.createDisplayNameGetter("Visual_LabelSeriesShowAll"),type:{bool:!0}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},plotArea:{displayName:e.data.createDisplayNameGetter("Visual_Plot"),properties:{transparency:{displayName:e.data.createDisplayNameGetter("Visual_Background_Transparency"),type:{numeric:!0}},image:{type:{image:{}}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:0},Gradient:{max:0}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1},Gradient:{max:0}},{Category:{max:1},Series:{max:0},Y:{min:0,max:1},Gradient:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{"for":{"in":"Y"}},{bind:{to:"Gradient"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2},supported:{min:0}}}}],supportsHighlight:!0,sorting:{"default":{}},drilldown:{roles:["Category"]}}}t.getColumnChartCapabilities=i,t.columnChartProps={dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"},showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}},general:{formatString:{objectName:"general",propertyName:"formatString"}},categoryAxis:{axisType:{objectName:"categoryAxis",propertyName:"axisType"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}},plotArea:{image:{objectName:"plotArea",propertyName:"image"},transparency:{objectName:"plotArea",propertyName:"transparency"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.comboChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_ComboChart_Category"),description:e.data.createDisplayNameGetter("Role_ComboChart_CategoryDescription")},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_ComboChart_Series")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_ComboChart_Y"),description:e.data.createDisplayNameGetter("Role_ComboChart_YDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Y2",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_ComboChart_Y2"),description:e.data.createDisplayNameGetter("Role_ComboChart_Y2Description"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{properties:{formatString:{type:{formatting:{formatString:!0}}},visualType1:{type:{text:!0}},visualType2:{type:{text:!0}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0},suppressFormatPainterCopy:!0},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),
type:{numeric:!0},suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},axisType:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Type"),type:{enumeration:t.axisType.type}},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},valueAxis:{displayName:e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},axisLabel:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_ColumnTitle"),type:{none:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),type:{enumeration:t.yAxisPosition.type}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},secShow:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_ShowSecondary"),type:{bool:!0}},secAxisLabel:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_LineTitle"),type:{none:!0}},secPosition:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),type:{enumeration:t.yAxisPosition.type}},secAxisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},secStart:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0}},secEnd:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0}},secShowAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},secAxisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},secLabelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},secLabelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}},suppressFormatPainterCopy:!0},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0},suppressFormatPainterCopy:!0},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:0}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{"for":{"in":"Y"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2},supported:{min:0}}}},{conditions:[{Category:{max:1},Series:{max:0},Y2:{min:1}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1},Y2:{min:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{"for":{"in":"Y2"}}],dataReductionAlgorithm:{top:{}}},rowCount:{preferred:{min:2},supported:{min:0}}}}],supportsHighlight:!0,sorting:{"default":{}},drilldown:{roles:["Category"]}},t.comboChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},valueAxis:{secShow:{objectName:"valueAxis",propertyName:"secShow"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.donutChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Details"),description:e.data.createDisplayNameGetter("Role_DisplayName_DetailsDonutChartDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0},suppressFormatPainterCopy:!0},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DetailLabels"),properties:{show:{type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}},suppressFormatPainterCopy:!0},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0},suppressFormatPainterCopy:!0},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}},suppressFormatPainterCopy:!0},labelStyle:{displayName:e.data.createDisplayNameGetter("Visual_LabelStyle"),type:{enumeration:t.labelStyle.type}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:0}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{bind:{to:"Y"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2},supported:{min:1}}}}],sorting:{"default":{}},supportsHighlight:!0,drilldown:{roles:["Category"]}},t.donutChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"},showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"},labelColor:{objectName:"legend",propertyName:"labelColor"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.dataDotChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping},{name:"Y",kind:e.VisualDataRoleKind.Measure,requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Y:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{"for":{"in":"Y"},dataReductionAlgorithm:{top:{}}}]}}}]}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.filledMapCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Location"),description:e.data.createDisplayNameGetter("Role_DisplayName_LocationFilledMapDescription"),preferredTypes:[{geography:{address:!0}},{geography:{city:!0}},{geography:{continent:!0}},{geography:{country:!0}},{geography:{county:!0}},{geography:{place:!0}},{geography:{postalCode:!0}},{geography:{region:!0}},{geography:{stateOrProvince:!0}}]},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"X",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Longitude"),description:e.data.createDisplayNameGetter("Role_DisplayName_LongitudeFilledMapDescription"),preferredTypes:[{geography:{longitude:!0}}]},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Latitude"),description:e.data.createDisplayNameGetter("Role_DisplayName_LatitudeFilledMapDescription"),preferredTypes:[{geography:{latitude:!0}}]},{name:"Size",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{formatting:{legendPosition:!0}}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),type:{fillRule:{}},rule:{inputRole:"Size",output:{property:"fill",selector:["Category"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),properties:{show:{type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),properties:{show:{type:{bool:!0}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:1},X:{max:1},Y:{max:1},Size:{max:1}},{Category:{max:1},Series:{max:0},X:{max:1},Y:{max:1},Size:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{bind:{to:"X"}},{bind:{to:"Y"}},{bind:{to:"Size"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2}}}}],sorting:{custom:{}},drilldown:{roles:["Category"]}},t.filledMapProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"},showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"}},labels:{show:{objectName:"labels",propertyName:"show"},color:{objectName:"labels",propertyName:"color"},labelDisplayUnits:{objectName:"labels",propertyName:"labelDisplayUnits"},labelPrecision:{objectName:"labels",propertyName:"labelPrecision"}},categoryLabels:{show:{objectName:"categoryLabels",propertyName:"show"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.funnelChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Group"),description:e.data.createDisplayNameGetter("Role_DisplayName_GroupFunnelDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],dataViewMappings:[{conditions:[{Category:{max:0},Gradient:{max:0}},{Category:{max:1},Y:{max:1},Gradient:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{"for":{"in":"Y"}},{bind:{to:"Gradient"}}],dataReductionAlgorithm:{top:{}}},rowCount:{preferred:{min:1}}}}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelPosition:{displayName:e.data.createDisplayNameGetter("Visual_Position"),type:{enumeration:t.labelPosition.type},suppressFormatPainterCopy:!0},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}},suppressFormatPainterCopy:!0},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0},suppressFormatPainterCopy:!0},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},percentBarLabel:{displayName:e.data.createDisplayNameGetter("Visual_PercentBarLabel"),description:e.data.createDisplayNameGetter("Visual_PercentBarLabelDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}}},supportsHighlight:!0,sorting:{"default":{}},drilldown:{roles:["Category"]}},t.funnelChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.gaugeRoleNames={y:"Y",minValue:"MinValue",maxValue:"MaxValue",targetValue:"TargetValue"},t.gaugeCapabilities={dataRoles:[{name:t.gaugeRoleNames.y,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Value"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValueDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:t.gaugeRoleNames.minValue,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_MinValue"),description:e.data.createDisplayNameGetter("Role_DisplayName_MinValueDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:t.gaugeRoleNames.maxValue,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_MaxValue"),description:e.data.createDisplayNameGetter("Role_DisplayName_MaxValueDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:t.gaugeRoleNames.targetValue,kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_TargetValue"),description:e.data.createDisplayNameGetter("Role_DisplayName_TargetValueDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{properties:{formatString:{type:{formatting:{formatString:!0}}}}},axis:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_Axis"),properties:{min:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_Axis_Min"),type:{numeric:!0}},max:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_Axis_Max"),type:{numeric:!0}},target:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_Axis_Target"),type:{numeric:!0}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),properties:{show:{type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},calloutValue:{displayName:e.data.createDisplayNameGetter("Visual_Gauge_CalloutValue"),properties:{show:{type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}}},dataViewMappings:[{conditions:[{Y:{max:1},MinValue:{max:1},MaxValue:{max:1},TargetValue:{max:1}}],categorical:{values:{select:[{bind:{to:"Y"}},{bind:{to:"MinValue"}},{bind:{to:"MaxValue"}},{bind:{to:"TargetValue"}}]}}}],supportsSelection:!1}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.imageVisualCapabilities={objects:{general:{properties:{imageUrl:{type:{misc:{imageUrl:!0}}}}},imageScaling:{displayName:e.data.createDisplayNameGetter("Visual_Image_Scaling_Type"),properties:{imageScalingType:{displayName:e.data.createDisplayNameGetter("Visual_Image_Scaling_Type"),type:{enumeration:t.imageScalingType.type}}}}},suppressDefaultTitle:!0,supportsSelection:!1}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.scriptVisualCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.GroupingOrMeasure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values")}],dataViewMappings:[{scriptResult:{dataInput:{table:{rows:{"for":{"in":"Values"},dataReductionAlgorithm:{top:{}}}}},script:{source:{objectName:"script",propertyName:"source"},provider:{objectName:"script",propertyName:"provider"}}}}],objects:{script:{properties:{provider:{type:{text:!0}},source:{type:{scripting:{source:!0}}}}},lastSavedImage:{properties:{imageUrl:{type:{misc:{imageUrl:!0}}},viewportHeight:{type:{numeric:!0}},viewportWidth:{type:{numeric:!0}}}}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.lineChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Axis"),description:e.data.createDisplayNameGetter("Role_DisplayName_AxisDescription")},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0},suppressFormatPainterCopy:!0},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}}}},categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},axisType:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Type"),type:{enumeration:t.axisType.type}},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},valueAxis:{displayName:e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),description:e.data.createDisplayNameGetter("Visual_YAxis_PositionDescription"),type:{enumeration:t.yAxisPosition.type}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},y1AxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},position:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange_Description"),type:{enumeration:t.referenceLinePosition.type}},dataLabelShow:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Show_Description"),type:{bool:!0}},dataLabelColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color_Description"),type:{fill:{
solid:{color:!0}}}},dataLabelDecimalPoints:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Decimal_Points"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},dataLabelHorizontalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Horizontal_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Horizontal_Position_Description"),type:{enumeration:t.referenceLineDataLabelHorizontalPosition.type}},dataLabelVerticalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Vertical_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Vertical_Position_Description"),type:{enumeration:t.referenceLineDataLabelVerticalPosition.type}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},showSeries:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}},suppressFormatPainterCopy:!0},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0},suppressFormatPainterCopy:!0},showAll:{displayName:e.data.createDisplayNameGetter("Visual_LabelSeriesShowAll"),type:{bool:!0}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}},labelDensity:{displayName:e.data.createDisplayNameGetter("Visual_LabelDensity"),type:{formatting:{labelDensity:!0}}}}},plotArea:{displayName:e.data.createDisplayNameGetter("Visual_Plot"),properties:{transparency:{displayName:e.data.createDisplayNameGetter("Visual_Background_Transparency"),type:{numeric:!0}},image:{type:{image:{}}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:0}},{Category:{max:1},Series:{min:1,max:1},Y:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{"for":{"in":"Y"}}],dataReductionAlgorithm:{top:{}}}}}}],sorting:{"default":{}}},t.lineChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"}},categoryAxis:{axisType:{objectName:"categoryAxis",propertyName:"axisType"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}},labels:{labelDensity:{objectName:"labels",propertyName:"labelDensity"}},plotArea:{image:{objectName:"plotArea",propertyName:"image"},transparency:{objectName:"plotArea",propertyName:"transparency"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.mapCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Location"),description:e.data.createDisplayNameGetter("Role_DisplayName_LocationMapDescription"),preferredTypes:[{geography:{address:!0}},{geography:{city:!0}},{geography:{continent:!0}},{geography:{country:!0}},{geography:{county:!0}},{geography:{place:!0}},{geography:{postalCode:!0}},{geography:{region:!0}},{geography:{stateOrProvince:!0}}]},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"X",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Longitude"),description:e.data.createDisplayNameGetter("Role_DisplayName_LongitudeMapDescription"),preferredTypes:[{geography:{longitude:!0}}]},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Latitude"),description:e.data.createDisplayNameGetter("Role_DisplayName_LatitudeMapDescription"),preferredTypes:[{geography:{latitude:!0}}]},{name:"Size",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:1},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:0}},{Category:{max:1},Series:{max:0},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Series",select:[{bind:{to:"X"}},{bind:{to:"Y"}},{bind:{to:"Size"}},{bind:{to:"Gradient"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2}}}}],sorting:{custom:{}},drilldown:{roles:["Category"]}},t.mapProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"},showAllDataPoints:{objectName:"dataPoint",propertyName:"showAllDataPoints"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.multiRowCardCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.GroupingOrMeasure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Fields"),description:e.data.createDisplayNameGetter("Role_DisplayName_FieldsDescription")}],objects:{general:{properties:{formatString:{type:{formatting:{formatString:!0}}}}},cardTitle:{displayName:e.data.createDisplayNameGetter("Visual_CardTitle"),description:e.data.createDisplayNameGetter("Visual_CardTitleDescription"),properties:{color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},dataLabels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}}},dataViewMappings:[{table:{rows:{"for":{"in":"Values"},dataReductionAlgorithm:{window:{}}},rowCount:{preferred:{min:1}}}}],suppressDefaultTitle:!0,supportsSelection:!1}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){e.textboxCapabilities={objects:{general:{properties:{paragraphs:{type:{paragraphs:{}}}}}},suppressDefaultTitle:!0,supportsSelection:!1}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.cheerMeterCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping},{name:"Y",kind:e.VisualDataRoleKind.Measure,requiredTypes:[{numeric:!0},{integer:!0}]}],dataViewMappings:[{categorical:{categories:{"for":{"in":"Category"}}}}],dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}}}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.scatterChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Details"),description:e.data.createDisplayNameGetter("Role_DisplayName_DetailsScatterChartDescription")},{name:"Series",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Legend"),description:e.data.createDisplayNameGetter("Role_DisplayName_LegendDescription")},{name:"X",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_X"),description:e.data.createDisplayNameGetter("Role_DisplayName_XScatterChartDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Y",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Y"),description:e.data.createDisplayNameGetter("Role_DisplayName_YScatterChartDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Size",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Size"),description:e.data.createDisplayNameGetter("Role_DisplayName_SizeDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Play",kind:e.VisualDataRoleKind.Grouping,displayName:"Play Axis"}],objects:{dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{defaultColor:{displayName:e.data.createDisplayNameGetter("Visual_DefaultColor"),type:{fill:{solid:{color:!0}}}},showAllDataPoints:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint_Show_All"),type:{bool:!0}},fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Category"]}}}}},general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},valueAxis:{displayName:e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),description:e.data.createDisplayNameGetter("Visual_YAxis_PositionDescription"),type:{enumeration:t.yAxisPosition.type}},axisScale:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Scale"),type:{enumeration:t.axisScale.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},xAxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_X"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},position:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange_Description"),type:{enumeration:t.referenceLinePosition.type}},dataLabelShow:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Show_Description"),type:{bool:!0}},dataLabelColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color_Description"),type:{fill:{solid:{color:!0}}}},dataLabelDecimalPoints:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Decimal_Points"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},dataLabelHorizontalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Horizontal_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Horizontal_Position_Description"),type:{enumeration:t.referenceLineDataLabelHorizontalPosition.type}},dataLabelVerticalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Vertical_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Vertical_Position_Description"),type:{enumeration:t.referenceLineDataLabelVerticalPosition.type}}}},y1AxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Y"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},position:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange_Description"),type:{enumeration:t.referenceLinePosition.type}},dataLabelShow:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Show_Description"),type:{bool:!0}},dataLabelColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color_Description"),type:{fill:{solid:{color:!0}}}},dataLabelDecimalPoints:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Decimal_Points"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},dataLabelHorizontalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Horizontal_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Horizontal_Position_Description"),type:{enumeration:t.referenceLineDataLabelHorizontalPosition.type}},dataLabelVerticalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Vertical_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Vertical_Position_Description"),type:{enumeration:t.referenceLineDataLabelVerticalPosition.type}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0},suppressFormatPainterCopy:!0},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},colorBorder:{displayName:e.data.createDisplayNameGetter("Visual_ColorBorder"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}}}},fillPoint:{displayName:e.data.createDisplayNameGetter("Visual_FillPoint"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{bool:!0}}}},colorByCategory:{displayName:e.data.createDisplayNameGetter("Visual_ColorByCategory"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}}}},currentFrameIndex:{properties:{index:{type:{numeric:!0}}}},plotArea:{displayName:e.data.createDisplayNameGetter("Visual_Plot"),properties:{transparency:{displayName:e.data.createDisplayNameGetter("Visual_Background_Transparency"),type:{numeric:!0}},image:{type:{image:{}}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Series:{max:1},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:0},Play:{max:0}},{Category:{max:1},Series:{max:0},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:1},Play:{max:0}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{sample:{}}},values:{group:{by:"Series",select:[{bind:{to:"X"}},{bind:{to:"Y"}},{bind:{to:"Size"}},{bind:{to:"Gradient"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2}}}},{conditions:[{Category:{max:1},Series:{max:1},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:0},Play:{min:1,max:1}},{Category:{max:1},Series:{max:0},X:{max:1},Y:{max:1},Size:{max:1},Gradient:{max:1},Play:{min:1,max:1}}],matrix:{rows:{select:[{bind:{to:"Play"}},{bind:{to:"Category"}}],dataReductionAlgorithm:{bottom:{count:5e3}}},columns:{"for":{"in":"Series"},dataReductionAlgorithm:{top:{count:60}}},values:{select:[{bind:{to:"X"}},{bind:{to:"Y"}},{bind:{to:"Size"}}]}}}],sorting:{custom:{}},drilldown:{roles:["Category"]}},t.scatterChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"}},colorBorder:{show:{objectName:"colorBorder",propertyName:"show"}},fillPoint:{show:{objectName:"fillPoint",propertyName:"show"}},colorByCategory:{show:{objectName:"colorByCategory",propertyName:"show"}},currentFrameIndex:{index:{objectName:"currentFrameIndex",propertyName:"index"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}},plotArea:{image:{objectName:"plotArea",propertyName:"image"},transparency:{objectName:"plotArea",propertyName:"transparency"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.slicerCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Field"),description:e.data.createDisplayNameGetter("Role_DisplayName_FieldDescription")}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{selected:{type:{bool:!0}},filter:{type:{filter:{}},rule:{output:{property:"selected",selector:["Values"]}}},defaultValue:{type:{expression:{defaultValue:!0}}},formatString:{type:{formatting:{formatString:!0}}},outlineColor:{displayName:e.data.createDisplayNameGetter("Visual_OutlineColor"),type:{fill:{solid:{color:!0}}}},outlineWeight:{displayName:e.data.createDisplayNameGetter("Visual_OutlineWeight"),type:{numeric:!0}},orientation:{displayName:e.data.createDisplayNameGetter("Slicer_Orientation"),type:{enumeration:t.slicerOrientation.type}},count:{type:{integer:!0}}}},selection:{displayName:e.data.createDisplayNameGetter("Visual_SelectionControls"),properties:{selectAllCheckboxEnabled:{displayName:e.data.createDisplayNameGetter("Visual_SelectAll"),type:{bool:!0}},singleSelect:{displayName:e.data.createDisplayNameGetter("Visual_SingleSelect"),type:{bool:!0}}}},header:{displayName:e.data.createDisplayNameGetter("Visual_Header"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},background:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}},textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}}}},items:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Items"),properties:{fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},background:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}},textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}}}}},dataViewMappings:[{conditions:[{Values:{max:1},ValuesCount:{min:0,max:1}}],categorical:{categories:{"for":{"in":"Values"},dataReductionAlgorithm:{window:{}}},includeEmptyGroups:!0}}],sorting:{"default":{}},suppressDefaultTitle:!0,disableSeeData:!0},t.slicerProps={general:{outlineColor:{objectName:"general",propertyName:"outlineColor"},outlineWeight:{objectName:"general",propertyName:"outlineWeight"},orientation:{objectName:"general",propertyName:"orientation"},count:{objectName:"general",propertyName:"count"}},selection:{selectAllCheckboxEnabled:{objectName:"selection",propertyName:"selectAllCheckboxEnabled"},singleSelect:{objectName:"selection",propertyName:"singleSelect"}},header:{show:{objectName:"header",propertyName:"show"},fontColor:{objectName:"header",propertyName:"fontColor"},background:{objectName:"header",propertyName:"background"},outline:{objectName:"header",propertyName:"outline"},textSize:{objectName:"header",propertyName:"textSize"}},items:{fontColor:{objectName:"items",propertyName:"fontColor"},background:{objectName:"items",propertyName:"background"},outline:{objectName:"items",propertyName:"outline"},textSize:{objectName:"items",propertyName:"textSize"}},selectedPropertyIdentifier:{objectName:"general",propertyName:"selected"},filterPropertyIdentifier:{objectName:"general",propertyName:"filter"},formatString:{objectName:"general",propertyName:"formatString"},defaultValue:{objectName:"general",propertyName:"defaultValue"}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.tableCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.GroupingOrMeasure}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}},columnWidth:{type:{numeric:!0}},totals:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_Totals")},autoSizeColumnWidth:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_Adjust_Column_Width")},textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}},outlineColor:{displayName:e.data.createDisplayNameGetter("Visual_OutlineColor"),type:{fill:{solid:{color:!0}}}},outlineWeight:{displayName:e.data.createDisplayNameGetter("Visual_OutlineWeight"),type:{numeric:!0}}}},columns:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Columns"),properties:{showSeparators:{displayName:e.data.createDisplayNameGetter("Tablix_Column_Separator"),type:{bool:!0}},separatorColor:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},columnSeparatorWeight:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Weight"),type:{numeric:!0}}}},header:{displayName:e.data.createDisplayNameGetter("Visual_Header"),properties:{fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},backgroundColor:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}}}},rows:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Rows"),properties:{showSeparators:{displayName:e.data.createDisplayNameGetter("Tablix_Row_Separator"),type:{bool:!0}},fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},backgroundColor:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}}}},totals:{displayName:e.data.createDisplayNameGetter("Visual_Totals"),properties:{fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},backgroundColor:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}}}}},dataViewMappings:[{
table:{rows:{"for":{"in":"Values"},dataReductionAlgorithm:{window:{count:500}}},rowCount:{preferred:{min:1}}}}],sorting:{custom:{}},suppressDefaultTitle:!0,supportsSelection:!1,disableSeeData:!0}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.matrixRoleNames={rows:"Rows",columns:"Columns",values:"Values"},t.matrixCapabilities={dataRoles:[{name:t.matrixRoleNames.rows,kind:e.VisualDataRoleKind.Grouping,description:e.data.createDisplayNameGetter("Role_DisplayName_RowsDescription")},{name:t.matrixRoleNames.columns,kind:e.VisualDataRoleKind.Grouping,description:e.data.createDisplayNameGetter("Role_DisplayName_ColumnsDescription")},{name:t.matrixRoleNames.values,kind:e.VisualDataRoleKind.Measure}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}},columnWidth:{type:{numeric:!0}},rowSubtotals:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_TotalRow")},columnSubtotals:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_TotalColumn")},autoSizeColumnWidth:{type:{bool:!0},displayName:e.data.createDisplayNameGetter("Visual_Adjust_Column_Width")},textSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{numeric:!0}},outlineColor:{displayName:e.data.createDisplayNameGetter("Visual_OutlineColor"),type:{fill:{solid:{color:!0}}}},outlineWeight:{displayName:e.data.createDisplayNameGetter("Visual_OutlineWeight"),type:{numeric:!0}}}},columns:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Columns"),properties:{showSeparators:{displayName:e.data.createDisplayNameGetter("Tablix_Column_Separator"),type:{bool:!0}},separatorColor:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Color"),type:{fill:{solid:{color:!0}}}},columnSeparatorWeight:{displayName:e.data.createDisplayNameGetter("Visual_BasicShape_Weight"),type:{numeric:!0}}}},header:{displayName:e.data.createDisplayNameGetter("Visual_Header"),properties:{fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},backgroundColor:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}}}},rows:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Rows"),properties:{showSeparators:{displayName:e.data.createDisplayNameGetter("Tablix_Row_Separator"),type:{bool:!0}},fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},backgroundColor:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}}}},values:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),properties:{fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},backgroundColor:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}}}},totals:{displayName:e.data.createDisplayNameGetter("Visual_Totals"),properties:{fontColor:{displayName:e.data.createDisplayNameGetter("Visual_FontColor"),type:{fill:{solid:{color:!0}}}},backgroundColor:{displayName:e.data.createDisplayNameGetter("Visual_Background"),type:{fill:{solid:{color:!0}}}},outline:{displayName:e.data.createDisplayNameGetter("Visual_Outline"),type:{enumeration:t.outline.type}},leadingSpace:{displayName:e.data.createDisplayNameGetter("Tablix_Total_LeadingSpace"),type:{numeric:!0}}}}},dataViewMappings:[{conditions:[{Rows:{max:0},Columns:{max:0},Values:{min:1}},{Rows:{min:1},Columns:{min:0},Values:{min:0}},{Rows:{min:0},Columns:{min:1},Values:{min:0}}],matrix:{rows:{"for":{"in":"Rows"},dataReductionAlgorithm:{window:{count:500}}},columns:{"for":{"in":"Columns"},dataReductionAlgorithm:{top:{count:100}}},values:{"for":{"in":"Values"}}}}],filterMappings:{measureFilter:{targetRoles:[t.matrixRoleNames.rows]}},sorting:{custom:{}},suppressDefaultTitle:!0,supportsSelection:!1,disableSeeData:!0}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.treemapCapabilities={dataRoles:[{name:"Group",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Group"),description:e.data.createDisplayNameGetter("Role_DisplayName_GroupTreemapDescription")},{name:"Details",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Details")},{name:"Values",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Values"),description:e.data.createDisplayNameGetter("Role_DisplayName_ValuesDescription"),requiredTypes:[{numeric:!0},{integer:!0}]},{name:"Gradient",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Gradient"),description:e.data.createDisplayNameGetter("Role_DisplayName_GradientDescription"),requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{fill:{type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Group"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:{type:{bool:!0}}}}},dataViewMappings:[{conditions:[{Group:{max:1},Details:{max:0},Gradient:{max:1}},{Group:{max:1},Details:{min:1,max:1},Values:{max:1},Gradient:{max:0}}],categorical:{categories:{"for":{"in":"Group"},dataReductionAlgorithm:{top:{}}},values:{group:{by:"Details",select:[{bind:{to:"Values"}},{bind:{to:"Gradient"}}],dataReductionAlgorithm:{top:{}}}},rowCount:{preferred:{min:2}}}}],supportsHighlight:!0,sorting:{custom:{},implicit:{clauses:[{role:"Values",direction:2}]}},drilldown:{roles:["Group"]}},t.treemapProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{fill:{objectName:"dataPoint",propertyName:"fill"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"},labelColor:{objectName:"legend",propertyName:"labelColor"}},labels:{show:{objectName:"labels",propertyName:"show"},color:{objectName:"labels",propertyName:"color"},labelDisplayUnits:{objectName:"labels",propertyName:"labelDisplayUnits"},labelPrecision:{objectName:"labels",propertyName:"labelPrecision"}},categoryLabels:{show:{objectName:"categoryLabels",propertyName:"show"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.cardCapabilities={dataRoles:[{name:"Values",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_Fields"),description:e.data.createDisplayNameGetter("Role_DisplayName_FieldsDescription")}],objects:{general:{properties:{formatString:{type:{formatting:{formatString:!0}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointLabel"),properties:{color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabel"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},wordWrap:{displayName:e.data.createDisplayNameGetter("Visual_WordWrap"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}}}}},dataViewMappings:[{conditions:[{Values:{max:1}}],single:{role:"Values"}}],suppressDefaultTitle:!0,supportsSelection:!1},t.cardProps={categoryLabels:{show:{objectName:"categoryLabels",propertyName:"show"},color:{objectName:"categoryLabels",propertyName:"color"},fontSize:{objectName:"categoryLabels",propertyName:"fontSize"}},labels:{color:{objectName:"labels",propertyName:"color"},labelPrecision:{objectName:"labels",propertyName:"labelPrecision"},labelDisplayUnits:{objectName:"labels",propertyName:"labelDisplayUnits"},fontSize:{objectName:"labels",propertyName:"fontSize"}},wordWrap:{show:{objectName:"wordWrap",propertyName:"show"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.waterfallChartCapabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping,description:e.data.createDisplayNameGetter("Role_DisplayName_CategoryWaterfallDescription")},{name:"Y",kind:e.VisualDataRoleKind.Measure,requiredTypes:[{numeric:!0},{integer:!0}]}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},legend:{displayName:e.data.createDisplayNameGetter("Visual_Legend"),description:e.data.createDisplayNameGetter("Visual_LegendDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_LegendPosition"),description:e.data.createDisplayNameGetter("Visual_LegendPositionDescription"),type:{enumeration:t.legendPosition.type}},showTitle:{displayName:e.data.createDisplayNameGetter("Visual_LegendShowTitle"),description:e.data.createDisplayNameGetter("Visual_LegendShowTitleDescription"),type:{bool:!0}},titleText:{displayName:e.data.createDisplayNameGetter("Visual_LegendName"),description:e.data.createDisplayNameGetter("Visual_LegendNameDescription"),type:{text:!0},suppressFormatPainterCopy:!0},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_LegendTitleColor"),type:{fill:{solid:{color:!0}}}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}},suppressFormatPainterCopy:!0},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0},suppressFormatPainterCopy:!0},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},sentimentColors:{displayName:e.data.createDisplayNameGetter("Waterfall_SentimentColors"),properties:{increaseFill:{displayName:e.data.createDisplayNameGetter("Waterfall_IncreaseLabel"),type:{fill:{solid:{color:!0}}}},decreaseFill:{displayName:e.data.createDisplayNameGetter("Waterfall_DecreaseLabel"),type:{fill:{solid:{color:!0}}}},totalFill:{displayName:e.data.createDisplayNameGetter("Waterfall_TotalLabel"),type:{fill:{solid:{color:!0}}}}}},categoryAxis:{displayName:e.data.createDisplayNameGetter("Visual_XAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_XTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}}}},valueAxis:{displayName:e.data.createDisplayNameGetter("Visual_YAxis"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},position:{displayName:e.data.createDisplayNameGetter("Visual_YAxis_Position"),description:e.data.createDisplayNameGetter("Visual_YAxis_PositionDescription"),type:{enumeration:t.yAxisPosition.type}},start:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Start"),description:e.data.createDisplayNameGetter("Visual_Axis_StartDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},end:{displayName:e.data.createDisplayNameGetter("Visual_Axis_End"),description:e.data.createDisplayNameGetter("Visual_Axis_EndDescription"),type:{numeric:!0},suppressFormatPainterCopy:!0},showAxisTitle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Title"),description:e.data.createDisplayNameGetter("Visual_Axis_YTitleDescription"),type:{bool:!0}},axisStyle:{displayName:e.data.createDisplayNameGetter("Visual_Axis_Style"),type:{enumeration:t.axisStyle.type}},labelColor:{displayName:e.data.createDisplayNameGetter("Visual_Axis_LabelColor"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}}}},y1AxisReferenceLine:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Description"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},value:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Value"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Value_Description"),type:{numeric:!0}},lineColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Color_Description"),type:{fill:{solid:{color:!0}}}},transparency:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Transparency_Description"),type:{numeric:!0}},style:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Style"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Style_Description"),type:{enumeration:t.lineStyle.type}},position:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Arrange_Description"),type:{enumeration:t.referenceLinePosition.type}},dataLabelShow:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Show_Description"),type:{bool:!0}},dataLabelColor:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Color_Description"),type:{fill:{solid:{color:!0}}}},dataLabelDecimalPoints:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Decimal_Points"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},dataLabelHorizontalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Horizontal_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Horizontal_Position_Description"),type:{enumeration:t.referenceLineDataLabelHorizontalPosition.type}},dataLabelVerticalPosition:{displayName:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Vertical_Position"),description:e.data.createDisplayNameGetter("Visual_Reference_Line_Data_Label_Vertical_Position_Description"),type:{enumeration:t.referenceLineDataLabelVerticalPosition.type}}}}},dataViewMappings:[{conditions:[{Category:{max:1},Y:{max:1}}],categorical:{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{bind:{to:"Y"}}]}}}],drilldown:{roles:["Category"]}},t.waterfallChartProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},sentimentColors:{increaseFill:{objectName:"sentimentColors",propertyName:"increaseFill"},decreaseFill:{objectName:"sentimentColors",propertyName:"decreaseFill"},totalFill:{objectName:"sentimentColors",propertyName:"totalFill"}},legend:{labelColor:{objectName:"legend",propertyName:"labelColor"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.sunburstCapabilities={dataRoles:[{name:"Nodes",kind:e.VisualDataRoleKind.Grouping,displayName:"Groups"},{name:"Values",kind:e.VisualDataRoleKind.Measure,displayName:"Values"}],objects:{general:{displayName:e.data.createDisplayNameGetter("Visual_General"),properties:{formatString:{type:{formatting:{formatString:!0}}}}},dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{fill:{type:{fill:{solid:{color:!0}}}},fillRule:{displayName:e.data.createDisplayNameGetter("Visual_Gradient"),type:{fillRule:{}},rule:{inputRole:"Gradient",output:{property:"fill",selector:["Group"]}}}}},labels:{displayName:e.data.createDisplayNameGetter("Visual_DataPointsLabels"),description:e.data.createDisplayNameGetter("Visual_DataPointsLabelsDescription"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}},color:{displayName:e.data.createDisplayNameGetter("Visual_LabelsFill"),description:e.data.createDisplayNameGetter("Visual_LabelsFillDescription"),type:{fill:{solid:{color:!0}}}},labelDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}}},labelPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),type:{numeric:!0}}}},categoryLabels:{displayName:e.data.createDisplayNameGetter("Visual_CategoryLabels"),description:e.data.createDisplayNameGetter("Visual_CategoryLabelsDescription"),properties:{show:{type:{bool:!0}}}}},dataViewMappings:[{conditions:[{Groups:{min:0},Values:{max:1}}],matrix:{rows:{"for":{"in":"Nodes"}},values:{"for":{"in":"Values"}}}}],supportsHighlight:!0,sorting:{custom:{},implicit:{clauses:[{role:"Values",direction:2}]}},drilldown:{roles:["Group"]}},t.sunburstProps={general:{formatString:{objectName:"general",propertyName:"formatString"}},dataPoint:{fill:{objectName:"dataPoint",propertyName:"fill"}},legend:{show:{objectName:"legend",propertyName:"show"},position:{objectName:"legend",propertyName:"position"},showTitle:{objectName:"legend",propertyName:"showTitle"},titleText:{objectName:"legend",propertyName:"titleText"},labelColor:{objectName:"legend",propertyName:"labelColor"}},labels:{show:{objectName:"labels",propertyName:"show"},color:{objectName:"labels",propertyName:"color"},labelDisplayUnits:{objectName:"labels",propertyName:"labelDisplayUnits"},labelPrecision:{objectName:"labels",propertyName:"labelPrecision"}},categoryLabels:{show:{objectName:"categoryLabels",propertyName:"show"}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.KPIStatusWithHistoryCapabilities={dataRoles:[{name:"Indicator",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Indicator"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_IndicatorDescription")},{name:"TrendLine",kind:e.VisualDataRoleKind.Grouping,displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_TrendLine"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Trendline_Description")},{name:"Goal",kind:e.VisualDataRoleKind.Measure,displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Goal"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_GoalDescription")}],dataViewMappings:[{conditions:[{Indicator:{max:1},TrendLine:{max:1},Goal:{max:2}}],categorical:{categories:{"for":{"in":"TrendLine"},dataReductionAlgorithm:{top:{}}},values:{select:[{bind:{to:"Indicator"}},{bind:{to:"Goal"}}]}}}],objects:{general:{properties:{formatString:{type:{formatting:{formatString:!0}}}}},indicator:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Indicator"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_IndicatorDescription"),properties:{indicatorDisplayUnits:{displayName:e.data.createDisplayNameGetter("Visual_DisplayUnits"),description:e.data.createDisplayNameGetter("Visual_DisplayUnitsDescription"),type:{formatting:{labelDisplayUnits:!0}}},indicatorPrecision:{displayName:e.data.createDisplayNameGetter("Visual_Precision"),description:e.data.createDisplayNameGetter("Visual_PrecisionDescription"),placeHolderText:e.data.createDisplayNameGetter("Visual_Precision_Auto"),type:{numeric:!0}},kpiFormat:{displayName:e.data.createDisplayNameGetter("TaskPane_Format"),type:{text:!0}},fontSize:{displayName:e.data.createDisplayNameGetter("Visual_TextSize"),type:{formatting:{fontSize:!0}}}}},trendline:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_TrendLine"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Trendline_Description"),properties:{show:{displayName:e.data.createDisplayNameGetter("Visual_Show"),type:{bool:!0}}}},goals:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Goals"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_GoalDescription"),properties:{showGoal:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Show_Goal"),type:{bool:!0}},showDistance:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Show_Distance"),type:{bool:!0}}}},status:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Status"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Status"),properties:{direction:{displayName:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Direction"),description:e.data.createDisplayNameGetter("Role_DisplayName_KPI_Direction"),type:{enumeration:t.kpiDirection.type}}}}}}}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.animatedNumber=e.visuals.animatedNumberCapabilities,t.areaChart=e.visuals.lineChartCapabilities,t.barChart=e.visuals.getColumnChartCapabilities(!0),t.card=e.visuals.cardCapabilities,t.multiRowCard=e.visuals.multiRowCardCapabilities,t.clusteredBarChart=e.visuals.getColumnChartCapabilities(!0),t.clusteredColumnChart=e.visuals.getColumnChartCapabilities(),t.columnChart=e.visuals.getColumnChartCapabilities(),t.comboChart=e.visuals.comboChartCapabilities,t.dataDotChart=e.visuals.dataDotChartCapabilities,t.dataDotClusteredColumnComboChart=e.visuals.comboChartCapabilities,t.dataDotStackedColumnComboChart=e.visuals.comboChartCapabilities,t.donutChart=e.visuals.donutChartCapabilities,t.funnel=e.visuals.funnelChartCapabilities,t.gauge=e.visuals.gaugeCapabilities,t.hundredPercentStackedBarChart=e.visuals.getColumnChartCapabilities(!0),t.hundredPercentStackedColumnChart=e.visuals.getColumnChartCapabilities(),t.image=e.visuals.imageVisualCapabilities,t.lineChart=e.visuals.lineChartCapabilities,t.lineStackedColumnComboChart=e.visuals.comboChartCapabilities,t.lineClusteredColumnComboChart=e.visuals.comboChartCapabilities,t.map=e.visuals.mapCapabilities,t.filledMap=e.visuals.filledMapCapabilities,t.treemap=e.visuals.treemapCapabilities,t.pieChart=e.visuals.donutChartCapabilities,t.scatterChart=e.visuals.scatterChartCapabilities,t.table=e.visuals.tableCapabilities,t.matrix=e.visuals.matrixCapabilities,t.slicer=e.visuals.slicerCapabilities,t.textbox=e.visuals.textboxCapabilities,t.waterfallChart=e.visuals.waterfallChartCapabilities,t.cheerMeter=e.visuals.cheerMeterCapabilities,t.sunburst=e.visuals.sunburstCapabilities,t.scriptVisual=e.visuals.scriptVisualCapabilities,t.kpi=e.visuals.KPIStatusWithHistoryCapabilities}(i=t.capabilities||(t.capabilities={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){this.options=e;var i=e.bars;i.on("click",function(e,i){t.handleSelection(e,d3.event.ctrlKey)})},t.prototype.renderSelection=function(t){var i=this.options;i.bars.style("fill-opacity",function(a){return e.ColumnUtil.getFillOpacity(a.selected,a.highlight,!a.highlight&&t,!a.selected&&i.hasHighlights)})},t}();e.ColumnChartWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){var i=this.dots=e.dots,a=e.dotLabels;i.on("click",function(e){t.handleSelection(e,d3.event.ctrlKey)}),a&&a.on("click",function(e){t.handleSelection(e,d3.event.ctrlKey)})},t.prototype.renderSelection=function(t){this.dots.style("fill-opacity",function(i){return e.ColumnUtil.getFillOpacity(i.selected,i.highlight,t,!1)})},t}();e.DataDotChartWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){var i=this.slices=e.slices,a=this.highlightSlices=e.highlightSlices,r=e.clearCatcher;this.hasHighlights=e.hasHighlights;var n=function(e){t.handleSelection(e.data,d3.event.ctrlKey)};i.on("click",n),a.on("click",n),r.on("click",function(){t.handleClearSelection()})},t.prototype.renderSelection=function(t){var i=this.hasHighlights;this.slices.style("fill-opacity",function(a){return e.ColumnUtil.getFillOpacity(a.data.selected,!1,t,i&&!a.data.selected)}),this.highlightSlices.style("fill-opacity",function(t){return e.ColumnUtil.getFillOpacity(t.data.selected,!0,!1,i)})},t}();e.DonutChartWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){var i=this.bars=e.bars,a=this.interactors=e.interactors,r=e.clearCatcher;this.hasHighlights=e.hasHighlights,i.on("click",function(e,i){t.handleSelection(e,d3.event.ctrlKey)}),a.on("click",function(e,i){t.handleSelection(e,d3.event.ctrlKey)}),r.on("click",function(){t.handleClearSelection()})},t.prototype.renderSelection=function(t){var i=this.hasHighlights;this.bars.style("fill-opacity",function(a){return e.ColumnUtil.getFillOpacity(a.selected,a.highlight,!a.highlight&&t,!a.selected&&i)})},t}();e.FunnelWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){this.lines=e.lines;var i=e.interactivityLines,a=this.dots=e.dots,r=this.areas=e.areas,n=this.tooltipOverlay=e.tooltipOverlay,o=function(e){t.handleSelection(e,d3.event.ctrlKey)};i.on("click",o),a.on("click",o),r&&r.on("click",o),n&&n.on("click",function(){return t.handleClearSelection()})},t.prototype.renderSelection=function(t){this.lines.style("stroke-opacity",function(i){return e.ColumnUtil.getFillOpacity(i.selected,!1,t,!1)}),this.dots.style("fill-opacity",function(i){return e.ColumnUtil.getFillOpacity(i.selected,!1,t,!1)}),this.areas&&this.areas.style("fill-opacity",function(i){return t&&!i.selected?e.LineChart.DimmedAreaFillOpacity:e.LineChart.AreaFillOpacity})},t}();e.LineChartWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){this.mapPointerEventsDisabled=!1,this.mapPointerTimeoutSet=!1,this.viewChangedSinceLastClearMouseDown=!1}return t.prototype.bindEvents=function(e,t){var i=this,a=this.bubbles=e.bubbles,r=this.slices=e.slices,n=this.shapes=e.shapes,o=e.clearCatcher,s=function(e){a&&a.style("pointer-events","all"),n&&n.style("pointer-events","all"),t.handleSelection(e,d3.event.ctrlKey)};this.mapPointerEventsDisabled||(a&&a.style("pointer-events","all"),r&&r.style("pointer-events","all"),n&&n.style("pointer-events","all")),a&&(a.on("click",s),a.on("mousewheel",function(){i.mapPointerEventsDisabled||a.style("pointer-events","none"),i.mapPointerEventsDisabled=!0,i.mapPointerTimeoutSet||(i.mapPointerTimeoutSet=!0,setTimeout(function(){a&&a.style("pointer-events","all"),i.mapPointerEventsDisabled=!1,i.mapPointerTimeoutSet=!1},200))})),r&&(r.on("click",function(e){r.style("pointer-events","all"),i.mapPointerEventsDisabled=!1,t.handleSelection(e.data,d3.event.ctrlKey)}),r.on("mousewheel",function(){i.mapPointerEventsDisabled||r.style("pointer-events","none"),i.mapPointerEventsDisabled=!0,i.mapPointerTimeoutSet||(i.mapPointerTimeoutSet=!0,setTimeout(function(){
r&&r.style("pointer-events","all"),i.mapPointerEventsDisabled=!1,i.mapPointerTimeoutSet=!1},200))})),n&&(n.on("click",s),n.on("mousewheel",function(){i.mapPointerEventsDisabled||n.style("pointer-events","none"),i.mapPointerEventsDisabled=!0,i.mapPointerTimeoutSet||(i.mapPointerTimeoutSet=!0,setTimeout(function(){n&&n.style("pointer-events","all"),i.mapPointerEventsDisabled=!1,i.mapPointerTimeoutSet=!1},200))})),o.on("mouseup",function(){i.viewChangedSinceLastClearMouseDown||t.handleClearSelection()}),o.on("mousedown",function(){i.viewChangedSinceLastClearMouseDown=!1})},t.prototype.renderSelection=function(t){this.bubbles&&this.bubbles.style({"fill-opacity":function(i){return e.ColumnUtil.getFillOpacity(i.selected,!1,t,!1)},"stroke-opacity":function(i){return e.ColumnUtil.getFillOpacity(i.selected,!1,t,!1)}}),this.slices&&this.slices.style({"fill-opacity":function(i){return e.ColumnUtil.getFillOpacity(i.data.selected,!1,t,!1)},"stroke-opacity":function(i){return e.ColumnUtil.getFillOpacity(i.data.selected,!1,t,!1)}}),this.shapes&&this.shapes.style({"fill-opacity":function(i){return e.ColumnUtil.getFillOpacity(i.selected,!1,t,!1)},"stroke-opacity":function(i){return e.ColumnUtil.getFillOpacity(i.selected,!1,t,!1)}})},t.prototype.viewChanged=function(){this.viewChangedSinceLastClearMouseDown=!0},t}();e.MapBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=jsCommon.CssConstants.createClassAndSelector,i=function(){function t(){}return t.prototype.bindEvents=function(e,t){var i=this.bubbles=e.dataPointsSelection,a=e.data;!this.playOptions||!this.playOptions.traceLineRenderer||e.playOptions&&e.playOptions.traceLineRenderer||this.playOptions.traceLineRenderer.remove(),this.playOptions=e.playOptions,this.shouldEnableFill=(!a.sizeRange||!a.sizeRange.min)&&a.fillPoint,this.colorBorder=a.colorBorder,i.on("click",function(e){t.handleSelection(e,d3.event.ctrlKey)})},t.prototype.renderSelection=function(t){var i=this.shouldEnableFill,a=this.colorBorder;if(this.bubbles.style("fill-opacity",function(a){return null!=a.size||i?e.ScatterChart.getBubbleOpacity(a,t):0}),this.bubbles.style("stroke-opacity",function(i){return null!=i.size&&a?1:e.ScatterChart.getBubbleOpacity(i,t)}),this.playOptions&&this.bubbles){var r=this.bubbles.filter(function(e){return e.selected}),n=this.playOptions.traceLineRenderer;r&&r.data().length>0&&null!=n?n.render(r.data(),!0):n.remove()}},t}();e.ScatterChartWebBehavior=i;var a=function(){function i(){}return i.prototype.bindEvents=function(e,t){this.setOptions(e),e.visualInitOptions&&e.visualInitOptions.interactivity.isInteractiveLegend&&(this.makeDataPointsSelectable(e.dataPointsSelection),this.makeRootSelectable(e.root),this.makeDragable(e.root),this.disableDefaultTouchInteractions(e.root),this.selectRoot())},i.prototype.renderSelection=function(e){},i.prototype.setSelectionHandler=function(e){},i.prototype.makeDataPointsSelectable=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];for(var a=0,r=t.length;r>a;a++){var n=t[a];n.on("click",function(t,i){e.select(!0,n,t,i)})}},i.prototype.makeRootSelectable=function(e){var t=this;e.on("click",function(e,i){t.selectRoot()})},i.prototype.makeDragable=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i-0]=arguments[i];for(var a=0,r=t.length;r>a;a++){var n=t[a],o=d3.behavior.drag().on("drag",function(t){e.drag(0)}).on("dragend",function(t){e.drag(1)});n.call(o)}},i.prototype.disableDefaultTouchInteractions=function(e){e.style("touch-action","none")},i.prototype.setOptions=function(e){this.data=e.data,this.mainGraphicsContext=e.plotContext,this.xAxisProperties=e.xAxisProperties,this.yAxisProperties=e.yAxisProperties,this.host=e.host},i.prototype.select=function(e,t,i,a){this.selectDotByIndex(a)},i.prototype.selectRoot=function(){var e=jsCommon.PerformanceUtil.create("selectRoot");this.onClick(),e.end()},i.prototype.drag=function(e){switch(e){case 0:this.onDrag();break;case 1:this.onClick()}},i.prototype.onDrag=function(){var e=this.getMouseCoordinates();this.moveCrosshairToXY(e.x,e.y);var t=this.findClosestDotIndex(e.x,e.y);this.selectDot(t),this.updateLegend(t)},i.prototype.onClick=function(){var e=this.getMouseCoordinates(),t=this.findClosestDotIndex(e.x,e.y);-1!==t&&this.selectDotByIndex(t)},i.prototype.getMouseCoordinates=function(){var e=this.mainGraphicsContext,t=0,i=parseInt(e.attr("height"),10);i=i||0;try{var a=d3.mouse(e.node());t=a[0],i=a[1]}catch(r){}return{x:t,y:i}},i.prototype.selectDotByIndex=function(e){this.selectDot(e),this.moveCrosshairToIndexDot(e),this.updateLegend(e)},i.prototype.selectDot=function(e){var t=this,a=this.mainGraphicsContext;a.selectAll(i.ScatterChartCircleTagName+i.DotClassSelector).classed({selected:!1,notSelected:!0}),a.selectAll(i.ScatterChartCircleTagName+i.DotClassSelector).filter(function(i,a){var r=t.data.dataPoints,n=r[e];return i.x===n.x&&i.y===n.y}).classed({selected:!0,notSelected:!1})},i.prototype.moveCrosshairToIndexDot=function(e){var t=this.data.dataPoints,a=this.mainGraphicsContext,r=this.xAxisProperties.scale(t[e].x),n=this.yAxisProperties.scale(t[e].y);if(null==this.crosshair){var o=+a.attr("width"),s=+a.attr("height");this.crosshair=this.drawCrosshair(a,r,n,o,s),this.crosshairHorizontal=this.crosshair.select(i.Horizontal.selector),this.crosshairVertical=this.crosshair.select(i.Vertical.selector)}else this.moveCrosshairToXY(r,n)},i.prototype.moveCrosshairToXY=function(e,t){this.crosshairHorizontal.attr({y1:t,y2:t}),this.crosshairVertical.attr({x1:e,x2:e})},i.prototype.drawCrosshair=function(e,t,a,r,n){var o=e.append("g");return o.classed(i.CrosshairClassName,!0),o.append("line").classed(i.Horizontal["class"],!0).attr({x1:0,x2:r,y1:a,y2:a}),o.append("line").classed(i.Vertical["class"],!0).attr({x1:t,x2:t,y1:n,y2:0}),o},i.prototype.findClosestDotIndex=function(e,t){var i=-1,a=Number.MAX_VALUE,r=this.data.dataPoints,n=this.xAxisProperties.scale,o=this.yAxisProperties.scale;for(var s in r){var l=r[s],u=n(l.x),c=o(l.y),h=u-e,d=c-t,p=h*h+d*d;a===Number.MAX_VALUE?(i=s,a=p):a&&a>p&&(i=s,a=p)}return i},i.prototype.updateLegend=function(e){if(null==this.lastDotIndex||this.lastDotIndex!==e){var t=this.createLegendDataPoints(e);this.host.updateLegend(t),this.lastDotIndex=e}},i.prototype.createLegendDataPoints=function(t){var i=e.scatterChartProps.general.formatString,a=[],r=this.data,n=r.dataPoints[t],o=e.valueFormatter.format(null),s=o,l=r.legendData,u=l.dataPoints;return n.category!==o?s=n.category:null!=n.radius.sizeMeasure?s=e.valueFormatter.format(n.radius.sizeMeasure.source.groupName):u.length>=t&&u[t].label!==o&&(s=u[t].label),null!=r.xCol&&a.push({category:s,color:n.fill,identity:e.SelectionIdBuilder.builder().withMeasure(r.xCol.queryName).createSelectionId(),selected:n.selected,icon:e.LegendIcon.Box,label:e.valueFormatter.format(this.data.axesLabels.x),measure:e.valueFormatter.format(n.x,e.valueFormatter.getFormatString(r.xCol,i)),iconOnlyOnLabel:!0}),null!=r.yCol&&a.push({category:s,color:n.fill,identity:e.SelectionIdBuilder.builder().withMeasure(r.yCol.queryName).createSelectionId(),selected:n.selected,icon:e.LegendIcon.Box,label:e.valueFormatter.format(r.axesLabels.y),measure:e.valueFormatter.format(n.y,e.valueFormatter.getFormatString(r.yCol,i)),iconOnlyOnLabel:!0}),null!=r.size&&a.push({category:s,color:n.fill,identity:e.SelectionIdBuilder.builder().withMeasure(r.size.queryName).createSelectionId(),selected:n.selected,icon:e.LegendIcon.Box,label:e.valueFormatter.format(r.size.displayName),measure:e.valueFormatter.format(n.radius.sizeMeasure.values[n.radius.index],e.valueFormatter.getFormatString(r.size,i)),iconOnlyOnLabel:!0}),{dataPoints:a}},i.CrosshairClassName="crosshair",i.ScatterChartCircleTagName="circle",i.DotClassName="dot",i.DotClassSelector="."+i.DotClassName,i.Horizontal=t("horizontal"),i.Vertical=t("vertical"),i}();e.ScatterChartMobileBehavior=a}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(t,i){this.itemLabels=t.itemLabels,this.dataPoints=t.dataPoints,this.interactivityService=t.interactivityService,this.slicerSettings=t.settings,e.SlicerWebBehavior.bindSlicerEvents(t.slicerContainer,this.itemLabels,t.clear,i,this.slicerSettings,this.interactivityService)},t.prototype.renderSelection=function(t){e.SlicerWebBehavior.setSelectionOnSlicerItems(this.itemLabels,this.itemLabels,t,this.interactivityService,this.slicerSettings)},t}();e.HorizontalSlicerWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(t,i){var a=t.itemContainers;this.itemLabels=t.itemLabels,this.itemInputs=t.itemInputs,this.dataPoints=t.dataPoints,this.interactivityService=t.interactivityService,this.settings=t.settings,e.SlicerWebBehavior.bindSlicerEvents(t.slicerContainer,a,t.clear,i,this.settings,this.interactivityService)},t.prototype.renderSelection=function(t){e.SlicerWebBehavior.setSelectionOnSlicerItems(this.itemInputs,this.itemLabels,t,this.interactivityService,this.settings)},t}();e.VerticalSlicerWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){this.behavior=this.createWebBehavior(e),this.behavior.bindEvents(e.behaviorOptions,t)},t.prototype.renderSelection=function(e){this.behavior.renderSelection(e)},t.bindSlicerEvents=function(e,i,a,r,n,o){t.bindSlicerItemSelectionEvent(i,r,n,o),t.bindSlicerClearEvent(a,r),t.styleSlicerContainer(e,o)},t.setSelectionOnSlicerItems=function(e,i,a,r,n){if(a||r.isSelectionModeInverted())t.styleSlicerItems(e,a,r.isSelectionModeInverted());else{e.filter(".selected").classed("selected",!1),e.filter(".partiallySelected").classed("partiallySelected",!1);var o=e.selectAll("input");o&&o.property("checked",!1),i.style("color",n.slicerText.color)}},t.styleSlicerItems=function(e,t,i){e.each(function(e){var a=this,r=!1;e.isSelectAllDataPoint?t?(a.classList.add("partiallySelected"),r=!1):(a.classList.remove("partiallySelected"),r=i):r=jsCommon.LogicExtensions.XOR(e.selected,i),r?a.classList.add("selected"):a.classList.remove("selected");var n=a.getElementsByTagName("input")[0];n&&(n.checked=r)})},t.bindSlicerItemSelectionEvent=function(i,a,r,n){i.on("click",function(i){d3.event.preventDefault(),i.isSelectAllDataPoint?a.toggleSelectionModeInversion():a.handleSelection(i,t.isMultiSelect(d3.event,r,n)),a.persistSelectionFilter(e.slicerProps.filterPropertyIdentifier)})},t.bindSlicerClearEvent=function(t,i){t&&t.on("click",function(t){i.handleClearSelection(),i.persistSelectionFilter(e.slicerProps.filterPropertyIdentifier)})},t.styleSlicerContainer=function(e,t){var i=t.hasSelection()&&void 0===t.isDefaultValueEnabled()||t.isDefaultValueEnabled()===!1;e.classed("hasSelection",i)},t.isMultiSelect=function(e,t,i){return i.isSelectionModeInverted()||!t.selection.singleSelect||e.ctrlKey},t.prototype.createWebBehavior=function(t){var i,a=t.orientation;switch(a){case 1:i=new e.HorizontalSlicerWebBehavior;break;case 0:default:i=new e.VerticalSlicerWebBehavior}return i},t}();e.SlicerWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.bindEvents=function(e,t){var i=e.legendItems;this.legendIcons=e.legendIcons;var a=e.clearCatcher;i.on("click",function(e){t.handleSelection(e,d3.event.ctrlKey)}),a.on("click",function(){t.handleClearSelection()})},e.prototype.renderSelection=function(t){t?this.legendIcons.style({fill:function(t){return t.selected?t.color:e.dimmedLegendColor}}):this.legendIcons.style({fill:function(e){return e.color}})},e.dimmedLegendColor="#A6A6A6",e}();e.LegendBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){var i=this.shapes=e.shapes,a=this.highlightShapes=e.highlightShapes,r=e.majorLabels,n=e.minorLabels;this.hasHighlights=e.hasHighlights;var o=function(e){t.handleSelection(e,d3.event.ctrlKey)};i.on("click",o),a.on("click",o),r&&r.on("click",o),n&&n.on("click",o)},t.prototype.renderSelection=function(t){var i=this.hasHighlights;this.shapes.style("fill",function(t){return e.Treemap.getFill(t,!1)}).style("fill-opacity",function(a){return e.Treemap.getFillOpacity(a,t,!a.selected&&i,!1)}),this.highlightShapes.style("fill",function(t){return e.Treemap.getFill(t,!0)}).style("fill-opacity",function(a){return e.Treemap.getFillOpacity(a,t,!a.selected&&i,!0)})},t}();e.TreemapWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function t(){}return t.prototype.bindEvents=function(e,t){var i=this.bars=e.bars;i.on("click",function(e){e.isTotal||t.handleSelection(e,d3.event.ctrlKey)})},t.prototype.renderSelection=function(t){this.bars.style("fill-opacity",function(i){return i.isTotal?e.ColumnUtil.DefaultOpacity:e.ColumnUtil.getFillOpacity(i.selected,i.highlight,t,!1)})},t}();e.WaterfallChartWebBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.bindEvents=function(e,t){this.labelItems=e.labelItems,this.labelItems.on("click",function(e){t.handleSelection(e,d3.event.ctrlKey)})},e.prototype.renderSelection=function(t){t?this.labelItems.style({opacity:function(t){return t.selected?e.DefaultLabelOpacity:e.DimmedLabelOpacity}}):this.labelItems.style({opacity:e.DefaultLabelOpacity})},e.DefaultLabelOpacity=1,e.DimmedLabelOpacity=.6,e}();e.LabelsBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(e){this.behaviors=e}return e.prototype.bindEvents=function(e,t){for(var i=this.behaviors,a=0,r=i.length;r>a;a++)i[a].bindEvents(e.layerOptions[a],t);e.clearCatcher.on("click",function(){t.handleClearSelection()})},e.prototype.renderSelection=function(e){for(var t=0,i=this.behaviors;t<i.length;t++){var a=i[t];a.renderSelection(e)}},e}();e.CartesianChartBehavior=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){t.fallBackDomain=[0,10],t.fallbackDateDomain=[new Date(2014,1,1).getTime(),new Date(2015,1,1).getTime()];var i;!function(i){function a(e){return 250>e?3:500>e?5:8}function r(e){return 150>e?3:300>e?5:8}function n(e,t,i,a,r){return isNaN(e)||isNaN(t)?Z:1>=a||1>=t&&e>=-1?a:e===t?r?1:Z:o(i)?a:Math.min(t-e+1,a)}function o(e){for(var t=0,i=e.length;i>t;t++){var a=e[t];if(a&&a.type&&!a.type.integer)return!0}return!1}function s(e,t,i,a,r){return!a||v(t)?l(e,t.domain()):b(i)?h(e,t.domain()):u(e,t,r)}function l(e,t){var i=[];if(0>=e)return i;var a=t.length;if(e>a)return t;for(var r=0,n=Math.floor(a/e);a>r;r+=n)i.push(t[r]);return i}function u(e,t,i){var a=[];if(0===e)return a;var r=t;if(r.ticks){if(a=r.ticks(e),a.length>e&&e>1&&(a=r.ticks(e-1)),a.length<Q&&(a=r.ticks(e+1)),a=c(a),i&&a.length>1){for(var n=a[1]-a[0];n>0&&i>n;){for(var o=1;o<a.length;o++)a.splice(o,1);n=2*n}1===a.length&&a.push(a[0]+i)}return a}return a}function c(e,t){if(void 0===t&&(t=1e-5),!e||e.length<2)return e;var i=t*Math.abs(e[1]-e[0]);return e.map(function(e){return Math.abs(e)<=i?0:e})}function h(t,i){var a=[],r=e.DateTimeSequence.calculate(new Date(i[0]),new Date(i[1]),t).sequence;return a=r.map(function(e){return e.getTime()}),a=L(a,i[0],i[1])}function d(e){return isNaN(e.min)||isNaN(e.max)?(e.min=t.fallBackDomain[0],e.max=t.fallBackDomain[1]):0===e.min&&0===e.max?e.max=t.fallBackDomain[1]:e.min===e.max?(e.min=e.min<0?1.2*e.min:.8*e.min,e.max=e.max<0?.8*e.max:1.2*e.max):Math.abs(e.min)<1e-4&&e.min/(e.max-e.min)<1e-4&&(e.min=0),e}function p(e,t,i,n){return 0===a(e-i)||0===r(t-n)?{top:0,right:i,bottom:n,left:0}:{top:20,right:30,bottom:40,left:30}}function g(e,t,i,n,o,s,l,u,c,h,d,p){var g=o.x,m=o.y1,f=o.y2,y=g.values,b=m.values,C=0,S=0,x=0,w=0,D=0,P=g.categoryThickness?g.categoryThickness/2:0,L=v(g.scale),_=0;if(void 0!==g.outerPadding?_=g.outerPadding:void 0!==g.xLabelMaxWidth&&(_=Math.max(0,(e.width-g.xLabelMaxWidth*y.length)/2)),0!==a(e.width)||0!==r(e.height)){var N;if(N=u?ee.DefaultRotationWithScrollbar:ee.DefaultRotation,d)for(var T=0,V=b.length;V>T;T++)l.text=b[T],x=Math.max(x,i(l));if(f&&p)for(var M=f.values,T=0,V=M.length;V>T;T++)l.text=M[T],w=Math.max(w,i(l));var A=n(l),R=Math.floor(s/A),I=g.scale,F=I.domain();if(h&&y.length>0){for(var T=0,V=y.length;V>T;T++){var O=void 0;l.text=y[T];var G=i(l);if(g.willLabelsWordBreak){var z=jsCommon.WordBreaker.splitByWidth(l.text,l,i,g.xLabelMaxWidth,R);O=z.length*A}else g.willLabelsFit?O=$:(O=G*N.sine,G*=N.cosine);if(0===T){if(L)C=g.willLabelsFit?G/2-P-_:G-P-_,C=Math.max(C,0);else if(F.length>1){var H=I(F[0]);C=G/2-H,C=Math.max(C,0)}}else if(T===V-1&&(g.willLabelsFit||g.willLabelsWordBreak))if(L)S=G/2-P-_,S=Math.max(S,0);else if(F.length>1){var H=I(F[1]);S=G/2-(e.width-H),S=Math.max(S,0)}D=Math.max(D,O)}C=Math.min(C,q),S=Math.min(S,q)}}var k=0,E=0,W=Math.min(Math.ceil(D),s);return c?(E=Math.min(Math.max(C,w),t),k=Math.min(Math.max(S,x),t)):(E=Math.min(Math.max(C,x),t),k=Math.min(Math.max(S,w),t)),{xMax:Math.ceil(W),yLeft:Math.ceil(E),yRight:Math.ceil(k)}}function m(e){return e&&(e.bool||e.numeric||e.text||e.dateTime)}function f(){return e.ValueType.fromDescriptor({text:!0})}function y(e){return!(!e||!e.text&&!e.bool)}function v(e){return"undefined"==typeof e.invert}function b(e){return!(!e||!e.dateTime)}function C(e,t){return v(e)?x(e,t):e.invert(t)}function S(e){return v(e)?e.rangeExtent():e.range()}function x(e,t){var i=e.range();if(i.length<2)return 0;var a,r=e.rangeBand(),n=(i[1]-i[0]-r)/2;for(a=0;t>i[a]+r+n&&a<i.length-1;a++);return e.domain()[a]}function w(e,t){var i=-1,a=Number.MAX_VALUE;for(var r in t){var n=Math.abs(e-t[r].categoryValue);a>n&&(a=n,i=parseInt(r,10))}return i}function D(e,t,i){var a=e(t)-e(i);return 0===a?0:0>a?Math.min(a,-1):Math.max(a,1)}function P(e,t,i,a){if(i&&!y(t)){var r,n;return a&&2===a.length&&(r=a[0],n=a[1]),I(e,r,n,t)}return O(e)}function L(e,t,i){var a=e.filter(function(e){return e>=t&&i>=e});return a.length<2&&(a=[t,i]),a}function N(t,i){return t&&m(t.type)?t.type:i?e.ValueType.fromDescriptor({numeric:!0}):e.ValueType.fromDescriptor({text:!0})}function T(e){var a=e.pixelSpan,r=e.dataDomain,n=e.metaDataColumn,o=e.formatString,l=e.outerPadding||0,u=!!e.isCategoryAxis,c=!!e.isScalar,h=!!e.isVertical,d=!!e.useTickIntervalForDisplayUnits,p=e.getValueFn,g=e.categoryThickness,m=e.axisDisplayUnits,f=e.axisPrecision,y=!!e.is100Pct,v=this.getCategoryValueType(n,c),b=this.createScale(e),C=b.scale,S=b.bestTickCount,x=C.domain(),w=i.isLogScalePossible(r,v);if(g&&c&&r&&2===r.length){var D=r[1]-r[0],P=x[1]-x[0];D>0&&P>0&&(g=g*D/P)}var L;if(c&&1===S)L=[r[0]];else{var _=c?R(o,v,y):void 0;L=s(S,C,v,c,_)}e.scaleType&&e.scaleType===t.axisScale.log&&w&&(L=L.filter(function(e){return i.powerOfTen(e)}));var N=M(x,r,v,c,o,S,L,p,d,m,f),T=d3.svg.axis().scale(C).tickSize(6,0).orient(h?"left":"bottom").ticks(S).tickValues(L),V=[];n&&(V=A(T,L,N,v,p));var I;if(!c&&g)I=Math.max(1,g-2*t.CartesianChart.TickLabelPadding);else{var F=L.length>1?L.length+1:L.length;I=F>1?a/F:a,I=Math.max(1,I-2*t.CartesianChart.TickLabelPadding)}return{scale:C,axis:T,formatter:N,values:V,axisType:v,axisLabel:null,isCategoryAxis:u,xLabelMaxWidth:I,categoryThickness:g,outerPadding:l,usingDefaultDomain:b.usingDefaultDomain,isLogScaleAllowed:w,dataDomain:r}}function V(e){var n,o=e.pixelSpan,s=e.dataDomain,l=e.metaDataColumn,u=e.outerPadding||0,c=!!e.isScalar,h=!!e.isVertical,d=e.forcedTickCount,p=e.categoryThickness,g=!!e.shouldClamp,m=this.getCategoryValueType(l,c),f=h?r(o):a(o),v=s?s.slice():null,b=f,C=!1;if(null==s||2===s.length&&null==s[0]&&null==s[1]||2!==s.length&&c)C=!0,s=m.dateTime?t.fallbackDateDomain:y(m)?[]:t.fallBackDomain,n=y(m)?G(o,s,p?u/p:0):H(e.scaleType,o,s,m,u,b);else{if(c&&s.length>0){b=void 0!==d?0!==f?d:0:i.getBestNumberOfTicks(s[0],s[s.length-1],[l],f,m.dateTime);var S=i.normalizeLinearDomain({min:s[0],max:s[s.length-1]});v=[S.min,S.max]}c&&m.numeric&&!m.dateTime?n=H(e.scaleType,o,v,m,u,b,g):c&&m.dateTime?n=E(o,v,u,null,g):(m.text||m.dateTime||m.numeric||m.bool)&&(n=G(o,v,p?u/p:0),b=0===f?0:Math.min(v.length,(o-2*u)/t.CartesianChart.MinOrdinalRectThickness))}return h&&c&&n.range(n.range().reverse()),t.ColumnUtil.normalizeInfinityInScale(n),{scale:n,bestTickCount:b,usingDefaultDomain:C}}function M(e,i,a,r,n,o,s,l,u,c,h){void 0===u&&(u=!1);var d;if(a.dateTime)if(r){var p=new Date(e[0]),g=new Date(e[1]);1===o&&(p=g=new Date(i[0])),d=t.valueFormatter.create({format:n,value:p,value2:g,tickCount:o})}else d=t.valueFormatter.createDefaultFormatter(n,!0);else if(u&&r&&s.length>1){var m=c?c:s[1]-s[0],f={format:n,value:m,value2:0,allowFormatBeautification:!0};h?f.precision=h:f.detectAxisPrecision=!0,d=t.valueFormatter.create(f)}else d=t.valueFormatter.createDefaultFormatter(n,!0);return d}function A(e,t,i,a,r){var n=[];return r||(r=function(e){return e}),i?(e.tickFormat(function(e){return i.format(r(e,a))}),n=t.map(function(e){return i.format(r(e,a))})):n=t.map(function(e){return r(e,a)}),n}function R(t,i,a){var r=t&&!e.NumberFormat.isStandardFormat(t);if(r){var n=e.NumberFormat.getCustomFormatMetadata(t,!0).precision;return t.indexOf("%")>-1&&(n+=2),Math.pow(10,-n)}return a?.01:i.integer?1:0}function I(e,t,i,a){if(0===e.length)return null;var r=d3.min(e,function(e){return d3.min(e.data,function(e){return e.categoryValue})}),n=d3.max(e,function(e){return d3.max(e.data,function(e){return e.categoryValue})});return U([t,i],[r,n])}function F(e,t){if(0===e.length)return null;var i=d3.min(e,function(e){return d3.min(e.data,function(e){return e.value})}),a=d3.max(e,function(e){return d3.max(e.data,function(e){return e.value})});return t?[Math.min(i,0),Math.max(a,0)]:[i,a]}function O(e){return _.isEmpty(e)?[]:e[0].data.map(function(e){return e.categoryIndex})}function G(e,i,a){void 0===a&&(a=0);var r=d3.scale.ordinal().rangeBands([0,e],t.CartesianChart.InnerPaddingRatio,a).domain(i);return r}function z(e,t){return null==e?!1:b(t)?!1:e[0]>0&&e[1]>0||e[0]<0&&e[1]<0}function H(e,i,a,r,n,o,s){return void 0===n&&(n=0),e===t.axisScale.log&&z(a,r)?k(i,a,n,o):E(i,a,n,o,s)}function k(e,t,i,a){void 0===i&&(i=0);var r=d3.scale.log().range([i,e-i]).domain([t[0],t[1]]).clamp(!0);return a&&r.nice(a),r}function E(e,t,i,a,r){void 0===i&&(i=0);var n=d3.scale.linear().range([i,e-i]).domain([t[0],t[1]]).clamp(r);return a&&n.nice(a),n}function W(e){var t={};return e&&(t.min=null==e.min?null==e.minLocal?d3.min(e.values):e.minLocal:e.min,t.max=null==e.max?null==e.maxLocal?d3.max(e.values):e.maxLocal:e.max),t}function B(e,t){var i=[void 0,void 0];return t&&2===t.length&&(i=[t[0],t[1]]),e&&2===e.length&&(null!=e[0]&&(i[0]=e[0]),null!=e[1]&&(i[1]=e[1])),null==i[0]&&null==i[1]?t:null!=i[0]&&null!=i[1]&&i[0]>i[1]?t:i}function U(e,t){var i=t?[t[0],t[1]]:[];return e&&2===e.length&&(null!=e[0]&&(i[0]=e[0]),null!=e[1]&&(i[1]=e[1]),i[0]>i[1]&&(i=t)),i}function j(e,i,a,r){void 0===r&&(r=!1);var n=r?"secAxisStyle":"axisStyle";if(!e||!e[n])return i;var o;return o=e[n]===t.axisStyle.showBoth?i+" ("+a+")":e[n]===t.axisStyle.showUnitOnly?a:i}function K(e,t){return!e||!t||e.length<2||t.length<2?!1:e[0]!==t[0]||e[1]!==t[1]}function Y(e){return isNaN(e)?null:e===Number.POSITIVE_INFINITY?Number.MAX_VALUE:e===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:e}function X(e){return e/Math.pow(10,Math.ceil(Math.log(e)/Math.LN10-1e-12))===1}var q=35,$=10,Q=2,Z=3,J=10;i.getRecommendedNumberOfTicksForXAxis=a,i.getRecommendedNumberOfTicksForYAxis=r,i.getBestNumberOfTicks=n,i.hasNonIntegerData=o,i.getRecommendedTickValues=s,i.getRecommendedTickValuesForAnOrdinalRange=l,i.getRecommendedTickValuesForAQuantitativeRange=u,i.normalizeLinearDomain=d,i.getMargin=p,i.getTickLabelMargins=g,i.columnDataTypeHasValue=m,i.createOrdinalType=f,i.isOrdinal=y,i.isOrdinalScale=v,i.isDateTime=b,i.invertScale=C,i.extent=S,i.invertOrdinalScale=x,i.findClosestXAxisIndex=w,i.diffScaled=D,i.createDomain=P,i.ensureValuesInRange=L,i.getCategoryValueType=N,i.createAxis=T,i.createScale=V,i.createFormatter=M,i.getMinTickValueInterval=R,i.createValueDomain=F;var ee;!function(i){function a(e,t,i,a){var r=e.values;if(0===r.length)return!1;var n=void 0!==e.xLabelMaxWidth?e.xLabelMaxWidth:t/r.length;return!r.some(function(e){return a.text=e,i(a)>n})}function r(e,a,r,n,o,s,l){var u=e.values,c=void 0!==e.xLabelMaxWidth?e.xLabelMaxWidth:r/u.length,h=a.bottom/i.DefaultRotation.sine,d=o(l),p=Math.max(1,Math.floor(a.bottom/d));if(0===u.length)return!1;var g=u.some(function(e){return l.text=e,!jsCommon.WordBreaker.hasBreakers(e)&&n(l)>c});if(g)return!1;var m=u.filter(function(r,o){var u=a.left+e.outerPadding+e.categoryThickness*(o+.5)-J,d=u/i.DefaultRotation.cosine,g=Math.min(d,h),m=jsCommon.WordBreaker.splitByWidth(r,l,n,c,p,s).join("");l.text=r;var f=s(l,g);return t.TextUtil.removeEllipses(m).length>=t.TextUtil.removeEllipses(f).length});return m.length>Math.floor(u.length/2)}function n(e,t,a,r,n,o,s,l){var u,c;c=l?i.DefaultRotationWithScrollbar:i.DefaultRotation,r&&(u=t/c.sine),e.each(function(){var e=d3.select(this);if(r){var t=o.values.indexOf(this.textContent),i=s.left+o.outerPadding+o.categoryThickness*(t+.5);l||(i-=J);var h=i/c.cosine;(l||n||u>h)&&a(e[0][0],Math.min(h,u)),e.style("text-anchor","end").attr({dx:"-0.5em",dy:c.dy,transform:c.transform})}else e.style("text-anchor","middle").attr({dx:"0em",dy:"1em",transform:"rotate(0)"})})}function o(t,i,a){var r=i.xLabelMaxWidth;t.each(function(){var t=d3.select(this);t.style("text-anchor","middle").attr({dx:"0em",dy:"1em",transform:"rotate(0)"}),e.TextMeasurementService.wordBreak(this,r,a)})}function s(e,t,i){0!==e.size()&&e.each(function(){var e=d3.select(this);i(e[0][0],t)})}i.willLabelsFit=a,i.willLabelsWordBreak=r,i.DefaultRotation={sine:Math.sin(Math.PI*(35/180)),cosine:Math.cos(Math.PI*(35/180)),tangent:Math.tan(Math.PI*(35/180)),transform:"rotate(-35)",dy:"-0.5em"},i.DefaultRotationWithScrollbar={sine:Math.sin(.5*Math.PI),cosine:Math.cos(.5*Math.PI),tangent:Math.tan(.5*Math.PI),transform:"rotate(-90)",dy:"-0.8em"},i.rotate=n,i.wordBreak=o,i.clip=s}(ee=i.LabelLayoutStrategy||(i.LabelLayoutStrategy={})),i.createOrdinalScale=G,i.isLogScalePossible=z,i.createNumericalScale=H,i.createLinearScale=E,i.getRangeForColumn=W,i.applyCustomizedDomain=B,i.combineDomain=U,i.createAxisLabel=j,i.scaleShouldClamp=K,i.normalizeNonFiniteNumber=Y,i.powerOfTen=X}(i=t.AxisHelper||(t.AxisHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t,i,a,r){var n=i*u.PaddingConstRatio+e.lineWeight/2,o=t*u.PaddingConstRatio+e.lineWeight/2,c=i*u.ShapeConstRatio-e.lineWeight,h=t*u.ShapeConstRatio-e.lineWeight,d={x:n,y:o,width:c,height:h,rx:e.roundEdge,ry:e.roundEdge},p=l(c,h,r);s(e,t,i,a,r,p,"rect",d)}function i(e,t,i,a,r){var n=(i/u.OvalRadiusConst).toString(),o=(t/u.OvalRadiusConst).toString(),c=i/(u.OvalRadiusConst+u.OvalRadiusConstPadding)-e.lineWeight,h=t/(u.OvalRadiusConst+u.OvalRadiusConstPadding)-e.lineWeight,d={cx:n,cy:o,rx:c,ry:h},p=l(i,t,r);s(e,t,i,a,r,p,"ellipse",d)}function a(e,t,i,a,r){var n,o,s,l,c,h=i-u.SmallPaddingConstValue-u.SmallPaddingConstValue,d=t-u.SmallPaddingConstValue-u.SmallPaddingConstValue;45>=r?(c=r/90,n=i/2+h*c,o=u.SmallPaddingConstValue,s=i/2-h*c,l=t-u.SmallPaddingConstValue):135>=r?(c=(r-45)/90,n=i-u.SmallPaddingConstValue,o=u.SmallPaddingConstValue+d*c,s=u.SmallPaddingConstValue,l=t-u.SmallPaddingConstValue-d*c):225>=r?(c=(r-135)/90,n=i-u.SmallPaddingConstValue-h*c,o=t-u.SmallPaddingConstValue,s=u.SmallPaddingConstValue+h*c,l=u.SmallPaddingConstValue):315>=r?(c=(r-225)/90,n=u.SmallPaddingConstValue,o=t-u.SmallPaddingConstValue-d*c,s=i-u.SmallPaddingConstValue,l=u.SmallPaddingConstValue+d*c):360>=r&&(c=(r-315)/90,n=u.SmallPaddingConstValue+h*c,o=u.SmallPaddingConstValue,s=i-u.SmallPaddingConstValue-h*c,l=t-u.SmallPaddingConstValue),a.append("svg").attr({width:i,height:t}).append("line").attr({x1:n,y1:o,x2:s,y2:l}).style({"vector-effect":"non-scaling-stroke","stroke-width":e.lineWeight+"px","stroke-opacity":e.lineTransparency/100,stroke:e.lineColor})}function r(e,t,i,a,r){var n=e.lineWeight,s=t-n,l=i-n,c=[{x:(l*u.ArrowLeftHeadPoint.x).toString(),y:(s*u.ArrowLeftHeadPoint.y).toString()},{x:(l*u.ArrowMiddleHeadPoint.x).toString(),y:(s*u.ArrowMiddleHeadPoint.y).toString()},{x:(l*u.ArrowRightHeadPoint.x).toString(),y:(s*u.ArrowRightHeadPoint.y).toString()},{x:(l*u.ArrowRightMiddleHeadPoint.x).toString(),y:(s*u.ArrowRightMiddleHeadPoint.y).toString()},{x:(l*u.ArrowBottomRightPoint.x).toString(),y:(s*u.ArrowBottomRightPoint.y).toString()},{x:(l*u.ArrowBottomLeftPoint.x).toString(),y:(s*u.ArrowBottomLeftPoint.y).toString()},{x:(l*u.ArrowLeftMiddleHeadPoint.x).toString(),y:(s*u.ArrowLeftMiddleHeadPoint.y).toString()}];o(e,c,a,t,i,r)}function n(e,t,i,a,r){var n=e.lineWeight;n>3&&(n-=3);var s=(i+n)*u.TrianglePaddingConstRatio,l=t-u.SmallPaddingConstValue-n<0?t-u.SmallPaddingConstValue:t-u.SmallPaddingConstValue-n,c=(t+n)*u.TrianglePaddingConstRatio,h=(i-n)*u.TriangleEndPaddingConstRatio<0?i*u.TriangleEndPaddingConstRatio:(i-n)*u.TriangleEndPaddingConstRatio,d=t-u.SmallPaddingConstValue-n<0?t-u.SmallPaddingConstValue:t-n-u.SmallPaddingConstValue,p=(s+h)/2;10>s&&(s=u.SmallPaddingConstValue),10>c&&(c=u.SmallPaddingConstValue);var g=[{x:s,y:l},{x:p,y:c},{x:h,y:d}];o(e,g,a,t,i,r)}function o(e,t,i,a,r,n){var o=d3.svg.line().x(function(e){return e.x}).y(function(e){return e.y}).interpolate("linear"),u={d:o(t)+" Z"},c=l(r,a,n);s(e,a,r,i,n,c,"path",u)}function s(e,t,i,a,r,n,o,s){a.append("div").style({transform:"rotate("+r+"deg) scale("+n+")","transform-origin":"center","-webkit-transform":"rotate("+r+"deg) scale("+n+")","-webkit-transform-origin":"center",width:i+"px",height:t+"px"}).append("svg").attr({width:i,height:t}).append(o).attr(s).style({"vector-effect":"non-scaling-stroke","stroke-width":e.lineWeight+"px",stroke:e.lineColor,"stroke-opacity":e.lineTransparency/100,fill:e.fillColor,"fill-opacity":e.showFill===!0?e.shapeTransparency/100:0})}function l(e,t,i){var a=e,r=t,n=Math.atan2(t,e),o=Math.sqrt(Math.pow(t,2)+Math.pow(e,2)),s=i/180*Math.PI;return e>=t?(90>i?s+=n:180>i?s-=n:270>i?s+=n:s-=n,r/Math.abs(Math.sin(s))/o):(90>i?s-=n:180>i?s+=n:270>i?s-=n:s+=n,a/Math.abs(Math.cos(s))/o)}var u;!function(e){e.PaddingConstRatio=.01,e.TrianglePaddingConstRatio=.15,e.TriangleEndPaddingConstRatio=.85,e.ShapeConstRatio=1-2*e.PaddingConstRatio,e.SmallPaddingConstValue=10,e.OvalRadiusConst=2,e.OvalRadiusConstPadding=.2,e.ArrowLeftHeadPoint={x:.05,y:.42},e.ArrowMiddleHeadPoint={x:.5,y:.016},e.ArrowRightHeadPoint={x:.95,y:.42},e.ArrowRightMiddleHeadPoint={x:.764,y:.42},e.ArrowBottomRightPoint={x:.764,y:.993},e.ArrowBottomLeftPoint={x:.246,y:.993},e.ArrowLeftMiddleHeadPoint={x:.246,y:.42}}(u=e.ShapeFactoryConsts||(e.ShapeFactoryConsts={})),e.createRectangle=t,e.createOval=i,e.createLine=a,e.createUpArrow=r,e.createTriangle=n}(t=e.ShapeFactory||(e.ShapeFactory={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function i(e,t){var i={};if(!e)return i;var a=e.objects;if(a){var r=a.categoryAxis;r&&(i={show:r.show,axisType:r.axisType,axisScale:r.axisScale,start:r.start,end:r.end,showAxisTitle:null==r.showAxisTitle?t:r.showAxisTitle,axisStyle:r.axisStyle,labelColor:r.labelColor,labelDisplayUnits:r.labelDisplayUnits,labelPrecision:r.labelPrecision})}return i}function a(e,t){var i={};if(!e)return i;var a=e.objects;if(a){var r=a.valueAxis;r&&(i={show:r.show,position:r.position,axisScale:r.axisScale,start:r.start,end:r.end,showAxisTitle:null==r.showAxisTitle?t:r.showAxisTitle,axisStyle:r.axisStyle,labelColor:r.labelColor,labelDisplayUnits:r.labelDisplayUnits,labelPrecision:r.labelPrecision,
secShow:r.secShow,secPosition:r.secPosition,secAxisScale:r.secAxisScale,secStart:r.secStart,secEnd:r.secEnd,secShowAxisTitle:r.secShowAxisTitle,secAxisStyle:r.secAxisStyle,secLabelColor:r.secLabelColor,secLabelDisplayUnits:r.secLabelDisplayUnits,secLabelPrecision:r.secLabelPrecision})}return i}function r(t,i){return t&&(t=i&&i.axisType?i.axisType===e.axisType.scalar:!0),t}function n(e){return null!=e?0>e?0:e:null}function o(t,i,a,r){var n=e.AxisHelper.isDateTime(a);if(r)return n?new Date(i):i;if(a.text)return t.categories[i];if(t&&t.series&&t.series.length>0){var o=t.series[0];if(o){var s=o.data;if(s){t.hasHighlights&&(i=2*i);var l=s[i];if(l)return n&&null!=l.categoryValue?new Date(l.categoryValue):l.categoryValue}}}return i}t.getCategoryAxisProperties=i,t.getValueAxisProperties=a,t.isScalar=r,t.getPrecision=n,t.lookupXValue=o}(t=e.CartesianHelper||(e.CartesianHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=e.data.SQExprShortSerializer,a=function(){function t(e,t,i){this.colors=e,this.fillProp=t,this.defaultDataPointColor=i,this.defaultColorScale=e.getNewColorScale()}return t.prototype.getColorForSeriesValue=function(t,i,a){return this.fillProp&&e.DataViewObjects.getFillColor(t,this.fillProp)||this.defaultDataPointColor||this.getColorScaleForSeries(i).getColor(a).value},t.prototype.getColorScaleForSeries=function(e){return this.colors.getColorScaleByKey(i.serializeArray(e||[]))},t.prototype.getColorForMeasure=function(t,i){var a=this.defaultColorScale.getColor(i).value;return this.fillProp&&e.DataViewObjects.getFillColor(t,this.fillProp)||this.defaultDataPointColor||a},t.normalizeSelector=function(e,t){return e&&(t||e.data)?{data:e.data}:e},t}();t.ColorHelper=a}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a="rect";!function(i){function r(e,t,a){if(e){var r=a.start,n=a.end;return i.transformDomain(t,r,n)}return t}function n(t,i,a){if(!t.categories||!t.values||0===t.categories.length||0===t.values.length)return t;if("number"!=typeof i&&"number"!=typeof a)return t;var r=t.categories[0],n=r.values,o=r.objects;if(!n||!o)return t;var s=[],l=[],u=[];if("number"!=typeof i&&(i=n[0]),"number"!=typeof a&&(a=n[n.length-1]),i>a)return t;for(var c=0,h=t.values.length;h>c;c++)l.push([]);for(var d=0,h=n.length;h>d;d++)if(n[d]>=i&&n[d]<=a&&(s.push(n[d]),o&&u.push(o[d]),t.values))for(var p=0;p<t.values.length;p++)l[p].push(t.values[p].values[d]);var g=e.Prototype.inherit(t),m=g.values=e.Prototype.inherit(g.values),f=g.categories=e.Prototype.inherit(t.categories),y=g.categories[0]=e.Prototype.inherit(f[0]);y.values=s,y.objects&&(y.objects=u);for(var d=0,h=t.values.length;h>d;d++){var v=m[d]=e.Prototype.inherit(m[d]);v.values=l[d]}return g}function o(i,a,r,n,o,s,l,u,c){var h=r.categoryThickness,d=r.isScalar,p=r.outerPaddingRatio,g=t.AxisHelper.createDomain(i.series,i.categoryMetadata?i.categoryMetadata.type:e.ValueType.fromDescriptor({text:!0}),d,[o,s]),m=t.AxisHelper.createAxis({pixelSpan:a,dataDomain:g,metaDataColumn:i.categoryMetadata,formatString:t.valueFormatter.getFormatString(i.categoryMetadata,t.columnChartProps.general.formatString),outerPadding:h*p,isCategoryAxis:!0,isScalar:d,isVertical:n,categoryThickness:h,useTickIntervalForDisplayUnits:!0,getValueFn:function(e,a){return t.CartesianHelper.lookupXValue(i,e,a,d)},scaleType:l,axisDisplayUnits:u,axisPrecision:c});return r.categoryThickness=m.categoryThickness,m}function s(e,t){t&&e.attr("draggable","true").on("dragstart",t)}function l(e,t,a,r){return r&&!t||a&&!e?i.DimmedOpacity:i.DefaultOpacity}function u(e,t){for(var i=0,a=Number.MAX_VALUE,r=0,n=t.length;n>r;r++){var o=Math.abs(e-t[r]);a>o&&(a=o,i=r)}return i}function c(e,r,n,o){var s=e.selectAll(t.ColumnChart.SeriesClasses.selector),l="undefined"==typeof o;s.selectAll(a+r).filter(function(e){return e.categoryIndex!==n&&(l||e.categoryIndex===o)}).transition().style("fill-opacity",i.DimmedOpacity),s.selectAll(a+r).filter(function(e){return e.categoryIndex===n}).style("fill-opacity",i.DefaultOpacity)}function h(e,i,a){var r=i.selectAll(t.ColumnChart.SeriesClasses.selector),n=r.data(e.series,function(e){return e.key});return n.enter().append("g").classed(t.ColumnChart.SeriesClasses["class"],!0),n.exit().remove(),n}function d(e,t,r,n,o,s){var l;l=o?function(e){var t=_.filter(e.data,function(e){return!!e.value});return t}:function(e){return e.data};var u=t.selectAll(n.selector),c=u.data(l,function(e){return e.key});return c.enter().append(a).attr("class",function(e){return n["class"].concat(e.highlight?" highlight":"")}),c.style("fill",function(e){return e.color}).style("fill-opacity",function(t){return i.getFillOpacity(t.selected,t.highlight,s,e.hasHighlights)}).attr(r.shapeLayout),c.exit().remove(),c}function p(e,i,a,r,n,o){if(void 0===n&&(n=!1),e){for(var s=e.data(),l=[],u=0,c=s.length;c>u;u++)Array.prototype.push.apply(l,s[u].data);return t.dataLabelUtils.drawDefaultLabelsForDataPointChart(l,i,a,r,n,o)}t.dataLabelUtils.cleanDataLabels(i)}function g(e){for(var t=e.domain(),i=0,a=t.length;a>i;++i)t[i]===Number.POSITIVE_INFINITY?t[i]=Number.MAX_VALUE:t[i]===Number.NEGATIVE_INFINITY&&(t[i]=-Number.MAX_VALUE);e.domain(t)}function m(e,i){var a=i.xScale,r=i.yScale,n=r(0),o=a(0);switch(e.chartType){case t.ColumnChartType.stackedBar:case t.ColumnChartType.hundredPercentStackedBar:return o+Math.abs(t.AxisHelper.diffScaled(a,0,e.valueAbsolute))+t.AxisHelper.diffScaled(a,e.position-e.valueAbsolute,0)+t.dataLabelUtils.defaultColumnLabelMargin;case t.ColumnChartType.clusteredBar:return o+t.AxisHelper.diffScaled(a,Math.max(0,e.value),0)+t.dataLabelUtils.defaultColumnLabelMargin;case t.ColumnChartType.stackedColumn:case t.ColumnChartType.hundredPercentStackedColumn:return n+t.AxisHelper.diffScaled(r,e.position,0)-t.dataLabelUtils.defaultColumnLabelMargin;case t.ColumnChartType.clusteredColumn:return n+t.AxisHelper.diffScaled(r,Math.max(0,e.value),0)-t.dataLabelUtils.defaultColumnLabelMargin}}i.DimmedOpacity=.4,i.DefaultOpacity=1,i.applyUserMinMax=r,i.transformDomain=n,i.getCategoryAxis=o,i.applyInteractivity=s,i.getFillOpacity=l,i.getClosestColumnIndex=u,i.setChosenColumnOpacity=c,i.drawSeries=h,i.drawDefaultShapes=d,i.drawDefaultLabels=p,i.normalizeInfinityInScale=g,i.calculatePosition=m}(i=t.ColumnUtil||(t.ColumnUtil={}));var r;!function(e){function t(e,t){var i=e.selectAll(t.selector).data([]);i.exit().remove()}e.clearColumns=t}(r=t.ClusteredUtil||(t.ClusteredUtil={}));var n;!function(i){function a(e,i,a){return void 0===a&&(a=0),t.AxisHelper.diffScaled(e,a,i)}function r(t,i){var a={min:0,max:10};if(0===t.length)return a;var r=d3.min(t,function(e){return d3.min(e.data,function(e){return e.position-e.valueAbsolute})}),n=d3.max(t,function(e){return d3.max(e.data,function(e){return e.position})});return i&&(r=e.Double.roundToPrecision(r,s),n=e.Double.roundToPrecision(n,s)),{min:r,max:n}}function n(e,i,a,r,n){for(var o=0,s=0,l=0;a>l;l++){var u=n.getValueBySeriesAndCategory(l,i);u=t.AxisHelper.normalizeNonFiniteNumber(u),u>0?o+=u:0>u&&(s-=u)}var c=o+s;return{pos:o?o/c/o:1,neg:s?s/c/s:1}}function o(e,t){var i=e.selectAll(t.selector).data([]);i.exit().remove()}var s=1e-4;i.getSize=a,i.calcValueDomain=r,i.getStackedMultiplier=n,i.clearColumns=o}(n=t.StackedUtil||(t.StackedUtil={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){function a(e,i,a){if(e.categories&&e.categories.length>0){var r=e.categories[0];return r.source&&t.DataRoleHelper.hasRole(r.source,i)&&t.DataRoleHelper.hasRole(r.source,a)}return!1}function r(i,a){if(i.categories&&i.categories.length>0){var r=i.categories[0],n=r.values;return r.values.length>0?{categories:n,categoryFormatter:t.valueFormatter.create({format:t.valueFormatter.getFormatString(r.source,a),value:n[0],value2:n[n.length-1],displayUnitSystemType:e.DisplayUnitSystemType.Verbose}),categoryIdentities:r.identity,categoryObjects:r.objects}:{categories:[],categoryFormatter:{format:t.valueFormatter.format}}}return s()}function n(e){return void 0!==e.groupName?e.groupName:e.queryName}function o(e,i,a){var r=e,n=e.displayName;return void 0!==e.groupName&&(r=i.source,n=e.groupName),t.valueFormatter.format(n,t.valueFormatter.getFormatString(r,a))}function s(){return{categories:[null],categoryFormatter:{format:t.valueFormatter.format}}}function l(e,i,a,r){var n=null,o=null;if(e&&a&&a.displayName&&(n=a.displayName),i){var s=[];r&&(s=r.map(function(e){return e?e.displayName:""}).filter(function(e,t,i){return""!==e&&i.indexOf(e)===t}),o=t.valueFormatter.formatListAnd(s))}return{xAxisLabel:n,yAxisLabel:o}}i.categoryIsAlsoSeriesRole=a,i.getPivotedCategories=r,i.getSeriesName=n,i.getFormattedLegendLabel=o,i.createAxesLabels=l}(i=t.converterHelper||(t.converterHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=jsCommon.CssConstants.createClassAndSelector,r=jsCommon.PixelConverter,n=t.labelStyle;!function(i){function o(e,t){e&&(void 0!==e.show&&(t.show=e.show),void 0!==e.showSeries&&(t.show=e.showSeries),void 0!==e.color&&(t.labelColor=e.color.solid.color),void 0!==e.labelDisplayUnits&&(t.displayUnits=e.labelDisplayUnits),void 0!==e.labelPrecision&&(t.precision=e.labelPrecision>=0?e.labelPrecision:i.defaultLabelPrecision),void 0!==e.fontSize&&(t.fontSize=e.fontSize),void 0!==e.showAll&&(t.showLabelPerSeries=e.showAll),void 0!==e.labelStyle&&(t.labelStyle=e.labelStyle))}function s(e,t){o(e,t),e&&void 0!==e.labelDensity&&(t.labelDensity=e.labelDensity)}function l(e,t,a){return void 0===e&&(e=!1),{show:e,position:0,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:t||i.defaultLabelColor,formatterOptions:null,fontSize:a||i.DefaultFontSizeInPt}}function u(e,t,i){var a=l(!0,e,i);return a.showCategory=!0,a.categoryLabelColor=t,a}function c(){return{show:!1,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:i.defaultInsideLabelColor,showCategory:!0,formatterOptions:null}}function h(){return c()}function d(e){var t=l(!1,void 0);return t.position=null,t.labelColor=void 0,t}function p(){return{show:!1,position:0,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:i.defaultLabelColor,formatterOptions:null,fontSize:i.DefaultFontSizeInPt}}function g(e){return{show:!1,position:0,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:i.defaultLabelColor,formatterOptions:null,fontSize:i.DefaultFontSizeInPt,labelDensity:e?t.NewDataLabelUtils.LabelDensityMax:t.NewDataLabelUtils.LabelDensityMin}}function m(){return{show:!1,showCategory:!1,position:0,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:i.defaultInsideLabelColor,formatterOptions:null,fontSize:i.DefaultFontSizeInPt}}function f(){var e=i.getDefaultLabelSettings(!0,i.defaultLabelColor,i.DefaultFontSizeInPt);return e.labelStyle=n.category,e}function y(){return{show:!0,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:null,position:null,fontSize:i.minLabelFontSize,formatterOptions:null}}function v(){return{show:!0,position:e.visuals.labelPosition.insideCenter,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:i.defaultLabelColor,formatterOptions:null,fontSize:i.DefaultFontSizeInPt}}function b(){return{show:!1,displayUnits:0,precision:i.defaultLabelPrecision,labelColor:i.defaultLabelColor,position:null,showCategory:!0,formatterOptions:null}}function C(t,a){if(t!==i.defaultLabelPrecision)return t;if("g"!==a&&"G"!==a){if(a){var r=a.split(";")[0],n=e.NumberFormat.getCustomFormatMetadata(r,!0);if(n.hasDots)return n.precision}return B}}function S(i,a,r,n,o,s,l){void 0===o&&(o=!1);var u=new e.DataLabelManager,c=u.hideCollidedLabels(n,i,r),h=o&&!!s,d=w(c,a,!1,h);return d?(h?(d.text(function(e){return e.labeltext}).transition().duration(s).style(r.style).style("opacity",l?function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,l,!1)}:1).attr({x:function(e){return e.labelX},y:function(e){return e.labelY}}),d.exit().transition().duration(s).style("opacity",0).remove()):(d.attr({x:function(e){return e.labelX},y:function(e){return e.labelY}}).text(function(e){return e.labeltext}).style(r.style),d.exit().remove()),d):void 0}function x(e,t,i,a,r){void 0===a&&(a=!1);var n=e.filter(i.filter),o=w(n,t);return o?(o.attr(i.labelLayout).text(i.labelText).style(i.style),a&&r&&o.transition().duration(r),o.exit().remove(),o):void 0}function w(e,t,i,a){if(void 0===i&&(i=!1),void 0===a&&(a=!1),0===e.length)return D(t,!0),null;t.select(U.selector).empty()&&t.append("g").classed(U["class"],!0);var r=null!=e[0].key,n=null!=e[0].identity,o=r?function(e){return e.key}:n?function(e){return e.identity.getKey()}:void 0,s=i?t.select(U.selector).selectAll(K.selector).data(e,function(e){return e.data.identity.getKey()}):null!=o?t.select(U.selector).selectAll(K.selector).data(e,o):t.select(U.selector).selectAll(K.selector).data(e),l=s.enter().append("text").classed(K["class"],!0);return a&&l.style("opacity",0),s}function D(e,t){void 0===t&&(t=!1);var i=[],a=e.selectAll(K.selector).data(i);if(a.exit().remove(),e.selectAll(U.selector).remove(),t){var r=e.selectAll(Y.selector).data(i);r.exit().remove(),e.selectAll(j.selector).remove()}}function P(e,i,a){e.selectAll(K.selector).style("fill-opacity",function(e){var r=t.ColumnUtil.getFillOpacity(e.selected,e.highlight,!e.highlight&&i,!e.selected&&a)<1?0:1;return r})}function L(t){var a={text:t.formatter?t.formatter.format(t.label):e.formattingService.formatValue(t.label,t.format),fontFamily:i.LabelTextProperties.fontFamily,fontSize:r.fromPoint(t.fontSize),fontWeight:i.LabelTextProperties.fontWeight};return e.TextMeasurementService.getTailoredTextOrDefault(a,t.maxWidth?t.maxWidth:i.maxLabelWidth)}function _(e,t,i,a){return{x:function(i){return e.scale(i.categoryIndex)+t/2},y:function(e){return N(i.scale,e,a)}}}function N(t,a,r){var n=t(0)-t(Math.abs(a.value)),o=t(a.position),s=t(r[0]),l=t(a.position+a.value);if(a.value<0){var u={text:a.labeltext,fontFamily:i.LabelTextProperties.fontFamily,fontSize:i.LabelTextProperties.fontSize,fontWeight:i.LabelTextProperties.fontWeight},c=o+n+e.TextMeasurementService.estimateSvgTextHeight(u);if(s>c)return c}else{var h=o-n-i.labelMargin;if(h>0)return h}return a.isLabelInside=!0,T(o,l,s)}function T(e,t,i){return e=0>e?0:e,e=e>i?i:e,t=0>t?0:t,t=t>i?i:t,Math.abs(t-e)/2+Math.min(e,t)}function V(a,r,n){if(null==a||null===a.value)return!1;var o={text:n.labelText(a),fontFamily:i.LabelTextProperties.fontFamily,fontSize:i.LabelTextProperties.fontSize,fontWeight:i.LabelTextProperties.fontWeight},s=t.WaterfallChart.getRectTop(r.scale,a.position,a.value)-i.labelMargin;if(s>0)return!0;var l=e.TextMeasurementService.measureSvgTextWidth(o),u=e.TextMeasurementService.estimateSvgTextHeight(o),c=n.categoryWidth,h=Math.abs(t.AxisHelper.diffScaled(r.scale,Math.max(0,Math.abs(a.value)),0));return l>c||u>h?!1:!0}function M(e){return{labelText:function(t){return L({label:t.labeltext,fontSize:e.fontSize})},labelLayout:{x:function(e){return e.x},y:function(t){var a=t.radius+i.labelMargin;return 0===e.position?t.y-a:t.y+a}},filter:function(e){return null!=e&&null!=e.labeltext},style:{fill:function(e){return e.labelFill},"font-size":r.fromPoint(e.fontSize)}}}function A(e,t,a,r,n,o,s,l){var u=r?i.hundredPercentFormat:null,c=E(),h=s?s.hasSelection():!1;return{labelText:function(e){var t=null!=u?u:e.labelFormatString,a=k(n,e.labelSettings),r=c.getOrCreate(t,e.labelSettings,a);return L({label:r.format(e.value),maxWidth:i.maxLabelWidth})},labelLayout:t,filter:function(t){return i.getColumnChartLabelFilter(t,h,e.hasHighlights,o,l)},style:{fill:function(e){return e.labelFill},"text-anchor":a?"middle":"start"}}}function R(a,r,n){var o,s,l=r.xScale,u=r.yScale,c=r.columnWidth,h={text:a.labeltext,fontFamily:i.LabelTextProperties.fontFamily,fontSize:i.LabelTextProperties.fontSize,fontWeight:i.LabelTextProperties.fontWeight},d=e.TextMeasurementService.measureSvgTextWidth(h),p=e.TextMeasurementService.estimateSvgTextHeight(h),g=!1,m=t.ColumnUtil.calculatePosition(a,r);switch(a.chartType){case t.ColumnChartType.stackedBar:case t.ColumnChartType.hundredPercentStackedBar:(!a.lastSeries||m+d>n||a.chartType===t.ColumnChartType.hundredPercentStackedBar)&&(o=-t.StackedUtil.getSize(l,a.valueAbsolute),s=c,g=!0);break;case t.ColumnChartType.clusteredBar:m+d>n&&(o=Math.abs(t.AxisHelper.diffScaled(l,0,a.value)),s=c,g=!0);break;case t.ColumnChartType.stackedColumn:case t.ColumnChartType.hundredPercentStackedColumn:(!a.lastSeries||0>=m||a.chartType===t.ColumnChartType.hundredPercentStackedColumn)&&(o=c,s=t.StackedUtil.getSize(u,a.valueAbsolute),g=!0);break;case t.ColumnChartType.clusteredColumn:0>=m&&(o=c,s=Math.abs(t.AxisHelper.diffScaled(u,0,a.value)),g=!0);break;default:return!0}return g&&(d>o||p>s)?!1:!0}function I(e,i,a,r,n){var o=i?t.ColumnUtil.getFillOpacity(e.selected,e.highlight,!e.highlight&&i,!e.selected&&a):t.ColumnUtil.getFillOpacity(e.selected,e.highlight,i,a);return null!=e&&null!=e.value&&R(e,r,n)&&1===o}function F(e,a,r,n,o){return{labelText:function(e){return L({label:e.category,maxWidth:2*i.maxLabelWidth})},labelLayout:{x:function(t){return e(t.x)},y:function(e){var s=t.ScatterChart.getBubbleRadius(e.radius,o,n)+i.labelMargin;return 0===r.position?a(e.y)-s:a(e.y)+s}},filter:function(e){return null!=e&&null!=e.category},style:{fill:function(e){return e.labelFill}}}}function O(e,t,a,n,o){var s=E();return{labelText:function(e){var t=k(o,e.labelSettings),i=s.getOrCreate(e.labelFormatString,e.labelSettings,t);return L({label:i.format(e.value)})},labelLayout:{x:function(t){return e(n?t.categoryValue:t.categoryIndex)},y:function(e){return 0===a.position?t(e.value)-i.labelMargin:t(e.value)+i.labelMargin}},filter:function(e){return null!=e&&null!=e.value},style:{fill:function(e){return e.labelFill},"font-size":function(e){return r.fromPoint(e.labelSettings.fontSize)}}}}function G(a,n,o,s,l){var u=n.yScale,c=n.xScale,h=n.margin.left,d=.7,p=n.xScale.rangeBand(),g=n.verticalRange/2,m=t.valueFormatter.getFormatString(a.valuesMetadata[0],t.funnelChartProps.general.formatString),f=e.TextMeasurementService.measureSvgTextWidth,y=null;if(0===s.displayUnits){var v=d3.min(a.slices,function(e){return e.value}),b=d3.max(a.slices,function(e){return e.value});y=Math.max(Math.abs(v),Math.abs(b))}var C=E();return{labelText:function(e){var i=Math.abs(u(e.value)-u(0)),a=Math.abs(u(e.value)-u(0))-2*o,r=g-i/2-o,n=null!=m?m:e.labelFormatString,l=Math.max(a,r),c=C.getOrCreate(n,s,y),h=c.format(t.FunnelChart.getFunnelSliceValue(e,!0));return L({label:h,maxWidth:l,fontSize:s.fontSize})},labelLayout:{y:function(t,a){var n={text:t.labeltext,fontFamily:i.LabelTextProperties.fontFamily,fontSize:r.fromPoint(s.fontSize),fontWeight:i.LabelTextProperties.fontWeight},o=e.TextMeasurementService.estimateSvgTextHeight(n);return c(a)+p/2+o/2},x:function(e){var a=Math.abs(u(e.value)-u(0)),n=Math.abs(u(e.value)-u(0))-2*o,l=g-a/2-o,c=Math.max(n,l),d=null!=m?m:e.labelFormatString,p=C.getOrCreate(d,s,y),v=p.format(t.FunnelChart.getFunnelSliceValue(e,!0)),b={text:L({label:v,maxWidth:c}),fontFamily:i.LabelTextProperties.fontFamily,fontSize:r.fromPoint(s.fontSize),fontWeight:i.LabelTextProperties.fontWeight},S=f(b),x=s.position;switch(x===t.labelPosition.outsideEnd&&S>l||0===e.value?x=t.labelPosition.insideCenter:x===t.labelPosition.insideCenter&&S>n&&(x=t.labelPosition.outsideEnd),x){case t.labelPosition.outsideEnd:return h+g+a/2+o+S/2;default:return e.labelFill=0!==e.value?i.defaultInsideLabelColor:e.labelFill,h+g}},dy:"-0.15em"},filter:function(t){if(null==t||null==t.value||a.hasHighlights!==!!t.highlight)return!1;var n={text:t.labeltext,fontFamily:i.LabelTextProperties.fontFamily,fontSize:r.fromPoint(s.fontSize),fontWeight:i.LabelTextProperties.fontWeight},o=e.TextMeasurementService.estimateSvgTextHeight(n)*d;return p>o},style:{fill:function(e){return e.labelFill},"fill-opacity":function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,!1,!1)},"font-size":function(e){return r.fromPoint(s.fontSize)}}}}function z(e){if(e.dataLabelsSettings){var t={objectName:"labels",selector:e.selector,properties:{}};if(e.show&&e.selector?t.properties.showSeries=e.dataLabelsSettings.show:e.show&&(t.properties.show=e.dataLabelsSettings.show),t.properties.color=e.dataLabelsSettings.labelColor,e.displayUnits&&(t.properties.labelDisplayUnits=e.dataLabelsSettings.displayUnits),e.precision){var a=e.dataLabelsSettings.precision;t.properties.labelPrecision=a===i.defaultLabelPrecision?null:a}if(e.position&&(t.properties.labelPosition=e.dataLabelsSettings.position,e.positionObject&&(t.validValues={labelPosition:e.positionObject})),e.labelStyle&&(t.properties.labelStyle=e.dataLabelsSettings.labelStyle),e.fontSize&&(t.properties.fontSize=e.dataLabelsSettings.fontSize),e.labelDensity){var r=e.dataLabelsSettings;r&&(t.properties.labelDensity=r.labelDensity)}return e.showAll&&(t.properties.showAll=e.dataLabelsSettings.showLabelPerSeries),e.enumeration.pushInstance(t)}}function H(e,t,a,r,n){void 0===r&&(r=!1);var o=t?t:p(),s={objectName:"categoryLabels",selector:null,properties:{show:r?o.showCategory:o.show,fontSize:t?t.fontSize:i.DefaultFontSizeInPt}};a&&(s.properties.color=o.categoryLabelColor?o.categoryLabelColor:o.labelColor),n&&(s.properties.fontSize=n),e.pushInstance(s)}function k(e,t){return e&&e.displayUnit&&0===t.displayUnits?e.displayUnit.value:null}function E(){return{cache:{defaultFormatter:null},getOrCreate:function(e,i,a){if(e){var r={formatString:e,displayUnits:i.displayUnits,precision:C(i.precision,e),value2:a},n=JSON.stringify(r);return this.cache[n]||(this.cache[n]=t.valueFormatter.create(W(i,e,a,r.precision))),this.cache[n]}return this.cache.defaultFormatter||(this.cache.defaultFormatter=t.valueFormatter.create(W(i,e,a,i.precision))),this.cache.defaultFormatter}}}function W(t,i,a,r){return{displayUnitSystemType:e.DisplayUnitSystemType.DataLabels,format:i,precision:r,value:t.displayUnits,value2:a,allowFormatBeautification:!0}}i.minLabelFontSize=8,i.labelMargin=8,i.maxLabelWidth=50,i.defaultColumnLabelMargin=5,i.defaultColumnHalfLabelHeight=4,i.DefaultDy="-0.15em",i.DefaultFontSizeInPt=9,i.StandardFontFamily="wf_segoe-ui_normal",i.LabelTextProperties={fontFamily:"wf_standard-font",fontSize:r.fromPoint(i.DefaultFontSizeInPt),fontWeight:"normal"},i.defaultLabelColor="#777777",i.defaultInsideLabelColor="#ffffff",i.hundredPercentFormat="0.00 %;-0.00 %;0.00 %",i.defaultLabelPrecision=void 0;var B=0,U=a("labels"),j=a("lines"),K=a("data-labels"),Y=a("line-label");i.updateLabelSettingsFromLabelsObject=o,i.updateLineChartLabelSettingsFromLabelsObject=s,i.getDefaultLabelSettings=l,i.getDefaultCardLabelSettings=u,i.getDefaultTreemapLabelSettings=c,i.getDefaultSunburstLabelSettings=h,i.getDefaultColumnLabelSettings=d,i.getDefaultPointLabelSettings=p,i.getDefaultLineChartLabelSettings=g,i.getDefaultMapLabelSettings=m,i.getDefaultDonutLabelSettings=f,i.getDefaultGaugeLabelSettings=y,i.getDefaultFunnelLabelSettings=v,i.getDefaultKpiLabelSettings=b,i.getLabelPrecision=C,i.drawDefaultLabelsForDataPointChart=S,i.drawDefaultLabelsForFunnelChart=x,i.cleanDataLabels=D,i.setHighlightedLabelsOpacity=P,i.getLabelFormattedText=L,i.getLabelLayoutXYForWaterfall=_,i.doesDataLabelFitInShape=V,i.getMapLabelLayout=M,i.getColumnChartLabelLayout=A,i.getColumnChartLabelFilter=I,i.getScatterChartLabelLayout=F,i.getLineChartLabelLayout=O,i.getFunnelChartLabelLayout=G,i.enumerateDataLabels=z,i.enumerateCategoryLabels=H,i.createColumnFormatterCacheManager=E,i.getOptionsForLabelFormatter=W}(i=t.dataLabelUtils||(t.dataLabelUtils={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function i(t,i,a,r){void 0===r&&(r=0);var n,o,s,l=2.05;if(r){var u=r,c=i.radius*i.outerArcRadiusRatio,h=i.radius/2*i.innerArcRadiusRatio;o=[Math.cos(u)*c,Math.sin(u)*c],s=[Math.cos(u)*h,Math.sin(u)*h]}else o=i.outerArc.centroid(t),s=i.arc.centroid(t);var d=a.x,p=e.NewDataLabelUtils.maxLabelOffset/2;return d+=0>d?-p:p,n=[d,a.y],s[0]*=l,s[1]*=l,[s,o,n]}function a(e){if(e&&e.length>2){var i={width:Math.abs(e[1][0]-e[0][0]),height:Math.abs(e[1][1]-e[0][1])},a={width:Math.abs(e[2][0]-e[1][0]),height:t.LineStrokeWidth};return[i,a]}return null}function r(t){var i=0>t?-e.NewDataLabelUtils.maxLabelOffset:e.NewDataLabelUtils.maxLabelOffset;return t+=i}function n(t,i){return i.width/2-Math.abs(t)-e.NewDataLabelUtils.maxLabelOffset}t.LineStrokeWidth=1,t.DiagonalLineIndex=0,t.HorizontalLineIndex=1,t.getLabelLeaderLineForDonutChart=i,t.getLabelLeaderLinesSizeForDonutChart=a,t.getXPositionForDonutLabel=r,t.getSpaceAvailableForDonutLabels=n}(t=e.DonutLabelUtils||(e.DonutLabelUtils={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=jsCommon.CssConstants.createClassAndSelector,r=jsCommon.PixelConverter;!function(i){function n(e,t,a,n){void 0===a&&(a=!1),void 0===n&&(n=!1);var o=_.filter(t,function(e){return e.isVisible}),s=e.selectAll(C.selector).data(o,f);s.enter().append("text").classed(C["class"],!0);var l={x:function(e){return e.boundingBox.left+e.boundingBox.width/2},y:function(e){return e.hasBackground?e.boundingBox.top+e.boundingBox.height-i.verticalLabelBackgroundPadding:e.boundingBox.top+e.boundingBox.height},dy:"-0.15em"};a&&(l.dy=void 0),s.text(function(e){return e.text}).attr(l).style({fill:function(e){return e.fill},"font-size":function(e){return r.fromPoint(e.fontSize||i.DefaultLabelFontSizeInPt)},"text-anchor":function(e){return e.textAnchor}}),s.exit().remove();var u=_.filter(n?t:[],function(e){return e.isVisible&&!_.isEmpty(e.secondRowText)}),c=e.selectAll(S.selector).data(u,function(e,t){return e.identity?e.identity.getKeyWithoutHighlight():t});return c.enter().append("text").classed(S["class"],!0),l={x:function(e){return e.boundingBox.left+e.boundingBox.width/2},y:function(e){var t=void 0!==e.text?e.boundingBox.height/2:e.boundingBox.height;return e.hasBackground?e.boundingBox.top+t-i.verticalLabelBackgroundPadding:e.boundingBox.top+t},dy:"-0.15em"},a&&(l.dy=void 0),c.text(function(e){return e.secondRowText}).attr(l).style({fill:function(e){return e.fill},"font-size":function(e){return r.fromPoint(e.fontSize||i.DefaultLabelFontSizeInPt)},"text-anchor":function(e){return e.textAnchor}}),c.exit().remove(),s}function o(e,t,a,n,o){void 0===n&&(n=!1),void 0===o&&(o="cubic-in-out");var s=e.selectAll(C.selector).data(_.filter(t,function(e){return e.isVisible}),f);s.enter().append("text").classed(C["class"],!0);var l={x:function(e){return e.boundingBox.left+e.boundingBox.width/2},y:function(e){return e.boundingBox.top+e.boundingBox.height},dy:"-0.15em"};return n&&(l.dy=void 0),s.text(function(e){return e.text}).style({fill:function(e){return e.fill},"font-size":function(e){return r.fromPoint(e.fontSize||i.DefaultLabelFontSizeInPt)}}).transition().ease(o).duration(a).attr(l),s.exit().remove(),s}function s(e,t,a,r){var n=e.selectAll("rect").data(_.filter(t,function(e){return e.isVisible}),f);return n.enter().append("rect"),n.attr({x:function(e){return e.boundingBox.left-i.horizontalLabelBackgroundPadding},y:function(e){return e.boundingBox.top-i.verticalLabelBackgroundPadding},rx:y,ry:y,width:function(e){return e.boundingBox.width+2*i.horizontalLabelBackgroundPadding},height:function(e){return void 0===e.text&&void 0===e.secondRowText?0:e.boundingBox.height+2*i.verticalLabelBackgroundPadding}}).style("fill",a?a:"#000000").style("fill-opacity",null!=r?r:1),n.exit().remove(),n}function l(e,i,a,r){e.select(x.selector).empty()&&e.append("g").classed(x["class"],!0);var n=e.select(x.selector).selectAll("polyline").data(i,a);n.enter().append("polyline").classed(w["class"],!0),n.attr("points",function(e){return e.leaderLinePoints}).style({stroke:function(e){return r?r:e.fill},"stroke-width":t.DonutLabelUtils.LineStrokeWidth}),n.exit().remove()}function u(t,i,a){return a?a.format(t):e.formattingService.formatValue(t,i)}function c(e,t){return e&&e.displayUnit&&0===t.displayUnits?e.displayUnit.value:null}function h(t,i){if(t!==v)return t;if(i){var a=i.split(";")[0],r=e.NumberFormat.getCustomFormatMetadata(a,!0);if(r.hasDots)return r.precision}return b}function d(){return{cache:{defaultFormatter:null},getOrCreate:function(e,i,a){if(e){var r={formatString:e,displayUnits:i.displayUnits,precision:h(i.precision,e),value2:a},n=JSON.stringify(r);return this.cache[n]||(this.cache[n]=t.valueFormatter.create(p(i,e,a,r.precision))),this.cache[n]}return this.cache.defaultFormatter||(this.cache.defaultFormatter=t.valueFormatter.create(p(i,e,a,i.precision))),this.cache.defaultFormatter}}}function p(t,i,a,r){return{displayUnitSystemType:e.DisplayUnitSystemType.DataLabels,format:i,precision:r,value:t.displayUnits,value2:a,allowFormatBeautification:!0}}function g(e){for(var i=[],a={},r=function(e,i,a){return i.some(function(i){return a?t.shapes.Rect.equals(e.parentShape.rect,i.rect):t.shapes.Point.equals(e.parentShape.point,i.point)})},n=0;n<e.length;n++){var o=e[n],s=1===o.parentType,l=a[o.text];l?r(o,l,s)||(i.push(o),l.push(o.parentShape)):(i.push(o),a[o.text]=[o.parentShape])}return i}function m(e){switch(e){case 9:return{maximumOffset:t.ScatterChart.dataLabelLayoutMaximumOffset,startingOffset:t.ScatterChart.dataLabelLayoutStartingOffset,offsetIterationDelta:t.ScatterChart.dataLabelLayoutOffsetIterationDelta,allowLeaderLines:!0,attemptToMoveLabelsIntoViewport:!0};default:return{maximumOffset:i.maxLabelOffset,startingOffset:i.startingLabelOffset,attemptToMoveLabelsIntoViewport:!0}}}function f(e,t){return e.key?e.key:e.identity?e.identity.getKeyWithoutHighlight():t}i.DefaultLabelFontSizeInPt=9,i.MapPolylineOpacity=.5,i.LabelDensityBufferFactor=3,i.LabelDensityPadding=6,i.LabelDensityMin=0,i.LabelDensityMax=6,i.startingLabelOffset=8,i.maxLabelOffset=8,i.maxLabelWidth=50,i.hundredPercentFormat="0.00 %;-0.00 %;0.00 %",i.LabelTextProperties={fontFamily:"wf_standard-font",fontSize:r.fromPoint(i.DefaultLabelFontSizeInPt),fontWeight:"normal"},i.defaultLabelColor="#777777",i.defaultInsideLabelColor="#ffffff",i.horizontalLabelBackgroundPadding=4,i.verticalLabelBackgroundPadding=2;var y=4,v=void 0,b=0;i.labelGraphicsContextClass=a("labelGraphicsContext"),i.labelBackgroundGraphicsContextClass=a("labelBackgroundGraphicsContext");var C=a("label"),S=a("label-second-line"),x=a("leader-lines"),w=a("line-label");i.drawDefaultLabels=n,i.animateDefaultLabels=o,i.drawLabelBackground=s,i.drawLabelLeaderLines=l,i.getLabelFormattedText=u,i.getDisplayUnitValueFromAxisFormatter=c,i.createColumnFormatterCacheManager=d,i.removeDuplicates=g,i.getDataLabelLayoutOptions=m}(i=t.NewDataLabelUtils||(t.NewDataLabelUtils={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){if(e&&e.length>0){var a=e[0];if(a.values&&a.values.length>0)for(var r=0,n=a.values.length;n>r;++r){var o=a.values[r];if(o&&o.source&&i(o.source,t))return r}}return-1}function i(e,t){var i=e.roles;return i&&i[t]}function a(e,t){return null!=e&&null!=e.metadata&&e.metadata.columns&&_.any(e.metadata.columns,function(e){return e.roles&&void 0!==e.roles[t]})}e.getMeasureIndexOfRole=t,e.hasRole=i,e.hasRoleInDataView=a}(t=e.DataRoleHelper||(e.DataRoleHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){var i=parseFloat(t);if(e){var a=p[e.graphic.toUpperCase()];if(a&&!isNaN(i)){var r=a.statusValues;e.normalizedFiveStateKpiRange&&5===r.length&&(i=2*i);var n=i+Math.floor(r.length/2);return[a.kpiIconClass,r[n]].join(" ").trim()}}}function i(e,t){return e?1===t?[n,o,e].join(" "):[n,e].join(" "):void 0}function a(e,a,r){var n=t(e,a);return i(n,r)}function r(e,a,r){var n=e&&e.kpi;if(n){var o=t(n,a);if(o)return{caption:o,statusGraphic:n.graphic,"class":i(o,r)}}}var n="powervisuals-glyph",o="big-kpi",s=["kpi-red","kpi-yellow","kpi-green"],l={kpiIconClass:"circle",statusValues:s},u={kpiIconClass:"",statusValues:["circle-x kpi-red","circle-exclamation kpi-yellow","circle-checkmark kpi-green"]
},c={kpiIconClass:"traffic-light",statusValues:s},h={kpiIconClass:"",statusValues:["rhombus kpi-red","triangle kpi-yellow","circle kpi-green"]},d={kpiIconClass:"",statusValues:["circle-empty","circle-one-quarter","circle-half","circle-three-quarters","circle-full"]},p={"THREE CIRCLES COLORED":l,"TRAFFIC LIGHT - SINGLE":l,"THREE FLAGS COLORED":{kpiIconClass:"flag",statusValues:s},"ROAD SIGNS":u,"THREE SYMBOLS CIRCLED COLORED":u,"TRAFFIC LIGHT":c,"THREE TRAFFIC LIGHTS RIMMED COLORED":c,"THREE SYMBOLS UNCIRCLED COLORED":{kpiIconClass:"",statusValues:["x kpi-red","exclamation kpi-yellow","checkmark kpi-green"]},SHAPES:h,"SMILEY FACE":h,THERMOMETER:h,CYLINDER:h,"THREE SIGNS COLORED":h,"THREE STARS COLORED":{kpiIconClass:"star-stacked",statusValues:["star-empty","star-half-full","star-full"]},"FIVE BARS COLORED":{kpiIconClass:"bars-stacked",statusValues:["bars-zero","bars-one","bars-two","bars-three","bars-four"]},"FIVE BOXES COLORED":{kpiIconClass:"boxes-stacked",statusValues:["boxes-zero","boxes-one","boxes-two","boxes-three","boxes-four"]},"FIVE QUARTERS COLORED":d,"GAUGE - ASCENDING":d,"GAUGE - DESCENDING":{kpiIconClass:"",statusValues:["circle-full","circle-three-quarters","circle-half","circle-one-quarter","circle-empty"]},"STANDARD ARROW":{kpiIconClass:"",statusValues:["arrow-down","arrow-right-down","arrow-right","arrow-right-up","arrow-up"]},"VARIANCE ARROW":{kpiIconClass:"",statusValues:["arrow-down kpi-red","arrow-right kpi-yellow","arrow-up kpi-green"]},"STATUS ARROW - ASCENDING":{kpiIconClass:"",statusValues:["arrow-down kpi-red","arrow-right-down kpi-yellow","arrow-right kpi-yellow","arrow-right-up kpi-yellow","arrow-up kpi-green"]},"STATUS ARROW - DESCENDING":{kpiIconClass:"",statusValues:["arrow-up kpi-green","arrow-right-up kpi-yellow","arrow-right kpi-yellow","arrow-right-down kpi-yellow","arrow-down kpi-red"]}};e.getClassForKpi=a,e.getKpiImageMetadata=r}(t=e.KpiUtil||(e.KpiUtil={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){function a(a,r,n,o){if(_.isEmpty(r)){var s={selector:{id:"0"},properties:{show:!1,value:"",lineColor:{solid:{color:n}},transparency:50,style:t.lineStyle.dashed,position:t.referenceLinePosition.back,dataLabelShow:!1},objectName:o};return void a.pushInstance(s)}for(var l=0;l<r.length;l++){var u=r[l],c=u.object,h=e.DataViewObject.getValue(c,i.referenceLineProps.show,!1),d=e.DataViewObject.getValue(c,i.referenceLineProps.value),p=e.DataViewObject.getValue(c,i.referenceLineProps.lineColor,{solid:{color:n}}),g=e.DataViewObject.getValue(c,i.referenceLineProps.transparency,50),m=e.DataViewObject.getValue(c,i.referenceLineProps.style,t.lineStyle.dashed),f=e.DataViewObject.getValue(c,i.referenceLineProps.position,t.referenceLinePosition.back),y=e.DataViewObject.getValue(c,i.referenceLineProps.dataLabelShow,!1),s={selector:{id:u.id},properties:{show:h,value:d,lineColor:p,transparency:g,style:m,position:f,dataLabelShow:y},objectName:o};if(y){var v=e.DataViewObject.getValue(c,i.referenceLineProps.dataLabelColor,{solid:{color:n}}),b=e.DataViewObject.getValue(c,i.referenceLineProps.dataLabelHorizontalPosition,t.referenceLineDataLabelHorizontalPosition.left),C=e.DataViewObject.getValue(c,i.referenceLineProps.dataLabelVerticalPosition,t.referenceLineDataLabelVerticalPosition.above),S=e.DataViewObject.getValue(c,i.referenceLineProps.dataLabelDecimalPoints,void 0)<0?void 0:e.DataViewObject.getValue(c,i.referenceLineProps.dataLabelDecimalPoints,void 0);s.properties[i.referenceLineProps.dataLabelColor]=v,s.properties[i.referenceLineProps.dataLabelHorizontalPosition]=b,s.properties[i.referenceLineProps.dataLabelVerticalPosition]=C,s.properties[i.referenceLineProps.dataLabelDecimalPoints]=S}a.pushInstance(s)}}function r(a){var r=a.graphicContext,n=a.axes,o=a.referenceLineProperties,s=a.isHorizontal,l=a.viewport,u=a.classAndSelector,c=n.x.scale,h=n.y1.scale,d=e.DataViewObject.getValue(o,i.referenceLineProps.value,0),p=e.DataViewObject.getValue(o,i.referenceLineProps.lineColor,{solid:{color:a.defaultColor}}),g=e.DataViewObject.getValue(o,i.referenceLineProps.transparency),m=e.DataViewObject.getValue(o,i.referenceLineProps.style,t.lineStyle.dashed),f=e.DataViewObject.getValue(o,i.referenceLineProps.position,t.referenceLinePosition.back),y=r.select(u.selector),v=$(y[0]).index(),b=v>1?t.referenceLinePosition.front:t.referenceLinePosition.back,C=-1!==v,S=b!==f;C&&S&&y.remove(),(!C||S)&&(y=f===t.referenceLinePosition.back?r.insert("line",":first-child"):r.append("line"));var x=s?0:c(d),w=s?h(d):0,D=s?l.width:c(d),P=s?h(d):l.height;y.attr({"class":u["class"],x1:x,y1:w,x2:D,y2:P}).style({stroke:p.solid.color}),null!=g&&y.style("stroke-opacity",(100-g)/100),m===t.lineStyle.dashed?y.style("stroke-dasharray","5, 5"):m===t.lineStyle.dotted?y.style({"stroke-dasharray":"1, 5","stroke-linecap":"round"}):m===t.lineStyle.solid&&y.style({"stroke-dasharray":null,"stroke-linecap":null})}function n(a){var r=5,n=a.axes,o=a.referenceLineProperties,s=a.isHorizontal,l=a.viewport,u=n.x.scale,c=n.y1.scale,h=e.DataViewObject.getValue(o,i.referenceLineProps.value,0),d=e.DataViewObject.getValue(o,i.referenceLineProps.dataLabelColor,{solid:{color:a.defaultColor}}),p=o[i.referenceLineProps.dataLabelDecimalPoints]<0?void 0:o[i.referenceLineProps.dataLabelDecimalPoints],g=o[i.referenceLineProps.dataLabelHorizontalPosition]||t.referenceLineDataLabelHorizontalPosition.left,m=o[i.referenceLineProps.dataLabelVerticalPosition]||t.referenceLineDataLabelVerticalPosition.above,f=s?n.y1.formatter:n.x.formatter,y=f;if(null!=f.options){var v=e.Prototype.inherit(f.options);v.precision=p,y=t.valueFormatter.create(v)}var b,C,S=t.NewDataLabelUtils.getLabelFormattedText(y.format(h)),x={text:S,fontFamily:t.dataLabelUtils.LabelTextProperties.fontFamily,fontSize:t.dataLabelUtils.LabelTextProperties.fontSize,fontWeight:t.dataLabelUtils.LabelTextProperties.fontWeight},w=e.TextMeasurementService.measureSvgTextWidth(x),D=e.TextMeasurementService.estimateSvgTextHeight(x),P=s?0:u(h),L=s?c(h):0,_=s?l.width:u(h),N=s?c(h):l.height,T=[1];s?(b=g===t.referenceLineDataLabelHorizontalPosition.left?P+w/2+r:_-w/2-r,C=L,T=m===t.referenceLineDataLabelVerticalPosition.above?[1]:[2]):(b=P,C=m===t.referenceLineDataLabelVerticalPosition.above?L+D/2+r:N-D/2-r,T=g===t.referenceLineDataLabelHorizontalPosition.left?[4]:[8]);var V,M=e.TextMeasurementService.measureSvgTextWidth(x),A=e.TextMeasurementService.estimateSvgTextHeight(x,!0);return V={point:{x:b,y:C},radius:0,validPositions:T},{isPreferred:!0,text:S,textSize:{width:M,height:A},outsideFill:d.solid.color,insideFill:null,parentShape:V,parentType:0,fontSize:9,identity:null,secondRowText:null,key:a.key}}i.referenceLineProps={show:"show",lineColor:"lineColor",transparency:"transparency",value:"value",style:"style",position:"position",dataLabelShow:"dataLabelShow",dataLabelColor:"dataLabelColor",dataLabelDecimalPoints:"dataLabelDecimalPoints",dataLabelHorizontalPosition:"dataLabelHorizontalPosition",dataLabelVerticalPosition:"dataLabelVerticalPosition"},i.enumerateObjectInstances=a,i.render=r,i.createLabelDataPoint=n}(i=t.ReferenceLineHelper||(t.ReferenceLineHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e,t,a,r){var n=new i(t,a,r);return n.getWarningMessages(e)}e.getInvalidValueWarnings=t;var i=function(){function t(e,t,i){this.supportsNaN=e,this.supportsNegativeInfinity=t,this.supportsPositiveInfinity=i}return t.prototype.getWarningMessages=function(t){this.loadWarningStatus(t);var i=[];return this.hasNaN&&!this.supportsNaN&&i.push(new e.NaNNotSupportedWarning),(this.hasNegativeInfinity&&!this.supportsNegativeInfinity||this.hasPositiveInfinity&&!this.supportsPositiveInfinity)&&i.push(new e.InfinityValuesNotSupportedWarning),this.hasOutOfRange&&i.push(new e.ValuesOutOfRangeWarning),i},t.prototype.loadWarningStatus=function(e){this.hasNaN=!1,this.hasNegativeInfinity=!1,this.hasOutOfRange=!1,this.hasPositiveInfinity=!1;for(var t=0;t<e.length;t++){var i=e[t],a=i&&i.categorical&&i.categorical.values?i.categorical.values:null;if(!a)return;for(var r=a.length,n=0;r>n;n++){var o=a[n];if(o.values)for(var s=o.values.length,l=0;s>l;l++){var u=o.values[l];isNaN(u)?this.hasNaN=!0:u===Number.POSITIVE_INFINITY?this.hasPositiveInfinity=!0:u===Number.NEGATIVE_INFINITY?this.hasNegativeInfinity=!0:(-1e300>u||u>1e300)&&(this.hasOutOfRange=!0)}}}},t}()}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e){return new i(e)}e.createListView=t}(t=e.ListViewFactory||(e.ListViewFactory={}));var i=function(){function t(e){var i=this;this.options=$.extend(!0,{},e),this.scrollbarInner=e.baseContainer.append("div").classed("scrollbar-inner",!0).on("scroll",function(){return i.renderImpl(i.options.rowHeight)}),this.scrollContainer=this.scrollbarInner.append("div").classed("scrollRegion",!0),this.visibleGroupContainer=this.scrollContainer.append("div").classed("visibleGroup",!0),$(e.baseContainer.node()).find(".scroll-element").attr("drag-resize-disabled","true"),t.SetDefaultOptions(e)}return t.SetDefaultOptions=function(e){e.rowHeight=e.rowHeight||t.defaultRowHeight},t.prototype.rowHeight=function(e){return this.options.rowHeight=Math.ceil(e),this},t.prototype.data=function(e,t,i){return void 0===i&&(i=!1),this._data=e,this.getDatumIndex=t,this.setTotalRows(),i&&$(this.scrollbarInner.node()).scrollTop(0),this.render(),this},t.prototype.viewport=function(e){return this.options.viewport=e,this.render(),this},t.prototype.empty=function(){this._data=[],this.render()},t.prototype.render=function(){var e=this;this.renderTimeoutId&&window.clearTimeout(this.renderTimeoutId),this.renderTimeoutId=window.setTimeout(function(){e.getRowHeight().then(function(t){e.renderImpl(t)}),e.renderTimeoutId=void 0},0)},t.prototype.renderImpl=function(e){var t=this.options.scrollEnabled?Math.max(0,this._totalRows*e):this.options.viewport.height;this.scrollContainer.style("height",t+"px").attr("height",t),this.scrollToFrame(!0)},t.prototype.scrollToFrame=function(i){var a=this.options,r=this.visibleGroupContainer,n=this._totalRows,o=a.rowHeight||t.defaultRowHeight,s=this.getVisibleRows()||1,l=this.scrollbarInner.node().scrollTop,u=0===l?0:Math.floor(l/o),c=e.SVGUtil.translateWithPixels(0,u*o);r.style({transform:function(e){return c},"-webkit-transform":c});var h=Math.max(0,Math.min(u,n-s+1)),d=h+s,p=r.selectAll(".row").data(this._data.slice(h,Math.min(d,n)),this.getDatumIndex);p.enter().append("div").classed("row",!0).call(function(e){return a.enter(e)}),p.order();var g=r.selectAll(".row:not(.transitioning)");g.call(function(e){return a.update(e)}),p.exit().call(function(e){return a.exit(e)}).remove(),i&&s!==n&&d>=n*t.loadMoreDataThreshold&&a.loadMoreData()},t.prototype.setTotalRows=function(){var e=this._data;this._totalRows=e?e.length:0},t.prototype.getVisibleRows=function(){var e=1,t=this.options.rowHeight,i=this.options.viewport.height;return!t||1>t?e:this.options.scrollEnabled?Math.min(Math.ceil(i/t)+1,this._totalRows)||e:Math.min(Math.floor(i/t),this._totalRows)||e},t.prototype.getRowHeight=function(){var e=$.Deferred(),i=this,a=i.options;if(this.cancelMeasurePass&&this.cancelMeasurePass(),!(this._data&&this._data.length&&a))return i.rowHeight(t.defaultRowHeight),e.resolve(a.rowHeight).promise();this.scrollToFrame(!1);var r=window.requestAnimationFrame(function(){var t=i.visibleGroupContainer.select(".row").node().firstChild,a=$(t).outerHeight(!0);i.rowHeight(a),e.resolve(a),i.cancelMeasurePass=void 0,window.cancelAnimationFrame(r)});return this.cancelMeasurePass=function(){window.cancelAnimationFrame(r),e.reject()},e.promise()},t.loadMoreDataThreshold=.8,t.defaultRowHeight=1,t}()}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=11;!function(t){function i(e,t,i){return Math.min(Math.max(e,t),i)}function a(e){return 23===e?2147483648:Math.floor(e)===e?256<<e:256*Math.pow(2,e)}function r(e,r){for(var n=new Float64Array(e.length),o=0;o<e.length;o+=2){var s=i(e[o],t.MinAllowedLatitude,t.MaxAllowedLatitude),l=i(e[o+1],t.MinAllowedLongitude,t.MaxAllowedLongitude),u=(l+180)/360,c=Math.sin(s*Math.PI/180),h=.5-Math.log((1+c)/(1-c))/(4*Math.PI),d=a(r);n[o]=i(u*d+.5,0,d-1),n[o+1]=i(h*d+.5,0,d-1)}return n}function n(e){var t=8e4;if(e.length>t){for(var i="",a=0;a<e.length;a+=t){var r=Array.apply([],e.subarray(a,a+t));i+=r.join(" ")+" "}return i}return Array.apply([],e).join(" ")}function o(e){var t=8e4,i=[];if(e.length>t){for(var a=0;a<e.length;a+=t){var r=Array.apply([],e.subarray(a,a+t));i.concat(r)}return i}return Array.apply([],e)}function s(e){for(var t={latitude:-90,longitude:180},a={latitude:90,longitude:-180},r=0;r<e.length;r+=2)t.latitude=Math.max(e[r],t.latitude),t.longitude=Math.min(e[r+1],t.longitude),a.latitude=Math.min(e[r],a.latitude),a.longitude=Math.max(e[r+1],a.longitude);return t.longitude=i(t.longitude,-180,180),a.longitude=i(a.longitude,-180,180),Microsoft.Maps.LocationRect.fromCorners(new Microsoft.Maps.Location(t.latitude,t.longitude),new Microsoft.Maps.Location(a.latitude,a.longitude))}function l(e){for(var t=[],i=0,a=0,r=0,n=4294967296;i<e.length;){for(var o=0,s=0;;){if(i>=e.length)return null;var l=g.indexOf(e.charAt(i++));if(-1===l)return null;var u=(31&l)*Math.pow(2,s),c=u/n,h=u%n,d=o/n,p=o%n,m=(h|p)>>>0;if(o=(c|d)*n+m,s+=5,32>l)break}var f=Math.floor((Math.sqrt(8*o+5)-1)/2);o-=f*(f+1)/2;var y=Math.floor(o),v=f-y;v=v>>1^-(1&v),y=y>>1^-(1&y),a+=v,r+=y;var b=1e-5*r,C=1e-5*a;t.push(b),t.push(C)}return new Float64Array(t)}function u(e){for(var i=e.locations,a=0;a<i.length;a++){var r=i[a];r.geographic||(r.geographic=t.parseEncodedSpatialValueArray(r.nativeBing));var n=r.geographic;if(n&&!r.absolute){r.absolute=t.latLongToPixelXYArray(n,t.DefaultLevelOfDetail),r.absoluteString=t.pointArrayToString(r.absolute);var o=t.getLocationBoundaries(n);r.absoluteBounds=t.locationRectToRectXY(o,t.DefaultLevelOfDetail)}}}function c(e,t){return d(e.latitude,e.longitude,t)}function h(t,i){var a=c(t.getNorthwest(),i),r=c(t.getSoutheast(),i);return new e.visuals.Rect(a.x,a.y,r.x-a.x,r.y-a.y)}function d(t,i,a){var n=r(new Float64Array([t,i]),a);return new e.visuals.Point(n[0],n[1])}function p(e,t,r){var n=a(r),o=i(e,0,n-1)/n-.5,s=.5-i(t,0,n-1)/n,l=90-360*Math.atan(Math.exp(2*-s*Math.PI))/Math.PI,u=360*o;return new Microsoft.Maps.Location(l,u)}t.Settings={MaxBingRequest:6,MaxCacheSize:3e3,MaxCacheSizeOverflow:100,BingKey:"insert your key",BingUrl:"https://dev.virtualearth.net/REST/v1/Locations?",BingUrlGeodata:"https://platform.bing.com/geo/spatial/v1/public/Geodata?",UseDoubleArrayGeodataResult:!0,UseDoubleArrayDequeueTimeout:0},t.MinAllowedLatitude=-85.05112878,t.MaxAllowedLatitude=85.05112878,t.MinAllowedLongitude=-180,t.MaxAllowedLongitude=180,t.TileSize=256,t.MaxLevelOfDetail=23,t.MinLevelOfDetail=1,t.MaxAutoZoomLevel=5,t.DefaultLevelOfDetail=11,t.WorkerErrorName="___error___",t.CategoryTypes={Address:"Address",City:"City",Continent:"Continent",CountryRegion:"Country",County:"County",Longitude:"Longitude",Latitude:"Latitude",Place:"Place",PostalCode:"PostalCode",StateOrProvince:"StateOrProvince"};var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-";t.clip=i,t.getMapSize=a,t.latLongToPixelXYArray=r,t.pointArrayToString=n,t.pointArrayToArray=o,t.getLocationBoundaries=s,t.parseEncodedSpatialValueArray=l,t.calcGeoData=u,t.locationToPixelXY=c,t.locationRectToRectXY=h,t.latLongToPixelXY=d,t.pixelXYToLocation=p}(i=t.MapUtil||(t.MapUtil={}));var r=function(){function e(){this._locationRect=new Microsoft.Maps.LocationRect(new Microsoft.Maps.Location(30,-30),60,60)}return e.prototype.reCalc=function(e,r,n){var o=[this._locationRect.getNorthwest(),this._locationRect.getSoutheast()];if(r/=2,n/=2,!this._baseRect){var s=i.locationToPixelXY(this._locationRect.getNorthwest(),a),l=i.locationToPixelXY(this._locationRect.getSoutheast(),a);this._baseRect=new t.Rect(s.x,s.y,l.x-s.x,l.y-s.y)}var u=e.tryLocationToPixel(o);this._currentRect=new t.Rect(u[0].x+r,u[0].y+n,u[1].x-u[0].x,u[1].y-u[0].y)},Object.defineProperty(e.prototype,"scale",{get:function(){return this._baseRect?this._currentRect.width/this._baseRect.width:1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"transform",{get:function(){var e=this._baseRect,i=this._currentRect,a=new t.Transform;return a.translate(i.left,i.top),a.scale(i.width/e.width,i.height/e.height),a.translate(-e.left,-e.top),a},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outherTransform",{get:function(){var e=this._baseRect,i=this._currentRect,a=new t.Transform;a.translate(i.left,i.top);var r=Math.sqrt(i.width/e.width);return a.scale(r,r),a},enumerable:!0,configurable:!0}),e.prototype.setViewBox=function(e){var t=e.getBoundingClientRect(),i=this._currentRect;e.setAttribute("viewBox",[-i.left,-i.top,t.width,t.height].join(" "))},Object.defineProperty(e.prototype,"innerTransform",{get:function(){var e=this._baseRect,i=this._currentRect,a=new t.Transform,r=i.width/e.width;return a.scale(r,r),a.translate(-e.left,-e.top),a},enumerable:!0,configurable:!0}),e.prototype.transformToString=function(e){var t=e.matrix;return"matrix("+t.m00+" "+t.m10+" "+t.m01+" "+t.m11+" "+t.m02+" "+t.m12+")"},e}();t.MapPolygonInfo=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=e.data.Selector,a=function(){function t(e,t){this.selector=e,this.highlight=t,this.key=JSON.stringify({selector:e?i.getKey(e):null,highlight:t}),this.keyWithoutHighlight=JSON.stringify({selector:e?i.getKey(e):null})}return t.prototype.equals=function(e){return this.selector&&e.selector?this.highlight===e.highlight&&i.equals(this.selector,e.selector):!this.selector==!e.selector&&this.highlight===e.highlight},t.prototype.includes=function(t,i){void 0===i&&(i=!1);var a=this.selector,r=t.selector;if(!a||!r)return!1;var n=a.data,o=r.data;if(!n&&a.metadata&&a.metadata!==r.metadata)return!1;if(!i&&this.highlight!==t.highlight)return!1;if(n){if(!o)return!1;if(n.length>0)for(var s=0,l=n.length;l>s;s++){var u=n[s];if(!o.some(function(t){return e.DataViewScopeIdentity.equals(u,t)}))return!1}}return!0},t.prototype.getKey=function(){return this.key},t.prototype.getKeyWithoutHighlight=function(){return this.keyWithoutHighlight},t.prototype.hasIdentity=function(){return this.selector&&!!this.selector.data},t.prototype.getSelector=function(){return this.selector},t.prototype.getSelectorsByColumn=function(){return this.selectorsByColumn},t.createNull=function(e){return void 0===e&&(e=!1),new t(null,e)},t.createWithId=function(e,i){void 0===i&&(i=!1);var a=null;return e&&(a={data:[e]}),new t(a,i)},t.createWithMeasure=function(e,i){void 0===i&&(i=!1);var a={metadata:e},r=new t(a,i);return r.selectorsByColumn={metadata:e},r},t.createWithIdAndMeasure=function(e,i,a){void 0===a&&(a=!1);var r={};e&&(r.data=[e]),i&&(r.metadata=i),e||i||(r=null);var n=new t(r,a);return n},t.createWithIdAndMeasureAndCategory=function(e,t,i,a){void 0===a&&(a=!1);var r=this.createWithIdAndMeasure(e,t,a);return r.selector&&(r.selectorsByColumn={},e&&i&&(r.selectorsByColumn.dataMap={},r.selectorsByColumn.dataMap[i]=e),t&&(r.selectorsByColumn.metadata=t)),r},t.createWithIds=function(e,i,a){void 0===a&&(a=!1);var r=null,n=t.idArray(e,i);return n&&(r={data:n}),new t(r,a)},t.createWithIdsAndMeasure=function(e,i,a,r){void 0===r&&(r=!1);var n={},o=t.idArray(e,i);return o&&(n.data=o),a&&(n.metadata=a),e||i||a||(n=null),new t(n,r)},t.createWithSelectorForColumnAndMeasure=function(e,t,i){void 0===i&&(i=!1);var a,r=Object.keys(e);a=2===r.length?this.createWithIdsAndMeasure(e[r[0]],e[r[1]],t,i):1===r.length?this.createWithIdsAndMeasure(e[r[0]],null,t,i):this.createWithIdsAndMeasure(null,null,t,i);var n={};return _.isEmpty(e)||(n.dataMap=e),t&&(n.metadata=t),e||t||(n=null),a.selectorsByColumn=n,a},t.createWithHighlight=function(e){return new t(e.getSelector(),!0)},t.idArray=function(e,t){if(e||t){var i=[];return e&&i.push(e),t&&t!==e&&i.push(t),i}},t}();t.SelectionId=a;var r=function(){function e(){}return e.builder=function(){return new e},e.prototype.withCategory=function(e,t){return e&&e.source&&e.source.queryName&&e.identity&&(this.ensureDataMap()[e.source.queryName]=e.identity[t]),this},e.prototype.withSeries=function(e,t){return e&&e.source&&e.source.queryName&&t&&(this.ensureDataMap()[e.source.queryName]=t.identity),this},e.prototype.withMeasure=function(e){return this.measure=e,this},e.prototype.createSelectionId=function(){return a.createWithSelectorForColumnAndMeasure(this.ensureDataMap(),this.measure)},e.prototype.ensureDataMap=function(){return this.dataMap||(this.dataMap={}),this.dataMap},e}();t.SelectionIdBuilder=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){var i=function(){function t(e){this.hostServices=e.hostServices,this.selectedIds=[]}return t.prototype.select=function(e,t){void 0===t&&(t=!1);var i=$.Deferred();return this.hostServices.shouldRetainSelection()?this.sendSelectionToHost([e]):(this.selectInternal(e,t),this.sendSelectionToHost(this.selectedIds)),i.resolve(this.selectedIds),i},t.prototype.hasSelection=function(){return this.selectedIds.length>0},t.prototype.clear=function(){var e=$.Deferred();return this.selectedIds=[],this.sendSelectionToHost([]),e.resolve(),e},t.prototype.getSelectionIds=function(){return this.selectedIds},t.prototype.sendSelectionToHost=function(e){var t={data:e.filter(function(e){return e.hasIdentity()}).map(function(e){return e.getSelector()})},i=e.filter(function(e){return e.getSelectorsByColumn()&&e.hasIdentity()}).map(function(e){return e.getSelectorsByColumn()});i&&i.length>0&&(t.data2=i),this.hostServices.onSelect(t)},t.prototype.selectInternal=function(i,a){t.containsSelection(this.selectedIds,i)?this.selectedIds=a?this.selectedIds.filter(function(t){return!e.data.Selector.equals(t,i)}):this.selectedIds.length>1?[i]:[]:a?this.selectedIds.push(i):this.selectedIds=[i]},t.containsSelection=function(t,i){return t.some(function(t){return e.data.Selector.equals(t.getSelector(),i.getSelector())})},t}();t.SelectionManager=i}(i=t.utility||(t.utility={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){"use strict";var i;!function(t){var i=jsCommon.Utility,a=function(){function e(e){this.polygonPoints=this.convertArrayPathToPoints(e)}return e.prototype.absoluteCentroid=function(){return null==this._absoluteCentroid&&(this._absoluteCentroid=this.calculatePolygonCentroid()),this._absoluteCentroid},e.prototype.absoluteBoundingRect=function(){return null==this._absoluteBoundingRect&&(this._absoluteBoundingRect=this.calculateBoundingRect()),this._absoluteBoundingRect},e.prototype.contains=function(e){var t={x:e.left,y:e.top},i={x:e.left+e.width,y:e.top},a={x:e.left,y:e.top+e.height},r={x:e.left+e.width,y:e.top+e.height};return this.inside(t)&&this.inside(i)&&this.inside(a)&&this.inside(r)},e.prototype.conflicts=function(e){if(!this.isConflictWithBoundingBox(e))return!1;var t={x:e.left,y:e.top},i={x:e.left+e.width/2,y:e.top},a={x:e.left+e.width,y:e.top},r={x:e.left,y:e.top+e.height},n={x:e.left+e.width/2,y:e.top+e.height},o={x:e.left+e.width,y:e.top+e.height},s={x:e.left,y:e.top+e.height/2},l={x:e.left+e.width,y:e.top+e.height/2};return this.inside(t)||this.inside(i)||this.inside(a)||this.inside(r)||this.inside(n)||this.inside(o)||this.inside(s)||this.inside(l)},e.prototype.lineIntersectionPoint=function(e,t){for(var i=0;i<this.polygonPoints.length;i++){var a=this.polygonPoints[i],r=i===this.polygonPoints.length-1?this.polygonPoints[0]:this.polygonPoints[i+1],n=this.getLineIntersection(e,t,a,r);if(null!==n)return n}return null},e.calculateAbsolutePolygonArea=function(e){var t,i=1,a=0;for(t=0;t<e.length;t++)a+=e[t].x*e[i].y-e[i].x*e[t].y,i=(i+1)%e.length;return a*=.5},e.prototype.isConflictWithBoundingBox=function(e){return o.isIntersecting(this.absoluteBoundingRect(),e)},e.prototype.calculatePolygonCentroid=function(){var t,i,a,r,n,o;for(t=e.calculateAbsolutePolygonArea(this.polygonPoints),a=r=0,o=1,n=0;n<this.polygonPoints.length;n++)i=this.polygonPoints[n].x*this.polygonPoints[o].y-this.polygonPoints[o].x*this.polygonPoints[n].y,a+=(this.polygonPoints[n].x+this.polygonPoints[o].x)*i,r+=(this.polygonPoints[n].y+this.polygonPoints[o].y)*i,o=(o+1)%this.polygonPoints.length;return a/=6*t,r/=6*t,{x:a,y:r}},e.prototype.calculateBoundingRect=function(){for(var e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,r=0;r<this.polygonPoints.length;r++)this.polygonPoints[r].x<e?e=this.polygonPoints[r].x:this.polygonPoints[r].x>i&&(i=this.polygonPoints[r].x),this.polygonPoints[r].y<t?t=this.polygonPoints[r].y:this.polygonPoints[r].y>a&&(a=this.polygonPoints[r].y);return{left:e,top:t,width:i-e,height:a-t}},e.prototype.inside=function(e){for(var t=e.x,i=e.y,a=!1,r=0,n=this.polygonPoints.length-1;r<this.polygonPoints.length;n=r++){var o=this.polygonPoints[r].x,s=this.polygonPoints[r].y,l=this.polygonPoints[n].x,u=this.polygonPoints[n].y,c=s>i!=u>i&&(l-o)*(i-s)/(u-s)+o>t;c&&(a=!a)}return a},e.prototype.getLineIntersection=function(e,t,i,a){var r=e.x,n=e.y,o=t.x,s=t.y,l=i.x,u=i.y,c=a.x,h=a.y,d=o-r,p=s-n,g=c-l,m=h-u,f=(-p*(r-l)+d*(n-u))/(-g*p+d*m),y=(g*(n-u)-m*(r-l))/(-g*p+d*m);return f>=0&&1>=f&&y>=0&&1>=y?{x:r+y*d,y:n+y*p}:null},e.prototype.convertArrayPathToPoints=function(e){for(var t=[],i=0;i<e.length;i+=2){var a=e[i],r=e[i+1],n={x:a,y:r};t.push(n)}return t},e}();t.Polygon=a;var r;!function(t){function a(e,t,i){var a=e.x+t>=0?e.x+t:0,r=e.y+i>=0?e.y+i:0;return{x:a,y:r}}function r(e,t){return void 0!==e&&null!==e&&void 0!==t&&null!==t&&e.x===t.x&&e.y===t.y}function n(e){return null!==e?{x:e.x,y:e.y}:null}function o(e){return"{x:"+e.x+", y:"+e.y+"}"}function s(e){return e.x+","+e.y}function l(e,t){if(null===e||null===t)return null;var i=t.x-e.x,a=t.y-e.y;return Math.sqrt(i*i+a*a)}function u(t,i){return t===i||void 0!==t&&void 0!==i&&e.Double.equalWithPrecision(t.x,i.x)&&e.Double.equalWithPrecision(t.y,i.y)}function c(e,t){if(null===e)return void 0===t?null:t;if(void 0===e)return void 0===t?null:t;if(2===e.length)return{x:i.parseNumber(e[0]),y:i.parseNumber(e[1])};if("string"==typeof e){var a=e.split(",");return 2!==a.length?void 0===t?null:t:{x:i.parseNumber(a[0]),y:i.parseNumber(a[1])}}return 2!==e.length&&"string"!=typeof e?void 0===t?null:t:{x:i.parseNumber(e.x),y:i.parseNumber(e.y)}}t.offset=a,t.equals=r,t.clone=n,t.toString=o,t.serialize=s,t.getDistance=l,t.equalWithPrecision=u,t.parsePoint=c}(r=t.Point||(t.Point={}));var n;!function(t){function a(e){return 0===e.width&&0===e.height}function r(e,t){return void 0!==e&&null!==e&&void 0!==t&&null!==t&&e.width===t.width&&e.height===t.height}function n(e){return null!==e?{width:e.width,height:e.height}:null}function o(e,t){var i=n(e);return t&&(i.width+=t.left+t.right,i.height+=t.top+t.bottom),i}function s(e,t){var i=n(e);return t&&(i.width=i.width-t.left-t.right,i.width<0&&(i.width=0),i.height=i.height-t.top-t.bottom,i.height<0&&(i.height=0)),i}function l(e,t){return t&&(e.width=Math.max(e.width,t.width),e.height=Math.max(e.height,t.height)),e}function u(e){return{left:0,top:0,width:e.width,height:e.height}}function c(e){return"{width:"+e.width+", height:"+e.height+"}"}function h(e,t){return e===t||void 0!==e&&void 0!==t&&e.width===t.width&&e.height===t.height}function d(t,i){return t===i||void 0!==t&&void 0!==i&&e.Double.equalWithPrecision(t.width,i.width)&&e.Double.equalWithPrecision(t.height,i.height)}function p(e,t){if(null===e)return void 0===t?null:t;if(void 0===e)return void 0===t?null:t;if(2===e.length)return{width:i.parseNumber(e[0]),height:i.parseNumber(e[1])};if("string"==typeof e){var a=e.split(",");return 2!==a.length?void 0===t?null:t:{width:i.parseNumber(a[0]),height:i.parseNumber(a[1])}}return 2!==e.length&&"string"!=typeof e?void 0===t?null:t:{width:i.parseNumber(e.width),height:i.parseNumber(e.height)}}t.isEmpty=a,t.equals=r,t.clone=n,t.inflate=o,t.deflate=s,t.combine=l,t.toRect=u,t.toString=c,t.equal=h,t.equalWithPrecision=d,t.parseSize=p}(n=t.Size||(t.Size={}));var o;!function(t){function a(e){return{x:e.left,y:e.top}}function r(e){return{width:e.width,height:e.height}}function n(e,t){e.width=t.width,e.height=t.height}function o(e){return e.left+e.width}function s(e){return e.top+e.height}function l(e){return{x:e.left,y:e.top}}function u(e){return{x:e.left+e.width,y:e.top}}function c(e){return{x:e.left,y:e.top+e.height}}function h(e){return{x:e.left+e.width,y:e.top+e.height}}function d(e,t){return void 0!==t&&null!==t&&e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height}function p(e){return null!==e?{left:e.left,top:e.top,width:e.width,height:e.height}:null}function g(e){return"{left:"+e.left+", top:"+e.top+", width:"+e.width+", height:"+e.height+"}"}function m(e,t,i){var a=e.left+t>=0?e.left+t:0,r=e.top+i>=0?e.top+i:0;return{left:a,top:r,width:e.width,height:e.height}}function f(e,t){var i=p(e);return t&&(i.left-=t.left,i.top-=t.top,i.width+=t.left+t.right,i.height+=t.top+t.bottom),i}function y(e,t){var i=p(e);return t&&(i.left+=t.left,i.top+=t.top,i.width-=t.left+t.right,i.height-=t.top+t.bottom),i}function v(e,t){return{left:e.left-t,top:e.top-t,width:e.width+t+t,height:e.height+t+t}}function b(e,t){return{left:e.left+t,top:e.top+t,width:e.width-t-t,height:e.height-t-t}}function C(e,t,i){return{x:Math.min(Math.max(e.left,t),e.left+e.width),y:Math.min(Math.max(e.top,i),e.top+e.height)}}function S(e,t){return e===t||void 0!==e&&void 0!==t&&e.left===t.left&&e.top===t.top&&e.width===t.width&&e.height===t.height}function x(t,i){return t===i||void 0!==t&&void 0!==i&&e.Double.equalWithPrecision(t.left,i.left)&&e.Double.equalWithPrecision(t.top,i.top)&&e.Double.equalWithPrecision(t.width,i.width)&&e.Double.equalWithPrecision(t.height,i.height)}function w(e){return void 0===e||null===e||0===e.width&&0===e.height}function D(t,i){return null===t||null===i?!1:e.Double.lessOrEqualWithPrecision(t.left,i.x)&&e.Double.lessOrEqualWithPrecision(i.x,t.left+t.width)&&e.Double.lessOrEqualWithPrecision(t.top,i.y)&&e.Double.lessOrEqualWithPrecision(i.y,t.top+t.height)}function P(e,t){if(!e||!t)return!1;var i=Math.max(e.left,t.left),a=Math.min(e.left+e.width,t.left+t.width);if(i>a)return!1;var r=Math.max(e.top,t.top),n=Math.min(e.top+e.height,t.top+t.height);return n>=r}function L(e,t){if(!e)return t;if(!t)return e;var i=Math.max(e.left,t.left),a=Math.max(e.top,t.top),r=Math.min(e.left+e.width,t.left+t.width),n=Math.min(e.top+e.height,t.top+t.height);return r>=i&&n>=a?{left:i,top:a,width:r-i,height:n-a}:{left:0,top:0,width:0,height:0}}function _(e,t){if(!e)return t;if(!t)return e;var i=Math.min(e.left,t.left),a=Math.min(e.top,t.top),r=Math.max(e.left+e.width,t.left+t.width),n=Math.max(e.top+e.height,t.top+t.height);return{left:i,top:a,width:r-i,height:n-a}}function N(e,t){if(null===e)return void 0===t?null:t;if(void 0===e)return void 0===t?null:t;if(4===e.length)return{left:i.parseNumber(e[0]),top:i.parseNumber(e[1]),width:i.parseNumber(e[2]),height:i.parseNumber(e[3])};if("string"==typeof e){var a=e.split(",");return 4!==a.length?void 0===t?null:t:{left:i.parseNumber(a[0]),top:i.parseNumber(a[1]),width:i.parseNumber(a[2]),height:i.parseNumber(a[3])}}return 4!==e.length&&"string"!=typeof e?void 0===t?null:t:{left:i.parseNumber(e.left),top:i.parseNumber(e.top),width:i.parseNumber(e.width),height:i.parseNumber(e.height)}}t.getOffset=a,t.getSize=r,t.setSize=n,t.right=o,t.bottom=s,t.topLeft=l,t.topRight=u,t.bottomLeft=c,t.bottomRight=h,t.equals=d,t.clone=p,t.toString=g,t.offset=m,t.inflate=f,t.deflate=y,t.inflateBy=v,t.deflateBy=b,t.getClosestPoint=C,t.equal=S,t.equalWithPrecision=x,t.isEmpty=w,t.containsPoint=D,t.isIntersecting=P,t.intersect=L,t.combine=_,t.parseRect=N}(o=t.Rect||(t.Rect={}));var s;!function(t){function a(e,t){var i=o(e);return t&&(i.left=e.left+t.left,i.right=e.right+t.right,
i.bottom=e.bottom+t.bottom,i.top=e.top+t.top),i}function r(e){return e.left+e.right}function n(e){return e.top+e.bottom}function o(e){return null!==e?{left:e.left,top:e.top,right:e.right,bottom:e.bottom}:null}function s(e,t){return void 0!==e&&null!==e&&void 0!==t&&null!==t&&e.left===t.left&&e.bottom===t.bottom&&e.right===t.right&&e.top===t.top}function l(e){var t=e.right;e.right=e.left,e.left=t}function u(e){var t=e.top;e.top=e.bottom,e.bottom=t}function c(e){return"{top:"+e.top+", left:"+e.left+", right:"+e.right+", bottom:"+e.bottom+"}"}function h(e){return e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px"}function d(e){return 0===e.left&&0===e.top&&0===e.right&&0===e.bottom}function p(e,t){return e===t||void 0!==e&&void 0!==t&&e.left===t.left&&e.top===t.top&&e.right===t.right&&e.bottom===t.bottom}function g(t,i){return t===i||void 0!==t&&void 0!==i&&e.Double.equalWithPrecision(t.left,i.left)&&e.Double.equalWithPrecision(t.top,i.top)&&e.Double.equalWithPrecision(t.right,i.right)&&e.Double.equalWithPrecision(t.bottom,i.bottom)}function m(e,t,a){if(null===e)return void 0===t?null:t;if(void 0===e)return void 0===t?null:t;if(4===e.length)return{left:i.parseNumber(e[0]),top:i.parseNumber(e[1]),right:i.parseNumber(e[2]),bottom:i.parseNumber(e[3])};if("string"==typeof e){var r=e.split(",");return 4!==r.length?void 0===t?null:t:{left:i.parseNumber(r[0]),top:i.parseNumber(r[1]),right:i.parseNumber(r[2]),bottom:i.parseNumber(r[3])}}return 4!==e.length&&"string"!=typeof e?void 0===t?null:t:{left:i.parseNumber(e.left),top:i.parseNumber(e.top),right:i.parseNumber(e.right),bottom:i.parseNumber(e.bottom)}}t.inflate=a,t.getWidth=r,t.getHeight=n,t.clone=o,t.equals=s,t.flipHorizontal=l,t.flipVertical=u,t.toString=c,t.toCssString=h,t.isEmpty=d,t.equal=p,t.equalWithPrecision=g,t.parseThickness=m}(s=t.Thickness||(t.Thickness={}));var l;!function(t){function i(e){return 0===e.x&&0===e.y}function a(e,t){return void 0!==e&&null!==e&&void 0!==t&&null!==t&&e.x===t.x&&e.y===t.y}function r(e){return null!==e?{x:e.x,y:e.y}:null}function n(e){return"{x:"+e.x+", y:"+e.y+"}"}function o(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function s(e){return e.x*e.x+e.y*e.y}function l(e,t){return{x:e.x*t,y:e.y*t}}function u(e){return i(e)?e:l(e,1/o(e))}function c(e){return{x:e.y,y:-e.x}}function h(e){return{x:-e.y,y:e.x}}function d(e,t){var i=e.x*Math.cos(t)-e.y*Math.sin(t),a=e.x*Math.sin(t)+e.y*Math.cos(t);return{x:i,y:a}}function p(e,t){return e===t||void 0!==e&&void 0!==t&&e.x===t.x&&e.y===t.y}function g(t,i){return t===i||void 0!==t&&void 0!==i&&e.Double.equalWithPrecision(t.x,i.x)&&e.Double.equalWithPrecision(t.y,i.y)}function m(e,t){return e&&t?{x:e.x+t.x,y:e.y+t.y}:void 0}function f(e,t){return e&&t?{x:e.x-t.x,y:e.y-t.y}:void 0}function y(e,t){return e&&t?e.x*t.x+e.y*t.y:void 0}function v(e,t){return e&&t?{x:t.x-e.x,y:t.y-e.y}:void 0}t.isEmpty=i,t.equals=a,t.clone=r,t.toString=n,t.getLength=o,t.getLengthSqr=s,t.scale=l,t.normalize=u,t.rotate90DegCW=c,t.rotate90DegCCW=h,t.rotate=d,t.equal=p,t.equalWithPrecision=g,t.add=m,t.subtract=f,t.dotProduct=y,t.getDeltaVector=v}(l=t.Vector||(t.Vector={}))}(i=t.shapes||(t.shapes={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=jsCommon.PixelConverter;!function(i){function r(t,i,a){if(!t||_.isEmpty(i))return!1;for(var r=0,n=i.length;n>r;r++){var o=i[r];if(e.DataViewScopeIdentity.equals(t,o,a))return i.splice(r,1),!0}return!1}var n;!function(e){var t=jsCommon.CssConstants.createClassAndSelector;e.HeaderContainer=t("headerContainer"),e.Header=t("slicerHeader"),e.HeaderText=t("headerText"),e.Body=t("slicerBody"),e.LabelText=t("slicerText"),e.CountText=t("slicerCountText"),e.Clear=t("clear"),e.MultiSelectEnabled=t("isMultiSelectEnabled")}(n=i.Selectors||(i.Selectors={}));var o;!function(e){e.Clear="Slicer_Clear",e.SelectAll="Slicer_SelectAll"}(o=i.DisplayNameKeys||(i.DisplayNameKeys={}));var s;!function(e){function t(e){return null!=e&&null!=e.slicerSettings}e.areSettingsDefined=t}(s=i.SettingsHelper||(i.SettingsHelper={}));var l;!function(e){function t(e){if(e){var t=e.categorical;if(t&&!_.isEmpty(t.categories))return t.categories[0].identityFields}}e.getIdentityFields=t}(l=i.DefaultValueHandler||(i.DefaultValueHandler={})),i.tryRemoveValueFromRetainedList=r;var u=function(){function i(){}return i.prototype.createSlicerHeader=function(e){var t=document.createElement("div");t.className=n.Header["class"];var i=d3.select(t);return i.append("span").classed(n.Clear["class"],!0).attr("title",e.getLocalizedString(o.Clear)),i.append("div").classed(n.HeaderText["class"],!0),t},i.prototype.getHeaderTextProperties=function(e){var t={fontFamily:"wf_segoe-ui_normal",fontSize:"10px"};return e.header.show&&(t.fontSize=a.fromPoint(e.header.textSize)),t},i.prototype.getSlicerBodyViewport=function(e,t,i){var a=t.header.show?this.getHeaderHeight(t,i):0,r=e.height-(a+t.header.borderBottomWidth);return{height:r,width:e.width}},i.prototype.updateSlicerBodyDimensions=function(e,t,i){var r=this.getSlicerBodyViewport(e,i,this.getHeaderTextProperties(i));t.style({height:a.toString(r.height),width:a.toString(r.width)})},i.prototype.getHeaderHeight=function(t,i){return e.TextMeasurementService.estimateSvgTextHeight(this.getTextProperties(t.header.textSize,i))+t.general.outlineWeight},i.prototype.getRowHeight=function(t,i){return e.TextMeasurementService.estimateSvgTextHeight(this.getTextProperties(t.slicerText.textSize,i))+this.getRowsOutlineWidth(t.slicerText.outline,t.general.outlineWeight)},i.prototype.styleSlicerHeader=function(e,t,i){if(t.header.show){e.style("display","block");var a=e.select(n.HeaderText.selector).text(i);this.setSlicerHeaderTextStyle(a,t)}else e.style("display","none")},i.prototype.setSlicerTextStyle=function(e,i){e.style({color:i.slicerText.color,"background-color":i.slicerText.background,"border-style":t.VisualBorderUtil.getBorderStyle(i.slicerText.outline),"border-color":i.general.outlineColor,"border-width":t.VisualBorderUtil.getBorderWidth(i.slicerText.outline,i.general.outlineWeight),"font-size":a.fromPoint(i.slicerText.textSize)})},i.prototype.getRowsOutlineWidth=function(e,t){switch(e){case"None":case"LeftRight":return 0;case"BottomOnly":case"TopOnly":return t;case"TopBottom":case"Frame":return 2*t;default:return 0}},i.prototype.setSlicerHeaderTextStyle=function(e,i){e.style({"border-style":t.VisualBorderUtil.getBorderStyle(i.header.outline),"border-color":i.general.outlineColor,"border-width":t.VisualBorderUtil.getBorderWidth(i.header.outline,i.general.outlineWeight),color:i.header.fontColor,"background-color":i.header.background,"font-size":a.fromPoint(i.header.textSize)})},i.prototype.getTextProperties=function(e,t){return t.fontSize=a.fromPoint(e),t},i}();i.DOMHelper=u}(i=t.SlicerUtil||(t.SlicerUtil={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){if(0!==t.length){var i=e.selectAll("title"),a=i.data(function(e,i){return[t[i]]});a.enter().append("title"),a.exit().remove(),a.text(function(e){return e})}}e.tooltipUpdate=t}(t=e.tooltipUtils||(e.tooltipUtils={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){return"translate("+e+","+t+")"}function i(e){return"translateX("+e+"px)"}function a(e,t){return"translate("+e+"px,"+t+"px)"}function r(e,t,i,a,r){return"translate("+e+","+t+") rotate("+r+","+i+","+a+")"}function n(e){return"scale("+e+")"}function o(e,t,i){return"translate("+e+","+t+") scale("+i+")"}function s(e,t){return e+" "+t}function l(){var e=Date.now;Date.now=function(){return 1/0},d3.timer.flush(),Date.now=e}function u(e){if(e){var t=e,i=e;i.animation&&(t=i.animation),t&&t.transitionImmediate&&l()}}function c(e){e.getAttribute("d")||e.setAttribute("d","")}function h(e){isNaN(e.x)&&(e.x=0),isNaN(e.y)&&(e.y=0)}function d(e){if(!e||0===e.length)return{x:"0",y:"0"};var t,i=e.split(/[\s,]+/),a="0",r=i[0];if(1===i.length)t=r.substring(10,r.length-1);else{var n=i[1];a=n.substring(0,n.length-1),t=r.substring(10,r.length)}return{x:t,y:a}}function p(e,t,i){var a="rotate("+i+" "+e/2+" "+t/2+")",r="M0 0";return r+="L0 "+t,r+="L"+e+" "+t/2+" Z",{path:r,transform:a}}function g(e){if(null!=e){var t=e.getBoundingClientRect(),i=e.getBBox();if(i.height>0&&i.width>0)return{x:t.width/i.width,y:t.height/i.height}}return{x:1,y:1}}e.AlmostZero=1e-6,e.translate=t,e.translateXWithPixels=i,e.translateWithPixels=a,e.translateAndRotate=r,e.scale=n,e.translateAndScale=o,e.transformOrigin=s,e.flushAllD3Transitions=l,e.flushAllD3TransitionsIfNeeded=u,e.ensureDAttribute=c,e.ensureValidSVGPoint=h,e.parseTranslateTransform=d,e.createArrow=p,e.getTransformScaleRatios=g}(t=e.SVGUtil||(e.SVGUtil={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e){return e.toString().replace(new RegExp(" ","g"),"&nbsp")}function i(e){return e.replace(/\.\.\./g,"")}e.removeBreakingSpaces=t,e.removeEllipses=i}(t=e.TextUtil||(e.TextUtil={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t,i=jsCommon.Utility;!function(e){function t(e,t){return null!=e&&null!=e.type&&null!=e.type.misc&&null!=e.type.misc.webUrl&&e.type.misc.webUrl&&null!=t&&i.isValidUrl(t)}function a(e,t){return n(e)&&t&&i.isValidUrl(t)}function r(e){if(!e||!e.metadata||_.isEmpty(e.metadata.columns))return!1;for(var t=0,i=e.metadata.columns;t<i.length;t++){var a=i[t];if(n(a))return!0}return!1}function n(e){return e&&e.type&&e.type.misc&&e.type.misc.imageUrl}e.isValidUrl=t,e.isValidImage=a,e.hasImageColumn=r}(t=e.UrlHelper||(e.UrlHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){function a(e){if(e)for(var t in e){var i=e[t];for(var a in i.properties){var r=i.properties[a];if(r.type&&r.type[N])return r.rule.inputRole}}}function r(e){var t=e&&e.query&&e.query.projections&&e.query.projections.Gradient?!0:!1;return t}function n(e){var t;if(e&&!$.isEmptyObject(e)){t=l();for(var i in t){var a=e.hasOwnProperty(i);if(a){var r=e[i];r&&r.solid&&r.solid.color&&(r=r.solid.color),t[i]=r}}}return t}function o(e){if(e&&e.values&&e.values.grouped){var i=e.values.grouped();return t.DataRoleHelper.getMeasureIndexOfRole(i,"Gradient")}return-1}function s(e){var t=o(e);return t>=0}function l(){var e=p(),t={diverging:!1,minColor:e.minColor,midColor:L,maxColor:e.maxColor,minValue:void 0,midValue:void 0,maxValue:void 0};return t}function u(){return m()}function c(t,i,a){var r,n,o=e.data.DataViewObjectDefinitions.ensure(a,_,null),s=d(a);s&&($.isNumeric(i)&&(r=void 0!==i?P["double"](+i):void 0),("minColor"===t||"midColor"===t||"maxColor"===t)&&(n=v(s,t,i)),"minColor"===t?b(s,n):"midColor"===t?C(s,n):"maxColor"===t?S(s,n):"minValue"===t?x(s,r):"midValue"===t?w(s,r):"maxValue"===t?D(s,r):"diverging"===t?(s=i?f(s):m(s),o.properties[N]=s):"revertToDefault"===t&&(s=this.getDefaultFillRuleDefinition(),o.properties[N]=s))}function h(e){return e?g(e):l()}function d(t){var i=e.data.DataViewObjectDefinitions.getValue(t,{objectName:_,propertyName:N},null);return i}function p(){var t=new e.visuals.DataColorPalette,i=t.getColorByIndex(0),a=d3.scale.linear().domain([0,100]).range(["#ffffff",i.value]),r=i.value,n=a(20),o=L;return{minColor:n,midColor:o,maxColor:r}}function g(e){var t,i,a,r,n,o=L,s=void 0!==e.linearGradient3;if(e.linearGradient2){var l=e.linearGradient2.max.color,u=e.linearGradient2.min.color,c=e.linearGradient2.max.value,h=e.linearGradient2.min.value;t=l.value,i=u.value,c&&(a=c.value),h&&(n=h.value)}else if(e.linearGradient3){var l=e.linearGradient3.max.color,d=e.linearGradient3.mid.color,u=e.linearGradient3.min.color,c=e.linearGradient3.max.value,p=e.linearGradient3.mid.value,h=e.linearGradient3.min.value;t=l.value,o=d.value,i=u.value,c&&(a=c.value),p&&(r=p.value),h&&(n=h.value)}return{diverging:s,minColor:i,midColor:o,maxColor:t,minValue:n,midValue:r,maxValue:a}}function m(e){var t=h(e),i={linearGradient2:{max:{color:P.text(t.maxColor)},min:{color:P.text(t.minColor)}}};return i}function f(e){var t=h(e),i={linearGradient3:{max:{color:P.text(t.maxColor)},mid:{color:P.text(t.midColor)},min:{color:P.text(t.minColor)}}};return i}function y(e,t){var i,a;return e.linearGradient3?(a=f(),"minColor"===t?i=a.linearGradient3.min.color:"midColor"===t?i=a.linearGradient3.mid.color:"maxColor"===t&&(i=a.linearGradient3.max.color)):e.linearGradient2&&(a=m(),"minColor"===t?i=a.linearGradient2.min.color:"maxColor"===t&&(i=a.linearGradient2.max.color)),i}function v(e,t,i){var a;return a=i?P.text(i):y(e,t)}function b(e,t){e.linearGradient2?e.linearGradient2.min.color=t:e.linearGradient3&&(e.linearGradient3.min.color=t)}function C(e,t){e.linearGradient3&&(e.linearGradient3.mid.color=t)}function S(e,t){e.linearGradient2?e.linearGradient2.max.color=t:e.linearGradient3&&(e.linearGradient3.max.color=t)}function x(e,t){e.linearGradient2?e.linearGradient2.min.value=t:e.linearGradient3&&(e.linearGradient3.min.value=t)}function w(e,t){e.linearGradient3&&(e.linearGradient3.mid.value=t)}function D(e,t){e.linearGradient2?e.linearGradient2.max.value=t:e.linearGradient3&&(e.linearGradient3.max.value=t)}var P=e.data.SQExprBuilder,L="#ffffff",_="dataPoint",N="fillRule";i.getFillRuleRole=a,i.shouldShowGradient=r,i.getUpdatedGradientSettings=n,i.getGradientMeasureIndex=o,i.hasGradientRole=s,i.getDefaultGradientSettings=l,i.getDefaultFillRuleDefinition=u,i.updateFillRule=c,i.getGradientSettings=h,i.getFillRule=d,i.getGradientSettingsFromRule=g}(i=t.GradientUtils||(t.GradientUtils={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function i(){return"#FFF"}function a(){return 50}function r(){return!0}function n(){return{color:i(),transparency:a(),show:r()}}function o(e,t,i){if(i){var r=t&&t.transparency;null==r&&(r=a());var n={selector:null,properties:{transparency:r,image:t&&t.image},objectName:"plotArea"};e.pushInstance(n)}}function s(t,i,a){var r=t&&t.image,n=r&&r.url,o=r&&r.scaling,s=t&&t.transparency,l=i.children(".background-image");if(!n)return void(0!==l.length&&l.remove());switch(0===l.length&&(i.prepend('<div class="background-image"></div>'),l=i.children(".background-image"),l.css("position","absolute")),l.css({width:a.width,height:a.height,"margin-left":a.left,"margin-top":a.top}),l.css({"background-image":"url("+n+")","background-repeat":"no-repeat",opacity:(100-s)/100}),o){case e.imageScalingType.normal:l.css({"background-size":"","background-position":"50% 50%"});break;case e.imageScalingType.fit:l.css({"background-size":"100% 100%","background-position":""});break;case e.imageScalingType.fill:l.css({"background-size":"100%","background-position":"50% 50%"});break;default:l.css({"background-size":"","background-position":"50% 50%"})}}t.getDefaultColor=i,t.getDefaultTransparency=a,t.getDefaultShow=r,t.getDefaultValues=n,t.enumeratePlot=o,t.renderBackgroundImage=s}(t=e.visualBackgroundHelper||(e.visualBackgroundHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=e.data.Selector,a=function(){function e(){}return e.prototype.pushInstance=function(e){var t=this.instances;t||(t=this.instances=[]);var i=this.containerIdx;null!=i&&(e.containerIdx=i);for(var a=0;a<t.length;a++){var r=t[a];if(this.canMerge(r,e))return this.extend(r,e,"properties"),this.extend(r,e,"validValues"),this}return t.push(e),this},e.prototype.pushContainer=function(e){var t=this.containers;t||(t=this.containers=[]);var i=t.push(e);return this.containerIdx=i-1,this},e.prototype.popContainer=function(){return this.containerIdx=void 0,this},e.prototype.complete=function(){if(this.instances){var e={instances:this.instances},t=this.containers;return t&&(e.containers=t),e}},e.prototype.canMerge=function(e,t){return e.objectName===t.objectName&&e.containerIdx===t.containerIdx&&i.equals(e.selector,t.selector)},e.prototype.extend=function(e,t,i){var a=t[i];if(a){var r=e[i];r||(r=e[i]={});for(var n in a)r[n]||(r[n]=a[n])}},e.merge=function(t,i){var a=e.normalize(t),r=e.normalize(i);if(!a||!r)return a||r;for(var n=a.containers?a.containers.length:0,o=0,s=r.instances;o<s.length;o++){var l=s[o];a.instances.push(l),null!=l.containerIdx&&(l.containerIdx+=n)}var u=r.containers;return _.isEmpty(u)||(a.containers?Array.prototype.push.apply(a.containers,u):a.containers=u),a},e.normalize=function(e){return _.isArray(e)?{instances:e}:e},e.getContainerForInstance=function(e,t){return e.containers[t.containerIdx]},e}();t.ObjectEnumerationBuilder=a}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e){return"0px"===e?"none":"solid"}function i(e,t){return"None"===e||0===t?"none":"solid"}function a(e,t){switch(e){case"None":return"0px";case"BottomOnly":return"0px 0px "+t+"px 0px";case"TopOnly":return t+"px 0px 0px 0px";case"LeftOnly":return"0px 0px 0px "+t+"px";case"RightOnly":return"0px "+t+"px 0px 0px";case"TopBottom":return t+"px 0px "+t+"px 0px";case"LeftRight":return"0px "+t+"px 0px "+t+"px";case"Frame":return t+"px";default:return e.replace("1",t.toString())}}e.getBorderStyle=t,e.getBorderStyleWithWeight=i,e.getBorderWidth=a}(t=e.VisualBorderUtil||(e.VisualBorderUtil={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(e,t){return{m00:1,m01:0,m02:e,m10:0,m11:1,m12:t}}function i(e,t){return{m00:e,m01:0,m02:0,m10:0,m11:t,m12:0}}function a(e){var t=e,i=Math.sin(t),a=Math.cos(t);return{m00:a,m01:-i,m02:0,m10:i,m11:a,m12:0}}function r(e){var t=e.m00*e.m11-e.m01*e.m10,i=1/t;return{m00:e.m11*i,m01:-e.m01*i,m02:(e.m01*e.m12-e.m02*e.m11)*i,m10:-e.m10*i,m11:e.m00*i,m12:-(e.m00*e.m12-e.m10*e.m02)*i}}function n(e,t){return{m00:e.m00*t.m00+e.m01*t.m10,m01:e.m00*t.m01+e.m01*t.m11,m02:e.m00*t.m02+e.m01*t.m12+e.m02,m10:e.m10*t.m00+e.m11*t.m10,m11:e.m10*t.m01+e.m11*t.m11,m12:e.m10*t.m02+e.m11*t.m12+e.m12}}var o=function(){function e(e){this.matrix=e||{m00:1,m01:0,m02:0,m10:0,m11:1,m12:0}}return e.prototype.applyToPoint=function(e){if(!e)return e;var t=this.matrix;return{x:t.m00*e.x+t.m01*e.y+t.m02,y:t.m10*e.x+t.m11*e.y+t.m12}},e.prototype.applyToRect=function(e){if(!e)return e;var t=e.left,i=e.top,a=this.matrix,r=1!==a.m00||1!==a.m11,n=0!==a.m01||0!==a.m10;if(!n&&!r)return{left:t+a.m02,top:i+a.m12,width:e.width,height:e.height};var o,s,l,u,c=e.left+e.width,h=e.top+e.height;if(n){var d=a.m00*t+a.m01*i+a.m02,p=a.m10*t+a.m11*i+a.m12,g=a.m00*t+a.m01*h+a.m02,m=a.m10*t+a.m11*h+a.m12,f=a.m00*c+a.m01*i+a.m02,y=a.m10*c+a.m11*i+a.m12,v=a.m00*c+a.m01*h+a.m02,b=a.m10*c+a.m11*h+a.m12;o=Math.min(d,g,f,v),s=Math.max(d,g,f,v),l=Math.min(p,m,y,b),u=Math.max(p,m,y,b)}else{var d=a.m00*t+a.m02,p=a.m11*i+a.m12,v=a.m00*c+a.m02,b=a.m11*h+a.m12;o=Math.min(d,v),s=Math.max(d,v),l=Math.min(p,b),u=Math.max(p,b)}return{left:o,top:l,width:s-o,height:u-l}},e.prototype.translate=function(e,i){if(0!==e||0!==i){var a=t(e,i);this.matrix=n(this.matrix,a),this._inverse=null}},e.prototype.scale=function(e,t){if(1!==e||1!==t){var a=i(e,t);this.matrix=n(this.matrix,a),this._inverse=null}},e.prototype.rotate=function(e){if(0!==e){var t=a(e);this.matrix=n(this.matrix,t),this._inverse=null}},e.prototype.add=function(e){e&&(this.matrix=n(this.matrix,e.matrix),this._inverse=null)},e.prototype.getInverse=function(){return this._inverse||(this._inverse=new e(r(this.matrix))),this._inverse},e}();e.Transform=o,e.createTranslateMatrix=t,e.createScaleMatrix=i,e.createRotationMatrix=a,e.createInverseMatrix=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e){return e.is(":visible")}e.partiallyVisible=t}(t=e.visibilityHelper||(e.visibilityHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=e.data.SQExprConverter,r=e.data.SemanticFilter;!function(i){function n(i,a,n,s){if(i&&i.categorical&&!_.isEmpty(i.categorical.categories)){var l=i.categorical.categories[0].identityFields;if(l){var u=i.metadata&&i.metadata.objects&&e.DataViewObjects.getValue(i.metadata.objects,t.slicerProps.filterPropertyIdentifier),c=s.analyzeFilter({dataView:i,defaultValuePropertyId:t.slicerProps.defaultValue,filter:u,fieldSQExprs:l});if(c){var h=c.filter;if(h&&!r.isSameFilter(h,u)){n.handleClearSelection();var d=t.slicerProps.filterPropertyIdentifier,p={};p[d.propertyName]=c.filter;var g={objectName:d.objectName,selector:void 0,properties:p},m={merge:[g]};s.persistProperties(m)}var f=o(u,c,i.metadata,i.categorical,a,n,s);return f}}}}function o(e,i,a,r,n,o,u){var c=o&&o.isSelectionModeInverted(),h=!1,d=i.selectedIdentities;h=!_.isEmpty(d),e&&(c=i.isNotFilter),o&&o.setSelectionModeInverted(c);var p=r.categories[0],g=p&&p.values?p.values.length:0,m=[],f=t.valueFormatter.getFormatString(p.source,t.slicerProps.formatString),y=0,v=r.values&&r.values[0]&&r.values[0].values;v&&_.isEmpty(v)&&(v=void 0);for(var b=0;g>b;b++){var C=p.identity&&p.identity[b],S=p.values&&p.values[b],x=v&&v[b];if(null!=S){var w=h?t.SlicerUtil.tryRemoveValueFromRetainedList(C,d):!1,D=t.valueFormatter.format(S,f),P={value:D,tooltip:D,identity:t.SelectionId.createWithId(C),selected:w,count:x};m.push(P),P.selected&&y++}}if(h)for(var L=0;L<d.length;L++){var C=d[L],D=s(C,f),N={value:D,tooltip:D,identity:t.SelectionId.createWithId(C),selected:!0,count:null!=v?0:void 0};m.push(N),y++}var T=l(a);if(T.selection.selectAllCheckboxEnabled){if(y>0&&!a.segment&&y===m.length){c=!c,o.setSelectionModeInverted(c);for(var V=0;V<m.length;V++){var M=m[V];M.selected=!1}h=!1,y=0}m.unshift({value:n,tooltip:n,identity:t.SelectionId.createWithMeasure(n),selected:!!c&&0===y,isSelectAllDataPoint:!0,count:void 0})}var A={categorySourceName:p.source.displayName,slicerSettings:T,slicerDataPoints:m,hasSelectionOverride:h,defaultValue:i.defaultValue};return A}function s(e,i){var r=a.getFirstComparandValue(e);return t.valueFormatter.format(r,i)}function l(i){var a=t.Slicer.DefaultStyleProperties(),r=i.objects;if(r){a.general.outlineColor=e.DataViewObjects.getFillColor(r,t.slicerProps.general.outlineColor,a.general.outlineColor),a.general.outlineWeight=e.DataViewObjects.getValue(r,t.slicerProps.general.outlineWeight,a.general.outlineWeight),a.general.orientation=e.DataViewObjects.getValue(r,t.slicerProps.general.orientation,a.general.orientation),a.header.show=e.DataViewObjects.getValue(r,t.slicerProps.header.show,a.header.show),a.header.fontColor=e.DataViewObjects.getFillColor(r,t.slicerProps.header.fontColor,a.header.fontColor);var n=e.DataViewObjects.getFillColor(r,t.slicerProps.header.background);n&&(a.header.background=n),a.header.outline=e.DataViewObjects.getValue(r,t.slicerProps.header.outline,a.header.outline),a.header.textSize=e.DataViewObjects.getValue(r,t.slicerProps.header.textSize,a.header.textSize),a.slicerText.color=e.DataViewObjects.getFillColor(r,t.slicerProps.items.fontColor,a.slicerText.color);var o=e.DataViewObjects.getFillColor(r,t.slicerProps.items.background);o&&(a.slicerText.background=o),a.slicerText.outline=e.DataViewObjects.getValue(r,t.slicerProps.items.outline,a.slicerText.outline),a.slicerText.textSize=e.DataViewObjects.getValue(r,t.slicerProps.items.textSize,a.slicerText.textSize),a.selection.selectAllCheckboxEnabled=e.DataViewObjects.getValue(r,t.slicerProps.selection.selectAllCheckboxEnabled,a.selection.selectAllCheckboxEnabled),a.selection.singleSelect=e.DataViewObjects.getValue(r,t.slicerProps.selection.singleSelect,a.selection.singleSelect)}return a}i.convert=n}(i=t.DataConversion||(t.DataConversion={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t=e.visuals.shapes;!function(e){e[e.None=0]="None",e[e.VerticalBottomTop=1]="VerticalBottomTop",e[e.VerticalTopBottom=2]="VerticalTopBottom",e[e.HorizontalLeftRight=3]="HorizontalLeftRight",e[e.HorizontalRightLeft=4]="HorizontalRightLeft"}(e.RectOrientation||(e.RectOrientation={}));var i=e.RectOrientation;!function(e){e[e.Allowed=0]="Allowed",e[e.Disallowed=1]="Disallowed",e[e.Partial=2]="Partial"}(e.OutsidePlacement||(e.OutsidePlacement={}));var a=e.OutsidePlacement,r=function(){function r(){this.movingStep=3,this.hideOverlapped=!0,this.defaultDataLabelSettings={anchorMargin:r.DefaultAnchorMargin,anchorRectOrientation:i.None,contentPosition:128,outsidePlacement:a.Disallowed,maximumMovingDistance:r.DefaultMaximumMovingDistance,minimumMovingDistance:r.DefaultMinimumMovingDistance,validContentPositions:128,opacity:1}}return Object.defineProperty(r.prototype,"defaultSettings",{get:function(){return this.defaultDataLabelSettings},enumerable:!0,configurable:!0}),r.prototype.hideCollidedLabels=function(e,t,i,a){void 0===a&&(a=!1);var o=new n(e,t,i),s=[],l={x:0,y:0};a&&(l.x=e.width/2,l.y=e.height/2);for(var u=0,c=t.length;c>u;u++)if(i.filter(t[u])){var h=this.getLabelInfo(t[u]);h.anchorPoint={x:i.labelLayout.x(t[u])+l.x,y:i.labelLayout.y(t[u])+l.y};var d=this.calculateContentPosition(h,h.contentPosition,t[u].size,h.anchorMargin);r.isValid(d)&&!this.hasCollisions(o,h,d,e)&&(t[u].labelX=d.left-l.x,t[u].labelY=d.top-l.y,o.add(h,d),s.push(t[u]))}return s},r.prototype.getLabelInfo=function(e){var t=this.defaultDataLabelSettings;return e.anchorMargin=void 0!==e.anchorMargin?e.anchorMargin:t.anchorMargin,e.anchorRectOrientation=void 0!==e.anchorRectOrientation?e.anchorRectOrientation:t.anchorRectOrientation,e.contentPosition=void 0!==e.contentPosition?e.contentPosition:t.contentPosition,e.maximumMovingDistance=void 0!==e.maximumMovingDistance?e.maximumMovingDistance:t.maximumMovingDistance,e.minimumMovingDistance=void 0!==e.minimumMovingDistance?e.minimumMovingDistance:t.minimumMovingDistance,e.outsidePlacement=void 0!==e.outsidePlacement?e.outsidePlacement:t.outsidePlacement,e.validContentPositions=void 0!==e.validContentPositions?e.validContentPositions:t.validContentPositions,e.opacity=void 0!==e.opacity?e.opacity:t.opacity,e.maximumMovingDistance+=e.anchorMargin,e},r.prototype.calculateContentPositionFromPoint=function(e,t,i,a){var r={x:0,y:0};if(e){if(void 0!==e.x&&isFinite(e.x))switch(r.x=e.x,t){case 1:case 8:case 64:r.x-=i.width/2;break;case 4:case 32:case 256:r.x+=i.width/2}if(void 0!==e.y&&isFinite(e.y))switch(r.y=e.y,t){case 8:case 16:case 32:r.y-=i.height/2;break;case 4:case 1:case 2:r.y-=i.height}if(void 0!==a&&isFinite(a))switch(t){case 1:r.x-=a,r.y-=a;break;case 8:r.x-=a;break;case 64:r.x-=a,r.y+=a;break;case 2:r.y-=a;break;case 16:break;case 128:r.y+=a;break;case 4:r.x+=a,r.y-=a;break;case 32:r.x+=a;break;case 256:r.x+=a,r.y+=a}}return{left:r.x,top:r.y,width:i.width,height:i.height}},r.prototype.calculateContentPositionFromRect=function(e,t,i,a,r){switch(i){case 512:return this.handleInsideCenterPosition(t,a,e,r);case 2048:return this.handleInsideEndPosition(t,a,e,r);case 1024:return this.handleInsideBasePosition(t,a,e,r);case 8192:return this.handleOutsideEndPosition(t,a,e,r);case 4096:return this.handleOutsideBasePosition(t,a,e,r)}return{left:0,top:0,width:-1,height:-1}},r.prototype.handleInsideCenterPosition=function(e,t,a,r){switch(e){case i.VerticalBottomTop:case i.VerticalTopBottom:return o.middleVertical(t,a,r);case i.HorizontalLeftRight:case i.HorizontalRightLeft:default:return o.middleHorizontal(t,a,r)}},r.prototype.handleInsideEndPosition=function(e,t,a,r){switch(e){case i.VerticalBottomTop:return o.topInside(t,a,r);case i.VerticalTopBottom:return o.bottomInside(t,a,r);case i.HorizontalRightLeft:return o.leftInside(t,a,r);case i.HorizontalLeftRight:default:return o.rightInside(t,a,r)}},r.prototype.handleInsideBasePosition=function(e,t,a,r){switch(e){case i.VerticalBottomTop:return o.bottomInside(t,a,r);case i.VerticalTopBottom:return o.topInside(t,a,r);case i.HorizontalRightLeft:return o.rightInside(t,a,r);case i.HorizontalLeftRight:default:return o.leftInside(t,a,r)}},r.prototype.handleOutsideEndPosition=function(e,t,a,r){switch(e){case i.VerticalBottomTop:return o.topOutside(t,a,r);case i.VerticalTopBottom:return o.bottomOutside(t,a,r);case i.HorizontalRightLeft:return o.leftOutside(t,a,r);case i.HorizontalLeftRight:default:return o.rightOutside(t,a,r)}},r.prototype.handleOutsideBasePosition=function(e,t,a,r){switch(e){case i.VerticalBottomTop:return o.bottomOutside(t,a,r);case i.VerticalTopBottom:return o.topOutside(t,a,r);case i.HorizontalRightLeft:return o.rightOutside(t,a,r);case i.HorizontalLeftRight:default:return o.leftOutside(t,a,r)}},r.prototype.calculateContentPosition=function(e,t,i,a){return 2048!==t&&512!==t&&1024!==t&&4096!==t&&8192!==t?this.calculateContentPositionFromPoint(e.anchorPoint,t,i,a):this.calculateContentPositionFromRect(e.anchorRect,e.anchorRectOrientation,t,i,a)},r.prototype.hasCollisions=function(i,n,o,s){var l=t.Rect;if(i.hasConflict(o))return!0;var u={left:0,top:o.height/2,width:s.width,height:s.height};if(u=l.inflate(u,{left:r.InflateAmount,top:0,right:r.InflateAmount,bottom:0}),u=l.intersect(u,o),l.isEmpty(u))return!0;var c=e.Double.lessWithPrecision;switch(n.outsidePlacement){case a.Disallowed:return c(u.width,o.width)||c(u.height,o.height/2);case a.Partial:return c(u.width,o.width/2)||c(u.height,o.height/4)}return!1},r.isValid=function(e){return!t.Rect.isEmpty(e)&&e.width>0&&e.height>0},r.DefaultAnchorMargin=0,r.DefaultMaximumMovingDistance=12,r.DefaultMinimumMovingDistance=3,r.InflateAmount=5,r}();e.DataLabelManager=r;var n=function(){function i(t,a,r){this.grid=[],(0===t.width||0===t.height)&&(this.cellSize=t,this.rowCount=this.colCount=0);var n={fontFamily:e.visuals.dataLabelUtils.LabelTextProperties.fontFamily,fontSize:e.visuals.dataLabelUtils.LabelTextProperties.fontSize,fontWeight:e.visuals.dataLabelUtils.LabelTextProperties.fontWeight};this.cellSize={width:0,height:0};for(var o=0,s=a.length;s>o;o++){var l=a[o];l.labeltext=r.labelText(l);var u=e.Prototype.inherit(n);u.text=l.labeltext,u.fontSize=l.data?l.data.labelFontSize:l.labelFontSize?l.labelFontSize:e.visuals.dataLabelUtils.LabelTextProperties.fontSize,l.size={width:e.TextMeasurementService.measureSvgTextWidth(u),height:e.TextMeasurementService.estimateSvgTextHeight(u)};var c=2*l.size.width,h=2*l.size.height;c>this.cellSize.width&&(this.cellSize.width=c),h>this.cellSize.height&&(this.cellSize.height=h)}0===this.cellSize.width&&(this.cellSize.width=t.width),0===this.cellSize.height&&(this.cellSize.height=t.height),this.colCount=this.getGridRowColCount(this.cellSize.width,t.width,i.ARRANGEGRID_MIN_COUNT,i.ARRANGEGRID_MAX_COUNT),this.rowCount=this.getGridRowColCount(this.cellSize.height,t.height,i.ARRANGEGRID_MIN_COUNT,i.ARRANGEGRID_MAX_COUNT),this.cellSize.width=t.width/this.colCount,this.cellSize.height=t.height/this.rowCount;for(var d=this.grid,p=0;p<this.colCount;p++){d[p]=[];for(var g=0;g<this.rowCount;g++)d[p][g]=[]}}return i.prototype.add=function(e,t){for(var i=this.getGridIndexRect(t),a=this.grid,r=i.left;r<i.right;r++)for(var n=i.top;n<i.bottom;n++)a[r][n].push({element:e,rect:t})},i.prototype.hasConflict=function(e){for(var i=this.getGridIndexRect(e),a=this.grid,r=t.Rect.isIntersecting,n=i.left;n<i.right;n++)for(var o=i.top;o<i.bottom;o++)for(var s=0;s<a[n][o].length;s++){var l=a[n][o][s];if(r(l.rect,e))return!0}return!1},i.prototype.getGridRowColCount=function(e,t,i,a){return Math.min(Math.max(Math.ceil(t/e),i),a)},i.prototype.getGridIndexRect=function(e){var t=function(e,t,i){return Math.min(Math.max(e,t),i)};return{left:t(Math.floor(e.left/this.cellSize.width),0,this.colCount),top:t(Math.floor(e.top/this.cellSize.height),0,this.rowCount),right:t(Math.ceil((e.left+e.width)/this.cellSize.width),0,this.colCount),bottom:t(Math.ceil((e.top+e.height)/this.cellSize.height),0,this.rowCount)}},i.ARRANGEGRID_MIN_COUNT=1,i.ARRANGEGRID_MAX_COUNT=100,i}();e.DataLabelArrangeGrid=n;var o;!function(e){function t(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+i,width:e.width,height:e.height}}function i(e,t,i){return{left:t.left+t.width/2-e.width/2,
top:t.top+t.height-e.height-i,width:e.width,height:e.height}}function a(e,t,i){return{left:t.left+t.width-e.width-i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function r(e,t,i){return{left:t.left+i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function n(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top-e.height-i,width:e.width,height:e.height}}function o(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height+i,width:e.width,height:e.height}}function s(e,t,i){return{left:t.left+t.width+i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function l(e,t,i){return{left:t.left-e.width-i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function u(e,t,i){return{left:t.left+t.width/2-e.width/2+i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function c(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height/2-e.height/2+i,width:e.width,height:e.height}}e.topInside=t,e.bottomInside=i,e.rightInside=a,e.leftInside=r,e.topOutside=n,e.bottomOutside=o,e.rightOutside=s,e.leftOutside=l,e.middleHorizontal=u,e.middleVertical=c}(o||(o={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t=e.visuals.shapes,i=e.visuals.shapes.Rect,a=e.visuals.NewDataLabelUtils,r=function(){function e(t,i){this.viewport=i;for(var a=0,r=0,n=0;n<t.length;n++)for(var o=t[n],s=0,l=o.labelDataPoints;s<l.length;s++){var u=l[s];if(u.isPreferred){var c=u.labelSize;c.width>a&&(a=c.width),c.height>r&&(r=c.height)}}0===a&&(a=i.width),0===r&&(r=i.height);var h=this.cellSize={width:a*e.cellSizeMultiplier,height:r*e.cellSizeMultiplier};this.columnCount=e.getCellCount(h.width,i.width,1,100),this.rowCount=e.getCellCount(h.height,i.height,1,100);for(var d=[],p=0,g=this.columnCount;g>p;p++){d[p]=[];for(var m=0,f=this.rowCount;f>m;m++)d[p][m]=[]}this.grid=d}return e.prototype.add=function(e){for(var t=this.getContainingGridSubsection(e),i=t.xMin;i<t.xMax;i++)for(var a=t.yMin;a<t.yMax;a++)this.grid[i][a].push(e)},e.prototype.hasConflict=function(e){return this.isWithinGridViewport(e)?this.hasCollision(e):!0},e.prototype.tryPositionInViewport=function(e){return this.isCloseToGridViewport(e)?(this.isWithinGridViewport(e)||(e=this.tryMoveInsideViewport(e)),e&&!this.hasCollision(e)?e:void 0):void 0},e.prototype.hasCollision=function(e){for(var i=this.getContainingGridSubsection(e),a=this.grid,r=t.Rect.isIntersecting,n=i.xMin;n<i.xMax;n++)for(var o=i.yMin;o<i.yMax;o++)for(var s=0,l=a[n][o];s<l.length;s++){var u=l[s];if(r(u,e))return!0}return!1},e.prototype.isWithinGridViewport=function(e){return e.left>=0&&e.top>=0&&e.left+e.width<=this.viewport.width&&e.top+e.height<=this.viewport.height},e.prototype.isCloseToGridViewport=function(e){return e.left+e.width>=0-e.width&&e.top+e.height>=-e.height&&e.left<=this.viewport.width+e.width&&e.top<=this.viewport.height+e.height},e.prototype.tryMoveInsideViewport=function(e){var t=i.clone(e),a=this.viewport;return e.width>a.width||e.height>a.height?void 0:(e.left<0?t.left=0:e.left+e.width>a.width&&(t.left-=e.left+e.width-a.width),e.top<0?t.top=0:e.top+e.height>a.height&&(t.top-=e.top+e.height-a.height),t)},e.prototype.getContainingGridSubsection=function(t){return{xMin:e.bound(Math.floor(t.left/this.cellSize.width),0,this.columnCount),xMax:e.bound(Math.ceil((t.left+t.width)/this.cellSize.width),0,this.columnCount),yMin:e.bound(Math.floor(t.top/this.cellSize.height),0,this.rowCount),yMax:e.bound(Math.ceil((t.top+t.height)/this.cellSize.height),0,this.rowCount)}},e.getCellCount=function(t,i,a,r){return e.bound(Math.ceil(i/t),a,r)},e.bound=function(e,t,i){return Math.max(Math.min(e,i),t)},e.cellSizeMultiplier=2,e}();e.LabelArrangeGrid=r;var n=function(){function e(t){this.startingOffset=t.startingOffset,this.maximumOffset=t.maximumOffset,null!=t.offsetIterationDelta?this.offsetIterationDelta=t.offsetIterationDelta:this.offsetIterationDelta=e.defaultOffsetIterationDelta,null!=t.horizontalPadding?this.horizontalPadding=t.horizontalPadding:this.horizontalPadding=e.defaultHorizontalPadding,null!=t.verticalPadding?this.verticalPadding=t.verticalPadding:this.verticalPadding=e.defaultVerticalPadding,this.allowLeaderLines=!!t.allowLeaderLines,this.attemptToMoveLabelsIntoViewport=!!t.attemptToMoveLabelsIntoViewport}return e.prototype.layout=function(e,t){for(var i=0;i<e.length;i++)for(var n=e[i],o=0,s=n.labelDataPoints;o<s.length;o++){var l=s[o];l.hasBeenRendered=!1,l.hasBackground?l.labelSize={width:l.textSize.width+2*a.horizontalLabelBackgroundPadding,height:l.textSize.height+2*a.verticalLabelBackgroundPadding}:l.labelSize=l.textSize}for(var u=[],c=new r(e,t),h=0;h<e.length;h++){for(var n=e[h],d=n.maxNumberOfLabels,p=_.clone(n.labelDataPoints),g=[],m=p.length-1,f=d;m>=0&&f>0;m--){var l=p[m];l.isPreferred&&(g.unshift(p.splice(m,1)[0]),f--)}if(g.length>0){var y=this.positionDataLabels(g,t,c,d);d-=y.length,u=u.concat(y)}if(p.length>0){var v=this.positionDataLabels(p,t,c,d);u=u.concat(v)}}return u},e.prototype.positionDataLabels=function(e,t,i,a){for(var r,n=[],o=this.offsetIterationDelta,s=this.startingOffset,l=0;s<=this.maximumOffset&&a>0;){r=this.allowLeaderLines&&s>this.startingOffset;for(var u=0;u<e.length;u++){var c=e[u];if(0===a)break;if(!c.hasBeenRendered){var h=void 0;h=1===c.parentType?this.tryPositionForRectPositions(c,i,s,l):this.tryPositionForPointPositions(c,i,s,r),h&&(n.push(h),a--)}}s+=o,l+=o}return n},e.prototype.tryPositionForRectPositions=function(t,i,a,r){for(var n=this,s=function(s,l){var u=7&s;if(!u||o.canFitWithinParent(t,n.horizontalPadding,n.verticalPadding)){var c=e.tryPositionRect(i,s,t,a,r,l);if(c){if(u&&!o.isLabelWithinParent(c,t,n.horizontalPadding,n.verticalPadding))return;return i.add(c),t.hasBeenRendered=!0,{boundingBox:c,text:t.text,isVisible:!0,fill:u?t.insideFill:t.outsideFill,identity:t.identity,key:t.key,fontSize:t.fontSize,selected:!1,hasBackground:!!t.hasBackground}}}},l=0,u=t.parentShape.validPositions;l<u.length;l++){var c=u[l],h=s(c,!1);if(h)return h}if(this.attemptToMoveLabelsIntoViewport)for(var d=0,p=t.parentShape.validPositions;d<p.length;d++){var c=p[d],h=s(c,!0);if(h)return h}return null},e.tryPositionRect=function(e,t,i,a,r,n){var s=a;1&t&&(s=r);var l=o.getLabelRect(i,t,s);if(1!==t||0===i.parentShape.orientation){if(!e.hasConflict(l))return l;if(n)return e.tryPositionInViewport(l)}else{if(!e.hasConflict(l))return l;if(l=o.getLabelRect(i,t,-s),!e.hasConflict(l))return l}return null},e.prototype.tryPositionForPointPositions=function(t,i,a,r){for(var n=function(n,o,l){var u=e.tryPositionPoint(i,n,t,a,l);return u?(i.add(u),t.hasBeenRendered=!0,{boundingBox:u,text:t.text,isVisible:!0,fill:256===n?t.insideFill:t.outsideFill,isInsideParent:256===n,identity:t.identity,key:t.key,fontSize:t.fontSize,selected:!1,leaderLinePoints:r?s.getLabelLeaderLineEndingPoint(u,n,o):null,hasBackground:!!t.hasBackground}):void 0},o=t.parentShape,l=o.validPositions,u=0;u<l.length;u++){var c=l[u],h=n(c,o,!1);if(h)return h}if(this.attemptToMoveLabelsIntoViewport&&!_.isEmpty(l)){var h=n(l[0],o,!0);if(h)return h}return null},e.tryPositionPoint=function(e,t,i,a,r){var n=s.getLabelRect(i.labelSize,i.parentShape,t,a);return e.hasConflict(n)?r?e.tryPositionInViewport(n):null:n},e.defaultOffsetIterationDelta=2,e.defaultHorizontalPadding=2,e.defaultVerticalPadding=2,e}();e.LabelLayout=n;var o;!function(e){function i(t,i,a){var r=t.parentShape;if(null!=r)switch(i){case 1:switch(r.orientation){case 1:case 2:return e.middleVertical(t.labelSize,r.rect,a);case 3:case 4:return e.middleHorizontal(t.labelSize,r.rect,a);case 0:}case 2:switch(r.orientation){case 1:return e.bottomInside(t.labelSize,r.rect,a);case 2:return e.topInside(t.labelSize,r.rect,a);case 3:return e.leftInside(t.labelSize,r.rect,a);case 4:return e.rightInside(t.labelSize,r.rect,a);case 0:}case 4:switch(r.orientation){case 1:return e.topInside(t.labelSize,r.rect,a);case 2:return e.bottomInside(t.labelSize,r.rect,a);case 3:return e.rightInside(t.labelSize,r.rect,a);case 4:return e.leftInside(t.labelSize,r.rect,a);case 0:}case 8:switch(r.orientation){case 1:return e.bottomOutside(t.labelSize,r.rect,a);case 2:return e.topOutside(t.labelSize,r.rect,a);case 3:return e.leftOutside(t.labelSize,r.rect,a);case 4:return e.rightOutside(t.labelSize,r.rect,a);case 0:}case 16:switch(r.orientation){case 1:return e.topOutside(t.labelSize,r.rect,a);case 2:return e.bottomOutside(t.labelSize,r.rect,a);case 3:return e.rightOutside(t.labelSize,r.rect,a);case 4:return e.leftOutside(t.labelSize,r.rect,a);case 0:}}return null}function a(e,t,i){return e.labelSize.width+2*t<e.parentShape.rect.width||e.labelSize.height+2*i<e.parentShape.rect.height}function r(e,i,a,r){var n=i.parentShape.rect,o=t.Rect.inflate(e,{left:a,right:a,top:r,bottom:r});return t.Rect.containsPoint(n,{x:o.left,y:o.top})&&t.Rect.containsPoint(n,{x:o.left+o.width,y:o.top+o.height})}function n(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+i,width:e.width,height:e.height}}function o(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height-i-e.height,width:e.width,height:e.height}}function s(e,t,i){return{left:t.left+t.width-e.width-i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function l(e,t,i){return{left:t.left+i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function u(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top-e.height-i,width:e.width,height:e.height}}function c(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height+i,width:e.width,height:e.height}}function h(e,t,i){return{left:t.left+t.width+i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function d(e,t,i){return{left:t.left-e.width-i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function p(e,t,i){return{left:t.left+t.width/2-e.width/2+i,top:t.top+t.height/2-e.height/2,width:e.width,height:e.height}}function g(e,t,i){return{left:t.left+t.width/2-e.width/2,top:t.top+t.height/2-e.height/2+i,width:e.width,height:e.height}}e.getLabelRect=i,e.canFitWithinParent=a,e.isLabelWithinParent=r,e.topInside=n,e.bottomInside=o,e.rightInside=s,e.leftInside=l,e.topOutside=u,e.bottomOutside=c,e.rightOutside=h,e.leftOutside=d,e.middleHorizontal=p,e.middleVertical=g}(o=e.DataLabelRectPositioner||(e.DataLabelRectPositioner={}));var s;!function(e){function t(t,i,a,r){switch(a){case 1:return e.above(t,i.point,i.radius+r);case 2:return e.below(t,i.point,i.radius+r);case 4:return e.left(t,i.point,i.radius+r);case 8:return e.right(t,i.point,i.radius+r);case 32:return e.belowLeft(t,i.point,i.radius+r);case 16:return e.belowRight(t,i.point,i.radius+r);case 128:return e.aboveLeft(t,i.point,i.radius+r);case 64:return e.aboveRight(t,i.point,i.radius+r);case 256:return e.center(t,i.point)}return null}function i(e,t,i){return{left:t.x-e.width/2,top:t.y-i-e.height,width:e.width,height:e.height}}function a(e,t,i){return{left:t.x-e.width/2,top:t.y+i,width:e.width,height:e.height}}function r(e,t,i){return{left:t.x-i-e.width,top:t.y-e.height/2,width:e.width,height:e.height}}function n(e,t,i){return{left:t.x+i,top:t.y-e.height/2,width:e.width,height:e.height}}function o(t,i,a){return{left:i.x-e.sin45*a-t.width,top:i.y+e.cos45*a,width:t.width,height:t.height}}function s(t,i,a){return{left:i.x+e.sin45*a,top:i.y+e.cos45*a,width:t.width,height:t.height}}function l(t,i,a){return{left:i.x-e.sin45*a-t.width,top:i.y-e.cos45*a-t.height,width:t.width,height:t.height}}function u(t,i,a){return{left:i.x+e.sin45*a,top:i.y-e.cos45*a-t.height,width:t.width,height:t.height}}function c(e,t){return{left:t.x-e.width/2,top:t.y-e.height/2,width:e.width,height:e.height}}function h(e,t,i){var a=e.left,r=e.top;switch(t){case 1:a+=e.width/2,r+=e.height;break;case 2:a+=e.width/2;break;case 4:a+=e.width,r+=2*e.height/3;break;case 8:r+=2*e.height/3;break;case 32:a+=e.width,r+=e.height/2;break;case 16:r+=e.height/2;break;case 128:a+=e.width,r+=e.height;break;case 64:r+=e.height}return[[i.point.x,i.point.y],[a,r]]}e.cos45=Math.cos(45),e.sin45=Math.sin(45),e.getLabelRect=t,e.above=i,e.below=a,e.left=r,e.right=n,e.belowLeft=o,e.belowRight=s,e.aboveLeft=l,e.aboveRight=u,e.center=c,e.getLabelLeaderLineEndingPoint=h}(s=e.DataLabelPointPositioner||(e.DataLabelPointPositioner={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t=function(){function t(e){this.unit=e,this.sequence=[],this.min=new Date("9999-12-31T23:59:59.999"),this.max=new Date("0001-01-01T00:00:00.000")}return t.prototype.add=function(e){e<this.min&&(this.min=e),e>this.max&&(this.max=e),this.sequence.push(e)},t.prototype.extendToCover=function(e,i){for(var a=this.min;a>e;)a=t.addInterval(a,-this.interval,this.unit),this.sequence.splice(0,0,a);for(this.min=a,a=this.max;i>a;)a=t.addInterval(a,this.interval,this.unit),this.sequence.push(a);this.max=a},t.prototype.moveToCover=function(e,i){var a=t.getDelta(e,i,this.unit),r=Math.floor(a/this.interval);for(this.min=t.addInterval(this.min,r*this.interval,this.unit),this.sequence=[],this.sequence.push(this.min),this.max=this.min;this.max<i;)this.max=t.addInterval(this.max,this.interval,this.unit),this.sequence.push(this.max)},t.calculate=function(i,a,r,n){switch(n||(n=t.getIntervalUnit(i,a,r)),n){case e.DateTimeUnit.Year:return t.calculateYears(i,a,r);case e.DateTimeUnit.Month:return t.calculateMonths(i,a,r);case e.DateTimeUnit.Week:return t.calculateWeeks(i,a,r);case e.DateTimeUnit.Day:return t.calculateDays(i,a,r);case e.DateTimeUnit.Hour:return t.calculateHours(i,a,r);case e.DateTimeUnit.Minute:return t.calculateMinutes(i,a,r);case e.DateTimeUnit.Second:return t.calculateSeconds(i,a,r);case e.DateTimeUnit.Millisecond:return t.calculateMilliseconds(i,a,r)}},t.calculateYears=function(i,a,r){for(var n=e.NumericSequenceRange.calculateDataRange(i.getFullYear(),a.getFullYear(),!1),o=e.NumericSequence.calculate(n,r,0),s=o.sequence,l=new t(e.DateTimeUnit.Year),u=0;u<s.length;u++){var c=s[u];c&&l.add(new Date(c,0,1))}return l.interval=o.interval,l.intervalOffset=o.intervalOffset,l},t.calculateMonths=function(i,a,r){var n=i.getFullYear(),o=a.getFullYear(),s=i.getMonth(),l=12*(o-n)+a.getMonth(),u=new Date(n,0,1),c=e.NumericSequence.calculateUnits(s,l,r,[1,2,3,6,12]),h=t.fromNumericSequence(u,c,e.DateTimeUnit.Month);return h},t.calculateWeeks=function(i,a,r){var n=0,o=i.getDay(),s=(o-n+7)%7,l=i.getDate()-s,u=new Date(i.getFullYear(),i.getMonth(),l),c=0,h=e.Double.ceilWithPrecision(t.getDelta(u,a,e.DateTimeUnit.Week)),d=e.NumericSequence.calculateUnits(c,h,r,[1,2,4,8]),p=t.fromNumericSequence(u,d,e.DateTimeUnit.Week);return p},t.calculateDays=function(i,a,r){var n=new Date(i.getFullYear(),i.getMonth(),i.getDate()),o=0,s=e.Double.ceilWithPrecision(t.getDelta(i,a,e.DateTimeUnit.Day)),l=e.NumericSequence.calculateUnits(o,s,r,[1,2,7,14]),u=t.fromNumericSequence(n,l,e.DateTimeUnit.Day);return u},t.calculateHours=function(i,a,r){var n=new Date(i.getFullYear(),i.getMonth(),i.getDate()),o=e.Double.floorWithPrecision(t.getDelta(n,i,e.DateTimeUnit.Hour)),s=e.Double.ceilWithPrecision(t.getDelta(n,a,e.DateTimeUnit.Hour)),l=e.NumericSequence.calculateUnits(o,s,r,[1,2,3,6,12,24]),u=t.fromNumericSequence(n,l,e.DateTimeUnit.Hour);return u},t.calculateMinutes=function(i,a,r){var n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours()),o=e.Double.floorWithPrecision(t.getDelta(n,i,e.DateTimeUnit.Minute)),s=e.Double.ceilWithPrecision(t.getDelta(n,a,e.DateTimeUnit.Minute)),l=e.NumericSequence.calculateUnits(o,s,r,[1,2,5,10,15,30,60,120,180,360,720,1440]),u=t.fromNumericSequence(n,l,e.DateTimeUnit.Minute);return u},t.calculateSeconds=function(i,a,r){var n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes()),o=e.Double.floorWithPrecision(t.getDelta(n,i,e.DateTimeUnit.Second)),s=e.Double.ceilWithPrecision(t.getDelta(n,a,e.DateTimeUnit.Second)),l=e.NumericSequence.calculateUnits(o,s,r,[1,2,5,10,15,30,60,120,300,600,900,1800,3600]),u=t.fromNumericSequence(n,l,e.DateTimeUnit.Second);return u},t.calculateMilliseconds=function(i,a,r){var n=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds()),o=t.getDelta(n,i,e.DateTimeUnit.Millisecond),s=t.getDelta(n,a,e.DateTimeUnit.Millisecond),l=e.NumericSequence.calculate(e.NumericSequenceRange.calculate(o,s),r,0),u=t.fromNumericSequence(n,l,e.DateTimeUnit.Millisecond);return u},t.fromNumericSequence=function(e,i,a){for(var r=new t(a),n=0;n<i.sequence.length;n++){var o=i.sequence[n],s=t.addInterval(e,o,a);r.add(s)}return r.interval=i.interval,r.intervalOffset=i.intervalOffset,r},t.addInterval=function(t,a,r){switch(a=Math.round(a),r){case e.DateTimeUnit.Year:return i.addYears(t,a);case e.DateTimeUnit.Month:return i.addMonths(t,a);case e.DateTimeUnit.Week:return i.addWeeks(t,a);case e.DateTimeUnit.Day:return i.addDays(t,a);case e.DateTimeUnit.Hour:return i.addHours(t,a);case e.DateTimeUnit.Minute:return i.addMinutes(t,a);case e.DateTimeUnit.Second:return i.addSeconds(t,a);case e.DateTimeUnit.Millisecond:return i.addMilliseconds(t,a)}},t.getDelta=function(t,i,a){var r=0;switch(a){case e.DateTimeUnit.Year:r=i.getFullYear()-t.getFullYear();break;case e.DateTimeUnit.Month:r=12*(i.getFullYear()-t.getFullYear())+i.getMonth()-t.getMonth();break;case e.DateTimeUnit.Week:r=(i.getTime()-t.getTime())/6048e5;break;case e.DateTimeUnit.Day:r=(i.getTime()-t.getTime())/864e5;break;case e.DateTimeUnit.Hour:r=(i.getTime()-t.getTime())/36e5;break;case e.DateTimeUnit.Minute:r=(i.getTime()-t.getTime())/6e4;break;case e.DateTimeUnit.Second:r=(i.getTime()-t.getTime())/1e3;break;case e.DateTimeUnit.Millisecond:r=i.getTime()-t.getTime()}return r},t.getIntervalUnit=function(i,a,r){r=Math.max(r,2);var n=t.getDelta(i,a,e.DateTimeUnit.Day);if(n>356&&n>=180*r)return e.DateTimeUnit.Year;if(n>60&&n>7*r)return e.DateTimeUnit.Month;if(n>14&&n>2*r)return e.DateTimeUnit.Week;var o=t.getDelta(i,a,e.DateTimeUnit.Hour);if(n>2&&o>12*r)return e.DateTimeUnit.Day;if(o>=24&&o>=r)return e.DateTimeUnit.Hour;var s=t.getDelta(i,a,e.DateTimeUnit.Minute);if(s>2&&s>=r)return e.DateTimeUnit.Minute;var l=t.getDelta(i,a,e.DateTimeUnit.Second);if(l>2&&l>=.8*r)return e.DateTimeUnit.Second;var u=t.getDelta(i,a,e.DateTimeUnit.Millisecond);if(u>0)return e.DateTimeUnit.Millisecond;var c=i;return 0!==c.getMilliseconds()?e.DateTimeUnit.Millisecond:0!==c.getSeconds()?e.DateTimeUnit.Second:0!==c.getMinutes()?e.DateTimeUnit.Minute:0!==c.getHours()?e.DateTimeUnit.Hour:1!==c.getDate()?e.DateTimeUnit.Day:0!==c.getMonth()?e.DateTimeUnit.Month:e.DateTimeUnit.Year},t.MIN_COUNT=1,t.MAX_COUNT=1e3,t}();e.DateTimeSequence=t;var i;!function(e){function t(e){return e%4===0&&e%100!==0||e%400===0}function i(e,i){return t(e)?d[i]:h[i]}function a(e,i){var a=e.getFullYear(),r=e.getMonth(),n=e.getDate(),o=2===r&&29===n,s=new Date(e.getTime());return a+=i,o&&!t(a)&&(n=28),s.setFullYear(a,r,n),s}function r(e,t){var a=e.getFullYear(),r=e.getMonth(),n=e.getDate(),o=new Date(e.getTime());return a+=(t-t%12)/12,r+=t%12,r>11&&(r%=12,a++),n=Math.min(n,i(a,r)),o.setFullYear(a,r,n),o}function n(e,t){return o(e,7*t)}function o(e,t){var i=e.getFullYear(),a=e.getMonth(),r=e.getDate(),n=new Date(e.getTime());return n.setFullYear(i,a,r+t),n}function s(e,t){return new Date(e.getTime()+36e5*t)}function l(e,t){return new Date(e.getTime()+6e4*t)}function u(e,t){return new Date(e.getTime()+1e3*t)}function c(e,t){return new Date(e.getTime()+t)}var h=[31,28,31,30,31,30,31,31,30,31,30,31],d=[31,29,31,30,31,30,31,31,30,31,30,31];e.addYears=a,e.addMonths=r,e.addWeeks=n,e.addDays=o,e.addHours=s,e.addMinutes=l,e.addSeconds=u,e.addMilliseconds=c}(i=e.DateUtils||(e.DateUtils={}))}(powerbi||(powerbi={}));var powerbi;!function(e){function t(t,r){for(var n=[],o=3;a>o;o++){var s=t(o);s&&i(n,e.Double.pow10(o),s.title,s.format,r)}return n}function i(e,t,i,a,r){if(i||a){var n=t;if(e.length>0){var o=e[e.length-1];r&&(n=r(t,o.value,n)),o.applicableRangeMax=n}var s=new c;s.value=t,s.applicableRangeMin=n,s.applicableRangeMax=1e3*n,s.title=i,s.labelFormat=a,e.push(s)}}var a=24,r=1e15,n=1e-4,o="%",s="E+0",l="0.##"+s,u=/^((0*\.*\,*#*-*)*|g)*$/i,c=function(){function t(){}return t.prototype.project=function(t){return this.value?e.Double.removeDecimalNoise(t/this.value):t},t.prototype.reverseProject=function(e){return this.value?e*this.value:e},t.prototype.isApplicableTo=function(t){t=Math.abs(t);var i=e.Double.getPrecision(t,3);return e.Double.greaterOrEqualWithPrecision(t,this.applicableRangeMin,i)&&e.Double.lessWithPrecision(t,this.applicableRangeMax,i)},t.prototype.isScaling=function(){return this.value>1},t}();e.DisplayUnit=c;var h=function(){function t(e){this.units=e?e:[]}return Object.defineProperty(t.prototype,"title",{get:function(){return this.displayUnit?this.displayUnit.title:void 0},enumerable:!0,configurable:!0}),t.prototype.update=function(e){void 0!==e&&(this.unitBaseValue=e,this.displayUnit=this.findApplicableDisplayUnit(e))},t.prototype.findApplicableDisplayUnit=function(e){for(var t=0,i=this.units;t<i.length;t++){var a=i[t];if(a.isApplicableTo(e))return a}},t.prototype.format=function(t,i,a,r){if(this.isFormatSupported(i)){if(a=this.getNumberOfDecimalsForFormatting(i,a),this.hasScientitifcFormat(i))return this.formatHelper(t,"",i,a,r);if(this.isScalingUnit()&&this.shouldRespectScalingUnit(i))return this.formatHelper(this.displayUnit.project(t),this.displayUnit.labelFormat,i,a,r);if(null!=a)return this.formatHelper(t,"",i,a,r)}return e.formattingService.formatValue(t,i)},t.prototype.isFormatSupported=function(e){return!t.UNSUPPORTED_FORMATS.test(e)},t.prototype.isPercentageFormat=function(e){return e&&e.indexOf(o)>=0},t.prototype.shouldRespectScalingUnit=function(e){return!this.isPercentageFormat(e)},t.prototype.getNumberOfDecimalsForFormatting=function(e,t){return t},t.prototype.isScalingUnit=function(){return this.displayUnit&&this.displayUnit.isScaling()},t.prototype.formatHelper=function(t,i,a,r,n){if("g"!==a&&"G"!==a||null==r||(a=e.visuals.valueFormatter.DefaultNumericFormat),a=e.NumberFormat.addDecimalsToFormat(a,r,n),a&&!e.formattingService.isStandardNumberFormat(a))return e.formattingService.formatNumberWithCustomOverride(t,a,i);a||(a="G"),i||(i="{0}");var o=e.formattingService.formatValue(t,a);return e.formattingService.format(i,[o])},t.prototype.formatSingleValue=function(t,i,a,r){return this.update(this.shouldUseValuePrecision(t)?e.Double.getPrecision(t,8):t),this.format(t,i,a,r)},t.prototype.shouldUseValuePrecision=function(e){if(0===this.units.length)return!0;for(var t=0,i=0;i<this.units.length;i++)if(this.units[i].isScaling()){t=this.units[i].applicableRangeMin;break}return Math.abs(e)<t},t.prototype.isScientific=function(e){return-r>e||e>r||e>-n&&n>e&&0!==e},t.prototype.hasScientitifcFormat=function(e){return e&&-1!==e.toUpperCase().indexOf("E")},t.prototype.supportsScientificFormat=function(e){return e?u.test(e):!0},t.prototype.shouldFallbackToScientific=function(e,t){return!this.hasScientitifcFormat(t)&&this.supportsScientificFormat(t)&&this.isScientific(e)},t.prototype.getScientificFormat=function(t,i,a,r){if(this.isFormatSupported(i)&&this.shouldFallbackToScientific(t,i)){var n=e.NumberFormat.getNumericFormat(t,i);return a&&(n=e.NumberFormat.addDecimalsToFormat(n?n:"0",Math.abs(a),r)),n?n+s:l}return i},t.UNSUPPORTED_FORMATS=/^(p\d*)|(.*\%)|(e\d*)$/i,t}();e.DisplayUnitSystem=h;var d=function(e){function t(){e.call(this,[])}return __extends(t,e),t}(h);e.NoDisplayUnitSystem=d;var p=function(e){function i(t){e.call(this,i.getUnits(t))}return __extends(i,e),i.prototype.format=function(t,i,a,r){return i=this.getScientificFormat(t,i,a,r),e.prototype.format.call(this,t,i,a,r)},i.reset=function(){i.units=null},i.getUnits=function(e){return i.units||(i.units=t(e,function(e,t,i){return e-t>=1e3?e/10:i}),i.units[i.units.length-1].applicableRangeMax=1/0),i.units},i}(h);e.DefaultDisplayUnitSystem=p;var g=function(e){function i(t){e.call(this,i.getUnits(t))}return __extends(i,e),i.reset=function(){i.units=null},i.getUnits=function(e){return i.units||(i.units=t(e),i.units[i.units.length-1].applicableRangeMax=1/0),i.units},i.prototype.format=function(t,i,a,r){return i=this.getScientificFormat(t,i,a,r),e.prototype.format.call(this,t,i,a,r)},i}(h);e.WholeUnitsDisplayUnitSystem=g;var m=function(e){function a(t){e.call(this,a.getUnits(t))}return __extends(a,e),a.prototype.isFormatSupported=function(e){return!a.UNSUPPORTED_FORMATS.test(e)},a.getUnits=function(e){if(!a.units){var r=[],n=function(e,t,i){return-1===e&&e-t>=1e3?e/10:i},o=e(-1);i(r,a.AUTO_DISPLAYUNIT_VALUE,o.title,o.format,n),o=e(0),i(r,a.NONE_DISPLAYUNIT_VALUE,o.title,o.format,n),a.units=r.concat(t(e,n)),a.units[a.units.length-1].applicableRangeMax=1/0}return a.units},a.prototype.format=function(t,i,a,r){return i=this.getScientificFormat(t,i,a,r),e.prototype.format.call(this,t,i,a,r)},a.AUTO_DISPLAYUNIT_VALUE=0,a.NONE_DISPLAYUNIT_VALUE=1,a.UNSUPPORTED_FORMATS=/^(e\d*)$/i,a}(h);e.DataLabelsDisplayUnitSystem=m}(powerbi||(powerbi={}));var powerbi;!function(e){var t=function(){function t(){}return t.calculate=function(i,a,r,n,o,s){var l=new t;if(a=void 0===a?10:e.Double.ensureInRange(a,t.MIN_COUNT,t.MAX_COUNT),void 0===n&&(n=e.Double.MIN_EXP),void 0===o&&(o=!1),void 0===r&&(r=1),void 0===s&&(s=[1,2,5]),i.forcedSingleStop)return l.interval=i.getSize(),l.intervalOffset=l.interval-(i.forcedSingleStop-i.min),l.min=i.min,l.max=i.max,l.sequence=[i.forcedSingleStop],l;var u=0,c=0,h=9,d=r>0&&!i.hasFixedMin,p=r>0&&!i.hasFixedMax,g=i.getSize(),m=e.Double.log10(g),f=e.Double.log10(s[0]);m-=f;var y=e.Double.log10(a);m-=y,m=Math.max(m,n-f+1);var v=void 0;if(0!==u){var b=e.Double.pow10(m),C=e.Double.floorToPrecision(i.min,b),S=e.Double.ceilToPrecision(i.max,b),x=e.NumericSequenceRange.calculateFixedRange(C,S);x.shrinkByStep(i,u),c=x.min,h=x.max,v=Math.floor(x.getSize()/u)}else{var w;for(w=0;3>w;w++){for(var D=m+w,b=e.Double.pow10(D),C=e.Double.floorToPrecision(i.min,b),S=e.Double.ceilToPrecision(i.max,b),P=s.length,L=e.Double.pow10(D-1),_=0;P>_;_++){var N=s[_]*L,x=e.NumericSequenceRange.calculateFixedRange(C,S,o);if(x.shrinkByStep(i,N),d&&i.min===x.min&&r>=1&&(x.min-=N),p&&i.max===x.max&&r>=1&&(x.max+=N),v=e.Double.ceilWithPrecision(x.getSize()/N),a>=v||2===w&&_===P-1||1===a&&2===v&&(N>i.getSize()||i.min<0&&i.max>0&&2*N>=i.getSize())){u=N,c=x.min,h=x.max;break}}if(0!==u)break}}(v>32*a||v>t.MAX_COUNT)&&(v=Math.min(32*a,t.MAX_COUNT),u=(h-c)/v),l.min=c,l.max=h,l.interval=u,l.intervalOffset=c-i.min,l.maxAllowedMargin=r,l.canExtendMin=d,l.canExtendMax=p;var T=e.Double.getPrecision(u,0);l.precision=T;var V=[],M=e.Double.roundToPrecision(c,T);V.push(M);for(var _=0;v>_;_++)M=e.Double.roundToPrecision(M+u,T),V.push(M);return l.sequence=V,l.trimMinMax(i.min,i.max),l},t.calculateUnits=function(i,a,r,n){r=e.Double.ensureInRange(r,t.MIN_COUNT,t.MAX_COUNT),i===a&&(a=i+1);for(var o=0,s=0,l=0;l<n.length;l++){s=n[l];var u=e.Double.ceilWithPrecision(a/s),c=e.Double.floorWithPrecision(i/s);if(o=u-c,r>=o)break}var h=-i;h%=s;var d=new t;d.sequence=[];for(var p=i+h;d.sequence.push(p),!(p>=a);p+=s);return d.interval=s,d.intervalOffset=h,d.min=d.sequence[0],d.max=d.sequence[d.sequence.length-1],d},t.prototype.trimMinMax=function(e,t){var i=(e-this.min)/this.interval,a=(this.max-t)/this.interval,r=.001;(!this.canExtendMin||i>this.maxAllowedMargin&&i>r)&&(this.min=e),(!this.canExtendMax||a>this.maxAllowedMargin&&a>r)&&(this.max=t)},t.MIN_COUNT=1,t.MAX_COUNT=1e3,t}();e.NumericSequence=t}(powerbi||(powerbi={}));var powerbi;!function(e){var t=function(){function t(){}return t.prototype._ensureIncludeZero=function(){this.includeZero&&(this.min>0&&!this.hasFixedMin&&(this.min=0),this.max<0&&!this.hasFixedMax&&(this.max=0))},t.prototype._ensureNotEmpty=function(){if(this.min===this.max)if(this.min){var i,a=this.min,r=e.Double.log10(Math.abs(a));r>=0&&4>r?(i=.5,this.forcedSingleStop=a):(i=e.Double.pow10(r)/2,this.forcedSingleStop=null),this.min=a-i,this.max=a+i}else this.min=0,this.max=t.DEFAULT_MAX,this.hasFixedMin=!0,this.hasFixedMax=!0},t.prototype._ensureDirection=function(){if(this.min>this.max){var e=this.min;this.min=this.max,this.max=e}},t.prototype.getSize=function(){return this.max-this.min},t.prototype.shrinkByStep=function(e,t){var i=this.min/t,a=e.min/t,r=Math.floor(a-i);this.min+=r*t,i=this.max/t,a=e.max/t,r=Math.ceil(a-i),this.max+=r*t},t.calculate=function(a,r,n,o,s){var l=new t;return l.includeZero=s?!0:!1,l.hasDataRange=i.hasValue(a)&&i.hasValue(r),l.hasFixedMin=i.hasValue(n),l.hasFixedMax=i.hasValue(o),a=e.Double.ensureInRange(a,t.MIN_SUPPORTED_DOUBLE,t.MAX_SUPPORTED_DOUBLE),r=e.Double.ensureInRange(r,t.MIN_SUPPORTED_DOUBLE,t.MAX_SUPPORTED_DOUBLE),l.hasFixedMin&&l.hasFixedMax?(l.min=n,l.max=o):l.hasFixedMin?(l.min=n,l.max=r>n?r:n):l.hasFixedMax?(l.min=o>a?a:o,l.max=o):l.hasDataRange?(l.min=a,l.max=r):(l.min=0,l.max=0),l._ensureIncludeZero(),l._ensureNotEmpty(),l._ensureDirection(),0===l.min?l.hasFixedMin=!0:0===l.max&&(l.hasFixedMax=!0),l},t.calculateDataRange=function(e,a,r){return i.hasValue(e)&&i.hasValue(a)?t.calculate(e,a,null,null,r):t.calculateFixedRange(0,t.DEFAULT_MAX)},t.calculateFixedRange=function(e,i,a){var r=new t;return r.hasDataRange=!1,r.includeZero=a,r.min=e,r.max=i,r._ensureIncludeZero(),r._ensureNotEmpty(),r._ensureDirection(),r.hasFixedMin=!0,r.hasFixedMax=!0,r},t.DEFAULT_MAX=10,t.MIN_SUPPORTED_DOUBLE=-1e307,t.MAX_SUPPORTED_DOUBLE=1e307,t}();e.NumericSequenceRange=t;var i;!function(e){function t(e){return void 0!==e&&null!==e}e.hasValue=t}(i=e.ValueUtil||(e.ValueUtil={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){function i(e){var t=w[e];return t?D[t]||e:e}function a(e){var t=-1===e?"Auto":e.toString(),i=D["DisplayUnitSystem_E"+t+"_Title"],a=0>=e?"{0}":D["DisplayUnitSystem_E"+t+"_LabelFormat"];return i||a?{title:i,format:a}:void 0}function r(e){return D[e]}function n(t){return e.NumberFormat.getCustomFormatMetadata(t)}function o(t){P=t,e.DefaultDisplayUnitSystem.reset(),e.WholeUnitsDisplayUnitSystem.reset()}function s(e,t){void 0===t&&(t=!1);var i=t?P.beautify(e):e;return{format:function(e){return null==e?P["null"]:b(e,i)}}}function l(t){var i=t.allowFormatBeautification?P.beautify(t.format):t.format;if(p(t)){var a=d(t.displayUnitSystemType),r=!!t.formatSingleValues;a.update(Math.max(Math.abs(t.value||0),Math.abs(t.value2||0)));var n,o=null!=t.precision;if(o?n=-t.precision:a.displayUnit&&a.displayUnit.value>1&&(n=-L),t.detectAxisPrecision){o=!0;var l=t.value;a.displayUnit&&a.displayUnit.value>0&&(l/=a.displayUnit.value),n=e.Double.isInteger(l)?0:e.Double.log10(l)}return{format:function(t){var s=C(t,!0);return x.isNullOrUndefinedOrWhiteSpaceString(s)?(t&&!a.isScalingUnit()&&Math.abs(t)<_&&!o&&(t=e.Double.roundToPrecision(t)),r?a.formatSingleValue(t,i,n,o):a.format(t,i,n,o)):s},displayUnit:a.displayUnit,options:t}}if(g(t.value,t.value2,t.tickCount)){var u=e.DateTimeSequence.getIntervalUnit(t.value,t.value2,t.tickCount);return{format:function(t){if(null==t)return P["null"];var i=e.formattingService.dateFormatString(u);return b(t,i)},options:t}}return s(i)}function u(e,t,i){return null==e?P["null"]:b(e,i?P.beautify(t):t)}function c(e,t){return t&&t.dateTime||!(e instanceof Date)?void 0:m(V,null,!1)}function h(e,t,i){var a=c(e,t.type);return a?b(e,a):b(e,m(t,i))}function d(t){if(null==t)return new e.DefaultDisplayUnitSystem(P.describe);switch(t){case e.DisplayUnitSystemType.Default:return new e.DefaultDisplayUnitSystem(P.describe);case e.DisplayUnitSystemType.WholeUnits:return new e.WholeUnitsDisplayUnitSystem(P.describe);case e.DisplayUnitSystemType.Verbose:return new e.NoDisplayUnitSystem;case e.DisplayUnitSystemType.DataLabels:return new e.DataLabelsDisplayUnitSystem(P.describe);default:return new e.DefaultDisplayUnitSystem(P.describe)}}function p(t){var i=t.value,a=t.value2,r=t.format;if(t.formatSingleValues&&r&&Math.abs(i)<N){var n=!e.NumberFormat.isStandardFormat(r);if(n){var o=e.NumberFormat.getCustomFormatMetadata(r,!0).precision;if(T>o)return!1}else if(e.Double.isInteger(i))return!1}return"number"==typeof i||"number"==typeof a?!0:void 0}function g(e,t,i){return e instanceof Date&&t instanceof Date&&void 0!==i&&null!==i}function m(i,a,r){
if(i){if(a){var n=e.DataViewObjects.getValue(i.objects,a);if(n)return n}if(!r){var o=i.type;if(o){if(o.dateTime)return t.DefaultDateFormat;if(o.integer)return t.DefaultIntegerFormat;if(o.numeric)return t.DefaultNumericFormat}}}}function f(e,t){var i;if(!e)return null;var a=e.length;if(a>0){i=e[0];for(var r=a-1,n=1,o=r;o>n;n++){var s=e[n];i=x.format(P.restatementComma,i,s)}if(a>1){var s=e[r];i=x.format(t,i,s)}}else i=null;return i}function y(e){return f(e,P.restatementCompoundAnd)}function v(e){return f(e,P.restatementCompoundOr)}function b(t,i){var a=C(t,!1);return x.isNullOrUndefinedOrWhiteSpaceString(a)?e.formattingService.formatValue(t,i):a}function C(e,t){return null==e&&t?P["null"]:e===!0?P["true"]:e===!1?P["false"]:"number"==typeof e&&isNaN(e)?P.NaN:e===Number.NEGATIVE_INFINITY?P.negativeInfinity:e===Number.POSITIVE_INFINITY?P.infinity:""}function S(e){var t=d(e);return t.units}var x=jsCommon.StringExtensions,w={"0.00 %;-0.00 %;0.00 %":"Percentage","0.0 %;-0.0 %;0.0 %":"Percentage1"};t.DefaultIntegerFormat="g",t.DefaultNumericFormat="#,0.00",t.DefaultDateFormat="d";var D={NullValue:"(Blank)",BooleanTrue:"True",BooleanFalse:"False",NaNValue:"NaN",InfinityValue:"+Infinity",NegativeInfinityValue:"-Infinity",RestatementComma:"{0}, {1}",RestatementCompoundAnd:"{0} and {1}",RestatementCompoundOr:"{0} or {1}",DisplayUnitSystem_EAuto_Title:"Auto",DisplayUnitSystem_E0_Title:"None",DisplayUnitSystem_E3_LabelFormat:"{0}K",DisplayUnitSystem_E3_Title:"Thousands",DisplayUnitSystem_E6_LabelFormat:"{0}M",DisplayUnitSystem_E6_Title:"Millions",DisplayUnitSystem_E9_LabelFormat:"{0}bn",DisplayUnitSystem_E9_Title:"Billions",DisplayUnitSystem_E12_LabelFormat:"{0}T",DisplayUnitSystem_E12_Title:"Trillions",Percentage:"#,0.##%",Percentage1:"#,0.#%",TableTotalLabel:"Total",Tooltip_HighlightedValueDisplayName:"Highlighted",Funnel_PercentOfFirst:"Percent of first",Funnel_PercentOfPrevious:"Percent of previous",Funnel_PercentOfFirst_Highlight:"Percent of first (highlight)",Funnel_PercentOfPrevious_Highlight:"Percent of previous (highlight)",GeotaggingString_Continent:"continent",GeotaggingString_Continents:"continents",GeotaggingString_Country:"country",GeotaggingString_Countries:"countries",GeotaggingString_State:"state",GeotaggingString_States:"states",GeotaggingString_City:"city",GeotaggingString_Cities:"cities",GeotaggingString_Town:"town",GeotaggingString_Towns:"towns",GeotaggingString_Province:"province",GeotaggingString_Provinces:"provinces",GeotaggingString_County:"county",GeotaggingString_Counties:"counties",GeotaggingString_Village:"village",GeotaggingString_Villages:"villages",GeotaggingString_Post:"post",GeotaggingString_Zip:"zip",GeotaggingString_Code:"code",GeotaggingString_Place:"place",GeotaggingString_Places:"places",GeotaggingString_Address:"address",GeotaggingString_Addresses:"addresses",GeotaggingString_Street:"street",GeotaggingString_Streets:"streets",GeotaggingString_Longitude:"longitude",GeotaggingString_Longitude_Short:"lon",GeotaggingString_Latitude:"latitude",GeotaggingString_Latitude_Short:"lat",GeotaggingString_PostalCode:"postal code",GeotaggingString_PostalCodes:"postal codes",GeotaggingString_ZipCode:"zip code",GeotaggingString_ZipCodes:"zip codes",GeotaggingString_Territory:"territory",GeotaggingString_Territories:"territories"};t.getLocalizedString=r;var P={"null":D.NullValue,"true":D.BooleanTrue,"false":D.BooleanFalse,NaN:D.NaNValue,infinity:D.InfinityValue,negativeInfinity:D.NegativeInfinityValue,beautify:function(e){return i(e)},describe:function(e){return a(e)},restatementComma:D.RestatementComma,restatementCompoundAnd:D.RestatementCompoundAnd,restatementCompoundOr:D.RestatementCompoundOr},L=2,_=1e3,N=1e4,T=2,V={displayName:"",type:e.ValueType.fromPrimitiveTypeAndCategory(e.PrimitiveType.DateTime)};t.getFormatMetadata=n,t.setLocaleOptions=o,t.createDefaultFormatter=s,t.create=l,t.format=u,t.formatValueColumn=h,t.getFormatString=m,t.formatListAnd=y,t.formatListOr=v,t.getDisplayUnits=S}(i=t.valueFormatter||(t.valueFormatter={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t=e.visuals.NewDataLabelUtils,i=e.visuals.labelStyle,a=e.visuals.DonutLabelUtils,r=function(){function r(i,a){this.startingOffset=i.startingOffset,this.maximumOffset=i.maximumOffset,null!=i.offsetIterationDelta&&(this.offsetIterationDelta=i.offsetIterationDelta),this.donutChartProperties=a,this.center={x:a.viewport.width/2,y:a.viewport.height/2},this.outerRadius=this.donutChartProperties.radius*this.donutChartProperties.outerArcRadiusRatio,this.innerRadius=this.donutChartProperties.radius/2*this.donutChartProperties.innerArcRadiusRatio,this.additionalCharsWidth=e.TextMeasurementService.measureSvgTextWidth({text:" ()",fontFamily:t.LabelTextProperties.fontFamily,fontSize:jsCommon.PixelConverter.fromPoint(a.dataLabelsSettings.fontSize),fontWeight:t.LabelTextProperties.fontWeight})}return r.prototype.layout=function(t){for(var i=0;i<t.length;i++){var a=t[i];a.hasBeenRendered=!1,a.labelSize=a.textSize}for(var r=[],n=[],o=this.donutChartProperties.viewport,s={labelDataPoints:t,maxNumberOfLabels:t.length},l=new e.LabelArrangeGrid([s],o),u=t.length-1;u>=0;u--){var c=t[u];if(c.isPreferred){var h=t.splice(u,1);n=h.concat(n)}}if(n.length>0&&(r=this.positionLabels(n,l)),t.length>0){var d=this.positionLabels(t,l);r=r.concat(d)}return r},r.prototype.positionLabels=function(e,t){for(var i=[],a=this.offsetIterationDelta,r=this.startingOffset,n=0;r<=this.maximumOffset;){for(var o=0;o<e.length;o++){var s=e[o];if(!s.hasBeenRendered){var l=this.tryPositionForDonut(s,t,r);l&&i.push(l)}}r+=a,n+=a}return i},r.prototype.tryPositionForDonut=function(e,t,a){var r=e.parentShape;if(!_.isEmpty(r.validPositions)&&0!==r.validPositions[0]){var n=r.validPositions[0],o=this.tryAllPositions(e,t,n,a);if(o&&0===o.score)return this.buildLabel(o,t);if(this.donutChartProperties.dataLabelsSettings.labelStyle===i.both){var s=this.splitDonutDataPoint(e),l=this.tryAllPositions(s,t,n,a);if(l&&(!o||l.score<o.score))return this.buildLabel(l,t)}return o?this.buildLabel(o,t):void 0}},r.prototype.generateCandidate=function(e,t,i,n){var o=this.generateCandidateAngleForPosition(e.donutArcDescriptor,t),s=this.getPointPositionForAngle(o),l=s.point,u=this.score(e,l),c=a.getLabelLeaderLineForDonutChart(e.donutArcDescriptor,this.donutChartProperties,l,o),h=a.getLabelLeaderLinesSizeForDonutChart(c),d=_.clone(e);d.angle=o,d.parentShape=s,d.leaderLinePoints=c,d.linesSize=h;var p=r.tryPositionPoint(i,s.validPositions[0],d,n,this.center,this.donutChartProperties.viewport);return{angle:o,point:s,score:u,labelRects:p,labelDataPoint:d}},r.prototype.tryAllPositions=function(e,t,i,a){var n=r.tryPositionPoint(t,i,e,a,this.center,this.donutChartProperties.viewport),o=e.parentShape,s={point:o,angle:e.angle,score:this.score(e,o.point),labelRects:n,labelDataPoint:e};if(n&&n.textRect&&0===s.score)return s;var l,u=[];n&&n.textRect?(u=this.getLabelPointPositions(e,!0),l=s):u=this.getLabelPointPositions(e,!1);for(var c=0;c<u.length;c++){var h=u[c],d=this.generateCandidate(e,h,t,a);if(d.labelRects&&d.labelRects.textRect&&(null==l||d.score<l.score)&&(l=d,0===l.score))return l}return l},r.prototype.buildLabel=function(t,r){var n=t.labelRects.textRect,o=t.labelDataPoint;r.add(n),r.add(t.labelRects.horizontalLineRect),r.add(t.labelRects.diagonalLineRect),o.hasBeenRendered=!0;var s=n.left-this.center.x;0>s?s+=n.width/2:s-=n.width/2;var l,u,c,h=8===o.parentShape.validPositions[0]?"start":"end",d={left:s,top:n.top-this.center.y,height:n.height,width:n.width},p=this.donutChartProperties.dataLabelsSettings.labelStyle,g=a.getSpaceAvailableForDonutLabels(o.parentShape.point.x,this.donutChartProperties.viewport),m=e.visuals.dataLabelUtils.getLabelFormattedText,f=o.fontSize,y=p===i.both&&null==o.secondRowText;switch(y&&(o.dataLabel=" ("+o.dataLabel+")",g/=2),(p===i.both||p===i.data)&&(l=m({label:o.dataLabel,maxWidth:g,fontSize:f})),(p===i.both||p===i.category)&&(u=m({label:o.categoryLabel,maxWidth:g,fontSize:f})),p){case i.both:null==o.secondRowText?c=u+l:(c=l,o.secondRowText=u);break;case i.data:c=l;break;case i.category:c=u}return o.textSize.width=Math.min(o.textSize.width,y?2*g:g),{boundingBox:d,text:c,isVisible:!0,fill:o.outsideFill,identity:o.identity,fontSize:f,selected:!1,textAnchor:h,leaderLinePoints:o.leaderLinePoints,hasBackground:!1,secondRowText:o.secondRowText}},r.tryPositionPoint=function(t,i,r,n,o,s){var l=r.parentShape,u=_.clone(r.textSize);u.width=Math.min(u.width,a.getSpaceAvailableForDonutLabels(l.point.x,s));var c=e.DataLabelPointPositioner.getLabelRect(u,l,i,n),h={point:{x:r.leaderLinePoints[0][0],y:r.leaderLinePoints[0][1]<0?r.leaderLinePoints[1][1]:r.leaderLinePoints[0][1]},radius:0,validPositions:null},d=e.DataLabelPointPositioner.getLabelRect(r.linesSize[a.DiagonalLineIndex],h,i,n),p={point:{x:r.leaderLinePoints[1][0],y:r.leaderLinePoints[1][1]},radius:0,validPositions:null},g=e.DataLabelPointPositioner.getLabelRect(r.linesSize[a.HorizontalLineIndex],p,i,n);if(c&&d&&g){c.left+=o.x,c.top+=o.y;var m=o.x-c.width/2;return d.left+=m,d.top+=o.y,g.left+=m,g.top+=o.y,t.hasConflict(c)||t.hasConflict(d)||t.hasConflict(g)?void 0:{textRect:c,diagonalLineRect:d,horizontalLineRect:g}}},r.prototype.getLabelPointPositions=function(e,t){var i=e.parentShape,a=i.validPositions[0];return t?i.point.y<0?8===a?[64]:[128]:8===a?[16]:[32]:4===a?[128,32]:[16,64]},r.prototype.splitDonutDataPoint=function(e){var t={width:Math.max(e.categoryLabelSize.width,e.dataLabelSize.width),height:2*e.dataLabelSize.height},i=_.clone(e);return i.textSize=t,i.secondRowText=e.categoryLabel,i},r.prototype.generateCandidateAngleForPosition=function(e,t){var i=e.startAngle+(e.endAngle-e.startAngle)/2;switch(t){case 64:case 32:return(e.startAngle+i-Math.PI)/2;case 128:case 16:return(i+e.endAngle-Math.PI)/2}},r.prototype.getPointPositionForAngle=function(e){var t=a.getXPositionForDonutLabel(Math.cos(e)*this.outerRadius),i=Math.sin(e)*this.outerRadius,r=0>t?4:8,n={point:{x:t,y:i},validPositions:[r],radius:0};return n},r.prototype.score=function(e,t){var r,n=a.getSpaceAvailableForDonutLabels(t.x,this.donutChartProperties.viewport);return this.donutChartProperties.dataLabelsSettings.labelStyle===i.both&&null==e.secondRowText?(r=Math.max(e.categoryLabelSize.width,e.dataLabelSize.width+this.additionalCharsWidth),n/=2):r=e.textSize.width,Math.max(r-n,0)},r}();e.DonutLabelLayout=r}(powerbi||(powerbi={}));var powerbi;!function(e){var t=e.visuals.NewDataLabelUtils,i=5,a=10,r=60,n=5,o=function(){function o(){}return o.prototype.layout=function(i,a,r,n){if(n||void 0===this.labels){for(var o={labelDataPoints:i,maxNumberOfLabels:i.length},l=0;l<i.length;l++){var u=i[l];u.labelSize={width:u.textSize.width+2*t.horizontalLabelBackgroundPadding,height:u.textSize.height+2*t.verticalLabelBackgroundPadding}}for(var c=new e.LabelArrangeGrid([o],a),h=[],d=[],p=0;p<i.length;p++){var u=i[p],g=u.parentShape.polygon;d.push(g),g.pixelBoundingRect=r.applyToRect(g.absoluteBoundingRect())}for(var m=new s(d,a),f=0;f<i.length;f++){var u=i[f],y=this.getLabelByPolygonPositions(u,r,c,m);null!=y&&h.push(y)}this.labels=h}else this.updateLabelOffsets(r);return this.labels},o.prototype.getLabelPolygon=function(e,t,i,a){var r={width:e.textSize.width,height:e.textSize.height};return this.getLabelBoundingBox(r,t,i,a)},o.prototype.getLabelBoundingBox=function(t,i,a,r){switch(i){case 1:return e.DataLabelPointPositioner.above(t,a,r);case 2:return e.DataLabelPointPositioner.below(t,a,r);case 4:return e.DataLabelPointPositioner.left(t,a,r);case 8:return e.DataLabelPointPositioner.right(t,a,r);case 128:return e.DataLabelPointPositioner.aboveLeft(t,a,r);case 64:return e.DataLabelPointPositioner.aboveRight(t,a,r);case 32:return e.DataLabelPointPositioner.belowLeft(t,a,r);case 16:return e.DataLabelPointPositioner.belowRight(t,a,r);case 256:return e.DataLabelPointPositioner.center(t,a)}return null},o.prototype.getLabelByPolygonPositions=function(e,t,n,o){for(var s=0,l=t.getInverse(),u=0;2>u;u++){1===u&&(s=i);for(var c=0,h=e.parentShape.validPositions;c<h.length;c++){var d=h[c],p=this.tryPositionForPolygonPosition(d,e,t,s,l);if((256!==d||0===u)&&p){var g=t.applyToRect(p),m={text:e.text,secondRowText:e.secondRowText,boundingBox:g,isVisible:!0,fill:e.insideFill,identity:null,selected:!1,hasBackground:!0,textAnchor:"middle",originalPixelOffset:s,isPlacedInsidePolygon:!0,absoluteBoundingBoxCenter:{x:p.left+p.width/2,y:p.top+p.height/2}};return m}}}for(var f=6;r>=f;){for(var y=0,v=e.parentShape.validPositions;y<v.length;y++){var d=v[y];if(256!==d){var b=e.parentShape.polygon,C=t.applyToPoint(b.absoluteCentroid()),S=this.tryPlaceLabelOutsidePolygon(n,d,e,f,C,o,l);if(S){var g=t.applyToRect(S),m={text:e.text,secondRowText:e.secondRowText,boundingBox:g,isVisible:!0,fill:e.insideFill,identity:null,selected:!1,hasBackground:!0,isPlacedInsidePolygon:!1,textAnchor:"middle",originalPixelOffset:f,originalPosition:d,originalAbsoluteCentroid:b.absoluteCentroid(),absoluteBoundingBoxCenter:{x:S.left+S.width/2,y:S.top+S.height/2}},x=this.calculateStemSource(t,l,b,g,d,C);return m.leaderLinePoints=this.setLeaderLinePoints(x,this.calculateStemDestination(g,d)),m.absoluteStemSource=l.applyToPoint(x),n.add(g),m}}}f+=a}return null},o.prototype.setLeaderLinePoints=function(e,t){return[[e.x,e.y],[t.x,t.y]]},o.prototype.calculateStemSource=function(t,i,a,r,o,s){var l=a.lineIntersectionPoint(a.absoluteCentroid(),i.applyToPoint({x:r.left+r.width/2,y:r.top+r.height/2}));if(null==l)return s;var u=t.applyToPoint(l);switch(o){case 1:u.y+=n;break;case 2:u.y-=n;break;case 4:u.x+=n;break;case 8:u.x-=n;break;case 128:u.x+=n/e.DataLabelPointPositioner.cos45,u.y+=n/e.DataLabelPointPositioner.sin45;break;case 64:u.x-=n/e.DataLabelPointPositioner.cos45,u.y+=n/e.DataLabelPointPositioner.sin45;break;case 32:u.x+=n/e.DataLabelPointPositioner.cos45,u.y-=n/e.DataLabelPointPositioner.sin45;break;case 16:u.x-=n/e.DataLabelPointPositioner.cos45,u.y-=n/e.DataLabelPointPositioner.sin45;break;case 256:}return u},o.prototype.calculateStemDestination=function(e,t){var i,a;switch(t){case 1:i=e.left+e.width/2,a=e.top+e.height;break;case 2:i=e.left+e.width/2,a=e.top;break;case 4:i=e.left+e.width,a=e.top+e.height/2;break;case 8:i=e.left,a=e.top+e.height/2;break;case 128:i=e.left+e.width,a=e.top+e.height;break;case 64:i=e.left,a=e.top+e.height;break;case 32:i=e.left+e.width,a=e.top;break;case 16:i=e.left,a=e.top;break;case 256:}return{x:i,y:a}},o.prototype.tryPositionForPolygonPosition=function(e,t,i,a,r){var n=t.parentShape.polygon,o=i.applyToPoint(n.absoluteCentroid()),s=this.getLabelPolygon(t,e,o,a),l=this.getAbsoluteRectangle(r,s);return n.contains(l)?l:null},o.prototype.tryPlaceLabelOutsidePolygon=function(e,t,i,a,r,n,o){var s=a,l=this.getLabelPolygon(i,t,r,s),u=e.hasConflict(l);if(!u){var c=this.getAbsoluteRectangle(o,l);if(!n.hasConflict(c,l))return c}return null},o.prototype.updateLabelOffsets=function(e){for(var t=0,i=this.labels;t<i.length;t++){var a=i[t];if(a.isVisible)if(a.isPlacedInsidePolygon){var r=e.applyToPoint(a.absoluteBoundingBoxCenter),n=a.boundingBox.left+a.boundingBox.width/2-r.x,o=a.boundingBox.top+a.boundingBox.height/2-r.y;a.boundingBox.top-=o,a.boundingBox.left-=n}else{var s=e.applyToPoint(a.absoluteStemSource),l=e.applyToPoint(a.originalAbsoluteCentroid);a.boundingBox=this.getLabelBoundingBox({width:a.boundingBox.width,height:a.boundingBox.height},a.originalPosition,l,a.originalPixelOffset),void 0!==a.leaderLinePoints&&(a.leaderLinePoints=this.setLeaderLinePoints(s,this.calculateStemDestination(a.boundingBox,a.originalPosition)))}}},o.prototype.getAbsoluteRectangle=function(e,t){return e.applyToRect(t)},o}();e.FilledMapLabelLayout=o;var s=function(){function e(t,i){this.viewport=i;for(var a=0,r=0,n=0;n<t.length;n++){var o=t[n],s=o.pixelBoundingRect;s.width>a&&(a=s.width),s.height>r&&(r=s.height)}0===a&&(a=i.width),0===r&&(r=i.height);var l=this.cellSize={width:a*e.cellSizeMultiplier,height:r*e.cellSizeMultiplier};this.columnCount=e.getCellCount(l.width,i.width,1,100),this.rowCount=e.getCellCount(l.height,i.height,1,100);for(var u=[],c=0,h=this.columnCount;h>c;c++){u[c]=[];for(var d=0,p=this.rowCount;p>d;d++)u[c][d]=[]}this.grid=u;for(var g=0;g<t.length;g++){var o=t[g];this.add(o)}}return e.prototype.hasConflict=function(e,t){for(var i=this.getContainingGridSubsection(t),a=this.grid,r=i.xMin;r<i.xMax;r++)for(var n=i.yMin;n<i.yMax;n++)for(var o=0,s=a[r][n];o<s.length;o++){var l=s[o];if(l.conflicts(e))return!0}return!1},e.prototype.add=function(e){for(var t=this.getContainingGridSubsection(e.pixelBoundingRect),i=t.xMin;i<t.xMax;i++)for(var a=t.yMin;a<t.yMax;a++)this.grid[i][a].push(e)},e.prototype.getContainingGridSubsection=function(t){return{xMin:e.bound(Math.floor(t.left/this.cellSize.width),0,this.columnCount),xMax:e.bound(Math.ceil((t.left+t.width)/this.cellSize.width),0,this.columnCount),yMin:e.bound(Math.floor(t.top/this.cellSize.height),0,this.rowCount),yMax:e.bound(Math.ceil((t.top+t.height)/this.cellSize.height),0,this.rowCount)}},e.getCellCount=function(t,i,a,r){return e.bound(Math.ceil(i/t),a,r)},e.bound=function(e,t,i){return Math.max(Math.min(e,i),t)},e.cellSizeMultiplier=2,e}();e.LabelPolygonArrangeGrid=s}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){function t(){return new i}e.createColorAllocatorFactory=t;var i=function(){function e(){}return e.prototype.linearGradient2=function(e){return new a(e)},e.prototype.linearGradient3=function(e,t){return t?new n(e):new r(e)},e}(),a=function(){function e(e){this.options=e;var t=e.min,i=e.max;this.scale=d3.scale.linear().domain([t.value,i.value]).range([t.color,i.color]).clamp(!0)}return e.prototype.color=function(e){var t=this.options.min,i=this.options.max;return t.value===i.value?e>=i.value?i.color:t.color:this.scale(e)},e}(),r=function(){function e(e){this.options=e;var t=e.min,i=e.mid,a=e.max;this.scale=d3.scale.linear().domain([t.value,i.value,a.value]).range([t.color,i.color,a.color]).clamp(!0)}return e.prototype.color=function(e){var t=this.options.min,i=this.options.mid,a=this.options.max;return a.value===i.value||i.value===t.value||a.value===i.value&&a.value===t.value?e>=a.value?a.color:e>=i.value?i.color:t.color:this.scale(e)},e}(),n=function(){function e(e){this.options=e;var t=e.min,i=e.mid,a=e.max;this.scale1=d3.scale.linear().domain([t.value,i.value]).range([t.color,i.color]).clamp(!0),this.scale2=d3.scale.linear().domain([i.value,a.value]).range([i.color,a.color]).clamp(!0)}return e.prototype.color=function(e){var t=this.options.min,i=this.options.mid,a=this.options.max;return a.value===i.value||i.value===t.value||a.value===i.value&&a.value===t.value?e>=a.value?a.color:e>=i.value?i.color:t.color:e<=i.value?this.scale1(e):this.scale2(e)},e}()}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i={"0.00 %;-0.00 %;0.00 %":"Percentage","0.0 %;-0.0 %;0.0 %":"Percentage1"},a={NullValue:"(Blank)",BooleanTrue:"True",BooleanFalse:"False",NaNValue:"NaN",InfinityValue:"+Infinity",NegativeInfinityValue:"-Infinity",Restatement_Comma:"{0}, {1}",Restatement_CompoundAnd:"{0} and {1}",DisplayUnitSystem_EAuto_Title:"Auto",DisplayUnitSystem_E0_Title:"None",DisplayUnitSystem_E3_LabelFormat:"{0}K",DisplayUnitSystem_E3_Title:"Thousands",DisplayUnitSystem_E6_LabelFormat:"{0}M",DisplayUnitSystem_E6_Title:"Millions",DisplayUnitSystem_E9_LabelFormat:"{0}bn",DisplayUnitSystem_E9_Title:"Billions",DisplayUnitSystem_E12_LabelFormat:"{0}T",DisplayUnitSystem_E12_Title:"Trillions",Percentage:"#,0.##%",Percentage1:"#,0.#%",RichTextbox_Link_DefaultText:"Link",TableTotalLabel:"Total",Tooltip_HighlightedValueDisplayName:"Highlighted",Funnel_PercentOfFirst:"Percent of first",Funnel_PercentOfPrevious:"Percent of previous",Funnel_PercentOfFirst_Highlight:"Percent of first (highlight)",Funnel_PercentOfPrevious_Highlight:"Percent of previous (highlight)",GeotaggingString_Continent:"continent",GeotaggingString_Continents:"continents",GeotaggingString_Country:"country",GeotaggingString_Countries:"countries",GeotaggingString_State:"state",GeotaggingString_States:"states",GeotaggingString_City:"city",GeotaggingString_Cities:"cities",GeotaggingString_Town:"town",GeotaggingString_Towns:"towns",GeotaggingString_Province:"province",GeotaggingString_Provinces:"provinces",GeotaggingString_County:"county",GeotaggingString_Counties:"counties",GeotaggingString_Village:"village",GeotaggingString_Villages:"villages",GeotaggingString_Post:"post",GeotaggingString_Zip:"zip",GeotaggingString_Code:"code",GeotaggingString_Place:"place",GeotaggingString_Places:"places",GeotaggingString_Address:"address",GeotaggingString_Addresses:"addresses",GeotaggingString_Street:"street",GeotaggingString_Streets:"streets",GeotaggingString_Longitude:"longitude",GeotaggingString_Longitude_Short:"lon",GeotaggingString_Latitude:"latitude",GeotaggingString_Latitude_Short:"lat",GeotaggingString_PostalCode:"postal code",GeotaggingString_PostalCodes:"postal codes",GeotaggingString_ZipCode:"zip code",GeotaggingString_ZipCodes:"zip codes",GeotaggingString_Territory:"territory",GeotaggingString_Territories:"territories",Waterfall_IncreaseLabel:"Increase",Waterfall_DecreaseLabel:"Decrease",Waterfall_TotalLabel:"Total",Slicer_SelectAll:"Select All"},r=function(){function r(){}return r.initialize=function(){t.valueFormatter.setLocaleOptions(r.createLocaleOptions()),t.TooltipManager.setLocalizedStrings(r.createTooltipLocaleOptions())},r.createLocaleOptions=function(){return{"null":a.NullValue,"true":a.BooleanTrue,"false":a.BooleanFalse,NaN:a.NaNValue,infinity:a.InfinityValue,negativeInfinity:a.NegativeInfinityValue,beautify:function(e){return r.beautify(e)},describe:function(e){return r.describeUnit(e)},restatementComma:a.Restatement_Comma,restatementCompoundAnd:a.Restatement_CompoundAnd,restatementCompoundOr:a.Restatement_CompoundOr}},r.createTooltipLocaleOptions=function(){return{highlightedValueDisplayName:a.Tooltip_HighlightedValueDisplayName}},r.prototype.getLocalizedString=function(e){return a[e]},r.prototype.onDragStart=function(){},r.prototype.canSelect=function(){return!1},r.prototype.onSelect=function(){},r.prototype.loadMoreData=function(){},r.prototype.persistProperties=function(e){},r.prototype.onCustomSort=function(e){},r.prototype.getViewMode=function(){return 0},r.prototype.setWarnings=function(e){},r.prototype.setToolbar=function(e){},r.prototype.shouldRetainSelection=function(){return!1},r.prototype.geocoder=function(){return t.services.createGeocoder()},r.prototype.promiseFactory=function(){return e.createJQueryPromiseFactory()},r.prototype.analyzeFilter=function(e){return{isNotFilter:!1,selectedIdentities:[],filter:void 0,defaultValue:void 0}},r.beautify=function(e){var t=i[e];return t?a[t]||e:e},r.describeUnit=function(e){var t=-1===e?"Auto":e.toString(),i=a["DisplayUnitSystem_E"+t+"_Title"],r=0>=e?"{0}":a["DisplayUnitSystem_E"+t+"_LabelFormat"];return i||r?{title:i,format:r}:void 0},r}();t.DefaultVisualHostServices=r,t.defaultVisualHostServices=new r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(e){return new s(e)}function a(e){return e.append("rect").classed("clearCatcher",!0).attr({width:"100%",height:"100%"})}function r(t,i,a){return null!=i.objects&&i.objects[a]&&e.DataViewObjects.getValue(i.objects[a],t)}function n(e){for(var t=0,i=e.length;i>t;t++)if(e[t].selected)return!0;return!1}var o=jsCommon.ArrayExtensions;t.createInteractivityService=i,t.appendClearCatcher=a,t.isCategoryColumnSelected=r,t.dataHasSelection=n;var s=function(){function t(e){this.renderSelectionInVisual=_.noop,this.renderSelectionInLegend=_.noop,this.renderSelectionInLabels=_.noop,this.selectedIds=[],this.isInvertedSelectionMode=!1,this.hostService=e}return t.prototype.bind=function(e,t,i,a){var r=this;a&&a.overrideSelectionFromData&&this.takeSelectionStateFromDataPoints(e),a?(a.isLegend?(this.selectableLegendDataPoints=e,this.renderSelectionInLegend=function(){return t.renderSelection(r.legendHasSelection())}):a.isLabels?(this.selectableLabelsDataPoints=e,this.renderSelectionInLabels=function(){return t.renderSelection(r.labelsHasSelection())}):(this.selectableDataPoints=e,this.renderSelectionInVisual=function(){return t.renderSelection(r.hasSelection())}),null!=a.hasSelectionOverride&&(this.hasSelectionOverride=a.hasSelectionOverride),a.slicerDefaultValueHandler&&(this.slicerDefaultValueHandler=a.slicerDefaultValueHandler)):(this.selectableDataPoints=e,this.renderSelectionInVisual=function(){return t.renderSelection(r.hasSelection())}),this.behavior=t,t.bindEvents(i,this),this.syncSelectionState()},t.prototype.clearSelection=function(){this.slicerDefaultValueHandler&&this.slicerDefaultValueHandler.getDefaultValue()&&this.useDefaultValue||(this.hasSelectionOverride=void 0,o.clear(this.selectedIds),this.isInvertedSelectionMode=!1,this.applyToAllSelectableDataPoints(function(e){return e.selected=!1}),this.renderAll())},t.prototype.applySelectionStateToData=function(e){for(var i=0;i<e.length;i++){var a=e[i];a.selected=t.checkDatapointAgainstSelectedIds(a,this.selectedIds)}return this.hasSelection()},t.prototype.hasSelection=function(){return this.selectedIds.length>0},t.prototype.legendHasSelection=function(){return this.selectableLegendDataPoints?n(this.selectableLegendDataPoints):!1},t.prototype.labelsHasSelection=function(){return this.selectableLabelsDataPoints?n(this.selectableLabelsDataPoints):!1},t.prototype.isSelectionModeInverted=function(){return this.isInvertedSelectionMode},t.prototype.setSelectionModeInverted=function(e){this.isInvertedSelectionMode=e},t.prototype.handleSelection=function(e,t){this.useDefaultValue=!1,this.select(e,t),this.sendSelectionToHost(),this.renderAll()},t.prototype.handleClearSelection=function(){this.useDefaultValue=!0,this.clearSelection(),this.sendSelectionToHost()},t.prototype.toggleSelectionModeInversion=function(){return this.useDefaultValue=!1,this.isInvertedSelectionMode=!this.isInvertedSelectionMode,o.clear(this.selectedIds),this.applyToAllSelectableDataPoints(function(e){return e.selected=!1}),this.sendSelectionToHost(),this.isInvertedSelectionMode?this.syncSelectionStateInverted():this.syncSelectionState(),this.renderAll(),this.isInvertedSelectionMode},t.prototype.persistSelectionFilter=function(e){this.hostService.persistProperties(this.createChangeForFilterProperty(e))},t.prototype.setDefaultValueMode=function(e){this.useDefaultValue=e},t.prototype.isDefaultValueEnabled=function(){return this.useDefaultValue},t.prototype.renderAll=function(){this.renderSelectionInVisual(),this.renderSelectionInLegend(),this.renderSelectionInLabels()},t.prototype.select=function(e,t){if(this.isInvertedSelectionMode)return this.selectInverted(e,t);e.identity.highlight&&(e=_.find(this.selectableDataPoints,function(t){return!t.identity.highlight&&e.identity.includes(t.identity,!0)}));var i=e.identity;if(i){var a=!e.selected||!t&&this.selectedIds.length>1;t&&(a?(e.selected=!0,this.selectedIds.push(i)):(e.selected=!1,this.removeId(i))),t&&this.hostService.canSelect({data:this.selectedIds.map(function(e){return e.getSelector()})})||(this.clearSelection(),a&&(e.selected=!0,this.selectedIds.push(i))),this.syncSelectionState()}},t.prototype.selectInverted=function(e,t){var i=e.selected,a=e.identity;e.selected=!i,i?this.removeId(a):this.selectedIds.push(a),this.syncSelectionStateInverted()},t.prototype.removeId=function(e){for(var t=this.selectedIds,i=t.length-1;i>-1;i--){var a=t[i];e.includes(a)&&t.splice(i,1)}},t.prototype.createChangeForFilterProperty=function(t){var i={},a=[];this.selectedIds.length>0&&(a=_.chain(this.selectedIds).filter(function(e){return e.hasIdentity()}).map(function(e){return e.getSelector()}).value());var r={objectName:t.objectName,selector:void 0,properties:i},n=e.data.Selector.filterFromSelector(a,this.isInvertedSelectionMode);return this.slicerDefaultValueHandler&&this.slicerDefaultValueHandler.getDefaultValue()&&(this.useDefaultValue===!0?n=e.data.SemanticFilter.getDefaultValueFilter(this.slicerDefaultValueHandler.getIdentityFields()):_.isEmpty(a)&&(n=e.data.SemanticFilter.getAnyValueFilter(this.slicerDefaultValueHandler.getIdentityFields()))),null==n?(i[t.propertyName]={},{remove:[r]}):(i[t.propertyName]=n,{merge:[r]})},t.prototype.sendSelectionToHost=function(){var e=this.hostService;if(e.onSelect){var t={data:this.selectedIds.filter(function(e){return e.hasIdentity()}).map(function(e){return e.getSelector()})},i=this.selectedIds.filter(function(e){return e.getSelectorsByColumn()&&e.hasIdentity()}).map(function(e){return e.getSelectorsByColumn()});i&&i.length>0&&(t.data2=i),e.onSelect(t)}},t.prototype.takeSelectionStateFromDataPoints=function(e){var t=this.selectedIds;o.clear(t);for(var i=0;i<e.length;i++){var a=e[i];a.selected&&t.push(a.identity)}},t.prototype.syncSelectionState=function(){if(this.isInvertedSelectionMode)return this.syncSelectionStateInverted();var e=this.selectedIds,i=this.selectableDataPoints,a=this.selectableLegendDataPoints,r=this.selectableLabelsDataPoints,n=!1;if(i||a){if(i&&t.updateSelectableDataPointsBySelectedIds(i,e)&&(n=!0),a&&t.updateSelectableDataPointsBySelectedIds(a,e)&&(n=!0),r)for(var o,s=0,l=r.length;l>s;s++)o=r[s],e.some(function(e){return e.includes(o.identity)})?o.selected=!0:o.selected=!1;!n&&e.length>0&&(this.clearSelection(),this.sendSelectionToHost())}},t.prototype.syncSelectionStateInverted=function(){var e=this.selectedIds,t=this.selectableDataPoints;if(t)if(0===e.length)for(var i=0;i<t.length;i++){var a=t[i];a.selected=!1}else for(var r=0;r<t.length;r++){var n=t[r];e.some(function(e){return e.includes(n.identity)})?n.selected=!0:n.selected&&(n.selected=!1)}},t.prototype.applyToAllSelectableDataPoints=function(e){var t=this.selectableDataPoints,i=this.selectableLegendDataPoints,a=this.selectableLabelsDataPoints;if(t)for(var r=0;r<t.length;r++){var n=t[r];e(n)}if(i)for(var o=0;o<i.length;o++){var n=i[o];e(n)}if(a)for(var s=0;s<a.length;s++){var n=a[s];e(n)}},t.updateSelectableDataPointsBySelectedIds=function(e,i){for(var a=!1,r=0;r<e.length;r++){var n=e[r];n.selected=t.checkDatapointAgainstSelectedIds(n,i),n.selected&&(a=!0)}return a},t.checkDatapointAgainstSelectedIds=function(e,t){return t.some(function(t){return t.includes(e.identity)})},t}();t.InteractivityService=s}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function i(){return{geocode:o,geocodeBoundary:s}}function a(e){return t.CategoryTypeArray.indexOf(e)>-1}function r(e){switch(e.toLowerCase()){case"fr":return"fr-FR";default:return e}}function n(e){var t=b?b.getCoordinates(e):void 0,i=$.Deferred();return t?i.resolve(t):(m.push({query:e,deferred:i}),l()),i}function o(e,t){return void 0===t&&(t=""),n(new C(e,t))}function s(e,t,i,a,r){return void 0===i&&(i=""),void 0===a&&(a=2),void 0===r&&(r=3),n(new S(e,t,i,a,r))}function l(e){for(void 0===e&&(e=0),f-=e;f<g.MaxBingRequest&&0!==m.length;)f++,u(m.shift())}function u(e){var i=b?b.getCoordinates(e.query):void 0;if(i)return setTimeout(function(){return l(1)}),void e.deferred.resolve(i);var a={type:"GET",dataType:"jsonp",jsonp:"jsonp"},r=e.query.getUrl();r||c(e,new Error("Unsupported query. "+e.query.query)),t.BingAjaxCall(r,a).then(function(t){try{if(e.query instanceof S){var i=t;if(i&&i.d&&Array.isArray(i.d.results)&&i.d.results.length>0){var a=i.d.results[0],r=a.Primitives;if(r&&r.length>0){var n={latitude:e.query.latitude,longitude:e.query.longitude,locations:[]};r.sort(function(e,t){return e.Shape.length<t.Shape.length?1:e.Shape.length>t.Shape.length?-1:0});for(var o=Math.min(r.length,e.query.maxGeoData),s=0;o>s;s++)for(var l=r[s].Shape,u=l.split(","),d=1;d<u.length;d++)n.locations.push({nativeBing:u[d]});c(e,null,n)}else c(e,new Error("Geocode result is empty."))}else c(e,new Error("Geocode result is empty."))}else{var p=t.resourceSets[0].resources;if(Array.isArray(p)&&p.length>0){var g=h(p,e.query),m=p[g].point.coordinates,n={latitude:parseFloat(m[0]),longitude:parseFloat(m[1])
};c(e,null,n)}else c(e,new Error("Geocode result is empty."))}}catch(f){c(e,f)}},function(t){c(e,t)})}function c(e,t,i){void 0===i&&(i=null),x=setTimeout(function(){return l(1)},g.UseDoubleArrayGeodataResult?g.UseDoubleArrayDequeueTimeout:0),t?e.deferred.reject(t):(b&&b.registerCoordinates(e.query,i),e.deferred.resolve(i))}function h(e,t){var i=t.query.toLowerCase();if(2===i.length&&t.category===p.CountryRegion)for(var a=0;a<e.length;a++){var r=e[a].address&&e[a].address.countryRegionIso2;if(r&&i===r.toLowerCase())return a}for(var n=t.getBingEntity().toLowerCase(),a=0;a<e.length;a++){var o=(e[a].entityType||"").toLowerCase();if(o===n)return a}return 0}function d(){m=[],f=0,y=null,clearTimeout(x)}var p=e.MapUtil.CategoryTypes,g=e.MapUtil.Settings;t.createGeocoder=i,t.safeCharacters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_-",t.BingAjaxCall=$.ajax,t.CategoryTypeArray=["Address","City","Continent","Country","County","Longitude","Latitude","Place","PostalCode","StateOrProvince"],t.isCategoryType=a,t.BingEntities={Continent:"Continent",Sovereign:"Sovereign",CountryRegion:"CountryRegion",AdminDivision1:"AdminDivision1",AdminDivision2:"AdminDivision2",PopulatedPlace:"PopulatedPlace",Postcode:"Postcode",Postcode1:"Postcode1",Neighborhood:"Neighborhood",Address:"Address"};var m,f,y,v,b,C=function(){function e(e,i){this.query=null!=e?e:"",this.category=null!=i?i:"",this.key=(this.query+"/"+this.category).toLowerCase(),this.cacheHits=0,b||(b=t.createGeocodingCache(g.MaxCacheSize,g.MaxCacheSizeOverflow))}return e.prototype.incrementCacheHit=function(){this.cacheHits++},e.prototype.getCacheHits=function(){return this.cacheHits},e.prototype.getBingEntity=function(){var e=this.category.toLowerCase();return y||(y={},y[p.Continent.toLowerCase()]=t.BingEntities.Continent,y[p.CountryRegion.toLowerCase()]=t.BingEntities.Sovereign,y[p.StateOrProvince.toLowerCase()]=t.BingEntities.AdminDivision1,y[p.County.toLowerCase()]=t.BingEntities.AdminDivision2,y[p.City.toLowerCase()]=t.BingEntities.PopulatedPlace,y[p.PostalCode.toLowerCase()]=t.BingEntities.Postcode,y[p.Address.toLowerCase()]=t.BingEntities.Address),y[e]||""},e.prototype.getUrl=function(){var e=g.BingUrl+"key="+g.BingKey,i=this.getBingEntity(),a=!1;if(i)if(i===t.BingEntities.Postcode)e+="&includeEntityTypes=Postcode,Postcode1,Postcode2,Postcode3,Postcode4";else if(-1!==this.query.indexOf(",")||i!==t.BingEntities.AdminDivision1&&i!==t.BingEntities.AdminDivision2)e+="&includeEntityTypes="+i;else{a=!0;try{e+="&adminDistrict="+decodeURIComponent(this.query)}catch(n){return null}}if(!a)try{e+="&q="+decodeURIComponent(this.query)}catch(n){return null}var o=navigator.userLanguage||navigator.language;return o=r(o),o&&(e+="&c="+o),e+="&maxRes=20",2===this.query.length&&this.category===p.CountryRegion&&(e+="&include=ciso2"),e},e}();t.GeocodeQuery=C;var S=function(e){function i(t,i,a,r,n){void 0===n&&(n=3),e.call(this,[t,i,r,n].join(","),a),this.latitude=t,this.longitude=i,this.levelOfDetail=r,this.maxGeoData=n}return __extends(i,e),i.prototype.getBingEntity=function(){var e=this.category.toLowerCase();return v||(v={},v[p.CountryRegion.toLowerCase()]=t.BingEntities.CountryRegion,v[p.StateOrProvince.toLowerCase()]=t.BingEntities.AdminDivision1,v[p.County.toLowerCase()]=t.BingEntities.AdminDivision2,v[p.City.toLowerCase()]=t.BingEntities.PopulatedPlace,v[p.PostalCode.toLowerCase()]=t.BingEntities.Postcode1),v[e]||""},i.prototype.getUrl=function(){var e=g.BingUrlGeodata+"key="+g.BingKey+"&$format=json",t=this.getBingEntity();if(!t)return null;var i=navigator.userLanguage||navigator.language;i=r(i);var a=i.split("-"),n=[this.latitude,this.longitude,this.levelOfDetail,"'"+t+"'",1,0,"'"+i+"'"];return a.length>1&&n.push("'"+a[1]+"'"),e+"&SpatialFilter=GetBoundary("+n.join(", ")+")"},i}(C);t.GeocodeBoundaryQuery=S,t.geocodeCore=n,t.geocode=o,t.geocodeBoundary=s;var x;t.reset=d,d()}(t=e.services||(e.services={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){function i(e,t){return new a(e,t)}t.createGeocodingCache=i;var a=function(){function t(e,t){this.geocodeCache={},this.maxCacheSize=e,this.maxCacheSizeOverflow=t}return t.prototype.getCoordinates=function(t){var i=this.geocodeCache[t.key];return i?(i.query.incrementCacheHit(),i.coordinate):(i=e.localStorageService.getData(t.key),i?(this.registerInMemory(t,i.coordinate),i.coordinate):void 0)},t.prototype.registerCoordinates=function(e,t){this.registerInMemory(e,t),this.registerInStorage(e,t)},t.prototype.registerInMemory=function(e,t){var i=this.geocodeCache,a=Object.keys(i),r=a.length,n=this.maxCacheSize;if(a.length>n+this.maxCacheSizeOverflow)for(var o=a.sort(function(e,t){var a=i[e],r=i[t],n=a?a.query.getCacheHits():0,o=r?r.query.getCacheHits():0;return o>n?-1:n>o?1:0}),s=0;r-n>s;s++)i[o[s]]=void 0;i[e.key]={query:e,coordinate:t}},t.prototype.registerInStorage=function(t,i){e.localStorageService.setData(t.key,{query:t,coordinate:i})},t}()}(i=t.services||(t.services={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i,a=["play","subview","smallMultiple"];!function(i){function r(t,i,a,r){var n=e.Prototype.inherit(i);n.create=a,r&&r(n),t[i.name]=n}function n(i,a){var n=!0,o=a&&a.lineChartLabelDensityEnabled;r(i,e.visuals.plugins.barChart,function(){return new t.CartesianChart({chartType:6,tooltipsEnabled:n})}),r(i,e.visuals.plugins.clusteredBarChart,function(){return new t.CartesianChart({chartType:5,tooltipsEnabled:n})}),r(i,e.visuals.plugins.clusteredColumnChart,function(){return new t.CartesianChart({chartType:3,tooltipsEnabled:n})}),r(i,e.visuals.plugins.columnChart,function(){return new t.CartesianChart({chartType:4,tooltipsEnabled:n})}),r(i,e.visuals.plugins.dataDotClusteredColumnComboChart,function(){return new t.CartesianChart({chartType:15,tooltipsEnabled:n})}),r(i,e.visuals.plugins.dataDotStackedColumnComboChart,function(){return new t.CartesianChart({chartType:16,tooltipsEnabled:n})}),r(i,e.visuals.plugins.donutChart,function(){return new t.DonutChart({tooltipsEnabled:n})}),r(i,e.visuals.plugins.funnel,function(){return new t.FunnelChart({tooltipsEnabled:n})}),r(i,e.visuals.plugins.gauge,function(){return new t.Gauge({tooltipsEnabled:n})}),r(i,e.visuals.plugins.hundredPercentStackedBarChart,function(){return new t.CartesianChart({chartType:7,tooltipsEnabled:n})}),r(i,e.visuals.plugins.hundredPercentStackedColumnChart,function(){return new t.CartesianChart({chartType:8,tooltipsEnabled:n})}),r(i,e.visuals.plugins.lineChart,function(){return new t.CartesianChart({chartType:0,tooltipsEnabled:n,lineChartLabelDensityEnabled:o})}),r(i,e.visuals.plugins.areaChart,function(){return new t.CartesianChart({chartType:1,tooltipsEnabled:n,lineChartLabelDensityEnabled:o})}),r(i,e.visuals.plugins.stackedAreaChart,function(){return new t.CartesianChart({chartType:2,tooltipsEnabled:n,lineChartLabelDensityEnabled:o})}),r(i,e.visuals.plugins.lineClusteredColumnComboChart,function(){return new t.CartesianChart({chartType:13,tooltipsEnabled:n})}),r(i,e.visuals.plugins.lineStackedColumnComboChart,function(){return new t.CartesianChart({chartType:14,tooltipsEnabled:n})}),r(i,e.visuals.plugins.pieChart,function(){return new t.DonutChart({sliceWidthRatio:0,tooltipsEnabled:n})}),r(i,s(e.visuals.plugins.scatterChart),function(){return new t.CartesianChart({chartType:9,tooltipsEnabled:n})}),r(i,e.visuals.plugins.treemap,function(){return new t.Treemap({isScrollable:!1,tooltipsEnabled:n})}),r(i,e.visuals.plugins.waterfallChart,function(){return new t.CartesianChart({chartType:12,tooltipsEnabled:n})}),r(i,e.visuals.plugins.map,function(){return new t.Map({tooltipsEnabled:n,disableZooming:!0,disablePanning:!0})}),r(i,e.visuals.plugins.filledMap,function(){return new t.Map({filledMap:!0,tooltipsEnabled:n,disableZooming:!0,disablePanning:!0})})}function o(i,a){var n=a?a.categoricalPivotEnabled:!1,o=a?a.seriesLabelFormattingEnabled:!1,l=a?a.scriptVisualEnabled:!1,u=a?a.isLabelInteractivityEnabled:!1,c=a?a.matrixFormattingEnabled:!1,h=a?a.filledMapDataLabelsEnabled:!1,d=a?a.referenceLinesEnabled:!1,p=a?a.backgroundImageEnabled:!1,g=a?a.lineChartLabelDensityEnabled:!1;r(i,e.visuals.plugins.barChart,function(){return new t.CartesianChart({chartType:6,isScrollable:!0,animator:new t.WebColumnChartAnimator,tooltipsEnabled:!0,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior]),seriesLabelFormattingEnabled:o,isLabelInteractivityEnabled:u,referenceLinesEnabled:d,backgroundImageEnabled:p})}),r(i,e.visuals.plugins.card,function(){return new t.Card({isScrollable:!0,animator:new t.BaseAnimator})}),r(i,e.visuals.plugins.clusteredBarChart,function(){return new t.CartesianChart({chartType:5,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior]),seriesLabelFormattingEnabled:o,isLabelInteractivityEnabled:u,referenceLinesEnabled:d,backgroundImageEnabled:p})}),r(i,e.visuals.plugins.clusteredColumnChart,function(){return new t.CartesianChart({chartType:3,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior]),seriesLabelFormattingEnabled:o,isLabelInteractivityEnabled:u,referenceLinesEnabled:d,backgroundImageEnabled:p})}),r(i,e.visuals.plugins.columnChart,function(){return new t.CartesianChart({chartType:4,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior]),seriesLabelFormattingEnabled:o,isLabelInteractivityEnabled:u,referenceLinesEnabled:d,backgroundImageEnabled:p})}),r(i,e.visuals.plugins.dataDotClusteredColumnComboChart,function(){return new t.CartesianChart({chartType:15,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior,new t.DataDotChartWebBehavior]),isLabelInteractivityEnabled:u})}),r(i,e.visuals.plugins.dataDotStackedColumnComboChart,function(){return new t.CartesianChart({chartType:16,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior,new t.DataDotChartWebBehavior]),isLabelInteractivityEnabled:u})}),r(i,e.visuals.plugins.donutChart,function(){return new t.DonutChart({animator:new t.WebDonutChartAnimator,isScrollable:!0,tooltipsEnabled:!0,behavior:new t.DonutChartWebBehavior})}),r(i,e.visuals.plugins.funnel,function(){return new t.FunnelChart({animator:new t.WebFunnelAnimator,behavior:new t.FunnelWebBehavior,tooltipsEnabled:!0})}),r(i,e.visuals.plugins.gauge,function(){return new t.Gauge({animator:new t.BaseAnimator,tooltipsEnabled:!0})}),r(i,e.visuals.plugins.hundredPercentStackedBarChart,function(){return new t.CartesianChart({chartType:7,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior]),seriesLabelFormattingEnabled:o,isLabelInteractivityEnabled:u,referenceLinesEnabled:d,backgroundImageEnabled:p})}),r(i,e.visuals.plugins.hundredPercentStackedColumnChart,function(){return new t.CartesianChart({chartType:8,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior]),seriesLabelFormattingEnabled:o,isLabelInteractivityEnabled:u,referenceLinesEnabled:d,backgroundImageEnabled:p})}),r(i,e.visuals.plugins.lineChart,function(){return new t.CartesianChart({chartType:0,isScrollable:!0,tooltipsEnabled:!0,animator:new t.BaseAnimator,behavior:new t.CartesianChartBehavior([new t.LineChartWebBehavior]),seriesLabelFormattingEnabled:o,isLabelInteractivityEnabled:u,referenceLinesEnabled:d,backgroundImageEnabled:p,lineChartLabelDensityEnabled:g})}),r(i,e.visuals.plugins.areaChart,function(){return new t.CartesianChart({chartType:1,isScrollable:!0,tooltipsEnabled:!0,animator:new t.BaseAnimator,behavior:new t.CartesianChartBehavior([new t.LineChartWebBehavior]),seriesLabelFormattingEnabled:o,isLabelInteractivityEnabled:u,referenceLinesEnabled:d,lineChartLabelDensityEnabled:g})}),r(i,e.visuals.plugins.stackedAreaChart,function(){return new t.CartesianChart({chartType:2,isScrollable:!0,tooltipsEnabled:!0,animator:new t.BaseAnimator,behavior:new t.CartesianChartBehavior([new t.LineChartWebBehavior]),seriesLabelFormattingEnabled:o,lineChartLabelDensityEnabled:g})}),r(i,e.visuals.plugins.lineClusteredColumnComboChart,function(){return new t.CartesianChart({chartType:13,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior,new t.LineChartWebBehavior]),isLabelInteractivityEnabled:u})}),r(i,e.visuals.plugins.lineStackedColumnComboChart,function(){return new t.CartesianChart({chartType:14,isScrollable:!0,tooltipsEnabled:!0,animator:new t.WebColumnChartAnimator,behavior:new t.CartesianChartBehavior([new t.ColumnChartWebBehavior,new t.LineChartWebBehavior]),isLabelInteractivityEnabled:u})}),r(i,e.visuals.plugins.pieChart,function(){return new t.DonutChart({sliceWidthRatio:0,animator:new t.WebDonutChartAnimator,isScrollable:!0,tooltipsEnabled:!0,behavior:new t.DonutChartWebBehavior})}),r(i,s(e.visuals.plugins.scatterChart,n),function(){return new t.CartesianChart({chartType:9,isScrollable:!0,tooltipsEnabled:!0,animator:new t.BaseAnimator,behavior:new t.CartesianChartBehavior([new t.ScatterChartWebBehavior]),isLabelInteractivityEnabled:u,referenceLinesEnabled:d,backgroundImageEnabled:p})}),r(i,e.visuals.plugins.treemap,function(){return new t.Treemap({animator:new t.WebTreemapAnimator,isScrollable:!0,behavior:new t.TreemapWebBehavior,tooltipsEnabled:!0})}),r(i,e.visuals.plugins.waterfallChart,function(){return new t.CartesianChart({chartType:12,isScrollable:!0,tooltipsEnabled:!0,behavior:new t.CartesianChartBehavior([new t.WaterfallChartWebBehavior]),isLabelInteractivityEnabled:u,referenceLinesEnabled:d})}),r(i,e.visuals.plugins.map,function(){return new t.Map({behavior:new t.MapBehavior,tooltipsEnabled:!0,isLegendScrollable:!0})}),r(i,e.visuals.plugins.filledMap,function(){return new t.Map({filledMap:!0,behavior:new t.MapBehavior,tooltipsEnabled:!0,filledMapDataLabelsEnabled:h,isLegendScrollable:!0})}),r(i,e.visuals.plugins.slicer,function(){return new t.Slicer({behavior:new t.SlicerWebBehavior})}),r(i,e.visuals.plugins.matrix,function(){return new t.Matrix({isFormattingPropertiesEnabled:c})}),r(i,e.visuals.plugins.table,function(){return new t.Table({isFormattingPropertiesEnabled:c})}),l&&r(i,e.visuals.plugins.scriptVisual,function(){return new t.ScriptVisual({canRefresh:!0})})}function s(e,t){if(!t)return e;var i=e.capabilities;if(!i.dataViewMappings)return e;for(var a=e,r=0;r<i.dataViewMappings.length;++r){var n=i.dataViewMappings[r].categorical;if(n){a===e&&(a=_.clone(e),a.capabilities=_.clone(a.capabilities),i=a.capabilities,n=i.dataViewMappings[r].categorical);var o=n.categories;o&&o.dataReductionAlgorithm&&(o.dataReductionAlgorithm=void 0);var s=n.values;if(s){var l=s.group;l&&(l.dataReductionAlgorithm=void 0)}n.dataReductionAlgorithm={sample:{}}}}return a}function l(){return new g(void 0)}function u(e){return new g(e)}function c(e){return new m(e)}function h(e){return new y(e)}function d(e){return new v(e)}function p(e){return new b(e)}var g=function(){function i(t){this.plugins=e.visuals.plugins,this.featureSwitches=t}return i.prototype.getVisuals=function(){var e=this.plugins,t=Object.keys(e);return t.map(function(t){return e[t]})},i.prototype.getPlugin=function(e){if(e){var t=this.plugins[e];if(t)return t}},i.prototype.capabilities=function(e){var t=this.getPlugin(e);return t?t.capabilities:void 0},i.prototype.requireSandbox=function(e){return e&&e.custom},i.prototype.removeAnyCustomVisuals=function(){var t=e.visuals.plugins;for(var i in t){var a=t[i];a.custom&&delete t[i]}},i.prototype.isCustomVisual=function(e){return e?this.plugins[e]?this.plugins[e].custom===!0:_.include(a,e)?!1:!0:!1},i.prototype.shouldDisableVisual=function(e,i){return(e===t.plugins.map.name||e===t.plugins.filledMap.name)&&i},i.prototype.isScriptVisualQueryable=function(){return void 0!==this.featureSwitches&&this.featureSwitches.scriptVisualEnabled},i}();i.VisualPluginService=g,i.createPlugin=r;var m=function(i){function a(e){i.call(this,e),this.visualPlugins={},this.addCustomVisualizations([]),o(this.visualPlugins,this.featureSwitches)}return __extends(a,i),a.prototype.getVisuals=function(){var i=[e.visuals.plugins.barChart,e.visuals.plugins.columnChart,e.visuals.plugins.clusteredBarChart,e.visuals.plugins.clusteredColumnChart,e.visuals.plugins.hundredPercentStackedBarChart,e.visuals.plugins.hundredPercentStackedColumnChart,e.visuals.plugins.lineChart,e.visuals.plugins.areaChart,e.visuals.plugins.stackedAreaChart,e.visuals.plugins.lineStackedColumnComboChart,e.visuals.plugins.lineClusteredColumnComboChart,e.visuals.plugins.waterfallChart,e.visuals.plugins.scatterChart,e.visuals.plugins.pieChart,e.visuals.plugins.treemap,e.visuals.plugins.map,e.visuals.plugins.table,e.visuals.plugins.matrix,e.visuals.plugins.filledMap,e.visuals.plugins.funnel,e.visuals.plugins.gauge,e.visuals.plugins.multiRowCard,e.visuals.plugins.card];this.featureSwitches.kpiVisualEnabled&&i.push(e.visuals.plugins.kpi),i.push(e.visuals.plugins.slicer),i.push(e.visuals.plugins.donutChart),this.featureSwitches.scriptVisualEnabled&&i.push(e.visuals.plugins.scriptVisual);for(var a in t.plugins){var r=t.plugins[a];r.custom&&this.pushPluginIntoConveratbleTypes(i,r)}return this.addCustomVisualizations(i),this.featureSwitches.dataDotChartEnabled&&(i.push(e.visuals.plugins.dataDotClusteredColumnComboChart),i.push(e.visuals.plugins.dataDotStackedColumnComboChart)),i},a.prototype.pushPluginIntoConveratbleTypes=function(e,t){e.some(function(e){return e.name===t.name})||e.push(t)},a.prototype.addCustomVisualizations=function(t){var i=e.localStorageService.getData("customVisualizations");if(i)for(var a=i.length,r=0;a>r;r++){var n=i[r].pluginName,o=this.getPlugin(n);if(!o){var s=i[r].javaScriptCode,l=$("<script/>",{html:s+"//# sourceURL="+n+".js\n//# sourceMappingURL="+n+".js.map"});l.attr("pluginName",n),$("body").append(l);var u=$("<style/>",{html:i[r].cssCode});u.attr("pluginName",n),$("head").append(u),o=this.getPlugin(n)}this.pushPluginIntoConveratbleTypes(t,o)}},a.prototype.getPlugin=function(e){return this.visualPlugins[e]?this.visualPlugins[e]:i.prototype.getPlugin.call(this,e)},a.prototype.requireSandbox=function(e){return this.featureSwitches.sandboxVisualsEnabled&&(!e||e&&e.custom)},a}(g);i.MinervaVisualPluginService=m;var f=function(t){function i(){t.call(this,void 0),this.visualPlugins=e.visuals.plugins,o(this.visualPlugins,null)}return __extends(i,t),i.prototype.getVisuals=function(){var e=this.visualPlugins,t=Object.keys(e);return t.map(function(t){return e[t]})},i.prototype.getPlugin=function(e){if(e){var t=this.visualPlugins[e];if(t)return t}},i.prototype.capabilities=function(e){var t=this.getPlugin(e);return t?t.capabilities:void 0},i}(g);i.PlaygroundVisualPluginService=f;var y=function(e){function t(t){e.call(this,t),this.visualPlugins={},n(this.visualPlugins,this.featureSwitches)}return __extends(t,e),t.prototype.getPlugin=function(t){return this.visualPlugins[t]?this.visualPlugins[t]:e.prototype.getPlugin.call(this,t)},t.prototype.requireSandbox=function(e){return this.featureSwitches.sandboxVisualsEnabled&&(!e||e&&e.custom)},t}(g);i.DashboardPluginService=y;var v=function(i){function a(a){i.call(this,a);var n=a?a.seriesLabelFormattingEnabled:!1;this.visualPlugins={},r(this.visualPlugins,e.visuals.plugins.clusteredBarChart,function(){return new t.CartesianChart({chartType:5,animator:new t.WebColumnChartAnimator,tooltipsEnabled:!0,seriesLabelFormattingEnabled:n})}),r(this.visualPlugins,e.visuals.plugins.columnChart,function(){return new t.CartesianChart({chartType:4,animator:new t.WebColumnChartAnimator,tooltipsEnabled:!0,seriesLabelFormattingEnabled:n})}),r(this.visualPlugins,e.visuals.plugins.donutChart,function(){return new t.DonutChart({animator:new t.WebDonutChartAnimator,tooltipsEnabled:!0})}),r(this.visualPlugins,e.visuals.plugins.hundredPercentStackedBarChart,function(){return new t.CartesianChart({chartType:7,animator:new t.WebColumnChartAnimator,tooltipsEnabled:!0,seriesLabelFormattingEnabled:n})}),r(this.visualPlugins,e.visuals.plugins.hundredPercentStackedColumnChart,function(){return new t.CartesianChart({chartType:8,animator:new t.WebColumnChartAnimator,tooltipsEnabled:!0,seriesLabelFormattingEnabled:n})}),r(this.visualPlugins,e.visuals.plugins.lineChart,function(){return new t.CartesianChart({chartType:0,animator:new t.BaseAnimator,tooltipsEnabled:!0})}),r(this.visualPlugins,e.visuals.plugins.areaChart,function(){return new t.CartesianChart({chartType:1,animator:new t.BaseAnimator,tooltipsEnabled:!0})}),r(this.visualPlugins,e.visuals.plugins.pieChart,function(){return new t.DonutChart({sliceWidthRatio:0,animator:new t.WebDonutChartAnimator,tooltipsEnabled:!0})}),r(this.visualPlugins,e.visuals.plugins.scatterChart,function(){return new t.CartesianChart({chartType:9,animator:new t.BaseAnimator,tooltipsEnabled:!0})},void 0)}return __extends(a,i),a.prototype.getPlugin=function(e){return this.visualPlugins[e]?this.visualPlugins[e]:i.prototype.getPlugin.call(this,e)},a.prototype.requireSandbox=function(e){return this.featureSwitches.sandboxVisualsEnabled&&(!e||e&&e.custom)},a}(g);i.InsightsPluginService=v;var b=function(i){function a(n){var o=this;i.call(this,void 0),this.smallViewPortProperties=n||{CartesianSmallViewPortProperties:{hideAxesOnSmallViewPort:!0,hideLegendOnSmallViewPort:!0,MinHeightLegendVisible:a.MinHeightLegendVisible,MinHeightAxesVisible:a.MinHeightAxesVisible},GaugeSmallViewPortProperties:{hideGaugeSideNumbersOnSmallViewPort:!0,smallGaugeMarginsOnSmallViewPort:!0,MinHeightGaugeSideNumbersVisible:a.MinHeightGaugeSideNumbersVisible,GaugeMarginsOnSmallViewPort:a.GaugeMarginsOnSmallViewPort},FunnelSmallViewPortProperties:{hideFunnelCategoryLabelsOnSmallViewPort:!0,minHeightFunnelCategoryLabelsVisible:a.MinHeightFunnelCategoryLabelsVisible},DonutSmallViewPortProperties:{maxHeightToScaleDonutLegend:a.MaxHeightToScaleDonutLegend}},t.TooltipManager.ShowTooltips=!1;var s=!1,l=this.getMapThrottleInterval();this.visualPlugins={},r(this.visualPlugins,e.visuals.plugins.areaChart,function(){return new t.CartesianChart({chartType:1,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.barChart,function(){return new t.CartesianChart({chartType:6,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.clusteredBarChart,function(){return new t.CartesianChart({chartType:5,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.clusteredColumnChart,function(){return new t.CartesianChart({chartType:3,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.columnChart,function(){return new t.CartesianChart({chartType:4,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.comboChart,function(){return new t.CartesianChart({chartType:10,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.dataDotChart,function(){return new t.CartesianChart({chartType:11,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.dataDotClusteredColumnComboChart,function(){return new t.CartesianChart({chartType:15,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.dataDotStackedColumnComboChart,function(){return new t.CartesianChart({chartType:16,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.hundredPercentStackedBarChart,function(){return new t.CartesianChart({chartType:7,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.hundredPercentStackedColumnChart,function(){return new t.CartesianChart({chartType:8,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.stackedAreaChart,function(){return new t.CartesianChart({chartType:2,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.waterfallChart,function(){return new t.CartesianChart({chartType:12,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.lineChart,function(){return new t.CartesianChart({chartType:0,cartesianSmallViewPortProperties:o.smallViewPortProperties.CartesianSmallViewPortProperties,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.lineClusteredColumnComboChart,function(){return new t.CartesianChart({chartType:13,cartesianSmallViewPortProperties:o.smallViewPortProperties.CartesianSmallViewPortProperties,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.lineStackedColumnComboChart,function(){return new t.CartesianChart({chartType:14,cartesianSmallViewPortProperties:o.smallViewPortProperties.CartesianSmallViewPortProperties,trimOrdinalDataOnOverflow:s})}),r(this.visualPlugins,e.visuals.plugins.scatterChart,function(){return new t.CartesianChart({chartType:9,cartesianSmallViewPortProperties:o.smallViewPortProperties.CartesianSmallViewPortProperties,behavior:new t.CartesianChartBehavior([new t.ScatterChartMobileBehavior])})}),r(this.visualPlugins,e.visuals.plugins.gauge,function(){return new t.Gauge({gaugeSmallViewPortProperties:o.smallViewPortProperties.GaugeSmallViewPortProperties})}),r(this.visualPlugins,e.visuals.plugins.funnel,function(){return new t.FunnelChart({animator:null,funnelSmallViewPortProperties:o.smallViewPortProperties.FunnelSmallViewPortProperties})}),r(this.visualPlugins,e.visuals.plugins.donutChart,function(){return new t.DonutChart({disableGeometricCulling:!0,smallViewPortProperties:o.smallViewPortProperties.DonutSmallViewPortProperties})}),r(this.visualPlugins,e.visuals.plugins.pieChart,function(){return new t.DonutChart({sliceWidthRatio:0,disableGeometricCulling:!0,smallViewPortProperties:o.smallViewPortProperties.DonutSmallViewPortProperties})}),r(this.visualPlugins,e.visuals.plugins.matrix,function(){return new t.Matrix({isTouchEnabled:!0})}),r(this.visualPlugins,e.visuals.plugins.table,function(){return new t.Table({isTouchEnabled:!0})}),r(this.visualPlugins,e.visuals.plugins.map,function(){return new t.Map({viewChangeThrottleInterval:l})}),r(this.visualPlugins,e.visuals.plugins.filledMap,function(){return new t.Map({filledMap:!0,viewChangeThrottleInterval:l})})}return __extends(a,i),a.prototype.getPlugin=function(e){return this.visualPlugins[e]?this.visualPlugins[e]:i.prototype.getPlugin.call(this,e)},a.prototype.getMapThrottleInterval=function(){var e=100,t=navigator.userAgent.toLowerCase();return-1!==t.indexOf("windows phone")?e:void 0},a.MinHeightLegendVisible=80,a.MinHeightAxesVisible=80,a.MinHeightGaugeSideNumbersVisible=80,a.GaugeMarginsOnSmallViewPort=10,a.MinHeightFunnelCategoryLabelsVisible=80,a.MaxHeightToScaleDonutLegend=300,a}(g);i.MobileVisualPluginService=b,i.create=l,i.createVisualPluginService=u,i.createMinerva=c,i.createDashboard=h,i.createInsights=d,i.createMobile=p}(i=t.visualPluginFactory||(t.visualPluginFactory={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(e,t){if(e)for(var i=0;i<e.length;i++){var a=e[i];a(t)}}var i="unselectable";e.fire=t;var a=function(){function t(e,t){this._owner=e,this._direction=t,this._timerHandle=void 0,this.createView();var a=this;this._element.addEventListener("mousedown",function(e){a.onMouseDown(e)}),$(this._element).addClass(i),$(this._svg).addClass(i),$(this._polygon).addClass(i)}return Object.defineProperty(t.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),t.prototype.createView=function(){var e="http://www.w3.org/2000/svg";this._polygon=document.createElementNS(e,"polygon"),this._polygon.setAttributeNS(null,"points","3,3 6,3 13,8 6,13 3,13 10,8"),this._polygon.setAttributeNS(null,"fill",t.ARROW_COLOR),this._svg=document.createElementNS(e,"svg");var i=this._svg.style;i.position="absolute",i.left="0px",i.top="0px",this._svg.appendChild(this._polygon),this._element=document.createElement("div"),this._element.className=r.arrowClassName,this._element.appendChild(this._svg),this._owner.element.appendChild(this._element)},t.prototype.onMouseDown=function(e){var t=this;if(clearTimeout(this._timerHandle),!this._mouseUpWrapper){e.cancelBubble=!0;var i=this;this._mouseUpWrapper=function(e){i.onMouseUp(e)},r.addDocumentMouseUpEvent(this._mouseUpWrapper)}this._owner._scrollSmallIncrement(this._direction),this._owner.refresh(),this._timerHandle=setTimeout(function(){t.onMouseDown(e)},100),e.preventDefault&&e.preventDefault()},t.prototype.onMouseUp=function(e){clearTimeout(this._timerHandle),r.removeDocumentMouseUpEvent(this._mouseUpWrapper),this._mouseUpWrapper=void 0},t.prototype.arrange=function(t,i,a){var r=Math.min(t,i),n=r/16,o=(t-r)/2,s=(i-r)/2;this._polygon.setAttributeNS(null,"transform","translate("+o+", "+s+") scale("+n+") rotate("+a+",8,8)"),this._svg.setAttributeNS(null,"width",t+"px"),this._svg.setAttributeNS(null,"height",i+"px"),e.HTMLElementUtils.setElementWidth(this._element,t),e.HTMLElementUtils.setElementHeight(this._element,i)},t.MIN_WIDTH=26,t.ARROW_COLOR="#404040",t}();e.ScrollbarButton=a;var r=function(){function r(e){this.MIN_BAR_SIZE=10,this.min=0,this.max=10,this.viewMin=0,this.viewSize=2,this.smallIncrement=1,this._onscroll=[],this._screenToOffsetScale=1,this.createView(e);var t=this;this._element.addEventListener("mousedown",function(e){t.onBackgroundMouseDown(e)}),this._middleBar.addEventListener("mousedown",function(e){t.onMiddleBarMouseDown(e)}),this._timerHandle=void 0,this._visible=!0,this.element.winControl=this,$(this._touchPanel).addClass(i)}return r.prototype.scrollBy=function(e){this.scrollTo(this.viewMin+e)},r.prototype.scrollUp=function(){this.scrollBy(-this.smallIncrement)},r.prototype.scrollDown=function(){this.scrollBy(this.smallIncrement)},r.prototype.scrollPageUp=function(){this.scrollBy(-this.viewSize)},r.prototype.scrollPageDown=function(){this.scrollBy(this.viewSize)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(e){this._width=e,this._element.style.width=e,this.invalidateArrange()},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(e){this._height=e,this._element.style.height=e,this.invalidateArrange()},enumerable:!0,configurable:!0}),r.prototype.refresh=function(){},Object.defineProperty(r.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxButton",{get:function(){return this._maxButton},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"middleBar",{get:function(){return this._middleBar},enumerable:!0,configurable:!0}),r.prototype._scrollSmallIncrement=function(e){this.scrollBy(this.smallIncrement*e)},Object.defineProperty(r.prototype,"visible",{get:function(){return this._visible},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"isInMouseCapture",{get:function(){return void 0!==this._timerHandle},enumerable:!0,configurable:!0}),r.prototype.show=function(e){this._visible=e,this.element.style.visibility=e?"visible":"hidden",this.invalidateArrange()},r.prototype._getMouseOffset=function(e){return void 0!==e.offsetX?{x:e.offsetX,y:e.offsetY}:void 0!==e.layerX?{x:e.layerX,y:e.layerY}:{x:e.screenX,y:e.screenY}},r.prototype._getOffsetXDelta=function(e){return(e.screenX-this._screenPrevMousePos.x)/this._screenToOffsetScale},r.prototype._getOffsetYDelta=function(e){return(e.screenY-this._screenPrevMousePos.y)/this._screenToOffsetScale},r.prototype._getOffsetXTouchDelta=function(e){return this._getMouseOffset(e).x-this._offsetTouchPrevPos.x},r.prototype._getOffsetYTouchDelta=function(e){return this._getMouseOffset(e).y-this._offsetTouchPrevPos.y},r.prototype.initTouch=function(e,t){var i=this;this._touchPanel=e,
this._allowMouseDrag=void 0===t?!0:t,"ontouchmove"in e?(e.addEventListener("touchstart",function(e){return i.onTouchStart(e)}),e.addEventListener("touchmove",function(e){return i.onTouchMove(e)}),e.addEventListener("touchend",function(e){return i.onTouchEnd(e)})):(e.addEventListener("mousedown",function(e){return i.onTouchMouseDown(e)}),e.addEventListener("mousemove",function(e){return i.onTouchMouseMove(e)}),e.addEventListener("mouseup",function(e){return i.onTouchMouseUp(e)}))},r.prototype.onTouchStart=function(e){1===e.touches.length&&this.onTouchMouseDown(e.touches[0])},r.prototype.onTouchMove=function(e){1===e.touches.length&&(e.preventDefault&&e.preventDefault(),this.onTouchMouseMove(e.touches[0]))},r.prototype.onTouchEnd=function(e){this.onTouchMouseUp(1===e.touches.length?e.touches[0]:e,!0)},r.prototype.onTouchMouseDown=function(e){(this._allowMouseDrag||e.pointerType!==MSPointerEvent.MSPOINTER_TYPE_MOUSE)&&("setCapture"in this._touchPanel&&this._touchPanel.setCapture(!0),this._offsetTouchPrevPos=this._offsetTouchStartPos=null,this._touchStarted=!0)},r.prototype._getOffsetTouchDelta=function(e){return null},r.prototype.onTouchMouseMove=function(e){if(this._touchStarted){this._offsetTouchStartPos||(this._offsetTouchPrevPos=this._offsetTouchStartPos=this._getMouseOffset(e));var t=this._getOffsetTouchDelta(e);0!==t&&(this.scrollBy(-t/this._getRunningSize(!1)*this.viewSize),this._offsetTouchPrevPos=this._getMouseOffset(e)),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0}},r.prototype.onTouchMouseUp=function(e,t){if(this._touchStarted&&this._offsetTouchStartPos){var i=this._getMouseOffset(e);!t&&(Math.abs(this._offsetTouchStartPos.x-i.x)>3||Math.abs(this._offsetTouchStartPos.y-i.y)>3)&&(e.preventDefault&&e.preventDefault(),e.cancelBubble=!0)}"releaseCapture"in this._touchPanel&&this._touchPanel.releaseCapture(),this._touchStarted=!1},r.prototype.registerElementForMouseWheelScrolling=function(e){var t=this;e.addEventListener("mousewheel",function(e){t.onMouseWheel(e)}),e.addEventListener("DOMMouseScroll",function(e){t.onFireFoxMouseWheel(e)})},r.prototype.createView=function(e){this._element=document.createElement("div"),this._element.className=r.className,this._element.setAttribute("drag-resize-disabled","true"),e.appendChild(this._element),this._minButton=new a(this,-1),this._maxButton=new a(this,1),this._middleBar=document.createElement("div"),this._middleBar.className=r.barClassName,this._element.appendChild(this._middleBar)},r.prototype.scrollTo=function(e){var i=Math.min(this.max-this.viewSize,Math.max(this.min,e));i!==this.viewMin&&(this.viewMin=i,t(this._onscroll,null))},r.prototype._scrollByPage=function(e){},r.prototype._getRunningSize=function(e){return null},r.prototype._getOffsetDelta=function(e){return null},r.prototype.scroll=function(e){var t=this._getOffsetDelta(e)/this._getRunningSize(!0)*(this.max-this.min);if(0>t){if(this._getScreenMousePos(e)>=this._screenMaxMousePos)return}else if(t>0&&this._getScreenMousePos(e)<=this._screenMinMousePos)return;this.scrollBy(t)},Object.defineProperty(r.prototype,"actualWidth",{get:function(){return void 0===this._actualWidth&&this.arrange(),this._actualWidth},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualHeight",{get:function(){return void 0===!this._actualHeight&&this.arrange(),this._actualHeight},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualButtonWidth",{get:function(){return void 0===!this._actualButtonWidth&&this.arrange(),this._actualButtonWidth},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"actualButtonHeight",{get:function(){return void 0===!this._actualButtonHeight&&this.arrange(),this._actualButtonHeight},enumerable:!0,configurable:!0}),r.prototype.arrange=function(){this._actualWidth||(this._actualWidth=this._element.offsetWidth,this._actualHeight=this._element.offsetHeight,this._actualButtonWidth=this._calculateButtonWidth(),this._actualButtonHeight=this._calculateButtonHeight(),this._minButton.arrange(this._actualButtonWidth,this._actualButtonHeight,this._getMinButtonAngle()),this._maxButton.arrange(this._actualButtonWidth,this._actualButtonHeight,this._getMaxButtonAngle()),this._setMaxButtonPosition())},r.prototype._calculateButtonWidth=function(){return null},r.prototype._calculateButtonHeight=function(){return null},r.prototype._getMinButtonAngle=function(){return null},r.prototype._getMaxButtonAngle=function(){return null},r.prototype._setMaxButtonPosition=function(){},r.prototype.invalidateArrange=function(){this._actualWidth=void 0,this._actualHeight=void 0,this._actualButtonWidth=void 0,this._actualButtonHeight=void 0},r.prototype.onHoldBackgroundMouseDown=function(e){var t=this,i=this._timerHandle?r.ScrollbarBackgroundMousedownHoldDelay:r.ScrollbarBackgroundFirstTimeMousedownHoldDelay;this._timerHandle=setTimeout(function(){t.onBackgroundMouseDown(e)},i)},r.prototype.onBackgroundMouseDown=function(e){var t=this;clearTimeout(this._timerHandle),this._backgroundMouseUpWrapper||(e.cancelBubble=!0,this._backgroundMouseUpWrapper=function(e){t.onBackgroundMouseUp(e)},r.addDocumentMouseUpEvent(this._backgroundMouseUpWrapper)),this._scrollByPage(e),this.refresh(),this.onHoldBackgroundMouseDown(e),e.preventDefault&&e.preventDefault()},r.prototype.onBackgroundMouseUp=function(e){clearTimeout(this._timerHandle),this._timerHandle=void 0,r.removeDocumentMouseUpEvent(this._backgroundMouseUpWrapper),this._backgroundMouseUpWrapper=void 0},r.prototype.getPinchZoomY=function(){return document.documentElement.clientHeight/window.innerHeight},r.prototype.onMiddleBarMouseDown=function(t){t.cancelBubble=!0,this._screenPrevMousePos={x:t.screenX,y:t.screenY},this._screenMinMousePos=this._getScreenMousePos(t)-(this._getScreenContextualLeft(this._middleBar)-this._getScreenContextualRight(this._minButton.element)),this._screenMaxMousePos=this._getScreenMousePos(t)+(this._getScreenContextualLeft(this._maxButton.element)-this._getScreenContextualRight(this._middleBar)),this._screenToOffsetScale=e.HTMLElementUtils.getAccumulatedScale(this.element)*this.getPinchZoomY();var i=this;this._middleBarMouseMoveWrapper=function(e){i.onMiddleBarMouseMove(e)},r.addDocumentMouseMoveEvent(this._middleBarMouseMoveWrapper),this._middleBarMouseUpWrapper=function(e){i.onMiddleBarMouseUp(e)},r.addDocumentMouseUpEvent(this._middleBarMouseUpWrapper),t.preventDefault&&t.preventDefault()},r.prototype.onMiddleBarMouseMove=function(e){this._screenPrevMousePos&&(this.scroll(e),this.refresh(),this._screenPrevMousePos={x:e.screenX,y:e.screenY})},r.prototype.onMiddleBarMouseUp=function(e){this._screenPrevMousePos=void 0,r.removeDocumentMouseMoveEvent(this._middleBarMouseMoveWrapper),this._middleBarMouseMoveWrapper=void 0,r.removeDocumentMouseUpEvent(this._middleBarMouseUpWrapper),this._middleBarMouseUpWrapper=void 0,e.preventDefault&&e.preventDefault()},r.prototype._getScreenContextualLeft=function(e){return null},r.prototype._getScreenContextualRight=function(e){return null},r.prototype.onMouseWheel=function(e){e.wheelDelta&&this.mouseWheel(e.wheelDelta)},r.prototype.onFireFoxMouseWheel=function(e){e.detail&&this.mouseWheel(-e.detail)},r.prototype.mouseWheel=function(e){this.visible&&(0>e?e=Math.min(-r.MouseWheelRange,e):e>0&&(e=Math.max(r.MouseWheelRange,e)),this.scrollBy(-e/r.MouseWheelRange*this.smallIncrement))},r.prototype._getScreenMousePos=function(e){return null},r.addDocumentMouseUpEvent=function(e){document.addEventListener("mouseup",e)},r.removeDocumentMouseUpEvent=function(e){document.removeEventListener("mouseup",e)},r.addDocumentMouseMoveEvent=function(e){document.addEventListener("mousemove",e)},r.removeDocumentMouseMoveEvent=function(e){document.removeEventListener("mousemove",e)},r.DefaultScrollbarWidth="15px",r.ScrollbarBackgroundFirstTimeMousedownHoldDelay=500,r.ScrollbarBackgroundMousedownHoldDelay=50,r.MouseWheelRange=120,r.className="scroll-bar-div",r.barClassName="scroll-bar-part-bar",r.arrowClassName="scroll-bar-part-arrow",r}();e.Scrollbar=r;var n=function(t){function i(e){t.call(this,e),this.height=r.DefaultScrollbarWidth}return __extends(i,t),i.prototype._calculateButtonWidth=function(){return Math.min(this.actualWidth/2,Math.max(this.actualHeight,a.MIN_WIDTH))},i.prototype._calculateButtonHeight=function(){return this.actualHeight},i.prototype._getMinButtonAngle=function(){return-180},i.prototype._getMaxButtonAngle=function(){return 0},i.prototype._setMaxButtonPosition=function(){e.HTMLElementUtils.setElementLeft(this.maxButton.element,this.actualWidth-this.actualButtonWidth)},i.prototype.refresh=function(){this.arrange();var t=this.actualWidth-2*this.actualButtonWidth-2,i=this.viewSize/(this.max-this.min)*t;i<this.MIN_BAR_SIZE&&(t-=this.MIN_BAR_SIZE-i,i=this.MIN_BAR_SIZE),0>t&&(t=0,i=0),i=Math.min(i,t);var a=this.viewMin/(this.max-this.min)*t;e.HTMLElementUtils.setElementWidth(this.middleBar,i),e.HTMLElementUtils.setElementHeight(this.middleBar,this.actualHeight),e.HTMLElementUtils.setElementLeft(this.middleBar,this.actualButtonWidth+1+a)},i.prototype.show=function(i){i!==this.visible&&(t.prototype.show.call(this,i),i?this.element.style.height=this.height:e.HTMLElementUtils.setElementHeight(this.element,0))},i.prototype._scrollByPage=function(e){var t=this.middleBar.offsetLeft,i=t+this.middleBar.offsetWidth,a=void 0===e.offsetX?e.layerX:e.offsetX;a>i?this.scrollPageDown():t>a&&this.scrollPageUp()},i.prototype._getRunningSize=function(e){var t=this.actualWidth;if(e){var i=this.actualButtonWidth+1;t-=2*i;var a=t*(this.viewSize/(this.max-this.min));a<this.MIN_BAR_SIZE&&(t-=this.MIN_BAR_SIZE-a)}return t},i.prototype._getOffsetDelta=function(e){return this._getOffsetXDelta(e)},i.prototype._getOffsetTouchDelta=function(e){return this._getOffsetXTouchDelta(e)},i.prototype._getScreenContextualLeft=function(e){return e.getBoundingClientRect().left},i.prototype._getScreenContextualRight=function(e){return e.getBoundingClientRect().right},i.prototype._getScreenMousePos=function(e){return e.screenX},i}(r);e.HorizontalScrollbar=n;var o=function(t){function i(e){t.call(this,e),this.width=r.DefaultScrollbarWidth}return __extends(i,t),i.prototype._calculateButtonWidth=function(){return this.actualWidth},i.prototype._calculateButtonHeight=function(){return Math.min(this.actualHeight/2,Math.max(this.actualWidth,a.MIN_WIDTH))},i.prototype._getMinButtonAngle=function(){return-90},i.prototype._getMaxButtonAngle=function(){return 90},i.prototype._setMaxButtonPosition=function(){e.HTMLElementUtils.setElementTop(this.maxButton.element,this.actualHeight-this.actualButtonHeight)},i.prototype.refresh=function(){this.arrange();var t=this.actualHeight-2*this.actualButtonHeight-2,i=this.viewSize/(this.max-this.min)*t;i<this.MIN_BAR_SIZE&&(t-=this.MIN_BAR_SIZE-i,i=this.MIN_BAR_SIZE),0>t&&(t=0,i=0);var a=this.viewMin/(this.max-this.min)*t;e.HTMLElementUtils.setElementWidth(this.middleBar,this.actualWidth),e.HTMLElementUtils.setElementHeight(this.middleBar,i),e.HTMLElementUtils.setElementTop(this.middleBar,this.actualButtonHeight+1+a)},i.prototype.show=function(i){i!==this.visible&&(t.prototype.show.call(this,i),i?this.element.style.width=this.width:e.HTMLElementUtils.setElementWidth(this.element,0))},i.prototype._scrollByPage=function(e){var t=this.middleBar.offsetTop,i=t+this.middleBar.offsetHeight,a=void 0===e.offsetY?e.layerY:e.offsetY;a>i?this.scrollPageDown():t>a&&this.scrollPageUp()},i.prototype._getRunningSize=function(e){var t=this.actualHeight;if(e){var i=this.actualButtonHeight+1;t-=2*i;var a=t*(this.viewSize/(this.max-this.min));a<this.MIN_BAR_SIZE&&(t-=this.MIN_BAR_SIZE-a)}return t},i.prototype._getOffsetDelta=function(e){return this._getOffsetYDelta(e)},i.prototype._getOffsetTouchDelta=function(e){return this._getOffsetYTouchDelta(e)},i.prototype._getScreenContextualLeft=function(e){return e.getBoundingClientRect().top},i.prototype._getScreenContextualRight=function(e){return e.getBoundingClientRect().bottom},i.prototype._getScreenMousePos=function(e){return e.screenY},i}(r);e.VerticalScrollbar=o}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){var i="unselectable",a=function(){function e(e,t){this._element=e,this._handler=t,this._elementMouseDownWrapper=null,this._elementMouseMoveWrapper=null,this._elementMouseOutWrapper=null,this._documentMouseMoveWrapper=null,this._documentMouseUpWrapper=null,this._startMousePosition=null,this._originalCursor=null}return e.addDocumentMouseUpEvent=function(e){document.addEventListener("mouseup",e)},e.removeDocumentMouseUpEvent=function(e){document.removeEventListener("mouseup",e)},e.addDocumentMouseMoveEvent=function(e){document.addEventListener("mousemove",e)},e.removeDocumentMouseMoveEvent=function(e){document.removeEventListener("mousemove",e)},e.getMouseCoordinates=function(e){return{x:e.pageX,y:e.pageY}},e.getMouseCoordinateDelta=function(e,t){return{x:t.x-e.x,y:t.y-e.y}},e.prototype.initialize=function(){var e=this;this._elementMouseDownWrapper=function(t){return e.onElementMouseDown(t)},this._element.addEventListener("mousedown",this._elementMouseDownWrapper),this._elementMouseMoveWrapper=function(t){return e.onElementMouseMove(t)},this._element.addEventListener("mousemove",this._elementMouseMoveWrapper),this._elementMouseOutWrapper=function(t){return e.onElementMouseOut(t)},this._element.addEventListener("mouseout",this._elementMouseOutWrapper),this._elementMouseDoubleClickOutWrapper=function(t){return e.onElementMouseDoubleClick(t)},this._element.addEventListener("dblclick",this._elementMouseDoubleClickOutWrapper)},e.prototype.uninitialize=function(){this._element.removeEventListener("mousedown",this._elementMouseDownWrapper),this._elementMouseDownWrapper=null,this._element.removeEventListener("mousemove",this._elementMouseMoveWrapper),this._elementMouseMoveWrapper=null,this._element.removeEventListener("mouseout",this._elementMouseOutWrapper),this._elementMouseOutWrapper=null,this._element.removeEventListener("dblclick",this._elementMouseDoubleClickOutWrapper),this._elementMouseDoubleClickOutWrapper=null},Object.defineProperty(e.prototype,"cell",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),e.prototype._hotSpot=function(e){return!1},e.prototype.onElementMouseDown=function(t){var i=this,a=e.getMouseCoordinates(t);this._hotSpot(a)&&("setCapture"in this._element&&this._element.setCapture(),t.cancelBubble=!0,this._startMousePosition=a,this._documentMouseMoveWrapper=function(e){return i.onDocumentMouseMove(e)},e.addDocumentMouseMoveEvent(this._documentMouseMoveWrapper),this._documentMouseUpWrapper=function(e){return i.onDocumentMouseUp(e)},e.addDocumentMouseUpEvent(this._documentMouseUpWrapper),document.documentElement&&(this._originalCursor=document.documentElement.style.cursor,document.documentElement.style.cursor=e.resizeCursor),this._handler.onStartResize(this.cell,this._startMousePosition.x,this._startMousePosition.y))},e.prototype.onElementMouseMove=function(t){this._startMousePosition||(this._hotSpot(e.getMouseCoordinates(t))?null===this._originalCursor&&(this._originalCursor=this._element.style.cursor,this._element.style.cursor=e.resizeCursor):null!==this._originalCursor&&(this._element.style.cursor=this._originalCursor,this._originalCursor=null))},e.prototype.onElementMouseOut=function(e){this._startMousePosition||null!==this._originalCursor&&(this._element.style.cursor=this._originalCursor,this._originalCursor=null)},e.prototype.onElementMouseDoubleClick=function(t){this._hotSpot(e.getMouseCoordinates(t))&&this._handler.onReset(this.cell)},e.prototype.onDocumentMouseMove=function(t){if(this._startMousePosition){var i=e.getMouseCoordinateDelta(this._startMousePosition,e.getMouseCoordinates(t));this._handler.onResize(this.cell,i.x,i.y)}},e.prototype.onDocumentMouseUp=function(t){this._startMousePosition=null,"releaseCapture"in this._element&&this._element.releaseCapture(),e.removeDocumentMouseMoveEvent(this._documentMouseMoveWrapper),this._documentMouseMoveWrapper=null,e.removeDocumentMouseUpEvent(this._documentMouseUpWrapper),this._documentMouseUpWrapper=null,document.documentElement&&(document.documentElement.style.cursor=this._originalCursor),t.preventDefault&&t.preventDefault(),this._handler.onEndResize(this.cell)},e.resizeHandleSize=4,e.resizeCursor="e-resize",e}();t.TablixResizer=a;var r=function(e){function t(t,i,a){this._cell=t,e.call(this,i,a)}return __extends(t,e),Object.defineProperty(t.prototype,"cell",{get:function(){return this._cell},enumerable:!0,configurable:!0}),t.prototype._hotSpot=function(e){return e.x>=this.element.getBoundingClientRect().right-a.resizeHandleSize},t}(a);t.TablixDomResizer=r;var n=function(){function i(e,a){this._tableCell=null,this._contentElement=t.TablixUtils.createDiv(),this._contentElement.style.position="relative",e||this._contentElement.style.setProperty("float","left"),this._contentHost=t.TablixUtils.createDiv(),this._contentHost.style.position="relative",this._contentHost.style.textOverflow="ellipsis",1===a&&(this._contentHost.style.paddingRight="2px",this._contentHost.style.height="100%"),this._contentElement.appendChild(this._contentHost),this._resizer=null,i.addNoMarginStyle()}return i.prototype.initialize=function(e){this._owner=e},Object.defineProperty(i.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),i.prototype.registerTableCell=function(e){this._tableCell=e,e.appendChild(this._contentElement),e.className=i._noMarginsStyleName,e.style.verticalAlign="top",e.style.lineHeight="normal"},Object.defineProperty(i.prototype,"tableCell",{get:function(){return this._tableCell},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentElement",{get:function(){return this._contentElement},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentHost",{get:function(){return this._contentHost},enumerable:!0,configurable:!0}),i.prototype.registerClickHandler=function(e){this._contentElement.onclick=e},i.prototype.unregisterClickHandler=function(){this._contentElement.onclick=null},i.prototype.onContentWidthChanged=function(t){e.HTMLElementUtils.setElementWidth(this._contentElement,t)},i.prototype.onContentHeightChanged=function(t){e.HTMLElementUtils.setElementHeight(this._contentElement,t)},i.prototype.onColumnSpanChanged=function(e){this._tableCell.colSpan=e},i.prototype.onRowSpanChanged=function(e){this._tableCell.rowSpan=e},i.prototype.onTextAlignChanged=function(e){this._tableCell.style.textAlign=e},i.prototype.setColumnSeparator=function(e,i){this._tableCell.style.borderLeft=i+t.TablixUtils.UnitOfMeasurement+" "+t.TablixUtils.DefaultColumnSeparatorStyle+" "+e},i.prototype.setFontColor=function(e){this._tableCell.style.color=e},i.prototype.setBackgroundColor=function(e){this._tableCell.style.backgroundColor=e},i.prototype.setRowSeparator=function(){this._tableCell.style.borderBottom=t.TablixUtils.DefaultRowSeparatorWeight+t.TablixUtils.UnitOfMeasurement+" "+t.TablixUtils.DefaultRowSeparatorStyle+" "+t.TablixUtils.DefaultRowSeparatorColor},i.prototype.setOutline=function(e,t,i){this._tableCell.style.borderStyle=e,this._tableCell.style.borderColor=t,this._tableCell.style.borderWidth=i},i.prototype.setLeadingSpace=function(e){this._tableCell.style.paddingTop=e+t.TablixUtils.UnitOfMeasurement},i.prototype.onClear=function(){this._contentHost.className="",this._contentHostStyle="",this._tableCell.className=i._noMarginsStyleName,this._containerStyle=""},i.prototype.onHorizontalScroll=function(t,i){e.HTMLElementUtils.setElementLeft(this._contentHost,i),e.HTMLElementUtils.setElementWidth(this._contentHost,t)},i.prototype.onVerticalScroll=function(t,i){e.HTMLElementUtils.setElementTop(this._contentHost,i),e.HTMLElementUtils.setElementHeight(this._contentHost,t)},i.prototype.onInitializeScrolling=function(){e.HTMLElementUtils.setElementLeft(this._contentHost,0),e.HTMLElementUtils.setElementTop(this._contentHost,0),e.HTMLElementUtils.setElementWidth(this._contentHost,-1),e.HTMLElementUtils.setElementHeight(this._contentHost,-1)},i.prototype.setContentHostStyle=function(e){this._contentHostStyle!==e&&(this._contentHostStyle=e,this._contentHost.className=this._contentHostStyle)},i.prototype.setContainerStyle=function(e){this._containerStyle!==e&&(this._containerStyle=e,this._tableCell.className=this._containerStyle+" "+i._noMarginsStyleName)},i.prototype.clearContainerStyle=function(){this._containerStyle=void 0,this._tableCell.className!==i._noMarginsStyleName&&(this._tableCell.className=i._noMarginsStyleName),this._tableCell.style.border="",this._tableCell.style.background="",this._tableCell.style.color=""},i.prototype.clearTextAndTooltip=function(){this.contentHost.textContent="",this.contentHost.removeAttribute("title")},i.prototype.setTextAndTooltip=function(e){this.contentHost.textContent=e,this.contentHost.title=e},i.prototype.enableHorizontalResize=function(e,t){e!==(null!==this._resizer)&&(e?(this._resizer=new r(this._owner,this._tableCell,t),this._resizer.initialize()):(this._resizer.uninitialize(),this._resizer=null))},i.addNoMarginStyle=function(){if(!i._noMarginsStyle){var e=document.createElement("style");e.appendChild(document.createTextNode("."+i._noMarginsStyleName+"{ padding: 0px; margin: 0px}")),document.head.appendChild(e),i._noMarginsStyle=e}},i.prototype.disableDragResize=function(){this._tableCell.setAttribute(i._dragResizeDisabledAttributeName,"true")},i._noMarginsStyleName="bi-tablix-cellNoMarginStyle",i._dragResizeDisabledAttributeName="drag-resize-disabled",i}();t.TablixCellPresenter=n;var o=function(){function e(e){this._tableRow=null,this._fitProportionally=e}return e.prototype.initialize=function(e){this._row=e},e.prototype.createCellPresenter=function(e){return new n(this._fitProportionally,e)},e.prototype.registerRow=function(e){this._tableRow=e},e.prototype.onAppendCell=function(e){var t=e._presenter;if(null===t.tableCell){var i=this._tableRow.insertCell(-1);t.registerTableCell(i)}else this._tableRow.appendChild(t.tableCell)},e.prototype.onInsertCellBefore=function(e,t){var i=e._presenter;if(null===i.tableCell){var a=this._tableRow.insertCell(Math.max(0,t._presenter.tableCell.cellIndex-1));i.registerTableCell(a)}else this._tableRow.insertBefore(e._presenter.tableCell,t._presenter.tableCell)},e.prototype.onRemoveCell=function(e){this._tableRow.removeChild(e._presenter.tableCell)},e.prototype.getHeight=function(){return this.getCellHeight(this._row.getTablixCell())},e.prototype.getCellHeight=function(e){return-1},e.prototype.getCellContentHeight=function(e){return-1},Object.defineProperty(e.prototype,"tableRow",{get:function(){return this._tableRow},enumerable:!0,configurable:!0}),e}();t.TablixRowPresenter=o;var s=function(e){function t(t,i){e.call(this,i),this._gridPresenter=t}return __extends(t,e),t.prototype.getCellHeight=function(e){return this._gridPresenter.sizeComputationManager.cellHeight},t.prototype.getCellContentHeight=function(e){return this._gridPresenter.sizeComputationManager.contentHeight},t}(o);t.DashboardRowPresenter=s;var l=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.getCellHeight=function(t){return t._presenter?e.HTMLElementUtils.getElementHeight(t._presenter.tableCell):0},i.prototype.getCellContentHeight=function(t){return t._presenter?e.HTMLElementUtils.getElementHeight(t._presenter.contentElement):0},i}(o);t.CanvasRowPresenter=l;var u=function(){function e(){}return e.prototype.initialize=function(e){this._column=e},e.prototype.getWidth=function(){return this.getCellWidth(this._column.getTablixCell())},e.prototype.getCellWidth=function(e){return-1},e.prototype.getCellContentWidth=function(e){return-1},e}();t.TablixColumnPresenter=u;var c=function(e){function t(t){e.call(this),this._gridPresenter=t}return __extends(t,e),t.prototype.getCellWidth=function(e){return this._gridPresenter.sizeComputationManager.cellWidth},t.prototype.getCellContentWidth=function(e){return this._gridPresenter.sizeComputationManager.contentWidth},t}(u);t.DashboardColumnPresenter=c;var h=function(t){function i(e,i){t.call(this),this._gridPresenter=e,this._columnIndex=i}return __extends(i,t),i.prototype.getCellWidth=function(t){var i=this._gridPresenter.getPersistedCellWidth(this._columnIndex);return _.isNumber(i)?i:t._presenter?e.HTMLElementUtils.getElementWidth(t._presenter.tableCell):0},i.prototype.getCellContentWidth=function(t){var i=this._gridPresenter.getPersistedCellWidth(this._columnIndex);return _.isNumber(i)?i:t._presenter?e.HTMLElementUtils.getElementWidth(t._presenter.contentElement):0},i}(u);t.CanvasColumnPresenter=h;var d=function(){function a(e){this._table=t.TablixUtils.createTable(),this._table.className=i,this._footerTable=t.TablixUtils.createTable(),this._footerTable.className=i,this._columnWidthManager=e}return a.prototype.initialize=function(e,t,i,a){this._owner=e,t.appendChild(this._table),i.appendChild(this._footerTable)},a.prototype.getWidth=function(){return-1},a.prototype.getHeight=function(){return-1},a.prototype.getScreenToCssRatioX=function(){return 1},a.prototype.getScreenToCssRatioY=function(){return 1},a.prototype.createRowPresenter=function(){return null},a.prototype.createColumnPresenter=function(e){return null},a.prototype.onAppendRow=function(e){var t=e.presenter;if(null===t.tableRow){var i=this._table.insertRow(-1);t.registerRow(i)}else this._table.tBodies[0].appendChild(e.presenter.tableRow)},a.prototype.onInsertRowBefore=function(e,t){var i=e.presenter;if(null===i.tableRow){var a=this._table.insertRow(Math.max(0,t.presenter.tableRow.rowIndex-1));i.registerRow(a)}else this._table.tBodies[0].insertBefore(e.presenter.tableRow,t.presenter.tableRow)},a.prototype.onRemoveRow=function(e){this._table.tBodies[0].removeChild(e.presenter.tableRow)},a.prototype.onAddFooterRow=function(e){var t=e.presenter;if(null===t.tableRow){var i=this._footerTable.insertRow(-1);t.registerRow(i)}else this._footerTable.tBodies[0].appendChild(e.presenter.tableRow)},a.prototype.onClear=function(){e.HTMLElementUtils.clearChildren(this._table),e.HTMLElementUtils.clearChildren(this._footerTable)},a.prototype.onFillColumnsProportionallyChanged=function(e){e?(this._table.style.width="100%",this._footerTable.style.width="100%"):(this._table.style.width="auto",this._footerTable.style.width="auto")},a.prototype.invokeColumnResizeCallBack=function(e,t){this._columnWidthManager&&this._columnWidthManager.columnWidthResizeCallback(e,t)},a.prototype.getPersistedCellWidth=function(e){return this._columnWidthManager?this._columnWidthManager.getPersistedCellWidth(e):void 0},a}();t.TablixGridPresenter=d;var p=function(e){function t(t){e.call(this),this._sizeComputationManager=t}return __extends(t,e),t.prototype.createRowPresenter=function(){return new s(this,this._owner.fillColumnsProportionally)},t.prototype.createColumnPresenter=function(e){return new c(this)},Object.defineProperty(t.prototype,"sizeComputationManager",{get:function(){return this._sizeComputationManager},enumerable:!0,configurable:!0}),t.prototype.getWidth=function(){return this._sizeComputationManager.gridWidth},t.prototype.getHeight=function(){return this._sizeComputationManager.gridHeight},t}(d);t.DashboardTablixGridPresenter=p;var g=function(t){function i(e){t.call(this,e)}return __extends(i,t),i.prototype.createRowPresenter=function(){return new l(this._owner.fillColumnsProportionally)},i.prototype.createColumnPresenter=function(e){return new h(this,e)},i.prototype.getWidth=function(){return e.HTMLElementUtils.getElementWidth(this._table)},i.prototype.getHeight=function(){return e.HTMLElementUtils.getElementHeight(this._table)},i}(d);t.CanvasTablixGridPresenter=g}(t=e.internal||(e.internal={}))}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){var i;!function(t){var i=function(){function e(e){this._binder=e,this._adjustmentFactor=1}return e.prototype._getOwner=function(){return null},Object.defineProperty(e.prototype,"binder",{get:function(){return this._binder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustmentFactor",{get:function(){return this._adjustmentFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsToRealizeCount",{get:function(){return this._itemsToRealizeCount},set:function(e){this._itemsToRealizeCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemsEstimatedContextualWidth",{get:function(){return this._itemsEstimatedContextualWidth},set:function(e){this._itemsEstimatedContextualWidth=e},enumerable:!0,configurable:!0}),e.prototype.onStartRenderingIteration=function(){var e=this._getOwner();e.measureEnabled&&!e.done&&this._getEstimatedItemsToRealizeCount(),this._realizedLeavesCount=0},e.prototype.onEndRenderingIteration=function(e,t){t||this._getOwner().allItemsRealized||(this._adjustmentFactor*=this._getSizeAdjustment(e))},e.prototype.onEndRenderingSession=function(){this._adjustmentFactor=1},e.prototype.onCornerCellRealized=function(e,t){},e.prototype.onHeaderRealized=function(e,t,i){i&&this._realizedLeavesCount++},Object.defineProperty(e.prototype,"needsToRealize",{get:function(){return this._realizedLeavesCount<this._itemsToRealizeCount},enumerable:!0,configurable:!0}),e.prototype._getEstimatedItemsToRealizeCount=function(){},e.prototype._getSizeAdjustment=function(e){return 1},e}();t.TablixDimensionRealizationManager=i;var a=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),Object.defineProperty(t.prototype,"owner",{set:function(e){this._owner=e},enumerable:!0,configurable:!0}),t.prototype._getOwner=function(){return this._owner},t.prototype._getEstimatedItemsToRealizeCount=function(){this.estimateRowsToRealizeCount()},t.prototype.estimateRowsToRealizeCount=function(){return this._owner.dimension.model?void(this._owner.alignToEnd?this.itemsToRealizeCount=this._owner.dimension.getItemsCount()-this._owner.dimension.getIntegerScrollOffset()+1:this.itemsToRealizeCount=Math.ceil(this._owner.contextualWidthToFill/(this._owner.owner.getEstimatedRowHeight()*this.adjustmentFactor)+this._owner.dimension.getFractionScrollOffset())-this._owner.otherLayoutManager.dimension.getDepth()+1):void(this.itemsToRealizeCount=0)},t.prototype.getEstimatedRowHierarchyWidth=function(){if(!this._owner.dimension.model||0===this._owner.dimension.getItemsCount())return 0;var e=new n;this.updateRowHiearchyEstimatedWidth(this._owner.dimension.model,this._owner.dimension._hierarchyNavigator.getIndex(this._owner.dimension.getFirstVisibleItem(0)),e);for(var t=e.items,i=t.length,a=0,r=0;i>r;r++){var o=t[r];a+=0!==o.maxNonLeafWidth?o.maxNonLeafWidth:o.maxLeafWidth}return a},t.prototype.updateRowHiearchyEstimatedWidth=function(e,t,i){for(var a=this._owner.owner.owner.hierarchyNavigator,r=this.binder,n=a.getCount(e),s=t;n>s;s++){if(i.leafCount===this.itemsToRealizeCount)return;var l=a.getAt(e,s),u=r.getHeaderLabel(l),c=this._owner.getEstimatedHeaderWidth(u,t),h=a.isLeaf(l),d=a.getLevel(l),p=i.items[d];p||(p=new o,i.items[d]=p),h?(p.maxLeafWidth=Math.max(p.maxLeafWidth,c),i.leafCount=i.leafCount+1):(p.maxNonLeafWidth=Math.max(p.maxNonLeafWidth,c),this.updateRowHiearchyEstimatedWidth(a.getChildren(l),this._owner.dimension.getFirstVisibleChildIndex(l),i))}},t.prototype._getSizeAdjustment=function(e){return e/((this._owner.getRealizedItemsCount()-this._owner.dimension.getFractionScrollOffset())*this._owner.owner.getEstimatedRowHeight())},t}(i);t.RowRealizationManager=a;var r=function(i){function a(){i.apply(this,arguments)}return __extends(a,i),Object.defineProperty(a.prototype,"owner",{set:function(e){this._owner=e},enumerable:!0,configurable:!0}),a.prototype._getOwner=function(){return this._owner},a.prototype._getEstimatedItemsToRealizeCount=function(){this.estimateColumnsToRealizeCount(this.getEstimatedRowHierarchyWidth());
},Object.defineProperty(a.prototype,"rowRealizationManager",{get:function(){return this._owner.otherLayoutManager.realizationManager},enumerable:!0,configurable:!0}),a.prototype.getEstimatedRowHierarchyWidth=function(){return this._owner.otherLayoutManager.done?this._owner.getOtherHierarchyContextualHeight():this.rowRealizationManager.getEstimatedRowHierarchyWidth()*this.adjustmentFactor},a.prototype.estimateColumnsToRealizeCount=function(i){var a=this._owner.contextualWidthToFill-i;if(!this._owner.dimension.model||e.Double.lessOrEqualWithPrecision(a,0,t.DimensionLayoutManager._pixelPrecision))return void(this.itemsToRealizeCount=0);var r=this.binder,n=this._owner.owner.owner.hierarchyNavigator,o=this._owner.dimension.getIntegerScrollOffset(),s=this._owner.dimension.getItemsCount(),l=s-o,u=this._owner.otherLayoutManager.dimension.getIntegerScrollOffset(),c=this._owner.otherLayoutManager.dimension.getItemsCount();if(this.itemsEstimatedContextualWidth=0,this._owner.alignToEnd)return void(this.itemsToRealizeCount=l);for(var h=o;s>h;h++){if(e.Double.greaterOrEqualWithPrecision(this.itemsEstimatedContextualWidth,a,t.DimensionLayoutManager._pixelPrecision))return void(this.itemsToRealizeCount=h-o);var d=0,p=void 0;p=h===o?this._owner.getVisibleSizeRatio():1;var g=n.getLeafAt(this._owner.dimension.model,h),m=r.getHeaderLabel(g);d=Math.max(d,this._owner.getEstimatedHeaderWidth(m,h));for(var f=u;c>f;f++){var y=n.getIntersection(n.getLeafAt(this._owner.otherLayoutManager.dimension.model,f),g);m=r.getCellContent(y),d=Math.max(d,this._owner.getEstimatedBodyCellWidth(m))}this.itemsEstimatedContextualWidth+=d*p*this.adjustmentFactor}this.itemsToRealizeCount=l},a.prototype._getSizeAdjustment=function(e){return e/(this.getEstimatedRowHierarchyWidth()+this.itemsEstimatedContextualWidth)},a}(i);t.ColumnRealizationManager=r;var n=function(){function e(){this.items=[],this.leafCount=0}return e}();t.RowWidths=n;var o=function(){function e(){this.maxLeafWidth=0,this.maxNonLeafWidth=0}return e}();t.RowWidth=o}(i=t.internal||(t.internal={}))}(i=t.controls||(t.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e,t,i){this._scrollable=!1,this._presenter=e,this.extension=t,this._presenter.initialize(this),this._row=i,this.item=null,this.type=null,this._horizontalOffset=0,this._verticalOffset=0,this._colSpan=1,this._rowSpan=1,this._contentWidth=-1,this._contentHeight=-1}return Object.defineProperty(e.prototype,"colSpan",{get:function(){return this._colSpan},set:function(e){this._colSpan!==e&&(this._presenter.onColumnSpanChanged(e),this._colSpan=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowSpan",{get:function(){return this._rowSpan},set:function(e){this._rowSpan!==e&&(this._presenter.onRowSpanChanged(e),this._rowSpan=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textAlign",{get:function(){return this._textAlign},set:function(e){e!==this._textAlign&&(this._presenter.onTextAlignChanged(e),this._textAlign=e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontalOffset",{get:function(){return this._horizontalOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalOffset",{get:function(){return this._verticalOffset},enumerable:!0,configurable:!0}),e.prototype.isScrollable=function(){return this._scrollable},e.prototype.clear=function(){this.isScrollable()&&this.initializeScrolling(),this._presenter.onClear(),this.setContentWidth(-1),this.setContentHeight(-1)},e.prototype.initializeScrolling=function(){this._presenter.onInitializeScrolling(),this._horizontalOffset=0,this._verticalOffset=0,this.setContentWidth(-1),this.setContentHeight(-1)},e.prototype.prepare=function(e){this.isScrollable()&&this.initializeScrolling(),this._scrollable=e},e.prototype.scrollVertically=function(e,t){if(this.isScrollable()){var i=-e*t;this._verticalOffset=i,this._presenter.onVerticalScroll(e,i),this.setContentHeight(e+i)}},e.prototype.scrollHorizontally=function(e,t){if(this.isScrollable()){var i=-e*t;this._horizontalOffset=i,this._presenter.onHorizontalScroll(e,i),this.setContentWidth(e+i)}},e.prototype.setContentWidth=function(e){e!==this._contentWidth&&(this._contentWidth=e,this._presenter.onContentWidthChanged(e))},e.prototype.setContentHeight=function(e){e!==this._contentHeight&&(this._contentHeight=e,this._presenter.onContentHeightChanged(e))},e.prototype.enableHorizontalResize=function(e,t){this._presenter.enableHorizontalResize(e,t)},e}();e.TablixCell=t;var i=function(){function e(e,t){this._presenter=e,this._presenter.initialize(this),this._contentWidth=-1,this._width=-1,this._sizeFixed=!1,this._aligningWidth=-1,this._fixedToAligningWidth=!1,this._items=[],this._itemType=null,this._footerCell=null,this._columnIndex=t}return e.prototype.initialize=function(e){this._owner=e,this._realizedRowHeaders=[],this._realizedColumnHeaders=[],this._realizedCornerCells=[],this._realizedBodyCells=[]},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),e.prototype.getType=function(){return this._realizedCornerCells.length>0?0:2},e.prototype.getColumnHeadersOrCorners=function(){return this._realizedCornerCells.length>0?this._realizedCornerCells:this._realizedColumnHeaders},e.prototype.columnHeadersOrCornersEqual=function(e,t,i){if(this._items.length!==t.length)return!1;for(var a=this._items.length,r=0;a>r;r++)if(!this.columnHeaderOrCornerEquals(this._itemType,this._items[r],e,t[r].item,i))return!1;return!0},Object.defineProperty(e.prototype,"itemType",{get:function(){return this._itemType},enumerable:!0,configurable:!0}),e.prototype.getLeafItem=function(){return 0===this._items.length?null:this._items[this._items.length-1]},e.prototype.columnHeaderOrCornerEquals=function(e,t,i,a,r){if(e!==i)return!1;if(0===e){if(!r.cornerCellItemEquals(t,a))return!1}else if(!r.headerItemEquals(t,a))return!1;return!0},e.prototype.OnLeafRealized=function(e){var t=this.getType(),i=this.getColumnHeadersOrCorners();if(this.columnHeadersOrCornersEqual(t,i,e))this.clearSpanningCellsWidth(this._realizedColumnHeaders);else{var a=i.length;this._items=[];for(var r=0;a>r;r++)this._items.push(i[r].item);this._itemType=t,this.clearSize()}},e.prototype.clearSpanningCellsWidth=function(e){for(var t=0;t<e.length;t++){var i=e[t];i.colSpan>1&&i.setContentWidth(-1)}},e.prototype.addCornerCell=function(e){e._column=this,this._realizedCornerCells.push(e),e.setContentWidth(this._contentWidth)},e.prototype.addRowHeader=function(e){e._column=this,this._realizedRowHeaders.push(e),e.setContentWidth(this._contentWidth)},e.prototype.addColumnHeader=function(e,t){e._column=this,this._realizedColumnHeaders.push(e),t&&e.setContentWidth(this._contentWidth)},e.prototype.addBodyCell=function(e){e._column=this,this._realizedBodyCells.push(e),e.setContentWidth(this._contentWidth)},Object.defineProperty(e.prototype,"footer",{get:function(){return this._footerCell},set:function(e){this._footerCell=e,e._column=this,e.setContentWidth(this._contentWidth)},enumerable:!0,configurable:!0}),e.prototype.resize=function(e){if(e!==this.getContentContextualWidth()){this._contentWidth=e,this.setContentWidth(this._contentWidth),this._sizeFixed=!0,this._fixedToAligningWidth=!1,this._aligningWidth=-1;var t=this.owner._presenter;t&&t.invokeColumnResizeCallBack(this._columnIndex,e)}},e.prototype.fixSize=function(){var e=-1!==this._aligningWidth,t=e!==this._fixedToAligningWidth;(!this._sizeFixed||t||e)&&(-1===this._aligningWidth?(this._contentWidth+=1,this.setContentWidth(this._contentWidth)):this.setContentWidth(this._aligningWidth),this._sizeFixed=!0,this._fixedToAligningWidth=-1!==this._aligningWidth)},e.prototype.clearSize=function(){this._contentWidth=-1,this.setContentWidth(this._contentWidth),this._sizeFixed=!1},e.prototype.getContentContextualWidth=function(){return this._contentWidth},e.prototype.getCellIContentContextualWidth=function(e){return this._presenter.getCellContentWidth(e)},e.prototype.getCellSpanningWidthWithScrolling=function(e,t){var i=this.getContextualWidth()+this.getScrollingOffset();if(e.colSpan>1)for(var a=this.getIndex(t),r=t.realizedColumns,n=1;n<e.colSpan;n++)i+=r[n+a].getContextualWidth();return i},e.prototype.getScrollingOffset=function(){var e=0;return this._realizedColumnHeaders.length>0&&(e=this._realizedColumnHeaders[this._realizedColumnHeaders.length-1].horizontalOffset),e},e.prototype.getContextualWidth=function(){return(-1===this._width||-1===this._contentWidth)&&(this._width=this._presenter.getWidth()),this._width},e.prototype.calculateSize=function(){if(this._sizeFixed)return this._contentWidth;for(var e=0,t=this._realizedColumnHeaders.length,i=0;t>i;i++){var a=this._realizedColumnHeaders[i];1===a.colSpan&&(e=Math.max(e,this._presenter.getCellContentWidth(a)))}t=this._realizedRowHeaders.length;for(var i=0;t>i;i++){var a=this._realizedRowHeaders[i];1===a.colSpan&&(e=Math.max(e,this._presenter.getCellContentWidth(a)))}t=this._realizedCornerCells.length;for(var i=0;t>i;i++)e=Math.max(e,this._presenter.getCellContentWidth(this._realizedCornerCells[i]));t=this._realizedBodyCells.length;for(var i=0;t>i;i++)e=Math.max(e,this._presenter.getCellContentWidth(this._realizedBodyCells[i]));return null!==this._footerCell&&1===this._footerCell.colSpan&&(e=Math.max(e,this._presenter.getCellContentWidth(this._footerCell))),this._contentWidth=e},e.prototype.setAligningContextualWidth=function(e){this._aligningWidth=e},e.prototype.getAligningContextualWidth=function(){return this._aligningWidth},e.prototype.setContentWidth=function(e){for(var t=this._realizedColumnHeaders.length,i=0;t>i;i++){var a=this._realizedColumnHeaders[i];1===a.colSpan&&a.setContentWidth(e)}t=this._realizedRowHeaders.length;for(var i=0;t>i;i++){var a=this._realizedRowHeaders[i];1===a.colSpan&&a.setContentWidth(e)}t=this._realizedCornerCells.length;for(var i=0;t>i;i++)this._realizedCornerCells[i].setContentWidth(e);t=this._realizedBodyCells.length;for(var i=0;t>i;i++)this._realizedBodyCells[i].setContentWidth(e);null!==this._footerCell&&1===this._footerCell.colSpan&&this._footerCell.setContentWidth(e),this._width=-1},e.prototype.getTablixCell=function(){var e=this._realizedColumnHeaders.length>0?this._realizedColumnHeaders:this._realizedCornerCells;return e[e.length-1]},e.prototype.getIndex=function(e){return e.realizedColumns.indexOf(this)},e.prototype.getHeaders=function(){return this._realizedColumnHeaders},e.prototype.getOtherDimensionHeaders=function(){return this._realizedRowHeaders},e.prototype.getCellContextualSpan=function(e){return e.colSpan},e.prototype.getOtherDimensionOwner=function(e){return e._row},e}();e.TablixColumn=i;var a=function(){function e(e){this._contentHeight=-1,this._presenter=e,this._presenter.initialize(this),this._allocatedCells=[],this._heightFixed=!1,this._contentHeight=-1,this._height=-1}return e.prototype.initialize=function(e){this._owner=e,this._realizedRowHeaders=[],this._realizedBodyCells=[],this._realizedCornerCells=[],this._realizedColumnHeaders=[],this._realizedCellsCount=0},Object.defineProperty(e.prototype,"presenter",{get:function(){return this._presenter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),e.prototype.releaseUnusedCells=function(e){this.releaseCells(e,this._realizedCellsCount)},e.prototype.releaseAllCells=function(e){this.releaseCells(e,0)},e.prototype.releaseCells=function(e,t){for(var i=this._allocatedCells,a=i.length,r=t;a>r;r++){var n=i[r];e._unbindCell(n),n.clear()}},e.prototype.moveScrollableCellsToEnd=function(e){for(var t=Math.max(this._realizedRowHeaders.length,this._realizedCornerCells.length),i=t;t+e>i;i++){var a=this._allocatedCells[i];this._presenter.onRemoveCell(a),this._presenter.onAppendCell(a),this._allocatedCells.push(a)}this._allocatedCells.splice(t,e)},e.prototype.moveScrollableCellsToStart=function(e){for(var t=Math.max(this._realizedRowHeaders.length,this._realizedCornerCells.length),i=t;t+e>i;i++){var a=this._allocatedCells.pop();this._presenter.onRemoveCell(a),this._presenter.onInsertCellBefore(a,this._allocatedCells[t]),this._allocatedCells.splice(t,0,a)}},e.prototype.getOrCreateCornerCell=function(e){var t=this.getOrCreateCell();return t.prepare(!1),e.addCornerCell(t),this._realizedCornerCells.push(t),t.setContentHeight(this._contentHeight),t},e.prototype.getOrCreateRowHeader=function(e,t,i){var a=this.getOrCreateCell();return a.prepare(t),e.addRowHeader(a),this._realizedRowHeaders.push(a),i&&a.setContentHeight(this._contentHeight),a},e.prototype.getOrCreateColumnHeader=function(e,t,i){var a=this.getOrCreateCell();return a.prepare(t),e.addColumnHeader(a,i),this._realizedColumnHeaders.push(a),a.setContentHeight(this._contentHeight),a},e.prototype.getOrCreateBodyCell=function(e,t){var i=this.getOrCreateCell();return i.prepare(t),e.addBodyCell(i),this._realizedBodyCells.push(i),i.setContentHeight(this._contentHeight),i},e.prototype.getOrCreateFooterRowHeader=function(e){var t=this.getOrCreateCell();return t.prepare(!1),e.footer=t,this._realizedRowHeaders.push(t),t.setContentHeight(this._contentHeight),t},e.prototype.getOrCreateFooterBodyCell=function(e,t){var i=this.getOrCreateCell();return i.prepare(t),e.footer=i,this._realizedBodyCells.push(i),i.setContentHeight(this._contentHeight),i},e.prototype.getRowHeaderLeafIndex=function(){for(var e=-1,t=this._allocatedCells.length,i=0;t>i&&1===this._allocatedCells[i].type;i++)e++;return e},e.prototype.getAllocatedCellAt=function(e){return this._allocatedCells[e]},e.prototype.moveCellsBy=function(e){if(0!==this._allocatedCells.length)if(e>0)for(var t=this._allocatedCells[0],i=0;e>i;i++){var a=this.createCell(this);this._presenter.onInsertCellBefore(a,t),this._allocatedCells.unshift(a),t=a}else{e=-e;for(var i=0;e>i;i++)this._presenter.onRemoveCell(this._allocatedCells[i]);this._allocatedCells.splice(0,e)}},e.prototype.getRealizedCellCount=function(){return this._realizedCellsCount},e.prototype.getRealizedHeadersCount=function(){return this._realizedRowHeaders.length},e.prototype.getRealizedHeaderAt=function(e){return this._realizedRowHeaders[e]},e.prototype.getTablixCell=function(){var e;return e=this._realizedRowHeaders.length>0?this._realizedRowHeaders:this._realizedCornerCells.length>0?this._realizedCornerCells:this._realizedColumnHeaders,e[e.length-1]},e.prototype.getOrCreateEmptySpaceCell=function(){var e=this._allocatedCells[this._realizedCellsCount];return void 0===e&&(e=this.createCell(this),this._allocatedCells[this._realizedCellsCount]=e,this._presenter.onAppendCell(e)),e},e.prototype.createCell=function(e){var i=this._presenter.createCellPresenter(this._owner.owner.layoutManager.getLayoutKind());return new t(i,i,this)},e.prototype.getOrCreateCell=function(){var e=this._allocatedCells[this._realizedCellsCount];return void 0===e?(e=this.createCell(this),this._allocatedCells[this._realizedCellsCount]=e,this._presenter.onAppendCell(e)):(e.colSpan=1,e.rowSpan=1),this._realizedCellsCount=this._realizedCellsCount+1,e},e.prototype.resize=function(e){e!==this.getContentContextualWidth()&&(this._contentHeight=e,this.setContentHeight(),this._heightFixed=!0,this.setAligningContextualWidth(-1))},e.prototype.fixSize=function(){this.sizeFixed()||(this.setContentHeight(),this._heightFixed=!0)},e.prototype.getContentContextualWidth=function(){return this._contentHeight},e.prototype.getCellIContentContextualWidth=function(e){return this.presenter.getCellContentHeight(e)},e.prototype.getCellSpanningHeight=function(e,t){var i=this.getContextualWidth();if(e.rowSpan>1)for(var a=this.getIndex(t),r=t.realizedRows,n=1;n<e.rowSpan;n++)i+=r[n+a].getContextualWidth();return i},e.prototype.getContextualWidth=function(){return(-1===this._height||-1===this._contentHeight)&&(this._height=this._presenter.getHeight()),this._height},e.prototype.sizeFixed=function(){return this._heightFixed},e.prototype.calculateSize=function(){if(this._heightFixed)return this._contentHeight;for(var e=0,t=this._realizedRowHeaders.length,i=0;t>i;i++){var a=this._realizedRowHeaders[i];1===a.rowSpan&&(e=Math.max(e,this._presenter.getCellContentHeight(a)))}t=this._realizedCornerCells.length;for(var i=0;t>i;i++)e=Math.max(e,this._presenter.getCellContentHeight(this._realizedCornerCells[i]));t=this._realizedColumnHeaders.length;for(var i=0;t>i;i++){var a=this._realizedColumnHeaders[i];1===a.rowSpan&&(e=Math.max(e,this._presenter.getCellContentHeight(a)))}t=this._realizedBodyCells.length;for(var i=0;t>i;i++)e=Math.max(e,this._presenter.getCellContentHeight(this._realizedBodyCells[i]));return this._contentHeight=e},e.prototype.setAligningContextualWidth=function(e){},e.prototype.getAligningContextualWidth=function(){return-1},e.prototype.setContentHeight=function(){for(var e=this._realizedRowHeaders.length,t=0;e>t;t++){var i=this._realizedRowHeaders[t];i.rowSpan&&i.setContentHeight(this._contentHeight)}e=this._realizedCornerCells.length;for(var t=0;e>t;t++)this._realizedCornerCells[t].setContentHeight(this._contentHeight);e=this._realizedColumnHeaders.length;for(var t=0;e>t;t++){var i=this._realizedColumnHeaders[t];1===i.rowSpan&&i.setContentHeight(this._contentHeight)}e=this._realizedBodyCells.length;for(var t=0;e>t;t++)this._realizedBodyCells[t].setContentHeight(this._contentHeight);this._height=-1},e.prototype.getIndex=function(e){return e.realizedRows.indexOf(this)},e.prototype.getHeaders=function(){return this._realizedRowHeaders},e.prototype.getOtherDimensionHeaders=function(){return this._realizedColumnHeaders},e.prototype.getCellContextualSpan=function(e){return e.rowSpan},e.prototype.getOtherDimensionOwner=function(e){return e._column},e}();e.TablixRow=a;var r=function(){function e(e){this._presenter=e,this._footerRow=null}return e.prototype.initialize=function(e,t,i){this._owner=e,this._presenter.initialize(this,t,i,e),this.fillColumnsProportionally=!1,this._realizedRows=[],this._realizedColumns=[],this._emptySpaceHeaderCell=null,this._emptyFooterSpaceCell=null},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillColumnsProportionally",{get:function(){return this._fillColumnsProportionally},set:function(e){this._fillColumnsProportionally!==e&&(this._fillColumnsProportionally=e,this._presenter.onFillColumnsProportionallyChanged(e))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realizedColumns",{get:function(){return this._realizedColumns},set:function(e){this._realizedColumns=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realizedRows",{get:function(){return this._realizedRows},set:function(e){this._realizedRows=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerRow",{get:function(){return this._footerRow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptySpaceHeaderCell",{get:function(){return this._emptySpaceHeaderCell},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptySpaceFooterCell",{get:function(){return this._emptyFooterSpaceCell},enumerable:!0,configurable:!0}),e.prototype.ShowEmptySpaceCells=function(e,t){0!==this._realizedRows.length&&(0===this._realizedRows.length||this._emptySpaceHeaderCell||(this._emptySpaceHeaderCell=this._realizedRows[0].getOrCreateEmptySpaceCell(),this._emptySpaceHeaderCell.rowSpan=e,this._emptySpaceHeaderCell.colSpan=1,this._emptySpaceHeaderCell.setContentWidth(t)),this._footerRow&&null===this._emptyFooterSpaceCell&&(this._emptyFooterSpaceCell=this._footerRow.getOrCreateEmptySpaceCell(),this._emptyFooterSpaceCell.rowSpan=1,this._emptyFooterSpaceCell.colSpan=1,this._emptyFooterSpaceCell.setContentWidth(t)))},e.prototype.HideEmptySpaceCells=function(){this._emptySpaceHeaderCell&&(this._emptySpaceHeaderCell.clear(),this._emptySpaceHeaderCell=null),this._emptyFooterSpaceCell&&(this._emptyFooterSpaceCell.clear(),this._emptyFooterSpaceCell=null)},e.prototype.onStartRenderingSession=function(e){e&&(this.clearRows(),this.clearColumns())},e.prototype.onStartRenderingIteration=function(){this.initializeRows(),this.initializeColumns()},e.prototype.onEndRenderingIteration=function(){var e=this._rows;if(void 0!==e)for(var t=e.length,i=0;t>i;i++)e[i].releaseUnusedCells(this._owner);this._footerRow&&this._footerRow.releaseUnusedCells(this._owner)},e.prototype.getOrCreateRow=function(e){var t=this._rows[e];return void 0===t&&(t=new a(this._presenter.createRowPresenter()),t.initialize(this),this._presenter.onAppendRow(t),this._rows[e]=t),void 0===this._realizedRows[e]&&(this._realizedRows[e]=t),t},e.prototype.getOrCreateFootersRow=function(){return null===this._footerRow&&(this._footerRow=new a(this._presenter.createRowPresenter()),this._footerRow.initialize(this),this._presenter.onAddFooterRow(this._footerRow)),this._footerRow},e.prototype.moveRowsToEnd=function(e,t){for(var i=0;t>i;i++){var a=this._rows[i+e];this._presenter.onRemoveRow(a),this._presenter.onAppendRow(a),this._rows.push(a)}this._rows.splice(e,t)},e.prototype.moveRowsToStart=function(e,t){for(var i=this._rows[e],a=0;t>a;a++){var r=this._rows.pop();this._presenter.onRemoveRow(r),this._presenter.onInsertRowBefore(r,i),this._rows.splice(e+a,0,r)}},e.prototype.moveColumnsToEnd=function(e,t){for(var i=this._rows[0]._realizedCornerCells.length,a=Math.max(this._columns[i]._realizedColumnHeaders.length-1,0),r=a;r<this._rows.length;r++)this._rows[r].moveScrollableCellsToEnd(t);for(var r=0;t>r;r++){var n=this._columns[r+e];this._columns.push(n)}this._columns.splice(e,t)},e.prototype.moveColumnsToStart=function(e,t){for(var i=this._rows[0]._realizedCornerCells.length,a=Math.max(this._columns[i]._realizedColumnHeaders.length-1,0),r=a;r<this._rows.length;r++)this._rows[r].moveScrollableCellsToStart(t);for(var r=0;t>r;r++){var n=this._columns.pop();this._columns.splice(e+r,0,n)}},e.prototype.getOrCreateColumn=function(e){var t=this._columns[e];return void 0===t&&(t=new i(this._presenter.createColumnPresenter(e),e),t.initialize(this),this._columns[e]=t),void 0===this._realizedColumns[e]&&(this._realizedColumns[e]=t),t},e.prototype.initializeColumns=function(){this._columns||(this._columns=[]);for(var e=this._columns.length,t=0;e>t;t++)this._columns[t].initialize(this);this._realizedColumns=[]},e.prototype.clearColumns=function(){this._columns=null,this._realizedColumns=null},e.prototype.initializeRows=function(){var e=this._owner.rowDimension.hasFooter()&&null!==this._footerRow;this._realizedRows=[],this._rows||(this._rows=[]);for(var t=this._rows,i=t.length,a=0;i>a;a++)t[a].initialize(this);e&&(this._footerRow||this.getOrCreateFootersRow(),this._footerRow.initialize(this))},e.prototype.clearRows=function(){var e=this._rows;if(e){for(var t=e.length,i=0;t>i;i++)e[i].releaseAllCells(this._owner);this._footerRow&&this._footerRow.releaseAllCells(this._owner),this._presenter.onClear(),this._footerRow=null,this._rows=null,this._realizedRows=null}},e.prototype.getWidth=function(){return this._presenter.getWidth()},e.prototype.getHeight=function(){return this._presenter.getHeight()},e}();e.TablixGrid=r}(t=e.internal||(e.internal={}))}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){var i;!function(i){var a=jsCommon.PixelConverter,r=function(){function e(){}return Object.defineProperty(e.prototype,"visibleWidth",{get:function(){return this._viewport?this._viewport.width:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleHeight",{get:function(){return this._viewport?this._viewport.height:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridWidth",{get:function(){return this.visibleWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridHeight",{get:function(){return this.visibleHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowHeight",{get:function(){return this._cellHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this._cellWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellHeight",{get:function(){return this._cellHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentWidth",{get:function(){return this._cellWidth-e.DashboardCellPaddingLeft-e.DashboardCellPaddingRight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentHeight",{get:function(){return this._cellHeight},enumerable:!0,configurable:!0}),e.prototype.updateColumnCount=function(e){this._columnCount=e},e.prototype.updateRowHeight=function(e){this._cellHeight=e},e.prototype.updateScalingFactor=function(e){this._scalingFactor=e,this._cellWidth=this.computeColumnWidth(this._columnCount)},e.prototype.updateViewport=function(e){this._viewport=e,this._cellWidth=this.computeColumnWidth(this._columnCount),this._cellHeight=this.computeColumnHeight()},e.prototype.computeColumnWidth=function(t){var i=this._scalingFactor;i||(i=1);var a=i*e.TablixMinimumColumnWidth,r=Math.floor(this._viewport.width/a);return this.fitToColumnCount(r,t)},e.prototype.computeColumnHeight=function(){if(!this.hasImageContent)return this._cellHeight;var e=this._viewport.width;return 250>=e?20:510>=e?51:770>=e?52:void 0},e.prototype.fitToColumnCount=function(e,t){var i=Math.min(e,t);return Math.floor(this._viewport.width/i)},e.DashboardCellPaddingLeft=10,e.DashboardCellPaddingRight=5,e.TablixMinimumColumnWidth=75,e}();i.SizeComputationManager=r;var n=function(){function t(e,t,i){this._owner=e,this._grid=t,this._lastScrollOffset=null,this._isScrolling=!1,this._fixedSizeEnabled=!0,this._done=!1,this._realizationManager=i}return Object.defineProperty(t.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"realizationManager",{get:function(){return this._realizationManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fixedSizeEnabled",{get:function(){return this._fixedSizeEnabled},set:function(e){this._fixedSizeEnabled=e},enumerable:!0,configurable:!0}),t.prototype.onCornerCellRealized=function(e,t,i){this._realizationManager.onCornerCellRealized(e,t)},t.prototype.onHeaderRealized=function(e,t,i){this._realizationManager.onHeaderRealized(e,t,i)},Object.defineProperty(t.prototype,"needsToRealize",{get:function(){return this._realizationManager.needsToRealize},enumerable:!0,configurable:!0}),t.prototype.getVisibleSizeRatio=function(){return 1-this.dimension.getFractionScrollOffset()},Object.defineProperty(t.prototype,"alignToEnd",{get:function(){return this._alignToEnd},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"done",{get:function(){return this._done},enumerable:!0,configurable:!0}),t.prototype._requiresMeasure=function(){return!0},t.prototype.startScrollingSession=function(){this._isScrolling=!0},t.prototype.endScrollingSession=function(){this._isScrolling=!1},t.prototype.isScrolling=function(){return this._isScrolling},t.prototype.isResizing=function(){return!1},t.prototype.getOtherHierarchyContextualHeight=function(){var e=this.dimension.otherDimension,t=e.getDepth(),i=0,a=this._getRealizedItems();if(a.length>0)for(var r=0;t>r;r++)i+=a[r].getContextualWidth();return i},t.prototype._isAutoSized=function(){return!1},t.prototype.onStartRenderingSession=function(){this._measureEnabled=this._requiresMeasure(),this._gridOffset=this.dimension.otherDimension.getDepth()},t.prototype.onEndRenderingSession=function(){this._realizationManager.onEndRenderingSession(),this._alignToEnd=!1,this._done=!1,this._measureEnabled=!0,this._sendDimensionsToControl()},t.prototype._sendDimensionsToControl=function(){},Object.defineProperty(t.prototype,"measureEnabled",{get:function(){return this._measureEnabled},enumerable:!0,configurable:!0}),t.prototype.getFooterContextualWidth=function(){return 0},t.prototype.onStartRenderingIteration=function(e,t){this._measureEnabled&&!this._done&&(this._contextualWidthToFill=(t-this.otherScrollbarContextualWidth)*this.getGridScale()-this.getFooterContextualWidth()),this._realizationManager.onStartRenderingIteration(),e?this._lastScrollOffset=null:null!==this._lastScrollOffset&&this.swapElements()},Object.defineProperty(t.prototype,"allItemsRealized",{get:function(){return this.getRealizedItemsCount()-this._gridOffset===this.dimension.getItemsCount()||0===this.dimension.getItemsCount()},enumerable:!0,configurable:!0}),t.prototype.onEndRenderingIteration=function(){if(!this._done){if(!this._measureEnabled)return this._lastScrollOffset=this.dimension.scrollOffset,void(this._done=!0);var i,a=this.getGridContextualWidth(),r=e.Double.greaterOrEqualWithPrecision(a,this._contextualWidthToFill,t._pixelPrecision),n=this.allItemsRealized;i=r?this.scrollForwardToAlignEnd(a):this.scrollBackwardToFill(a),this._realizationManager.onEndRenderingIteration(a,r);var o=this.dimension.scrollbar.visible;this.updateScrollbar(a),this._done=(r||n)&&this.dimension.scrollbar.visible===o&&e.Double.equalWithPrecision(i,this.dimension.scrollOffset,t._scrollOffsetPrecision),this.dimension.scrollOffset=i,this._lastScrollOffset=this.dimension.scrollOffset}},t.prototype.getScrollDeltaWithinPage=function(){if(null!==this._lastScrollOffset){var e=this.dimension.getIntegerScrollOffset()-Math.floor(this._lastScrollOffset);if(Math.abs(e)<this.getRealizedItemsCount()-this.dimension.otherDimension.getDepth())return e}return null},t.prototype.swapElements=function(){var e=this.getScrollDeltaWithinPage();if(null!==e){var t=this.dimension.otherDimension.getDepth();Math.abs(e)<this.getRealizedItemsCount()-t&&(e>0?this._moveElementsToBottom(t,e):0>e&&this._moveElementsToTop(t,-e))}},t.prototype._getRealizedItems=function(){return null},t.prototype.getRealizedItemsCount=function(){var e=this._getRealizedItems();return e.length},t.prototype._moveElementsToBottom=function(e,t){},t.prototype._moveElementsToTop=function(e,t){},t.prototype.isScrollingWithinPage=function(){return null!==this.getScrollDeltaWithinPage()},t.prototype.getGridContextualWidth=function(){return 0},t.prototype.updateScrollbar=function(e){var t=this.dimension.scrollbar;t.viewMin=this.dimension.scrollOffset,t.min=0,t.max=this.dimension.getItemsCount(),t.viewSize=this.getViewSize(e),this.dimension.scrollbar.show(this.canScroll(e))},t.prototype.getViewSize=function(i){var a=this.getRealizedItemsCount();if(0===a)return 0;for(var r=this._gridOffset,n=0,o=0,s=this._contextualWidthToFill,l=s-this.getOtherHierarchyContextualHeight(),u=this.getMeaurementError(i),c=r;a>c;c++){var h=void 0;h=c===r?this.getVisibleSizeRatio():1;var d=this.getItemContextualWidthWithScrolling(c)*u;if(o+=d,n+=h,e.Double.greaterWithPrecision(o,l,t._pixelPrecision)){n-=(o-l)/d*h;break}}return n},t.prototype.isScrollableHeader=function(e,t,i){if(0!==i||0===this.dimension.getFractionScrollOffset())return!1;var a=this.dimension._hierarchyNavigator;if(a.isLeaf(e))return!0;var r=e,n=t;do{if(n=a.getChildren(r),r=this.dimension.getFirstVisibleItem(a.getLevel(r)+1),void 0===r)break;if(!a.isLastItem(r,n))return!1}while(!a.isLeaf(r));return!0},t.prototype.reachedEnd=function(){return this.dimension.getIntegerScrollOffset()+(this.getRealizedItemsCount()-this._gridOffset)>=this.dimension.getItemsCount()},t.prototype.scrollBackwardToFill=function(i){var a=this.dimension.scrollOffset;if(this.reachedEnd()){var r=this._contextualWidthToFill-i;if(this.dimension.getItemsCount()>0){var n=i/(this.getRealizedItemsCount()-this.dimension.getFractionScrollOffset());a=this.dimension.getValidScrollOffset(Math.floor(this.dimension.scrollOffset-r/n))}this._alignToEnd=!e.Double.equalWithPrecision(a,this.dimension.scrollOffset,t._scrollOffsetPrecision)}return a},t.prototype.getItemContextualWidth=function(e){var t=this._getRealizedItems();return e>=t.length?null:t[e].getContextualWidth();
},t.prototype.getItemContextualWidthWithScrolling=function(e){return this.getSizeWithScrolling(this.getItemContextualWidth(e),e)},t.prototype.getSizeWithScrolling=function(e,t){var i;return i=this._gridOffset===t?this.getVisibleSizeRatio():1,e*i},t.prototype.getGridContextualWidthFromItems=function(){for(var e=this.getRealizedItemsCount(),t=0,i=0;e>i;i++)t+=this.getItemContextualWidthWithScrolling(i);return t},t.prototype.getMeaurementError=function(e){return e/this.getGridContextualWidthFromItems()},t.prototype.scrollForwardToAlignEnd=function(i){var a=this.dimension.scrollOffset;if(this._alignToEnd){var r=e.Double.equalWithPrecision(i,this._contextualWidthToFill,t._pixelPrecision);if(!r)for(var n=this.getRealizedItemsCount(),o=this._gridOffset,s=i-this._contextualWidthToFill,l=this.getMeaurementError(i),u=o;n>u;u++){var c=this.getItemContextualWidth(u)*l;if(!e.Double.lessWithPrecision(c,s,t._pixelPrecision)){var h=o===u?1-this.dimension.getFractionScrollOffset():1;a=this.dimension.getValidScrollOffset(this.dimension.scrollOffset+(u-o)+s*h/c);break}s-=c}this._alignToEnd=!r}return a},Object.defineProperty(t.prototype,"dimension",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"otherLayoutManager",{get:function(){return this.dimension.otherDimension.layoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contextualWidthToFill",{get:function(){return this._contextualWidthToFill},enumerable:!0,configurable:!0}),t.prototype.getGridScale=function(){return 0},Object.defineProperty(t.prototype,"otherScrollbarContextualWidth",{get:function(){return 0},enumerable:!0,configurable:!0}),t.prototype.getActualContextualWidth=function(e){return this._isAutoSized()&&!this.canScroll(e)?e:this._contextualWidthToFill},t.prototype.canScroll=function(e){return!1},t.prototype.calculateSizes=function(){this.fixedSizeEnabled&&(this.calculateContextualWidths(),this.calculateSpans())},t.prototype._calculateSize=function(e){return null},t.prototype.calculateContextualWidths=function(){for(var e=this._getRealizedItems(),t=e.length,i=0;t>i;i++){var a=e[i];this.measureEnabled&&a.setAligningContextualWidth(-1),this._calculateSize(a)}},t.prototype.calculateSpans=function(){this.measureEnabled&&(this.updateNonScrollableItemsSpans(),this.updateScrollableItemsSpans())},t.prototype.updateNonScrollableItemsSpans=function(){for(var e=this.otherLayoutManager._getRealizedItems(),t=e.length,i=this.dimension.getDepth(),a=i;t>a;a++){var r=e[a];this.updateSpans(r,r.getHeaders())}},t.prototype.updateScrollableItemsSpans=function(){for(var e=this.otherLayoutManager._getRealizedItems(),t=Math.min(this.dimension.getDepth(),e.length),i=0;t>i;i++){var a=e[i];this.updateSpans(a,a.getOtherDimensionHeaders())}},t.prototype.fixSizes=function(){if(this.fixedSizeEnabled)for(var e=this._getRealizedItems(),t=e.length,i=0;t>i;i++)e[i].fixSize()},t.prototype.updateSpans=function(e,t){for(var i=this._getRealizedItems(),a=t.length,r=0;a>r;r++){var n=t[r],o=e.getOtherDimensionOwner(n),s=o.getCellContextualSpan(n);if(s>1)for(var l=0,u=o.getIndex(this._grid),c=0;s>c;c++){var h=i[c+u];l+=this.getSizeWithScrolling(h.getContentContextualWidth(),c+u),c===s-1&&this.updateLastChildSize(n,h,l)}}},t.prototype.updateLastChildSize=function(e,t,i){var a=t.getCellIContentContextualWidth(e)-i;a>0&&t.setAligningContextualWidth(Math.max(t.getAligningContextualWidth(),a+t.getContentContextualWidth()))},t._pixelPrecision=1.0001,t._scrollOffsetPrecision=.01,t}();i.DimensionLayoutManager=n;var o=function(){function e(e,t,i){this.column=e,this.item=e.getLeafItem(),this.itemType=e.itemType,this.startColumnWidth=t,this.resizingDelta=0,this.animationFrame=null,this.scale=i}return e}();i.ResizeState=o;var s=function(e){function i(t,i,a){e.call(this,t,i,a),a.owner=this,this.fillProportionally=!1,this._resizeState=null}return __extends(i,e),Object.defineProperty(i.prototype,"dimension",{get:function(){return this.owner.owner.columnDimension},enumerable:!0,configurable:!0}),i.prototype.isResizing=function(){return null!==this._resizeState},Object.defineProperty(i.prototype,"fillProportionally",{get:function(){return this._grid.fillColumnsProportionally},set:function(e){this._grid.fillColumnsProportionally=e},enumerable:!0,configurable:!0}),i.prototype.getGridScale=function(){return this._grid._presenter.getScreenToCssRatioX()},Object.defineProperty(i.prototype,"otherScrollbarContextualWidth",{get:function(){return this.dimension.otherDimension.scrollbar.visible?t.HTMLElementUtils.getElementWidth(this.dimension.otherDimension.scrollbar.element):0},enumerable:!0,configurable:!0}),i.prototype._getRealizedItems=function(){return this._grid.realizedColumns||(this._grid.realizedColumns=[]),this._grid.realizedColumns},i.prototype._moveElementsToBottom=function(e,t){this._grid.moveColumnsToEnd(e,t)},i.prototype._moveElementsToTop=function(e,t){this._grid.moveColumnsToStart(e,t)},i.prototype._requiresMeasure=function(){return!this.isScrolling()&&!this.otherLayoutManager.isScrolling()||this.isScrolling()||this.isResizing()},i.prototype.getGridContextualWidth=function(){return this._grid.getWidth()},i.prototype.getFirstVisibleColumn=function(){return this._grid.realizedColumns[this._gridOffset]},i.prototype._isAutoSized=function(){return this.owner.owner.autoSizeWidth},i.prototype.applyScrolling=function(){var e=this.dimension.getFractionScrollOffset(),t=0;if(0!==e){var i=this.getFirstVisibleColumn();void 0!==i&&(t=i.getContextualWidth(),this.scroll(i,t,e))}},i.prototype.scroll=function(e,t,i){this.scrollCells(e._realizedColumnHeaders,t,i),this.scrollBodyCells(this._grid.realizedRows,t,i),null!==e.footer&&e.footer.scrollHorizontally(t,i)},i.prototype.scrollCells=function(e,t,i){for(var a=e.length,r=0;a>r;r++)e[r].scrollHorizontally(t,i)},i.prototype.scrollBodyCells=function(e,t,i){for(var a,r,n=e.length,o=0;n>o;o++)a=e[o]._realizedBodyCells,void 0!==a&&(r=a[0],void 0!==r&&r.scrollHorizontally(t,i))},i.prototype.onStartResize=function(e,i,a){this._resizeState=new o(e._column,e._column.getContentContextualWidth(),t.HTMLElementUtils.getAccumulatedScale(this.owner.owner.container))},i.prototype.onResize=function(e,t,a){var r=this;this.isResizing()&&(this._resizeState.resizingDelta=Math.max(t/this._resizeState.scale,i.minColumnWidth-this._resizeState.startColumnWidth),null===this._resizeState.animationFrame&&(this._resizeState.animationFrame=requestAnimationFrame(function(){return r.performResizing()})))},i.prototype.onEndResize=function(e){this.isResizing()&&null!==this._resizeState.animationFrame&&this.performResizing(),this._resizeState=null},i.prototype.onReset=function(e){this._resizeState=new o(e._column,-1,1),e._column.clearSize(),this.owner.owner.refresh(!1),this._resizeState=null},i.prototype.updateItemToResizeState=function(e){if(null!==this._resizeState)for(var t=e.length,i=this.owner.owner.hierarchyNavigator,a=this.otherLayoutManager.dimension.getDepth(),r=a;t>r;r++){var n=e[r];if(n.columnHeaderOrCornerEquals(this._resizeState.itemType,this._resizeState.item,n.itemType,n.getLeafItem(),i)&&n!==this._resizeState.column){this._resizeState.column=n,n.resize(this._resizeState.startColumnWidth+this._resizeState.resizingDelta);break}}},i.prototype.performResizing=function(){if(null!==this._resizeState){this._resizeState.animationFrame=null;var e=this._resizeState.startColumnWidth+this._resizeState.resizingDelta;this._resizeState.column.resize(e),this.owner.owner.refresh(!1)}},i.prototype._sendDimensionsToControl=function(){var e=this.getGridContextualWidth(),t=this.getActualContextualWidth(e),i=this.getOtherHierarchyContextualHeight(),a=this.getGridScale();this.owner.owner.updateColumnDimensions(i/a,(t-i)/a,this.getViewSize(e))},i.prototype.getEstimatedHeaderWidth=function(e,t){return-1},i.prototype.getEstimatedBodyCellWidth=function(e){return-1},i.minColumnWidth=10,i}(n);i.ColumnLayoutManager=s;var l=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getEstimatedHeaderWidth=function(e,t){return this.ignoreColumn(t)?0:this.owner.getCellWidth(void 0)},t.prototype.getEstimatedBodyCellWidth=function(e){return this.owner.getCellWidth(void 0)},t.prototype.canScroll=function(e){return!1},t.prototype._calculateSize=function(e){var t=e.getIndex(this._grid),i=0;return this.ignoreColumn(t)||(i=this.owner.getContentWidth(void 0)),e.resize(i),i},t.prototype.ignoreColumn=function(e){return 0===e&&!this.owner.binder.hasRowGroups()},t}(s);i.DashboardColumnLayoutManager=l;var u=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.getEstimatedHeaderWidth=function(e,t){return this.owner.getEstimatedTextWidth(e)},i.prototype.getEstimatedBodyCellWidth=function(e){return this.owner.getEstimatedTextWidth(e)},i.prototype.calculateContextualWidths=function(){for(var e=this._getRealizedItems(),t=[],i=0;i<e.length;i++){var a=e[i];this.measureEnabled&&a.setAligningContextualWidth(-1),t.push(this._calculateSize(a))}this.owner.columnWidthsToPersist=t},i.prototype.canScroll=function(t){return!e.Double.equalWithPrecision(this.dimension.scrollOffset,0,n._scrollOffsetPrecision)||this.getRealizedItemsCount()-this._gridOffset<this.dimension.getItemsCount()&&this._contextualWidthToFill>0||e.Double.greaterWithPrecision(t,this._contextualWidthToFill,n._pixelPrecision)},i.prototype._calculateSize=function(e){return e.calculateSize()},i}(s);i.CanvasColumnLayoutManager=u;var c=function(e){function i(t,i,a){e.call(this,t,i,a),a.owner=this}return __extends(i,e),Object.defineProperty(i.prototype,"dimension",{get:function(){return this.owner.owner.rowDimension},enumerable:!0,configurable:!0}),i.prototype.getGridScale=function(){return this._grid._presenter.getScreenToCssRatioY()},Object.defineProperty(i.prototype,"otherScrollbarContextualWidth",{get:function(){return this.dimension.otherDimension.scrollbar.visible?t.HTMLElementUtils.getElementHeight(this.dimension.otherDimension.scrollbar.element):0},enumerable:!0,configurable:!0}),i.prototype.startScrollingSession=function(){e.prototype.startScrollingSession.call(this)},i.prototype._getRealizedItems=function(){return this._grid.realizedRows||(this._grid.realizedRows=[]),this._grid.realizedRows},i.prototype._moveElementsToBottom=function(e,t){this._grid.moveRowsToEnd(e,t)},i.prototype._moveElementsToTop=function(e,t){this._grid.moveRowsToStart(e,t)},i.prototype._requiresMeasure=function(){return!this.isScrolling()&&!this.otherLayoutManager.isScrolling()&&!this.otherLayoutManager.isResizing()||this.isScrolling()&&this.dimension.getIntegerScrollOffset()+(this.getRealizedItemsCount()-this._gridOffset)>=this.dimension.getItemsCount()},i.prototype.getGridContextualWidth=function(){return this._grid.getHeight()},i.prototype.getFirstVisibleRow=function(){return this._grid.realizedRows[this._gridOffset]},i.prototype._isAutoSized=function(){return this.owner.owner.autoSizeHeight},i.prototype.applyScrolling=function(){var e=this.dimension.getFractionScrollOffset(),t=0;if(0!==e){var i=this.getFirstVisibleRow();i&&(t=i.getContextualWidth(),this.scroll(i,t,e))}},i.prototype.scroll=function(e,t,i){this.scrollCells(e._realizedRowHeaders,t,i),this.scrollCells(e._realizedBodyCells,t,i)},i.prototype.scrollCells=function(e,t,i){for(var a=e.length,r=0;a>r;r++)e[r].scrollVertically(t,i)},i.prototype.getFooterContextualWidth=function(){return this.owner.owner.rowDimension.hasFooter()&&this.owner.grid.footerRow?this.owner.grid.footerRow.getContextualWidth():0},i.prototype.calculateContextualWidths=function(){if(e.prototype.calculateContextualWidths.call(this),this.fixedSizeEnabled){var t=this._grid.footerRow;t&&this._calculateSize(t)}},i.prototype.fixSizes=function(){e.prototype.fixSizes.call(this),this.fixedSizeEnabled&&this._grid.footerRow&&this._grid.footerRow.fixSize()},i.prototype._sendDimensionsToControl=function(){var e=this.getGridContextualWidth(),t=this.getActualContextualWidth(e),i=this.getOtherHierarchyContextualHeight(),a=this.getGridScale();this.owner.owner.updateRowDimensions(i/a,(t-i)/a,e/a,this.getViewSize(e),this._grid.footerRow?this._grid.footerRow.getContextualWidth()/a:0)},i.prototype.getEstimatedHeaderWidth=function(e,t){return-1},i}(n);i.RowLayoutManager=c;var h=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t.prototype.getEstimatedHeaderWidth=function(e,t){return this.getHeaderWidth(t)},t.prototype.canScroll=function(e){return!1},t.prototype._calculateSize=function(e){var t=this.owner.getEstimatedRowHeight();return e.resize(t),t},t.prototype.getHeaderWidth=function(e){return 0!==e||this.owner.binder.hasRowGroups()?this.owner.getEstimatedTextWidth(void 0):0},t}(c);i.DashboardRowLayoutManager=h;var d=function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.getEstimatedHeaderWidth=function(e,t){return this.owner.getEstimatedTextWidth(e)},i.prototype.canScroll=function(t){return!e.Double.equalWithPrecision(this.dimension.scrollOffset,0,n._scrollOffsetPrecision)||this.getRealizedItemsCount()-this._gridOffset<this.dimension.getItemsCount()&&this._contextualWidthToFill>0||e.Double.greaterWithPrecision(t,this._contextualWidthToFill,n._pixelPrecision)},i.prototype._calculateSize=function(e){return e.calculateSize()},i}(c);i.CanvasRowLayoutManager=d;var p=function(){function e(e,t,i,a){this._allowHeaderResize=!0,this._binder=e,this._grid=t,this._columnLayoutManager=i,this._rowLayoutManager=a,this._columnWidthsToPersist=[]}return e.prototype.initialize=function(e){this._owner=e,this._container=e.container,this._gridHost=e.contentHost,this._footersHost=e.footerHost,this._grid.initialize(e,this._gridHost,this._footersHost)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binder",{get:function(){return this._binder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnWidthsToPersist",{get:function(){return this._columnWidthsToPersist},set:function(e){this._columnWidthsToPersist=e},enumerable:!0,configurable:!0}),e.prototype.getTablixClassName=function(){return null},e.prototype.getLayoutKind=function(){return null},e.prototype.getOrCreateColumnHeader=function(e,t,i,a){var r=this._grid.getOrCreateRow(i),n=this._grid.getOrCreateColumn(a+this._columnLayoutManager._gridOffset),o=this.owner.hierarchyNavigator.isLeaf(e),s=r.getOrCreateColumnHeader(n,this._columnLayoutManager.isScrollableHeader(e,t,a),o);return this.enableCellHorizontalResize(o,s),s},e.prototype.getOrCreateRowHeader=function(e,t,i,a){var r=this._grid.getOrCreateRow(i+this._rowLayoutManager._gridOffset),n=this._grid.getOrCreateColumn(a),o=this._rowLayoutManager.isScrollableHeader(e,t,i);0===r.getRealizedCellCount()&&this.alignRowHeaderCells(e,r);var s=r.getOrCreateRowHeader(n,o,this.owner.hierarchyNavigator.isLeaf(e));return s.enableHorizontalResize(!1,this._columnLayoutManager),s},e.prototype.getOrCreateCornerCell=function(e,t,i){var a=this._grid.getOrCreateRow(i),r=this._grid.getOrCreateColumn(t),n=a.getOrCreateCornerCell(r),o=this._columnLayoutManager.dimension.getDepth(),s=i===o-1;return this.enableCellHorizontalResize(s,n),n},e.prototype.getOrCreateBodyCell=function(e,t,i,a,r){var n,o=this._grid.getOrCreateRow(a+this._rowLayoutManager._gridOffset),s=this._grid.getOrCreateColumn(r+this._columnLayoutManager._gridOffset);n=0===o._realizedBodyCells.length&&0!==this._owner.columnDimension.getFractionScrollOffset()?!0:this._rowLayoutManager.isScrollableHeader(t,i,a);var l=o.getOrCreateBodyCell(s,n);return l.enableHorizontalResize(!1,this._columnLayoutManager),l},e.prototype.getOrCreateFooterBodyCell=function(e,t){var i,a=this._grid.getOrCreateFootersRow(),r=this._grid.getOrCreateColumn(t+this._columnLayoutManager._gridOffset);i=0===a._realizedBodyCells.length&&0!==this._owner.columnDimension.getFractionScrollOffset();var n=a.getOrCreateFooterBodyCell(r,i);return n.enableHorizontalResize(!1,this._columnLayoutManager),n},e.prototype.getOrCreateFooterRowHeader=function(e,t){var i=this._grid.getOrCreateFootersRow(),a=this._grid.getOrCreateColumn(0),r=i.getOrCreateFooterRowHeader(a);return r.enableHorizontalResize(!1,this._columnLayoutManager),r},e.prototype.getVisibleWidth=function(){return-1},e.prototype.getVisibleHeight=function(){return-1},e.prototype.updateColumnCount=function(e,t){},e.prototype.updateViewport=function(e){},e.prototype.getEstimatedRowHeight=function(){return-1},e.prototype.getCellWidth=function(e){return-1},e.prototype.getContentWidth=function(e){return-1},e.prototype.adjustContentSize=function(e){},e.prototype.alignRowHeaderCells=function(e,t){var i=t.getRowHeaderLeafIndex();if(-1!==i){var a=this._owner.rowDimension,r=a.getFirstVisibleChildLeaf(e);this.owner.hierarchyNavigator.headerItemEquals(r,t.getAllocatedCellAt(i).item)&&t.moveCellsBy(this.owner.hierarchyNavigator.getLevel(r)-this.owner.hierarchyNavigator.getLevel(e)-i)}},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowLayoutManager",{get:function(){return this._rowLayoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnLayoutManager",{get:function(){return this._columnLayoutManager},enumerable:!0,configurable:!0}),e.prototype.showEmptySpaceHeader=function(){return!1},e.prototype.onStartRenderingSession=function(e,t,i){if(this.showEmptySpaceHeader()){var a=this._grid.emptySpaceHeaderCell;a&&this._binder.unbindEmptySpaceHeaderCell(a),a=this._grid.emptySpaceFooterCell,a&&this._binder.unbindEmptySpaceFooterCell(a),this._grid.HideEmptySpaceCells()}this._scrollingDimension=e,this._scrollingDimension&&this._scrollingDimension.layoutManager.startScrollingSession(),this._rowLayoutManager.onStartRenderingSession(),this._columnLayoutManager.onStartRenderingSession(),this._grid.onStartRenderingSession(i);var r=this._columnLayoutManager.measureEnabled||this._rowLayoutManager.measureEnabled;r&&this.measureSampleText(t)},e.prototype.onEndRenderingSession=function(){if(this._rowLayoutManager.onEndRenderingSession(),this._columnLayoutManager.onEndRenderingSession(),this._scrollingDimension&&this._scrollingDimension.layoutManager.endScrollingSession(),this._scrollingDimension=null,this.showEmptySpaceHeader()){var e=this._columnLayoutManager.contextualWidthToFill-this._columnLayoutManager.getGridContextualWidth();if(e>0){this._grid.ShowEmptySpaceCells(this._owner.columnDimension.getDepth(),e);var t=this._grid.emptySpaceHeaderCell;t&&this._binder.bindEmptySpaceHeaderCell(t),t=this._grid.emptySpaceFooterCell,t&&this._binder.bindEmptySpaceFooterCell(t)}}},e.prototype.onStartRenderingIteration=function(e){this._rowLayoutManager.onStartRenderingIteration(e,this.getVisibleHeight()),this._columnLayoutManager.onStartRenderingIteration(e,this.getVisibleWidth()),this._grid.onStartRenderingIteration()},e.prototype.onEndRenderingIteration=function(){return this._grid.onEndRenderingIteration(),this._columnLayoutManager.calculateSizes(),this._rowLayoutManager.calculateSizes(),this._columnLayoutManager.fixSizes(),this._rowLayoutManager.fixSizes(),this._columnLayoutManager.updateItemToResizeState(this._grid.realizedColumns),this._columnLayoutManager.applyScrolling(),this._rowLayoutManager.applyScrolling(),this._columnLayoutManager.onEndRenderingIteration(),this._rowLayoutManager.onEndRenderingIteration(),this._columnLayoutManager.done&&this._rowLayoutManager.done},e.prototype.onCornerCellRealized=function(e,t){var i=this.owner.hierarchyNavigator.isColumnHierarchyLeaf(e),a=this.owner.hierarchyNavigator.isRowHierarchyLeaf(e);i&&t._column.OnLeafRealized(this._owner.hierarchyNavigator),this._columnLayoutManager.onCornerCellRealized(e,t,i),this._rowLayoutManager.onCornerCellRealized(e,t,a)},e.prototype.onRowHeaderRealized=function(e,t){var i=this._owner.hierarchyNavigator,a=i.isLeaf(e);this._rowLayoutManager.onHeaderRealized(e,t,a)},e.prototype.onRowHeaderFooterRealized=function(e,t){},e.prototype.onColumnHeaderRealized=function(e,t){var i=this._owner.hierarchyNavigator,a=i.isLeaf(e);a&&t._column.OnLeafRealized(this._owner.hierarchyNavigator),this._columnLayoutManager.onHeaderRealized(e,t,a)},e.prototype.onBodyCellRealized=function(e,t){},e.prototype.onBodyCellFooterRealized=function(e,t){},e.prototype.setAllowHeaderResize=function(e){this._allowHeaderResize=e},e.prototype.enableCellHorizontalResize=function(e,t){var i=e&&this._allowHeaderResize;t.enableHorizontalResize(i,this._columnLayoutManager)},e.prototype.getEstimatedTextWidth=function(e){return-1},e.prototype.measureSampleText=function(e){},e}();i.TablixLayoutManager=p;var g=function(n){function o(e,t,i,a,r){n.call(this,e,i,new l(this,i,r),new h(this,i,a)),this._sizeComputationManager=t}return __extends(o,n),o.createLayoutManager=function(e){var t=new r;return new o(e,t,new i.TablixGrid(new i.DashboardTablixGridPresenter(t)),new i.RowRealizationManager(e),new i.ColumnRealizationManager(e))},o.prototype.getTablixClassName=function(){return"bi-dashboard-tablix"},o.prototype.getLayoutKind=function(){return 1},o.prototype.showEmptySpaceHeader=function(){return!1},o.prototype.measureSampleText=function(i){var r=e.TextMeasurementService.getSvgMeasurementProperties(i);this._characterHeight=e.TextMeasurementService.estimateSvgTextHeight(r),this._sizeComputationManager.updateRowHeight(this._characterHeight);var n=a.toPoint(parseFloat(r.fontSize)),o=n/t.TablixDefaultTextSize;this._sizeComputationManager.updateScalingFactor(e.Double.toIncrement(o,.05))},o.prototype.getVisibleWidth=function(){return this._sizeComputationManager.visibleWidth},o.prototype.getVisibleHeight=function(){return this._sizeComputationManager.visibleHeight},o.prototype.getCellWidth=function(e){return this._sizeComputationManager.cellWidth},o.prototype.getContentWidth=function(e){return this._sizeComputationManager.contentWidth},o.prototype.getEstimatedTextWidth=function(e){return this._sizeComputationManager.contentWidth},o.prototype.adjustContentSize=function(e){this._sizeComputationManager.hasImageContent=e},o.prototype.updateColumnCount=function(e,t){var i=e?e.getDepth():0,a=t?t.getItemsCount():0,r=i+a;this.binder.hasRowGroups()||r--,this._sizeComputationManager.updateColumnCount(r)},o.prototype.updateViewport=function(e){this._sizeComputationManager.updateViewport(e)},o.prototype.getEstimatedRowHeight=function(){return this._characterHeight},o}(p);i.DashboardTablixLayoutManager=g;var m=function(e){function a(t,i,a,r){e.call(this,t,i,new u(this,i,r),new d(this,i,a))}return __extends(a,e),a.createLayoutManager=function(e,r){return new a(e,new i.TablixGrid(new t.internal.CanvasTablixGridPresenter(r)),new i.RowRealizationManager(e),new i.ColumnRealizationManager(e))},a.prototype.getTablixClassName=function(){return"bi-tablix"},a.prototype.getLayoutKind=function(){return 0},a.prototype.measureSampleText=function(e){var i=t.internal.TablixUtils.createDiv();i.style.cssFloat="left",e.appendChild(i);var a=document.createTextNode("a");i.appendChild(a),this.characterWidth=t.HTMLElementUtils.getElementWidth(i),this.characterHeight=t.HTMLElementUtils.getElementHeight(i),i.removeChild(a),e.removeChild(i)},a.prototype.showEmptySpaceHeader=function(){return!this._columnLayoutManager.fillProportionally},a.prototype.getVisibleWidth=function(){return this._columnLayoutManager.measureEnabled?this._owner.autoSizeWidth&&this._owner.maxWidth?this._owner.maxWidth:t.HTMLElementUtils.getElementWidth(this._container):-1},a.prototype.getVisibleHeight=function(){return this._rowLayoutManager.measureEnabled?this._owner.autoSizeHeight&&this._owner.maxHeight?this._owner.maxHeight:t.HTMLElementUtils.getElementHeight(this._container):-1},a.prototype.getCellWidth=function(e){return t.HTMLElementUtils.getElementWidth(e._presenter.tableCell)},a.prototype.getContentWidth=function(e){return t.HTMLElementUtils.getElementWidth(e._presenter.contentElement)},a.prototype.getEstimatedTextWidth=function(e){return e?e.length*this.characterWidth:0},a.prototype.updateColumnCount=function(e,t){},a.prototype.updateViewport=function(e){},a.prototype.getEstimatedRowHeight=function(){return this.characterHeight},a}(p);i.CanvasTablixLayoutManager=m}(i=t.internal||(t.internal={}))}(i=t.controls||(t.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(e){function t(e){if(e)for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function i(e,t){e.style.top=t+"px"}function a(e,t){e.style.left=t+"px"}function r(t,i){e.isAutoSize(i)?t.style.height="auto":t.style.height=i+"px"}function n(t,i){e.isAutoSize(i)?t.style.width="auto":t.style.width=i+"px"}function o(e){return e.offsetWidth}function s(e){return e.offsetHeight}function l(e){return-1===e}function u(t){for(var i=1;t;)i*=e.getScale(t),t=t.parentElement;return i}function c(e){e=$(e);var t=e.css("-webkit-transform")||e.css("-moz-transform")||e.css("-ms-transform")||e.css("-o-transform")||e.css("transform");return t&&(t.match(/\d*\.\d*/)&&Number(t.match(/\d*\.\d*/)[0])||t.match(/\d+/)&&Number(t.match(/\d+/)[0]))||1}e.clearChildren=t,e.setElementTop=i,e.setElementLeft=a,e.setElementHeight=r,e.setElementWidth=n,e.getElementWidth=o,e.getElementHeight=s,e.isAutoSize=l,e.getAccumulatedScale=u,e.getScale=c}(t=e.HTMLElementUtils||(e.HTMLElementUtils={}))}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(i){var a;!function(a){var r,n=InJs.DomFactory;!function(a){function r(){return document.createElement("table")}function o(){var e=document.createElement("div"),t=e.style;return t.whiteSpace="nowrap",t.overflow="hidden",t.lineHeight="normal",e}function s(e,t){var i=t.extension.contentHost,a=null;0===i.childElementCount?(a=document.createElement("a"),i.appendChild(a)):a=i.children[0],a.href=e,a.target="_blank",a.title=e,a.innerText=e}function l(e,t){var i,a=t.extension.contentHost,r=a.parentElement;0===a.childElementCount?(i=document.createElement("img"),a.appendChild(i)):i=a.children[0],r.style.paddingBottom="3px",r.style.paddingTop="3px",i.src=e,i.style.maxHeight="75px",i.style.maxWidth="100px",i.style.height="100%"}function u(e,i){var a=t.KpiUtil.getClassForKpi(e,i)||"";return n.div().addClass(a).css({display:"inline-block","vertical-align":"bottom",margin:"0 1px 1px 0"})}function c(e,t){if(e.sort){var i=e.sort;h(i,t,!0),h(Y(i),t,!1)}else h(2,t,!1)}function h(e,i,r){var n=a.createDiv(),o=document.createElement("i");o.className=1===e?"powervisuals-glyph caret-up":"powervisuals-glyph caret-down",n.className=t.TableBinder.sortIconContainerClassName+" "+(r?"sorted":"future"),n.appendChild(o),i.extension.contentElement.insertBefore(n,i.extension.contentHost)}function d(e,i){return e&&void 0!==i?!!t.KpiUtil.getClassForKpi(e,i):!1}function p(e,t,i,r,n){var o=i.metadata.objects;switch(e.objectName){case"general":a.enumerateGeneralOptions(t,o,r,n);break;case"columns":r&&a.enumerateColumnsOptions(t,o);break;case"header":r&&a.enumerateHeaderOptions(t,o);break;case"rows":r&&a.enumerateRowsOptions(t,o);break;case"values":r&&a.enumerateValuesOptions(t,o);break;case"totals":r&&a.enumerateTotalsOptions(t,o)}}function g(e,t,r,n){if(this.isFormattingPropertiesEnabled)switch(n){case i.TablixType.Table:e.pushInstance({selector:null,objectName:"general",properties:{totals:a.shouldShowTableTotals(t),autoSizeColumnWidth:a.shouldAutoSizeColumnWidth(t),textSize:a.getTextSize(t),outlineColor:a.getTablixOutlineColor(t),outlineWeight:a.getTablixOutlineWeight(t)}});break;case i.TablixType.Matrix:e.pushInstance({selector:null,objectName:"general",properties:{autoSizeColumnWidth:a.shouldAutoSizeColumnWidth(t),textSize:a.getTextSize(t),rowSubtotals:a.shouldShowRowSubtotals(t),columnSubtotals:a.shouldShowColumnSubtotals(t),outlineColor:a.getTablixOutlineColor(t),outlineWeight:a.getTablixOutlineWeight(t)}})}else switch(n){case i.TablixType.Table:e.pushInstance({selector:null,objectName:"general",properties:{totals:a.shouldShowTableTotals(t),autoSizeColumnWidth:a.shouldAutoSizeColumnWidth(t),textSize:a.getTextSize(t)}});break;case i.TablixType.Matrix:case i.TablixType.Table:e.pushInstance({selector:null,objectName:"general",properties:{autoSizeColumnWidth:a.shouldAutoSizeColumnWidth(t),textSize:a.getTextSize(t),rowSubtotals:a.shouldShowRowSubtotals(t),columnSubtotals:a.shouldShowColumnSubtotals(t)}})}}function m(e,t){var i=a.getColumnSeparatorShow(t);e.pushInstance({selector:null,objectName:"columns",properties:{showSeparators:i,separatorColor:i?a.getColumnSeparatorColor(t):a.DefaultColumnSeparatorColor,columnSeparatorWeight:i?a.getColumnSeparatorWeight(t):a.DefaultColumnSeparatorWeight}})}function f(e,t){e.pushInstance({selector:null,objectName:"header",properties:{fontColor:a.getColumnHeaderFontColor(t),backgroundColor:a.getColumnHeaderBackgroundColor(t),outline:a.getColumnHeaderOutlineType(t)}})}function y(e,t){e.pushInstance({selector:null,objectName:"rows",properties:{showSeparators:a.getRowSeparatorShow(t),fontColor:a.getRowHeaderFontColor(t),backgroundColor:a.getRowHeaderBackgroundColor(t),outline:a.getRowHeaderOutlineStyle(t)}})}function v(e,t){e.pushInstance({selector:null,objectName:"values",properties:{fontColor:a.getValuesFontColor(t),backgroundColor:a.getValuesBackgroundColor(t),outline:a.getValuesOutlineType(t)}})}function b(e,t){e.pushInstance({selector:null,objectName:"totals",properties:{fontColor:a.getRowTotalsFontColor(t),backgroundColor:a.getRowTotalsBackgroundColor(t),outline:a.getRowTotalsOutlineType(t),leadingSpace:a.getRowTotalsLeadingSpace(t)}})}function C(e){var t;if(e&&e.metadata&&e.metadata.objects){var i=e.metadata.objects;t={general:{autoSizeColumnWidth:a.shouldAutoSizeColumnWidth(i),textSize:a.getTextSize(i),totals:a.shouldShowTableTotals(i),outlineColor:a.getTablixOutlineColor(i),outlineWeight:a.getTablixOutlineWeight(i)},columns:{showSeparators:a.getColumnSeparatorShow(i),separatorColor:a.getColumnSeparatorColor(i),separatorWeight:a.getColumnSeparatorWeight(i)},header:{fontColor:a.getColumnHeaderFontColor(i),backgroundColor:a.getColumnHeaderBackgroundColor(i),outline:a.getColumnHeaderOutlineType(i)},rows:{showSeparators:a.getRowSeparatorShow(i),fontColor:a.getRowHeaderFontColor(i),backgroundColor:a.getRowHeaderBackgroundColor(i),outline:a.getRowHeaderOutlineStyle(i)},totals:{fontColor:a.getRowTotalsFontColor(i),backgroundColor:a.getRowTotalsBackgroundColor(i),outline:a.getRowTotalsOutlineType(i),leadingSpace:a.getRowTotalsLeadingSpace(i)}}}return t}function S(e){var t;if(e&&e.metadata&&e.metadata.objects){var i=e.metadata.objects;t={general:{autoSizeColumnWidth:a.shouldAutoSizeColumnWidth(i),textSize:a.getTextSize(i),rowSubtotals:a.shouldShowRowSubtotals(i),columnSubtotals:a.shouldShowColumnSubtotals(i),outlineColor:a.getTablixOutlineColor(i),outlineWeight:a.getTablixOutlineWeight(i)},columns:{showSeparators:a.getColumnSeparatorShow(i),separatorColor:a.getColumnSeparatorColor(i),separatorWeight:a.getColumnSeparatorWeight(i)},header:{fontColor:a.getColumnHeaderFontColor(i),backgroundColor:a.getColumnHeaderBackgroundColor(i),outline:a.getColumnHeaderOutlineType(i)},rows:{showSeparators:a.getRowSeparatorShow(i),fontColor:a.getRowHeaderFontColor(i),backgroundColor:a.getRowHeaderBackgroundColor(i),outline:a.getRowHeaderOutlineStyle(i)},values:{fontColor:a.getValuesFontColor(i),backgroundColor:a.getValuesBackgroundColor(i),outline:a.getValuesOutlineType(i)},totals:{fontColor:a.getRowTotalsFontColor(i),backgroundColor:a.getRowTotalsBackgroundColor(i),outline:a.getRowTotalsOutlineType(i),leadingSpace:a.getRowTotalsLeadingSpace(i)}}}return t}function x(t){return e.DataViewObjects.getValue(t,a.TableTotalsProp,a.TableShowTotals)}function w(t){return e.DataViewObjects.getValue(t,a.TablixColumnAutoSizeProp,i.AutoSizeColumnWidthDefault)}function D(t){return e.DataViewObjects.getValue(t,a.TablixTextSizeProp,i.TablixDefaultTextSize)}function P(e){return jsCommon.PixelConverter.fromPoint(e)}function L(e){
return e&&e.general?e.general.rowSubtotals!==!1:!0}function _(e){return e&&e.general?e.general.columnSubtotals!==!1:!0}function N(t){return e.DataViewObjects.getFillColor(t,a.ColumnSeparatorColorProp,a.DefaultColumnSeparatorColor)}function T(t){return e.DataViewObjects.getValue(t,a.ColumnSeparatorWeightProp,a.DefaultColumnSeparatorWeight)}function V(t){return e.DataViewObjects.getFillColor(t,a.TablixOutlineColorProp,a.DefaultOutlineColor)}function M(t){return e.DataViewObjects.getValue(t,a.TablixOutlineWeightProp,a.DefaultOutlineWeight)}function A(t){return e.DataViewObjects.getValue(t,a.ColumnSeparatorShowProp,a.DefaultColumnSeparatorShow)}function R(t){return e.DataViewObjects.getFillColor(t,a.ColumnHeaderFontColorProp,a.DefaultFontColor)}function I(t){return e.DataViewObjects.getFillColor(t,a.ColumnHeaderBackgroundColorProp,a.DefaultBackgroundColor)}function F(t){return e.DataViewObjects.getValue(t,a.ColumnHeaderOutlineProp,a.DefaultOutlineColumnHeader)}function O(t){return e.DataViewObjects.getValue(t,a.RowSeparatorProp,a.DefaultRowSeparatorShow)}function G(t){return e.DataViewObjects.getFillColor(t,a.RowHeaderFontColorProp,a.DefaultFontColor)}function z(t){return e.DataViewObjects.getFillColor(t,a.RowHeaderBackgroundColorProp,a.DefaultBackgroundColor)}function H(t){return e.DataViewObjects.getValue(t,a.RowHeaderOutlineStyleProp,a.DefaultOutlineRowHeader)}function k(t){return e.DataViewObjects.getFillColor(t,a.ValuesFontColorProp,a.DefaultFontColor)}function E(t){return e.DataViewObjects.getFillColor(t,a.ValuesBackgroundColorProp,a.DefaultBackgroundColor)}function W(t){return e.DataViewObjects.getValue(t,a.ValuesOutlineProp,a.DefaultOutlineValues)}function B(t){return e.DataViewObjects.getFillColor(t,a.RowTotalsFontColorProp,a.DefaultFontColor)}function U(t){return e.DataViewObjects.getFillColor(t,a.RowTotalsBackgroundColor,a.DefaultBackgroundColor)}function j(t){return e.DataViewObjects.getValue(t,a.RowTotalsOutlineProp,a.DefaultOutlineRowTotals)}function K(t){return e.DataViewObjects.getValue(t,a.RowTotalsLeadingSpaceProp,a.DefaultRowLeadingSpace)}function Y(e){return 2===e?1:2}function X(e){for(var i=0,a=e.extension.contentElement.children;i<a.length;i++){var r=a[i];if(r.className.indexOf(t.TableBinder.sortIconContainerClassName)>-1)return!0}return!1}function q(e){X(e)&&$(e.extension.contentElement).find("."+t.TableBinder.sortIconContainerClassName).remove()}a.TablixFormatStringProp={objectName:"general",propertyName:"formatString"},a.TableTotalsProp={objectName:"general",propertyName:"totals"},a.TablixColumnAutoSizeProp={objectName:"general",propertyName:"autoSizeColumnWidth"},a.TablixTextSizeProp={objectName:"general",propertyName:"textSize"},a.MatrixRowSubtotalsProp={objectName:"general",propertyName:"rowSubtotals"},a.MatrixColumnSubtotalsProp={objectName:"general",propertyName:"columnSubtotals"},a.TablixOutlineColorProp={objectName:"general",propertyName:"outlineColor"},a.TablixOutlineWeightProp={objectName:"general",propertyName:"outlineWeight"},a.ColumnSeparatorColorProp={objectName:"columns",propertyName:"separatorColor"},a.ColumnSeparatorShowProp={objectName:"columns",propertyName:"showSeparators"},a.ColumnSeparatorWeightProp={objectName:"columns",propertyName:"columnSeparatorWeight"},a.ColumnHeaderFontColorProp={objectName:"header",propertyName:"fontColor"},a.ColumnHeaderBackgroundColorProp={objectName:"header",propertyName:"backgroundColor"},a.ColumnHeaderOutlineProp={objectName:"header",propertyName:"outline"},a.RowSeparatorProp={objectName:"rows",propertyName:"showSeparators"},a.RowHeaderFontColorProp={objectName:"rows",propertyName:"fontColor"},a.RowHeaderBackgroundColorProp={objectName:"rows",propertyName:"backgroundColor"},a.RowHeaderOutlineStyleProp={objectName:"rows",propertyName:"outline"},a.ValuesFontColorProp={objectName:"values",propertyName:"fontColor"},a.ValuesBackgroundColorProp={objectName:"values",propertyName:"backgroundColor"},a.ValuesOutlineProp={objectName:"values",propertyName:"outline"},a.RowTotalsFontColorProp={objectName:"totals",propertyName:"fontColor"},a.RowTotalsBackgroundColor={objectName:"totals",propertyName:"backgroundColor"},a.RowTotalsOutlineProp={objectName:"totals",propertyName:"outline"},a.RowTotalsLeadingSpaceProp={objectName:"totals",propertyName:"leadingSpace"},a.DefaultColumnSeparatorShow=!1,a.DefaultColumnSeparatorColor="#E8E8E8",a.DefaultColumnSeparatorWeight=1,a.DefaultRowSeparatorWeight=1,a.DefaultRowSeparatorColor="#E8E8E8",a.DefaultRowSeparatorShow=!1,a.DefaultBackgroundColor="#FFFFFF",a.DefaultFontColor="#333333",a.DefaultOutlineColor="#E8E8E8",a.DefaultOutlineWeight=2,a.DefaultOutlineColumnHeader="BottomOnly",a.DefaultOutlineRowHeader="None",a.DefaultOutlineValues="LeftOnly",a.DefaultOutlineRowTotals="TopOnly",a.DefaultRowLeadingSpace=0,a.UnitOfMeasurement="px",a.DefaultColumnSeparatorStyle="solid",a.DefaultRowSeparatorStyle="solid",a.TableShowTotals=!0,a.createTable=r,a.createDiv=o,a.appendATagToBodyCell=s,a.appendImgTagToBodyCell=l,a.createKpiDom=u,a.appendSortImageToColumnHeader=c,a.isValidStatusGraphic=d,a.setEnumeration=p,a.enumerateGeneralOptions=g,a.enumerateColumnsOptions=m,a.enumerateHeaderOptions=f,a.enumerateRowsOptions=y,a.enumerateValuesOptions=v,a.enumerateTotalsOptions=b,a.getTableFormattingProperties=C,a.getMatrixFormattingProperties=S,a.shouldShowTableTotals=x,a.shouldAutoSizeColumnWidth=w,a.getTextSize=D,a.getTextSizeInPx=P,a.shouldShowRowSubtotals=L,a.shouldShowColumnSubtotals=_,a.getColumnSeparatorColor=N,a.getColumnSeparatorWeight=T,a.getTablixOutlineColor=V,a.getTablixOutlineWeight=M,a.getColumnSeparatorShow=A,a.getColumnHeaderFontColor=R,a.getColumnHeaderBackgroundColor=I,a.getColumnHeaderOutlineType=F,a.getRowSeparatorShow=O,a.getRowHeaderFontColor=G,a.getRowHeaderBackgroundColor=z,a.getRowHeaderOutlineStyle=H,a.getValuesFontColor=k,a.getValuesBackgroundColor=E,a.getValuesOutlineType=W,a.getRowTotalsFontColor=B,a.getRowTotalsBackgroundColor=U,a.getRowTotalsOutlineType=j,a.getRowTotalsLeadingSpace=K,a.reverseSort=Y,a.removeSortIcons=q}(r=a.TablixUtils||(a.TablixUtils={}))}(a=i.internal||(i.internal={}))}(i=t.controls||(t.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){e.TablixDefaultTextSize=jsCommon.TextSizeDefaults.TextSizeMin;var t=function(){function t(i,a,r,n,o){var s=this;this.scrollBarElementWidth=9,this.options=o;var l=o.interactive;this.isTouchEnabled=l&&o.enableTouchSupport,this.mainDiv=e.internal.TablixUtils.createDiv();var u=this.mainDiv.style;u.position="absolute",u.left="0px",u.top="0px",this.footerDiv=e.internal.TablixUtils.createDiv();var c=this.footerDiv.style;c.position="absolute",c.left="0px",this.isTouchEnabled&&this.InitializeTouchSupport(),this.gridDimensions={},this.containerElement=e.internal.TablixUtils.createDiv(),this.className=a.getTablixClassName(),this.autoSizeWidth=!1,this.autoSizeHeight=!1,this.fontSize=o.fontSize,n.className=t.TablixContainerClassName,n.appendChild(this.containerElement),this.containerElement.addEventListener("mousewheel",function(e){s.onMouseWheel(e)}),this.containerElement.addEventListener("DOMMouseScroll",function(e){s.onFireFoxMouseWheel(e)}),this.containerElement.appendChild(this.mainDiv),this.containerElement.appendChild(this.footerDiv),this.isTouchEnabled&&(this.touchInterpreter.initTouch(this.mainDiv,null,!1),this.footerTouchInterpreter.initTouch(this.footerDiv,this.mainDiv,!1)),this.controlLayoutManager=a,this.controlLayoutManager.initialize(this),this.hierarchyTablixNavigator=i,this.binder=r,this.columnDim=new e.TablixColumnDimension(this),this.rowDim=new e.TablixRowDimension(this),this.columnDim._otherDimension=this.rowDimension,this.rowDim._otherDimension=this.columnDimension,this.InitializeScrollbars(),l||(this.scrollbarWidth=0),this.updateHorizontalPosition(),this.updateVerticalPosition(),this.updateFooterVisibility(),this.lastRenderingArgs={}}return t.prototype.InitializeTouchSupport=function(){this.touchManager=new e.TouchUtils.TouchManager,this.touchInterpreter=new e.TouchUtils.TouchEventInterpreter(this.touchManager),this.footerTouchInterpreter=new e.TouchUtils.TouchEventInterpreter(this.touchManager),this.columnTouchDelegate=new e.ColumnTouchDelegate(new e.TouchUtils.Rectangle),this.rowTouchDelegate=new e.RowTouchDelegate(new e.TouchUtils.Rectangle),this.bodyTouchDelegate=new e.BodyTouchDelegate(new e.TouchUtils.Rectangle),this.footerTouchDelegate=new e.ColumnTouchDelegate(new e.TouchUtils.Rectangle),this.columnTouchDelegate.setHandler(this,this.onTouchEvent),this.rowTouchDelegate.setHandler(this,this.onTouchEvent),this.bodyTouchDelegate.setHandler(this,this.onTouchEvent),this.footerTouchDelegate.setHandler(this,this.onTouchEvent),this.touchManager.addTouchRegion(this.columnTouchDelegate.dimension,this.columnTouchDelegate,this.columnTouchDelegate),this.touchManager.addTouchRegion(this.rowTouchDelegate.dimension,this.rowTouchDelegate,this.rowTouchDelegate),this.touchManager.addTouchRegion(this.bodyTouchDelegate.dimension,this.bodyTouchDelegate,this.bodyTouchDelegate),this.touchManager.addTouchRegion(this.footerTouchDelegate.dimension,this.footerTouchDelegate,this.footerTouchDelegate)},t.prototype.InitializeScrollbars=function(){this.rowDim._initializeScrollbar(this.containerElement,null);var e=this.rowDim.scrollbar.element.style;e.position="absolute",e.top="0"+t.UnitOfMeasurement,e.right="0"+t.UnitOfMeasurement,this.rowDim.scrollbar.width=this.scrollBarElementWidth+t.UnitOfMeasurement,this.rowDim.scrollbar.show(!0),this.columnDim._initializeScrollbar(this.containerElement,null);var i=this.columnDim.scrollbar.element.style;i.position="absolute",i.left="0"+t.UnitOfMeasurement,i.bottom="0"+t.UnitOfMeasurement,this.columnDim.scrollbar.height=this.scrollBarElementWidth+t.UnitOfMeasurement,this.columnDim.scrollbar.show(!1)},Object.defineProperty(t.prototype,"container",{get:function(){return this.containerElement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"contentHost",{get:function(){return this.mainDiv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"footerHost",{get:function(){return this.footerDiv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"className",{set:function(e){this.containerElement.className=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hierarchyNavigator",{get:function(){return this.hierarchyTablixNavigator},enumerable:!0,configurable:!0}),t.prototype.getBinder=function(){return this.binder},Object.defineProperty(t.prototype,"autoSizeWidth",{get:function(){return this._autoSizeWidth},set:function(e){this._autoSizeWidth=e,this._autoSizeWidth?this.removeFixSizedClassName():(this.addFixedSizeClassNameIfNeeded(),this.containerElement.style.minWidth=this.containerElement.style.maxWidth="none")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoSizeHeight",{get:function(){return this._autoSizeHeight},set:function(e){this._autoSizeHeight=e,this._autoSizeHeight?this.removeFixSizedClassName():(this.addFixedSizeClassNameIfNeeded(),this.containerElement.style.minHeight=this.containerElement.style.maxHeight="none")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxWidth",{get:function(){return this.maximumWidth},set:function(e){this.maximumWidth=e,this.containerElement.style.maxWidth=this.maximumWidth+t.UnitOfMeasurement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewport",{get:function(){return this.viewPort},set:function(e){this.viewPort=e,this.containerElement.style.width=this.viewPort.width+t.UnitOfMeasurement,this.containerElement.style.height=this.viewPort.height+t.UnitOfMeasurement,this.rowDim.scrollbar.invalidateArrange(),this.columnDim.scrollbar.invalidateArrange(),this.controlLayoutManager.updateViewport(this.viewPort)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxHeight",{get:function(){return this.maximumHeight},set:function(e){this.maximumHeight=e,this.containerElement.style.maxHeight=this.maximumHeight+t.UnitOfMeasurement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minWidth",{get:function(){return this.minimumWidth},set:function(e){this.minimumWidth=e,this.containerElement.style.minWidth=this.minimumWidth+t.UnitOfMeasurement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minHeight",{get:function(){return this.minimumHeight},set:function(e){this.minimumHeight=e,this.containerElement.style.minHeight=this.minimumHeight+t.UnitOfMeasurement},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{set:function(e){this.textFontSize=e?e:t.DefaultFontSize,this.containerElement.style.fontSize=this.textFontSize},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollbarWidth",{set:function(e){this.scrollBarElementWidth=e,this.rowDim.scrollbar.width=this.scrollBarElementWidth+t.UnitOfMeasurement,this.columnDim.scrollbar.height=this.scrollBarElementWidth+t.UnitOfMeasurement},enumerable:!0,configurable:!0}),t.prototype.updateModels=function(e,t,i){t&&(this.rowDim.model=t,e&&(this.rowDim.scrollOffset=0)),i&&(this.columnDim.model=i,e&&(this.columnDim.scrollOffset=0)),this.layoutManager.updateColumnCount(this.rowDim,this.columnDim)},t.prototype.updateColumnDimensions=function(e,t,i){var a=this.gridDimensions;a.columnCount=i,a.rowHierarchyWidth=e,a.columnHierarchyWidth=t},t.prototype.updateRowDimensions=function(e,t,i,a,r){var n=this.gridDimensions;n.rowCount=a,n.rowHierarchyHeight=t,n.rowHierarchyContentHeight=i,n.columnHierarchyHeight=e,n.footerHeight=r},t.prototype.updateTouchDimensions=function(){var e=this.gridDimensions;this.columnTouchDelegate.resize(e.rowHierarchyWidth,0,e.columnHierarchyWidth,e.columnHierarchyHeight),this.columnTouchDelegate.setScrollDensity(e.columnCount/e.columnHierarchyWidth),this.rowTouchDelegate.resize(0,e.columnHierarchyHeight,e.rowHierarchyWidth,e.rowHierarchyHeight),this.rowTouchDelegate.setScrollDensity(e.rowCount/e.rowHierarchyHeight),this.bodyTouchDelegate.resize(e.rowHierarchyWidth,e.columnHierarchyHeight,e.columnHierarchyWidth,e.rowHierarchyHeight),this.bodyTouchDelegate.setScrollDensity(e.columnCount/e.columnHierarchyWidth,e.rowCount/e.rowHierarchyHeight),this.footerTouchDelegate.resize(e.rowHierarchyWidth,e.columnHierarchyHeight+e.rowHierarchyHeight,e.columnHierarchyWidth,e.footerHeight),this.footerTouchDelegate.setScrollDensity(e.columnCount/e.columnHierarchyWidth)},t.prototype.onMouseWheel=function(e){var t=this.determineDimensionToScroll();t&&t.scrollbar.onMouseWheel(e)},t.prototype.onFireFoxMouseWheel=function(e){var t=this.determineDimensionToScroll();t&&t.scrollbar.onFireFoxMouseWheel(e)},t.prototype.determineDimensionToScroll=function(){return this.rowDim.scrollbar.visible?this.rowDim:this.columnDim.scrollbar.visible?this.columnDim:null},Object.defineProperty(t.prototype,"layoutManager",{get:function(){return this.controlLayoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"columnDimension",{get:function(){return this.columnDim},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowDimension",{get:function(){return this.rowDim},enumerable:!0,configurable:!0}),t.prototype.refresh=function(e){this.render(e,null)},t.prototype._onScrollAsync=function(e){var t=this;requestAnimationFrame(function(){t.performPendingScroll(e)})},t.prototype.performPendingScroll=function(e){this.render(!1,e)},t.prototype.updateHorizontalPosition=function(){this.rowDim.scrollbar.visible?(this.columnDim.scrollbar.element.style.right=this.scrollBarElementWidth+t.UnitOfMeasurement,this.footerDiv.style.right=this.scrollBarElementWidth+t.UnitOfMeasurement,this.mainDiv.style.right=this.scrollBarElementWidth+t.UnitOfMeasurement):(this.columnDim.scrollbar.element.style.right="0"+t.UnitOfMeasurement,this.mainDiv.style.right="0"+t.UnitOfMeasurement,this.footerDiv.style.right="0"+t.UnitOfMeasurement)},t.prototype.updateFooterVisibility=function(){(this.rowDim.hasFooter()?"block"!==this.footerDiv.style.display:"none"!==this.footerDiv.style.display)&&(this.rowDim.hasFooter()?this.footerDiv.style.display="block":this.footerDiv.style.display="none")},t.prototype.updateVerticalPosition=function(){var e=0;this.rowDim.hasFooter()&&(e=this.gridDimensions.footerHeight),this.footerDiv.style.height=e+t.UnitOfMeasurement;var i=this.rowDim.scrollbar.visible,a=1===this.controlLayoutManager.getLayoutKind(),r=i||a;if(r){var n=e,o=0,s=0,l=this.columnDim.scrollbar.visible;l&&(n+=this.scrollBarElementWidth,o+=this.scrollBarElementWidth,s=this.scrollBarElementWidth),this.mainDiv.style.bottom=n+t.UnitOfMeasurement,this.rowDim.scrollbar.element.style.bottom=s+t.UnitOfMeasurement,this.footerDiv.style.bottom=o+t.UnitOfMeasurement,this.footerDiv.style.removeProperty("top")}else this.footerDiv.style.top=this.gridDimensions.rowHierarchyContentHeight+t.UnitOfMeasurement,this.footerDiv.style.removeProperty("bottom"),this.mainDiv.style.removeProperty("bottom")},t.prototype.alreadyRendered=function(e){return e!==this.lastRenderingArgs.scrollingDimension||this.rowDimension.scrollOffset!==this.lastRenderingArgs.rowScrollOffset||this.columnDimension.scrollOffset!==this.lastRenderingArgs.columnScrollOffset?!1:!0},t.prototype.render=function(e,i){if(this.columnDim.makeScrollOffsetValid(),this.rowDim.makeScrollOffsetValid(),e||null===i)this.lastRenderingArgs={};else if(this.alreadyRendered(i))return;var a=!1;this.renderIterationCount=0,this.controlLayoutManager.onStartRenderingSession(i,this.mainDiv,e);var r=this.binder;r.onStartRenderingSession();for(var n=this.gridDimensions.footerHeight,o=this.gridDimensions.rowHierarchyHeight,s=this.gridDimensions.rowHierarchyContentHeight;!a&&this.renderIterationCount<t.MaxRenderIterationCount;){var l=this.columnDim.scrollbar.visible,u=this.rowDim.scrollbar.visible;this.columnDim._onStartRenderingIteration(),this.rowDim._onStartRenderingIteration(),this.controlLayoutManager.onStartRenderingIteration(e),this.renderCorner(),this.columnDim._render(),this.rowDim._render(),a=this.controlLayoutManager.onEndRenderingIteration(),this.columnDim._onEndRenderingIteration(),this.rowDim._onEndRenderingIteration(),l!==this.columnDim.scrollbar.visible&&this.updateVerticalPosition(),u!==this.rowDim.scrollbar.visible&&this.updateHorizontalPosition(),this.renderIterationCount++}this.controlLayoutManager.onEndRenderingSession(),r.onEndRenderingSession(),this.isTouchEnabled&&this.updateTouchDimensions(),this.lastRenderingArgs.rowScrollOffset=this.rowDimension.scrollOffset,this.lastRenderingArgs.columnScrollOffset=this.columnDimension.scrollOffset,this.updateContainerDimensions();var c=this.lastRenderingArgs;c.rowScrollOffset=this.rowDimension.scrollOffset,c.columnScrollOffset=this.columnDimension.scrollOffset,c.scrollingDimension=i,(n!==this.gridDimensions.footerHeight||o!==this.gridDimensions.rowHierarchyHeight||s!==this.gridDimensions.rowHierarchyContentHeight)&&this.updateVerticalPosition(),this.options.interactive&&(this.columnDim.scrollbar.refresh(),this.rowDim.scrollbar.refresh())},t.prototype.updateContainerDimensions=function(){var e=this.gridDimensions;if(this._autoSizeWidth){var i=this.rowDim.scrollbar.visible?this.scrollBarElementWidth:0;this.containerElement.style.width=e.rowHierarchyWidth+e.columnHierarchyWidth+i+t.UnitOfMeasurement}if(this._autoSizeHeight){var a=this.columnDim.scrollbar.visible?this.scrollBarElementWidth:0;this.containerElement.style.height=e.columnHierarchyHeight+e.rowHierarchyHeight+e.footerHeight+a+t.UnitOfMeasurement}},t.prototype.cornerCellMatch=function(e,t){var i=t.item;return 0===t.type&&i&&this.hierarchyTablixNavigator.cornerCellItemEquals(e,i)},t.prototype.renderCorner=function(){for(var e=this.columnDim.getDepth(),t=this.rowDim.getDepth(),i=0;e>i;i++)for(var a=0;t>a;a++){var r=this.hierarchyTablixNavigator.getCorner(a,i),n=this.controlLayoutManager.getOrCreateCornerCell(r,a,i),o=this.cornerCellMatch(r,n);o||(this._unbindCell(n),n.type=0,n.item=r,this.binder.bindCornerCell(r,n)),this.controlLayoutManager.onCornerCellRealized(r,n)}},t.prototype._unbindCell=function(e){switch(e.type){case 3:this.binder.unbindBodyCell(e.item,e);break;case 2:this.binder.unbindColumnHeader(e.item,e);break;case 1:this.binder.unbindRowHeader(e.item,e);break;case 0:this.binder.unbindCornerCell(e.item,e)}e.item=null,e.type=null},t.prototype.onTouchEvent=function(e){var t,i,a;e&&e.length>0&&"columnDim"in e[0]&&"rowDim"in e[0]&&(a=e[0],t=a.columnDim.scrollbar.visible?e[1]:0,i=a.rowDim.scrollbar.visible?e[2]:0,a.columnDim.scrollbar.viewMin=Math.max(0,a.columnDim.scrollbar.viewMin+t),a.columnDim.scrollOffset=Math.max(0,a.columnDim.scrollOffset+t),a.rowDim.scrollbar.viewMin=Math.max(0,a.rowDim.scrollbar.viewMin+i),a.rowDim.scrollOffset=Math.max(0,a.rowDim.scrollOffset+i),0===t?a._onScrollAsync(a.rowDim):0===i?a._onScrollAsync(a.columnDim):a._onScrollAsync(null))},t.prototype.addFixedSizeClassNameIfNeeded=function(){this._autoSizeHeight||this._autoSizeWidth||-1!==this.containerElement.className.indexOf(t.TablixFixSizedClassName)||(this.containerElement.className+=" "+t.TablixFixSizedClassName)},t.prototype.removeFixSizedClassName=function(){this.containerElement.className=this.containerElement.className.replace(t.TablixFixSizedClassName,"")},t.UnitOfMeasurement="px",t.TablixContainerClassName="tablixContainer",t.TablixFixSizedClassName="bi-tablix-fixed-size",t.DefaultFontSize=jsCommon.PixelConverter.fromPoint(e.TablixDefaultTextSize),t.MaxRenderIterationCount=10,t}();e.TablixControl=t}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t=function(){function e(e){this._scrollStep=.1,this._owner=e,this._hierarchyNavigator=e.hierarchyNavigator,this._binder=e.getBinder(),this._tablixLayoutManager=e.layoutManager,this.scrollOffset=0}return e.prototype._onStartRenderingIteration=function(){this.updateScrollPosition()},e.prototype._onEndRenderingIteration=function(){},e.prototype.getValidScrollOffset=function(e){return Math.min(Math.max(e,0),Math.max(this.getItemsCount()-this._scrollStep,0))},e.prototype.makeScrollOffsetValid=function(){this.scrollOffset=this.getValidScrollOffset(this.scrollOffset)},e.prototype.getIntegerScrollOffset=function(){return Math.floor(this.scrollOffset)},e.prototype.getFractionScrollOffset=function(){return this.scrollOffset-this.getIntegerScrollOffset()},Object.defineProperty(e.prototype,"scrollbar",{get:function(){return this._scrollbar},enumerable:!0,configurable:!0}),e.prototype.getFirstVisibleItem=function(e){return this._scrollItems[e]},e.prototype.getFirstVisibleChild=function(e){return this._hierarchyNavigator.getAt(this._hierarchyNavigator.getChildren(e),this.getFirstVisibleChildIndex(e))},e.prototype.getFirstVisibleChildIndex=function(e){var t,i=this.getFirstVisibleItem(this._hierarchyNavigator.getLevel(e)+1);return t=void 0===i||void 0!==i&&this._hierarchyNavigator.getParent(i)!==e?0:this._hierarchyNavigator.getIndex(i)},e.prototype._initializeScrollbar=function(e,t){var i=this;this._scrollbar=this._createScrollbar(e),this._scrollbar._onscroll.push(function(e){return i.onScroll()}),t&&(this.scrollbar.initTouch(t,!0),t.style.setProperty("-ms-touch-action","pinch-zoom"))},e.prototype.getItemsCount=function(){return this.model?this._hierarchyNavigator.getLeafCount(this.model):0},e.prototype.getDepth=function(){return this.model?this._hierarchyNavigator.getDepth(this.model):0},e.prototype.onScroll=function(){this.scrollOffset=this._scrollbar.viewMin,this._owner._onScrollAsync(this)},Object.defineProperty(e.prototype,"otherDimension",{get:function(){return this._otherDimension},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!0,configurable:!0}),e.prototype._createScrollbar=function(e){return null},e.prototype.updateScrollPosition=function(){if(this._scrollItems=[],this.model){var e=this.getIntegerScrollOffset(),t=this._hierarchyNavigator.getLeafAt(this.model,e);if(t){this._firstVisibleScrollIndex=e;do this._scrollItems[this._hierarchyNavigator.getLevel(t)]=t,t=this._hierarchyNavigator.getParent(t);while(null!==t)}}},e}();e.TablixDimension=t;var i=function(t){function i(e){t.call(this,e),this._layoutManager=this._tablixLayoutManager.rowLayoutManager,this._footer=null}return __extends(i,t),i.prototype.setFooter=function(e){this._footer=e,this._owner.updateFooterVisibility()},i.prototype.hasFooter=function(){return null!==this._footer},i.prototype._render=function(){var e=this.getFirstVisibleItem(0);this.hasFooter()&&(this.addFooterRowHeader(this._footer),this.addFooterBodyCells(this._footer)),void 0!==e&&this.addNodes(this.model,0,this.getDepth(),this._hierarchyNavigator.getIndex(e))},i.prototype._createScrollbar=function(t){return new e.VerticalScrollbar(t)},i.prototype.addNodes=function(e,t,i,a){for(var r=this._hierarchyNavigator.getCount(e),n=a;r>n;n++){if(!this._layoutManager.needsToRealize)return;var o=this._hierarchyNavigator.getAt(e,n),s=this.addNode(o,e,t,i);t+=s.rowSpan}},i.prototype.getFirstVisibleChildLeaf=function(e){for(var t=e;!this._hierarchyNavigator.isLeaf(t);)t=this.getFirstVisibleChild(t);return t},i.prototype.bindRowHeader=function(e,t){this._binder.bindRowHeader(e,t)},i.prototype.addNode=function(e,t,i,a){var r,n=this._tablixLayoutManager.getOrCreateRowHeader(e,t,i,this._hierarchyNavigator.getLevel(e)),o=this.rowHeaderMatch(e,n);return o||(this._owner._unbindCell(n),n.type=1,n.item=e),this._hierarchyNavigator.isLeaf(e)?(n.colSpan=a-this._hierarchyNavigator.getLevel(e),n.rowSpan=1,o||this.bindRowHeader(e,n),this._tablixLayoutManager.onRowHeaderRealized(e,n),this.addBodyCells(e,t,i)):(r=this._layoutManager.getRealizedItemsCount(),this.addNodes(this._hierarchyNavigator.getChildren(e),i,a,this.getFirstVisibleChildIndex(e)),n.colSpan=1,n.rowSpan=this._layoutManager.getRealizedItemsCount()-r+1,o||this.bindRowHeader(e,n),this._tablixLayoutManager.onRowHeaderRealized(e,n)),n},i.prototype.rowHeaderMatch=function(e,t){var i=t.item;return 1===t.type&&i&&this._hierarchyNavigator.headerItemEquals(e,i)},i.prototype.addBodyCells=function(e,t,i){for(var a=this._otherDimension.getIntegerScrollOffset(),r=this._otherDimension._layoutManager.getRealizedItemsCount()-this.getDepth(),n=this._hierarchyNavigator,o=this._otherDimension.model,s=this._tablixLayoutManager,l=0;r>l;l++){var u=n.getIntersection(e,n.getLeafAt(o,a+l)),c=s.getOrCreateBodyCell(u,e,t,i,l);this.bindBodyCell(u,c),s.onBodyCellRealized(u,c)}},i.prototype.bindBodyCell=function(e,t){var i=this.bodyCelMatch(e,t);i||(this._owner._unbindCell(t),t.type=3,t.item=e,this._binder.bindBodyCell(e,t))},i.prototype.addFooterRowHeader=function(e){var t=this._tablixLayoutManager.getOrCreateFooterRowHeader(e,this.model);t.colSpan=this.getDepth();var i=this.rowHeaderMatch(e,t);i||(this._owner._unbindCell(t),t.type=1,t.item=e,this.bindRowHeader(e,t),this._tablixLayoutManager.onRowHeaderFooterRealized(e,t))},i.prototype.addFooterBodyCells=function(e){for(var t=this._otherDimension.getIntegerScrollOffset(),i=this._otherDimension.layoutManager.getRealizedItemsCount()-this.getDepth(),a=this._tablixLayoutManager,r=0;i>r;r++){var n=this._hierarchyNavigator.getLeafAt(this._otherDimension.model,t+r),o=this._hierarchyNavigator.getIntersection(e,n),s=a.getOrCreateFooterBodyCell(o,r);this.bindBodyCell(o,s),a.onBodyCellFooterRealized(o,s)}},i.prototype.bodyCelMatch=function(e,t){var i=t.item;return 3===t.type&&i&&this._hierarchyNavigator.bodyCellItemEquals(e,i)},i}(t);e.TablixRowDimension=i;var a=function(t){function i(e){t.call(this,e),this._layoutManager=this._tablixLayoutManager.columnLayoutManager}return __extends(i,t),i.prototype._render=function(){var e=this.getFirstVisibleItem(0);void 0!==e&&this.addNodes(this.model,0,this.getDepth(),this._hierarchyNavigator.getIndex(e))},i.prototype._createScrollbar=function(t){var i=new e.HorizontalScrollbar(t);return i.smallIncrement=.2,i},i.prototype.addNodes=function(e,t,i,a){for(var r=this._hierarchyNavigator.getCount(e),n=a;r>n;n++){if(!this._layoutManager.needsToRealize)return;var o=this.addNode(this._hierarchyNavigator.getAt(e,n),e,t,i);t+=o.colSpan}},i.prototype.addNode=function(e,t,i,a){var r=this._tablixLayoutManager.getOrCreateColumnHeader(e,t,this._hierarchyNavigator.getLevel(e),i),n=this.columnHeaderMatch(e,r);if(n||(this._owner._unbindCell(r),r.type=2,r.item=e),this._hierarchyNavigator.isLeaf(e))r.rowSpan=a-this._hierarchyNavigator.getLevel(e);else{var o=this._layoutManager.getRealizedItemsCount();this.addNodes(this._hierarchyNavigator.getChildren(e),i,a,this.getFirstVisibleChildIndex(e)),r.rowSpan=1,r.colSpan=this._layoutManager.getRealizedItemsCount()-o+1}return n||this._binder.bindColumnHeader(e,r),this._tablixLayoutManager.onColumnHeaderRealized(e,r),r},i.prototype.columnHeaderMatch=function(e,t){var i=t.item;return 2===t.type&&i&&this._hierarchyNavigator.headerItemEquals(e,i)},i}(t);e.TablixColumnDimension=a}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t=function(){function t(e){this.dim=e,this.averageSize=1,this.handlers=null,this.tablixControl=null}return Object.defineProperty(t.prototype,"dimension",{get:function(){return this.dim},enumerable:!0,configurable:!0}),t.prototype.setScrollDensity=function(e){this.averageSize=e},t.prototype.resize=function(e,t,i,a){this.dim.x=e,this.dim.y=t,this.dim.width=i,this.dim.height=a},t.prototype.getPixelToItem=function(t,i,a,r,n){return new e.TouchUtils.TouchEvent(t*this.averageSize,0,n,-a*this.averageSize,0)},t.prototype.touchEvent=function(t){var i=[];i[0]=this.tablixControl,i[1]=t.dx,i[2]=t.dy,this.handlers&&e.fire([this.handlers],i)},t.prototype.setHandler=function(e,t){this.handlers=t,this.tablixControl=e},t}();e.ColumnTouchDelegate=t;var i=function(){function t(e){this.dim=e,this.averageSize=30,this.handlers=null,this.tablixControl=null}return Object.defineProperty(t.prototype,"dimension",{get:function(){return this.dim},enumerable:!0,configurable:!0}),t.prototype.setScrollDensity=function(e){this.averageSize=e},t.prototype.resize=function(e,t,i,a){this.dim.x=e,this.dim.y=t,this.dim.width=i,this.dim.height=a},t.prototype.getPixelToItem=function(t,i,a,r,n){var o=new e.TouchUtils.TouchEvent(0,i*this.averageSize,n,0,-r*this.averageSize);return o},t.prototype.touchEvent=function(t){var i=[];i[0]=this.tablixControl,i[1]=t.dx,i[2]=t.dy,this.handlers&&e.fire([this.handlers],i)},t.prototype.setHandler=function(e,t){this.handlers=t,this.tablixControl=e},t}();e.RowTouchDelegate=i;var a=function(){function t(e){this.dim=e,this.averageSizeX=t.DefaultAverageSizeX,this.averageSizeY=t.DefaultAverageSizeY,this.handlers=null,this.tablixControl=null}return Object.defineProperty(t.prototype,"dimension",{get:function(){return this.dim},enumerable:!0,configurable:!0}),t.prototype.setScrollDensity=function(e,t){this.averageSizeX=e,this.averageSizeY=t},t.prototype.resize=function(e,t,i,a){var r=this.dim;r.x=e,r.y=t,r.width=i,r.height=a},t.prototype.getPixelToItem=function(t,i,a,r,n){return new e.TouchUtils.TouchEvent(t*this.averageSizeX,i*this.averageSizeY,n,-a*this.averageSizeX,-r*this.averageSizeY)},t.prototype.touchEvent=function(t){var i=[this.tablixControl,t.dx,t.dy];this.handlers&&e.fire([this.handlers],i)},t.prototype.setHandler=function(e,t){this.handlers=t,this.tablixControl=e},t.DefaultAverageSizeX=30,t.DefaultAverageSizeY=30,t}();e.BodyTouchDelegate=a}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){var i=function(){function e(e,t){this.x=e||0,this.y=t||0}return e.prototype.offset=function(e,t){this.x+=e,this.y+=t},e}();t.Point=i;var a=function(e){function t(t,i,a,r){e.call(this,t,i),this.width=a||0,this.height=r||0}return __extends(t,e),Object.defineProperty(t.prototype,"point",{get:function(){
return new i(this.x,this.y)},enumerable:!0,configurable:!0}),t.prototype.contains=function(e){return t.contains(this,e)},t.contains=function(e,i){return i&&!t.isEmpty(e)?e.x<=i.x&&i.x<e.x+e.width&&e.y<=i.y&&i.y<e.y+e.height:!1},t.isEmpty=function(e){return!(void 0!==e&&e.width>=0&&e.height>=0)},t}(i);t.Rectangle=a,function(e){e[e.NoClick=0]="NoClick",e[e.LeftClick=1]="LeftClick",e[e.RightClick=2]="RightClick",e[e.CenterClick=3]="CenterClick"}(t.MouseButton||(t.MouseButton={}));var r=t.MouseButton,n=function(){function e(e,t,i,a,r){this._x=e,this._y=t,this.isMouseButtonDown=i,this._dx=a||0,this._dy=r||0}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dx",{get:function(){return this._dx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dy",{get:function(){return this._dy},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMouseDown",{get:function(){return this.isMouseButtonDown},enumerable:!0,configurable:!0}),e}();t.TouchEvent=n;var o=function(){function e(){this.touchList=[],this.swipeDirection=2,this.matchingDirectionCount=0,this.lockThreshold=!0,this.scrollThreshold=!0,this.lastTouchEvent=new n(0,0,!1)}return Object.defineProperty(e.prototype,"lastEvent",{get:function(){return this.lastTouchEvent},enumerable:!0,configurable:!0}),e.prototype.addTouchRegion=function(e,t,i){var a={lastPoint:new n(0,0,!1),handler:t,region:e,converter:i};this.touchList=this.touchList.concat([a])},e.prototype.upAllTouches=function(){var e,t;t=this.touchList.length;for(var i=0;t>i;i++)this.touchList[i].lastPoint.isMouseDown&&(e=this.touchList[i].converter.getPixelToItem(this.touchList[i].lastPoint.x,this.touchList[i].lastPoint.y,0,0,!1),this.touchList[i].handler.touchEvent(e)),this.touchList[i].lastPoint=new n(this.touchList[i].lastPoint.x,this.touchList[i].lastPoint.y,!1);this.lastTouchEvent=new n(0,0,!1)},e.prototype.touchEvent=function(e){var t,i,a=0,r=0,o=0,s=0,l=0,u=null;t=this._getActive(),!this.lastTouchEvent.isMouseDown&&e.isMouseDown&&(t=this._findRegions(e)),o=this.lastTouchEvent.x-e.x,s=this.lastTouchEvent.y-e.y,this.lastTouchEvent=new n(e.x,e.y,e.isMouseDown,o,s),i=t.length;for(var c=0;i>c;c++)a=e.x-t[c].region.point.x,r=e.y-t[c].region.point.y,t[c].lastPoint.isMouseDown&&e.isMouseDown?(o=a-t[c].lastPoint.x,s=r-t[c].lastPoint.y,l=Math.abs(180/Math.PI*Math.atan(s/o)),this.scrollThreshold&&(this.lockThreshold&&this.matchingDirectionCount>5?1===this.swipeDirection?s=0:0===this.swipeDirection&&(o=0):20>l?(s=0,1===this.swipeDirection?this.matchingDirectionCount++:(this.matchingDirectionCount=1,this.swipeDirection=1)):(l=Math.abs(180/Math.PI*Math.atan(o/s)),20>l?(o=0,0===this.swipeDirection?this.matchingDirectionCount++:(this.matchingDirectionCount=1,this.swipeDirection=0)):2===this.swipeDirection?this.matchingDirectionCount++:(this.swipeDirection=2,this.matchingDirectionCount=1)))):(o=0,s=0,this.swipeDirection=2,this.matchingDirectionCount=0),t[c].lastPoint=new n(a,r,e.isMouseDown,o,s),u=t[c].converter.getPixelToItem(a,r,o,s,e.isMouseDown),t[c].handler.touchEvent(u)},e.prototype._findRegions=function(e){var t,a=[];t=this.touchList.length;for(var r=0;t>r;r++)this.touchList[r].region.contains(new i(e.x,e.y))&&(a=a.concat([this.touchList[r]]));return a},e.prototype._getActive=function(){var e,t=[];e=this.touchList.length;for(var i=0;e>i;i++)this.touchList[i].lastPoint.isMouseDown&&(t=t.concat([this.touchList[i]]));return t},e}();t.TouchManager=o;var s=function(){function t(e){this.manager=e,this.allowMouseDrag=!0,this.touchPanel=null,this.scale=1,this.documentMouseMoveWrapper=null,this.documentMouseUpWrapper=null}return t.prototype.initTouch=function(e,t,i){var a=this;e.style.setProperty("-ms-touch-action","pinch-zoom"),this.touchReferencePoint=t,this.touchPanel=e,this.allowMouseDrag=void 0===i?!0:i,"ontouchmove"in e?(e.addEventListener("touchstart",function(e){return a.onTouchStart(e)}),e.addEventListener("touchend",function(e){return a.onTouchEnd(e)})):(e.addEventListener("mousedown",function(e){return a.onTouchMouseDown(e)}),e.addEventListener("mouseup",function(e){return a.onTouchMouseUp(e)}))},t.prototype.getXYByClient=function(e){var t=this.rect,a=t.left,r=t.top;void 0!==window.scrollX&&(a+=window.scrollX,r+=window.scrollY);var n=new i(0,0);return n.offset(e.pageX-a,e.pageY-r),n},t.prototype.onTouchStart=function(e){1===e.touches.length&&(e.cancelBubble=!0,this.onTouchMouseDown(e.touches[0]))},t.prototype.onTouchMove=function(e){1===e.touches.length&&(e.preventDefault&&e.preventDefault(),this.onTouchMouseMove(e.touches[0]))},t.prototype.onTouchEnd=function(e){this.onTouchMouseUp(1===e.touches.length?e.touches[0]:e,!0)},t.prototype.onTouchMouseDown=function(t){var i=this;this.scale=e.HTMLElementUtils.getAccumulatedScale(this.touchPanel),document.getSelection().removeAllRanges(),this.rect=(this.touchReferencePoint?this.touchReferencePoint:this.touchPanel).getBoundingClientRect(),"ontouchmove"in this.touchPanel?(this.documentMouseMoveWrapper=function(e){return i.onTouchMove(e)},document.addEventListener("touchmove",this.documentMouseMoveWrapper),this.documentMouseUpWrapper=function(e){return i.onTouchEnd(e)},document.addEventListener("touchend",this.documentMouseUpWrapper)):(this.documentMouseMoveWrapper=function(e){return i.onTouchMouseMove(e)},document.addEventListener("mousemove",this.documentMouseMoveWrapper),this.documentMouseUpWrapper=function(e){return i.onTouchMouseUp(e)},document.addEventListener("mouseup",this.documentMouseUpWrapper)),"setCapture"in this.touchPanel&&this.touchPanel.setCapture()},t.prototype.onTouchMouseMove=function(e){var t,i,a=null!==this.rect&&e.which!==r.NoClick;a&&(i=this.getXYByClient(e),t=new n(i.x/this.scale,i.y/this.scale,a),this.manager.touchEvent(t),e.preventDefault?e.preventDefault():"returnValue"in e&&(e.returnValue=!1))},t.prototype.onTouchMouseUp=function(e,t){this.rect=null,this.manager.upAllTouches(),"releaseCapture"in this.touchPanel&&this.touchPanel.releaseCapture(),null!==this.documentMouseMoveWrapper&&("ontouchmove"in this.touchPanel?(document.removeEventListener("touchmove",this.documentMouseMoveWrapper),document.removeEventListener("touchend",this.documentMouseUpWrapper)):(document.removeEventListener("mousemove",this.documentMouseMoveWrapper),document.removeEventListener("mouseup",this.documentMouseUpWrapper)),this.documentMouseMoveWrapper=null,this.documentMouseUpWrapper=null)},t}();t.TouchEventInterpreter=s}(t=e.TouchUtils||(e.TouchUtils={}))}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){!function(e){e[e.Matrix=0]="Matrix",e[e.Table=1]="Table"}(e.TablixType||(e.TablixType={}));e.TablixType}(t=e.controls||(e.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(t){t.AutoSizeColumnWidthDefault=!0;var i=function(){function i(e,t,i){this.columnWidths=[],this.tablixColumnWidthsObject=[],this.tablixQueryNames=[],this.dataView=e,this.matrixLeafNodes=i,this.isMatrix=t,this.suppressNotification=!1,this.currentPersistedWidths=[],this.visualObjectInstancesToPersist=[],this.callHostPersistProperties=!1,this.dataViewUpdated=!1}return i.prototype.getColumnWidths=function(){return this.columnWidths},i.prototype.getTablixColumnWidthsObject=function(){return this.tablixColumnWidthsObject},i.prototype.updateDataView=function(e,t){this.dataView=e,this.matrixLeafNodes=t,this.dataViewUpdated=!0},i.prototype.getVisualObjectInstancesToPersist=function(){return this.visualObjectInstancesToPersist},i.prototype.persistColumnWidthsOnHost=function(){return this.callHostPersistProperties},i.prototype.getTablixQueryNames=function(){return this.tablixQueryNames},Object.defineProperty(i.prototype,"suppressOnDataChangedNotification",{get:function(){return this.suppressNotification},set:function(e){this.suppressNotification=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"columnWidthResizeCallback",{get:function(){return this.columnResizeCallback},set:function(e){this.columnResizeCallback=e},enumerable:!0,configurable:!0}),i.prototype.getPersistedCellWidth=function(e){var t=this.getColumnWidths();return!_.isEmpty(t)&&e<t.length?t[e]:void 0},i.prototype.deserializeTablixColumnWidths=function(){var e=this.dataView&&this.dataView.metadata&&this.dataView.metadata.columns;if(e){var t=this.shouldAutoSizeColumnWidth();void 0===this.previousAutoColumnSizePropertyValue||this.previousAutoColumnSizePropertyValue||this.previousAutoColumnSizePropertyValue===t?(this.deserializeColumnWidths(e),this.callHostPersistProperties=!1):(this.columnWidths=[],this.removePersistedVisualObjectInstances(),this.tablixColumnWidthsObject=[],this.callHostPersistProperties=!0),this.previousAutoColumnSizePropertyValue=t}},i.prototype.columnWidthChanged=function(e,t){if(this.populateTablixQueryNames(),0!==this.tablixQueryNames.length){for(var i=this.isMatrix?e:Math.max(e-1,0),a={queryName:this.tablixQueryNames[i],width:t},r=!1,n=0,o=this.tablixColumnWidthsObject.length;o>n;n++)this.tablixColumnWidthsObject[n].queryName===a.queryName&&(this.tablixColumnWidthsObject[n]=a,r=!0);r||this.tablixColumnWidthsObject.push(a),this.suppressNotification=!this.isMatrix,this.generateVisualObjectInstancesToPersist(),this.callHostPersistProperties=!0,!this.shouldAutoSizeColumnWidth()&&this.currentPersistedWidths.length>0&&e<this.currentPersistedWidths.length&&(this.currentPersistedWidths[e]=t)}},i.prototype.persistAllColumnWidths=function(e){if(!this.shouldAutoSizeColumnWidth()&&this.dataViewUpdated){var t=!0;_.isEqual(e,this.currentPersistedWidths)?t=!1:(this.currentPersistedWidths=e,this.suppressNotification=!0);var i=this.isMatrix?e:e.slice(1,e.length),a=[];if(this.tablixQueryNames.length!==i.length&&(t=!1),!t)return this.suppressNotification=!1,void(this.callHostPersistProperties=!1);for(var r=0,n=i.length;n>r;r++){for(var o={queryName:this.tablixQueryNames[r],width:i[r]},s=0,l=this.tablixColumnWidthsObject;s<l.length;s++){var u=l[s];u.queryName===o.queryName&&(o.width=u.width)}a.push(o)}this.tablixColumnWidthsObject=a,this.generateVisualObjectInstancesToPersist(),this.callHostPersistProperties=!0}},i.prototype.shouldAutoSizeColumnWidth=function(){var e=this.dataView.metadata.objects;return e&&e[i.autoSizeWidthProp.objectName]?e[i.autoSizeWidthProp.objectName][i.autoSizeWidthProp.propertyName]!==!1:t.AutoSizeColumnWidthDefault},i.prototype.getAutoSizeColumnWidthObject=function(){return{selector:null,objectName:"general",properties:{autoSizeColumnWidth:this.shouldAutoSizeColumnWidth()}}},i.prototype.generateVisualObjectInstancesToPersist=function(){this.visualObjectInstancesToPersist={merge:[this.getAutoSizeColumnWidthObject()]};for(var e=0,t=this.tablixColumnWidthsObject;e<t.length;e++){var i=t[e],a=i.queryName;a&&this.visualObjectInstancesToPersist.merge.push({selector:{metadata:a},objectName:"general",properties:{columnWidth:i.width}})}},i.prototype.removePersistedVisualObjectInstances=function(){this.visualObjectInstancesToPersist={merge:[this.getAutoSizeColumnWidthObject()],remove:[]};for(var e=0,t=this.tablixColumnWidthsObject;e<t.length;e++){var i=t[e];this.visualObjectInstancesToPersist.remove.push({selector:{metadata:i.queryName},objectName:"general",properties:{columnWidth:void 0}})}},i.prototype.deserializeColumnWidths=function(t){if(this.columnWidths.length=0,this.tablixColumnWidthsObject.length=0,this.populateTablixQueryNames(),0!==this.tablixQueryNames.length)for(var a=0;a<t.length;a++){var r=t[a],n=e.DataViewObjects.getValue(r.objects,i.columnWidthProp);if(null!==n&&void 0!==n)for(var o=0,s=this.tablixQueryNames.length;s>o;o++){var l=this.tablixQueryNames[o];if(r.queryName===l){var u=n,c=this.isMatrix?o:o+1;this.columnWidths[c]=u,this.tablixColumnWidthsObject.push({queryName:l,width:u})}}}},i.prototype.populateTablixQueryNames=function(){this.isMatrix?this.getMatrixQueryNames():this.getTableQueryNames()},i.prototype.getTableQueryNames=function(){this.tablixQueryNames.length=0;for(var e=this.dataView.table.columns,t=0;t<e.length;t++){var i=e[t];this.tablixQueryNames.push(i.queryName)}},i.prototype.getMatrixQueryNames=function(){this.tablixQueryNames.length=0;for(var e=this.dataView.matrix.rows,t=0,i=e.levels;t<i.length;t++)for(var a=i[t],r=0,n=a.sources;r<n.length;r++){var o=n[r];this.tablixQueryNames.push(o.queryName)}if(this.matrixLeafNodes)for(var s=0,l=this.matrixLeafNodes;s<l.length;s++){var u=l[s];this.tablixQueryNames.push(u.queryName)}},i.columnWidthProp={objectName:"general",propertyName:"columnWidth"},i.autoSizeWidthProp={objectName:"general",propertyName:"autoSizeColumnWidth"},i}();t.TablixColumnWidthManager=i}(i=t.controls||(t.controls={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=function(){function i(e){this.mainText=jsCommon.CssConstants.createClassAndSelector("mainText"),this.name=e,this.visualConfiguration={maxFontSize:60}}return i.prototype.getMetaDataColumn=function(e){if(e&&e.metadata&&e.metadata.columns)for(var t=0,i=e.metadata.columns.length;i>t;t++){var a=e.metadata.columns[t];if(a.isMeasure){this.metaDataColumn=a;break}}},i.prototype.getAdjustedFontHeight=function(e,t,i){var a=this.svg.append("text").text(t),r=this.getAdjustedFontHeightCore(a,e,i,0);return a.remove(),r},i.prototype.getAdjustedFontHeightCore=function(t,i,a,r){if(r>10)return a;t.attr("font-size",a);var n=e.TextMeasurementService.measureSvgTextElementWidth(t[0][0]);return i>n?a:this.getAdjustedFontHeightCore(t,i,.9*a,r+1)},i.prototype.clear=function(){this.svg.select(this.mainText.selector).text("")},i.prototype.doValueTransition=function(e,i,a,r,n,o,s){if(o||e!==i||null==i){e||(e=0);var l=this.svg,u=this.currentViewport,c=u.height,h=u.width,d=[i],p=this.getSeedFontHeight(h,c),g=this.getTranslateX(h),m=this.getTranslateY(p),f=this.metaDataColumn;s||(s=t.valueFormatter.create({format:this.getFormatString(f),value:i,displayUnitSystemType:a,formatSingleValues:!0,allowFormatBeautification:!0,columnType:f?f.type:void 0}));var y=s.format(e),v=s.format(i);l.attr("class",this.name);var b=l.selectAll("text").data(d);b.enter().append("text").attr("class",this.mainText["class"]);var C=this.getAdjustedFontHeight(h,v,p);m=this.getTranslateY(C+(c-C)/2);var S=b.text(y).attr({"text-anchor":this.getTextAnchor(),"font-size":C,transform:t.SVGUtil.translate(g,m)}).style({fill:this.style.titleText.color.value}).call(t.tooltipUtils.tooltipUpdate,[y]);if(null==i)S.text(v).call(t.tooltipUtils.tooltipUpdate,[v]);else if(f&&t.AxisHelper.isDateTime(f.type))S.text(v).call(t.tooltipUtils.tooltipUpdate,[v]);else{var x=e;S.transition().duration(n).tween("text",function(e){var t=d3.interpolate(x,e);return function(e){var i=t(e);this.textContent=s.format(i)}})}t.SVGUtil.flushAllD3TransitionsIfNeeded(r)}},i.prototype.setTextColor=function(e){this.style.titleText.color.value=e},i.prototype.getSeedFontHeight=function(e,t){var i=Math.floor(.75*Math.min(e,t)),a=this.visualConfiguration.maxFontSize;return a?Math.min(a,i):i},i.prototype.getTranslateX=function(e){if(this.visualConfiguration)switch(this.visualConfiguration.align){case"left":return 0;case"right":return e}return e/2},i.prototype.getTranslateY=function(e){return e},i.prototype.getTextAnchor=function(){if(this.visualConfiguration)switch(this.visualConfiguration.align){case"left":return"start";case"right":return"end"}return"middle"},i.prototype.getFormatString=function(e){return t.valueFormatter.getFormatString(e,i.formatStringProp)},i.formatStringProp={objectName:"general",propertyName:"formatString"},i}();t.AnimatedText=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(t){function i(e,i){t.call(this,"animatedNumber"),e&&(this.svg=e),i&&(this.animator=i)}return __extends(i,t),i.prototype.init=function(e){this.options=e;var t=e.element;this.svg||(this.svg=d3.select(t.get(0)).append("svg")),this.currentViewport=e.viewport,this.hostServices=e.host,this.style=e.style,this.updateViewportDependantProperties()},i.prototype.updateViewportDependantProperties=function(){var e=this.currentViewport;this.svg.attr("width",e.width).attr("height",e.height)},i.prototype.update=function(e){this.currentViewport=e.viewport;var t=this.dataViews=e.dataViews;if(t&&t[0]){var i=t[0];this.updateViewportDependantProperties(),this.getMetaDataColumn(i);var a=i&&i.single?i.single.value:0;null!=a&&this.updateInternal(a,e.suppressAnimations,!0,this.formatter)}},i.prototype.setFormatter=function(e){this.formatter=e},i.prototype.onDataChanged=function(e){this.update({dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewport:this.currentViewport})},i.prototype.onResizing=function(e){this.update({dataViews:this.dataViews,suppressAnimations:!0,viewport:e})},i.prototype.canResizeTo=function(e){return!0},i.prototype.updateInternal=function(t,i,a,r){void 0===a&&(a=!1);var n=this.value||0,o=e.AnimatorCommon.GetAnimationDuration(this.animator,i);this.doValueTransition(n,t,null,this.options.animation,o,a,r),this.value=t},i}(e.AnimatedText);e.AnimatedNumber=t}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=function(){function i(e){}return Object.defineProperty(i.prototype,"shapeType",{get:function(){return this.data?this.data.shapeType:i.DefaultShape},set:function(e){this.data.shapeType=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineColor",{get:function(){return this.data?this.data.lineColor:i.DefaultStrokeColor},set:function(e){this.data.lineColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineTransparency",{get:function(){return this.data?this.data.lineTransparency:i.DefaultLineTransValue},set:function(e){this.data.lineTransparency=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"lineWeight",{get:function(){return this.data?this.data.lineWeight:i.DefaultWeightValue},set:function(e){this.data.lineWeight=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"roundEdge",{get:function(){return this.data?this.data.roundEdge:i.DefaultRoundEdgeValue},set:function(e){this.data.roundEdge=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showFill",{get:function(){return this.data?this.data.showFill:i.DefaultFillShowValue},set:function(e){this.data.showFill=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillColor",{get:function(){return this.data?this.data.fillColor:i.DefaultFillColor},set:function(e){this.data.fillColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shapeTransparency",{get:function(){return this.data?this.data.shapeTransparency:i.DefaultFillTransValue},set:function(e){this.data.shapeTransparency=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"angle",{get:function(){return this.data?this.data.angle:i.DefaultAngle},set:function(e){this.data.angle=this.scaleTo360Deg(e)},enumerable:!0,configurable:!0}),i.prototype.init=function(e){this.element=e.element,this.selection=d3.select(this.element.context),this.currentViewport=e.viewport},i.prototype.update=function(e){this.currentViewport=e.viewport;var t=e.dataViews;if(!_.isEmpty(t)){var i=e.dataViews[0];if(i.metadata&&i.metadata.objects){var a=e.dataViews[0].metadata.objects;this.data=this.getDataFromDataView(a)}}this.render()},i.prototype.getDataFromDataView=function(a){return a?{shapeType:e.DataViewObjects.getValue(a,t.basicShapeProps.general.shapeType,i.DefaultShape),lineColor:this.getValueFromColor(e.DataViewObjects.getValue(a,t.basicShapeProps.line.lineColor,i.DefaultStrokeColor)),lineTransparency:e.DataViewObjects.getValue(a,t.basicShapeProps.line.transparency,i.DefaultLineTransValue),lineWeight:e.DataViewObjects.getValue(a,t.basicShapeProps.line.weight,i.DefaultWeightValue),roundEdge:e.DataViewObjects.getValue(a,t.basicShapeProps.line.roundEdge,i.DefaultRoundEdgeValue),shapeTransparency:e.DataViewObjects.getValue(a,t.basicShapeProps.fill.transparency,i.DefaultFillTransValue),fillColor:this.getValueFromColor(e.DataViewObjects.getValue(a,t.basicShapeProps.fill.fillColor,i.DefaultFillColor)),showFill:e.DataViewObjects.getValue(a,t.basicShapeProps.fill.show,i.DefaultFillShowValue),angle:this.scaleTo360Deg(e.DataViewObjects.getValue(a,t.basicShapeProps.rotation.angle,i.DefaultAngle))}:null},i.prototype.scaleTo360Deg=function(e){return 0!==e&&Math.abs(e)%360===0?e:(e%=360,e=(e+360)%360)},i.prototype.getValueFromColor=function(e){return e.solid?e.solid.color:e},i.prototype.enumerateObjectInstances=function(e){var i=[];switch(e.objectName){case"line":var a={selector:null,properties:{lineColor:this.lineColor,transparency:this.lineTransparency,weight:this.lineWeight},objectName:e.objectName};return this.data.shapeType===t.basicShapeType.rectangle&&(a.properties.roundEdge=this.roundEdge),i.push(a),i;case"fill":return this.shapeType!==t.basicShapeType.line&&i.push({selector:null,properties:{show:this.showFill,fillColor:this.fillColor,transparency:this.shapeTransparency},objectName:e.objectName}),i;case"rotation":return i.push({selector:null,properties:{angle:this.angle},objectName:e.objectName}),i}return null},i.prototype.render=function(){switch(this.selection.html(""),this.shapeType){case t.basicShapeType.rectangle:t.ShapeFactory.createRectangle(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case t.basicShapeType.oval:t.ShapeFactory.createOval(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case t.basicShapeType.line:t.ShapeFactory.createLine(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case t.basicShapeType.arrow:t.ShapeFactory.createUpArrow(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle);break;case t.basicShapeType.triangle:t.ShapeFactory.createTriangle(this.data,this.currentViewport.height,this.currentViewport.width,this.selection,this.angle)}},i.DefaultShape=t.basicShapeType.rectangle,i.DefaultStrokeColor="#00B8AA",i.DefaultFillColor="#E6E6E6",i.DefaultFillShowValue=!0,i.DefaultFillTransValue=100,i.DefaultWeightValue=3,i.DefaultLineTransValue=100,i.DefaultRoundEdgeValue=0,i.DefaultAngle=0,i}();t.BasicShapeVisual=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(e,t,i){return i>1?e&&e.length>t?[e[t]]:[]:e}function a(e){return e.length>1}function r(e,t,i){return 0===e&&!!t&&!!t.showAxisTitle||1===e&&!i&&!!t&&!!t.secShowAxisTitle}function n(e,t){var i={domain:void 0,merged:!1,tickCount:void 0,forceStartToZero:!1};if(e.length<2)return i;var a,r,n,o,s=e[0].calculateAxesProperties(t)[1],l=e[1].calculateAxesProperties(t)[1],c=s.scale.domain(),h=l.scale.domain();if(c[0]>=0&&h[0]>=0&&(i.forceStartToZero=!0),s.values&&s.values.length>0&&l.values&&l.values.length>0&&(i.tickCount=Math.max(s.values.length,l.values.length)),a=Math.min(c[0],h[0]),r=Math.max(c[1],h[1]),t.forceMerge)return{domain:[a,r],merged:!0,tickCount:i.tickCount,forceStartToZero:!1};if(c[0]>h[1]||c[1]<h[0])return i;o=Math.max(c[0],h[0]),n=Math.min(c[1],h[1]);var d=r-a;if(0===d)return i;var p=Math.abs((n-o)/d);return u>p?i:{domain:[a,r],merged:!0,tickCount:i.tickCount,forceStartToZero:!1}}function o(i,o,s,l,u,c,h,d,p,g){var m,f={viewport:o,margin:s,forcedXDomain:[u?u.start:null,u?u.end:null],forceMerge:c&&c.secShow===!1,showCategoryAxisLabel:!1,showValueAxisLabel:!1,trimOrdinalDataOnOverflow:g,categoryAxisScaleType:u&&null!=u.axisScale?u.axisScale:t.axisScale.linear,valueAxisScaleType:c&&null!=c.axisScale?c.axisScale:t.axisScale.linear,categoryAxisDisplayUnits:u&&null!=u.labelDisplayUnits?u.labelDisplayUnits:0,valueAxisDisplayUnits:c&&null!=c.labelDisplayUnits?c.labelDisplayUnits:0,categoryAxisPrecision:u?t.CartesianHelper.getPrecision(u.labelPrecision):null,valueAxisPrecision:c?t.CartesianHelper.getPrecision(c.labelPrecision):null,playAxisControlLayout:l},y=c&&c.secShow===!0,v=!1;a(i)&&!y&&(m=n(i,f),v=m.merged,v?f.forcedYDomain=m.domain:f.forcedTickCount=m.tickCount),c&&(f.forcedYDomain=t.AxisHelper.applyCustomizedDomain([c.start,c.end],f.forcedYDomain));for(var b,C=0,S=i.length;S>C;C++){var x=i[C];1!==C||v||(f.forcedYDomain=c?[c.secStart,c.secEnd]:null,f.valueAxisScaleType=c&&null!=c.secAxisScale?c.secAxisScale:t.axisScale.linear,f.valueAxisDisplayUnits=c&&null!=c.secLabelDisplayUnits?c.secLabelDisplayUnits:0,f.valueAxisPrecision=c?t.CartesianHelper.getPrecision(c.secLabelPrecision):null,m&&m.forceStartToZero&&(f.forcedYDomain?null==f.forcedYDomain[0]&&(f.forcedYDomain[0]=0):f.forcedYDomain=[0,void 0])),f.showCategoryAxisLabel=!!u&&!!u.showAxisTitle,f.showValueAxisLabel=r(C,c,v);var w=x.calculateAxesProperties(f);if(0===C)b={x:w[0],y1:w[1]};else if(w&&!b.y2)if(w[0].axis.scale().domain().length>b.x.axis.scale().domain().length){f.showValueAxisLabel=!!c&&!!c.showAxisTitle;var D=x.calculateAxesProperties(f);b.x=D[0],b.y1=D[1]}else x.overrideXScale(b.x),v||w[1].usingDefaultDomain||(b.y2=w[1]);if(p&&p.x)b.x.willLabelsFit=p.x.willLabelsFit,b.x.willLabelsWordBreak=p.x.willLabelsWordBreak;else{var P=o.width-(s.left+s.right);b.x.willLabelsFit=t.AxisHelper.LabelLayoutStrategy.willLabelsFit(b.x,P,e.TextMeasurementService.measureSvgTextWidth,h),b.x.willLabelsWordBreak=!b.x.willLabelsFit&&!d&&t.AxisHelper.LabelLayoutStrategy.willLabelsWordBreak(b.x,s,P,e.TextMeasurementService.measureSvgTextWidth,e.TextMeasurementService.estimateSvgTextHeight,e.TextMeasurementService.getTailoredTextOrDefault,h)}}return b}var s=jsCommon.EnumExtensions,l=jsCommon.CssConstants.createClassAndSelector,u=.1,c=6,h=function(){function a(e){this.xRefLine=l("x-ref-line"),this.y1RefLine=l("y1-ref-line");var t=!1;this.trimOrdinalDataOnOverflow=!0,e&&(this.tooltipsEnabled=e.tooltipsEnabled,this.type=e.chartType,this.seriesLabelFormattingEnabled=e.seriesLabelFormattingEnabled,this.isLabelInteractivityEnabled=e.isLabelInteractivityEnabled,this.referenceLinesEnabled=e.referenceLinesEnabled,this.backgroundImageEnabled=e.backgroundImageEnabled,this.lineChartLabelDensityEnabled=e.lineChartLabelDensityEnabled,void 0!==e.trimOrdinalDataOnOverflow&&(this.trimOrdinalDataOnOverflow=e.trimOrdinalDataOnOverflow),e.isScrollable&&(t=e.isScrollable),this.animator=e.animator,e.cartesianSmallViewPortProperties&&(this.cartesianSmallViewPortProperties=e.cartesianSmallViewPortProperties),e.behavior&&(this.behavior=e.behavior)),this.axes=new f(t,g.ScrollbarWidth,this.trimOrdinalDataOnOverflow),this.svgAxes=new m(this.axes),this.svgBrush=new p(g.ScrollbarWidth),this.scrollableAxes=new g(this.axes,this.svgBrush)}return a.getAxisVisibility=function(e){switch(e){case 6:case 5:case 7:return 1;case 9:return 3;default:return 2}},a.prototype.init=function(e){this.visualInitOptions=e,this.layers=[];var i=this.element=e.element;i.addClass(a.ClassName),this.currentViewport=e.viewport,this.hostServices=e.host;var r=this.chartAreaSvg=d3.select(i.get(0)).append("svg");r.style("position","absolute"),this.behavior&&(this.clearCatcher=t.appendClearCatcher(r),this.interactivityService=t.createInteractivityService(this.hostServices)),null!=e.style.maxMarginFactor&&this.axes.setMaxMarginFactor(e.style.maxMarginFactor);var n=a.getAxisVisibility(this.type);this.axes.setAxisLinesVisibility(n),this.svgAxes.init(r),this.svgBrush.init(r),this.sharedColorPalette=new y(e.style.colorPalette.dataColors),this.legend=t.createLegend(i,e.interactivity&&e.interactivity.isInteractiveLegend,12!==this.type?this.interactivityService:void 0,this.axes.isScrollable)},a.prototype.isPlayAxis=function(){if(!this.dataViews||!this.dataViews[0])return!1;var e=this.dataViews[0],t=e.categorical&&e.categorical.categories&&e.categorical.categories[0]&&e.categorical.categories[0].source&&e.categorical.categories[0].source.roles&&e.categorical.categories[0].source.roles.Play;return 9===this.type&&this.animator&&null!=e.matrix&&(!e.categorical||t)},a.getIsScalar=function(i,a,r){var n=e.DataViewObjects.getValue(i,a);return i&&void 0!==n?n===t.axisType.scalar&&!t.AxisHelper.isOrdinal(r):!t.AxisHelper.isOrdinal(r)},a.prototype.populateObjectProperties=function(i){if(i&&i.length>0){var a=i[0].metadata;a?(this.legendObjectProperties=e.DataViewObjects.getObject(a.objects,"legend",{}),this.xAxisReferenceLines=e.DataViewObjects.getUserDefinedObjects(a.objects,"xAxisReferenceLine"),this.y1AxisReferenceLines=e.DataViewObjects.getUserDefinedObjects(a.objects,"y1AxisReferenceLine")):this.legendObjectProperties={},this.categoryAxisProperties=t.CartesianHelper.getCategoryAxisProperties(a),this.valueAxisProperties=t.CartesianHelper.getValueAxisProperties(a)}},a.prototype.update=function(a){var r=this.dataViews=a.dataViews,n=this.currentViewport&&a.viewport&&(this.currentViewport.height!==a.viewport.height||this.currentViewport.width!==a.viewport.width);if(this.currentViewport=a.viewport,r){0===this.layers.length&&(this.layers=this.createAndInitLayers(r));var o=this.layers;if(r&&r.length>0){this.populateObjectProperties(r),this.axes.update(r),this.svgAxes.update(this.categoryAxisProperties,this.valueAxisProperties);var s=r[0];s.metadata&&(this.background={image:e.DataViewObjects.getValue(s.metadata.objects,t.scatterChartProps.plotArea.image),transparency:e.DataViewObjects.getValue(s.metadata.objects,t.scatterChartProps.plotArea.transparency,t.visualBackgroundHelper.getDefaultTransparency())})}this.sharedColorPalette.clearPreferredScale();for(var l=0,u=o.length;u>l;l++)o[l].setData(i(r,l,u),n),u>1&&this.sharedColorPalette.rotateScale();if(this.render(!this.hasSetData||a.suppressAnimations),this.hasSetData=this.hasSetData||r&&r.length>0,r&&r.length>0){var c=t.getInvalidValueWarnings(r,!1,!1,!1);this.axes.addWarnings(c),c&&c.length>0&&this.hostServices.setWarnings(c)}}},a.prototype.onDataChanged=function(e){this.update({dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewport:this.currentViewport})},a.prototype.onResizing=function(e){this.currentViewport&&this.currentViewport.height===e.height&&this.currentViewport.width===e.width||this.update({dataViews:this.dataViews,suppressAnimations:!0,viewport:e})},a.prototype.scrollTo=function(e){this.scrollableAxes.scrollTo(e)},a.prototype.enumerateObjectInstances=function(i){var a=new t.ObjectEnumerationBuilder,r=this.layers?this.layers.length:0;if("legend"===i.objectName){if(!this.shouldShowLegendCard())return;var n=e.DataViewObject.getValue(this.legendObjectProperties,t.legendProps.show,this.legend.isVisible()),o=e.DataViewObject.getValue(this.legendObjectProperties,t.legendProps.showTitle,!0),s=e.DataViewObject.getValue(this.legendObjectProperties,t.legendProps.titleText,this.layerLegendData?this.layerLegendData.title:""),l=e.DataViewObject.getValue(this.legendObjectProperties,t.legendProps.labelColor,this.layerLegendData?this.layerLegendData.labelColor:t.LegendData.DefaultLegendLabelFillColor),u=e.DataViewObject.getValue(this.legendObjectProperties,t.legendProps.fontSize,this.layerLegendData&&this.layerLegendData.fontSize?this.layerLegendData.fontSize:t.SVGLegend.DefaultFontSizeInPt);a.pushInstance({selector:null,properties:{show:n,position:t.LegendPosition[this.legend.getOrientation()],showTitle:o,titleText:s,labelColor:l,fontSize:u},objectName:i.objectName})}else if("categoryAxis"===i.objectName&&this.axes.hasCategoryAxis())this.getCategoryAxisValues(a);else if("valueAxis"===i.objectName)this.getValueAxisValues(a);else if("y1AxisReferenceLine"===i.objectName&&this.referenceLinesEnabled){var c=this.sharedColorPalette.getColorByIndex(0).value;t.ReferenceLineHelper.enumerateObjectInstances(a,this.y1AxisReferenceLines,c,i.objectName)}else if("xAxisReferenceLine"===i.objectName&&this.referenceLinesEnabled){var c=this.sharedColorPalette.getColorByIndex(0).value;t.ReferenceLineHelper.enumerateObjectInstances(a,this.xAxisReferenceLines,c,i.objectName);
}else"plotArea"===i.objectName&&t.visualBackgroundHelper.enumeratePlot(a,this.background,this.backgroundImageEnabled);for(var h=0,d=r;d>h;h++){var p=this.layers[h];p.enumerateObjectInstances&&p.enumerateObjectInstances(a,i)}return a.complete()},a.prototype.shouldShowLegendCard=function(){var e=this.layers,t=this.dataViews;if(e&&t)for(var i=e.length,a=0,r=0;i>r;r++){if(e[r].hasLegend())return!0;var n=t[r];if(n&&n.categorical&&n.categorical.values&&n.categorical.values.length>0&&(a++,a>1))return!0}return!1},a.prototype.getCategoryAxisValues=function(e){if(this.categoryAxisProperties){var i=t.axisType.both,a=!1,r=this.axes.isLogScaleAllowed(0),n=[t.axisScale.log,t.axisScale.linear];this.layers&&this.layers[0].getSupportedCategoryAxisType&&(i=this.layers[0].getSupportedCategoryAxisType(),a=i===t.axisType.scalar?!0:t.CartesianHelper.isScalar(i===t.axisType.both,this.categoryAxisProperties)),a||(this.categoryAxisProperties.start=null,this.categoryAxisProperties.end=null);var o={selector:null,properties:{},objectName:"categoryAxis",validValues:{axisScale:n,axisStyle:this.axes.categoryAxisHasUnitType?[t.axisStyle.showTitleOnly,t.axisStyle.showUnitOnly,t.axisStyle.showBoth]:[t.axisStyle.showTitleOnly]}};if(o.properties.show=null!=this.categoryAxisProperties.show?this.categoryAxisProperties.show:!0,this.axes.isYAxisCategorical()&&(o.properties.position=this.valueAxisProperties&&null!=this.valueAxisProperties.position?this.valueAxisProperties.position:t.yAxisPosition.left),i===t.axisType.both&&(o.properties.axisType=a?t.axisType.scalar:t.axisType.categorical),a&&(o.properties.axisScale=null!=this.categoryAxisProperties.axisScale&&r?this.categoryAxisProperties.axisScale:t.axisScale.linear,o.properties.start=this.categoryAxisProperties.start,o.properties.end=this.categoryAxisProperties.end),o.properties.showAxisTitle=null!=this.categoryAxisProperties.showAxisTitle?this.categoryAxisProperties.showAxisTitle:!1,o.properties.axisStyle=this.categoryAxisProperties.axisStyle?this.categoryAxisProperties.axisStyle:t.axisStyle.showTitleOnly,o.properties.labelColor=this.categoryAxisProperties.labelColor,a){o.properties.labelDisplayUnits=this.categoryAxisProperties.labelDisplayUnits?this.categoryAxisProperties.labelDisplayUnits:0;var s=this.categoryAxisProperties.labelPrecision;o.properties.labelPrecision=void 0===s||0>s?t.dataLabelUtils.defaultLabelPrecision:s}e.pushInstance(o)}},a.prototype.getValueAxisValues=function(i){if(this.valueAxisProperties){var a=[t.axisScale.log,t.axisScale.linear],r=this.axes.isLogScaleAllowed(1),n=this.axes.isLogScaleAllowed(2),o={selector:null,properties:{},objectName:"valueAxis",validValues:{axisScale:a,secAxisScale:a,axisStyle:this.axes.valueAxisHasUnitType?[t.axisStyle.showTitleOnly,t.axisStyle.showUnitOnly,t.axisStyle.showBoth]:[t.axisStyle.showTitleOnly]}};if(o.properties.show=null!=this.valueAxisProperties.show?this.valueAxisProperties.show:!0,this.axes.isYAxisCategorical()||(o.properties.position=null!=this.valueAxisProperties.position?this.valueAxisProperties.position:t.yAxisPosition.left),o.properties.axisScale=null!=this.valueAxisProperties.axisScale&&r?this.valueAxisProperties.axisScale:t.axisScale.linear,o.properties.start=this.valueAxisProperties.start,o.properties.end=this.valueAxisProperties.end,o.properties.showAxisTitle=null!=this.valueAxisProperties.showAxisTitle?this.valueAxisProperties.showAxisTitle:!1,o.properties.axisStyle=null!=this.valueAxisProperties.axisStyle?this.valueAxisProperties.axisStyle:t.axisStyle.showTitleOnly,o.properties.labelColor=this.valueAxisProperties.labelColor,7!==this.type&&8!==this.type){o.properties.labelDisplayUnits=this.valueAxisProperties.labelDisplayUnits?this.valueAxisProperties.labelDisplayUnits:0;var s=this.valueAxisProperties.labelPrecision;o.properties.labelPrecision=void 0===s||0>s?t.dataLabelUtils.defaultLabelPrecision:s}if(i.pushInstance(o),2===this.layers.length&&(o.properties.secShow=null!=this.valueAxisProperties.secShow?this.valueAxisProperties.secShow:this.axes.hasY2Axis(),o.properties.secShow&&(o.properties.axisLabel="")),this.axes.hasY2Axis()&&o.properties.secShow){i.pushContainer({displayName:e.data.createDisplayNameGetter("Visual_YAxis_ShowSecondary")});var l={selector:null,properties:{},objectName:"valueAxis"};l.properties.secAxisLabel="",l.properties.secPosition=null!=this.valueAxisProperties.secPosition?this.valueAxisProperties.secPosition:t.yAxisPosition.right,l.properties.secAxisScale=null!=this.valueAxisProperties.secAxisScale&&n?this.valueAxisProperties.secAxisScale:t.axisScale.linear,l.properties.secStart=this.valueAxisProperties.secStart,l.properties.secEnd=this.valueAxisProperties.secEnd,l.properties.secShowAxisTitle=null!=this.valueAxisProperties.secShowAxisTitle?this.valueAxisProperties.secShowAxisTitle:!1,i.pushInstance(l).pushInstance({selector:null,properties:{secAxisStyle:this.valueAxisProperties.secAxisStyle?this.valueAxisProperties.secAxisStyle:t.axisStyle.showTitleOnly,labelColor:this.valueAxisProperties.secLabelColor,secLabelDisplayUnits:this.valueAxisProperties.secLabelDisplayUnits?this.valueAxisProperties.secLabelDisplayUnits:0,secLabelPrecision:this.valueAxisProperties.secLabelPrecision<0?0:this.valueAxisProperties.secLabelPrecision},objectName:"valueAxis",validValues:{secAxisStyle:this.axes.secondaryValueAxisHasUnitType?[t.axisStyle.showTitleOnly,t.axisStyle.showUnitOnly,t.axisStyle.showBoth]:[t.axisStyle.showTitleOnly]}}),i.popContainer()}}},a.prototype.onClearSelection=function(){if(this.hasSetData)for(var e=0,t=this.layers.length;t>e;e++){var i=this.layers[e];i.onClearSelection(),i.render(!0)}},a.prototype.createAndInitLayers=function(t){var i,a=this;if(t&&t.length>0){var r=t[0].metadata;r&&(i=r.objects)}var n=d.createLayers(this.type,i,this.interactivityService,this.animator,this.axes.isScrollable,this.seriesLabelFormattingEnabled,this.tooltipsEnabled,this.lineChartLabelDensityEnabled),o=e.Prototype.inherit(this.visualInitOptions);o.svg=this.svgAxes.getScrollableRegion(),o.labelsContext=this.svgAxes.getLabelsRegion(),o.cartesianHost={updateLegend:function(e){return a.legend.drawLegend(e,a.currentViewport)},getSharedColors:function(){return a.sharedColorPalette},triggerRender:function(e){return a.render(e)}},o.chartType=this.type;for(var s=0,l=n.length;l>s;s++)n[s].init(o);return n},a.prototype.renderLegend=function(){for(var e=this.layers,i={title:"",dataPoints:[]},a=0,r=e.length;r>a;a++)this.layerLegendData=e[a].calculateLegend(),this.layerLegendData&&(i.title=0===a?this.layerLegendData.title||"":i.title,i.labelColor=this.layerLegendData.labelColor,i.dataPoints=i.dataPoints.concat(this.layerLegendData.dataPoints||[]),i.fontSize=this.layerLegendData.fontSize||t.SVGLegend.DefaultFontSizeInPt,this.layerLegendData.grouped&&(i.grouped=!0));var n=this.legendObjectProperties;if(n){t.LegendData.update(i,n);var o=n[t.legendProps.position];o&&this.legend.changeOrientation(t.LegendPosition[o])}else this.legend.changeOrientation(t.LegendPosition.Top);(1===i.dataPoints.length&&!i.grouped||this.hideLegends())&&(i.dataPoints=[]),this.legend.drawLegend(i,this.currentViewport)},a.prototype.hideLegends=function(){return this.cartesianSmallViewPortProperties&&this.cartesianSmallViewPortProperties.hideLegendOnSmallViewPort&&this.currentViewport.height<this.cartesianSmallViewPortProperties.MinHeightLegendVisible?!0:!1},a.prototype.render=function(i){var r=this;this.visualInitOptions.interactivity&&this.visualInitOptions.interactivity.isInteractiveLegend||this.renderLegend();var n,o=this.legendMargins=this.legend.getMargins(),s=this.legend.getOrientation(),l=this.hideAxisLabels(o),u={height:this.currentViewport.height-o.height,width:this.currentViewport.width-o.width},c=e.Prototype.inherit(m.AxisPadding);this.isPlayAxis()&&(u.height-=a.PlayAxisBottomMargin,n={left:t.Legend.isLeft(s)?o.width:0,top:t.Legend.isTop(s)?o.height+u.height:u.height,height:a.PlayAxisBottomMargin,width:u.width}),this.chartAreaSvg.attr({width:u.width,height:u.height}),t.Legend.positionChartArea(this.chartAreaSvg,this.legend);var h=this.calculateInteractivityRightMargin(),d=this.axes.negotiateAxes(this.layers,u,c,n,l,a.TextProperties,h),p=!this.renderedPlotArea||this.renderedPlotArea.height!==d.plotArea.height||this.renderedPlotArea.width!==d.plotArea.width;i=i||p,this.scrollableAxes.render(d,this.layers,i,function(e,t,i){return r.renderPlotArea(e,t,i,o)}),this.renderedPlotArea=d.plotArea},a.prototype.getPlotAreaRect=function(e,i){var a={left:e.margin.left,top:e.margin.top,width:e.plotArea.width,height:e.plotArea.height};if(this.legend){var r=this.legend.getOrientation();t.Legend.isTop(r)?a.top+=i.height:t.Legend.isLeft(r)&&(a.left+=i.width)}return a},a.prototype.renderBackgroundImage=function(e){t.visualBackgroundHelper.renderBackgroundImage(this.background,this.element,e)},a.prototype.hideAxisLabels=function(e){return this.cartesianSmallViewPortProperties&&this.cartesianSmallViewPortProperties.hideAxesOnSmallViewPort&&this.currentViewport.height+e.height<this.cartesianSmallViewPortProperties.MinHeightAxesVisible&&!this.visualInitOptions.interactivity.isInteractiveLegend?!0:!1},a.prototype.calculateInteractivityRightMargin=function(){return this.visualInitOptions.interactivity&&this.visualInitOptions.interactivity.isInteractiveLegend&&!this.trimOrdinalDataOnOverflow?c:0},a.prototype.renderPlotArea=function(e,i,a,r){var n=i.axes,o=i.plotArea,s=this.getPlotAreaRect(i,r),l=t.AnimatorCommon.GetAnimationDuration(this.animator,a);this.renderBackgroundImage(s),this.svgAxes.renderAxes(i,l),this.renderReferenceLines(i),this.renderLayers(e,o,n,a)},a.prototype.renderReferenceLines=function(e){var i=e.axes,a=e.plotArea,r=this.svgAxes.getScrollableRegion(),n=this.sharedColorPalette.getColorByIndex(0).value,o=!1;if(this.y1AxisReferenceLines)for(var s=0,l=this.y1AxisReferenceLines;s<l.length;s++){var u=l[s],c=u.object;if(c[t.ReferenceLineHelper.referenceLineProps.show]){var h=!i.y1.isCategoryAxis,d={graphicContext:r,referenceLineProperties:c,axes:i,viewport:a,classAndSelector:this.y1RefLine,defaultColor:n,isHorizontal:h};t.ReferenceLineHelper.render(d),o=!0}}o||r.selectAll(this.y1RefLine.selector).remove();var p=!1;if(this.xAxisReferenceLines)for(var g=0,m=this.xAxisReferenceLines;g<m.length;g++){var u=m[g],c=u.object;if(c[t.ReferenceLineHelper.referenceLineProps.show]){var h=!1,f={graphicContext:r,referenceLineProperties:c,axes:i,viewport:a,classAndSelector:this.xRefLine,defaultColor:n,isHorizontal:h};t.ReferenceLineHelper.render(f),p=!0}}p||r.selectAll(this.xRefLine.selector).remove()},a.prototype.getReferenceLineLabels=function(e,i){var a=this.sharedColorPalette.getColorByIndex(0).value,r=[];if(this.y1AxisReferenceLines)for(var n=0,o=this.y1AxisReferenceLines;n<o.length;n++){var s=o[n],l=s.object;if(l[t.ReferenceLineHelper.referenceLineProps.show]&&l[t.ReferenceLineHelper.referenceLineProps.dataLabelShow]){var u=!e.y1.isCategoryAxis,c={referenceLineProperties:l,axes:e,viewport:i,defaultColor:a,isHorizontal:u,key:JSON.stringify({type:"y1AxisReferenceLine",id:s.id})};r.push(t.ReferenceLineHelper.createLabelDataPoint(c))}}if(this.xAxisReferenceLines)for(var h=0,d=this.xAxisReferenceLines;h<d.length;h++){var s=d[h],l=s.object;if(l[t.ReferenceLineHelper.referenceLineProps.show]&&l[t.ReferenceLineHelper.referenceLineProps.dataLabelShow]){var u=!1,p={referenceLineProperties:l,axes:e,viewport:i,defaultColor:a,isHorizontal:u,key:JSON.stringify({type:"xAxisReferenceLine",id:s.id})};r.push(t.ReferenceLineHelper.createLabelDataPoint(p))}}return r},a.prototype.renderDataLabels=function(i,a,r,n,o){var s=this.svgAxes.getLabelBackground(),l=this.svgAxes.getLabelsRegion();if(this.behavior){var u=t.NewDataLabelUtils.getDataLabelLayoutOptions(this.type),c=new e.LabelLayout(u),h=c.layout(i,r);o&&t.NewDataLabelUtils.drawLabelBackground(s,h,"#FFFFFF",.7);var d;if(this.animator&&!n){var p=this.isPlayAxis(),g=p?t.PlayChart.FrameAnimationDuration:this.animator.getDuration();d=t.NewDataLabelUtils.animateDefaultLabels(l,h,g,a,p?"linear":void 0)}else d=t.NewDataLabelUtils.drawDefaultLabels(l,h,a);if(u.allowLeaderLines){var m=_.filter(h,function(e){return null!=e.leaderLinePoints&&!_.isEmpty(e.leaderLinePoints)&&null!=e.identity});t.NewDataLabelUtils.drawLabelLeaderLines(l,m,function(e){return e.identity.getKey()})}if(this.interactivityService&&this.isLabelInteractivityEnabled){var f={labelItems:d};this.interactivityService.bind(h,new t.LabelsBehavior,f,{isLabels:!0})}}else{var c=new e.LabelLayout({maximumOffset:t.NewDataLabelUtils.maxLabelOffset,startingOffset:t.NewDataLabelUtils.startingLabelOffset,attemptToMoveLabelsIntoViewport:!0}),h=c.layout(i,r);o&&t.NewDataLabelUtils.drawLabelBackground(s,h,"#FFFFFF",.7),t.NewDataLabelUtils.drawDefaultLabels(l,h,a)}},a.prototype.renderLayers=function(e,i,a,r){for(var n=[],o=[],s=[],l=!0,u=0,c=e.length;c>u;u++){var h=e[u].render(r);if(h){if(this.behavior&&(o=o.concat(h.dataPoints),s.push(h.behaviorOptions)),h.labelDataPointGroups)for(var d=h.labelDataPointGroups,p=0;p<d.length;p++){var g=d[p];n.push({labelDataPoints:t.NewDataLabelUtils.removeDuplicates(g.labelDataPoints),maxNumberOfLabels:g.maxNumberOfLabels})}else{var m=h.labelDataPoints;n.push({labelDataPoints:t.NewDataLabelUtils.removeDuplicates(m),maxNumberOfLabels:m.length})}l=l&&h.labelsAreNumeric}}var f=this.getReferenceLineLabels(a,i);if(_.isEmpty(f)||n.unshift({labelDataPoints:f,maxNumberOfLabels:f.length}),this.renderDataLabels(n,l,i,r,e.length>1),this.interactivityService){var y={layerOptions:s,clearCatcher:this.clearCatcher};this.interactivityService.bind(o,this.behavior,y)}},a.getPreferredPlotArea=function(e,t,i,r,n){var o={height:i.height,width:i.width};if(!n&&r){var s=a.getPreferredCategorySpan(e,t);o.width=Math.max(s,i.width)}return o},a.getPreferredCategorySpan=function(e,t){return t*(e+2*a.OuterPaddingRatio)},a.getLayout=function(e,t){var i=t.categoryCount,r=t.availableWidth,n=t.domain,o=t.trimOrdinalDataOnOverflow,s=!!t.isScalar,l=!!t.isScrollable,u=a.getCategoryThickness(e?e.series:null,i,r,n,s,o),c=u*a.OuterPaddingRatio*2,h=Math.round((r-c)/u),d=Math.min(h,i),p=a.OuterPaddingRatio;if(!s){var g=(r-u*d)/2;p=g/u}return!s&&l&&(d=i),{categoryCount:d,categoryThickness:u,outerPaddingRatio:p,isScalar:s}},a.getCategoryThickness=function(e,t,i,r,n,o){var s;if(2>t)s=i*(1-a.OuterPaddingRatio);else if(n&&r&&r.length>1){var l=a.getMinInterval(e),u=r[r.length-1]-r[0],c=l/(u+l*a.OuterPaddingRatio*2);s=i*c,s=Math.max(s,a.MinScalarRectThickness)}else s=i/(t+2*a.OuterPaddingRatio),o&&(s=Math.max(s,a.MinOrdinalRectThickness));var h=i/(3+2*a.OuterPaddingRatio);return s=Math.min(s,h),!n&&t>=3&&o?Math.max(s,a.MinOrdinalRectThickness):s},a.getMinInterval=function(e){var t=Number.MAX_VALUE;if(e.length>0)for(var i=e[0].data.filter(function(e){return!e.highlight}),a=0,r=i.length-1;r>a;a++)t=Math.min(t,Math.abs(i[a+1].categoryValue-i[a].categoryValue));return t},a.MinOrdinalRectThickness=20,a.MinScalarRectThickness=2,a.OuterPaddingRatio=.4,a.InnerPaddingRatio=.2,a.TickLabelPadding=2,a.ClassName="cartesianChart",a.PlayAxisBottomMargin=80,a.FontSize=11,a.FontSizeString=jsCommon.PixelConverter.toString(a.FontSize),a.TextProperties={fontFamily:"wf_segoe-ui_normal",fontSize:a.FontSizeString},a}();t.CartesianChart=h;var d,p=function(){function e(e){this.brush=d3.svg.brush(),this.brushWidth=e}return e.prototype.init=function(e){this.element=e},e.prototype.remove=function(){this.element.selectAll(e.Brush.selector).remove(),this.brushGraphicsContext=void 0},e.prototype.getExtent=function(){return this.brush.extent()},e.prototype.setExtent=function(e){this.brush.extent(e)},e.prototype.setScale=function(e){this.isHorizontal?this.brush.x(e):this.brush.y(e)},e.prototype.setOrientation=function(e){this.isHorizontal=e},e.prototype.renderBrush=function(i,a,r,n){var o=this;this.brushGraphicsContext||(this.brushGraphicsContext=this.element.append("g").classed(e.Brush["class"],!0)),this.scrollCallback=n,this.brush.on("brush",function(){return window.requestAnimationFrame(n)}).on("brushend",function(){return o.resizeExtent(i,o.isHorizontal)});var s=this.brushContext=this.brushGraphicsContext.attr({transform:t.SVGUtil.translate(a,r),"drag-resize-disabled":"true"}).call(this.brush);s.selectAll(".resize rect").remove(),s.select(".background").style("cursor","default"),s.selectAll(".extent").style({"fill-opacity":e.FillOpacity,cursor:"default"}),this.isHorizontal?s.selectAll("rect").attr("height",this.brushWidth):s.selectAll("rect").attr("width",this.brushWidth)},e.prototype.scroll=function(){this.scrollCallback()},e.prototype.resizeExtent=function(e,t){var i=this.brushContext;t?i.select(".extent").attr("width",e):i.select(".extent").attr("height",e)},e.Brush=l("brush"),e.FillOpacity=.125,e}(),g=function(){function e(e,t){this.axes=e,this.brush=t}return e.prototype.filterDataToViewport=function(e,t,i,a,r){if(a){var n,o=[],s=r[0],l=r[1],u=a(1)-a(0),c=Math.floor(s/u),h=Math.ceil((l-s)/u),d=c+h,p=a.domain();if(e.domain(p),n=p.slice(c,d),n&&n.length>0){for(var g=0;g<t.length;g++)o[g]=t[g].setFilteredData(n[0],n[n.length-1]+1);e.domain(n);var m;m=this.axes.isXScrollBarVisible?i.x:i.y1,m.axis.scale(e),m.scale(e),m.axis.ticks(n.length),m.axis.tickValues(n);var f=m.axis.tickFormat();m.values=_.map(n,function(e){return f(e)})}}},e.prototype.render=function(t,i,a,r){var n,o,s,l,u,c=this,h=t.plotArea;if(this.axes.isXScrollBarVisible)n=t.axes.x.scale,o=t.margin.left,s=t.viewport.height,l=t.preferredPlotArea.width,u=h.width;else{if(!this.axes.isYScrollBarVisible)return this.brush.remove(),void r(i,t,a);n=t.axes.y1.scale,o=t.viewport.width,s=t.margin.top,l=t.preferredPlotArea.height,u=h.height}this.brushMinExtent=e.getMinExtent(l,u),this.scrollScale=n.copy(),this.scrollScale.rangeBands([0,u]),this.brush.setOrientation(this.axes.isXScrollBarVisible),this.brush.setScale(this.scrollScale),this.brush.setExtent([0,this.brushMinExtent]);var d=function(e,a){c.filterDataToViewport(n,i,t.axes,c.scrollScale,e),r(i,t,a)},p=function(){return c.onBrushed(c.scrollScale,n,t,u,d)};this.brush.renderBrush(this.brushMinExtent,o,s,p),n.rangeBands([0,u]),d(this.brush.getExtent(),a)},e.prototype.scrollTo=function(t){var i=this.brush.getExtent(),a=i[1]-i[0];i[0]=this.scrollScale(t),i[1]=i[0]+a,this.brush.setExtent(i);var r=this.scrollScale.rangeExtent()[1];e.clampBrushExtent(this.brush,r,this.brushMinExtent),this.brush.scroll()},e.getMinExtent=function(e,t){return t*t/e},e.prototype.onBrushed=function(t,i,a,r,n){var o=this.brush;if(i&&t){e.clampBrushExtent(this.brush,r,this.brushMinExtent);var s=o.getExtent();n(s,!0)}},e.clampBrushExtent=function(e,t,i){var a=e.getExtent(),r=a[1]-a[0];if(!(r===i&&a[1]<=t&&a[0]>=0)){if(r>i){var n=(r-i)/2;a[0]+=n,a[1]-=n}else if(i>r){var n=(i-r)/2;a[0]-=n,a[1]+=n}a[0]<0?(a[0]=0,a[1]=i):a[0]>t-i&&(a[0]=t-i,a[1]=t),e.setExtent(a)}},e.ScrollbarWidth=10,e}(),m=function(){function i(e){this.axes=e}return i.prototype.getScrollableRegion=function(){return this.axisGraphicsContextScrollable},i.prototype.getLabelsRegion=function(){return this.labelRegion},i.prototype.getLabelBackground=function(){return this.labelBackgroundRegion},i.prototype.getXAxis=function(){return this.xAxisGraphicsContext},i.prototype.getY1Axis=function(){return this.y1AxisGraphicsContext},i.prototype.getY2Axis=function(){return this.y2AxisGraphicsContext},i.prototype.update=function(e,t){this.categoryAxisProperties=e,this.valueAxisProperties=t},i.prototype.init=function(e){var a=this.axisGraphicsContext=e.append("g").classed(i.AxisGraphicsContext["class"],!0);this.svgScrollable=e.append("svg").classed("svgScrollable",!0).style("overflow","hidden");var r=this.axisGraphicsContextScrollable=this.svgScrollable.append("g").classed(i.AxisGraphicsContext["class"],!0);this.labelBackgroundRegion=this.svgScrollable.append("g").classed(t.NewDataLabelUtils.labelBackgroundGraphicsContextClass["class"],!0),this.labelRegion=this.svgScrollable.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass["class"],!0);var n=this.axes.showLinesOnX,o=this.axes.showLinesOnY,s=o,l=!s;l?(this.y1AxisGraphicsContext=r.append("g").attr("class","y axis"),this.y2AxisGraphicsContext=r.append("g").attr("class","y axis")):(this.y1AxisGraphicsContext=a.append("g").attr("class","y axis"),this.y2AxisGraphicsContext=a.append("g").attr("class","y axis")),s?this.xAxisGraphicsContext=r.append("g").attr("class","x axis"):this.xAxisGraphicsContext=a.append("g").attr("class","x axis"),this.xAxisGraphicsContext.classed("showLinesOnAxis",n),this.y1AxisGraphicsContext.classed("showLinesOnAxis",o),this.y2AxisGraphicsContext.classed("showLinesOnAxis",o),this.xAxisGraphicsContext.classed("hideLinesOnAxis",!n),this.y1AxisGraphicsContext.classed("hideLinesOnAxis",!o),this.y2AxisGraphicsContext.classed("hideLinesOnAxis",!o)},i.updateAnimatedTickTooltips=function(e,t){e.each("end",function(){d3.select(this).selectAll("text").append("title").text(function(e,i){return t[i]})})},i.updateTickTooltips=function(e,t){e.selectAll("text").append("title").text(function(e,i){return t[i]})},i.prototype.renderAxes=function(a,r){var n,o,s,l=a.marginLimits,u=a.plotArea,c=a.viewport,h=a.margin,d=a.axes,p=a.tickLabelMargins,g=l.bottom,m=l.left;if(this.axes.shouldRenderAxis(d.x)){n=d.x.isCategoryAxis?this.categoryAxisProperties&&this.categoryAxisProperties.labelColor?this.categoryAxisProperties.labelColor:null:this.valueAxisProperties&&this.valueAxisProperties.labelColor?this.valueAxisProperties.labelColor:null,d.x.axis.orient("bottom"),d.x.willLabelsFit||d.x.axis.tickPadding(i.TickPaddingRotatedX);var f=this.xAxisGraphicsContext;r?f.transition().duration(r).call(d.x.axis).call(i.updateAnimatedTickTooltips,d.x.values):f.call(d.x.axis),f.call(i.darkenZeroLine).call(i.setAxisLabelColor,n);var y=f.selectAll("text");d.x.willLabelsWordBreak?y.call(t.AxisHelper.LabelLayoutStrategy.wordBreak,d.x,g):y.call(t.AxisHelper.LabelLayoutStrategy.rotate,g,e.TextMeasurementService.svgEllipsis,!d.x.willLabelsFit,g===p.xMax,d.x,h,this.axes.isXScrollBarVisible||this.axes.isYScrollBarVisible),r||i.updateTickTooltips(f,d.x.values)}else this.xAxisGraphicsContext.selectAll("*").remove();if(this.axes.shouldRenderAxis(d.y1)){o=d.y1.isCategoryAxis?this.categoryAxisProperties&&this.categoryAxisProperties.labelColor?this.categoryAxisProperties.labelColor:null:this.valueAxisProperties&&this.valueAxisProperties.labelColor?this.valueAxisProperties.labelColor:null;var v=this.axes.shouldShowY1OnRight(),b=v?a.tickPadding.right:a.tickPadding.left;d.y1.axis.tickSize(-u.width).tickPadding(b).orient(this.axes.getYAxisOrientation().toLowerCase());var C=this.y1AxisGraphicsContext;if(r?C.transition().duration(r).call(d.y1.axis).call(i.updateAnimatedTickTooltips,d.y1.values):C.call(d.y1.axis),C.call(i.darkenZeroLine).call(i.setAxisLabelColor,o),p.yLeft>=m&&C.selectAll("text").call(t.AxisHelper.LabelLayoutStrategy.clip,m-b,e.TextMeasurementService.svgEllipsis),r||i.updateTickTooltips(C,d.y1.values),!d.y2||this.valueAxisProperties&&null!=this.valueAxisProperties.secShow&&!this.valueAxisProperties.secShow)this.y2AxisGraphicsContext.selectAll("*").remove();else{s=this.valueAxisProperties&&this.valueAxisProperties.secLabelColor?this.valueAxisProperties.secLabelColor:null;var S=v?a.tickPadding.left:a.tickPadding.right;d.y2.axis.tickSize(i.Y2TickSize).tickPadding(S).orient(v?t.yAxisPosition.left.toLowerCase():t.yAxisPosition.right.toLowerCase());var x=this.y2AxisGraphicsContext;r?x.transition().duration(r).call(d.y2.axis).call(i.updateAnimatedTickTooltips,d.y2.values):x.call(d.y2.axis),x.call(i.darkenZeroLine).call(i.setAxisLabelColor,s),p.yRight>=m&&x.selectAll("text").call(t.AxisHelper.LabelLayoutStrategy.clip,m-S,e.TextMeasurementService.svgEllipsis),r||i.updateTickTooltips(x,d.y2.values)}}else this.y1AxisGraphicsContext.selectAll("*").remove(),this.y2AxisGraphicsContext.selectAll("*").remove();var w=a.axisLabels,D=null!=w.x||null!=w.y||null!=w.y2;if(D){var P=!this.axes.shouldRenderAxisTitle(d.x,!0,!1),L=!this.axes.shouldRenderAxisTitle(d.y1,!0,!1),_=!this.axes.shouldRenderAxisTitle(d.y2,!1,!0),N={axisLabels:w,viewport:c,margin:h,hideXAxisTitle:P,hideYAxisTitle:L,hideY2AxisTitle:_,xLabelColor:n,yLabelColor:o,y2LabelColor:s,fontSize:i.AxisLabelFontSize};this.renderAxesLabels(N)}else this.axisGraphicsContext.selectAll(".xAxisLabel").remove(),this.axisGraphicsContext.selectAll(".yAxisLabel").remove();this.translateAxes(c,h)},i.prototype.renderAxesLabels=function(i){this.axisGraphicsContext.selectAll(".xAxisLabel").remove(),this.axisGraphicsContext.selectAll(".yAxisLabel").remove();var a=i.margin,r=i.viewport.width-(a.left+a.right),n=i.viewport.height,o=i.fontSize,s=o,l=this.axes.shouldShowY1OnRight();if(!i.hideXAxisTitle){var u=this.axisGraphicsContext.append("text").style("text-anchor","middle").text(i.axisLabels.x).call(function(e){e.each(function(){var e=d3.select(this);e.attr({"class":"xAxisLabel",transform:t.SVGUtil.translate(r/2,n-s)})})});u.style("fill",i.xLabelColor?i.xLabelColor.solid.color:null),u.call(t.AxisHelper.LabelLayoutStrategy.clip,r,e.TextMeasurementService.svgEllipsis).call(t.tooltipUtils.tooltipUpdate,[i.axisLabels.x])}if(!i.hideYAxisTitle){var c=this.axisGraphicsContext.append("text").style("text-anchor","middle").text(i.axisLabels.y).call(function(e){e.each(function(){var e=d3.select(this);e.attr({"class":"yAxisLabel",transform:"rotate(-90)",y:l?r+a.right-o:-a.left,x:-((n-a.top-a.bottom)/2),dy:"1em"})})});c.style("fill",i.yLabelColor?i.yLabelColor.solid.color:null),c.call(t.AxisHelper.LabelLayoutStrategy.clip,n-(a.bottom+a.top),e.TextMeasurementService.svgEllipsis).call(t.tooltipUtils.tooltipUpdate,[i.axisLabels.y])}if(!i.hideY2AxisTitle&&i.axisLabels.y2){var h=this.axisGraphicsContext.append("text").style("text-anchor","middle").text(i.axisLabels.y2).call(function(e){e.each(function(){var e=d3.select(this);e.attr({"class":"yAxisLabel",transform:"rotate(-90)",y:l?-a.left:r+a.right-o,x:-((n-a.top-a.bottom)/2),dy:"1em"})})});h.style("fill",i.y2LabelColor?i.y2LabelColor.solid.color:null),h.call(t.AxisHelper.LabelLayoutStrategy.clip,n-(a.bottom+a.top),e.TextMeasurementService.svgEllipsis).call(t.tooltipUtils.tooltipUpdate,[i.axisLabels.y2])}},i.prototype.translateAxes=function(e,i){var a=e.width-(i.left+i.right),r=e.height-(i.top+i.bottom),n=this.axes.shouldShowY1OnRight();this.xAxisGraphicsContext.attr("transform",t.SVGUtil.translate(0,r)),this.y1AxisGraphicsContext.attr("transform",t.SVGUtil.translate(n?a:0,0)),this.y2AxisGraphicsContext.attr("transform",t.SVGUtil.translate(n?0:a,0)),this.svgScrollable.attr({x:0,width:e.width,height:e.height}),this.axisGraphicsContext.attr("transform",t.SVGUtil.translate(i.left,i.top)),this.axisGraphicsContextScrollable.attr("transform",t.SVGUtil.translate(i.left,i.top)),this.labelRegion.attr("transform",t.SVGUtil.translate(i.left,i.top)),this.labelBackgroundRegion.attr("transform",t.SVGUtil.translate(i.left,i.top)),this.axes.isXScrollBarVisible?(this.svgScrollable.attr({x:i.left}),this.axisGraphicsContextScrollable.attr("transform",t.SVGUtil.translate(0,i.top)),this.labelRegion.attr("transform",t.SVGUtil.translate(0,i.top)),this.labelBackgroundRegion.attr("transform",t.SVGUtil.translate(0,i.top)),this.svgScrollable.attr("width",a)):this.axes.isYScrollBarVisible&&this.svgScrollable.attr("height",r+i.top)},i.darkenZeroLine=function(e){var t=e.selectAll("g.tick").filter(function(e){return 0===e}).node();t&&d3.select(t).select("line").classed("zero-line",!0)},i.setAxisLabelColor=function(e,t){e.selectAll("g.tick text").style("fill",t?t.solid.color:null)},i.AxisPadding={left:10,right:10,top:0,bottom:12},i.AxisGraphicsContext=l("axisGraphicsContext"),i.TickPaddingRotatedX=5,i.AxisLabelFontSize=11,i.Y2TickSize=-6,i}(),f=function(){function i(e,a,r){this.scrollbarWidth=a,this.isScrollable=e,this.maxMarginFactor=i.MaxMarginFactor,this.yAxisOrientation=t.yAxisPosition.left,this.lastLeft=0,this.trimOrdinalDataOnOverflow=r}return i.prototype.shouldShowY1OnRight=function(){return this.yAxisOrientation===t.yAxisPosition.right},i.prototype.isYAxisCategorical=function(){return this.layout&&this.layout.axes.y1.isCategoryAxis},i.prototype.hasCategoryAxis=function(){var e=this.layout&&this.layout.axes;return e?this.isYAxisCategorical()?e.y1&&e.y1.values.length>0:e.x&&e.x.values.length>0:!1},i.prototype.hasY2Axis=function(){return this.layout&&null!=this.layout.axes.y2},i.prototype.getYAxisOrientation=function(){return this.yAxisOrientation},i.prototype.setAxisLinesVisibility=function(e){this.showLinesOnX=s.hasFlag(e,3)||s.hasFlag(e,1),this.showLinesOnY=s.hasFlag(e,3)||s.hasFlag(e,2)},i.prototype.setMaxMarginFactor=function(e){this.maxMarginFactor=e},i.prototype.update=function(e){if(e&&e.length>0){var i=e[0].metadata;this.categoryAxisProperties=t.CartesianHelper.getCategoryAxisProperties(i),this.valueAxisProperties=t.CartesianHelper.getValueAxisProperties(i)}var a=this.valueAxisProperties.position;this.yAxisOrientation=a?a.toString():t.yAxisPosition.left},i.prototype.addWarnings=function(e){var i=this.layout&&this.layout.axes;(i&&i.x&&i.x.hasDisallowedZeroInDomain||i.y1&&i.y1.hasDisallowedZeroInDomain||i.y2&&i.y2.hasDisallowedZeroInDomain)&&e.unshift(new t.ZeroValueWarning)},i.prototype.negotiateAxes=function(a,r,n,s,l,u,c){var h=e.Prototype.inherit(i.MinimumMargin),d=e.Prototype.inherit(r),p=d.width*this.maxMarginFactor,g=Math.max(i.MinimumMargin.bottom,Math.ceil(d.height*this.maxMarginFactor)),m={left:p,right:p,top:0,bottom:g};h.left=this.lastLeft;var f,y=o(a,d,h,s,this.categoryAxisProperties,this.valueAxisProperties,u,!1,null,this.trimOrdinalDataOnOverflow),v=this.shouldRenderAxis(y.x),b=this.shouldRenderAxis(y.y1),C=this.shouldRenderAxis(y.y2,!0),S=d.width-(h.left+h.right),x=!1;this.isXScrollBarVisible=!1,this.isYScrollBarVisible=!1;var w=this.shouldShowY1OnRight();if(a&&(a[0].getVisualCategoryAxisIsScalar&&(x=a[0].getVisualCategoryAxisIsScalar()),!x&&this.isScrollable&&a[0].getPreferredPlotArea)){var D=this.showLinesOnY?y.x.categoryThickness:y.y1.categoryThickness,P=this.showLinesOnY?y.x.values.length:y.y1.values.length;f=a[0].getPreferredPlotArea(x,P,D),this.showLinesOnY&&f&&f.width>d.width&&(this.isXScrollBarVisible=!0,d.height-=this.scrollbarWidth),this.showLinesOnX&&f&&f.height>d.height&&(this.isYScrollBarVisible=!0,d.width-=this.scrollbarWidth,S=d.width-(h.left+h.right))}y=o(a,d,h,s,this.categoryAxisProperties,this.valueAxisProperties,u,this.isXScrollBarVisible||this.isYScrollBarVisible,y,this.trimOrdinalDataOnOverflow);for(var L=void 0,_=void 0,N=0,T=!1;2>N&&!T;N++){L=t.AxisHelper.getTickLabelMargins({width:S,height:d.height},m.left,e.TextMeasurementService.measureSvgTextWidth,e.TextMeasurementService.estimateSvgTextHeight,y,m.bottom,u,this.isXScrollBarVisible||this.isYScrollBarVisible,w,v,b,C);var V=w?L.yRight:L.yLeft,M=w?L.yLeft:L.yRight,A=L.xMax;V+=n.left,(C&&!w||w&&b)&&(M+=n.right),A+=n.bottom,l&&(y.x.axisLabel=null,y.y1.axisLabel=null,y.y2&&(y.y2.axisLabel=null)),this.addUnitTypeToAxisLabels(y),_={x:y.x.axisLabel,y:y.y1.axisLabel,y2:y.y2?y.y2.axisLabel:null},null!=_.x&&(A+=i.XAxisLabelPadding),null!=_.y&&(V+=i.YAxisLabelPadding),null!=_.y2&&(M+=i.YAxisLabelPadding),h.left=w?M:V,h.right=w?V:M,x||(h.right+=c),h.bottom=A,S=d.width-(h.left+h.right);var R=y.y1.values.length,I=y.y2&&y.y2.values.length;y=o(a,d,h,s,this.categoryAxisProperties,this.valueAxisProperties,u,this.isXScrollBarVisible||this.isYScrollBarVisible,y,this.trimOrdinalDataOnOverflow),y.y1.values.length!==R||y.y2&&y.y2.values.length!==I||(T=!0)}var F={width:d.width-(h.left+h.right),height:d.height-(h.top+h.bottom)};return this.layout={axes:y,axisLabels:_,margin:h,marginLimits:m,viewport:d,plotArea:F,preferredPlotArea:f,tickLabelMargins:L,tickPadding:n},this.lastLeft=h.left,this.layout},i.prototype.isLogScaleAllowed=function(e){var t=this.layout&&this.layout.axes;if(!t)return!1;switch(e){case 0:return t.x.isLogScaleAllowed;case 1:return t.y1.isLogScaleAllowed;case 2:return t.y2&&t.y2.isLogScaleAllowed}},i.prototype.axesHaveTicks=function(e){if(!this.layout)return!1;var i=this.layout.margin,a=e.width-(i.left+i.right),r=e.height-(i.top+i.bottom);return 0===t.AxisHelper.getRecommendedNumberOfTicksForXAxis(a)&&0===t.AxisHelper.getRecommendedNumberOfTicksForYAxis(r)?!1:!0;
},i.prototype.shouldRenderAxisTitle=function(e,t,i){var a=i?"secShowAxisTitle":"showAxisTitle";return!!this.getAxisProperty(e,a,t)},i.prototype.shouldRenderAxis=function(e,t){if(void 0===t&&(t=!1),!e)return!1;var i=t?"secShow":"show";return this.getAxisProperty(e,i,!0)&&e.values&&e.values.length>0},i.prototype.getAxisProperty=function(e,t,i){if(!e)return i;var a=e.isCategoryAxis?this.categoryAxisProperties:this.valueAxisProperties;return a&&null!=a[t]?a[t]:i},i.prototype.addUnitTypeToAxisLabels=function(e){var a=i.getUnitType(e.x.formatter);if(e.x.isCategoryAxis?this.categoryAxisHasUnitType=null!=a:this.valueAxisHasUnitType=null!=a,e.x.axisLabel&&a&&(e.x.isCategoryAxis?e.x.axisLabel=t.AxisHelper.createAxisLabel(this.categoryAxisProperties,e.x.axisLabel,a):e.x.axisLabel=t.AxisHelper.createAxisLabel(this.valueAxisProperties,e.x.axisLabel,a)),a=i.getUnitType(e.y1.formatter),e.y1.isCategoryAxis?this.categoryAxisHasUnitType=null!=a:this.valueAxisHasUnitType=null!=a,e.y1.axisLabel&&a&&(e.y1.isCategoryAxis?e.y1.axisLabel=t.AxisHelper.createAxisLabel(this.categoryAxisProperties,e.y1.axisLabel,a):e.y1.axisLabel=t.AxisHelper.createAxisLabel(this.valueAxisProperties,e.y1.axisLabel,a)),e.y2){var r=i.getUnitType(e.y2.formatter);this.secondaryValueAxisHasUnitType=null!=r,e.y2.axisLabel&&r&&(e.y2.axisLabel=t.AxisHelper.createAxisLabel(this.valueAxisProperties,e.y2.axisLabel,r,!0))}},i.getUnitType=function(e){return e&&e.displayUnit&&e.displayUnit.value>1?e.displayUnit.title:void 0},i.YAxisLabelPadding=20,i.XAxisLabelPadding=18,i.MaxMarginFactor=.25,i.MinimumMargin={left:1,right:1,top:8,bottom:25},i}();!function(e){function i(e,i,u,c,h,d,p,g){void 0===h&&(h=!1),void 0===d&&(d=!1);var m=[],f={isScrollable:h,animator:c,interactivityService:u,tooltipsEnabled:p,seriesLabelFormattingEnabled:d,lineChartLabelDensityEnabled:g};switch(e){case 1:m.push(a(2,!1,f));break;case 0:m.push(a(1,!1,f));break;case 2:m.push(a(16,!1,f));break;case 9:m.push(r(f));break;case 12:m.push(n(f));break;case 11:m.push(o(f));break;case 4:m.push(s(t.ColumnChartType.stackedColumn,f));break;case 3:m.push(s(t.ColumnChartType.clusteredColumn,f));break;case 8:m.push(s(t.ColumnChartType.hundredPercentStackedColumn,f));break;case 6:m.push(s(t.ColumnChartType.stackedBar,f));break;case 5:m.push(s(t.ColumnChartType.clusteredBar,f));break;case 7:m.push(s(t.ColumnChartType.hundredPercentStackedBar,f));break;case 10:var y=l();m.push(s(y,f)),m.push(a(1,!0,f));break;case 13:m.push(s(t.ColumnChartType.clusteredColumn,f)),m.push(a(1,!0,f));break;case 14:m.push(s(t.ColumnChartType.stackedColumn,f)),m.push(a(1,!0,f));break;case 15:m.push(s(t.ColumnChartType.clusteredColumn,f)),m.push(o(f));break;case 16:m.push(s(t.ColumnChartType.stackedColumn,f)),m.push(o(f))}return m}function a(e,i,a){var r={animator:a.animator,interactivityService:a.interactivityService,isScrollable:a.isScrollable,tooltipsEnabled:a.tooltipsEnabled,seriesLabelFormattingEnabled:a.seriesLabelFormattingEnabled,chartType:e,lineChartLabelDensityEnabled:a.lineChartLabelDensityEnabled};return i&&(r.chartType=8|r.chartType),new t.LineChart(r)}function r(e){return e.isScrollable=!1,new t.ScatterChart(e)}function n(e){return new t.WaterfallChart(e)}function o(e){return new t.DataDotChart(e)}function s(e,i){var a={animator:i.animator,interactivityService:i.interactivityService,isScrollable:i.isScrollable,seriesLabelFormattingEnabled:i.seriesLabelFormattingEnabled,tooltipsEnabled:i.tooltipsEnabled,chartType:e};return new t.ColumnChart(a)}function l(e){var i=t.ColumnChartType.clusteredColumn;if(e){var a=e.general;if(a){switch(a.visualType1){case"Column":i=t.ColumnChartType.clusteredColumn;break;case"ColumnStacked":i=t.ColumnChartType.stackedColumn}a.visualType2}}return i}e.createLayers=i}(d||(d={}));var y=function(){function e(e){this.palette=e,this.clearPreferredScale()}return e.prototype.getColorScaleByKey=function(e){return this.setPreferredScale(e),this.preferredScale},e.prototype.getNewColorScale=function(){return this.preferredScale},e.prototype.getColorByIndex=function(e){return this.palette.getColorByIndex(e)},e.prototype.getSentimentColors=function(){return this.palette.getSentimentColors()},e.prototype.getBasePickerColors=function(){return this.palette.getBasePickerColors()},e.prototype.clearPreferredScale=function(){this.preferredScale=this.palette.getNewColorScale(),this.rotated=!1},e.prototype.rotateScale=function(){this.preferredScale=this.preferredScale.clone(),this.preferredScale.clearAndRotateScale(),this.rotated=!0},e.prototype.setPreferredScale=function(e){this.rotated||(this.preferredScale=this.palette.getColorScaleByKey(e))},e}();t.SharedColorPalette=y}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.EnumExtensions,a=2,r=4,n=8,o=16,s=32|o;!function(e){e[e.clusteredBar=a|n]="clusteredBar",e[e.clusteredColumn=r|n]="clusteredColumn",e[e.hundredPercentStackedBar=a|s]="hundredPercentStackedBar",e[e.hundredPercentStackedColumn=r|s]="hundredPercentStackedColumn",e[e.stackedBar=a|o]="stackedBar",e[e.stackedColumn=r|o]="stackedColumn"}(t.ColumnChartType||(t.ColumnChartType={}));var l=t.ColumnChartType,u={category:"Category",series:"Series",y:"Y"},c=function(){function n(e){var t=e.chartType;this.chartType=t,this.categoryAxisType=null,this.animator=e.animator,this.isScrollable=e.isScrollable,this.tooltipsEnabled=e.tooltipsEnabled,this.interactivityService=e.interactivityService,this.seriesLabelFormattingEnabled=e.seriesLabelFormattingEnabled}return n.customizeQuery=function(e){var i=e.dataViewMappings[0];if(i&&i.categorical&&i.categorical.categories){i.categorical.dataVolume=4;var a=i.categorical.categories,r=a["for"]["in"].items;if(!_.isEmpty(r)){var n,o=r[0].type;i.metadata&&(n=i.metadata.objects),t.CartesianChart.getIsScalar(n,t.columnChartProps.categoryAxis.axisType,o)&&(a.dataReductionAlgorithm={sample:{}})}}},n.getSortableRoles=function(e){var i=e.dataViewMappings[0];if(!i||!i.categorical||!i.categorical.categories)return null;var a=i.categorical.categories,r=a["for"]["in"].items;if(!_.isEmpty(r)){var n,o=r[0].type;if(i.metadata&&(n=i.metadata.objects),!t.CartesianChart.getIsScalar(n,t.columnChartProps.categoryAxis.axisType,o))return["Category","Y"]}return null},n.prototype.updateVisualMetadata=function(e,t,i){this.xAxisProperties=e,this.yAxisProperties=t,this.margin=i},n.prototype.init=function(e){this.svg=e.svg,this.mainGraphicsContext=this.svg.append("g").classed("columnChartMainGraphicsContext",!0),this.labelGraphicsContext=this.svg.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass["class"],!0),this.style=e.style,this.currentViewport=e.viewport,this.hostService=e.host,this.interactivity=e.interactivity,this.colors=this.style.colorPalette.dataColors,this.cartesianVisualHost=e.cartesianHost,this.options=e,this.isComboChart=t.ComboChart.isComboChart(e.chartType);var i=this.element=e.element;i.addClass(n.ColumnChartClassName)},n.prototype.getCategoryLayout=function(e,r){var n;n=i.hasFlag(this.chartType,a)?this.currentViewport.height-(this.margin.top+this.margin.bottom):this.currentViewport.width-(this.margin.left+this.margin.right);var o=this.data?this.data.categoryMetadata:void 0,s=t.AxisHelper.getCategoryValueType(o),l=this.data?this.data.scalarCategoryAxis:!1,u=t.AxisHelper.createDomain(this.data.series,s,l,r.forcedXDomain);return t.CartesianChart.getLayout(this.data,{availableWidth:n,categoryCount:e,domain:u,isScalar:l,isScrollable:this.isScrollable,trimOrdinalDataOnOverflow:r.trimOrdinalDataOnOverflow})},n.converter=function(a,s,l,c,d,p,g){void 0===l&&(l=!1),void 0===c&&(c=!1),void 0===d&&(d=null);var m=t.CartesianHelper.getCategoryAxisProperties(d),f=t.CartesianHelper.getValueAxisProperties(d);c=t.CartesianHelper.isScalar(c,m),a=t.ColumnUtil.applyUserMinMax(c,a,m);var y=new h(a),v=t.converterHelper.getPivotedCategories(a,t.columnChartProps.general.formatString),b=v.categories,C=v.categoryFormatter,S=v.categoryIdentities,x=a.categories&&a.categories.length>0?a.categories[0].source:void 0,w=t.dataLabelUtils.getDefaultColumnLabelSettings(l||i.hasFlag(p,o)),D=t.LegendData.DefaultLegendLabelFillColor,P=void 0,L=void 0;if(d&&d.objects){var _=d.objects;P=e.DataViewObjects.getFillColor(_,t.columnChartProps.dataPoint.defaultColor),L=e.DataViewObjects.getValue(_,t.columnChartProps.dataPoint.showAllDataPoints),D=e.DataViewObjects.getFillColor(_,t.columnChartProps.legend.labelColor,t.LegendData.DefaultLegendLabelFillColor);var N=_.labels;t.dataLabelUtils.updateLabelSettingsFromLabelsObject(N,w)}for(var T=y.getLegend(s,D,P),V=T.legend.dataPoints,M=T.seriesSources,A=n.createDataPoints(a,b,S,V,T.seriesObjects,y,w,l,c,t.converterHelper.categoryIsAlsoSeriesRole(a,u.series,u.category),v.categoryObjects,P,p,x),R=A.series,I=[],F=0,O=V.length;O>F;F++)I.push(M[F]);var G=t.converterHelper.createAxesLabels(m,f,x,I);if(!i.hasFlag(p,r)){var z=G.xAxisLabel;G.xAxisLabel=G.yAxisLabel,G.yAxisLabel=z}if(g){for(var H=0;H<R.length;H++){var k=R[H];g.applySelectionStateToData(k.data)}g.applySelectionStateToData(T.legend.dataPoints)}return{categories:b,categoryFormatter:C,series:R,valuesMetadata:I,legendData:T.legend,hasHighlights:A.hasHighlights,categoryMetadata:x,scalarCategoryAxis:c,labelSettings:w,axesLabels:{x:G.xAxisLabel,y:G.yAxisLabel},hasDynamicSeries:A.hasDynamicSeries,isMultiMeasure:A.isMultiMeasure,defaultDataPointColor:P,showAllDataPoints:L}},n.canSupportOverflow=function(e,t){return!i.hasFlag(e,o)||1===t},n.createDataPoints=function(a,r,s,l,u,c,h,d,p,g,m,f,y,v){void 0===d&&(d=!1),void 0===p&&(p=!1);var b=a&&a.values?a.values.grouped():void 0,C=r.length,S=l.length,x=[];if(1>S||1>C)return{series:x,hasHighlights:!1,hasDynamicSeries:!1,isMultiMeasure:!1};var w=a.categories;v=w&&w.length>0?w[0].source:null;for(var D=t.AxisHelper.getCategoryValueType(v),P=t.AxisHelper.isDateTime(D),L=[],_=[],N=[],T=[],V=!(!a.values||!a.values.source),M=!V&&S>1,A=!1,R=c.hasHighlightValues(0),I=0;S>I;I++){for(var F=[],O=[],G=0;C>G;G++){var z=c.getValueBySeriesAndCategory(I,G);if(F[G]=z,R){var H=c.getHighlightBySeriesAndCategory(I,G);O[G]=H,z>=0&&H>=0&&z>=H||0>=z&&0>=H&&H>=z||(A=!0)}}N.push(F),R&&T.push(O)}A&&!n.canSupportOverflow(y,S)&&(A=!1,R=!1,N=T);for(var k=m,E=t.columnChartProps.general.formatString,I=0;S>I;I++){var W=[],B=l[I],U=void 0;if(!V){var j=b&&b.length>0&&b[0].values?b[0].values[I]:null,K=j&&j.source&&j.source.objects?j.source.objects.labels:null;K&&(U=e.Prototype.inherit(h),t.dataLabelUtils.updateLabelSettingsFromLabelsObject(K,U))}x.push({displayName:B.label,key:"series"+I,index:I,data:W,identity:B.identity,color:B.color,labelSettings:U}),S>1&&(k=u[I]);for(var Y=a.values[I].source,G=0;C>G;G++){0===I&&(L.push(0),_.push(0));var z=t.AxisHelper.normalizeNonFiniteNumber(N[I][G]);if(!(null==z&&I>0)){var X=z,q=r[G];if((!P||null==q||q instanceof Date)&&(P&&q&&(q=q.getTime()),!p||null!=q&&!isNaN(q))){var $=void 0;d&&($=t.StackedUtil.getStackedMultiplier(a,G,S,C,c));var Q=z,Z=0>z;$&&(z*=Z?$.neg:$.pos);var J=Math.abs(z),ee=void 0;Z?(ee=_[G],isNaN(J)||(_[G]-=J)):(isNaN(J)||(L[G]+=J),ee=L[G]);var te=b&&b.length>I&&b[I].values?b[I].values[0]:null,ie=a.categories&&a.categories.length>0?a.categories[0]:null,ae=t.SelectionIdBuilder.builder().withCategory(ie,G).withSeries(a.values,te).withMeasure(c.getMeasureNameByIndex(I)).createSelectionId(),re=r[G],ne=n.getDataPointColor(B,G,k),oe=t.TooltipBuilder.createTooltipInfo(E,a,re,X,null,null,I,G),se=x[I],le=se.labelSettings?se.labelSettings:h,ue=le.labelColor,ce=void 0;i.hasFlag(y,o)&&(ce=this.getStackedLabelColor(Z,I,S,G,N),ue=ce||I===S-1&&!Z?ue:t.dataLabelUtils.defaultInsideLabelColor);var he={categoryValue:q,value:z,position:ee,valueAbsolute:J,valueOriginal:Q,seriesIndex:I,labelSettings:le,categoryIndex:G,color:ne,selected:!1,originalValue:z,originalPosition:ee,originalValueAbsolute:J,identity:ae,key:ae.getKey(),tooltipInfo:oe,labelFill:ue,labelFormatString:Y.format,lastSeries:ce,chartType:y};if(W.push(he),R){var de=T[I][G],pe=de,ge=!0;null===de&&(de=0,ge=!1),d&&(de*=$.pos);var me=Math.abs(de),fe=ee;de>0?fe-=J-me:0===de&&z>0&&(fe-=J);var ye=t.SelectionId.createWithHighlight(ae),ve=r[G],be=ge?de:void 0,Ce=t.TooltipBuilder.createTooltipInfo(E,a,ve,X,null,null,I,G,be);ge&&(he.tooltipInfo=Ce);var Se={categoryValue:q,value:de,position:fe,valueAbsolute:me,valueOriginal:pe,seriesIndex:I,labelSettings:le,categoryIndex:G,color:ne,selected:!1,highlight:!0,originalValue:z,originalPosition:ee,originalValueAbsolute:J,drawThinner:A,identity:ye,key:ye.getKey(),tooltipInfo:Ce,labelFormatString:Y.format,labelFill:ue,lastSeries:ce,chartType:y};W.push(Se)}}}}}return{series:x,hasHighlights:R,hasDynamicSeries:V,isMultiMeasure:M}},n.getDataPointColor=function(i,a,r){if(r){var n=e.DataViewObjects.getFillColor(r[a],t.columnChartProps.dataPoint.fill);if(n)return n}return i.color},n.getStackedLabelColor=function(e,i,a,r,n){for(var o=!(e&&i===a-1&&1!==a),s=i+1;a>s;s++){var l=t.AxisHelper.normalizeNonFiniteNumber(n[s][r]);if(null!==l&&((!e||e&&0===i)&&l>0||e&&0!==i)){o=!1;break}}return o},n.sliceSeries=function(t,i,a){void 0===a&&(a=0);var r=[];if(t&&t.length>0)for(var n=0,o=t.length;o>n;n++){var s=r[n]=e.Prototype.inherit(t[n]);s.data=t[n].data.filter(function(e){return e.categoryIndex>=a&&e.categoryIndex<i})}return r},n.getInteractiveColumnChartDomElement=function(e){return e.children("svg").get(0)},n.prototype.setData=function(e){var a=i.hasFlag(this.chartType,s);if(this.data={categories:[],categoryFormatter:null,series:[],valuesMetadata:[],legendData:null,hasHighlights:!1,categoryMetadata:null,scalarCategoryAxis:!1,labelSettings:t.dataLabelUtils.getDefaultColumnLabelSettings(a||i.hasFlag(this.chartType,o)),axesLabels:{x:null,y:null},hasDynamicSeries:!1,defaultDataPointColor:null,isMultiMeasure:!1},e.length>0){var r=e[0];if(r&&r.categorical){var l=this.dataViewCat=r.categorical,u=l.categories,c=u&&u.length>0?u[0].source:null,h=t.AxisHelper.getCategoryValueType(c);this.data=n.converter(l,this.cartesianVisualHost.getSharedColors(),a,t.CartesianChart.getIsScalar(r.metadata?r.metadata.objects:null,t.columnChartProps.categoryAxis.axisType,h),r.metadata,this.chartType,this.interactivityService)}}this.setChartStrategy()},n.prototype.setChartStrategy=function(){switch(this.chartType){case l.clusteredBar:this.columnChart=new t.ClusteredBarChartStrategy;break;case l.clusteredColumn:this.columnChart=new t.ClusteredColumnChartStrategy;break;case l.stackedBar:case l.hundredPercentStackedBar:this.columnChart=new t.StackedBarChartStrategy;break;case l.stackedColumn:case l.hundredPercentStackedColumn:default:this.columnChart=new t.StackedColumnChartStrategy}if(i.hasFlag(this.chartType,o)&&1===this.data.series.length)switch(this.chartType){case l.stackedBar:this.columnChart=new t.ClusteredBarChartStrategy;break;case l.stackedColumn:this.columnChart=new t.ClusteredColumnChartStrategy}},n.prototype.calculateLegend=function(){if(this.interactivity&&this.interactivity.isInteractiveLegend)return this.createInteractiveLegendDataPoints(0);var e=this.data?this.data.legendData:null,t=e?e.dataPoints:[];return _.isEmpty(t)?null:e},n.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||this.data.series&&this.data.series.length>1)},n.prototype.enumerateObjectInstances=function(e,i){switch(i.objectName){case"dataPoint":t.GradientUtils.hasGradientRole(this.dataViewCat)||this.enumerateDataPoints(e);break;case"labels":this.enumerateDataLabels(e)}},n.prototype.enumerateDataLabels=function(e){var i=this.data,a=this.data.labelSettings,r=i.series.length,n=!i.hasDynamicSeries&&(r>1||!i.categoryMetadata)&&this.seriesLabelFormattingEnabled;if(t.dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(e,a,null,n)),0!==r&&n&&a.showLabelPerSeries)for(var o=0;r>o;o++){var s=i.series[o],l=s.labelSettings?s.labelSettings:this.data.labelSettings;e.pushContainer({displayName:s.displayName}),t.dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(e,l,s)),e.popContainer()}},n.prototype.getLabelSettingsOptions=function(e,t,a,r){return{enumeration:e,dataLabelsSettings:t,show:!0,displayUnits:!i.hasFlag(this.chartType,s),precision:!0,selector:a&&a.identity?a.identity.getSelector():null,showAll:r,fontSize:!0}},n.prototype.enumerateDataPoints=function(e){var i=this.data;if(i){var a=i.series.length;if(0!==a)if(i.hasDynamicSeries||a>1||!i.categoryMetadata)for(var r=0;a>r;r++){var n=i.series[r];e.pushInstance({objectName:"dataPoint",displayName:n.displayName,selector:t.ColorHelper.normalizeSelector(n.identity.getSelector()),properties:{fill:{solid:{color:n.color}}}})}else{var o=i.series[0].data,s=i.categoryFormatter;e.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:i.defaultDataPointColor||this.colors.getColorByIndex(0).value}}}}).pushInstance({objectName:"dataPoint",selector:null,properties:{showAllDataPoints:!!i.showAllDataPoints}});for(var r=0;r<o.length;r++){var l=o[r],u=i.categories[r];e.pushInstance({objectName:"dataPoint",displayName:s?s.format(u):u,selector:t.ColorHelper.normalizeSelector(l.identity.getSelector(),!0),properties:{fill:{solid:{color:l.color}}}})}}}},n.prototype.calculateAxesProperties=function(r){var o=this.data;this.currentViewport=r.viewport;var l=this.margin=r.margin,u=o&&o.categories?o.categories.length:0,c=o?this.getCategoryLayout(u,r):{categoryCount:0,categoryThickness:t.CartesianChart.MinOrdinalRectThickness,outerPaddingRatio:t.CartesianChart.OuterPaddingRatio,isScalar:!1};if(this.categoryAxisType=c.isScalar?t.axisType.scalar:null,o&&!c.isScalar&&!this.isScrollable&&r.trimOrdinalDataOnOverflow){var h=Math.min(u,c.categoryCount);h!==u&&(o=e.Prototype.inherit(o),o.series=n.sliceSeries(o.series,h),o.categories=o.categories.slice(0,h))}this.columnChart.setData(o);var d=this.getPreferredPlotArea(c.isScalar,c.categoryCount,c.categoryThickness);d.width===this.currentViewport.width&&(d.width-=l.left+l.right),d.height-=l.top+l.bottom;var p=i.hasFlag(this.chartType,s),g={height:d.height,width:d.width,duration:0,hostService:this.hostService,mainGraphicsContext:this.mainGraphicsContext,labelGraphicsContext:this.labelGraphicsContext,margin:this.margin,layout:c,animator:this.animator,interactivityService:this.interactivityService,viewportHeight:this.currentViewport.height-(l.top+l.bottom),viewportWidth:this.currentViewport.width-(l.left+l.right),is100Pct:p,isComboChart:this.isComboChart};this.ApplyInteractivity(g),this.columnChart.setupVisualProps(g);var m=i.hasFlag(this.chartType,a);if(m){var f=r.forcedXDomain;r.forcedXDomain=r.forcedYDomain,r.forcedYDomain=f}return this.xAxisProperties=this.columnChart.setXScale(p,r.forcedTickCount,r.forcedXDomain,m?r.valueAxisScaleType:r.categoryAxisScaleType,m?r.valueAxisDisplayUnits:r.categoryAxisDisplayUnits,m?r.valueAxisPrecision:r.categoryAxisPrecision),this.yAxisProperties=this.columnChart.setYScale(p,r.forcedTickCount,r.forcedYDomain,m?r.categoryAxisScaleType:r.valueAxisScaleType,m?r.categoryAxisDisplayUnits:r.valueAxisDisplayUnits,m?r.categoryAxisPrecision:r.valueAxisPrecision),r.showCategoryAxisLabel&&this.xAxisProperties.isCategoryAxis||r.showValueAxisLabel&&!this.xAxisProperties.isCategoryAxis?this.xAxisProperties.axisLabel=o.axesLabels.x:this.xAxisProperties.axisLabel=null,r.showValueAxisLabel&&!this.yAxisProperties.isCategoryAxis||r.showCategoryAxisLabel&&this.yAxisProperties.isCategoryAxis?this.yAxisProperties.axisLabel=o.axesLabels.y:this.yAxisProperties.axisLabel=null,[this.xAxisProperties,this.yAxisProperties]},n.prototype.getPreferredPlotArea=function(e,r,n){var o={height:this.currentViewport.height,width:this.currentViewport.width};if(this.isScrollable&&!e){var s=t.CartesianChart.getPreferredCategorySpan(r,n);i.hasFlag(this.chartType,a)?o.height=Math.max(s,o.height):o.width=Math.max(s,o.width)}return o},n.prototype.ApplyInteractivity=function(e){var t=this,i=this.interactivity;if(i&&(i.dragDataPoint&&(e.onDragStart=function(e){e.identity&&t.hostService.onDragStart({event:d3.event,data:{data:e.identity.getSelector()}})}),i.isInteractiveLegend)){var a=function(){var e=d3.mouse(t.mainGraphicsContext[0][0]),i=e[0],a=e[1],r=t.columnChart.getClosestColumnIndex(i,a);t.selectColumn(r)},r=n.getInteractiveColumnChartDomElement(this.element);this.svg.on("click",a),d3.select(r).on("click",a).style("touch-action","none");var o=d3.behavior.drag().origin(Object).on("drag",a);this.svg.call(o),d3.select(r).call(o)}},n.prototype.selectColumn=function(e,t){if(void 0===t&&(t=!1),t||this.lastInteractiveSelectedColumnIndex!==e){var i=this.createInteractiveLegendDataPoints(e),a=i.dataPoints;this.cartesianVisualHost.updateLegend(i),a.length>0&&this.columnChart.selectColumn(e,this.lastInteractiveSelectedColumnIndex),this.lastInteractiveSelectedColumnIndex=e}},n.prototype.createInteractiveLegendDataPoints=function(e){var i=this.data;if(!i||_.isEmpty(i.series))return{dataPoints:[]};for(var a=t.columnChartProps.general.formatString,r=[],n=i.categories&&i.categories[e],o=i.series,s=i.legendData&&i.legendData.dataPoints,l=new h(this.dataViewCat),u=0,c=o.length;c>u;u++){var d=l.getValueBySeriesAndCategory(u,e),p=i.valuesMetadata[u],g=t.converterHelper.getFormattedLegendLabel(p,this.dataViewCat.values,a),m=void 0;if(1===o.length){var f=o[0];m=f.data.length>e&&f.data[e].color}else m=s.length>u&&s[u].color;r.push({color:m,icon:t.LegendIcon.Box,label:g,category:i.categoryFormatter?i.categoryFormatter.format(n):n,measure:t.valueFormatter.format(d,t.valueFormatter.getFormatString(p,a)),identity:t.SelectionId.createNull(),selected:!1})}return{dataPoints:r}},n.prototype.overrideXScale=function(e){this.xAxisProperties=e},n.prototype.render=function(e){var i=this.columnChart.drawColumns(!e),a=this.data;this.tooltipsEnabled&&t.TooltipManager.addTooltip(i.shapesSelection,function(e){return e.data.tooltipInfo});var r=[],n=void 0;if(this.interactivityService){for(var o=0,s=a.series.length;s>o;o++)r=r.concat(a.series[o].data);n={datapoints:r,bars:i.shapesSelection,hasHighlights:a.hasHighlights,mainGraphicsContext:this.mainGraphicsContext,viewport:i.viewport,axisOptions:i.axisOptions,showLabel:a.labelSettings.show}}return this.interactivity&&this.interactivity.isInteractiveLegend&&this.data.series.length>0&&this.selectColumn(0,!0),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),{dataPoints:r,behaviorOptions:n,labelDataPoints:i.labelDataPoints,labelsAreNumeric:!0}},n.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},n.prototype.getVisualCategoryAxisIsScalar=function(){return this.data?this.data.scalarCategoryAxis:!1},n.prototype.getSupportedCategoryAxisType=function(){var e=this.data?this.data.categoryMetadata:void 0,i=t.AxisHelper.getCategoryValueType(e),a=t.AxisHelper.isOrdinal(i);return a?t.axisType.categorical:t.axisType.both},n.prototype.setFilteredData=function(t,i){var a=e.Prototype.inherit(this.data);return a.series=n.sliceSeries(a.series,i,t),a.categories=a.categories.slice(t,i),this.columnChart.setData(a),a},n.getLabelFill=function(e,i,a){return e?e:i&&!a?t.NewDataLabelUtils.defaultInsideLabelColor:t.NewDataLabelUtils.defaultLabelColor},n.ColumnChartClassName="columnChart",n.clusteredValidLabelPositions=[16,4,1,2],n.stackedValidLabelPositions=[1,4,2],n.SeriesClasses=jsCommon.CssConstants.createClassAndSelector("series"),n}();t.ColumnChart=c;var h=function(){function e(e){this.dataView=e}return e.prototype.getLegend=function(e,i,a){var r=[],n=[],o=[],s=!1,l=new t.ColorHelper(e,t.columnChartProps.dataPoint.fill,a),u=void 0;if(this.dataView&&this.dataView.values){for(var c=this.dataView.values,h=c.grouped(),d=!(!c||!c.source),p=t.columnChartProps.general.formatString,g=0,m=h.length;m>g;g++)for(var f=h[g],y=f.objects,v=f.values,b=0,C=v.length;C>b;b++){var S=v[b],x=S.source;if(!t.DataRoleHelper.hasRole(x,"Gradient")||t.DataRoleHelper.hasRole(x,"Y")){n.push(x),o.push(S.objects);var w=S.identity?t.SelectionId.createWithIdAndMeasure(S.identity,x.queryName):t.SelectionId.createWithMeasure(this.getMeasureNameByIndex(b)),D=t.converterHelper.getFormattedLegendLabel(x,c,p),P=d?l.getColorForSeriesValue(y||x.objects,c.identityFields,x.groupName):l.getColorForMeasure(y||x.objects,x.queryName);r.push({icon:t.LegendIcon.Box,color:P,label:D,identity:w,selected:!1}),S.identity&&void 0!==x.groupName&&(s=!0)}}var L=this.dataView.values;u=L&&L.source?L.source.displayName:""}var _={title:u,dataPoints:r,grouped:s,labelColor:i};return{legend:_,seriesSources:n,seriesObjects:o}},e.prototype.getValueBySeriesAndCategory=function(e,t){return this.dataView.values[e].values[t]},e.prototype.getMeasureNameByIndex=function(e){return this.dataView.values[e].source.queryName},e.prototype.hasHighlightValues=function(e){var t=this.dataView&&this.dataView.values?this.dataView.values[e]:void 0;return t&&!!t.highlights},e.prototype.getHighlightBySeriesAndCategory=function(e,t){return this.dataView.values[e].highlights[t]},e}()}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.PixelConverter,a=function(){function a(){}return a.prototype.setupVisualProps=function(e){this.graphicsContext=e,this.margin=e.margin,this.width=this.graphicsContext.width,this.height=this.graphicsContext.height,this.categoryLayout=e.layout,this.animator=e.animator,this.interactivityService=e.interactivityService,this.viewportHeight=e.viewportHeight,this.viewportWidth=e.viewportWidth,this.isComboChart=e.isComboChart},a.prototype.setData=function(e){this.data=e},a.prototype.setXScale=function(e,i,a,r,n,o){var s,l,u=this.width;a&&2===a.length&&(s=a[0],l=a[1]);var c=this.xProps=t.ColumnUtil.getCategoryAxis(this.data,u,this.categoryLayout,!1,s,l,r,n,o),h=this.data.series.length,d=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio)/h;return this.seriesOffsetScale=d3.scale.ordinal().domain(this.data.series.map(function(e){return e.index})).rangeBands([0,h*d]),c},a.prototype.setYScale=function(e,i,a,r,n,o){var s=this.viewportHeight,l=t.AxisHelper.createValueDomain(this.data.series,!0)||t.fallBackDomain,u=t.AxisHelper.combineDomain(a,l),c=t.AxisHelper.scaleShouldClamp(u,l);return this.yProps=t.AxisHelper.createAxis({pixelSpan:s,dataDomain:u,metaDataColumn:this.data.valuesMetadata[0],formatString:t.valueFormatter.getFormatString(this.data.valuesMetadata[0],t.columnChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!0,forcedTickCount:i,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:r,axisDisplayUnits:n,axisPrecision:o,shouldClamp:c}),this.yProps},a.prototype.drawColumns=function(e){var i=this.data;this.columnsCenters=null;var r=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio),n=r/i.series.length,o={columnWidth:n,categoryWidth:r,xScale:this.xProps.scale,yScale:this.yProps.scale,seriesOffsetScale:this.seriesOffsetScale,isScalar:this.categoryLayout.isScalar,margin:this.margin},s=this.layout=a.getLayout(i,o),l=i.labelSettings,u=[];l&&l.show&&(u=this.createLabelDataPoints());var c,h,d=t.ColumnUtil.drawSeries(i,this.graphicsContext.mainGraphicsContext,o);return this.animator&&e&&(c=this.animator.animate({viewModel:i,series:d,layout:s,itemCS:a.classes.item,interactivityService:this.interactivityService,mainGraphicsContext:this.graphicsContext.mainGraphicsContext,viewPort:{height:this.height,width:this.width}}),h=c.shapes),this.animator&&e&&!c.failed||(h=t.ColumnUtil.drawDefaultShapes(i,d,s,a.classes.item,!this.animator,this.interactivityService&&this.interactivityService.hasSelection())),t.ColumnUtil.applyInteractivity(h,this.graphicsContext.onDragStart),{shapesSelection:h,viewport:{height:this.height,width:this.width},axisOptions:o,labelDataPoints:u}},a.prototype.selectColumn=function(e,i){t.ColumnUtil.setChosenColumnOpacity(this.graphicsContext.mainGraphicsContext,a.classes.item.selector,e,i),this.moveHandle(e)},a.prototype.getClosestColumnIndex=function(e,i){return t.ColumnUtil.getClosestColumnIndex(e,this.getColumnsCenters())},a.prototype.getColumnsCenters=function(){var e=this;if(!this.columnsCenters){var i=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio);if(this.data.series.length>0){var a=0;this.categoryLayout.isScalar||(a=i/2);var r=this.data.series[0];this.columnsCenters=r.data.map(function(t){return e.xProps.scale(e.categoryLayout.isScalar?t.categoryValue:t.categoryIndex)+a})}}return this.columnsCenters},a.prototype.moveHandle=function(e){var t=this.getColumnsCenters(),i=t[e];if(this.columnSelectionLineHandle){var a=this.columnSelectionLineHandle;a.select("line").attr({x1:i,x2:i}),a.select("circle").attr({cx:i})}else{var a=this.columnSelectionLineHandle=this.graphicsContext.mainGraphicsContext.append("g");a.append("line").classed("interactive-hover-line",!0).attr({x1:i,x2:i,y1:0,y2:this.height}),a.append("circle").attr({cx:i,cy:this.height,r:"6px"}).classed("drag-handle",!0)}},a.getLayout=function(e,i){var a=i.columnWidth,r=.5*a,n=r/2,o=i.isScalar,s=i.xScale,l=i.yScale,u=i.seriesOffsetScale,c=l(0),h=0;return o&&(h=i.categoryWidth/2),{shapeLayout:{width:function(e){return e.drawThinner?r:a},x:function(e){return s(o?e.categoryValue:e.categoryIndex)+u(e.seriesIndex)-h+(e.drawThinner?n:0)},y:function(e){return c+t.AxisHelper.diffScaled(l,Math.max(0,e.value),0)},height:function(e){return Math.abs(t.AxisHelper.diffScaled(l,0,e.value))}},shapeLayoutWithoutHighlights:{width:function(e){return a},x:function(e){return s(o?e.categoryValue:e.categoryIndex)+u(e.seriesIndex)-h},y:function(e){return c+t.AxisHelper.diffScaled(l,Math.max(0,e.originalValue),0)},height:function(e){return Math.abs(t.AxisHelper.diffScaled(l,0,e.originalValue))}},zeroShapeLayout:{width:function(e){return e.drawThinner?r:a},x:function(e){return s(o?e.categoryValue:e.categoryIndex)+u(e.seriesIndex)-h+(e.drawThinner?n:0)},y:function(e){return c},height:function(e){return 0}}}},a.prototype.createLabelDataPoints=function(){for(var a=[],r=this.data,n=r.series,o=t.NewDataLabelUtils.createColumnFormatterCacheManager(),s=this.layout.shapeLayout,l=0;l<n.length;l++){var u=n[l],c=u.labelSettings?u.labelSettings:r.labelSettings;if(c.show)for(var h=t.NewDataLabelUtils.getDisplayUnitValueFromAxisFormatter(this.yProps.formatter,c),d=0,p=u.data;d<p.length;d++){var g=p[d];if((!r.hasHighlights||g.highlight)&&null!=g.value){var m={left:s.x(g),top:s.y(g),width:s.width(g),height:s.height(g)},f=g.labelFormatString,y=o.getOrCreate(f,c,h),v=t.NewDataLabelUtils.getLabelFormattedText(y.format(g.value)),b={text:v,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:i.fromPoint(c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},C=e.TextMeasurementService.measureSvgTextWidth(b),S=e.TextMeasurementService.estimateSvgTextHeight(b,!0);a.push({isPreferred:!0,text:v,textSize:{width:C,height:S},outsideFill:t.ColumnChart.getLabelFill(c.labelColor,!1,this.isComboChart),insideFill:t.ColumnChart.getLabelFill(c.labelColor,!0,this.isComboChart),parentType:1,parentShape:{rect:m,orientation:g.value>=0?1:2,validPositions:t.ColumnChart.clusteredValidLabelPositions},identity:g.identity,fontSize:c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt})}}}return a},a.classes={item:{"class":"column",selector:".column"}},a}();t.ClusteredColumnChartStrategy=a;var r=function(){function a(){}return a.prototype.setupVisualProps=function(e){this.graphicsContext=e,this.margin=e.margin,this.width=this.graphicsContext.width,this.height=this.graphicsContext.height,this.categoryLayout=e.layout,this.animator=e.animator,this.interactivityService=e.interactivityService,this.viewportHeight=e.viewportHeight,this.viewportWidth=e.viewportWidth,this.isComboChart=e.isComboChart},a.prototype.setData=function(e){this.data=e},a.prototype.setYScale=function(e,i,a,r,n,o){var s,l,u=this.height;a&&2===a.length&&(s=a[0],l=a[1]);var c=this.yProps=t.ColumnUtil.getCategoryAxis(this.data,u,this.categoryLayout,!0,s,l,r,n,o),h=this.data.series.length,d=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio)/h;
return this.seriesOffsetScale=d3.scale.ordinal().domain(this.data.series.map(function(e){return e.index})).rangeBands([0,h*d]),c},a.prototype.setXScale=function(e,i,a,r,n,o){var s=this.width,l=t.AxisHelper.createValueDomain(this.data.series,!0)||t.fallBackDomain,u=t.AxisHelper.combineDomain(a,l),c=t.AxisHelper.scaleShouldClamp(u,l);return this.xProps=t.AxisHelper.createAxis({pixelSpan:s,dataDomain:u,metaDataColumn:this.data.valuesMetadata[0],formatString:t.valueFormatter.getFormatString(this.data.valuesMetadata[0],t.columnChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!1,forcedTickCount:i,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:r,axisDisplayUnits:n,axisPrecision:o,shouldClamp:c}),this.xProps.axis.tickSize(-this.viewportHeight,0),this.xProps},a.prototype.drawColumns=function(e){var i=this.data;this.barsCenters=null;var r=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio),n=r/i.series.length,o={columnWidth:n,categoryWidth:r,xScale:this.xProps.scale,yScale:this.yProps.scale,seriesOffsetScale:this.seriesOffsetScale,isScalar:this.categoryLayout.isScalar,margin:this.margin},s=this.layout=a.getLayout(i,o),l=i.labelSettings,u=[];l&&l.show&&(u=this.createLabelDataPoints());var c,h,d=t.ColumnUtil.drawSeries(i,this.graphicsContext.mainGraphicsContext,o);return this.animator&&e&&(c=this.animator.animate({viewModel:i,series:d,layout:s,itemCS:a.classes.item,interactivityService:this.interactivityService,mainGraphicsContext:this.graphicsContext.mainGraphicsContext,viewPort:{height:this.height,width:this.width}}),h=c.shapes),this.animator&&e&&!c.failed||(h=t.ColumnUtil.drawDefaultShapes(i,d,s,a.classes.item,!this.animator,this.interactivityService&&this.interactivityService.hasSelection())),t.ColumnUtil.applyInteractivity(h,this.graphicsContext.onDragStart),{shapesSelection:h,viewport:{height:this.height,width:this.width},axisOptions:o,labelDataPoints:u}},a.prototype.selectColumn=function(e,i){t.ColumnUtil.setChosenColumnOpacity(this.graphicsContext.mainGraphicsContext,a.classes.item.selector,e,i),this.moveHandle(e)},a.prototype.getClosestColumnIndex=function(e,i){return t.ColumnUtil.getClosestColumnIndex(i,this.getBarsCenters())},a.prototype.getBarsCenters=function(){var e=this;if(!this.barsCenters){var i=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio);if(this.data.series.length>0){var a=0;this.categoryLayout.isScalar||(a=i/2);var r=this.data.series[0];this.barsCenters=r.data.map(function(t){return e.yProps.scale(e.categoryLayout.isScalar?t.categoryValue:t.categoryIndex)+a})}}return this.barsCenters},a.prototype.moveHandle=function(e){var t=this.getBarsCenters(),i=t[e];if(this.columnSelectionLineHandle){var a=this.columnSelectionLineHandle;a.select("line").attr({y1:i,y2:i}),a.select("circle").attr({cy:i})}else{var a=this.columnSelectionLineHandle=this.graphicsContext.mainGraphicsContext.append("g");a.append("line").classed("interactive-hover-line",!0).attr({x1:0,x2:this.width,y1:i,y2:i}),a.append("circle").attr({cx:0,cy:i,r:"6px"}).classed("drag-handle",!0)}},a.getLayout=function(e,i){var a=i.columnWidth,r=.5*a,n=r/2,o=i.isScalar,s=i.xScale,l=i.yScale,u=i.seriesOffsetScale,c=s(0),h=0;return o&&(h=i.categoryWidth/2),{shapeLayout:{width:function(e){return Math.abs(t.AxisHelper.diffScaled(s,0,e.value))},x:function(e){return c+t.AxisHelper.diffScaled(s,Math.min(0,e.value),0)},y:function(e){return l(o?e.categoryValue:e.categoryIndex)+u(e.seriesIndex)-h+(e.drawThinner?n:0)},height:function(e){return e.drawThinner?r:a}},shapeLayoutWithoutHighlights:{width:function(e){return Math.abs(t.AxisHelper.diffScaled(s,0,e.originalValue))},x:function(e){return c+t.AxisHelper.diffScaled(s,Math.min(0,e.originalValue),0)},y:function(e){return l(o?e.categoryValue:e.categoryIndex)+u(e.seriesIndex)-h},height:function(e){return a}},zeroShapeLayout:{width:function(e){return 0},x:function(e){return c+t.AxisHelper.diffScaled(s,Math.min(0,e.value),0)},y:function(e){return l(o?e.categoryValue:e.categoryIndex)+u(e.seriesIndex)-h+(e.drawThinner?n:0)},height:function(e){return e.drawThinner?r:a}}}},a.prototype.createLabelDataPoints=function(){for(var a=[],r=this.data,n=r.series,o=t.NewDataLabelUtils.createColumnFormatterCacheManager(),s=this.layout.shapeLayout,l=0;l<n.length;l++){var u=n[l],c=u.labelSettings?u.labelSettings:r.labelSettings;if(c.show)for(var h=t.NewDataLabelUtils.getDisplayUnitValueFromAxisFormatter(this.yProps.formatter,c),d=0,p=u.data;d<p.length;d++){var g=p[d];if(!(this.interactivityService&&this.interactivityService.hasSelection()&&!g.selected||r.hasHighlights&&!g.highlight||null==g.value)){var m=g.labelFormatString,f=o.getOrCreate(m,c,h),y=t.NewDataLabelUtils.getLabelFormattedText(f.format(g.value)),v={text:y,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:i.fromPoint(c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},b=e.TextMeasurementService.measureSvgTextWidth(v),C=e.TextMeasurementService.estimateSvgTextHeight(v,!0),S={left:s.x(g),top:s.y(g),width:s.width(g),height:s.height(g)};a.push({isPreferred:!0,text:y,textSize:{width:b,height:C},outsideFill:t.ColumnChart.getLabelFill(c.labelColor,!1,this.isComboChart),insideFill:t.ColumnChart.getLabelFill(c.labelColor,!0,this.isComboChart),parentType:1,parentShape:{rect:S,orientation:g.value>=0?3:4,validPositions:t.ColumnChart.clusteredValidLabelPositions},identity:g.identity,fontSize:c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt})}}}return a},a.classes={item:{"class":"bar",selector:".bar"}},a}();t.ClusteredBarChartStrategy=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.PixelConverter,a=function(){function a(){}return a.prototype.setupVisualProps=function(e){this.graphicsContext=e,this.margin=e.margin,this.width=this.graphicsContext.width,this.height=this.graphicsContext.height,this.categoryLayout=e.layout,this.animator=e.animator,this.interactivityService=e.interactivityService,this.viewportHeight=e.viewportHeight,this.viewportWidth=e.viewportWidth,this.isComboChart=e.isComboChart},a.prototype.setData=function(e){this.data=e},a.prototype.setXScale=function(e,i,a,r,n,o){var s,l,u=this.width;a&&2===a.length&&(s=a[0],l=a[1]);var c=this.xProps=t.ColumnUtil.getCategoryAxis(this.data,u,this.categoryLayout,!1,s,l,r,n,o);return c},a.prototype.setYScale=function(e,i,a,r,n,o){var s=this.viewportHeight,l=t.StackedUtil.calcValueDomain(this.data.series,e),u=[l.min,l.max],c=t.AxisHelper.combineDomain(a,u),h=t.AxisHelper.scaleShouldClamp(c,u),d=this.data.valuesMetadata[0],p=e?this.graphicsContext.hostService.getLocalizedString("Percentage"):t.valueFormatter.getFormatString(d,t.columnChartProps.general.formatString);return this.yProps=t.AxisHelper.createAxis({pixelSpan:s,dataDomain:c,metaDataColumn:d,formatString:p,outerPadding:0,isScalar:!0,isVertical:!0,forcedTickCount:i,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:r,axisDisplayUnits:n,axisPrecision:o,is100Pct:e,shouldClamp:h}),this.yProps},a.prototype.drawColumns=function(e){var i=this.data;this.columnsCenters=null;var r={columnWidth:this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio),xScale:this.xProps.scale,yScale:this.yProps.scale,isScalar:this.categoryLayout.isScalar,margin:this.margin},n=this.layout=a.getLayout(i,r),o=i.labelSettings,s=[];o&&o.show&&(s=this.createLabelDataPoints());var l,u,c=t.ColumnUtil.drawSeries(i,this.graphicsContext.mainGraphicsContext,r);return this.animator&&e&&(l=this.animator.animate({viewModel:i,series:c,layout:n,itemCS:a.classes.item,interactivityService:this.interactivityService,mainGraphicsContext:this.graphicsContext.mainGraphicsContext,viewPort:{height:this.height,width:this.width}}),u=l.shapes),this.animator&&e&&!l.failed||(u=t.ColumnUtil.drawDefaultShapes(i,c,n,a.classes.item,!this.animator,this.interactivityService&&this.interactivityService.hasSelection())),t.ColumnUtil.applyInteractivity(u,this.graphicsContext.onDragStart),{shapesSelection:u,viewport:{height:this.height,width:this.width},axisOptions:r,labelDataPoints:s}},a.prototype.selectColumn=function(e,i){t.ColumnUtil.setChosenColumnOpacity(this.graphicsContext.mainGraphicsContext,a.classes.item.selector,e,i),this.moveHandle(e)},a.prototype.getClosestColumnIndex=function(e,i){return t.ColumnUtil.getClosestColumnIndex(e,this.getColumnsCenters())},a.prototype.getColumnsCenters=function(){var e=this;if(!this.columnsCenters){var i=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio);if(this.data.series.length>0){var a=0;this.categoryLayout.isScalar||(a=i/2);var r=this.data.series[0];this.columnsCenters=r.data.map(function(t){return e.xProps.scale(e.categoryLayout.isScalar?t.categoryValue:t.categoryIndex)+a})}}return this.columnsCenters},a.prototype.moveHandle=function(e){var t=this.getColumnsCenters(),i=t[e];if(this.columnSelectionLineHandle){var a=this.columnSelectionLineHandle;a.select("line").attr({x1:i,x2:i}),a.select("circle").attr({cx:i})}else{var a=this.columnSelectionLineHandle=this.graphicsContext.mainGraphicsContext.append("g");a.append("line").classed("interactive-hover-line",!0).attr({x1:i,x2:i,y1:0,y2:this.height}),a.append("circle").attr({cx:i,cy:this.height,r:"6px"}).classed("drag-handle",!0)}},a.getLayout=function(e,t){var i=t.columnWidth,a=t.isScalar,r=t.xScale,n=t.yScale,o=0;return a&&(o=i/2),{shapeLayout:{width:function(e){return i},x:function(e){return r(a?e.categoryValue:e.categoryIndex)-o},y:function(e){return n(e.position)},height:function(e){return n(e.position-e.valueAbsolute)-n(e.position)}},shapeLayoutWithoutHighlights:{width:function(e){return i},x:function(e){return r(a?e.categoryValue:e.categoryIndex)-o},y:function(e){return n(e.originalPosition)},height:function(e){return n(e.originalPosition-e.originalValueAbsolute)-n(e.originalPosition)}},zeroShapeLayout:{width:function(e){return i},x:function(e){return r(a?e.categoryValue:e.categoryIndex)-o},y:function(e){return n(e.value>=0?e.position-e.valueAbsolute:e.position)},height:function(e){return 0}}}},a.prototype.createLabelDataPoints=function(){for(var a=[],r=this.data,n=r.series,o=t.NewDataLabelUtils.createColumnFormatterCacheManager(),s=this.layout.shapeLayout,l=0;l<n.length;l++){var u=n[l],c=u.labelSettings?u.labelSettings:r.labelSettings;if(c.show)for(var h=t.NewDataLabelUtils.getDisplayUnitValueFromAxisFormatter(this.yProps.formatter,c),d=0,p=u.data;d<p.length;d++){var g=p[d];if((!r.hasHighlights||g.highlight)&&null!=g.value){var m={left:s.x(g),top:s.y(g),width:s.width(g),height:s.height(g)},f="";f=this.graphicsContext.is100Pct?t.NewDataLabelUtils.hundredPercentFormat:g.labelFormatString;var y=o.getOrCreate(f,c,h),v=t.NewDataLabelUtils.getLabelFormattedText(y.format(g.value)),b={text:v,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:i.fromPoint(c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},C=e.TextMeasurementService.measureSvgTextWidth(b),S=e.TextMeasurementService.estimateSvgTextHeight(b,!0);a.push({isPreferred:!0,text:v,textSize:{width:C,height:S},outsideFill:t.ColumnChart.getLabelFill(c.labelColor,!1,this.isComboChart),insideFill:t.ColumnChart.getLabelFill(c.labelColor,!0,this.isComboChart),parentType:1,parentShape:{rect:m,orientation:g.value>=0?1:2,validPositions:t.ColumnChart.stackedValidLabelPositions},identity:g.identity,fontSize:c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt})}}}return a},a.classes={item:{"class":"column",selector:".column"},highlightItem:{"class":"highlightColumn",selector:".highlightColumn"}},a}();t.StackedColumnChartStrategy=a;var r=function(){function a(){}return a.prototype.setupVisualProps=function(e){this.graphicsContext=e,this.margin=e.margin,this.width=this.graphicsContext.width,this.height=this.graphicsContext.height,this.categoryLayout=e.layout,this.animator=e.animator,this.interactivityService=e.interactivityService,this.viewportHeight=e.viewportHeight,this.viewportWidth=e.viewportWidth,this.isComboChart=e.isComboChart},a.prototype.setData=function(e){this.data=e},a.prototype.setYScale=function(e,i,a,r,n,o){var s,l,u=this.height;a&&2===a.length&&(s=a[0],l=a[1]);var c=this.yProps=t.ColumnUtil.getCategoryAxis(this.data,u,this.categoryLayout,!0,s,l,r,n,o);return c},a.prototype.setXScale=function(e,i,a,r,n,o){var s=this.width,l=t.StackedUtil.calcValueDomain(this.data.series,e),u=[l.min,l.max],c=t.AxisHelper.combineDomain(a,u),h=t.AxisHelper.scaleShouldClamp(c,u),d=this.data.valuesMetadata[0],p=e?this.graphicsContext.hostService.getLocalizedString("Percentage"):t.valueFormatter.getFormatString(d,t.columnChartProps.general.formatString);return this.xProps=t.AxisHelper.createAxis({pixelSpan:s,dataDomain:c,metaDataColumn:d,formatString:p,outerPadding:0,isScalar:!0,isVertical:!1,forcedTickCount:i,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:r,axisDisplayUnits:n,axisPrecision:o,is100Pct:e,shouldClamp:h}),this.xProps.axis.tickSize(-this.viewportHeight,0),this.xProps},a.prototype.drawColumns=function(e){var i=this.data;this.barsCenters=null;var r={columnWidth:this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio),xScale:this.xProps.scale,yScale:this.yProps.scale,isScalar:this.categoryLayout.isScalar,margin:this.margin},n=this.layout=a.getLayout(i,r),o=i.labelSettings,s=[];o&&o.show&&(s=this.createLabelDataPoints());var l,u,c=t.ColumnUtil.drawSeries(i,this.graphicsContext.mainGraphicsContext,r);return this.animator&&e&&(l=this.animator.animate({viewModel:i,series:c,layout:n,itemCS:a.classes.item,interactivityService:this.interactivityService,mainGraphicsContext:this.graphicsContext.mainGraphicsContext,viewPort:{height:this.height,width:this.width}}),u=l.shapes),this.animator&&e&&!l.failed||(u=t.ColumnUtil.drawDefaultShapes(i,c,n,a.classes.item,!this.animator,this.interactivityService&&this.interactivityService.hasSelection())),t.ColumnUtil.applyInteractivity(u,this.graphicsContext.onDragStart),{shapesSelection:u,viewport:{height:this.height,width:this.width},axisOptions:r,labelDataPoints:s}},a.prototype.selectColumn=function(e,i){t.ColumnUtil.setChosenColumnOpacity(this.graphicsContext.mainGraphicsContext,a.classes.item.selector,e,i),this.moveHandle(e)},a.prototype.getClosestColumnIndex=function(e,i){return t.ColumnUtil.getClosestColumnIndex(i,this.getBarsCenters())},a.prototype.getBarsCenters=function(){var e=this;if(!this.barsCenters){var i=this.categoryLayout.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio);if(this.data.series.length>0){var a=0;this.categoryLayout.isScalar||(a=i/2);var r=this.data.series[0];this.barsCenters=r.data.map(function(t){return e.yProps.scale(e.categoryLayout.isScalar?t.categoryValue:t.categoryIndex)+a})}}return this.barsCenters},a.prototype.moveHandle=function(e){var t=this.getBarsCenters(),i=t[e];if(this.columnSelectionLineHandle){var a=this.columnSelectionLineHandle;a.select("line").attr({y1:i,y2:i}),a.select("circle").attr({cy:i})}else{var a=this.columnSelectionLineHandle=this.graphicsContext.mainGraphicsContext.append("g");a.append("line").classed("interactive-hover-line",!0).attr({x1:0,x2:this.width,y1:i,y2:i}),a.append("circle").classed("drag-handle",!0).attr({cx:0,cy:i,r:"6px"})}},a.getLayout=function(e,t){var i=t.columnWidth,a=t.isScalar,r=t.xScale,n=t.yScale,o=0;return a&&(o=i/2),{shapeLayout:{width:function(e){return r(e.position)-r(e.position-e.valueAbsolute)},x:function(e){return r(e.position-e.valueAbsolute)},y:function(e){return n(a?e.categoryValue:e.categoryIndex)-o},height:function(e){return i}},shapeLayoutWithoutHighlights:{width:function(e){return r(e.originalPosition)-r(e.originalPosition-e.originalValueAbsolute)},x:function(e){return r(e.originalPosition-e.originalValueAbsolute)},y:function(e){return n(a?e.categoryValue:e.categoryIndex)-o},height:function(e){return i}},zeroShapeLayout:{width:function(e){return 0},x:function(e){return r(e.value>=0?e.position-e.valueAbsolute:e.position)},y:function(e){return n(a?e.categoryValue:e.categoryIndex)-o},height:function(e){return i}}}},a.prototype.createLabelDataPoints=function(){for(var a=[],r=this.data,n=r.series,o=t.NewDataLabelUtils.createColumnFormatterCacheManager(),s=this.layout.shapeLayout,l=0;l<n.length;l++){var u=n[l],c=u.labelSettings?u.labelSettings:r.labelSettings;if(c.show)for(var h=t.NewDataLabelUtils.getDisplayUnitValueFromAxisFormatter(this.yProps.formatter,c),d=0,p=u.data;d<p.length;d++){var g=p[d];if(!(this.interactivityService&&this.interactivityService.hasSelection()&&!g.selected||r.hasHighlights&&!g.highlight||null==g.value)){var m=void 0;m=this.graphicsContext.is100Pct?t.NewDataLabelUtils.hundredPercentFormat:g.labelFormatString;var f=o.getOrCreate(m,c,h),y=t.NewDataLabelUtils.getLabelFormattedText(f.format(g.value)),v={text:y,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:i.fromPoint(c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},b=e.TextMeasurementService.measureSvgTextWidth(v),C=e.TextMeasurementService.estimateSvgTextHeight(v,!0),S={left:s.x(g),top:s.y(g),width:s.width(g),height:s.height(g)};a.push({isPreferred:!0,text:y,textSize:{width:b,height:C},outsideFill:t.ColumnChart.getLabelFill(c.labelColor,!1,this.isComboChart),insideFill:t.ColumnChart.getLabelFill(c.labelColor,!0,this.isComboChart),parentType:1,parentShape:{rect:S,orientation:g.value>=0?3:4,validPositions:t.ColumnChart.stackedValidLabelPositions},identity:g.identity,fontSize:c.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt})}}}return a},a.classes={item:{"class":"bar",selector:".bar"},highlightItem:{"class":"highlightBar",selector:".highlightBar"}},a}();t.StackedBarChartStrategy=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function i(e){var t=!_.isEmpty(e.dataViewMappings)&&e.dataViewMappings[0];if(t){var i=t.categorical&&t.categorical.values,a=i.group&&!_.isEmpty(i.group.select)&&i.group.select[0];_.isEmpty(a["for"]["in"].items)&&(i.group.by.items=void 0)}}function a(e){return 10===e||13===e||14===e||15===e||16===e}t.capabilities=e.comboChartCapabilities,t.customizeQuery=i,t.isComboChart=a}(t=e.ComboChart||(e.ComboChart={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=jsCommon.ArrayExtensions,i=function(){function e(e){this.sentimentColors=[{value:"#C0433A"},{value:"#E8D62E"},{value:"#79C75B"}],this.basePickerColors=[{value:"#FFFFFF"},{value:"#000000"},{value:"#00B8AA"},{value:"#374649"},{value:"#FD625E"},{value:"#F2C811"},{value:"#5F6B6D"},{value:"#8AD4EB"},{value:"#FE9666"},{value:"#A66999"}],this.colors=e||r.getDefaultTheme(),this.scales={}}return e.prototype.getColorScaleByKey=function(e){var t=this.scales[e];return void 0===t&&(t=this.createScale(),this.scales[e]=t),t},e.prototype.getNewColorScale=function(){return this.createScale()},e.prototype.getColorByIndex=function(e){return this.colors[e]},e.prototype.getSentimentColors=function(){return this.sentimentColors},e.prototype.getBasePickerColors=function(){return this.basePickerColors},e.prototype.getAllColors=function(){return this.colors},e.prototype.createScale=function(){return a.createFromColors(this.colors)},e}();e.DataColorPalette=i;var a=function(){function e(e){this.scale=e}return e.prototype.getColor=function(e){return this.scale(e)},e.prototype.clearAndRotateScale=function(){var e=this.scale.domain().length,i=t.rotate(this.scale.range(),e);this.scale=d3.scale.ordinal().range(i)},e.prototype.clone=function(){return new e(this.scale.copy())},e.prototype.getDomain=function(){return this.scale.domain()},e.createFromColors=function(t){return new e(d3.scale.ordinal().range(t))},e}();e.D3ColorScale=a;var r=function(){function e(){}return e.getDefaultTheme=function(){if(!e.defaultTheme){e.defaultTheme=[];for(var t=e.defaultBaseColors,i=0;i<e.colorSectorCount;++i)for(var a=0,r=t.length;r>a;++a)e.defaultTheme.push({value:jsCommon.Color.rotate(t[a].value,i/e.colorSectorCount)})}return e.defaultTheme},e.colorSectorCount=12,e.defaultBaseColors=[{value:"#01B8AA"},{value:"#374649"},{value:"#FD625E"},{value:"#F2C80F"},{value:"#5F6B6D"},{value:"#8AD4EB"},{value:"#FE9666"},{value:"#A66999"},{value:"#3599B8"},{value:"#DFBFBF"},{value:"#4AC5BB"},{value:"#5F6B6D"},{value:"#FB8281"},{value:"#F4D25A"},{value:"#7F898A"},{value:"#A4DDEE"},{value:"#FDAB89"},{value:"#B687AC"},{value:"#28738A"},{value:"#A78F8F"},{value:"#168980"},{value:"#293537"},{value:"#BB4A4A"},{value:"#B59525"},{value:"#475052"},{value:"#6A9FB0"},{value:"#BD7150"},{value:"#7B4F71"},{value:"#1B4D5C"},{value:"#706060"},{value:"#0F5C55"},{value:"#1C2325"},{value:"#7D3231"},{value:"#796419"},{value:"#303637"},{value:"#476A75"},{value:"#7E4B36"},{value:"#52354C"},{value:"#0D262E"},{value:"#544848"}],e}()}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=function(){function i(e){this.isScrollable=e.isScrollable,this.interactivityService=e.interactivityService}return i.prototype.init=function(e){this.options=e,this.svg=e.svg,this.mainGraphicsG=this.svg.append("g").classed("dataDotChartMainGraphicsContext",!0),this.mainGraphicsContext=this.mainGraphicsG.append("svg"),this.currentViewport=e.viewport,this.hostService=e.host,this.cartesianVisualHost=e.cartesianHost,this.style=e.style,this.colors=this.style.colorPalette.dataColors,this.interactivity=e.interactivity;var t=this.element=e.element;t.addClass(i.ClassName),t.css("overflow","visible")},i.prototype.setData=function(a){if(this.data={series:{data:[]},hasHighlights:!1,hasDynamicSeries:!1},a.length>0){var r=a[0];if(r&&r.categorical){var n=this.dataViewCategorical=r.categorical,o=n.categories,s=e.ValueType.fromDescriptor({text:!0});o&&o.length>0&&o[0].source&&o[0].source.type&&(s=o[0].source.type),this.data=i.converter(r,t.valueFormatter.format(null),this.interactivityService)}}},i.prototype.setFilteredData=function(t,i){var a=this.clippedData=e.Prototype.inherit(this.data);return a&&a.series&&a.series.data&&(a.series={data:a.series.data.slice(t,i),xCol:a.series.xCol,yCol:a.series.yCol}),a},i.prototype.calculateAxesProperties=function(a){var r=this;this.currentViewport=a.viewport,this.margin=a.margin;var n=this.clippedData=this.data,o=this.currentViewport,s=this.margin,l=n?n.series:null,u=l&&l.data&&l.data.length>0?[l]:[],c=l&&l.data?l.data.length:0;n.hasHighlights&&(c/=2);var h,d,p=o.width-(s.left+s.right),g=o.height-(s.top+s.bottom);i.hasDataPoint(l)&&(h=l.xCol,d=l.yCol);var m=t.CartesianChart.getLayout(null,{availableWidth:p,categoryCount:c,domain:null,isScalar:!1,isScrollable:this.isScrollable,trimOrdinalDataOnOverflow:a.trimOrdinalDataOnOverflow}),f=m.categoryThickness*t.CartesianChart.OuterPaddingRatio;this.isScrollable||(this.clippedData=i.createClippedDataIfOverflowed(n,m.categoryCount));var y=t.AxisHelper.createValueDomain(u,!0)||t.fallBackDomain,v=t.AxisHelper.combineDomain(a.forcedYDomain,y);this.yAxisProperties=t.AxisHelper.createAxis({pixelSpan:g,dataDomain:v,metaDataColumn:d,formatString:t.valueFormatter.getFormatString(d,i.formatStringProp),outerPadding:0,isScalar:!0,isVertical:!0,forcedTickCount:a.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!0});var b=this.xAxisProperties?this.xAxisProperties.axisType:e.ValueType.fromDescriptor({text:!0}),C=t.AxisHelper.createDomain(u,b,!1,a.forcedXDomain);return this.xAxisProperties=t.AxisHelper.createAxis({pixelSpan:p,dataDomain:C,metaDataColumn:h,formatString:t.valueFormatter.getFormatString(h,i.formatStringProp),outerPadding:f,isScalar:!1,isVertical:!1,forcedTickCount:a.forcedTickCount,useTickIntervalForDisplayUnits:!0,categoryThickness:m.categoryThickness,getValueFn:function(e,t){return r.lookupXValue(e,t)},isCategoryAxis:!1}),[this.xAxisProperties,this.yAxisProperties]},i.createClippedDataIfOverflowed=function(t,i){var a=t.hasHighlights?Math.min(t.series.data.length,2*i):Math.min(t.series.data.length,i);if(a>=t.series.data.length)return t;var r=e.Prototype.inherit(t);return r.series=e.Prototype.inherit(t.series),r.series.data=r.series.data.slice(0,a),r},i.hasDataPoint=function(e){return e&&e.data&&e.data.length>0},i.prototype.lookupXValue=function(e,i){var a=this.data,r=t.AxisHelper.isDateTime(i);if(r)return new Date(e);if(a&&a.series){var n=a.series.data;if(n){var o=n[e];if(o)return o.categoryValue}}return e},i.prototype.overrideXScale=function(e){this.xAxisProperties=e},i.prototype.render=function(a){var r=this;if(this.clippedData){var n=this.clippedData,o=n.series.data,s=n.hasHighlights,l=this.margin,u=this.currentViewport,c=u.width-(l.left+l.right),h=u.height-(l.top+l.bottom),d=this.xAxisProperties.scale,p=this.yAxisProperties.scale,g=this.xAxisProperties.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio),m=g/2,f=this.cartesianVisualHost.getSharedColors().getNewColorScale().getColor(i.DotColorKey),y=this.interactivityService?this.interactivityService.hasSelection():!1;this.mainGraphicsContext.attr("width",c).attr("height",h);var v=this.mainGraphicsContext.selectAll(i.DotClassSelector).data(o,function(e){return e.identity.getKey()});v.enter().append("circle").classed(i.DotClassName,!0),v.style({fill:f.value}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,y,s)}).classed("null-value",function(e){return null===e.value}).attr({r:function(e){return m},cx:function(e){return d(e.categoryIndex)+m},cy:function(e){return p(e.value)}}),v.exit().remove();var b=this.mainGraphicsContext.selectAll(i.DotLabelClassSelector).data(o,function(e){return e.identity.getKey()});b.enter().append("text").classed(i.DotLabelClassName,!0).attr({"text-anchor":i.DotLabelTextAnchor,dy:i.DotLabelVerticalOffset}),b.classed("null-value",function(e){return null===e.value}).classed("overflowed",!1).attr({x:function(e){return d(e.categoryIndex)+m},y:function(e){return p(e.value)}}).text(function(e){return r.yAxisProperties.formatter.format(e.value)});var C=!1;b.each(function(){if(!C&&!$("<div>").addClass($(this).attr("class")).hasClass("null-value")){var t=e.TextMeasurementService.measureSvgTextElementWidth(this);t>g&&(b.classed("overflowed",!0),C=!0)}}),b.exit().remove();var S=void 0;return this.interactivityService&&(S={dots:v,dotLabels:b,datapoints:o}),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),{dataPoints:o,behaviorOptions:S,labelDataPoints:[],labelsAreNumeric:!0}}},i.prototype.calculateLegend=function(){return this.createLegendDataPoints(0)},i.prototype.hasLegend=function(){return this.data&&this.data.hasDynamicSeries},i.prototype.createLegendDataPoints=function(a){var r=this.data;if(!r)return null;var n,o=r.series,s=o.data,l=[],u=this.xAxisProperties?this.xAxisProperties.axisType:e.ValueType.fromDescriptor({text:!0});if(r.series&&r.series.data){var c=r.series.data[0];n=c&&this.lookupXValue(c.categoryValue,u)}if(o.yCol){var h=i.formatStringProp,d=s[a],p=d&&d.value,g=t.converterHelper.getFormattedLegendLabel(o.yCol,this.dataViewCategorical.values,h),m=this.cartesianVisualHost.getSharedColors().getNewColorScale().getColor(i.DotColorKey),f=this.dataViewCategorical.values,y=f&&f.length>a?t.SelectionId.createWithIdAndMeasure(f[a].identity,f[a].source.queryName):t.SelectionId.createWithMeasure(f.source.queryName);l.push({color:m.value,icon:t.LegendIcon.Line,label:g,category:t.valueFormatter.format(n,t.valueFormatter.getFormatString(o.xCol,h)),measure:t.valueFormatter.format(p,t.valueFormatter.getFormatString(o.yCol,h)),identity:y,selected:!1})}return{dataPoints:l}},i.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},i.converter=function(e,i,a){var r=e.categorical,n=r.categories&&r.categories.length>0?r.categories[0]:{source:void 0,values:[i],identity:void 0},o=t.AxisHelper.getCategoryValueType(n.source),s=t.AxisHelper.isDateTime(o),l=n.values;if(!_.isEmpty(r.values)){for(var u=r.values[0],c=!!u.highlights,h=[],d=0,p=u.values.length;p>d;d++){var g=n.identity?t.SelectionId.createWithIdAndMeasure(n.identity[d],u.source.queryName):t.SelectionId.createWithMeasure(u.source.queryName),m=l[d];if((!s||null==m||m instanceof Date)&&(h.push({categoryValue:s&&m?m.getTime():m,value:u.values[d],categoryIndex:d,seriesIndex:0,selected:!1,identity:g,highlight:!1}),c)){var f=t.SelectionId.createWithHighlight(g),y=u.highlights[d];h.push({categoryValue:s&&m?m.getTime():m,value:y,categoryIndex:d,seriesIndex:0,selected:!1,identity:f,highlight:!0})}}return a&&a.applySelectionStateToData(h),{series:{xCol:n.source,yCol:u.source,data:h},hasHighlights:c,hasDynamicSeries:!0}}return{series:{data:[]},hasHighlights:!1,hasDynamicSeries:!1}},i.formatStringProp={objectName:"general",propertyName:"formatString"},i.ClassName="dataDotChart",i.DotClassName="dot",i.DotClassSelector=".dot",i.DotColorKey="dataDot",i.DotLabelClassName="label",i.DotLabelClassSelector=".label",i.DotLabelVerticalOffset="0.4em",i.DotLabelTextAnchor="middle",i}();t.DataDotChart=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.CssConstants.createClassAndSelector,a=jsCommon.PixelConverter,r=function(){function r(e){this.labelPositionObjects=[t.labelPosition.outsideEnd,t.labelPosition.insideCenter],e&&(this.tooltipsEnabled=e.tooltipsEnabled,e.funnelSmallViewPortProperties&&(this.funnelSmallViewPortProperties=e.funnelSmallViewPortProperties),e.animator&&(this.animator=e.animator),e.behavior&&(this.behavior=e.behavior))}return r.isValidValueColumn=function(e){return t.DataRoleHelper.hasRole(e.source,"Y")},r.getFirstValidValueColumn=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(r.isValidValueColumn(i))return i}},r.converter=function(e,i,a,n){var o=[],s=t.funnelChartProps.general.formatString,l=e.categorical,u=l.categories||[],c=l.values,h=[];c&&(h=_.map(c,function(e){return e.source}));var d,p,g,m,f=c&&c.length>0&&c[0]&&!!c[0].highlights,y=!1,v=!1,b=!1,C=[],S=t.dataLabelUtils.getDefaultFunnelLabelSettings(),x=t.dataLabelUtils.getDefaultLabelSettings(!0),w=new t.ColorHelper(i,t.funnelChartProps.dataPoint.fill,n);if(e&&e.metadata&&e.metadata.objects){var D=e.metadata.objects.labels;D&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(D,S);var P=e.metadata.objects.percentBarLabel;P&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(P,x)}var L=!_.isEmpty(c)&&r.getFirstValidValueColumn(c);if(!L)return{slices:o,categoryLabels:C,valuesMetadata:h,hasHighlights:f,highlightsOverflow:y,canShowDataLabels:!0,dataLabelsSettings:S,hasNegativeValues:v,allValuesAreNegative:b,percentBarLabelSettings:x};if(d=L.values[0],f&&(p=L.highlights[0]),1===u.length)for(var N=u[0],T=N.values,V=t.valueFormatter.getFormatString(N.source,s),M=0,A=T.length;A>M;M++){var R=L.source.queryName,I=t.SelectionIdBuilder.builder().withCategory(N,M).withMeasure(R).createSelectionId(),F=L.values[M],O=t.valueFormatter.format(T[M],V),G=t.TooltipBuilder.createTooltipInfo(s,l,O,F,null,null,0,M);if(f){var z=L.highlights[M];0!==z&&(G=t.TooltipBuilder.createTooltipInfo(s,l,O,F,null,null,0,M,z))}r.addFunnelPercentsToTooltip(G,a,d?F/d:null,g?F/g:null);var H=w.getColorForMeasure(N.objects&&N.objects[M],"");if(o.push({label:O,value:F,originalValue:F,categoryOrMeasureIndex:M,identity:I,selected:!1,key:I.getKey(),tooltipInfo:G,color:H,labelFill:S.labelColor}),f){var k=t.SelectionId.createWithHighlight(I),z=L.highlights[M],E=0!==z?z:void 0,W=t.TooltipBuilder.createTooltipInfo(s,l,O,F,null,null,0,M,E);r.addFunnelPercentsToTooltip(W,a,p?z/p:null,m?z/m:null,!0),o.push({label:O,value:F,originalValue:F,categoryOrMeasureIndex:M,identity:k,selected:!1,key:k.getKey(),highlight:!0,highlightValue:z,originalHighlightValue:z,tooltipInfo:W,color:H}),m=z}g=F}else if(h.length>0&&c&&c.length>0)for(var M=0,B=c.length;B>M;M++){var U=c[M];if(r.isValidValueColumn(U)){var F=U.values[0],I=t.SelectionId.createWithMeasure(U.source.queryName),j=h[M].displayName,K=l.categories?null:M,G=t.TooltipBuilder.createTooltipInfo(s,l,j,F,null,null,K,M),H=w.getColorForMeasure(U.source.objects,"");
if(f){var z=U.highlights[0];0!==z&&(G=t.TooltipBuilder.createTooltipInfo(s,l,j,F,null,null,0,M,z))}if(r.addFunnelPercentsToTooltip(G,a,d?F/d:null,g?F/g:null),o.push({label:h[M].displayName,value:F,originalValue:F,categoryOrMeasureIndex:M,identity:I,selected:!1,key:I.getKey(),tooltipInfo:G,color:H,labelFill:S.labelColor}),f){var k=t.SelectionId.createWithHighlight(I),z=U.highlights[0];z>F&&(y=!0);var E=0!==z?z:void 0,Y=t.TooltipBuilder.createTooltipInfo(s,l,j,F,null,null,0,M,E);r.addFunnelPercentsToTooltip(Y,a,p?z/p:null,m?z/m:null,!0),o.push({label:h[M].displayName,value:F,originalValue:F,categoryOrMeasureIndex:M,identity:k,key:k.getKey(),selected:!1,highlight:!0,originalHighlightValue:z,highlightValue:z,tooltipInfo:Y,color:H}),m=z}g=F}}for(var M=0;M<o.length;M+=f?2:1){var X=o[M];C.push(X.label)}b=o.length>0&&_.every(o,function(e){return(e.highlight?e.highlightValue<=0:!0)&&e.value<0});for(var q=0;q<o.length;q++){var X=o[q];if(b)X.value=Math.abs(X.value),X.highlight&&(X.highlightValue=Math.abs(X.highlightValue));else{var F=X.value,$=0>F;$&&(X.value=0);var Q=!1;if(X.highlight){var Z=X.highlightValue;Q=0>Z,X.highlightValue=Q?0:Z}v||(v=$||Q)}X.highlightValue>X.value&&(y=!0)}return{slices:o,categoryLabels:C,valuesMetadata:h,hasHighlights:f,highlightsOverflow:y,canShowDataLabels:!0,dataLabelsSettings:S,hasNegativeValues:v,allValuesAreNegative:b,percentBarLabelSettings:x}},r.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder;switch(e.objectName){case"dataPoint":var a=this.dataViews&&this.dataViews.length>0&&this.dataViews[0]&&this.dataViews[0].categorical,n=t.GradientUtils.hasGradientRole(a);n||this.enumerateDataPoints(i);break;case"labels":var o=r.getLabelSettingsOptions(i,this.data.dataLabelsSettings,!0,this.labelPositionObjects);t.dataLabelUtils.enumerateDataLabels(o);break;case"percentBarLabel":var s=r.getLabelSettingsOptions(i,this.data.percentBarLabelSettings,!1);t.dataLabelUtils.enumerateDataLabels(s)}return i.complete()},r.getLabelSettingsOptions=function(e,t,i,a){return{enumeration:e,dataLabelsSettings:t,show:!0,displayUnits:i,precision:i,position:i,positionObject:a,fontSize:!0}},r.prototype.enumerateDataPoints=function(e){var i=this.data;if(i){var a=i.slices;e.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:this.defaultDataPointColor||this.colors.getColorByIndex(0).value}}}});for(var r=0;r<a.length;r++){var n=a[r];if(!n.highlight){var o=n.color,s=n.identity.getSelector(),l=!!s.data;e.pushInstance({objectName:"dataPoint",displayName:n.label,selector:t.ColorHelper.normalizeSelector(s,l),properties:{fill:{solid:{color:o}}}})}}}},r.prototype.init=function(e){this.options=e;var i=e.element,a=this.svg=d3.select(i.get(0)).append("svg").classed(r.VisualClassName,!0);this.behavior&&(this.clearCatcher=t.appendClearCatcher(this.svg)),this.currentViewport=e.viewport,this.margin={left:5,right:5,top:0,bottom:0};var n=e.style;this.colors=n.colorPalette.dataColors,this.hostServices=e.host,this.behavior&&(this.interactivityService=t.createInteractivityService(this.hostServices)),this.percentGraphicsContext=a.append("g").classed(r.Selectors.percentBar.root["class"],!0),this.funnelGraphicsContext=a.append("g"),this.axisGraphicsContext=a.append("g"),this.updateViewportProperties()},r.prototype.updateViewportProperties=function(){var e=this.currentViewport;this.svg.attr("width",e.width).attr("height",e.height)},r.prototype.update=function(i){this.data={slices:[],categoryLabels:[],valuesMetadata:[],hasHighlights:!1,highlightsOverflow:!1,canShowDataLabels:!0,dataLabelsSettings:t.dataLabelUtils.getDefaultFunnelLabelSettings(),hasNegativeValues:!1,allValuesAreNegative:!1,percentBarLabelSettings:t.dataLabelUtils.getDefaultLabelSettings(!0)};var a=this.dataViews=i.dataViews;if(this.currentViewport=i.viewport,a&&a.length>0){var n=a[0];if(n.metadata&&n.metadata.objects){var o=e.DataViewObjects.getFillColor(n.metadata.objects,t.funnelChartProps.dataPoint.defaultColor);o&&(this.defaultDataPointColor=o)}n.categorical&&(this.data=r.converter(n,this.colors,this.hostServices,this.defaultDataPointColor),this.interactivityService&&this.interactivityService.applySelectionStateToData(this.data.slices));var s=t.getInvalidValueWarnings(a,!1,!1,!1);this.data.allValuesAreNegative?s.unshift(new t.AllNegativeValuesWarning):this.data.hasNegativeValues&&s.unshift(new t.NegativeValuesNotSupportedWarning),this.hostServices.setWarnings(s)}this.updateViewportProperties(),this.updateInternal(i.suppressAnimations)},r.prototype.onDataChanged=function(e){this.update({dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewport:this.currentViewport})},r.prototype.onResizing=function(e){this.currentViewport=e,this.update({dataViews:this.dataViews,suppressAnimations:!0,viewport:this.currentViewport})},r.prototype.getMaxLeftMargin=function(t,i){for(var a=0,n=e.TextMeasurementService.measureSvgTextWidth,o=0,s=t.length;s>o;o++)i.text=t[o],a=Math.max(a,n(i));return a+r.LabelFunnelPadding},r.prototype.updateInternal=function(e){if(null!=this.data){var i=this.data,a=i.slices,n=a.filter(function(e){return!e.highlight}),o=this.isHidingPercentBars(),s=this.setUpAxis(),l=s.margin,u=s.verticalRange,c=this.funnelGraphicsContext.attr("transform",t.SVGUtil.translateAndRotate(l.left,l.top,u/2,u/2,90));this.percentGraphicsContext.attr("transform",t.SVGUtil.translate(l.left,l.top)),this.svg.style("font-family",t.dataLabelUtils.StandardFontFamily);var h,d,p,g=r.getLayout(i,s),m=t.dataLabelUtils.getFunnelChartLabelLayout(i,s,r.InnerTextMinimumPadding,i.dataLabelsSettings,this.currentViewport);if(this.animator&&!e){var f={viewModel:i,interactivityService:this.interactivityService,layout:g,axisGraphicsContext:this.axisGraphicsContext,shapeGraphicsContext:c,percentGraphicsContext:this.percentGraphicsContext,labelGraphicsContext:this.svg,axisOptions:s,slicesWithoutHighlights:n,labelLayout:m,isHidingPercentBars:o,visualInitOptions:this.options};h=this.animator.animate(f),d=h.shapes,p=h.dataLabels}if((!this.animator||e||h.failed)&&(r.drawDefaultAxis(this.axisGraphicsContext,s,o),d=r.drawDefaultShapes(i,a,c,g,this.interactivityService&&this.interactivityService.hasSelection()),r.drawPercentBars(i,this.percentGraphicsContext,g,o),i.dataLabelsSettings.show&&i.canShowDataLabels?p=t.dataLabelUtils.drawDefaultLabelsForFunnelChart(i.slices,this.svg,m):t.dataLabelUtils.cleanDataLabels(this.svg)),this.interactivityService){var y=r.drawInteractorShapes(a,c,g),v={bars:d,interactors:y,clearCatcher:this.clearCatcher,hasHighlights:i.hasHighlights};this.interactivityService.bind(a,this.behavior,v),this.tooltipsEnabled&&t.TooltipManager.addTooltip(y,function(e){return e.data.tooltipInfo})}this.tooltipsEnabled&&t.TooltipManager.addTooltip(d,function(e){return e.data.tooltipInfo}),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)}},r.prototype.getUsableVerticalSpace=function(){var e=this.data.categoryLabels,t=this.margin,i=this.currentViewport.height-(t.top+t.bottom);return i-r.MinBarThickness*e.length},r.prototype.isHidingPercentBars=function(){var e=this.data;if(e.percentBarLabelSettings.show){var t=this.getPercentBarTextHeight(),i=this.getUsableVerticalSpace()-2*r.MinBarThickness*r.PercentBarToBarRatio-2*t;return 0>=i}return!0},r.prototype.isSparklines=function(){return this.getUsableVerticalSpace()<=0},r.prototype.setUpAxis=function(){var e=this.data,t=e.slices,i=e.categoryLabels,a=this.currentViewport,n=this.margin,o=this.isSparklines(),s=this.isHidingPercentBars(),l=s?0:this.getPercentBarTextHeight(),u=a.height-(n.top+n.bottom)-2*l;if(i.length>0&&o)i=[],e.canShowDataLabels=!1;else if(this.showCategoryLabels()){var c=r.getTextProperties();n.left=this.getMaxLeftMargin(i,c)}else i=[];var h,d=a.width-(n.left+n.right),p=r.BarToSpaceRatio,g=d3.max(t.map(function(e){return e.value})),m=0,f=0,y=u;h=s?u-i.length*r.MaxBarWidth:u-i.length*r.MaxBarWidth-2*r.MaxBarWidth*r.PercentBarToBarRatio,i.length>0&&h>0&&(f=Math.ceil(h/2),y=Math.ceil(u-h/2)),s||(f+=l,y+=l);var v=d3.scale.linear().domain([m,g]).range([d,0]),b=d3.scale.ordinal().domain(d3.range(0,e.categoryLabels.length)).rangeBands([f,y],p,s?p:r.PercentBarToBarRatio);return{margin:n,xScale:b,yScale:v,maxScore:g,verticalRange:d,rangeStart:f,rangeEnd:y,barToSpaceRatio:p,categoryLabels:i}},r.prototype.getPercentBarTextHeight=function(){var t=r.getTextProperties(this.data.percentBarLabelSettings.fontSize);return e.TextMeasurementService.estimateSvgTextHeight(t)},r.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},r.getLayout=function(i,n){var o=i.highlightsOverflow,s=n.yScale,l=n.xScale,u=n.maxScore,c=l.rangeBand(),h=Math.ceil(c/2),d=h,p=c*r.OverflowingHighlightWidthRatio,g=p/2,m=n.categoryLabels.length-1,f=Math.abs(s(u)-s(0)),y=function(e){return(f-Math.abs(s(e)-s(0)))/2},v=function(e){return Math.max(r.MinimumInteractorSize,Math.abs(s(e)-s(0)))},b=a.fromPoint(i.percentBarLabelSettings.fontSize),C=r.getTextProperties(i.percentBarLabelSettings.fontSize),S=e.TextMeasurementService.estimateSvgTextBaselineDelta(C),x=e.TextMeasurementService.estimateSvgTextHeight(C)-S;return{percentBarLayout:{mainLine:{x2:function(e){return Math.abs(s(e.value)-s(0))},transform:function(e){var i=s(e.value)-y(e.value),a=e.isTop?l(0)-h:l(m)+c+h;return t.SVGUtil.translate(i,a)}},leftTick:{y2:function(e){return d},transform:function(e){var i=s(e.value)-y(e.value),a=e.isTop?l(0)-h-d/2:l(m)+c+h-d/2;return t.SVGUtil.translate(i,a)}},rightTick:{y2:function(e){return d},transform:function(e){var i=s(e.value)-y(e.value),a=Math.abs(s(e.value)-s(0)),r=i+a,n=e.isTop?l(0)-h-d/2:l(m)+c+h-d/2;return t.SVGUtil.translate(r,n)}},text:{x:function(e){return Math.ceil(Math.abs(s(u)-s(0))/2)},y:function(e){return e.isTop?-d/2-S:x+d/2},style:function(){return"font-size: "+b+";"},transform:function(e){var i=e.isTop?l(0)-h:l(m)+c+h;return t.SVGUtil.translate(0,i)},fill:i.percentBarLabelSettings.labelColor,maxWidth:f}},shapeLayout:{width:function(e){return e.highlight&&o?p:c},height:function(e){return Math.abs(s(r.getFunnelSliceValue(e))-s(0))},x:function(e){return l(e.categoryOrMeasureIndex)+(e.highlight&&o?g:0)},y:function(e){var t=r.getFunnelSliceValue(e);return s(t)-y(t)}},shapeLayoutWithoutHighlights:{width:function(e){return c},height:function(e){return Math.abs(s(e.value)-s(0))},x:function(e){return l(e.categoryOrMeasureIndex)+0},y:function(e){return s(e.value)-y(e.value)}},zeroShapeLayout:{width:function(e){return e.highlight&&o?p:c},height:function(e){return 0},x:function(e){return l(e.categoryOrMeasureIndex)+(e.highlight&&o?g:0)},y:function(e){return s((s.domain()[0]+s.domain()[1])/2)}},interactorLayout:{width:function(e){return e.highlight&&o?p:c},height:function(e){return v(r.getFunnelSliceValue(e))},x:function(e){return l(e.categoryOrMeasureIndex)+(e.highlight&&o?g:0)},y:function(e){var t=v(r.getFunnelSliceValue(e));return(f-t)/2}}}},r.drawDefaultAxis=function(e,i,a){var n=d3.range(0,i.categoryLabels.length),o=d3.scale.ordinal().domain(n).rangeBands([i.rangeStart,i.rangeEnd],i.barToSpaceRatio,a?i.barToSpaceRatio:r.PercentBarToBarRatio),s=d3.svg.axis().scale(o).orient("right").tickPadding(r.TickPadding).innerTickSize(r.InnerTickSize).ticks(n.length).tickValues(n).tickFormat(function(e){return i.categoryLabels[e]});e.attr("class","axis hideLinesOnAxis").attr("transform",t.SVGUtil.translate(0,i.margin.top)).call(s),e.selectAll(".tick").call(t.tooltipUtils.tooltipUpdate,i.categoryLabels)},r.drawDefaultShapes=function(e,i,a,n,o){var s=e.hasHighlights,l=a.selectAll(r.Selectors.funnel.bars.selector).data(i,function(e){return e.key});return l.enter().append("rect").attr("class",function(e){return e.highlight?r.FunnelBarHighlightClass:r.Selectors.funnel.bars["class"]}),l.style("fill",function(e){return e.color}).style("fill-opacity",function(e){return function(e){return t.ColumnUtil.getFillOpacity(e.selected,e.highlight,o,s)}}).attr(n.shapeLayout),l.exit().remove(),l},r.getFunnelSliceValue=function(e,t){return void 0===t&&(t=!1),t?e.highlight?e.originalHighlightValue:e.originalValue:e.highlight?e.highlightValue:e.value},r.drawInteractorShapes=function(e,t,i){var a=e.filter(function(e){return!e.highlight&&i.interactorLayout.height(e)===r.MinimumInteractorSize}),n=t.selectAll(r.Selectors.funnel.interactors.selector).data(a,function(e){return e.key});return n.enter().append("rect").attr("class",r.Selectors.funnel.interactors["class"]),n.style("fill-opacity",0).attr(i.interactorLayout),n.exit().remove(),n},r.drawPercentBarComponents=function(i,a,n,o){var s=i.selectAll(r.Selectors.percentBar.mainLine.selector).data(a);s.exit().remove(),s.enter().append("line").classed(r.Selectors.percentBar.mainLine["class"],!0),s.attr(n.percentBarLayout.mainLine);var l=i.selectAll(r.Selectors.percentBar.leftTick.selector).data(a);l.exit().remove(),l.enter().append("line").classed(r.Selectors.percentBar.leftTick["class"],!0),l.attr(n.percentBarLayout.leftTick);var u=i.selectAll(r.Selectors.percentBar.rightTick.selector).data(a);u.exit().remove(),u.enter().append("line").classed(r.Selectors.percentBar.rightTick["class"],!0),u.attr(n.percentBarLayout.rightTick);var c=i.selectAll(r.Selectors.percentBar.text.selector).data(a),h=t.valueFormatter.getLocalizedString("Percentage1");c.exit().remove(),c.enter().append("text").classed(r.Selectors.percentBar.text["class"],!0),c.attr(n.percentBarLayout.text).text(function(e){return t.dataLabelUtils.getLabelFormattedText({label:e.percent,format:h,fontSize:o.fontSize,maxWidth:n.percentBarLayout.text.maxWidth})}).append("title").text(function(t){return e.formattingService.formatValue(t.percent,h)})},r.drawPercentBars=function(e,t,i,a){if(a||!e.slices||(e.hasHighlights?e.slices.length/2:e.slices.length)<2)return void r.drawPercentBarComponents(t,[],i,e.percentBarLabelSettings);var n=[e.slices[e.hasHighlights?1:0],e.slices[e.slices.length-1]],o=r.getFunnelSliceValue(n[0]);if(0>=o)return void r.drawPercentBarComponents(t,[],i,e.percentBarLabelSettings);var s=[{value:r.getFunnelSliceValue(n[0]),percent:1,isTop:!0},{value:r.getFunnelSliceValue(n[1]),percent:r.getFunnelSliceValue(n[1])/o,isTop:!1}];r.drawPercentBarComponents(t,s,i,e.percentBarLabelSettings)},r.prototype.showCategoryLabels=function(){return this.funnelSmallViewPortProperties&&this.funnelSmallViewPortProperties.hideFunnelCategoryLabelsOnSmallViewPort&&this.currentViewport.height<this.funnelSmallViewPortProperties.minHeightFunnelCategoryLabelsVisible?!1:!0},r.addFunnelPercentsToTooltip=function(e,i,a,r,n){null!=a&&e.push({displayName:i.getLocalizedString("Funnel_PercentOfFirst"+(n?"_Highlight":"")),value:t.valueFormatter.format(a,"0.00 %;-0.00 %;0.00 %")}),null!=r&&e.push({displayName:i.getLocalizedString("Funnel_PercentOfPrevious"+(n?"_Highlight":"")),value:t.valueFormatter.format(r,"0.00 %;-0.00 %;0.00 %")})},r.getTextProperties=function(e){return{fontSize:a.fromPoint(e||t.dataLabelUtils.DefaultFontSizeInPt),fontFamily:r.DefaultFontFamily}},r.DefaultBarOpacity=1,r.DimmedBarOpacity=.4,r.PercentBarToBarRatio=.75,r.TickPadding=0,r.InnerTickSize=0,r.MinimumInteractorSize=15,r.InnerTextClassName="labelSeries",r.Selectors={funnel:{bars:i("funnelBar"),highlights:i("highlight"),interactors:i("funnelBarInteractor")},percentBar:{root:i("percentBars"),mainLine:i("mainLine"),leftTick:i("leftTick"),rightTick:i("rightTick"),text:i("value")}},r.FunnelBarHighlightClass=[r.Selectors.funnel.bars["class"],r.Selectors.funnel.highlights["class"]].join(" "),r.VisualClassName="funnelChart",r.DefaultFontFamily="wf_standard-font",r.BarToSpaceRatio=.1,r.MaxBarWidth=40,r.MinBarThickness=12,r.LabelFunnelPadding=6,r.InnerTextMinimumPadding=10,r.OverflowingHighlightWidthRatio=.5,r}();t.FunnelChart=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.CssConstants.createClassAndSelector,a=jsCommon.PixelConverter,r=function(){function r(e){this.lastAngle=-Math.PI/2,e&&(e.gaugeSmallViewPortProperties&&(this.gaugeSmallViewPortProperties=e.gaugeSmallViewPortProperties),this.animator=e.animator,this.tooltipsEnabled=e.tooltipsEnabled)}return r.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder;switch(e.objectName){case"axis":this.enumerateAxis(i);break;case"labels":var a=this.data?this.data.dataLabelsSettings:t.dataLabelUtils.getDefaultGaugeLabelSettings();t.dataLabelUtils.enumerateDataLabels(this.getDataLabelSettingsOptions(i,a));break;case"calloutValue":var a=this.data?this.data.calloutValueLabelsSettings:t.dataLabelUtils.getDefaultGaugeLabelSettings();t.dataLabelUtils.enumerateDataLabels(this.getDataLabelSettingsOptions(i,a))}return i.complete()},r.prototype.getDataLabelSettingsOptions=function(e,t){return{dataLabelsSettings:t,show:!0,precision:!0,displayUnits:!0,fontSize:!0,enumeration:e}},r.prototype.enumerateAxis=function(e){var t=this.dataViews[0];if(t&&t.metadata){var i=r.getGaugeObjectsProperties(t);e.pushInstance({selector:null,objectName:"axis",properties:i})}},r.getGaugeObjectsProperties=function(e){var i={},a=e.metadata.objects,r=!!a&&!!a.axis;return t.DataRoleHelper.hasRoleInDataView(e,t.gaugeRoleNames.minValue)||(i.min=r?a.axis.min:void 0),t.DataRoleHelper.hasRoleInDataView(e,t.gaugeRoleNames.maxValue)||(i.max=r?a.axis.max:void 0),t.DataRoleHelper.hasRoleInDataView(e,t.gaugeRoleNames.targetValue)||(i.target=r?a.axis.target:void 0),i},r.prototype.init=function(e){this.element=e.element,this.currentViewport=e.viewport,this.style=e.style,this.options=e,this.settings=r.DefaultStyleProperties,this.targetSettings=r.DefaultTargetSettings,this.setMargins(),this.color=d3.scale.ordinal().range(this.style.colorPalette.dataColors.getSentimentColors().map(function(e){return e.value})),this.hostService=e.host;var i=this.svg=d3.select(this.element.get(0)).append("svg");i.classed(r.VisualClassName,!0);var a=this.mainGraphicsContext=i.append("g");a.attr("class",r.MainGaugeGroupClassName),this.initKpiBands();var n=this.backgroundArc=d3.svg.arc().innerRadius(0).outerRadius(0).startAngle(-Math.PI/2).endAngle(Math.PI/2),o=this.foregroundArc=d3.svg.arc().innerRadius(0).outerRadius(0).startAngle(-Math.PI/2);this.backgroundArcPath=a.append("path").classed("backgroundArc",!0).attr("d",n),this.foregroundArcPath=a.append("path").datum({endAngle:-Math.PI/2}).classed("foregroundArc",!0).attr("d",o);var s=this.animatedNumberGrapicsContext=i.append("g");this.animatedNumber=new t.AnimatedNumber(s),this.animatedNumber.init(e);var l=this.gaugeVisualProperties=this.getGaugeVisualProperties(),u=this.getAnimatedNumberProperties(l.radius,l.innerRadiusFactor,l.top,l.left);this.animatedNumberGrapicsContext.attr("transform",u.transformString),this.animatedNumber.onResizing(u.viewport)},r.prototype.update=function(e){this.currentViewport=e.viewport;var i=this.dataViews=e.dataViews;if(i&&i[0]){this.data=r.converter(i[0]),this.targetSettings=this.data.targetSettings,i[0]&&(i[0].single={value:this.data.total}),this.showTargetLabel=null!=this.targetSettings.target&&(this.currentViewport.width>r.MinWidthForTargetLabel||!this.showMinMaxLabelsOnBottom())&&this.showSideNumbersLabelText()&&this.data.dataLabelsSettings.show,this.setMargins(),this.gaugeVisualProperties=this.getGaugeVisualProperties(),this.drawViewPort(this.gaugeVisualProperties),this.updateInternal(e.suppressAnimations),this.updateCalloutValue(e.suppressAnimations);var a=t.getInvalidValueWarnings(i,!1,!1,!1);this.hostService.setWarnings(a)}},r.prototype.updateCalloutValue=function(e){if(this.data.calloutValueLabelsSettings.show){var t=this.getAnimatedNumberProperties(this.gaugeVisualProperties.radius,this.gaugeVisualProperties.innerRadiusFactor,this.gaugeVisualProperties.top,this.gaugeVisualProperties.left);this.animatedNumberGrapicsContext.attr("transform",t.transformString),this.animatedNumber.setTextColor(this.data.calloutValueLabelsSettings.labelColor);var i=this.data?this.data.total:null,a=this.getFormatter(this.data.calloutValueLabelsSettings,i);this.animatedNumber.setFormatter(a),this.animatedNumber.update({viewport:t.viewport,dataViews:this.dataViews,suppressAnimations:e}),this.animatedNumberGrapicsContext.selectAll("title").remove(),this.animatedNumberGrapicsContext.append("title").text([a.format(i)])}else this.animatedNumber.clear(),this.animatedNumberGrapicsContext.selectAll("title").remove()},r.prototype.onDataChanged=function(e){this.update({dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewport:this.currentViewport})},r.prototype.onResizing=function(e){this.update({dataViews:this.dataViews,suppressAnimations:!0,viewMode:0,viewport:e})},r.prototype.onStyleChanged=function(e){this.style=e,this.color=d3.scale.ordinal().range(e.colorPalette.dataColors.getSentimentColors().map(function(e){return e.value})),this.updateInternal(!0)},r.getValidSettings=function(e){var t=e.max===r.MAX_VALUE?r.DEFAULT_MAX:e.max,i=e.min===r.MIN_VALUE?r.DEFAULT_MIN:e.min,a=e.target;return{min:i,max:t,target:a}},r.getGaugeData=function(e){var i={max:r.MAX_VALUE,min:r.MIN_VALUE,target:void 0,total:0,tooltipItems:[]};if(e&&e.categorical&&e.categorical.values&&e.metadata&&e.metadata.columns){for(var a=e.categorical.values,n=e.metadata.columns,o=0;o<a.length;o++){var s=n[o],l=a[o].values[0]||0;s&&s.roles&&(s.roles[t.gaugeRoleNames.y]?(i.total=l,l&&i.tooltipItems.push({value:l,metadata:a[o]})):s.roles[t.gaugeRoleNames.minValue]?i.min=l:s.roles[t.gaugeRoleNames.maxValue]?i.max=l:s.roles[t.gaugeRoleNames.targetValue]&&(i.target=l,l&&i.tooltipItems.push({value:l,metadata:a[o]})))}var u=r.getGaugeObjectsProperties(e);u&&!$.isEmptyObject(u)&&r.overrideGaugeSettings(i,u)}return i},r.overrideGaugeSettings=function(e,t){$.isNumeric(t.min)&&(e.min=t.min),$.isNumeric(t.max)&&(e.max=t.max),$.isNumeric(t.target)&&(e.target=t.target)},r.converter=function(e){var i=r.getGaugeData(e),a=i.total,n=null,o=!1;e.metadata&&!_.isEmpty(e.metadata.columns)&&(n=t.valueFormatter.getFormatString(e.metadata.columns[0],r.formatStringProp,!0),null!=n&&(o=t.valueFormatter.getFormatMetadata(n).hasPercent)),a>0&&i.max===r.MAX_VALUE&&(i.max=o?r.DEFAULT_MAX:2*a);var s=r.getValidSettings(i),l=Math.max(a,s.min);l=Math.min(l,s.max);var u,c=s.min!==s.max?(l-s.min)/(s.max-s.min):0;if(e)if(i.tooltipItems.length>0)u=t.TooltipBuilder.createTooltipInfo(r.formatStringProp,null,null,null,null,i.tooltipItems);else{var h=e.categorical;if(h&&h.values&&h.values.length>0){var d=h.values[0],p=d.values[0];u=t.TooltipBuilder.createTooltipInfo(r.formatStringProp,h,null,p)}}return{percent:c,adjustedTotal:l,total:a,metadataColumn:r.getMetaDataColumn(e),targetSettings:s,tooltipInfo:u,dataLabelsSettings:r.convertDataLableSettings(e,"labels"),calloutValueLabelsSettings:r.convertDataLableSettings(e,"calloutValue")}},r.convertDataLableSettings=function(e,i){var a=e.metadata,r=t.dataLabelUtils.getDefaultGaugeLabelSettings();if(a){var n=a.objects;if(n){var o=n[i];t.dataLabelUtils.updateLabelSettingsFromLabelsObject(o,r)}}return r},r.getMetaDataColumn=function(e){if(e&&e.metadata&&e.metadata.columns)for(var t=0,i=e.metadata.columns.length;i>t;t++){var a=e.metadata.columns[t];if(a.isMeasure)return a}return null},r.prototype.initKpiBands=function(){if(this.settings.kpiBands.show)for(var e=this.kpiArcs=[],t=this.kpiArcPaths=[],i=this.mainGraphicsContext,a=0;3>a;a++){var r=d3.svg.arc().innerRadius(0).outerRadius(0).startAngle(0).endAngle(0);e.push(r);var n=i.append("path").attr("d",r);t.push(n)}},r.prototype.updateKpiBands=function(e,t,i,a){if(this.settings.kpiBands.show)for(var n=0;n<a.length;n++)this.kpiArcs[n].innerRadius(e*t-(r.KpiBandDistanceFromMainArc+this.settings.kpiBands.thickness)).outerRadius(e*t-r.KpiBandDistanceFromMainArc).startAngle(a[n].start).endAngle(a[n].end),this.kpiArcPaths[n].attr("fill",a[n].fill).attr("d",this.kpiArcs[n]).attr("transform",i)},r.prototype.removeTargetElements=function(){this.targetLine&&(this.targetLine.remove(),this.targetText.remove(),this.targetConnector.remove(),this.targetLine=this.targetConnector=this.targetText=null)},r.prototype.getTargetRatio=function(){var e=this.targetSettings,t=e.max-e.min;return 0!==t?(e.target-e.min)/t:0},r.prototype.updateTargetLine=function(e,t,i,a){this.targetLine||(this.targetLine=this.mainGraphicsContext.append("line"));var r=this.getTargetRatio()*Math.PI,n=a-e*Math.sin(r),o=i-e*Math.cos(r),s=a-t*Math.sin(r),l=i-t*Math.cos(r);this.targetLine.attr({x1:l,y1:s,x2:o,y2:n})},r.prototype.getAnimatedNumberProperties=function(e,i,a,n){var o=Math.PI/4,s=1,l=e*i,u=l-(this.settings.kpiBands.show?r.KpiBandDistanceFromMainArc+this.settings.kpiBands.thickness:0),c=u*Math.cos(o),h=u*Math.sin(o),d=a-h,p=n-c;d*=s,p*=s;var g=2*c,m={transformString:t.SVGUtil.translate(p,d),viewport:{height:h,width:g}};return m},r.prototype.getGaugeVisualProperties=function(){var e=this.currentViewport,i=this.margin,a=e.width-i.right-i.left,n=a/2,o=e.height-i.top-i.bottom,s=Math.min(n,o),l=r.InnerRadiusFactor,u=i.left+n,c=s+(o-s)/2+i.top,h=t.SVGUtil.translate(u,c),d=s*l,p={radius:s,innerRadiusOfArc:d,left:u,top:c,height:o,width:a,margin:i,transformString:h,innerRadiusFactor:l};return p},r.prototype.drawViewPort=function(e){var t=this.settings.kpiBands.separationRadians,i=r.InnerRadiusFactor,a=this.backgroundArc,n=this.color,o=[{fill:n(0),start:-Math.PI/2,end:-Math.PI/2+Math.PI/4-t},{fill:n(1),start:-Math.PI/2+1*Math.PI/4+t,end:-Math.PI/2+3*Math.PI/4-t},{fill:n(2),start:-Math.PI/2+3*Math.PI/4+t,end:Math.PI/2}],s=e.radius,l=e.transformString;this.updateKpiBands(s,i,l,o),a.innerRadius(s*i).outerRadius(s).startAngle(-Math.PI/2).endAngle(Math.PI/2),this.backgroundArcPath.attr("d",a).attr("transform",l);var u=this.foregroundArc;u.innerRadius(s*i).outerRadius(s).startAngle(-Math.PI/2),this.foregroundArcPath.datum({endAngle:this.lastAngle}).attr("transform",l).attr("d",u);var c=e.innerRadiusOfArc,h=e.left,d=e.top,p=e.margin,g=e.height,m=this.targetSettings;this.settings.targetLine.show&&null!=m.target?m.min>m.target||m.max<m.target?this.removeTargetElements():(this.updateTargetLine(s,c,h,d),this.appendTargetTextAlongArc(s,g,e.width,p)):this.removeTargetElements(),this.svg.attr("height",this.currentViewport.height).attr("width",this.currentViewport.width)},r.prototype.createTicks=function(){for(var e=this.settings,t=this.targetSettings,i=t.max-t.min,a=e.labels.count,r=i/a,n=[],o=this.getFormatter(this.data.dataLabelsSettings,t.max),s=0;a+1>s;s++)n.push(o.format(t.min+s*r));return n},r.prototype.updateInternal=function(e){var i=this.gaugeVisualProperties.height,a=this.gaugeVisualProperties.width,r=this.gaugeVisualProperties.radius,n=this.margin,o=t.AnimatorCommon.GetAnimationDuration(this.animator,e),s=this.data,l=this.lastAngle=-Math.PI/2+Math.PI*s.percent,u=this.createTicks();this.foregroundArcPath.transition().ease(this.settings.transition.ease).duration(o).call(this.arcTween,[l,this.foregroundArc]),this.appendTextAlongArc(u,r,i,a,n),this.updateVisualConfigurations(),this.updateVisualStyles(),this.tooltipsEnabled&&(t.TooltipManager.addTooltip(this.foregroundArcPath,function(e){return s.tooltipInfo}),t.TooltipManager.addTooltip(this.backgroundArcPath,function(e){return s.tooltipInfo}))},r.prototype.updateVisualStyles=function(){var e=this.data.dataLabelsSettings.labelColor||this.style.labelText.color.value;this.mainGraphicsContext.selectAll("text").style({fill:e})},r.prototype.updateVisualConfigurations=function(){var e=this.settings;this.mainGraphicsContext.select("line").attr({stroke:e.targetLine.color,"stroke-width":e.targetLine.thickness}),this.backgroundArcPath.style("fill",e.arcColors.background),this.foregroundArcPath.style("fill",e.arcColors.foreground)},r.prototype.appendTextAlongArc=function(e,i,n,o,s){if(this.svg.selectAll(r.LabelText.selector).remove(),this.data.dataLabelsSettings.show)for(var l=e.length,u=l-1,c=i+(n-i)/2+s.top,h=this.showMinMaxLabelsOnBottom(),d=a.fromPoint(this.data.dataLabelsSettings.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),p=this.settings.labels.padding,g=0;l>g;g++)if(Math.floor(l/2)!==g&&this.showSideNumbersLabelText()){var m=s.left+o/2-i*Math.cos(Math.PI*g/u),f=c-i*Math.sin(Math.PI*g/u),y=void 0,v=2*g>l,b=!1;!h||0!==g&&g!==l-1?(y=v?"start":"end",m+=p*(v?1:-1)):(b=!0,f+=p/2,y=v?"end":"start");var C=this.mainGraphicsContext.append("text").attr({x:m,y:f,dy:b?d:0,"class":r.LabelText["class"]}).style({"text-anchor":y,"font-size":d}).text(e[g]).append("title").text(e[g]);b||this.truncateTextIfNeeded(C,m,v)}},r.prototype.truncateTextIfNeeded=function(i,a,r){var n=r?this.currentViewport.width-a:a;i.call(t.AxisHelper.LabelLayoutStrategy.clip,n,e.TextMeasurementService.svgEllipsis)},r.prototype.getFormatter=function(e,i){var a=0===e.displayUnits?i:null,n=t.valueFormatter.getFormatString(this.data.metadataColumn,r.formatStringProp),o=t.dataLabelUtils.getLabelPrecision(e.precision,n),s=t.dataLabelUtils.getOptionsForLabelFormatter(e,n,a,o);return s.formatSingleValues=e.displayUnits>0?!1:!0,t.valueFormatter.create(s)},r.prototype.appendTargetTextAlongArc=function(e,i,a,n){var o=this.targetSettings,s=o.target,l=this.getTargetRatio(),u=e+(i-e)/2+n.top,c=l>.5,h=this.settings.labels.padding,d=c?"start":"end",p=this.getFormatter(this.data.dataLabelsSettings,o.max),g=Math.asin(r.MinDistanceFromBottom/e)/Math.PI,m=g>l||l>1-g?c?1-g:g:l,f=n.left+a/2-(e+h)*Math.cos(Math.PI*m),y=u-(e+h)*Math.sin(Math.PI*m);this.targetText||(this.targetText=this.mainGraphicsContext.append("text").classed(r.TargetText["class"],!0)),this.targetText.attr({x:f,y:y}).style({"text-anchor":d,display:this.showTargetLabel?"":"none","font-size":this.style.labelText.fontSize}).text(p.format(s)),this.truncateTextIfNeeded(this.targetText,f,c),this.targetText.call(t.tooltipUtils.tooltipUpdate,[p.format(s)]),this.targetConnector||(this.targetConnector=this.mainGraphicsContext.append("line").classed(r.TargetConnector["class"],!0)),l===m?this.targetConnector.style("display","none"):this.targetConnector.attr({x1:n.left+a/2-e*Math.cos(Math.PI*l),y1:u-e*Math.sin(Math.PI*l),x2:f,y2:y}).style({"stroke-width":this.settings.targetLine.thickness,stroke:this.settings.targetLine.color,display:""})},r.prototype.arcTween=function(e,t){e.attrTween("d",function(e){var i=d3.interpolate(e.endAngle,t[0]);return function(a){return e.endAngle=i(a),t[1](e)}})},r.prototype.showMinMaxLabelsOnBottom=function(){if(this.currentViewport.height>this.currentViewport.width)return!0;if(this.data&&this.gaugeVisualProperties){var i=this.createTicks(),r=(this.currentViewport.width-2*this.gaugeVisualProperties.radius)/2,n=r-this.settings.labels.padding,o=e.TextMeasurementService.getMeasurementProperties($(this.svg.node()));o.fontSize=a.fromPoint(this.data.dataLabelsSettings.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt);for(var s,l=0,u=[i[0],i[i.length-1]];l<u.length;l++){var c=u[l];if(o.text=c,s=e.TextMeasurementService.measureSvgTextWidth(o),s>n)return!0}}return!1},r.prototype.setMargins=function(){if(this.gaugeSmallViewPortProperties&&this.gaugeSmallViewPortProperties.smallGaugeMarginsOnSmallViewPort&&this.currentViewport.height<this.gaugeSmallViewPortProperties.MinHeightGaugeSideNumbersVisible){var e=this.gaugeSmallViewPortProperties.GaugeMarginsOnSmallViewPort;return void(this.margin={top:e,bottom:e,left:e,right:e})}if(this.margin={top:r.DefaultTopBottomMargin,bottom:r.DefaultTopBottomMargin,left:r.DefaultLeftRightMargin,right:r.DefaultLeftRightMargin},!this.showSideNumbersLabelText()||this.showMinMaxLabelsOnBottom()){var i=this.targetSettings;if(this.showTargetLabel){var n=(i.target-i.min)/(i.max-i.min);n>.5?this.margin.left=r.ReducedLeftRightMargin:this.margin.right=r.ReducedLeftRightMargin}else this.margin.left=this.margin.right=r.ReducedLeftRightMargin}var o=0;this.data&&this.data.dataLabelsSettings&&this.data.dataLabelsSettings.fontSize&&this.data.dataLabelsSettings.fontSize>=t.NewDataLabelUtils.DefaultLabelFontSizeInPt&&(o=a.fromPointToPixel(this.data.dataLabelsSettings.fontSize-t.NewDataLabelUtils.DefaultLabelFontSizeInPt)),0!==o&&(this.margin.bottom+=o,this.margin.left+=o,this.margin.right+=o)},r.prototype.showSideNumbersLabelText=function(){
return this.gaugeSmallViewPortProperties&&this.gaugeSmallViewPortProperties.hideGaugeSideNumbersOnSmallViewPort&&this.currentViewport.height<this.gaugeSmallViewPortProperties.MinHeightGaugeSideNumbersVisible?!1:!0},r.MIN_VALUE=-(1/0),r.MAX_VALUE=+(1/0),r.MinDistanceFromBottom=10,r.MinWidthForTargetLabel=150,r.DefaultTopBottomMargin=20,r.DefaultLeftRightMargin=45,r.ReducedLeftRightMargin=15,r.DEFAULT_MAX=1,r.DEFAULT_MIN=0,r.VisualClassName="gauge",r.DefaultStyleProperties={transition:{ease:"bounce"},arcColors:{background:"#e9e9e9",foreground:"#00B8AA"},targetLine:{show:!0,color:"#666666",thickness:2},labels:{count:2,padding:5,fontSize:t.NewDataLabelUtils.DefaultLabelFontSizeInPt},kpiBands:{show:!1,separationRadians:Math.PI/128,thickness:5}},r.DefaultTargetSettings={min:0,max:1,target:void 0},r.InnerRadiusFactor=.7,r.KpiBandDistanceFromMainArc=2,r.MainGaugeGroupClassName="mainGroup",r.LabelText=i("labelText"),r.TargetConnector=i("targetConnector"),r.TargetText=i("targetText"),r.formatStringProp={objectName:"general",propertyName:"formatString"},r}();t.Gauge=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=jsCommon.Utility,i=function(){function i(){this.scalingType=e.imageScalingType.normal}return i.prototype.init=function(e){this.element=e.element},i.prototype.enumerateObjectInstances=function(e){switch(e.objectName){case"imageScaling":return this.enumerateImageScaling()}return null},i.prototype.enumerateImageScaling=function(){return[{selector:null,objectName:"imageScaling",properties:{imageScalingType:this.scalingType}}]},i.prototype.update=function(i){var a=i.dataViews;if(a&&0!==a.length){var r=a[0].metadata.objects;if(r&&r.general){var n=this.imageBackgroundElement;n||(n=$("<div class='imageBackground' />"),this.imageBackgroundElement=n,this.imageBackgroundElement.appendTo(this.element));var o=i.viewport;n.css("height",o.height),r.imageScaling?this.scalingType=r.imageScaling.imageScalingType.toString():this.scalingType=e.imageScalingType.normal;var s=r.general.imageUrl;t.isValidImageDataUrl(s)&&n.css("backgroundImage","url("+s+")"),this.scalingType===e.imageScalingType.fit?n.css("background-size","100% 100%"):this.scalingType===e.imageScalingType.fill?n.css("background-size","cover"):n.css("background-size","contain")}}},i}();e.ImageVisual=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(e,i,a){if(!i||0===i.length)return o.status.NOGOAL;var r,n;if(2===i.length){if(r=Math.max.apply(Math,i),n=Math.min.apply(Math,i),e>=n&&r>=e)return o.status.IN_BETWEEN}else r=i[0],n=i[0];switch(a){case t.kpiDirection.positive:if(n>e)return o.status.DROP;break;case t.kpiDirection.negative:if(e>r)return o.status.DROP}return o.status.INCREASE}function a(e,i,a){if(!i||1!==i.length||0===i[0])return"";var r,n="+",o=i[0];switch(r=Math.abs(e-o),a){case t.kpiDirection.positive:o>e&&(n="-");break;case t.kpiDirection.negative:e>o&&(n="-")}var s=Number((100*r/o).toFixed(2));return"("+n+s+"%)"}function r(e){switch(e){case o.status.NOGOAL:return o.statusColor.NOGOAL;case o.status.INCREASE:return o.statusColor.GREEN;case o.status.IN_BETWEEN:return o.statusColor.YELLOW;case o.status.DROP:return o.statusColor.RED}}function n(e){switch(e){case o.status.NOGOAL:return o.textStatusColor.NOGOAL;case o.status.INCREASE:return o.textStatusColor.GREEN;case o.status.IN_BETWEEN:return o.textStatusColor.YELLOW;case o.status.DROP:return o.textStatusColor.RED}}var o=function(){function o(){}return o.prototype.init=function(e){o.getLocalizedString=e.host.getLocalizedString,this.svg=d3.select(e.element.get(0)).append("svg");var t=this.mainGroupElement=this.svg.append("g").classed("kpiVisual",!0);this.mainRect=t.append("rect"),this.areaFill=t.append("path"),this.kpiActualText=t.append("text"),this.absoluteGoalDistanceText=t.append("text").classed("goalText",!0),this.host=e.host},o.prototype.update=function(e){if(e.dataViews&&e.dataViews[0]){var t=this.dataView=e.dataViews[0],i=e.viewport;if((!t.categorical||!t.categorical.values||t.categorical.values.length<1)&&(!t.categorical||!t.categorical.categories||t.categorical.categories.length<1))return void this.svg.attr("visibility","hidden");this.svg.attr("visibility","visible");var a=o.converter(t,i,o.getProp_KPIDirection(t));this.render(a,i)}},o.prototype.render=function(e,t){if(this.setShowDataMissingWarning(!(e.indicatorExists&&e.trendExists)),0===e.dataPoints.length||!e.historyExists||!e.indicatorExists||!e.trendExists)return this.areaFill.attr("visibility","hidden"),void this.svg.attr("visibility","hidden");this.svg.attr({height:t.height,width:t.width});var s=o.status.NOGOAL;e.targetExists&&e.indicatorExists&&e.trendExists&&(s=i(e.actual,e.goals,e.directionType));var l=e.formattedValue;this.kpiActualText.attr("x",.5*t.width).attr("y",.5*t.height+o.actualTextConsts.VERTICAL_OFFSET_FROM_HALF_HEIGHT).attr("fill",n(s)).attr("style","font-family:wf_standard-font_light,helvetica,arial,sans-serif;font-size:"+e.textSize+"px").attr("text-anchor","middle").text(l);var u=e.showGoal?e.formattedGoalString+" ":"",c=e.showDistanceFromGoal?a(e.actual,e.goals,e.directionType):"";if(this.absoluteGoalDistanceText.attr("x",.5*t.width).attr("y",.5*t.height+2.2*o.actualTextConsts.VERTICAL_OFFSET_FROM_HALF_HEIGHT).text(u+c),e.showTrendLine){var h=d3.svg.area().x(function(e){return e.x}).y0(t.height).y1(function(e){return e.y});this.areaFill.attr("d",h(e.dataPoints)).attr("stroke","none").attr("visibility","visible").attr("fill",r(s))}else this.areaFill.attr("visibility","hidden")},o.prototype.setShowDataMissingWarning=function(e){this.host.setWarnings(e?[new t.VisualKPIDataMissingWarning]:[])},o.getDefaultFormatSettings=function(){return{labelSettings:t.dataLabelUtils.getDefaultLabelSettings(!0,t.Card.DefaultStyle.value.color),textSize:23,wordWrap:!1}},o.getMetaDataColumn=function(e){if(e&&e.metadata&&e.metadata.columns)for(var t=0,i=e.metadata.columns;t<i.length;t++){var a=i[t];if(a.isMeasure)return a}},o.getFormatString=function(e){return t.valueFormatter.getFormatString(e,t.AnimatedText.formatStringProp)},o.getProp_Show_KPIGoal=function(t){return t&&t.metadata?e.DataViewObjects.getValue(t.metadata.objects,o.showKPIGoal,!0):!0},o.getProp_Show_KPITrendLine=function(t){return t&&t.metadata?e.DataViewObjects.getValue(t.metadata.objects,o.showKPITrendLine,!0):!0},o.getProp_Show_KPIDistance=function(t){return t&&t.metadata?e.DataViewObjects.getValue(t.metadata.objects,o.showKPIDistance,!0):!0},o.getProp_KPIDirection=function(i){return i&&i.metadata?e.DataViewObjects.getValue(i.metadata.objects,o.directionTypeStringProp,t.kpiDirection.positive):t.kpiDirection.positive},o.getProp_Indicator_DisplayUnits=function(t){return o.initDefaultLabelSettings(),t&&t.metadata?e.DataViewObjects.getValue(t.metadata.objects,o.indicatorDisplayUnitsProp,o.defaultLabelSettings.displayUnits):o.defaultLabelSettings.displayUnits},o.getProp_Indicator_Precision=function(t){return o.initDefaultLabelSettings(),t&&t.metadata?e.DataViewObjects.getValue(t.metadata.objects,o.indicatorPrecisionProp,o.defaultLabelSettings.precision):o.defaultLabelSettings.precision},o.getProp_Indicator_TextSize=function(t){return o.initDefaultLabelSettings(),t&&t.metadata?e.DataViewObjects.getValue(t.metadata.objects,o.indicatorTextSize,o.defaultCardFormatSetting.textSize):o.defaultCardFormatSetting.textSize},o.initDefaultLabelSettings=function(){o.defaultCardFormatSetting||(o.defaultCardFormatSetting=o.getDefaultFormatSettings(),o.defaultLabelSettings=o.defaultCardFormatSetting.labelSettings)},o.getFormattedValue=function(i,a,r,n){var s=0===n,l=t.valueFormatter.create({format:o.getFormatString(i),value:n,precision:r,displayUnitSystemType:e.DisplayUnitSystemType.WholeUnits,formatSingleValues:s?!0:!1,allowFormatBeautification:!0,columnType:i?i.type:void 0});return l.format(a)},o.getFormattedGoalString=function(e,t,i,a){if(!t||0===t.length)return"";var r=o.getLocalizedString("Visual_KPI_Goal_Title")+": "+o.getFormattedValue(e,t[0],i,a);return 2===t.length&&(r+=", "+o.getFormattedValue(e,t[1],i,a)),r},o.converter=function(e,i,a){var r=[],n=e.categorical,s=o.getMetaDataColumn(e),l="",u="",c=!1,h=!1,d=!1,p=!0;e.categorical.categories||(p=!1);for(var g=n.values,m=e.metadata.columns,f=0;f<m.length;f++){var y=m[f];t.DataRoleHelper.hasRole(y,"Indicator")&&(h=!0),t.DataRoleHelper.hasRole(y,"TrendLine")&&(d=!0)}if(!(h&&d&&g&&0!==g.length&&g[0].values&&e.categorical.values))return{dataPoints:r,directionType:a,actual:0,goals:[],formattedGoalString:l,targetExists:c,historyExists:p,indicatorExists:h,trendExists:d,formattedValue:u,showGoal:!1,showDistanceFromGoal:!1,showTrendLine:!1,textSize:0};var v,b;p&&(v=n.categories[0],b=v.values);var C=[],S=[],x=o.getColumnsByRole(g,"Indicator"),w=o.getColumnsByRole(g,"Goal");w.length>0&&(c=!0);for(var D,P=0,L=g[0].values.length;L>P;P++){D=x[0].values[P];for(var _=[],N=0;N<w.length;N++)_.push(w[N].values[P]);S.push(_),C.push(D)}for(var T=Math.max.apply(Math,C),V=Math.min.apply(Math,C),M=i.height*o.trendAreaFilePercentage,A=o.getProp_Indicator_Precision(e),R=o.getProp_Indicator_DisplayUnits(e),P=0;P<C.length;P++){var I=M*(C[P]-V)/(T-V),F=null;p&&(F=t.SelectionId.createWithId(v.identity[P]).getSelector()),r.push({x:P*i.width/(C.length-1),y:i.height-I,actual:C[P],goals:S[P]})}var O,G;r.length>0&&(O=r[r.length-1].actual,G=r[r.length-1].goals),1===r.length&&(p=!1),u=o.getFormattedValue(s,O,A,R),l=o.getFormattedGoalString(s,G,A,R);var z=o.getProp_Show_KPIGoal(e),H=o.getProp_Show_KPIDistance(e),k=o.getProp_Show_KPITrendLine(e),E=o.getProp_Indicator_TextSize(e);return{dataPoints:r,directionType:a,actual:O,goals:G,formattedGoalString:l,targetExists:c,historyExists:p,indicatorExists:h,trendExists:d,formattedValue:u,showGoal:z,showDistanceFromGoal:H,showTrendLine:k,textSize:E}},o.getColumnsByRole=function(e,i){for(var a=[],r=0;r<e.length;r++)t.DataRoleHelper.hasRole(e[r].source,i)&&a.push(e[r]);return a},o.prototype.enumerateObjectInstances=function(e){var t=[],i=this.dataView;switch(e.objectName){case"indicator":t.push({selector:null,objectName:"indicator",properties:{indicatorDisplayUnits:o.getProp_Indicator_DisplayUnits(i),indicatorPrecision:o.getProp_Indicator_Precision(i),fontSize:o.getProp_Indicator_TextSize(i)}});case"trendline":t.push({selector:null,objectName:"trendline",properties:{show:o.getProp_Show_KPITrendLine(i)}});case"goals":t.push({selector:null,objectName:"goals",properties:{showGoal:o.getProp_Show_KPIGoal(i),showDistance:o.getProp_Show_KPIDistance(i)}});case"status":t.push({selector:null,objectName:"status",properties:{direction:o.getProp_KPIDirection(i)}})}return t},o.prototype.destroy=function(){this.svg=null},o.directionTypeStringProp={objectName:"status",propertyName:"direction"},o.showKPIGoal={objectName:"goals",propertyName:"showGoal"},o.showKPIDistance={objectName:"goals",propertyName:"showDistance"},o.showKPITrendLine={objectName:"trendline",propertyName:"show"},o.indicatorDisplayUnitsProp={objectName:"indicator",propertyName:"indicatorDisplayUnits"},o.indicatorPrecisionProp={objectName:"indicator",propertyName:"indicatorPrecision"},o.indicatorTextSize={objectName:"indicator",propertyName:"fontSize"},o.status={INCREASE:"increase",DROP:"drop",IN_BETWEEN:"in-between",NOGOAL:"no-goal"},o.textStatusColor={RED:"#ee0000",GREEN:"#3bb44a",YELLOW:"#f2b311",NOGOAL:"#212121"},o.statusColor={RED:"#fef0f0",GREEN:"#ebf7ec",YELLOW:"#fdf9e7",NOGOAL:"#f2f2f2"},o.statusBandingType={Below:"BELOW",Above:"ABOVE"},o.actualTextConsts={VERTICAL_OFFSET_FROM_HALF_HEIGHT:20,FONT_WIDTH_FACTOR:14,RIGHT_MARGIN:10},o.trendAreaFilePercentage=.34,o}();t.KPIStatusWithHistory=o}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.EnumExtensions,a=jsCommon.CssConstants.createClassAndSelector,r=jsCommon.PixelConverter,n=function(){function n(e){var t=this;this.deferDragMoveOperation=jsCommon.DeferUtility.deferUntilNextFrame(function(){if(t.lastDragMoveXPosition){var e=t.findIndex(t.lastDragMoveXPosition-t.margin.left);t.selectColumn(e),t.lastDragMoveXPosition=void 0}}),this.isScrollable=e.isScrollable?e.isScrollable:!1,this.tooltipsEnabled=e.tooltipsEnabled,this.lineType=e.chartType?e.chartType:1,this.interactivityService=e.interactivityService,this.animator=e.animator,this.seriesLabelFormattingEnabled=e.seriesLabelFormattingEnabled,this.lineChartLabelDensityEnabled=e.lineChartLabelDensityEnabled}return n.customizeQuery=function(e){var i=e.dataViewMappings[0];if(i&&i.categorical&&i.categorical.categories){var a=i.categorical.categories,r=a["for"]["in"].items;if(!_.isEmpty(r)){var n,o=r[0].type;i.metadata&&(n=i.metadata.objects),t.CartesianChart.getIsScalar(n,t.lineChartProps.categoryAxis.axisType,o)&&(a.dataReductionAlgorithm={sample:{}})}}},n.getSortableRoles=function(e){var i=e.dataViewMappings[0];if(!i||!i.categorical||!i.categorical.categories)return null;var a=i.categorical.categories,r=a["for"]["in"].items;if(!_.isEmpty(r)){var n,o=r[0].type;if(i.metadata&&(n=i.metadata.objects),!t.CartesianChart.getIsScalar(n,t.lineChartProps.categoryAxis.axisType,o))return["Category"]}return null},n.converter=function(i,a,r,n,o,s,l){var u=i.categorical,c=u.categories&&u.categories.length>0?u.categories[0]:{source:void 0,values:[a],identity:void 0},h=t.CartesianHelper.getCategoryAxisProperties(i.metadata);n=t.CartesianHelper.isScalar(n,h),u=t.ColumnUtil.applyUserMinMax(n,u,h);var d,p=t.lineChartProps.general.formatString,g=t.AxisHelper.getCategoryValueType(c.source,n),m=t.AxisHelper.isDateTime(g),f=c.values,y=[],v=[],b=u.values?u.values.length:0,C=!(!u.values||!u.values.source),S=u.values,x=t.dataLabelUtils.getDefaultLineChartLabelSettings(l);if(i.metadata&&i.metadata.objects){var w=i.metadata.objects;d=e.DataViewObjects.getFillColor(w,t.lineChartProps.dataPoint.defaultColor);var D=w.labels;t.dataLabelUtils.updateLineChartLabelSettingsFromLabelsObject(D,x)}var P,L=new t.ColorHelper(r,t.lineChartProps.dataPoint.fill,d);i.categorical.values&&(P=i.categorical.values.grouped());var N;s&&(N=u.values&&u.values.length>0?_.times(u.values[0].values.length,function(){return 0}):[]);for(var T=0;b>T;T++){var V=u.values[T],M=V.source,A=[],R=P[T],I=C&&R?t.SelectionId.createWithIdAndMeasure(R.identity,V.source.queryName):t.SelectionId.createWithMeasure(V.source.queryName),F=I.getKey(),O=this.getColor(L,C,S,P,T,R),G=void 0;if(!C){var z=P&&P.length>0&&P[0].values?P[0].values[T]:null,H=z&&z.source&&z.source.objects?z.source.objects.labels:null;H&&(G=e.Prototype.inherit(x),t.dataLabelUtils.updateLineChartLabelSettingsFromLabelsObject(H,G))}for(var k=G?G:x,E=V.highlights&&V.highlights.length>0,W=E?V.highlights:V.values,B=0,U=W.length;U>B;B++){var j=f[B],K=t.AxisHelper.normalizeNonFiniteNumber(W[B]);if((!n||null!=j&&null!=K)&&(!m||null==j||j instanceof Date)){var Y=i.categorical,X=t.TooltipBuilder.createTooltipInfo(p,Y,j,K,null,null,T),q=c&&!_.isEmpty(c.identity)&&c.identity[B]?c.identity[B].key:B,$={categoryValue:m&&j?j.getTime():j,value:K,categoryIndex:B,seriesIndex:T,tooltipInfo:X,selected:!1,identity:I,key:JSON.stringify({series:F,category:q}),labelFill:k.labelColor,labelFormatString:M.format,labelSettings:k};s&&(N[B]+=K,$.stackedValue=N[B]),c.objects&&c.objects[B]&&($.pointColor=e.DataViewObjects.getFillColor(c.objects[B],t.lineChartProps.dataPoint.fill)),A.push($),y[B]||(y[B]=$)}}o&&o.applySelectionStateToData(A),A.length>0&&v.push({displayName:M.displayName,key:F,lineIndex:T,color:O,xCol:c.source,yCol:V.source,data:A,identity:I,selected:!1,labelSettings:G})}h=t.CartesianHelper.getCategoryAxisProperties(i.metadata);var Q=t.CartesianHelper.getValueAxisProperties(i.metadata),Z=[];if(S)for(var J=0;J<S.length;J++)S[J]&&S[J].source&&S[J].source.displayName&&Z.push({displayName:S[J].source.displayName});var ee=t.converterHelper.createAxesLabels(h,Q,c.source,Z);return o&&o.applySelectionStateToData(v),{series:v,isScalar:n,dataLabelsSettings:x,axesLabels:{x:ee.xAxisLabel,y:ee.yAxisLabel},hasDynamicSeries:C,categoryMetadata:c.source,categories:f,categoryData:y}},n.getInteractiveLineChartDomElement=function(e){return e.children("svg").get(0)},n.getColor=function(e,t,i,a,r,n){var o;return t?a&&a[r]&&(o=a[r].objects):i[r]&&(o=i[r].source.objects),t&&n?e.getColorForSeriesValue(o,i.identityFields,n.name):e.getColorForMeasure(o,i[r].source.queryName)},n.createStackedValueDomain=function(e){if(0===e.length)return null;var t=d3.min(e,function(e){return d3.min(e.data,function(e){return e.stackedValue})}),i=d3.max(e,function(e){return d3.max(e.data,function(e){return e.stackedValue})});return[t,i]},n.prototype.init=function(e){var i=this;this.options=e;var a=this.element=e.element;this.cartesainSVG=e.svg,this.host=e.host,this.currentViewport=e.viewport,this.colors=e.style.colorPalette.dataColors,this.isInteractiveChart=e.interactivity&&e.interactivity.isInteractiveLegend,this.cartesianVisualHost=e.cartesianHost;var r=e.chartType;this.isComboChart=10===r||13===r||14===r,a.addClass(n.ClassName);var o=e.svg,s=this.mainGraphicsSVG=o.append("svg").classed("lineChartSVG",!0);this.isComboChart||this.isInteractiveChart||(this.overlayRect=s.append(n.RectOverlayName).style("opacity",t.SVGUtil.AlmostZero)),this.mainGraphicsContext=s.append("g").classed(n.MainGraphicsContextClassName,!0),this.hoverLineContext=o.append("g").classed("hover-line",!0),this.hoverLineContext.append(n.LineElementName).attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0);var l=this.hoverLine=this.hoverLineContext.select(n.LineElementName);if(this.isInteractiveChart&&l.classed("interactive",!0),l.style("opacity",t.SVGUtil.AlmostZero),this.selectionCircles=[],this.xAxisProperties={axis:null,scale:null,axisType:null,formatter:null,graphicsContext:null,values:null,axisLabel:null,isCategoryAxis:!0},this.isInteractiveChart){var u=n.getInteractiveLineChartDomElement(this.element),c=function(){i.lastDragMoveXPosition=d3.mouse(u)[0],i.deferDragMoveOperation()},h=d3.behavior.drag().origin(Object).on("drag",c);d3.select(u).style("touch-action","none").call(h).on("click",c)}},n.prototype.setData=function(a){if(this.data={series:[],dataLabelsSettings:t.dataLabelUtils.getDefaultLineChartLabelSettings(this.isComboChart),axesLabels:{x:null,y:null},hasDynamicSeries:!1,categories:[],categoryMetadata:void 0,categoryData:[]},a.length>0){var r=a[0];if(r&&r.categorical){var o=this.dataViewCat=r.categorical,s=o.categories,l=e.ValueType.fromDescriptor({text:!0});s&&s.length>0&&s[0].source&&s[0].source.type&&(l=s[0].source.type);var u=n.converter(r,t.valueFormatter.format(null),this.cartesianVisualHost.getSharedColors(),t.CartesianChart.getIsScalar(r.metadata?r.metadata.objects:null,t.lineChartProps.categoryAxis.axisType,l),this.interactivityService,i.hasFlag(this.lineType,16),this.isComboChart);this.data=u}}},n.prototype.calculateLegend=function(){return this.createLegendDataPoints(0)},n.prototype.hasLegend=function(){return this.data&&(this.data.hasDynamicSeries||this.data.series&&this.data.series.length>1)},n.prototype.setFilteredData=function(t,i){var a=i-t,r=this.clippedData=e.Prototype.inherit(this.data);return r.series=n.sliceSeries(r.series,a,t),r.categories=r.categories.slice(t,i),r},n.prototype.calculateAxesProperties=function(a){var r=this,o=this.data,s=a.viewport,l=a.margin;this.currentViewport=s,this.margin=l;var u=o.series&&o.series.length>0?o.series[0].data.length:0,c=t.CartesianChart.MinOrdinalRectThickness,h=this.data.isScalar,d=a.trimOrdinalDataOnOverflow,p=this.getPreferredPlotArea(h,u,c);if(p.width===this.currentViewport.width&&(p.width-=l.left+l.right),p.height-=l.top+l.bottom,this.clippedData=void 0,o&&!h&&!this.isScrollable&&d){var g=this.getCategoryCount(u),m=Math.min(u,g);m!==u&&(o=this.clippedData=e.Prototype.inherit(o),this.clippedData.series=n.sliceSeries(o.series,m))}var f,y;o.series&&o.series.length>0&&(f=o.series[0].xCol,y=o.series[0].yCol);var v=i.hasFlag(this.lineType,16)?n.createStackedValueDomain(o.series):t.AxisHelper.createValueDomain(o.series,!1),b=a.valueAxisScaleType===t.axisScale.log&&!t.AxisHelper.isLogScalePossible(v),C=t.AxisHelper.combineDomain(a.forcedYDomain,v);this.yAxisProperties=t.AxisHelper.createAxis({pixelSpan:p.height,dataDomain:C,metaDataColumn:y,formatString:t.valueFormatter.getFormatString(y,t.lineChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!0,forcedTickCount:a.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:a.valueAxisScaleType,axisDisplayUnits:a.valueAxisDisplayUnits,axisPrecision:a.valueAxisPrecision,shouldClamp:!1});var S=t.AxisHelper.createDomain(o.series,this.xAxisProperties.axisType,this.data.isScalar,a.forcedXDomain),x=a.valueAxisScaleType===t.axisScale.log&&!t.AxisHelper.isLogScalePossible(S);return this.xAxisProperties=t.AxisHelper.createAxis({pixelSpan:p.width,dataDomain:S,metaDataColumn:f,formatString:t.valueFormatter.getFormatString(f,t.lineChartProps.general.formatString),outerPadding:this.data.isScalar?n.ScalarOuterPadding:0,isScalar:this.data.isScalar,isVertical:!1,forcedTickCount:a.forcedTickCount,useTickIntervalForDisplayUnits:!0,getValueFn:function(e,i){return t.CartesianHelper.lookupXValue(r.data,e,i,r.data.isScalar)},categoryThickness:t.CartesianChart.getCategoryThickness(o.series,u,this.getAvailableWidth(),S,h,d),isCategoryAxis:!0,scaleType:a.categoryAxisScaleType,axisDisplayUnits:a.categoryAxisDisplayUnits,axisPrecision:a.categoryAxisPrecision}),this.xAxisProperties.axisLabel=a.showCategoryAxisLabel?o.axesLabels.x:null,this.yAxisProperties.axisLabel=a.showValueAxisLabel?o.axesLabels.y:null,this.xAxisProperties.hasDisallowedZeroInDomain=x,this.yAxisProperties.hasDisallowedZeroInDomain=b,[this.xAxisProperties,this.yAxisProperties]},n.prototype.enumerateObjectInstances=function(e,t){switch(t.objectName){case"dataPoint":this.enumerateDataPoints(e);break;case"labels":this.enumerateDataLabels(e)}},n.prototype.enumerateDataPoints=function(e){var i=this.data;if(i&&i.series&&0!==i.series.length)for(var a=t.lineChartProps.general.formatString,r=i.series,n=r.length,o=0;n>o;o++){var s=t.ColorHelper.normalizeSelector(r[o].identity.getSelector()),l=t.converterHelper.getFormattedLegendLabel(r[o].yCol,this.dataViewCat.values,a);e.pushInstance({objectName:"dataPoint",displayName:l,selector:s,properties:{fill:{solid:{color:i.defaultSeriesColor||r[o].color}}}})}},n.prototype.enumerateDataLabels=function(e){var i=this.data,a=this.data.dataLabelsSettings,r=i.series.length,n=this.showLabelPerSeries();if(t.dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(e,a,null,n)),0!==r&&n&&a.showLabelPerSeries)for(var o=0;r>o;o++){var s=i.series[o],l=s.labelSettings?s.labelSettings:this.data.dataLabelsSettings;e.pushContainer({displayName:s.displayName}),t.dataLabelUtils.enumerateDataLabels(this.getLabelSettingsOptions(e,l,s)),e.popContainer()}},n.prototype.getLabelSettingsOptions=function(e,t,i,a){return{enumeration:e,dataLabelsSettings:t,show:!0,displayUnits:!0,precision:!0,selector:i&&i.identity?i.identity.getSelector():null,showAll:a,fontSize:!0,labelDensity:this.lineChartLabelDensityEnabled}},n.prototype.overrideXScale=function(e){this.xAxisProperties=e},n.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},n.prototype.render=function(e){var i,a=t.AnimatorCommon.GetAnimationDuration(this.animator,e);return i=this.isInteractiveChart?this.renderOld(a):this.renderNew(a),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),i},n.prototype.renderNew=function(e){var a=this,r=this.clippedData?this.clippedData:this.data;if(r){var o,s,l=i.hasFlag(this.lineType,16),u=this.margin,c=this.currentViewport,h=c.height-(u.top+u.bottom),d=c.width-(u.left+u.right),p=this.xAxisProperties.scale,g=this.yAxisProperties.scale,m=this.extraLineShift(),f=this.interactivityService&&this.interactivityService.hasSelection(),y=i.hasFlag(this.lineType,2)||i.hasFlag(this.lineType,16),v=function(e){return p(a.getXValue(e))+m};l?(o=function(e){return g(e.stackedValue-e.value)},s=function(e){return g(e.stackedValue)}):(o=g(0),s=function(e){return g(e.value)});var b;y&&(b=d3.svg.area().x(v).y0(o).y1(s).defined(function(e){return null!==e.value}));var C=d3.svg.line().x(v).y(s).defined(function(e){return null!==e.value});i.hasFlag(this.lineType,4)&&(C.interpolate("basis"),b&&b.interpolate("basis")),this.mainGraphicsSVG.attr("height",h).attr("width",d);var S=void 0;y&&(S=this.mainGraphicsContext.selectAll(n.CategoryAreaSelector.selector).data(r.series,function(e){return e.identity.getKey()}),S.enter().append(n.PathElementName).classed(n.CategoryAreaSelector["class"],!0),S.style("fill",function(e){return e.color}).style("fill-opacity",function(e){return f&&!e.selected?n.DimmedAreaFillOpacity:n.AreaFillOpacity}).transition().ease("linear").duration(e).attr("d",function(e){return b(e.data)}),S.exit().remove());var x=this.mainGraphicsContext.selectAll(".line").data(r.series,function(e){return e.identity.getKey()});x.enter().append(n.PathElementName).classed("line",!0),x.style("stroke",function(e){return e.color}).style("stroke-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,f,!1)}).transition().ease("linear").duration(e).attr("d",function(e){return C(e.data)}),x.exit().remove();var w;this.interactivityService&&(w=this.mainGraphicsContext.selectAll(".interactivity-line").data(r.series,function(e){return e.identity.getKey()}),w.enter().append(n.PathElementName).classed("interactivity-line",!0),w.attr("d",function(e){return C(e.data)}),w.exit().remove());var D=this.mainGraphicsContext.selectAll(n.CategorySelector.selector).data(r.series,function(e){return e.identity.getKey()});D.enter().append("g").classed(n.CategorySelector["class"],!0),D.exit().remove();var P=D.selectAll(n.CategoryValuePoint.selector).data(function(e){return e.data.filter(function(t,i){return a.shouldDrawCircle(e,i)})},function(e){return e.key});P.enter().append(n.CircleElementName).classed(n.CategoryValuePoint["class"],!0),P.style("fill",function(){var e=d3.select(this.parentNode).datum();return e.color}).style("fill-opacity",function(){var e=d3.select(this.parentNode).datum();return t.ColumnUtil.getFillOpacity(e.selected,!1,f,!1)}).transition().duration(e).attr({cx:function(e,t){return p(a.getXValue(e))+m},cy:function(e,t){return g(e.value)},r:n.CircleRadius}),P.exit().remove();var L=D.selectAll(n.CategoryPointSelector.selector).data(function(e){return _.filter(e.data,function(e){return null!=e.pointColor})},function(e){return e.key});L.enter().append(n.CircleElementName).classed(n.CategoryPointSelector["class"],!0),L.style("fill",function(e){return e.pointColor}).transition().duration(e).attr({cx:function(e){return p(a.getXValue(e))},cy:function(e){return g(e.value)},r:n.PointRadius}),L.exit().remove();var N;if(r.dataLabelsSettings.show&&(N=this.createLabelDataPoints()),this.tooltipsEnabled)if(this.isComboChart){var T=function(e){var t=e.elementCoordinates[0];return a.getTooltipInfoByPathPointX(e,t)};w&&t.TooltipManager.addTooltip(w,T,!0),t.TooltipManager.addTooltip(P,function(e){return e.data.tooltipInfo},!0),t.TooltipManager.addTooltip(L,function(e){return e.data.tooltipInfo},!0)}else{this.overlayRect.attr({x:0,width:d,height:h});var T=function(e){var t=e.elementCoordinates[0],i=a.findIndex(t),r=a.selectColumnForTooltip(i);return a.getSeriesTooltipInfo(r)},V=function(){a.hoverLine.style("opacity",t.SVGUtil.AlmostZero),a.hoverLineContext.selectAll(n.HoverLineCircleDot.selector).remove()};t.TooltipManager.addTooltip(this.mainGraphicsSVG,T,!0,V)}var M=void 0,A=void 0;if(this.interactivityService){M=r.series.slice();for(var R=0,I=r.series.length;I>R;R++)M=M.concat(r.series[R].data);A={lines:x,interactivityLines:w,dots:P,areas:S,tooltipOverlay:this.overlayRect}}return{dataPoints:M,behaviorOptions:A,labelDataPoints:[],labelsAreNumeric:!0,labelDataPointGroups:N}}},n.prototype.renderOld=function(e){var a=this,r=this.clippedData?this.clippedData:this.data;if(r){var o,s=this.margin,l=this.currentViewport,u=l.height-(s.top+s.bottom),c=this.xAxisProperties.scale,h=this.yAxisProperties.scale,d=this.interactivityService&&this.interactivityService.hasSelection();i.hasFlag(this.lineType,2)&&(o=d3.svg.area().x(function(e){return c(a.getXValue(e))}).y0(u).y1(function(e){return h(e.value)}).defined(function(e){return null!==e.value}));var p=d3.svg.line().x(function(e){return c(a.getXValue(e))}).y(function(e){return h(e.value)}).defined(function(e){return null!==e.value});i.hasFlag(this.lineType,4)&&(p.interpolate("basis"),o&&o.interpolate("basis"));var g=this.extraLineShift();if(this.mainGraphicsContext.attr("transform",t.SVGUtil.translate(g,0)),this.mainGraphicsSVG.attr("height",this.getAvailableHeight()).attr("width",this.getAvailableWidth()),this.hoverLineContext.attr("transform",t.SVGUtil.translate(g,0)),i.hasFlag(this.lineType,2)){var m=this.mainGraphicsContext.selectAll(n.CategoryAreaSelector.selector).data(r.series,function(e){return e.identity.getKey()}),f=m.enter().append("g").classed(n.CategoryAreaSelector["class"],!0);f.append(n.PathElementName);var y=this.mainGraphicsContext.selectAll(n.CategoryAreaSelector.selector);y.select(n.PathElementName).transition().ease("linear").duration(e).attr("d",function(e){return o(e.data)}).style("fill",function(e){return e.color}).style("fill-opacity",function(e){return d&&!e.selected?n.DimmedAreaFillOpacity:n.AreaFillOpacity}),m.exit().remove()}var v=this.mainGraphicsContext.selectAll(n.CategorySelector.selector).data(r.series,function(e){return e.identity.getKey()}),b=v.enter().append("g").classed(n.CategorySelector["class"],!0);if(b.append(n.PathElementName),b.selectAll(n.CategoryValuePoint.selector).data(function(e){return e.data}).enter().append(n.CircleElementName).classed(n.CategoryValuePoint["class"],!0),v.exit().remove(),this.isInteractiveChart&&!this.dragHandle){var C=this.getAvailableHeight();this.dragHandle=this.hoverLineContext.append("circle").attr("cx",0).attr("cy",C).attr("r","6px").classed("drag-handle",!0)}for(var S=v.data().length;this.selectionCircles.length<S;){var x=this.hoverLineContext.append(n.CircleElementName).classed(n.CircleClassName,!0).attr("r",n.CircleRadius).style("opacity",0);this.selectionCircles.push(x)}for(;this.selectionCircles.length>S;)this.selectionCircles.pop().remove();var w=this.mainGraphicsContext.selectAll(n.CategorySelector.selector),D=w.select(n.PathElementName).classed("line",!0).style("stroke",function(e){return e.color}).style("stroke-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,d,!1)});D.transition().ease("linear").duration(e).attr("d",function(e){return p(e.data)});var P=this,L=w.selectAll(n.CategoryValuePoint.selector),_=L.style("fill",function(){var e=d3.select(this.parentNode).datum();return e.color}).style("fill-opacity",function(){var e=d3.select(this.parentNode).datum();return t.ColumnUtil.getFillOpacity(e.selected,!1,d,!1)}).transition().duration(e).attr({cx:function(e,t){var i=d3.select(this.parentNode).datum(),a=P.shouldDrawCircle(i,t);return a?c(P.getXValue(e)):0},cy:function(e,t){var i=d3.select(this.parentNode).datum(),a=P.shouldDrawCircle(i,t);return a?h(e.value):0},r:function(e,t){var i=d3.select(this.parentNode).datum(),a=P.shouldDrawCircle(i,t);return a?n.CircleRadius:0}});if(this.isInteractiveChart&&this.hasDataPoint(r.series)){var N=L.size(),T=0;_.each("end",function(){T++,T===N&&a.selectColumn(a.findMaxDataPoint(r.series),!0)})}if(r.dataLabelsSettings.show){for(var V=t.dataLabelUtils.getLineChartLabelLayout(c,h,r.dataLabelsSettings,r.isScalar,this.yAxisProperties.formatter),M=[],A=0,R=r.series.length;R>A;A++)Array.prototype.push.apply(M,r.series[A].data);t.dataLabelUtils.drawDefaultLabelsForDataPointChart(M,this.mainGraphicsSVG,V,this.currentViewport),this.mainGraphicsSVG.select(".labels").attr("transform",t.SVGUtil.translate(g,0))}else t.dataLabelUtils.cleanDataLabels(this.mainGraphicsSVG);return v.exit().remove(),null}},n.prototype.getSeriesTooltipInfo=function(e){for(var t=[],i=10,a=0,r=0;r<e.length;r++){var n=e[r];if(a>=i)break;null!=n.value&&(t.push({
header:n.category,color:n.color,displayName:n.label,value:n.measure}),a++)}return 0===t.length?null:t},n.prototype.getTooltipInfoByPathPointX=function(e,t){var i=e.data,a=0;if(i&&i.data&&i.data.length&&this.xAxisProperties){var r=_.find(i.data,function(e){return null!=e.value});a=this.xAxisProperties.scale(this.getXValue(r))}var n=this.findIndex(t,a+this.extraLineShift()),o=_.find(i.data,function(e){return e.categoryIndex===n});return o?o.tooltipInfo:void 0},n.prototype.getVisualCategoryAxisIsScalar=function(){return this.data?this.data.isScalar:!1},n.prototype.getSupportedCategoryAxisType=function(){var i=this.dataViewCat?this.dataViewCat.categories:void 0,a=e.ValueType.fromDescriptor({text:!0});i&&i.length>0&&i[0].source&&i[0].source.type&&(a=i[0].source.type);var r=t.AxisHelper.isOrdinal(a);return r?t.axisType.categorical:t.axisType.both},n.prototype.getPreferredPlotArea=function(e,i,a){return t.CartesianChart.getPreferredPlotArea(i,a,this.currentViewport,this.isScrollable,e)},n.prototype.getCategoryCount=function(e){var i=this.getAvailableWidth(),a=t.CartesianChart.MinOrdinalRectThickness;return Math.min(Math.round((i-a*t.CartesianChart.OuterPaddingRatio*2)/a),e)},n.prototype.getAvailableWidth=function(){return this.currentViewport.width-(this.margin.left+this.margin.right)},n.prototype.getAvailableHeight=function(){return this.currentViewport.height-(this.margin.top+this.margin.bottom)},n.sliceSeries=function(t,i,a){void 0===a&&(a=0);var r=[];if(t&&t.length>0)for(var n=0,o=t.length;o>n;n++)r[n]=e.Prototype.inherit(t[n]),r[n].data=t[n].data.slice(a,a+i);return r},n.prototype.extraLineShift=function(){if(!this.data.isScalar){var e=this.xAxisProperties.scale;if(e.rangeBand)return e.rangeBand()/2}return 0},n.prototype.hasDataPoint=function(e){if(0===e.length)return!1;for(var t=0,i=e.length;i>t;t++)if(e[t].data.length>0)return!0;return!1},n.prototype.findMaxDataPoint=function(e){if(0===e.length)return 0;for(var t=0,i=0;i<e.length;i++){var a=e[i],r=a.data.length;r>t&&(t=r)}return t-1},n.prototype.getXValue=function(e){return this.data.isScalar?e.categoryValue:e.categoryIndex},n.prototype.shouldDrawCircle=function(e,t){var i=e.data.length,a=t===i-1,r=0===t;return t>i-1||null===e.data[t]||null===e.data[t].value?!1:r&&a?!0:r&&i>1&&null===e.data[t+1].value?!0:!r&&a&&null===e.data[t-1].value?!0:r||a||null!==e.data[t-1].value||null!==e.data[t+1].value?!1:!0},n.prototype.selectColumnForTooltip=function(e,t){void 0===t&&(t=!1);var i=this.getChartX(e)+this.extraLineShift(),a=this.createTooltipDataPoints(e);return a.length>0&&this.setHoverLineForTooltip(i),this.setDotsForTooltip(i,a),a},n.prototype.setHoverLineForTooltip=function(e){e=e||0,this.hoverLine.attr("x1",e).attr("x2",e).attr("y1",0).attr("y2",this.getAvailableHeight()).style("opacity",1)},n.prototype.setDotsForTooltip=function(e,t){var a=this,r=i.hasFlag(this.lineType,16),o=r?function(e){return a.yAxisProperties.scale(e.stackedValue)}:function(e){return a.yAxisProperties.scale(e.value)},s=this.hoverLineContext.selectAll(n.HoverLineCircleDot.selector).data(t);s.enter().append(n.CircleElementName).classed(n.HoverLineCircleDot["class"],!0),s.filter(function(e){return e.value}).attr("fill",function(e){return e.color}).attr("r",3).attr("cx",e).attr("cy",o),s.exit().remove()},n.prototype.selectColumn=function(e,t){if(void 0===t&&(t=!1),t||this.lastInteractiveSelectedColumnIndex!==e){this.lastInteractiveSelectedColumnIndex=e;var i=this.getChartX(e);this.setHoverLine(i);var a=this.createLegendDataPoints(e);this.options.cartesianHost.updateLegend(a)}},n.prototype.setHoverLine=function(e){this.hoverLine.attr("x1",e).attr("x2",e).attr("y1",0).attr("y2",this.getAvailableHeight()).style("opacity",1);var t=this;this.mainGraphicsContext.selectAll(n.CategorySelector.selector).selectAll(n.PathElementName).each(function(i){var a=this,r=i.color,n=t.selectionCircles[i.lineIndex];n.attr({cx:e,cy:function(){var i=d3.select(a).node(),r=t.getPosition(e,i);return r.y}}).style({opacity:1,fill:r}),t.dragHandle&&t.dragHandle.attr("cx",e)})},n.prototype.getChartX=function(t){var i=0;this.data.isScalar?t>=0&&t<this.data.categoryData.length&&(i=Math.max(0,this.xAxisProperties.scale(this.data.categoryData[t].categoryValue))):i=Math.max(0,this.xAxisProperties.scale(t));var a=e.visuals.AxisHelper.extent(this.xAxisProperties.scale)[1];return i=Math.min(i,a),isNaN(i)?0:i},n.prototype.findIndex=function(i,a){var r=this.mainGraphicsSVG.node(),n=t.SVGUtil.getTransformScaleRatios(r);e.Double.equalWithPrecision(n.x,1,1e-5)||(i/=n.x),a&&(i+=a);var o=e.visuals.AxisHelper.invertScale(this.xAxisProperties.scale,i);return this.data.isScalar&&(o=t.AxisHelper.findClosestXAxisIndex(o,this.data.categoryData)),o},n.prototype.getPosition=function(e,i){for(var a,r,n=i.getTotalLength(),o=0,s=n;;){if(r=Math.floor((o+s)/2),a=i.getPointAtLength(r),t.SVGUtil.ensureValidSVGPoint(a),(r===s||r===o)&&a.x!==e)break;if(a.x>e)s=r;else{if(!(a.x<e))break;o=r}}return a},n.prototype.createTooltipDataPoints=function(e){var i=this.data;if(!i||0===i.series.length||!i.categoryData)return[];var a,r=[],n=i.categoryData[e];this.data.isScalar?n&&(a=t.AxisHelper.isDateTime(this.xAxisProperties.axisType)?t.CartesianHelper.lookupXValue(this.data,n.categoryValue,this.xAxisProperties.axisType,this.data.isScalar):n.categoryValue):a=t.CartesianHelper.lookupXValue(this.data,e,this.xAxisProperties.axisType,this.data.isScalar);for(var o=t.lineChartProps.general.formatString,s=0,l=i.series;s<l.length;s++){var u=l[s],c=u.data,h=void 0;this.data.isScalar?n&&(h=c.filter(function(e){return e.categoryValue===n.categoryValue})[0]):h=c[e];var d=h&&h.value;if(null!=d){var p=t.converterHelper.getFormattedLegendLabel(u.yCol,this.dataViewCat.values,o);r.push({color:u.color,label:p,category:t.valueFormatter.format(a,t.valueFormatter.getFormatString(u.xCol,o)),measure:t.valueFormatter.format(d,t.valueFormatter.getFormatString(u.yCol,o)),value:d,stackedValue:h.stackedValue})}}return r},n.prototype.createLegendDataPoints=function(e){var i=this.data;if(i&&i.series&&!(i.series.length<1)){var a,r=[],n=i.categoryData[e];this.isInteractiveChart&&n&&(this.data.isScalar?(a=n.categoryValue,t.AxisHelper.isDateTime(this.xAxisProperties.axisType)&&(a=new Date(a))):a=t.CartesianHelper.lookupXValue(this.data,e,this.xAxisProperties.axisType,this.data.isScalar));for(var o=t.lineChartProps.general.formatString,s=null,l=0,u=i.series.length;u>l;l++){var c=i.series[l],h=c.data,d=void 0;if(this.isInteractiveChart){var p=void 0;if(this.data.isScalar){if(n)for(var g=n.categoryValue,m=0;m<h.length;m++)if(h[m].categoryValue===g){p=h[m];break}}else p=h[e];d=p&&p.value}var f=t.converterHelper.getFormattedLegendLabel(c.yCol,this.dataViewCat.values,o);s=c.yCol,r.push({color:c.color,icon:t.LegendIcon.Line,label:f,category:t.valueFormatter.format(a,t.valueFormatter.getFormatString(c.xCol,o)),measure:t.valueFormatter.format(d,t.valueFormatter.getFormatString(c.yCol,o)),identity:c.identity,selected:c.selected})}var y=this.dataViewCat?this.dataViewCat.values:null,v=y&&y.source?y.source.displayName:"";return{title:v,dataPoints:r}}},n.prototype.createLabelDataPoints=function(){var a,o,s,l,u,c,h=this,d=this.xAxisProperties.scale,p=this.yAxisProperties.scale,g=this.extraLineShift(),m=this.data,f=m.series,y=t.NewDataLabelUtils.createColumnFormatterCacheManager(),v=m.dataLabelsSettings,b=i.hasFlag(this.lineType,16),C=[];for(u=0,c=f.length;c>u;u++){var S=f[u];if(a=S.labelSettings?S.labelSettings:v,a.show){o=t.NewDataLabelUtils.getDisplayUnitValueFromAxisFormatter(this.yAxisProperties.formatter,a);var x=S.data;s=[],l=[];var w=function(i){if(null==i.value)return null;var s="";s=i.labelFormatString;var l,u=y.getOrCreate(s,a,o),c=t.NewDataLabelUtils.getLabelFormattedText(u.format(i.value)),m={text:c,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:r.fromPoint(a.fontSize),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},f=e.TextMeasurementService.measureSvgTextWidth(m)+t.NewDataLabelUtils.LabelDensityPadding,v=e.TextMeasurementService.estimateSvgTextHeight(m,!0),C=!1;if(b){var S=Math.max(i.stackedValue-i.value,p.domain()[0]);l={rect:{left:d(h.getXValue(i)),top:p(Math.max(i.stackedValue,i.stackedValue-i.value)),width:2*g,height:Math.abs(p(i.stackedValue)-p(S))},orientation:i.value>=0?1:2,validPositions:n.validStackedLabelPositions},C=!0}else l={point:{x:d(h.getXValue(i))+g,y:p(i.value)},radius:0,validPositions:h.lineChartLabelDensityEnabled?n.validLabelPositions:[1]};var x={isPreferred:!1,text:c,textSize:{width:f,height:v},outsideFill:a.labelColor?a.labelColor:t.NewDataLabelUtils.defaultLabelColor,insideFill:a.labelColor&&b?a.labelColor:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:C?1:0,parentShape:l,fontSize:a.fontSize,identity:i.identity,key:i.key};return x};if(!_.isEmpty(x)){var D=x.length,P=x[D-1],L=w(P,u);L&&s.push(L);for(var N=0;D-1>N;N++){var T=w(x[N],u);T&&s.push(T)}}var V=x.length;C[u]={labelDataPoints:s,maxNumberOfLabels:V}}}return C},n.prototype.showLabelPerSeries=function(){var e=this.data;return!e.hasDynamicSeries&&(e.series.length>1||!e.categoryMetadata)&&this.seriesLabelFormattingEnabled},n.ClassName="lineChart",n.MainGraphicsContextClassName="mainGraphicsContext",n.CategorySelector=a("cat"),n.CategoryValuePoint=a("dot"),n.CategoryPointSelector=a("point"),n.CategoryAreaSelector=a("catArea"),n.HoverLineCircleDot=a("circle-item"),n.PointRadius=5,n.CircleRadius=4,n.PathElementName="path",n.CircleElementName="circle",n.CircleClassName="selection-circle",n.LineElementName="line",n.RectOverlayName="rect",n.ScalarOuterPadding=10,n.AreaFillOpacity=.4,n.DimmedAreaFillOpacity=.2,n.validLabelPositions=[1,2,8,4,64,128,16,32],n.validStackedLabelPositions=[1,4,2],n}();t.LineChart=n}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.Color,a=jsCommon.PixelConverter,r=t.shapes.Polygon;t.MaxLevelOfDetail=23,t.MinLevelOfDetail=1,t.DefaultFillOpacity=.5,t.DefaultBackgroundColor="#000000",t.LeaderLineColor="#000000";var n=function(){function i(e){this.values=[],this.tooltipsEnabled=e}return i.prototype.init=function(e,i,a){this.mapControl=e,this.root=i;var r=d3.select(i[0]);r.attr("drag-resize-disabled","true");var n=this.svg=r.append("svg").style("position","absolute").style("pointer-events","none");if(a){var o=this.clearSvg=d3.select(this.mapControl.getRootElement()).append("svg").style("position","absolute");this.clearCatcher=t.appendClearCatcher(o)}this.bubbleGraphicsContext=n.append("g").classed("mapBubbles",!0),this.sliceGraphicsContext=n.append("g").classed("mapSlices",!0),this.labelBackgroundGraphicsContext=n.append("g").classed(t.NewDataLabelUtils.labelBackgroundGraphicsContextClass["class"],!0),this.labelGraphicsContext=n.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass["class"],!0),this.sliceLayout=d3.layout.pie().sort(null).value(function(e){return e.value}),this.arc=d3.svg.arc(),this.clearMaxDataPointRadius(),this.dataLabelsSettings=t.dataLabelUtils.getDefaultMapLabelSettings()},i.prototype.addDataPoint=function(e){this.values.push(e)},i.prototype.clearDataPoints=function(){this.values=[]},i.prototype.getDataPointCount=function(){return _.filter(this.values,function(e){return!!e.cachedLocation}).length},i.prototype.getDataPointPadding=function(){return 2*this.maxDataPointRadius},i.prototype.clearMaxDataPointRadius=function(){this.maxDataPointRadius=0},i.prototype.setMaxDataPointRadius=function(e){this.maxDataPointRadius=Math.max(e,this.maxDataPointRadius)},i.prototype.beginDataPointUpdate=function(e,t){this.values.length=0},i.prototype.getDefaultMap=function(e,t){this.values.length=0},i.prototype.converter=function(e,i,a,r){var n=this.mapControl,o=e.width/2,s=e.height/2,l=1;this.dataLabelsSettings=a;var u=Math.min(e.width,e.height)/384;this.clearMaxDataPointRadius();var c,h,d=[],p=[],g=t.mapProps.general.formatString,m=i?i.categorical:null,f=-1;m&&m.values&&(c=m.values.grouped(),f=t.DataRoleHelper.getMeasureIndexOfRole(c,"Size"),h=m.values.source);for(var y=0,v=this.values.length;v>y;y++){var b=this.values[y],C=b.categoryValue,S=b.cachedLocation;if(S){var x=n.tryLocationToPixel(new Microsoft.Maps.Location(S.latitude,S.longitude)),w=x.x+o,D=x.y+s,P=b.radius*u;this.setMaxDataPointRadius(P);var L=b.seriesInfo.sizeValuesForGroup,_=m.categories[0],N={},T=L?L.length:1;if(1===T){var V=L[0],M=V.value,A=V.index,R=[];h&&R.push({value:c[A].name,metadata:{source:h,values:[]}}),f>-1&&R.push({value:M,metadata:c[0].values[f]});var I=t.TooltipBuilder.createTooltipInfo(g,null,C,null,m.categories,R),F=L[0];N[_.source.queryName]=b.categoryIdentity;var O=t.SelectionId.createWithSelectorForColumnAndMeasure(N,null);d.push({x:w,y:D,labeltext:C,radius:P,fill:F.fill,stroke:F.stroke,strokeWidth:l,tooltipInfo:I,identity:O,selected:!1,labelFill:a.labelColor})}else{var G=[],z=m.values[0];N[_.source.queryName]=b.categoryIdentity;for(var H=0;T>H;++H){var V=L[H],M=V.value,A=V.index,R=[];h&&R.push({value:c[A].name,metadata:{source:h,values:[]}}),f>-1&&R.push({value:M,metadata:c[0].values[f]});var I=t.TooltipBuilder.createTooltipInfo(g,null,C,null,m.categories,R),k=L[H];N[z.source.queryName]=k.seriesId;var O=t.SelectionId.createWithSelectorForColumnAndMeasure(N,null);G.push({x:w,y:D,labeltext:C,radius:P,fill:k.fill,stroke:k.stroke,strokeWidth:l,value:M,tooltipInfo:I,identity:O,selected:!1,labelFill:a.labelColor})}r&&r.applySelectionStateToData(G),p.push(G)}}}return r&&r.applySelectionStateToData(d),{bubbleData:d,sliceData:p}},i.prototype.updateInternal=function(e,i,a,r,n){s.removeTransform3d(this.root),this.mapData=e,this.svg&&this.svg.style("width",i.width.toString()+"px").style("height",i.height.toString()+"px"),this.clearSvg&&this.clearSvg.style("width",i.width.toString()+"px").style("height",i.height.toString()+"px");var o=this.arc,l=r&&r.hasSelection(),u=this.bubbleGraphicsContext.selectAll(".bubble").data(e.bubbleData,function(e){return e.identity.getKey()});u.enter().append("circle").classed("bubble",!0),u.attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}).attr("r",function(e){return e.radius}).style("fill",function(e){return e.fill}).style("stroke",function(e){return e.stroke}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,l,!1)}).style("strokeWidth",function(e){return e.strokeWidth}).style("stroke-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,l,!1)}).style("cursor","default"),u.exit().remove(),this.tooltipsEnabled&&(t.TooltipManager.addTooltip(u,function(e){return e.data.tooltipInfo}),u.style("pointer-events","all"));var c=e.sliceData,h=this.sliceGraphicsContext.selectAll(".sliceContainer").data(c);h.enter().append("g").classed("sliceContainer",!0),h.exit().remove();var d=this.sliceLayout,p=h.selectAll(".slice").data(function(e){return d(e)},function(e){return e.data.identity.getKey()});p.enter().append("path").classed("slice",!0),p.style("fill",function(e){return e.data.fill}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.data.selected,!1,l,!1)}).style("stroke",function(e){return e.data.stroke}).style("strokeWidth",function(e){return e.data.strokeWidth}).style("stroke-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.data.selected,!1,l,!1)}).style("cursor","default").attr("transform",function(e){return t.SVGUtil.translate(e.data.x,e.data.y)}).attr("d",function(e){return o.innerRadius(0).outerRadius(function(e){return e.data.radius})(e)}),p.exit().remove(),this.updateInternalDataLabels(i,n),this.tooltipsEnabled&&(t.TooltipManager.addTooltip(p,function(e){return e.data.data.tooltipInfo}),p.style("pointer-events","all"));for(var g=e.bubbleData.slice(),m=0,f=c.length;f>m;m++)g.push.apply(g,c[m]);var y={bubbles:u,slices:this.sliceGraphicsContext.selectAll("path"),clearCatcher:this.clearCatcher,dataPoints:g};return y},i.prototype.updateInternalDataLabels=function(i,a){var r=this.dataLabelsSettings,n=[];if(r&&(r.show||r.showCategory)){var o=this.createLabelDataPoints(),s=new e.LabelLayout({maximumOffset:t.NewDataLabelUtils.maxLabelOffset,startingOffset:t.NewDataLabelUtils.startingLabelOffset}),l={labelDataPoints:o,maxNumberOfLabels:o.length};n=s.layout([l],{width:i.width,height:i.height})}t.NewDataLabelUtils.drawLabelBackground(this.labelGraphicsContext,n,e.visuals.DefaultBackgroundColor,e.visuals.DefaultFillOpacity),t.NewDataLabelUtils.drawDefaultLabels(this.labelGraphicsContext,n,!1)},i.prototype.createLabelDataPoints=function(){var r=this.mapData,n=[],o=r.bubbleData;o=o.concat(_.map(r.sliceData,function(e){return e[0]}));for(var s=this.dataLabelsSettings,l=0;l<o.length;l++){var u=o[l],c=u.labeltext,h={text:c,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:a.fromPoint(s.fontSize),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},d=e.TextMeasurementService.measureSvgTextWidth(h),p=e.TextMeasurementService.estimateSvgTextHeight(h);n.push({isPreferred:!0,text:c,textSize:{width:d,height:p},outsideFill:s.labelColor?s.labelColor:t.NewDataLabelUtils.defaultInsideLabelColor,insideFill:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:0,parentShape:{point:{x:u.x,y:u.y},radius:u.radius,validPositions:i.validLabelPositions},fontSize:s.fontSize,identity:void 0,hasBackground:!0})}return n},i.validLabelPositions=[1,2,4,8],i}();t.MapBubbleDataPointRenderer=n;var o=function(){function i(e,t){this.values=[],this.filledMapDataLabelsEnabled=e,this.tooltipsEnabled=t}return i.getFilledMapParams=function(e,i){switch(e){case t.MapUtil.CategoryTypes.Continent:case t.MapUtil.CategoryTypes.CountryRegion:return 10>i?{level:2,maxPolygons:50,strokeWidth:0}:30>i?{level:2,maxPolygons:20,strokeWidth:0}:{level:1,maxPolygons:3,strokeWidth:0};default:return 100>i?{level:1,maxPolygons:5,strokeWidth:6}:200>i?{level:0,maxPolygons:5,strokeWidth:6}:{level:0,maxPolygons:5,strokeWidth:0}}},i.buildPaths=function(e){for(var t=[],i=0;i<e.length;i++){var a=e[i],r=a.geographic;r.length>2&&t.push(a)}return t},i.prototype.init=function(e,i,a){this.mapControl=e,this.polygonInfo=new t.MapPolygonInfo,this.root=i;var r=d3.select(i[0]);r.attr("drag-resize-disabled","true");var n=this.svg=r.append("svg").style("position","absolute").style("pointer-events","none");if(a){var o=this.clearSvg=d3.select(this.mapControl.getRootElement()).append("svg").style("position","absolute");this.clearCatcher=t.appendClearCatcher(o)}this.shapeGraphicsContext=n.append("g").classed("mapShapes",!0),this.labelBackgroundGraphicsContext=n.append("g").classed(t.NewDataLabelUtils.labelBackgroundGraphicsContextClass["class"],!0),this.labelGraphicsContext=n.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass["class"],!0),this.clearMaxShapeDimension(),this.dataLabelsSettings=t.dataLabelUtils.getDefaultMapLabelSettings()},i.prototype.beginDataPointUpdate=function(e,t){this.geocodingCategory=e,this.values=[]},i.prototype.addDataPoint=function(e){this.values.push(e)},i.prototype.clearDataPoints=function(){this.values=[]},i.prototype.getDataPointCount=function(){return _.filter(this.values,function(e){return!!e.paths}).length},i.prototype.converter=function(e,a,r,n){this.clearMaxShapeDimension(),this.dataLabelsSettings=r;for(var o=1,s=[],l=t.mapProps.general.formatString,u=0,c=this.values.length;c>u;u++){var h=a?a.categorical:null,d=this.values[u],p=d.categoryValue,g=d.paths,m=d.seriesInfo.sizeValuesForGroup,f=m&&m[0],y=void 0,v=-1,b=void 0;if(h&&h.values&&(y=h.values.grouped(),v=t.DataRoleHelper.getMeasureIndexOfRole(y,"Size"),b=h.values.source),g&&f){var C=f.value,S=f.index,x=[];b&&x.push({value:y[S].name,metadata:{source:b,values:[]}}),v>-1&&x.push({value:C,metadata:y[0].values[v]});var w=t.TooltipBuilder.createTooltipInfo(l,null,p,null,h.categories,x),D=h.categories[0],P={};P[D.source.queryName]=d.categoryIdentity;for(var L=t.SelectionId.createWithSelectorForColumnAndMeasure(P,null),N=L.getKey(),T=t.NewDataLabelUtils.createColumnFormatterCacheManager(),V=i.getIndexOfLargestShape(g),M=0,A=g.length;A>M;M++){var R=g[M],I=a&&a.categorical&&!_.isEmpty(a.categorical.values)?t.valueFormatter.getFormatString(a.categorical.values[0].source,t.filledMapProps.general.formatString):void 0;this.setMaxShapeDimension(R.absoluteBounds.width,R.absoluteBounds.height);var F=T.getOrCreate(I,r);s.push({absolutePointArray:d.paths[M].absolute,path:R.absoluteString,fill:f.fill,stroke:f.stroke,strokeWidth:o,tooltipInfo:w,identity:L,selected:!1,key:JSON.stringify({id:N,pIdx:M}),displayLabel:M===V,labeltext:p,catagoryLabeltext:null!=C?t.NewDataLabelUtils.getLabelFormattedText(F.format(C)):void 0,labelFormatString:I})}}}return n&&n.applySelectionStateToData(s),{shapeData:s}},i.prototype.updateInternal=function(e,i,a,r,n){s.removeTransform3d(this.root),this.mapData=e,this.svg&&this.svg.style("width",i.width.toString()+"px").style("height",i.height.toString()+"px"),this.clearSvg&&this.clearSvg.style("width",i.width.toString()+"px").style("height",i.height.toString()+"px"),this.polygonInfo.reCalc(this.mapControl,i.width,i.height),this.shapeGraphicsContext.attr("transform",this.polygonInfo.transformToString(this.polygonInfo.transform));var o=r&&r.hasSelection(),l=this.shapeGraphicsContext.selectAll("polygon").data(e.shapeData,function(e){return e.key});l.enter().append("polygon").classed("shape",!0).attr("points",function(e){return e.path}),l.style("fill",function(e){return e.fill}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.selected,!1,o,!1)}).style("cursor","default"),a&&l.attr("points",function(e){return e.path}),l.exit().remove(),this.updateInternalDataLabels(i,n),this.tooltipsEnabled&&(t.TooltipManager.addTooltip(l,function(e){return e.data.tooltipInfo}),l.style("pointer-events","all"));var u={shapes:l,clearCatcher:this.clearCatcher,dataPoints:e.shapeData};return u},i.prototype.getDataPointPadding=function(){return 12},i.getIndexOfLargestShape=function(e){for(var t=0,i=0,a=0,r=e.length;r>a;a++){var n=e[a],o=n.absoluteBounds.width*n.absoluteBounds.height;o>i&&(t=a,i=o)}return t},i.prototype.updateInternalDataLabels=function(i,a){var r,n=this.dataLabelsSettings;if(n&&(n.show||n.showCategory)){var o=this.createLabelDataPoints();void 0===this.labelLayout&&(this.labelLayout=new e.FilledMapLabelLayout),r=this.labelLayout.layout(o,{width:i.width,height:i.height},this.polygonInfo.transform,a)}this.drawLabelStems(this.labelGraphicsContext,r,n.show,n.showCategory),t.NewDataLabelUtils.drawLabelBackground(this.labelGraphicsContext,r,e.visuals.DefaultBackgroundColor,e.visuals.DefaultFillOpacity),t.NewDataLabelUtils.drawDefaultLabels(this.labelGraphicsContext,r,!1,n.show&&n.showCategory)},i.prototype.clearMaxShapeDimension=function(){this.maxShapeDimension=0},i.prototype.setMaxShapeDimension=function(e,t){this.maxShapeDimension=Math.max(e,this.maxShapeDimension),this.maxShapeDimension=Math.max(t,this.maxShapeDimension)},i.prototype.createLabelDataPoints=function(){var a=this.mapData,n=[];if(this.filledMapDataLabelsEnabled)for(var o=a.shapeData,s=this.dataLabelsSettings,l=0;l<o.length;l++){var u=o[l];if(u.displayLabel){var c=void 0,h=void 0,d=0,p=!1;if(this.dataLabelsSettings.show&&!this.dataLabelsSettings.showCategory){if(c=u.catagoryLabeltext,void 0===c)continue}else if(this.dataLabelsSettings.showCategory&&!this.dataLabelsSettings.show){if(c=u.labeltext,void 0===c)continue}else if(this.dataLabelsSettings.showCategory&&this.dataLabelsSettings.show){if(c=u.catagoryLabeltext,h=u.labeltext,void 0===c&&void 0===h)continue;p=!0}if(p){var g={text:h,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:t.NewDataLabelUtils.LabelTextProperties.fontSize,fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight};d=e.TextMeasurementService.measureSvgTextWidth(g)}var m={text:c,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:t.NewDataLabelUtils.LabelTextProperties.fontSize,fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},f=e.TextMeasurementService.measureSvgTextWidth(m),y=e.TextMeasurementService.estimateSvgTextHeight(m);h&&void 0!==u.labeltext&&void 0!==u.catagoryLabeltext&&(y=2*y);var v={parentType:2,parentShape:{polygon:new r(u.absolutePointArray),validPositions:i.validLabelPolygonPositions},text:c,secondRowText:h,textSize:{width:Math.max(f,d),height:y},insideFill:s.labelColor,outsideFill:s.labelColor?s.labelColor:t.NewDataLabelUtils.defaultInsideLabelColor,isPreferred:!1,identity:void 0,hasBackground:!0};n.push(v)}}return n},i.prototype.drawLabelStems=function(e,i,a,r){var n=_.filter(i,function(e){return e.isVisible}),o=function(e,t){return e.identity?e.identity.getKeyWithoutHighlight():t};t.NewDataLabelUtils.drawLabelLeaderLines(e,n,o,t.LeaderLineColor)},i.validLabelPolygonPositions=[256,2,1,8,4,16,32,64,128],i}();t.MapShapeDataPointRenderer=o;var s=function(){function a(e){this.receivedExternalViewChange=!1,this.executingInternalViewChange=!1,e.filledMap?(this.dataPointRenderer=new o(e.filledMapDataLabelsEnabled,e.tooltipsEnabled),this.filledMapDataLabelsEnabled=e.filledMapDataLabelsEnabled,this.enableGeoShaping=!0):(this.dataPointRenderer=new n(e.tooltipsEnabled),this.enableGeoShaping=!1),this.mapControlFactory=e.mapControlFactory?e.mapControlFactory:this.getDefaultMapControlFactory(),this.behavior=e.behavior,this.tooltipsEnabled=e.tooltipsEnabled,this.disableZooming=e.disableZooming,this.disablePanning=e.disablePanning,this.isLegendScrollable=!!e.behavior,this.viewChangeThrottleInterval=e.viewChangeThrottleInterval}return a.prototype.init=function(i){var a=this,r=this.element=i.element;this.pendingGeocodingRender=!1,this.currentViewport=i.viewport,this.style=i.style,this.colors=this.style.colorPalette.dataColors,this.behavior&&(this.interactivityService=t.createInteractivityService(i.host)),this.dataLabelsSettings=t.dataLabelUtils.getDefaultMapLabelSettings(),this.legend=e.visuals.createLegend(r,i.interactivity&&i.interactivity.isInteractiveLegend,this.interactivityService,this.isLegendScrollable),this.legendHeight=0,this.legendData={dataPoints:[]},this.geoTaggingAnalyzerService=e.createGeoTaggingAnalyzerService(i.host.getLocalizedString),this.host=i.host,i.host.locale&&(this.locale=i.host.locale()),this.geocoder=i.host.geocoder(),this.resetBounds(),this.mapControlFactory.ensureMap(this.locale,function(){Microsoft.Maps.loadModule("Microsoft.Maps.Overlays.Style",{callback:function(){a.initialize(r[0])}})})},a.prototype.addDataPoint=function(e){var t=e.cachedLocation;this.updateBounds(t.latitude,t.longitude),this.scheduleRedraw()},a.prototype.scheduleRedraw=function(){var e=this;!this.pendingGeocodingRender&&this.mapControl&&(this.pendingGeocodingRender=!0,setTimeout(function(){e.updateInternal(!0,!0),e.pendingGeocodingRender=!1},3e3))},a.prototype.enqueueGeoCode=function(e){var t=this;this.geocoder.geocode(e.geocodingQuery,this.geocodingCategory).then(function(i){i&&(e.cachedLocation=i,t.addDataPoint(e))})},a.prototype.enqueueGeoCodeAndGeoShape=function(e,t){var i=this;this.geocoder.geocode(e.geocodingQuery,this.geocodingCategory).then(function(a){a&&(e.cachedLocation=a,i.enqueueGeoShape(e,t))})},a.prototype.enqueueGeoShape=function(e,i){var a=this;this.geocoder.geocodeBoundary(e.cachedLocation.latitude,e.cachedLocation.longitude,this.geocodingCategory,i.level,i.maxPolygons).then(function(i){var r;0===i.locations.length||i.locations[0].geographic?r=o.buildPaths(i.locations):(t.MapUtil.calcGeoData(i),r=o.buildPaths(i.locations)),e.paths=r,a.addDataPoint(e)})},a.prototype.getOptimumLevelOfDetail=function(e,i){var a=this.dataPointRenderer.getDataPointCount();if(0===a)return t.MapUtil.MinLevelOfDetail;for(var r=this.dataPointRenderer.getDataPointPadding(),n=t.MapUtil.MaxLevelOfDetail;n>=t.MapUtil.MinLevelOfDetail;n--){var o=t.MapUtil.latLongToPixelXY(this.minLatitude,this.minLongitude,n),s=t.MapUtil.latLongToPixelXY(this.maxLatitude,this.maxLongitude,n);if(s.x-o.x+r<=e&&o.y-s.y+r<=i)return 2>a&&(n=Math.min(t.MapUtil.MaxAutoZoomLevel,n)),n}return t.MapUtil.MinLevelOfDetail},a.prototype.getViewCenter=function(e){var i=t.MapUtil.latLongToPixelXY(this.minLatitude,this.minLongitude,e),a=t.MapUtil.latLongToPixelXY(this.maxLatitude,this.maxLongitude,e);return t.MapUtil.pixelXYToLocation((i.x+a.x)/2,(a.y+i.y)/2,e)},a.prototype.resetBounds=function(){this.minLongitude=t.MapUtil.MaxAllowedLongitude,this.maxLongitude=t.MapUtil.MinAllowedLongitude,this.minLatitude=t.MapUtil.MaxAllowedLatitude,this.maxLatitude=t.MapUtil.MinAllowedLatitude},a.prototype.updateBounds=function(e,t){t<this.minLongitude&&(this.minLongitude=t),t>this.maxLongitude&&(this.maxLongitude=t),e<this.minLatitude&&(this.minLatitude=e),e>this.maxLatitude&&(this.maxLatitude=e)},a.legendObject=function(e){return e&&e.metadata&&e.metadata.objects&&e.metadata.objects.legend},a.isLegendHidden=function(e){var i=a.legendObject(e);return null!=i&&i[t.legendProps.show]===!1},a.legendPosition=function(e){var i=a.legendObject(e);return i&&t.LegendPosition[i[t.legendProps.position]]},a.getLegendFontSize=function(e){var i=a.legendObject(e);return i&&i[t.legendProps.fontSize]||t.SVGLegend.DefaultFontSizeInPt},a.isShowLegendTitle=function(e){var i=a.legendObject(e);return i&&i[t.legendProps.showTitle]},a.prototype.legendTitle=function(){var e=a.legendObject(this.dataView);return e&&e[t.legendProps.titleText]||this.legendData.title},a.prototype.renderLegend=function(e){var i=a.isLegendHidden(this.dataView),r=a.isShowLegendTitle(this.dataView),n=this.legendTitle(),o={dataPoints:i?[]:e.dataPoints,grouped:e.grouped,title:r?n:"",fontSize:a.getLegendFontSize(this.dataView)},s=a.legendPosition(this.dataView);void 0!==s?this.legend.changeOrientation(s):this.legend.changeOrientation(t.LegendPosition.Top),this.legend.drawLegend(o,this.currentViewport)},a.calculateGroupSizes=function(e,t,i,a,r){for(var n=e.values[0].values.length,o=t.length,s=0,l=n;l>s;++s){var u=null;if(a>=0)for(var c=0;o>c;++c){var h=t[c].values[a].values[s];h&&(null===u?u=h:u+=h)}i.push(u),u&&(r?(r.min=Math.min(r.min,u),r.max=Math.max(r.max,u)):r={min:u,max:u})}return r},a.createMapDataPoint=function(e,t,i,a,r,n){if(i){var o=i.latitude,s=i.longitude,l={geocodingQuery:e,location:null!==o&&null!==s?new Microsoft.Maps.Location(o,s):null,value:t,radius:a,seriesInfo:i,categoryIdentity:n,categoryValue:e};return null===l.geocodingQuery&&null===l.location?null:(l.cachedLocation=l.location,l)}return null},a.calculateSeriesLegend=function(e,i,a,r,n,o,s){for(var l=e?e.length:0,u=[],c=new t.ColorHelper(r,t.mapProps.dataPoint.fill,n),h=0;l>h;++h){var d=e[h],p=void 0,g=void 0;if(a>=0){var m=d.values[a];p=m.values[i],g=m.source.queryName}else p=null,g="";if(null!==p||0>a){var f=d.identity?t.SelectionId.createWithId(d.identity):t.SelectionId.createNull(),y=void 0!==o?c.getColorForSeriesValue(d.objects,o,d.name):c.getColorForMeasure(d.objects,g);u.push({color:y,label:t.valueFormatter.format(d.name),icon:t.LegendIcon.Circle,identity:f,selected:!1})}}return s&&s.applySelectionStateToData(u),u},a.calculateSeriesInfo=function(e,r,n,o,s,l,u,c,h){var d=null,p=null,g=[],m=e?e.length:0,f=new t.ColorHelper(l,t.mapProps.dataPoint.fill,u);if(m>0)for(var y=0;m>y;++y){var v=e[y],b=void 0,C=void 0;if(n>=0){var S=v.values[n];b=S.values[r],C=S.source.queryName}else b=null,C="";var x=c&&c[r]||v&&v.objects;if(null!==b||0>n){var w=e[y].identity,D=void 0!==h?f.getColorForSeriesValue(x,h,v.name):f.getColorForMeasure(x,C),P=i.parseColorString(D),L=i.hexString(i.darken(P,a.StrokeDarkenColorValue));P.A=.6;var _=i.rgbString(P);g.push({value:b,index:y,fill:_,stroke:L,seriesId:w})}d=a.getOptionalMeasure(v,s,r,d),p=a.getOptionalMeasure(v,o,r,p)}else{var x=c&&c[r],D=f.getColorForMeasure(x,""),P=i.parseColorString(D),L=i.hexString(i.darken(P,a.StrokeDarkenColorValue));P.A=.6;var _=i.rgbString(P);g=[{value:null,index:0,fill:_,stroke:L,seriesId:null}]}return{sizeValuesForGroup:g,latitude:d,longitude:p}},a.getOptionalMeasure=function(e,t,i,a){if(t>=0){var r=e.values[t].values[i];if(null!=r)return r}return a},a.calculateRadius=function(e,t,i){var a=6;return null!=e&&0!==t&&(a=14*((i-e.min)/t)+6),a},a.getGeocodingCategory=function(e,t){
if(e&&e.categories&&e.categories.length>0&&e.categories[0].source){var i=e.categories[0].source.type;if(i&&i.categoryString)return t.getFieldType(i.categoryString);var a=e.categories[0].source.displayName,r=t.getFieldType(a);if(r)return r;var n=e.categories[0].source.roles;if(n)for(var o=Object.keys(n),s=0,l=o.length;l>s;++s){var u=t.getFieldType(o[s]);if(u)return u}}},a.hasSizeField=function(e,t){if(_.isEmpty(e))return!1;for(var i=0,a=e.length;a>i;i++){var r=e[i].source.roles;if(!r&&i===t&&e[i].source.type.numeric)return!0;if(r)for(var n=Object.keys(r),o=0,s=n.length;s>o;o++){var l=n[o];if("Size"===l)return!0}}return!1},a.shouldEnumerateDataPoints=function(e,i){var a=t.DataRoleHelper.hasRoleInDataView(e,"Series"),r=i?"Size":"Gradient",n=t.DataRoleHelper.hasRoleInDataView(e,r);return a||!n},a.shouldEnumerateCategoryLabels=function(e,t){return!e||t},a.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder;switch(e.objectName){case"dataPoint":if(a.shouldEnumerateDataPoints(this.dataView,this.enableGeoShaping)){var r=[],n=this.hasDynamicSeries;if(!n){var o=this.dataPointRenderer.converter(this.getMapViewPort(),this.dataView,this.dataLabelsSettings,this.interactivityService);r=o.bubbleData}a.enumerateDataPoints(i,this.dataPointsToEnumerate,this.colors,n,this.defaultDataPointColor,this.showAllDataPoints,r)}break;case"categoryLabels":a.shouldEnumerateCategoryLabels(this.enableGeoShaping,this.filledMapDataLabelsEnabled)&&t.dataLabelUtils.enumerateCategoryLabels(i,this.dataLabelsSettings,!0,!0);break;case"legend":this.hasDynamicSeries&&a.enumerateLegend(i,this.dataView,this.legend,this.legendTitle());break;case"labels":if(this.filledMapDataLabelsEnabled){this.dataLabelsSettings=this.dataLabelsSettings?this.dataLabelsSettings:t.dataLabelUtils.getDefaultMapLabelSettings();var s={enumeration:i,dataLabelsSettings:this.dataLabelsSettings,show:!0,displayUnits:!0,precision:!0};t.dataLabelUtils.enumerateDataLabels(s)}}return i.complete()},a.enumerateDataPoints=function(e,t,a,r,n,o,s){var l=t&&t.length;if(r)for(var u=0;l>u;u++){var c=t[u];e.pushInstance({objectName:"dataPoint",displayName:c.label,selector:c.identity.getSelector(),properties:{fill:{solid:{color:c.color}}}})}else if(e.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:n||a.getColorByIndex(0).value}}}}).pushInstance({objectName:"dataPoint",selector:null,properties:{showAllDataPoints:!!o}}),s)for(var u=0;u<s.length;u++){var h=s[u];e.pushInstance({objectName:"dataPoint",displayName:h.labeltext,selector:h.identity.getSelector(),properties:{fill:{solid:{color:i.normalizeToHexString(h.fill)}}}})}},a.enumerateLegend=function(e,i,r,n){e.pushInstance({selector:null,properties:{show:!a.isLegendHidden(i),position:t.LegendPosition[r.getOrientation()],showTitle:a.isShowLegendTitle(i),titleText:n,fontSize:a.getLegendFontSize(i)},objectName:"legend"})},a.prototype.onDataChanged=function(i){var r=this;this.receivedExternalViewChange=!1;var n=i.dataViews[0];this.dataView=n;var s=this.enableGeoShaping;this.dataLabelsSettings=t.dataLabelUtils.getDefaultMapLabelSettings(),this.defaultDataPointColor=null,this.showAllDataPoints=null;var l=void 0;if(n){if(n.metadata&&n.metadata.objects){var u=n.metadata.objects;if(this.defaultDataPointColor=e.DataViewObjects.getFillColor(u,t.mapProps.dataPoint.defaultColor),this.showAllDataPoints=e.DataViewObjects.getValue(u,t.mapProps.dataPoint.showAllDataPoints),this.dataLabelsSettings.showCategory=e.DataViewObjects.getValue(u,t.filledMapProps.categoryLabels.show,this.dataLabelsSettings.showCategory),s){this.dataLabelsSettings.precision=e.DataViewObjects.getValue(u,t.filledMapProps.labels.labelPrecision,this.dataLabelsSettings.precision),this.dataLabelsSettings.precision=this.dataLabelsSettings.precision!==t.dataLabelUtils.defaultLabelPrecision&&this.dataLabelsSettings.precision<0?0:this.dataLabelsSettings.precision,this.dataLabelsSettings.displayUnits=e.DataViewObjects.getValue(u,t.filledMapProps.labels.labelDisplayUnits,this.dataLabelsSettings.displayUnits);var c=u.labels;c&&(this.dataLabelsSettings.show=void 0!==c.show?c.show:this.dataLabelsSettings.show,void 0!==c.color&&(this.dataLabelsSettings.labelColor=c.color.solid.color))}else{var h=u.categoryLabels;h&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(h,this.dataLabelsSettings)}}l=a.showLocationMissingWarningIfNecessary(n);var d=n.categorical;if(d&&d.categories&&d.categories.length>0){this.resetBounds();var p;d.values&&(p=d.values.grouped());var g=p&&!!d.values.source;this.hasDynamicSeries=g;var m;g?m=d.values.identityFields:d.values&&d.values.length>0&&(m=d.categories[0].identityFields);var f=t.DataRoleHelper.getMeasureIndexOfRole(p,"Size"),y=t.DataRoleHelper.getMeasureIndexOfRole(p,"X"),v=t.DataRoleHelper.getMeasureIndexOfRole(p,"Y"),b=[];this.valueScale=null,-1!==f&&(this.valueScale=a.calculateGroupSizes(d,p,b,f,this.valueScale)),this.geocodingCategory=a.getGeocodingCategory(d,this.geoTaggingAnalyzerService);var C=this.valueScale?this.valueScale.max-this.valueScale.min:0;!s||this.geocodingCategory&&this.geoTaggingAnalyzerService.isGeoshapable(this.geocodingCategory)||l.push(new t.FilledMapWithoutValidGeotagCategoryWarning),this.mapControlFactory.ensureMap(this.locale,function(){var e=a.calculateSeriesLegend(p,u,f,r.colors,r.defaultDataPointColor,m,r.interactivityService);1===e.length&&(e=[]);var t=d.categories[0].values,i=n.categorical.categories[0].identity;r.dataPointRenderer.beginDataPointUpdate(r.geocodingCategory,t.length);for(var l=n.categorical.categories[0].objects,u=0,c=t.length;c>u;u++){var h=t[u],g=b[u],S=a.calculateSeriesInfo(p,u,f,y,v,r.colors,r.defaultDataPointColor,l,m),x=a.calculateRadius(r.valueScale,C,g),w=void 0;s&&(w=o.getFilledMapParams(r.geocodingCategory,t.length));var D=a.createMapDataPoint(h,g,S,x,r.colors,i?i[u]:void 0);D&&(r.dataPointRenderer.addDataPoint(D),D.location?s&&!D.paths?r.enqueueGeoShape(D,w):r.addDataPoint(D):s?r.enqueueGeoCodeAndGeoShape(D,w):r.enqueueGeoCode(D))}var P=d.values,L=P&&P.source?P.source.displayName:"";r.legendData={title:L,dataPoints:e},r.dataPointsToEnumerate=e,r.renderLegend(r.legendData)})}else this.clearDataPoints()}else this.clearDataPoints();this.host.setWarnings(l),this.updateInternal(!0,!0)},a.prototype.swapLogoContainerChildElement=function(){var e=this.element.find(".LogoContainer");if(e){var t=e.find("a");if(null==t)return;var i=$("<div>");t.children().clone().appendTo(i),t.remove(),i.appendTo(e)}},a.showLocationMissingWarningIfNecessary=function(e){var i=e.metadata;if(i&&i.columns){for(var a=i.columns,r=!1,n=0;n<a.length;n++)t.DataRoleHelper.hasRole(a[n],"Category")&&(r=!0);if(!r)return[new t.NoMapLocationWarning]}return[]},a.prototype.onResizing=function(e){(this.currentViewport.width!==e.width||this.currentViewport.height!==e.height)&&(this.currentViewport=e,this.renderLegend(this.legendData),this.updateInternal(!1,!1))},a.prototype.initialize=function(e){var i=this,r={credentials:t.MapUtil.Settings.BingKey,showMapTypeSelector:!1,enableClickableLogo:!1,enableSearchLogo:!1,mapTypeId:Microsoft.Maps.MapTypeId.road,customizeOverlays:!0,showDashboard:!1,showScalebar:!1,disableKeyboardInput:!0,disableZooming:this.disableZooming,disablePanning:this.disablePanning},n=this.root=InJs.DomFactory.div().addClass(a.MapContainer.cssClass).appendTo(e);this.mapControl=this.mapControlFactory.createMapControl(n[0],r),void 0!==this.viewChangeThrottleInterval?Microsoft.Maps.Events.addThrottledHandler(this.mapControl,"viewchange",function(){i.onViewChanged()},this.viewChangeThrottleInterval):Microsoft.Maps.Events.addHandler(this.mapControl,"viewchange",function(){i.onViewChanged()}),Microsoft.Maps.Events.addHandler(this.mapControl,"viewchangeend",function(){i.onViewChangeEnded()}),this.dataPointRenderer.init(this.mapControl,n,!!this.behavior),this.pendingGeocodingRender||this.updateInternal(!0,!0)},a.prototype.onViewChanged=function(){this.executingInternalViewChange?this.executingInternalViewChange=!1:this.receivedExternalViewChange=!0,this.updateOffsets(!1,!1),this.behavior&&this.behavior.viewChanged(),this.swapLogoContainerChildElement()},a.prototype.onViewChangeEnded=function(){this.dataPointRenderer.updateInternalDataLabels(this.currentViewport,!0)},a.prototype.getMapViewPort=function(){var e=this.currentViewport,t=this.legend.getMargins(),i={width:e.width-t.width,height:e.height-t.height};return i},a.removeTransform3d=function(e){var t=window.navigator.userAgent.toLowerCase();if(e&&-1===t.indexOf("applewebkit")){var i=e.find("img");i.css("transform","")}},a.prototype.updateInternal=function(e,t){if(this.mapControl){var i=this.legend.isVisible();i||(this.legendData={dataPoints:[]});var r=this.element.children(a.MapContainer.selector),n=this.getMapViewPort();r.height(n.height),r.width(n.width),this.updateOffsets(e,t);var o=this.getOptimumLevelOfDetail(n.width,n.height),s=this.getViewCenter(o);this.receivedExternalViewChange&&this.interactivityService||(this.executingInternalViewChange=!0,this.mapControl.setView({center:s,zoom:o,animate:!0}))}},a.prototype.updateOffsets=function(e,i){var a,r=this.dataView,n=this.getMapViewPort();a=r&&r.categorical?this.dataPointRenderer.converter(n,this.dataView,this.dataLabelsSettings,this.interactivityService):{bubbleData:[],shapeData:[],sliceData:[]};var o=this.dataPointRenderer.updateInternal(a,n,e,this.interactivityService,i);t.Legend.positionChartArea(d3.select(this.root[0]),this.legend),this.interactivityService&&o&&this.interactivityService.bind(o.dataPoints,this.behavior,o)},a.prototype.onClearSelection=function(){this.interactivityService.clearSelection(),this.updateOffsets(!1,!1)},a.prototype.clearDataPoints=function(){this.dataPointRenderer.clearDataPoints(),this.legend.drawLegend({dataPoints:[]},this.currentViewport)},a.prototype.getDefaultMapControlFactory=function(){return{createMapControl:function(e,t){return new Microsoft.Maps.Map(e,t)},ensureMap:jsCommon.ensureMap}},a.MapContainer={cssClass:"mapControl",selector:".mapControl"},a.StrokeDarkenColorValue=63.75,a}();t.Map=s}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(e){e.append("div").classed("imgCon",!0).append("img")}function a(e,t){e.selectAll(".imgCon").style({height:r(t.maxHeight)}).selectAll("img").style({"max-height":r(t.maxHeight),"max-width":r(t.maxWidth)})}function r(e){return e+"px"}var n=e.visuals.KpiUtil.getKpiImageMetadata,o=jsCommon.CssConstants.createClassAndSelector,s=jsCommon.PixelConverter,l="wf_segoe-ui_semibold",u="wf_segoe-ui_normal",c=10,h=13,d=9,p="#767676",g="#333333",m=function(){function m(){this.isInteractivityOverflowHidden=!1}return m.prototype.init=function(e){this.options=e,this.style=e.style;var t=this.currentViewport=e.viewport,i=this.interactivity=e.interactivity;i&&"hidden"===i.overflow&&(this.isInteractivityOverflowHidden=!0);var a=this.element=$("<div/>").addClass(m.MultiRowCardRoot["class"]).css({height:r(t.height)});e.element.append(a),this.initializeCardRowSelection()},m.prototype.onDataChanged=function(i){var a=i.dataViews;if(a&&a.length>0){var r=this.dataView=a[0],n=r.table.columns,o=r.table.rows,s=i.operationKind!==e.VisualDataChangeOperationKind.Append,l=this.data=m.converter(r,n.length,o.length,this.isInteractivityOverflowHidden);this.setCardDimensions(),this.listView.data(l.dataModel,function(e){return l.dataModel.indexOf(e)},s)}else this.data={dataModel:[],cardTitleSettings:t.dataLabelUtils.getDefaultLabelSettings(!0,p,h),categoryLabelsSettings:t.dataLabelUtils.getDefaultLabelSettings(!0,g,d),dataLabelsSettings:t.dataLabelUtils.getDefaultLabelSettings(!0,g,c)};this.waitingForData=!1},m.prototype.onResizing=function(e){var t=this.currentViewport.height===e.height;if(this.currentViewport=e,this.element.css("height",r(e.height)),this.dataView){var i=this.maxColPerRow;this.maxColPerRow=this.getMaxColPerRow();var a=i===this.maxColPerRow;t&&a||this.listView.viewport(e)}},m.converter=function(i,a,r,o){void 0===o&&(o=!1);var s,l,u,f=[],y=i.table.rows,v=i.table.columns;if(s=t.dataLabelUtils.getDefaultLabelSettings(!0,p,h),l=t.dataLabelUtils.getDefaultLabelSettings(!0,g,c),u=t.dataLabelUtils.getDefaultLabelSettings(!0,g,d),i.metadata&&i.metadata.objects){var b=e.DataViewObjects.getObject(i.metadata.objects,"cardTitle");t.dataLabelUtils.updateLabelSettingsFromLabelsObject(b,s);var C=e.DataViewObjects.getObject(i.metadata.objects,"dataLabels");t.dataLabelUtils.updateLabelSettingsFromLabelsObject(C,l);var S=e.DataViewObjects.getObject(i.metadata.objects,"categoryLabels");t.dataLabelUtils.updateLabelSettingsFromLabelsObject(S,u)}for(var x=0,w=r;w>x;x++){for(var D=y[x],P=void 0,L=void 0,_=!1,N=!1,T=!1,V=[],M=0;a>M;M++){var A=v[M],R=n(A,D[M]),I=void 0,F=void 0;R&&(I=R["class"],F=R.statusGraphic),I||(I=t.valueFormatter.format(D[M],t.valueFormatter.getFormatString(A,m.formatStringProp)));var O=void 0!==R&&void 0!==R.caption,G=v[M].displayName;o||A.type.numeric||(void 0===P?(P=!0,L=I,_=t.UrlHelper.isValidUrl(A,L),N=t.UrlHelper.isValidImage(A,I),T=O):P&&(P=!1)),V.push({caption:I,details:G,showURL:t.UrlHelper.isValidUrl(A,I),showImage:t.UrlHelper.isValidImage(A,I),showKPI:O,columnIndex:M})}f.push({title:P?L:void 0,showTitleAsURL:_,showTitleAsImage:N,showTitleAsKPI:T,cardItemsData:P?V.filter(function(e){return e.caption!==L}):V})}return{dataModel:f,cardTitleSettings:s,categoryLabelsSettings:u,dataLabelsSettings:l}},m.prototype.initializeCardRowSelection=function(){var n=this,o=this.isInteractivityOverflowHidden,l=function(e){var t=e.append("div").classed(m.Card["class"],!0);o?t.classed("mrtile",!0):n.cardHasTitle&&t.append("div").classed(m.Title["class"],!0).each(function(e){e.showTitleAsImage?i(d3.select(this)):e.showTitleAsURL?d3.select(this).append("a"):e.showTitleAsKPI&&d3.select(this).append("div").classed(m.KPITitle["class"],!0).classed(e.title,!0).style({display:"inline-block",verticalAlign:"sub"})});var a=t.selectAll(m.CardItemContainer.selector).data(function(e){return e.cardItemsData}).enter().append("div").classed(m.CardItemContainer["class"],!0);a.append("div").classed(m.Caption["class"],!0).each(function(e){e.showURL?d3.select(this).append("a"):e.showImage?i(d3.select(this)):e.showKPI&&d3.select(this).append("div").classed(e.caption,!0).style({display:"inline-block",verticalAlign:"sub"})}),a.append("div").classed(m.Details["class"],!0)},u=function(t){var i=n.getStyle(),l=e.TextMeasurementService.estimateSvgTextHeight(m.getTextProperties(!1,i.caption.fontSize)),u=e.TextMeasurementService.estimateSvgTextHeight(m.getTextProperties(!1,i.details.fontSize)),c=e.TextMeasurementService.estimateSvgTextHeight(m.getTextProperties(!0,i.title.fontSize));!o&&n.cardHasTitle&&(t.selectAll(m.Title.selector).filter(function(e){return!e.showTitleAsImage&&!e.showTitleAsKPI}).style({"font-size":s.fromPoint(i.title.fontSize),"line-height":s.toString(c),color:i.title.color}),t.selectAll(m.Title.selector).filter(function(e){return!e.showTitleAsURL&&!e.showTitleAsImage&&!e.showTitleAsKPI}).text(function(e){return e.title}).attr("title",function(e){return e.title}),t.selectAll(m.TitleUrlSelector).text(function(e){return e.title}).attr({href:function(e){return e.title},target:"_blank"}),t.selectAll(m.TitleImageSelector).attr("src",function(e){return e.title}),a(t.selectAll(m.Title.selector),i.imageTitle),t.selectAll(m.KPITitle.selector).each(function(e){var t=d3.select(this);t.classed(e.title)}));var h=t.selectAll(m.Card.selector);h.selectAll(m.Caption.selector).filter(function(e){return!(e.showImage||e.showKPI)}).style({"line-height":s.toString(l),"font-size":s.fromPoint(i.caption.fontSize),color:i.caption.color}).filter(function(e){return!e.showURL}).text(function(e){return e.caption}).attr("title",function(e){return e.caption}),h.selectAll(m.CaptionImageSelector).attr("src",function(e){return e.caption}).style(i.imageCaption),h.selectAll(m.CardItemContainer.selector).style({"padding-right":function(e){return n.isLastRowItem(e.columnIndex,n.dataView.metadata.columns.length)?"0px":r(i.cardItemContainer.paddingRight)},width:function(e){return n.getColumnWidth(e.columnIndex,n.dataView.metadata.columns.length)},display:function(e){return n.hideColumn(e.columnIndex)?"none":"inline-block"}}),a(h.selectAll(m.Caption.selector),i.imageCaption),h.selectAll(m.CaptionUrlSelector).attr({href:function(e){return e.caption},target:"_blank"}).text(function(e){return e.caption}),i.details.isVisible&&h.selectAll(m.Details.selector).text(function(e){return e.details}).style({"font-size":s.fromPoint(i.details.fontSize),"line-height":s.toString(u),color:i.details.color}).attr("title",function(e){return e.details}),h.style("margin-bottom",o?"0px":n.isSingleRowCard?"0px":r(i.card.marginBottom))},c=function(e){e.remove()},h={rowHeight:void 0,enter:l,exit:c,update:u,loadMoreData:function(){return n.onLoadMoreData()},viewport:this.currentViewport,baseContainer:d3.select(this.element.get(0)),scrollEnabled:!this.isInteractivityOverflowHidden};this.listView=t.ListViewFactory.createListView(h)},m.prototype.getMaxColPerRow=function(){var e=this.currentViewport.width,t=this.getStyle().cardItemContainer.minWidth,i=this.dataView.metadata.columns.length,a=Math.floor(e/t)||1;return Math.min(i,a)},m.prototype.getRowIndex=function(e){return Math.floor(1*e/this.getMaxColPerRow())},m.prototype.getStyle=function(){var e=this.getOverridenStyle();if(!this.isInteractivityOverflowHidden)return $.extend(!0,{},e);for(var t=this.currentViewport.width,i={},a=0,r=m.tileMediaQueries;a<r.length;a++){var n=r[a];if(t<=n.maxWidth){i=n.style;break}}return $.extend(!0,{},e,i)},m.prototype.getOverridenStyle=function(){var e=m.DefaultStyle,t=this.data.dataLabelsSettings,i=this.data.categoryLabelsSettings,a=this.data.cardTitleSettings,r={caption:{fontSize:t.fontSize,color:t.labelColor},title:{fontSize:a.fontSize,color:a.labelColor},details:{fontSize:i.fontSize,color:i.labelColor,isVisible:i.show}};return $.extend(!0,r,e)},m.getTextProperties=function(e,t){return{fontFamily:e?l:u,fontSize:s.fromPoint(t)}},m.prototype.hideColumn=function(e){var t=this.getRowIndex(e),i=this.getStyle().card.maxRows;return i&&t>=i},m.prototype.getColumnWidth=function(e,t){var i=this.getMaxColPerRow();if(i>=t)return 100/t+"%";var a=this.getRowIndex(e),r=Math.ceil(1*t/i),n=t%i;return r>a||0===n?100/i+"%":100/n+"%"},m.prototype.isLastRowItem=function(e,t){if(e+1===t)return!0;var i=this.getMaxColPerRow();return i-e%i===1?!0:!1},m.prototype.setCardDimensions=function(){this.cardHasTitle=!1;var e=this.data.dataModel;!this.isInteractivityOverflowHidden&&e&&e.length>0&&(this.cardHasTitle=void 0!==e[0].title,this.isSingleRowCard=1===e.length?!0:!1)},m.prototype.onLoadMoreData=function(){!this.waitingForData&&this.dataView.metadata&&this.dataView.metadata.segment&&(this.options.host.loadMoreData(),this.waitingForData=!0)},m.getDataLabelSettingsOptions=function(e,t,i){return void 0===i&&(i=!1),{enumeration:e,dataLabelsSettings:t,show:i,fontSize:!0}},m.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder,a=this.data.cardTitleSettings,r=this.data.dataLabelsSettings,n=this.data.categoryLabelsSettings;switch(e.objectName){case"cardTitle":!this.isInteractivityOverflowHidden&&this.cardHasTitle&&t.dataLabelUtils.enumerateDataLabels(m.getDataLabelSettingsOptions(i,a));break;case"dataLabels":t.dataLabelUtils.enumerateDataLabels(m.getDataLabelSettingsOptions(i,r));break;case"categoryLabels":t.dataLabelUtils.enumerateDataLabels(m.getDataLabelSettingsOptions(i,n,!0))}return i.complete()},m.formatStringProp={objectName:"general",propertyName:"formatString"},m.MultiRowCardRoot=o("multiRowCard"),m.Card=o("card"),m.Title=o("title"),m.CardItemContainer=o("cardItemContainer"),m.Caption=o("caption"),m.Details=o("details"),m.TitleUrlSelector=m.Title.selector+" a",m.CaptionUrlSelector=m.Caption.selector+" a",m.TitleImageSelector=m.Title.selector+" img",m.CaptionImageSelector=m.Caption.selector+" img",m.KPITitle=o("kpiTitle"),m.DefaultStyle={card:{marginBottom:20},cardItemContainer:{paddingRight:20,minWidth:120},imageCaption:{maxHeight:75,maxWidth:100},imageTitle:{maxHeight:75,maxWidth:100}},m.tileMediaQueries=[{maxWidth:250,style:{card:{maxRows:2},cardItemContainer:{minWidth:110},imageCaption:{maxHeight:45}}},{maxWidth:490,style:{card:{maxRows:2},cardItemContainer:{minWidth:130},imageCaption:{maxHeight:52}}},{maxWidth:750,style:{card:{maxRows:1},cardItemContainer:{minWidth:120},imageCaption:{maxHeight:53}}}],m}();t.MultiRowCard=m}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.CssConstants.createClassAndSelector,a=jsCommon.StringExtensions,r=jsCommon.Utility,n=function(){function e(){}return e.prototype.init=function(e){this.element=e.element,this.host=e.host,this.viewport=e.viewport,this.element.addClass("richtextbox"),this.element.css({"font-family":s.defaultFont,"font-size":s.defaultFontSize}),this.readOnly=0===this.host.getViewMode(),this.paragraphs=[],this.refreshView()},e.prototype.onResizing=function(e){this.viewport=e,this.updateSize()},e.prototype.onDataChanged=function(e){var t=e.dataViews;if(this.paragraphs=[],t&&t.length>0){var i=t[0].metadata.objects;i&&i.general&&(this.paragraphs=i.general.paragraphs)}this.refreshView()},e.prototype.destroy=function(){},e.prototype.focus=function(){return this.editor?(this.editor.focus(),!0):void 0},e.prototype.onViewModeChanged=function(e){this.readOnly=0===e,this.refreshView()},e.prototype.setSelection=function(e,t){this.editor&&this.editor.setSelection(e,t)},e.prototype.refreshView=function(){var e=this;this.readOnly?(this.editor&&(this.editor.formatUrls(),this.saveContents(),this.editor.destroy(),this.editor=null),this.element.empty(),this.element.append(o.convertParagraphsToHtml(this.paragraphs))):(this.editor||(this.editor=new s.QuillWrapper(this.readOnly,this.host),this.editor.textChanged=function(t,i){return e.saveContents()},this.element.empty(),this.element.append(this.editor.getElement())),this.editor.setContents(o.convertParagraphsToOps(this.paragraphs))),this.updateSize()},e.prototype.saveContents=function(){if(this.editor){var e=this.editor.getContents();this.paragraphs=o.convertDeltaToParagraphs(e);var t=[{objectName:"general",properties:{paragraphs:this.paragraphs},selector:null}];this.host.persistProperties(t)}},e.prototype.updateSize=function(){this.editor&&this.editor.resize(this.viewport)},e}();t.Textbox=n;var o;!function(e){function t(e){for(var t=[],i={textRuns:[]},a=0,r=e.ops.length;r>a;a++){var n=e.ops[a];if("string"==typeof n.insert){var s=n.insert,l=n.attributes;l&&l.align&&(i.horizontalTextAlignment=l.align);var u=0,c=0,h=void 0;do{if(c=s.indexOf("\n",u),0>c?(h=!1,c=s.length):h=!0,c-u>0){var d=s.substring(u,c),p={value:d};if(l){void 0!==l.link&&jsCommon.Utility.isValidUrl(l.link)&&(p.url=l.link);var g=o(l);g&&(p.textStyle=g)}i.textRuns.push(p)}h&&(0===i.textRuns.length&&i.textRuns.push({value:""}),t.push(i),i={textRuns:[]}),u=c+1}while(u<s.length)}}return i.textRuns.length>0&&i.textRuns[0].value.length>0&&t.push(i),t}function i(e){for(var t=$(),i=0,a=e.length;a>i;++i){var r=e[i],n=!0,o=$("<div>");r.horizontalTextAlignment&&o.css("text-align",r.horizontalTextAlignment);for(var u=0,c=r.textRuns.length;c>u;++u){var h=r.textRuns[u],d=$("<span>"),p=h.textStyle;if(p){var g={};p.fontFamily&&(g["font-family"]=s.getFontFamily(l(p.fontFamily))),p.fontSize&&(g["font-size"]=p.fontSize),p.fontStyle&&(g["font-style"]=p.fontStyle),p.fontWeight&&(g["font-weight"]=p.fontWeight),p.textDecoration&&(g["text-decoration"]=p.textDecoration),d.css(g)}var m=h.value;if(_.isEmpty(m)||(n=!1),void 0!==h.url){var f=void 0;f=jsCommon.Utility.isValidUrl(h.url)?$("<a>").attr("href",h.url).attr("target","_blank").text(m):$("<span>").text(m),d.append(f)}else d.text(m);o.append(d)}n&&o.append($("<br>")),t=t.add(o)}return t}function n(e){for(var t=[],i=0,n=e.length;n>i;++i)for(var o=e[i],u=0,c=o.textRuns.length;c>u;++u){var h=o.textRuns[u],d={};o.horizontalTextAlignment&&(d.align=o.horizontalTextAlignment);var p=h.textStyle;p&&(p.fontFamily&&(d.font=s.getFontFamily(l(p.fontFamily))),p.fontSize&&(d.size=p.fontSize),d.italic="italic"===p.fontStyle,d.bold="bold"===p.fontWeight,d.underline="underline"===p.textDecoration);var g=h.value;h.url&&r.isValidUrl(h.url)&&(d.link=h.url);var m={insert:g,attributes:d};t.push(m),u!==c-1||a.endsWith(g,"\n")||t.push({insert:"\n",attributes:d})}return t}function o(e){var t={};return e.bold&&(t.fontWeight="bold"),e.font&&(t.fontFamily=l(e.font)),e.italic&&(t.fontStyle="italic"),e.size&&(t.fontSize=e.size),e.underline&&(t.textDecoration="underline"),t}function l(e){return a.startsWith(e,"'")?e.slice(1,e.length-1):e}e.convertDeltaToParagraphs=t,e.convertParagraphsToHtml=i,e.convertParagraphsToOps=n}(o||(o={}));var s;!function(t){function r(e){var t=n[e];return null==t&&(t=e),a.startsWith(t,"'")||(t="'"+t+"'"),t}var n={"Segoe (Bold)":"wf_segoe-ui_bold","Segoe UI":"wf_segoe-ui_normal","Segoe UI Light":"wf_segoe-ui_light",Heading:"wf_segoe-ui_light",Body:"wf_segoe-ui_normal"},o=["Arial","Arial Black","Arial Unicode MS","Calibri","Cambria","Cambria Math","Candara","Comic Sans MS","Consolas","Constantia","Corbel","Courier New","Georgia","Lucida Sans Unicode","Segoe (Bold)","Segoe UI","Segoe UI Light","Symbol","Tahoma","Times New Roman","Trebuchet MS","Verdana","Wingdings","Wingdings 2","Wingdings 3"].map(function(e){return{label:e,value:r(e)}});t.defaultFont=r("Segoe UI Light");var s=["8","9","10","10.5","11","12","14","16","18","20","24","28","32","36","40","42","44","54","60","66","72","80","88","96"].map(function(e){return{label:e,value:e+"px"}});t.defaultFontSize="14px";var l=["Left","Center","Right"].map(function(e){return{label:e,value:e.toLowerCase()}});t.getFontFamily=r;var u=function(){function i(e,t){var a=this;this.QuillPackage={javaScriptFiles:i.quillJsFiles,cssFiles:i.quillCssFiles},this.textChanged=function(e,t){},this.host=t,this.$container=$("<div>"),this.readOnly=e,this.localizationProvider={get:function(e){return a.host.getLocalizedString(e)}},this.dependenciesLoaded=$.Deferred(),i.loadQuillResources?(this.initialized=!1,this.dependenciesLoaded.done(function(){a.rebuildQuillEditor(),a.initialized=!0}),jsCommon.requires(this.QuillPackage,function(){return a.dependenciesLoaded.resolve()})):(this.rebuildQuillEditor(),this.initialized=!0,this.dependenciesLoaded.resolve())}return i.prototype.addModule=function(e,t){return this.editor?this.editor.addModule(e,t):void 0},i.prototype.getElement=function(){return this.$container},i.prototype.getContents=function(){return this.initialized?this.editor.getContents():void 0},i.prototype.setContents=function(e){var t=this;return this.initialized?(this.editor.setHTML("","api"),e&&this.editor.setContents(e,"api"),void this.formatUrls()):void this.dependenciesLoaded.done(function(){return t.setContents(e)})},i.prototype.resize=function(e){this.$container.width(e.width),this.$container.height(e.height)},i.prototype.setReadOnly=function(e){var t=e!==this.readOnly;this.readOnly=e,this.initialized&&t&&this.rebuildQuillEditor()},i.prototype.formatUrls=function(){if(null!=this.editor){for(var e=this.editor.getText(),t=jsCommon.Utility.findAllValidUrls(e),i=0;i<t.length;i++){var a=t[i];this.editor.formatText(a.start,a.end,"link",!1,"api"),this.editor.formatText(a.start,a.end,"link",a.text,"api")}this.editor.emit(Quill.events.SELECTION_CHANGE,this.getSelection(),"api")}},i.prototype.setSelection=function(e,t){this.editor&&this.editor.setSelection(e,t,"api")},i.prototype.getSelection=function(){return this.editor?this.editor.getSelection():void 0},i.prototype.focus=function(){this.editor&&0===$(document.activeElement).closest(this.$container).length&&this.editor.focus()},i.prototype.destroy=function(){this.host.setToolbar(null),this.$container.remove(),this.$container=null,this.$toolbarDiv=null,this.$editorDiv=null,this.editor=null},i.prototype.getSelectionAtCursor=function(){var e=this.getTextWithoutTrailingBreak();this.editor.focus();var t=this.getSelection();return t&&t.start===t.end?jsCommon.WordBreaker.find(t.start,e):t},i.prototype.getWord=function(){var e=this.getSelectionAtCursor();return this.getTextWithoutTrailingBreak().slice(e.start,e.end)},i.prototype.insertLinkAtCursor=function(e,t){var i=t+e.length;return this.editor.insertText(t,e,"api"),this.editor.formatText(t,i,"link",e,"api"),this.setSelection(t,i),i},i.prototype.getEditorContainer=function(){return this.editor?$(this.editor.container):void 0},i.prototype.getTextWithoutTrailingBreak=function(){return this.editor.getText().slice(0,-1)},i.prototype.rebuildQuillEditor=function(){var e=this,a=null;this.editor&&(this.editor.removeAllListeners(),a=this.editor.getContents()),this.$container.empty(),this.$container.keydown(function(e){e.ctrlKey&&_.contains(i.preventDefaultKeys,e.which)&&e.stopPropagation()});var r=this.$editorDiv=$("<div>");r.css("font-family",t.defaultFont),r.css("font-size",t.defaultFontSize);var n={readOnly:this.readOnly,formats:["bold","italic","underline","font","size","link","align"],styles:!1};if(this.editor=new Quill(r.get(0),n),!this.readOnly){var o=this.$toolbarDiv;o||(this.$toolbarDiv=o=c.buildToolbar(this,this.localizationProvider)),o.addClass("unselectable"),this.host.setToolbar(o),this.editor.addModule("toolbar",{container:o.get(0)}),r.attr("drag-resize-disabled","true")}this.$container.append(r),a&&this.setContents(a);var s=new jsCommon.ThrottleUtility(i.textChangeThrottle);this.editor.on("text-change",function(t,i){"api"!==i&&s.run(function(){return e.onTextChanged(t,i)})});var l=new jsCommon.ThrottleUtility(i.formatUrlThrottle);this.editor.on("text-change",function(t,i){"api"!==i&&l.run(function(){return e.formatUrls()})}),this.editor.root.addEventListener("blur",function(t){var i=t.relatedTarget||document.activeElement;i&&"SELECT"===i.tagName||"INPUT"===i.tagName||i.getAttribute("contentEditable")||e.setSelection(null,null)},!1)},i.prototype.onTextChanged=function(e,t){this.textChanged(e,t)},i.textChangeThrottle=200,i.formatUrlThrottle=1e3,i.preventDefaultKeys=[jsCommon.DOMConstants.aKeyCode,jsCommon.DOMConstants.cKeyCode,jsCommon.DOMConstants.xKeyCode,jsCommon.DOMConstants.vKeyCode],i.loadQuillResources=!0,i.quillJsFiles=[e.build+"/externals/quill.min.js"],i.quillCssFiles=[e.build+"/externals/quill.base.css"],i}();t.QuillWrapper=u;var c;!function(e){function a(e,i){var a=u(i);e.addModule("link-tooltip",{template:a});var r=C(e,v("Link",i),i.get("RichTextbox_Link_DefaultText")),n=m(v("Font",i),o,"font",t.defaultFont,function(e,t){return e.css("font-family",t.value),e}),p=d().addClass("toolbar ql-toolbar").append(c().append(h(i.get("RichTextbox_Font_Label"))).append(n).append(m(v("Size",i),s,"size",t.defaultFontSize))).append(c().append(y(v("Bold",i),"bold")).append(y(v("Italic",i),"italic")).append(y(v("Underline",i),"underline"))).append(c().append(g("Text Alignment",l,"align","Left",i))).append(r);return p.on("mousedown",function(e){var t=e.target||document.activeElement;"INPUT"!==t.tagName&&"SELECT"!==t.tagName&&e.preventDefault()}),p}function r(e,t){e.val(t);var i=document.createEvent("UIEvent");i.initUIEvent("change",!1,!1,null,0),e.get(0).dispatchEvent(i)}function n(e,t){return $('\n                        <a href="#" class="url" target="_blank"></a>\n                        <input class="input" type="text">\n                        <span class="bar">&nbsp;|&nbsp;</span>\n                        <a class="change"></a>\n                        <a class="remove">'+e+'</a>\n                        <a class="done">'+t+"</a>\n                    ")}function u(e){var t=d(),i=e.get("RichTextbox_Link_Done"),a=e.get("RichTextbox_Link_Remove");return t.append(n(a,i)),t.html()}function c(){return p().addClass("ql-format-group").attr("drag-resize-disabled","true")}function h(e){return $("<label>").text(e)}function d(){return $("<div>")}function p(){return $("<span>")}function g(e,t,i,a,n){var o=v(e,n),s=p().attr("title",o).addClass("ql-toggle-group"),l=f(o,t,a).addClass("ql-picker ql-"+i).css("display","none"),u=t.map(function(e){
var t=y(v(e.label,n),"align"+e.value).attr("data-value",e.value).click(function(t){return r(l,e.value)});return t});return l.change(function(e){for(var t=l.val(),i=0;i<u.length;i++)u[i].toggleClass("ql-active",u[i].attr("data-value")===t)}),s.append(l),s.append(u),s}function m(e,t,i,a,r){var n=f(e,t,a,r).addClass("ql-picker ql-"+i);return n}function f(e,t,i,a){for(var r=$("<select>").attr("title",e),n=0;n<t.length;n++){var o=t[n],s=$("<option>").attr("value",o.value).text(o.label);o.value===i&&s.attr("selected","selected"),void 0!==a&&(s=a(s,o)),r.append(s)}return r}function y(e,t){var i=p().addClass("ql-format-button");return null!=e&&i.attr("title",e),null!=t&&(i.addClass("ql-"+t),i.addClass("powervisuals-glyph "+t)),i}function v(e,t){return t.get("RichTextbox_"+e+"_ToolTip")}function b(e){e.removeClass("editing"),e.removeClass("blank-editing"),e.find(".input").val(S)}function C(t,i,a){var r=t.getEditorContainer().find(e.selectors.linkTooltip.selector),n=c().addClass(e.selectors.toolbarUrlInput["class"]).append(y(i,"link").append("<div>")).append(r);return n.on("keydown mousedown",function(e){if(e.keyCode===jsCommon.DOMConstants.enterKeyCode||e.target.classList.contains("done")){if(!r.hasClass("blank-editing"))return!0;var i=n.find(".input").val(),a=t.getSelectionAtCursor(),o=t.getWord();if(!o){var s=t.insertLinkAtCursor(i,a.start);return b(r),t.setSelection(s,s),!1}}}),n.find(".input").blur(function(e){var t=e.relatedTarget;(null===t||t&&!t.classList.contains("done"))&&b(r)}),n.find(".ql-link div").click(function(e){var i=e.target.parentElement;if(i&&i.classList.contains("ql-active"))return n.find(".change")[0].click(),!1;var a=t.getWord();if(!a){r.addClass("editing blank-editing");var o=n.find(".input").get(0);return o.value=S,o.selectionStart=o.selectionEnd=S.length,o.focus(),!1}}).mousedown(function(e){var i=e.target.parentElement;if(i&&!i.classList.contains("ql-active")){var a=t.getSelectionAtCursor();t.setSelection(a.start,a.end)}}),n}var S="http://";e.selectors={linkTooltip:i("ql-link-tooltip"),toolbarUrlInput:i("toolbar-url-input")},e.buildToolbar=a,e.setSelectValue=r}(c||(c={}))}(s=t.RichText||(t.RichText={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=t.utility.SelectionManager;t.cheerMeterProps={dataPoint:{defaultColor:{objectName:"dataPoint",propertyName:"defaultColor"},fill:{objectName:"dataPoint",propertyName:"fill"}}};var a=function(){function a(){this.isFirstTime=!0}return a.converter=function(i){if(!i.categorical||!i.categorical.categories)return null;var r=i.categorical.categories[0];if(!r)return null;var n=r.values;if(!n||_.isEmpty(i.categorical.values))return null;var o=i.categorical.values[0].values,s=i.categorical.categories[0].objects,l=s&&s.length>0?s[0]:void 0,u=s&&s.length>1?s[1]:void 0,c=i.metadata.objects,h=a.DefaultBackgroundColor;if(c){var d=c.general;if(d){var p=d.fill;p&&(h=p.solid.color)}}var g=e.DataViewObjects.getFillColor(l,t.cheerMeterProps.dataPoint.fill,a.DefaultFontColor),m=e.DataViewObjects.getFillColor(u,t.cheerMeterProps.dataPoint.fill,a.DefaultFontColor),f=t.SelectionIdBuilder.builder().withCategory(r,0).createSelectionId(),y=t.SelectionIdBuilder.builder().withCategory(r,1).createSelectionId(),v={teamA:{name:n[0],value:o[0],color:g,identity:f},teamB:{name:n[1],value:o[1],color:m,identity:y},background:h};return v},a.prototype.init=function(e){this.selectionManager=new i({hostServices:e.host});var t=this.svg=d3.select(e.element.get(0)).append("svg");this.textOne=t.append("text").style("font-family",a.DefaultFontFamily),this.textTwo=t.append("text").style("font-family",a.DefaultFontFamily)},a.prototype.update=function(e){if(e.dataViews[0]){var i=this.data=a.converter(e.dataViews[0]);if(i){var r=e.suppressAnimations?0:t.AnimatorCommon.MinervaAnimationDuration;this.draw(i,r,e.viewport)}}},a.prototype.getRecomendedFontProperties=function(t,i,r){for(var n,o={fontSize:"",fontFamily:a.DefaultFontFamily,text:t+i},s=1,l=1e3,u=r.width,c=0;l>=s;)if(n=(s+l)/2|0,o.fontSize=n+"px",c=e.TextMeasurementService.measureSvgTextWidth(o),u>c)s=n+1;else{if(!(c>u))break;l=n-1}return o.fontSize=n+"px",c=e.TextMeasurementService.measureSvgTextWidth(o),c>u&&(n--,o.fontSize=n+"px"),o},a.prototype.calculateLayout=function(t,i){var r=t.teamA.name,n=t.teamB.name,o={height:i.height,width:i.width-a.PaddingBetweenText},s=this.getRecomendedFontProperties(r,n,o);s.text=r;var l=0|e.TextMeasurementService.measureSvgTextWidth(s);s.text=n;var u=0|e.TextMeasurementService.measureSvgTextWidth(s),c=(i.width-l-u-a.PaddingBetweenText)/2|0;s.text=r+n;var h=0|e.TextMeasurementService.measureSvgTextHeight(s),d=t.teamA.value+t.teamB.value,p=i.height-h,g=(d-t.teamA.value)/d*p+h/2|0,m=(d-t.teamB.value)/d*p+h/2|0;return{x1:c,x2:c+l+a.PaddingBetweenText,y1:g,y2:m,fontSize:s.fontSize}},a.prototype.ensureStartState=function(e,t){if(this.isFirstTime){this.isFirstTime=!1;var i=t.height/2;this.textOne.attr({x:e.x1,y:i}),this.textTwo.attr({x:e.x2,y:i})}},a.prototype.clearSelection=function(){var e=this;this.selectionManager.clear().then(function(){e.clearSelectionUI()})},a.prototype.clearSelectionUI=function(){this.textOne.style("stroke","#FFF").style("stroke-width",0),this.textTwo.style("stroke","#FFF").style("stroke-width",0)},a.prototype.updateSelectionUI=function(e){this.textOne.style("stroke","#FFF").style("stroke-width",i.containsSelection(e,this.data.teamA.identity)?"2px":"0px"),this.textTwo.style("stroke","#FFF").style("stroke-width",i.containsSelection(e,this.data.teamB.identity)?"2px":"0px")},a.prototype.draw=function(e,t,i){var a=this,r="back",n=this.textOne,o=this.textTwo;this.svg.attr({height:i.height,width:i.width}).on("click",function(){a.clearSelection()}).style("background-color",e.background);var s=this.calculateLayout(e,i);this.ensureStartState(s,i),n.style("font-size",s.fontSize).style("fill",e.teamA.color).on("click",function(){a.selectionManager.select(e.teamA.identity,d3.event.ctrlKey).then(function(e){a.updateSelectionUI(e)}),d3.event.stopPropagation()}).text(e.teamA.name),o.style("font-size",s.fontSize).style("fill",e.teamB.color).on("click",function(){a.selectionManager.select(e.teamB.identity,d3.event.ctrlKey).then(function(e){a.updateSelectionUI(e)}),d3.event.stopPropagation()}).text(e.teamB.name),n.transition().duration(t).ease(r).attr({y:s.y1,x:s.x1}),o.transition().duration(t).ease(r).attr({y:s.y2,x:s.x2})},a.prototype.destroy=function(){this.svg=null,this.textOne=this.textTwo=null},a.prototype.enumerateObjectInstances=function(e){var t=[],i=this.data;switch(e.objectName){case"dataPoint":if(i)for(var r=[i.teamA,i.teamB],n=0;n<r.length;n++){var o=r[n],s=o.color,l=o.identity,u={objectName:"dataPoint",displayName:o.name,selector:l,properties:{fill:{solid:{color:s}}}};t.push(u)}break;case"general":var c={objectName:"general",displayName:"General",selector:null,properties:{fill:{solid:{color:i?i.background:a.DefaultBackgroundColor}}}};t.push(c)}return t},a.capabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping},{displayName:"Noise Measure",name:"Y",kind:e.VisualDataRoleKind.Measure}],dataViewMappings:[{categorical:{categories:{"for":{"in":"Category"}},values:{select:[{bind:{to:"Y"}}]}}}],objects:{dataPoint:{displayName:e.data.createDisplayNameGetter("Visual_DataPoint"),description:e.data.createDisplayNameGetter("Visual_DataPointDescription"),properties:{fill:{displayName:e.data.createDisplayNameGetter("Visual_Fill"),type:{fill:{solid:{color:!0}}}},width:{displayName:"",type:{numeric:!0}}}},general:{displayName:"General",properties:{fill:{displayName:"Background color",type:{fill:{solid:{color:!0}}}}}}}},a.DefaultFontFamily="cursive",a.DefaultFontColor="rgb(165, 172, 175)",a.DefaultBackgroundColor="#243C18",a.PaddingBetweenText=15,a}();t.CheerMeter=a}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.Color,a=jsCommon.CssConstants.createClassAndSelector,r=jsCommon.PixelConverter,n=function(){function a(e){e&&(this.tooltipsEnabled=e.tooltipsEnabled,this.interactivityService=e.interactivityService,this.animator=e.animator),this.renderer=new s}return a.prototype.init=function(e){this.options=e;var i=this.element=e.element;this.currentViewport=e.viewport,this.style=e.style,this.host=e.host,this.colors=this.style.colorPalette.dataColors,this.interactivity=e.interactivity,this.cartesianVisualHost=e.cartesianHost,this.isMobileChart=e.interactivity&&e.interactivity.isInteractiveLegend,i.addClass(a.ClassName+" "+t.PlayChart.ClassName);var r=this.svg=e.svg;this.renderer.init(r,e.labelsContext,this.isMobileChart)},a.getObjectProperties=function(i,a){var r;r=i&&i.metadata&&i.metadata.objects?i.metadata.objects:{};var n={};n.defaultDataPointColor=e.DataViewObjects.getFillColor(r,t.columnChartProps.dataPoint.defaultColor),n.showAllDataPoints=e.DataViewObjects.getValue(r,t.columnChartProps.dataPoint.showAllDataPoints,!1);var o=r.categoryLabels;o&&a&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(o,a);var s=i&&t.GradientUtils.hasGradientRole(i.categorical);return n.fillPoint=e.DataViewObjects.getValue(r,t.scatterChartProps.fillPoint.show,s),n.colorBorder=e.DataViewObjects.getValue(r,t.scatterChartProps.colorBorder.show,!1),n.colorByCategory=e.DataViewObjects.getValue(r,t.scatterChartProps.colorByCategory.show,!1),n},a.converter=function(e,i,r){var n,o,s,l,u,c=i.viewport,h=i.colors,d=i.interactivityService,p=i.categoryAxisProperties,g=i.valueAxisProperties,m=e.categorical;m.categories&&m.categories.length>0?(n=m.categories[0].values,o=t.valueFormatter.create({format:t.valueFormatter.getFormatString(m.categories[0].source,t.scatterChartProps.general.formatString),value:n[0],value2:n[n.length-1]}),l=m.categories[0].identity,s=m.categories[0].objects,u=m.categories[0].source.queryName):(n=[null],o=t.valueFormatter.createDefaultFormatter(null));var f=m.categories,y=m.values,v=!!y.source,b=y.grouped(),C=y.source,S=a.getMetadata(b,C),x=t.dataLabelUtils.getDefaultPointLabelSettings(),w=a.getObjectProperties(e,x),D=a.createDataPoints(y,S,f,n,o,l,s,h,c,v,x,w.defaultDataPointColor,u,w.colorByCategory,r),P=v?a.createSeriesLegend(y,h,y,t.valueFormatter.getFormatString(C,t.scatterChartProps.general.formatString),w.defaultDataPointColor):[],L=y&&C?C.displayName:"";L||(L=f&&f.length>0&&f[0].source.displayName?f[0].source.displayName:"");var _=a.getSizeRangeForGroups(b,S.idx.size);return p&&null!==p.showAxisTitle&&p.showAxisTitle===!1&&(S.axesLabels.x=null),g&&null!==g.showAxisTitle&&g.showAxisTitle===!1&&(S.axesLabels.y=null),d&&(d.applySelectionStateToData(D),d.applySelectionStateToData(P)),{xCol:S.cols.x,yCol:S.cols.y,dataPoints:D,legendData:{title:L,dataPoints:P},axesLabels:S.axesLabels,size:S.cols.size,sizeRange:_,dataLabelsSettings:x,defaultDataPointColor:w.defaultDataPointColor,hasDynamicSeries:v,showAllDataPoints:w.showAllDataPoints,fillPoint:w.fillPoint,colorBorder:w.colorBorder,colorByCategory:w.colorByCategory}},a.getSizeRangeForGroups=function(e,i){var r={};return e&&e.forEach(function(e){var n=a.getMeasureValue(i,e.values),o=t.AxisHelper.getRangeForColumn(n);(null==r.min||r.min>o.min)&&(r.min=o.min),(null==r.max||r.max<o.max)&&(r.max=o.max)}),r},a.createDataPoints=function(e,i,r,n,o,s,l,u,c,h,d,p,g,m,f){for(var y=[],v=i.idx,b=t.scatterChartProps.general.formatString,C=e.source,S=e.grouped(),x=new t.ColorHelper(u,t.scatterChartProps.dataPoint.fill,p),w=0,D=n.length;D>w;w++)for(var P=n[w],L=0,_=S.length;_>L;L++){var N=S[L],T=N.values,V=a.getMeasureValue(v.x,T),M=a.getMeasureValue(v.y,T),A=a.getMeasureValue(v.size,T),R=V&&V.values?V.values[w]:null,I=M&&M.values?M.values[w]:0,F=A&&A.values?A.values[w]:null,O=null==R||null==I;if(!O){var G=void 0;if(h)G=x.getColorForSeriesValue(N.objects,e.identityFields,N.name);else if(m)G=x.getColorForSeriesValue(l&&l[w],e.identityFields,P);else{var z=null!=A?A.source.queryName:"";G=x.getColorForMeasure(l&&l[w],z)}var H=r&&r.length>0?r[0]:null,k=t.SelectionIdBuilder.builder().withCategory(H,w).withSeries(e,N).createSelectionId(),E=[];C&&E.push({value:N.name,metadata:{source:C,values:[]}}),V&&E.push({value:R,metadata:V}),M&&E.push({value:I,metadata:M}),A&&A.values&&A.values.length>0&&E.push({value:A.values[w],metadata:A}),f&&E.push({value:f.label,metadata:{source:f.column,values:[]}});var W=t.TooltipBuilder.createTooltipInfo(b,null,P,null,r,E),B={x:R,y:I,size:F,radius:{sizeMeasure:A,index:w},fill:G,category:null!=r?o.format(P):N.name,selected:!1,identity:k,tooltipInfo:W,labelFill:d.labelColor};y.push(B)}}return y},a.createSeriesLegend=function(e,i,a,r,n){for(var o=e.grouped(),s=new t.ColorHelper(i,t.scatterChartProps.dataPoint.fill,n),l=[],u=0,c=o.length;c>u;u++){var h=o[u],d=s.getColorForSeriesValue(h.objects,e.identityFields,h.name);l.push({color:d,icon:t.LegendIcon.Circle,label:t.valueFormatter.format(h.name,r),identity:h.identity?t.SelectionId.createWithId(h.identity):t.SelectionId.createNull(),selected:!1})}return l},a.getBubbleRadius=function(e,t,i){var r=null,n=null,o=e.sizeMeasure;if(!o)return a.BubbleRadius;var s=t.min?t.min:0,l=t.max?t.max:0,u=Math.min(s,0),c=Math.max(l,0);if(r={minRange:u,maxRange:c,delta:c-u},n=a.getBubblePixelAreaSizeRange(i,a.MinSizeRange,a.MaxSizeRange),o.values){var h=o.values[e.index];if(null!=h)return a.projectSizeToPixels(h,r,n)/2}return a.BubbleRadius},a.getMeasureValue=function(e,t){return e>=0?t[e]:null},a.getMetadata=function(e,i){var a,r,n,o=t.DataRoleHelper.getMeasureIndexOfRole(e,"X"),s=t.DataRoleHelper.getMeasureIndexOfRole(e,"Y"),l=t.DataRoleHelper.getMeasureIndexOfRole(e,"Size"),u="",c="";if(e&&e.length){var h=e[0];o>=0&&(a=h.values[o].source,u=h.values[o].source.displayName),s>=0&&(r=h.values[s].source,c=h.values[s].source.displayName),l>=0&&(n=h.values[l].source)}return{idx:{x:o,y:s,size:l},cols:{x:a,y:r,size:n},axesLabels:{x:u,y:c}}},a.getDefaultData=function(){return{xCol:void 0,yCol:void 0,dataPoints:[],legendData:{dataPoints:[]},axesLabels:{x:"",y:""},sizeRange:[],dataLabelsSettings:t.dataLabelUtils.getDefaultPointLabelSettings(),defaultDataPointColor:null,hasDynamicSeries:!1}},a.prototype.renderAtFrame=function(e){this.data=e,this.cartesianVisualHost.triggerRender(!1)},a.prototype.setData=function(e,i){var r=this;if(this.data=a.getDefaultData(),e.length>0){var n=e[0]||e[1];if(n){this.categoryAxisProperties=t.CartesianHelper.getCategoryAxisProperties(n.metadata,!0),this.valueAxisProperties=t.CartesianHelper.getValueAxisProperties(n.metadata,!0),this.dataView=n;var o={viewport:this.currentViewport,colors:this.colors,interactivityService:this.interactivityService,categoryAxisProperties:this.categoryAxisProperties,valueAxisProperties:this.valueAxisProperties};if(t.PlayChart.isDataViewPlayable(n)){this.playAxis||(this.playAxis=new t.PlayAxis({animator:this.animator,interactivityService:this.interactivityService,isScrollable:!1}),this.playAxis.init(this.options));var s=this.playAxis.setData(n,function(e,t){return a.converter(e,o,t)},i);this.mergeSizeRanges(s),this.data=s.currentViewModel,this.playAxis.setRenderFunction(function(e){return r.renderAtFrame(e)})}else this.playAxis&&(this.playAxis.remove(),this.playAxis=null),n.categorical&&n.categorical.values&&(this.data=a.converter(n,o))}}else this.playAxis&&(this.playAxis.remove(),this.playAxis=null)},a.prototype.mergeSizeRanges=function(e){if(e&&e.currentViewModel){for(var t=e.currentViewModel.sizeRange,i=0,a=e.allViewModels;i<a.length;i++){var r=a[i],n=r.sizeRange;null!=n.min&&(t.min=Math.min(t.min,n.min)),null!=n.max&&(t.max=Math.max(t.max,n.max))}for(var o=0,s=e.allViewModels;o<s.length;o++){var l=s[o];l.sizeRange=t}}},a.prototype.calculateLegend=function(){return this.data.legendData},a.prototype.hasLegend=function(){return this.data&&this.data.hasDynamicSeries},a.prototype.enumerateObjectInstances=function(e,i){switch(i.objectName){case"colorByCategory":this.data&&(this.data.hasDynamicSeries||e.pushInstance({objectName:"colorByCategory",selector:null,properties:{show:this.data.colorByCategory}}));break;case"dataPoint":if(!this.playAxis){var a=this.dataView&&this.dataView.categorical?this.dataView.categorical:null;if(!t.GradientUtils.hasGradientRole(a))return this.enumerateDataPoints(e)}break;case"categoryAxis":e.pushInstance({selector:null,properties:{showAxisTitle:this.categoryAxisProperties&&null!=this.categoryAxisProperties.showAxisTitle?this.categoryAxisProperties.showAxisTitle:!0},objectName:"categoryAxis"});break;case"valueAxis":e.pushInstance({selector:null,properties:{showAxisTitle:this.valueAxisProperties&&null!=this.valueAxisProperties.showAxisTitle?this.valueAxisProperties.showAxisTitle:!0},objectName:"valueAxis"});break;case"categoryLabels":this.data?t.dataLabelUtils.enumerateCategoryLabels(e,this.data.dataLabelsSettings,!0):t.dataLabelUtils.enumerateCategoryLabels(e,null,!0);break;case"fillPoint":if(this.hasSizeMeasure())return;e.pushInstance({objectName:"fillPoint",selector:null,properties:{show:this.data.fillPoint}});break;case"colorBorder":this.hasSizeMeasure()&&e.pushInstance({objectName:"colorBorder",selector:null,properties:{show:this.data.colorBorder}})}},a.prototype.hasSizeMeasure=function(){var e=this.data.sizeRange;return e&&void 0!==e.min},a.prototype.enumerateDataPoints=function(e){var i=this.data;if(i){var a=i.dataPoints.length;if(i.hasDynamicSeries)for(var r=i.legendData.dataPoints.length,n=0;r>n;n++){var o=i.legendData.dataPoints[n];e.pushInstance({objectName:"dataPoint",displayName:o.label,selector:t.ColorHelper.normalizeSelector(o.identity.getSelector()),properties:{fill:{solid:{color:o.color}}}})}else{e.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:i.defaultDataPointColor||this.colors.getColorByIndex(0).value}}}}).pushInstance({objectName:"dataPoint",selector:null,properties:{showAllDataPoints:!!i.showAllDataPoints}});for(var n=0;a>n;n++){var s=i.dataPoints[n];e.pushInstance({objectName:"dataPoint",displayName:s.category,selector:t.ColorHelper.normalizeSelector(s.identity.getSelector(),!0),properties:{fill:{solid:{color:s.fill}}}})}}}},a.getExtents=function(e){var t=e.dataPoints;return _.isEmpty(t)?{minY:0,maxY:0,minX:0,maxX:0}:{minY:d3.min(t,function(e){return e.y}),maxY:d3.max(t,function(e){return e.y}),minX:d3.min(t,function(e){return e.x}),maxX:d3.max(t,function(e){return e.x})}},a.prototype.calculateAxesProperties=function(e){var i=this.data,r=this.currentViewport=e.viewport,n=e.margin;this.currentViewport=r,this.margin=n;var o=r.width-(n.left+n.right),s=r.height-(n.top+n.bottom),l={minY:0,maxY:10,minX:0,maxX:10};this.playAxis?(l=this.playAxis.getCartesianExtents(l,a.getExtents),this.playAxis.setPlayControlPosition(e.playAxisControlLayout)):_.isEmpty(i.dataPoints)||(l=a.getExtents(i));var u=[l.minX,l.maxX],c=t.AxisHelper.combineDomain(e.forcedXDomain,u);this.xAxisProperties=t.AxisHelper.createAxis({pixelSpan:o,dataDomain:c,metaDataColumn:i.xCol,formatString:t.valueFormatter.getFormatString(i.xCol,t.scatterChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!1,forcedTickCount:e.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!0,scaleType:e.categoryAxisScaleType,axisDisplayUnits:e.categoryAxisDisplayUnits,axisPrecision:e.categoryAxisPrecision}),this.xAxisProperties.axis.tickSize(-s,0),this.xAxisProperties.axisLabel=this.data.axesLabels.x;var h=t.AxisHelper.combineDomain(e.forcedYDomain,[l.minY,l.maxY]);return this.yAxisProperties=t.AxisHelper.createAxis({pixelSpan:s,dataDomain:h,metaDataColumn:i.yCol,formatString:t.valueFormatter.getFormatString(i.yCol,t.scatterChartProps.general.formatString),outerPadding:0,isScalar:!0,isVertical:!0,forcedTickCount:e.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,scaleType:e.valueAxisScaleType,axisDisplayUnits:e.valueAxisDisplayUnits,axisPrecision:e.valueAxisPrecision}),this.yAxisProperties.axisLabel=this.data.axesLabels.y,[this.xAxisProperties,this.yAxisProperties]},a.prototype.overrideXScale=function(e){this.xAxisProperties=e},a.prototype.render=function(i){if(this.data){var r=this.data,n=this.margin,s=this.currentViewport,l=this.interactivityService&&this.interactivityService.hasSelection(),u={width:s.width-(n.left+n.right),height:s.height-(n.top+n.bottom)},c=t.AnimatorCommon.GetAnimationDuration(this.animator,i);this.playAxis&&c>0&&(c=t.PlayChart.FrameAnimationDuration);var h=this.playAxis?"linear":"cubic-in-out",d=(!r.sizeRange||!r.sizeRange.min)&&r.fillPoint,p=this.hasSizeMeasure(),g={data:r,drawBubbles:p,xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties,viewport:u,hasSelection:l,animationDuration:c,animationOptions:this.options.animation,fillMarkers:d,easeType:h};if(p){var m=r.dataPoints.sort(a.sortBubbles);g.data=e.Prototype.inherit(g.data),g.data.dataPoints=m}var f=[];(r.dataLabelsSettings&&r.dataLabelsSettings.show||r.dataLabelsSettings.showCategory)&&(f=o.createLabelDataPoints(g));var y=this.renderer.render(g,this.interactivityService);this.isMobileChart&&(y={data:y.data,dataPointsSelection:y.dataPointsSelection,plotContext:y.plotContext,host:this.cartesianVisualHost,root:this.svg,visualInitOptions:this.options,xAxisProperties:this.xAxisProperties,yAxisProperties:this.yAxisProperties,background:d3.select(this.element.get(0))});var v;if(this.playAxis&&(v=this.playAxis.render(i,g,s,n),this.interactivityService)){var b={traceLineRenderer:this.renderer.createTraceLineRenderer(v.viewModel)};l&&t.PlayChart.renderTraceLines(v.allDataPoints,b.traceLineRenderer,!i),y.playOptions=b}return{dataPoints:v?v.allDataPoints:r.dataPoints,behaviorOptions:y,labelDataPoints:f,labelsAreNumeric:!1}}},a.getStrokeFill=function(e,t){if(null!=e.size&&t){var r=i.parseColorString(e.fill);return i.hexString(i.darken(r,a.StrokeDarkenColorValue))}return e.fill},a.getBubblePixelAreaSizeRange=function(e,t,i){var r=1;if(e.height>0&&e.width>0){var n=Math.min(e.height,e.width);r=n*n/a.AreaOf300By300Chart}var o=Math.round(t*r),s=Math.round(i*r);return{minRange:o,maxRange:s,delta:s-o}},a.project=function(e,t,i){if(0===t.delta||0===i.delta)return a.rangeContains(t,e)?i.minRange:null;var r=(e-t.minRange)/t.delta;return i.minRange+r*i.delta},a.projectSizeToPixels=function(e,t,i){var r=0;if(t){if(r=i.maxRange,0!==t.delta){var n=Math.min(Math.max(e,t.minRange),t.maxRange);r=a.project(n,t,i)}r=2*Math.sqrt(r/Math.PI)}return Math.round(r)},a.rangeContains=function(e,t){return e.minRange<=t&&t<=e.maxRange},a.getBubbleOpacity=function(e,t){return t&&!e.selected?a.DimmedBubbleOpacity:a.DefaultBubbleOpacity},a.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},a.prototype.getSupportedCategoryAxisType=function(){return t.axisType.scalar},a.sortBubbles=function(e,t){var i=t.radius.sizeMeasure.values[t.radius.index]-e.radius.sizeMeasure.values[e.radius.index];return 0!==i?i:t.identity.getKey().localeCompare(e.identity.getKey())},a.BubbleRadius=6,a.DefaultBubbleOpacity=.85,a.DimmedBubbleOpacity=.4,a.StrokeDarkenColorValue=63.75,a.dataLabelLayoutStartingOffset=2,a.dataLabelLayoutOffsetIterationDelta=6,a.dataLabelLayoutMaximumOffset=a.dataLabelLayoutStartingOffset+2*a.dataLabelLayoutOffsetIterationDelta,a.AreaOf300By300Chart=9e4,a.MinSizeRange=200,a.MaxSizeRange=3e3,a.ClassName="scatterChart",a}();t.ScatterChart=n;var o,s=function(){function e(){}return e.prototype.init=function(t,i,a){this.mainGraphicsG=t.append("g").classed(e.MainGraphicsContext["class"],!0),this.isMobileChart=a,a&&(this.mainGraphicsBackgroundRect=this.mainGraphicsG.append("rect").classed("backgroundRect",!0).attr({width:"100%",height:"100%"})),this.mainGraphicsContext=this.mainGraphicsG.append("svg"),this.labelGraphicsContext=i},e.prototype.render=function(e,i){var a=e.viewport;this.mainGraphicsContext.attr({width:a.width,height:a.height});var r;return e.drawBubbles?(r=this.drawScatterMarkers(e),r.order()):r=this.drawScatterMarkers(e),t.TooltipManager.addTooltip(r,function(e){return e.data.tooltipInfo}),t.SVGUtil.flushAllD3TransitionsIfNeeded(e.animationOptions),{dataPointsSelection:r,data:e.data,plotContext:this.mainGraphicsContext}},e.prototype.createTraceLineRenderer=function(e){return new l(e,this.mainGraphicsContext)},e.prototype.drawScatterMarkers=function(t){var i=t.data,a=t.xAxisProperties.scale,r=t.yAxisProperties.scale,o=this.mainGraphicsContext.selectAll(e.DotClass.selector).data(i.dataPoints,function(e){return e.identity.getKey()});return o.enter().append("circle").classed(e.DotClass["class"],!0).style("opacity",0).attr("r",0),o.style({"stroke-opacity":function(e){return null!=e.size&&i.colorBorder?1:n.getBubbleOpacity(e,t.hasSelection)},"stroke-width":"1px",stroke:function(e){return n.getStrokeFill(e,i.colorBorder)},fill:function(e){return e.fill},"fill-opacity":function(e){return null!=e.size||t.fillMarkers?n.getBubbleOpacity(e,t.hasSelection):0}}).transition().ease(t.easeType).duration(t.animationDuration).style("opacity",1).attr({r:function(e){return n.getBubbleRadius(e.radius,i.sizeRange,t.viewport)},cx:function(e){return a(e.x)},cy:function(e){return r(e.y)}}),o.exit().transition().ease(t.easeType).duration(t.animationDuration).style("opacity",0).attr("r",0).remove(),o},e.DotClass=a("dot"),e.MainGraphicsContext=a("mainGraphicsContext"),e}();!function(i){function a(i){for(var a=i.xAxisProperties.scale,s=i.yAxisProperties.scale,l=i.data.sizeRange,u=[],c=i.data.dataPoints,p=i.data.dataLabelsSettings,g=o(i),m=0;m<c.length;m++){var f=c[m],y=f.category,v={text:y,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:r.fromPoint(p.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},b=e.TextMeasurementService.measureSvgTextWidth(v),C=e.TextMeasurementService.estimateSvgTextHeight(v);u.push({isPreferred:g?h(f.identity.getKey(),g):!1,text:y,textSize:{width:b,height:C},outsideFill:p.labelColor?p.labelColor:t.NewDataLabelUtils.defaultLabelColor,insideFill:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:0,parentShape:{point:{x:a(f.x),y:s(f.y)},radius:n.getBubbleRadius(f.radius,l,i.viewport),validPositions:d},identity:f.identity,fontSize:p.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt})}return u}function o(e){var i=e.viewport.width,a=e.viewport.height,r=new t.Point(i/2,a/2),n=s(i,a);return l(r,n,e)}function s(e,i){var a=[],r=e/4,n=i/4;return a.push(new t.Point(r,n)),a.push(new t.Point(3*r,n)),a.push(new t.Point(r,3*n)),a.push(new t.Point(3*r,3*n)),a}function l(e,t,i){for(var a,r=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],n=[],o=i.xAxisProperties.scale,s=i.yAxisProperties.scale,l=0,h=i.data.dataPoints;l<h.length;l++){var d=h[l],p=o(d.x),g=s(d.y),m=u(p,g,e);i.drawBubbles?n[m]||(n[m]=d.identity):(a=c(t[m].x,t[m].y,p,g),a<r[m]&&(n[m]=d.identity,r[m]=a))}for(var f=[],y=0;y<n.length;y++){var v=n[y];v&&f.push(v.getKey())}return f}function u(e,t,i){return e>i.x&&t<=i.y?0:e<=i.x&&t<=i.y?1:e<=i.x&&t>i.y?2:3}function c(e,t,i,a){return Math.sqrt((e-i)*(e-i)+(t-a)*(t-a))}function h(e,t){for(var i=0;i<t.length;i++){var a=t[i];if(0===e.localeCompare(a))return!0}return!1}var d=[2,1,8,4,16,32,64,128];i.createLabelDataPoints=a}(o||(o={}));var l=function(){function e(e,t){this.viewModel=e,this.element=t}return e.prototype.remove=function(){this.element.selectAll(e.TraceLine.selector).remove(),this.element.selectAll(e.TraceBubble.selector).remove()},e.prototype.render=function(i,a){var r=this.viewModel,o=r.viewModel,s=[];if(_.isEmpty(i))this.remove();else{for(var l=r.data.currentFrameIndex,u=[],c=0,h=i.length;h>c;c++){s[c]=[],u[c]=!1;for(var d=0,p=r.data.allViewModels.length;p>d&&l>=d;d++){var g=_.find(r.data.allViewModels[d].dataPoints,function(e,t){return e.identity.getKey()===i[c].identity.getKey()});null!=g&&(g.frameIndex=d,s[c].push(g),d===l&&(u[c]=!0))}}var m=o.xAxisProperties.scale,f=o.yAxisProperties.scale,y=d3.svg.line().x(function(e){return m(e.x)}).y(function(e){return f(e.y)}).defined(function(e){return null!==e.x&&null!==e.y}),v=this.element.selectAll(e.TraceLine.selector).data(i,function(e){return e.identity.getKey()});v.enter().append("path").classed(e.TraceLine["class"],!0);var b=[],C=[],S=!1;v.each(function(e,t){var i=this,a=i.hasAttribute("d")?i.getTotalLength():0;b.push(a);var r=$("<svg><path></path></svg>"),n=$("path",r);n.attr("d",y(s[t]));var o=s[t].length>0?n.get()[0].getTotalLength():0;C.push(o),S=S||a>o}),S?a?v.transition().ease("linear").duration(t.PlayChart.FrameAnimationDuration).attr("stroke-dashoffset",function(e,t){return b[t]-C[t]}).transition().ease("linear").duration(1).delay(t.PlayChart.FrameAnimationDuration).style("stroke",function(e){return n.getStrokeFill(e,!0)}).attr({d:function(e,t){return y(s[t])},"stroke-dasharray":function(e,t){return C[t]+" "+C[t]},"stroke-dashoffset":0}):v.style("stroke",function(e){return n.getStrokeFill(e,!0)}).attr({d:function(e,t){return y(s[t])},"stroke-dasharray":function(e,t){return C[t]+" "+C[t]},"stroke-dashoffset":0}):(v.style("stroke",function(e){return n.getStrokeFill(e,!0)}).attr({d:function(e,t){return y(s[t])},"stroke-dasharray":function(e,t){return C[t]+" "+C[t]},"stroke-dashoffset":function(e,t){return C[t]-b[t]}}),a?v.transition().ease("linear").duration(t.PlayChart.FrameAnimationDuration).attr("stroke-dashoffset",0):v.attr("stroke-dashoffset",0)),v.exit().remove();for(var x=[],w=0;w<s.length;w++){var D=s[w],P=u[w]?D.slice(0,D.length-1):D;x=x.concat(P)}var L=this.element.selectAll(e.TraceBubble.selector).data(x,function(e){return e.identity.getKey()+e.x+e.y+e.size});L.enter().append("circle").style("opacity",0).classed(e.TraceBubble["class"],!0),L.attr("cx",function(e){return m(e.x)}).attr("cy",function(e){return f(e.y)}).attr("r",function(e){return n.getBubbleRadius(e.radius,r.data.currentViewModel.sizeRange,r.viewport)}).style({"stroke-opacity":function(e){return n.getBubbleOpacity(e,!0)},"stroke-width":"1px",stroke:function(e){return n.getStrokeFill(e,r.data.currentViewModel.colorBorder)},fill:function(e){return e.fill},"fill-opacity":function(e){return null!=e.size?.2+e.frameIndex/l*.6:0}}).transition().ease("linear").duration(t.PlayChart.FrameAnimationDuration).style("opacity",1),L.exit().transition().ease("linear").duration(t.PlayChart.FrameAnimationDuration).style("opacity",0).remove(),t.TooltipManager.addTooltip(L,function(e){return e.data.tooltipInfo}),L.sort(function(e,t){return t.size-e.size})}},e.TraceLine=a("traceLine"),e.TraceBubble=a("traceBubble"),e}()}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.CssConstants.createClassAndSelector,a=function(){function t(e){e&&(this.interactivityService=e.interactivityService)}return t.prototype.init=function(e){var t=this;this.element=e.element,this.svg=e.svg,this.host=e.host,this.isMobileChart=e.interactivity&&e.interactivity.isInteractiveLegend,this.interactivityService&&!this.isMobileChart&&(this.playControl=new n(this.element,function(e){return t.moveToFrameAndRender(e)}),this.playControl.onPlay(function(){return t.play()}))},t.prototype.setData=function(e,t,i){if(e){if(this.ridiculousFlagForPersistProperties&&e.metadata)return this.ridiculousFlagForPersistProperties=!1,this.playData;if(e.matrix||e.categorical){if(i)return this.playData;this.playData=r.converter(e,t)}else this.playData=r.getDefaultPlayData()}else this.playData=r.getDefaultPlayData();return this.lastViewport=void 0,this.playData},t.prototype.render=function(i,a,r,n){var o=this.playData,s=!this.lastViewport||this.lastViewport.height!==r.height||this.lastViewport.width!==r.width;if(this.lastViewport=r,s&&this.stop(),o){var l={data:this.playData,viewModel:a,viewport:r},u=!1;if(this.interactivityService){var c=o.currentViewModel;this.interactivityService.applySelectionStateToData(c.dataPoints),u=this.interactivityService.hasSelection()}var h=o.frameKeys,d=o.currentFrameIndex,p=r.height,g=p-n.top-n.bottom,m=r.width,f=m-n.left-n.right;this.playControl&&s&&this.playControl.rebuild(o,r);var y=Math.min(p,1.3*m),v=Math.max(12,Math.round(y/7));v=Math.min(v,70);var b={fontSize:""+v,
text:h[d]||"",fontFamily:"Segoe UI"},C=e.TextMeasurementService.estimateSvgTextHeight(b)-e.TextMeasurementService.estimateSvgTextBaselineDelta(b),S=[];d<h.length&&d>=0&&g>C&&(S=[e.TextMeasurementService.getTailoredTextOrDefault(b,f-2*t.calloutOffsetMultiplier*C)]);var x=this.svg.selectAll(t.PlayCallout.selector).data(S);x.enter().append("text").classed(t.PlayCallout["class"],!0),x.text(function(e){return e}).attr({x:f-t.calloutOffsetMultiplier*C,y:function(){return C}}).style({"font-size":v+"px","text-anchor":"end"}),x.exit().remove();var w=o.allViewModels.map(function(e){return e.dataPoints}),D=_.flatten(w);return{allDataPoints:D,viewModel:l}}},t.prototype.play=function(){var e=this.playData;if(this.isPlaying)this.stop();else if(this.playControl){this.isPlaying=!0,this.playControl.play();var t=Math.round(this.playControl.getCurrentIndex());t>=e.allViewModels.length-1?e.currentFrameIndex=-1:e.currentFrameIndex=t-1,this.playNextFrame(e)}},t.prototype.playNextFrame=function(e,t,i){var a=this;if(!this.isPlaying)return void this.stop();var n=e.currentFrameIndex+1;null!=t&&null!=i&&(n=Math.abs(i-t+1),t=n),n<e.allViewModels.length&&n>-1?(e.currentFrameIndex=n,e.currentViewModel=e.allViewModels[n],this.renderDelegate(e.currentViewModel),this.playControl.setFrame(n),n<e.allViewModels.length&&window.setTimeout(function(){a.playNextFrame(e,t,i)},r.FrameStepDuration)):this.stop()},t.prototype.stop=function(){this.playControl&&this.playControl.pause(),this.isPlaying=!1},t.prototype.remove=function(){this.playControl&&this.playControl.remove(),d3.selectAll(t.PlayCallout.selector).remove()},t.prototype.setRenderFunction=function(e){this.renderDelegate=e},t.prototype.getCartesianExtents=function(e,t){return this.playData&&this.playData.allViewModels&&this.playData.allViewModels.length>0?r.getMinMaxForAllFrames(this.playData,t):e},t.prototype.setPlayControlPosition=function(e){if(this.playControl){var t=this.playControl.getContainer();t.css("left",e.left?e.left+"px":""),t.css("top",e.top?e.top+"px":"")}},t.prototype.moveToFrameAndRender=function(e){var t=this.playData;if(this.isPlaying=!1,!(0>e||e===t.currentFrameIndex||e>=t.allViewModels.length)){t.currentFrameIndex=e;var i=t.allViewModels[e];t.currentViewModel=i,this.renderDelegate(i)}},t.PlayCallout=i("play-callout"),t.calloutOffsetMultiplier=.3,t}();t.PlayAxis=a;var r,n=function(){function e(e,t){this.createSliderDOM(e),this.renderDelegate=t}return e.prototype.getContainer=function(){return this.playAxisContainer},e.prototype.remove=function(){this.playAxisContainer&&this.playAxisContainer.remove()},e.prototype.pause=function(){this.playButton.removeClass("pause").addClass("play")},e.prototype.play=function(){this.playButton.removeClass("play").addClass("pause")},e.prototype.getCurrentIndex=function(){return Math.round(this.noUiSlider.get())},e.prototype.onPlay=function(e){this.playButtonCircle.off("click"),this.playButtonCircle.on("click",e)},e.calculateSliderWidth=function(t,i){var a=0,r=0;_.isEmpty(t.labelInfo)||(a=_.first(t.labelInfo).labelWidth/2,r=_.last(t.labelInfo).labelWidth/2);var n=Math.max(a,e.SliderMarginLeft),o=Math.max(r,e.SliderMarginRight);n=Math.min(e.SliderMaxMargin,n),o=Math.min(e.SliderMaxMargin,o);var s=Math.max(i-n-o,1);return s},e.prototype.createSliderDOM=function(t){this.playAxisContainer=$('<div class="play-axis-container"></div>').appendTo(t).css("height",e.PlayControlHeight+"px"),this.playButtonCircle=$('<div class="button-container"></div>').appendTo(this.playAxisContainer),this.playButton=$('<div class="play"></div>').appendTo(this.playButtonCircle),this.slider=$('<div class="sliders"></div>').appendTo(this.playAxisContainer)},e.prototype.rebuild=function(t,i){var a=this,n=this.slider;this.noUiSlider&&this.noUiSlider.destroy();var o=this.slider.get(0),s=t.labelData,l=e.calculateSliderWidth(s,i.width);this.slider.css("width",l+"px");var u=t.frameKeys.length;if(u>0){var c=r.createPipsFilterFn(t,l,s),h=u-1;noUiSlider.create(o,{step:1,start:[t.currentFrameIndex],range:{min:[0],max:[h]},pips:{mode:"steps",density:Math.round(100/u),format:{to:function(e){return t.frameKeys[e]},from:function(e){return t.frameKeys.indexOf(e)}},filter:c}})}else noUiSlider.create(o,{step:1,start:[0],range:{min:[0],max:[0]}});this.noUiSlider=o.noUiSlider,this.noUiSlider.on("slide",function(){var e=a.getCurrentIndex();a.renderDelegate(e)}),$(".noUi-value",n).each(function(e,t){var i=s.labelInfo.filter(function(e){return e.label===$(t).text()})[0].labelWidth;$(t).width(i),$(t).css("margin-left",-i/2+"px")})},e.prototype.setFrame=function(e){this.noUiSlider.set([e])},e.SliderMarginLeft=44,e.SliderMarginRight=20,e.SliderMaxMargin=100,e.PlayControlHeight=80,e}();!function(i){function a(t,i){var a={categories:[],values:e.data.DataViewTransform.createValueColumns()};if(t.rows.levels.length<2&&0===t.columns.levels.length)return a;var r={source:t.rows.levels.length>1?t.rows.levels[1].sources[0]:t.columns.levels[0].sources[0],values:[],objects:void 0,identity:[]},n=t.rows.root.children,o=t.columns.root.children,s=t.columns.levels.length>1&&o,l=t.rows.levels.length>1&&n;if(s&&!l){a.categories=void 0;var u=t.columns.root;a.values.source=t.columns.levels[0].sources[0];for(var c=t.valueSources.length,h=0,d=u.children.length;d>h;h++)for(var p=u.children[h],g=0;c>g;g++){var m=_.create(t.valueSources[g],{groupName:p.value}),f={identity:p.identity,values:[],source:m};a.values.push(f)}for(var y=t.rows.root.children[i],h=0,d=u.children.length;d>h;h++)for(var g=0;c>g;g++)a.values[h*c+g].values.push(y.values[h*c+g].value)}else if(s&&n){for(var u=t.rows.root.children[i],h=0,d=u.children.length;d>h;h++){var v=u.children[h];r.identity.push(v.identity),r.values.push(v.value)}a.values.source=t.columns.levels[0].sources[0];for(var b=[],p=t.columns.root,C=-1;p;){if(p.children&&p.children[0].children)for(var g=0,S=p.children.length;S>g;g++)b.push(p.children[g]);else if(p.children&&u.children){for(var c=p.children.length,g=0;c>g;g++){var m=_.create(t.valueSources[g],{groupName:p.value}),f={identity:p.identity,values:[],source:m};a.values.push(f)}for(var h=0,d=u.children.length;d>h;h++)for(var v=u.children[h],g=0;c>g;g++)a.values[C*c+g].values.push(v.values[C*c+g].value)}b.length>0?(p=b[0],b=b.splice(1),C++):p=void 0}}else if(l){for(var u=t.rows.root.children[i],x=t.valueSources.length,g=0;x>g;g++){var f={identity:void 0,values:[],source:t.valueSources[g]};a.values.push(f)}for(var h=0,d=u.children.length;d>h;h++){var v=u.children[h];r.identity.push(v.identity),r.values.push(v.value);for(var g=0;x>g;g++)a.values[g].values.push(v.values[g].value)}}return a.categories&&a.categories.push(r),a}function r(i,a){var r={};if(i&&i.objects){var n=i.objects;r.currentFrameIndex=e.DataViewObjects.getValue(n,t.scatterChartProps.currentFrameIndex.index,null)}return r}function n(e,t){return{metadata:e,categorical:t}}function o(e,i){var o,s=e.metadata,l=t.dataLabelUtils.getDefaultPointLabelSettings(),c=r(s,l),h=[],d=[],p=void 0,g=e.matrix.rows,m=g.root.children?g.root.children.length:0;if(e.matrix&&m>0){o=g.levels[0].sources[0];var f,y=t.valueFormatter.getFormatString(o,t.scatterChartProps.general.formatString);if(o.type.numeric){var v=Math.abs(g.root.children[m-1].value-g.root.children[0].value);f=t.valueFormatter.create({format:y,value:v,value2:0})}else f=t.valueFormatter.createDefaultFormatter(y,!0);for(var b=0,C=m;C>b;b++){var S=g.root.children[b],x=f.format(S.value);d.push(x);var w=a(e.matrix,b),D={label:x,column:o};p=i(n(e.metadata,w),D),h.push(p)}}else{var w=a(e.matrix,0);p=i(n(e.metadata,w)),h.push(p)}return c.currentFrameIndex=d.length-1,{allViewModels:h,currentViewModel:p,frameKeys:d,currentFrameIndex:c.currentFrameIndex,labelData:u(d,o)}}function s(){var e={frameKeys:[],allViewModels:[],currentFrameIndex:0,currentViewModel:void 0,labelData:{anyWordBreaks:!1,labelInfo:[]}};return e}function l(e,t){var i={minY:0,maxY:10,minX:0,maxX:10};if(e.allViewModels&&e.allViewModels.length>0){i.minY=i.minX=Number.MAX_VALUE,i.maxY=i.maxX=Number.MIN_VALUE;for(var a=0,r=e.allViewModels.length;r>a;a++){var n=e.allViewModels[a],o=t(n);i={minY:d3.min([o.minY,i.minY]),maxY:d3.max([o.maxY,i.maxY]),minX:d3.min([o.minX,i.minX]),maxX:d3.max([o.maxX,i.maxX])}}}return i}function u(t,i){for(var a={fontFamily:"wf_segoe-ui_normal",fontSize:jsCommon.PixelConverter.toString(14)},r=[],n=!1,o=0;o<t.length;o++){var s=t[o],l=jsCommon.WordBreaker.getMaxWordWidth(s,e.TextMeasurementService.measureSvgTextWidth,a);n=n||jsCommon.WordBreaker.hasBreakers(s)||s.indexOf("-")>-1,r.push({label:s,labelWidth:l})}return{labelInfo:r,anyWordBreaks:n,labelFieldName:i&&i.displayName}}function c(e,t,i){var a=_.max(_.map(i.labelInfo,function(e){return e.labelWidth})),r=1,n=1,o=e.frameKeys.length>1?t/(e.frameKeys.length-1):t,s=a/o;s>1.25?(n=Math.ceil(s),r=2):(s>1||i.anyWordBreaks)&&(r=2);var l=function(e,t){return e%n===0?r:0};return l}function h(e,t){void 0===t&&(t="Play");var i=e.categorical&&e.categorical.categories&&e.categorical.categories[0]&&e.categorical.categories[0].source&&e.categorical.categories[0].source.roles&&e.categorical.categories[0].source.roles[t];return e.matrix&&(!e.categorical||i)}function d(e,t,i){var a=_.filter(e,function(e){return e.selected});a=_.uniq(a,function(e){return e.identity.getKey()}),t.render(a,i)}i.FrameStepDuration=800,i.FrameAnimationDuration=750,i.ClassName="playChart",i.convertMatrixToCategorical=a,i.converter=o,i.getDefaultPlayData=s,i.getMinMaxForAllFrames=l,i.createPipsFilterFn=c,i.isDataViewPlayable=h,i.renderTraceLines=d}(r=t.PlayChart||(t.PlayChart={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.PixelConverter,a=function(){function e(e){this.textProperties={fontFamily:"wf_segoe-ui_normal, helvetica, arial, sans-serif",fontSize:"14px"},e&&(this.behavior=e.behavior),this.renderAsImage=$.noop,this.domHelper=e.domHelper}return e.prototype.getDefaultValue=function(){return this.data&&this.data.defaultValue?this.data.defaultValue.value:void 0},e.prototype.getIdentityFields=function(){return t.SlicerUtil.DefaultValueHandler.getIdentityFields(this.dataView)},e.prototype.init=function(e){var a=this;this.element=e.visualInitOptions.element,this.currentViewport=e.visualInitOptions.viewport;var n,o=this.hostServices=e.visualInitOptions.host,s=this.settings=t.Slicer.DefaultStyleProperties(),l=this.domHelper,u=l.getSlicerBodyViewport(this.currentViewport,s,this.textProperties);this.behavior&&(n=t.createInteractivityService(o));var c=document.createElement("div");c.className=r.Container["class"];var h=this.container=d3.select(c),d=l.createSlicerHeader(o);c.appendChild(d),this.header=d3.select(d),this.body=h.append("div").classed(t.SlicerUtil.Selectors.Body["class"],!0).style({height:i.toString(u.height),width:i.toString(u.width)});var p=function(e){a.onEnterSelection(e)},g=function(e){a.onUpdateSelection(e,n)},m=function(e){e.remove()},f={rowHeight:l.getRowHeight(s,this.textProperties),enter:p,exit:m,update:g,loadMoreData:function(){return e.loadMoreData()},scrollEnabled:!0,viewport:l.getSlicerBodyViewport(this.currentViewport,s,this.textProperties),baseContainer:this.body};return this.listView=t.ListViewFactory.createListView(f),this.element.get(0).appendChild(c),n},e.prototype.render=function(e){var t=this.data=e.data;this.currentViewport=e.viewport;var i=e.dataView;if(!i||!t)return void this.listView.empty();this.dataView=i,this.renderAsImage=e.renderAsImage;var a=this.settings=t.slicerSettings,r=this.domHelper;r.updateSlicerBodyDimensions(this.currentViewport,this.body,a),this.updateSelectionStyle(),this.listView.viewport(r.getSlicerBodyViewport(this.currentViewport,a,this.textProperties)).rowHeight(r.getRowHeight(a,this.textProperties)).data(t.slicerDataPoints,function(e){return $.inArray(e,t.slicerDataPoints)},e.resetScrollbarPosition)},e.prototype.updateSelectionStyle=function(){var e=this.settings;this.container.classed("isMultiSelectEnabled",e&&e.selection&&!e.selection.singleSelect)},e.prototype.onEnterSelection=function(e){var a=this.settings,n=e.append("li").classed(r.ItemContainer["class"],!0),s=n.append("div").classed(r.Input["class"],!0);s.append("input").attr("type","checkbox"),s.append("span").classed(r.Checkbox["class"],!0).style(o.buildCheckboxStyle(a)),n.append("span").classed(t.SlicerUtil.Selectors.LabelText["class"],!0).style("font-size",i.fromPoint(a.slicerText.textSize)),n.append("span").classed(t.SlicerUtil.Selectors.CountText["class"],!0).style("font-size",i.fromPoint(a.slicerText.textSize))},e.prototype.onUpdateSelection=function(e,i){var a=this,n=this.settings,s=this.data;if(s&&n){var l=this.domHelper;l.styleSlicerHeader(this.header,n,s.categorySourceName),this.header.attr("title",s.categorySourceName);var u=e.selectAll(t.SlicerUtil.Selectors.LabelText.selector);u.html(function(e){return a.renderAsImage(e.value)?'<img src="'+e.value+'" />':e.value}),u.attr("title",function(e){return e.tooltip}),l.setSlicerTextStyle(u,n);var c=e.selectAll(t.SlicerUtil.Selectors.CountText.selector);c.text(function(e){return e.count}),l.setSlicerTextStyle(c,n);var h=e.selectAll(r.Input.selector).selectAll("span");if(h.style(o.buildCheckboxStyle(n)),i&&this.body){var d=this.body.attr("width",this.currentViewport.width),p=d.selectAll(r.ItemContainer.selector),g=d.selectAll(t.SlicerUtil.Selectors.LabelText.selector),m=d.selectAll(r.Input.selector),f=this.header.select(t.SlicerUtil.Selectors.Clear.selector),y={dataPoints:s.slicerDataPoints,slicerContainer:this.container,itemContainers:p,itemLabels:g,itemInputs:m,clear:f,interactivityService:i,settings:s.slicerSettings},v={behaviorOptions:y,orientation:0};i.bind(s.slicerDataPoints,this.behavior,v,{overrideSelectionFromData:!0,hasSelectionOverride:s.hasSelectionOverride,slicerDefaultValueHandler:this}),t.SlicerWebBehavior.styleSlicerItems(e.select(r.Input.selector),s.hasSelectionOverride,i.isSelectionModeInverted())}else t.SlicerWebBehavior.styleSlicerItems(e.select(r.Input.selector),!1,!1)}},e}();t.VerticalSlicerRenderer=a;var r;!function(e){var t=jsCommon.CssConstants.createClassAndSelector;e.Container=t("slicerContainer"),e.ItemContainer=t("slicerItemContainer"),e.Input=t("slicerCheckbox"),e.Checkbox=t("checkbox")}(r||(r={}));var n;!function(e){e.MinimumSize=8,e.Size=13,e.SizeRange=e.Size-e.MinimumSize}(n||(n={}));var o;!function(a){function r(e){var a=o(e),r=t.SVGUtil.transformOrigin("left","center");return{transform:a,"transform-origin":r,"font-size":i.fromPoint(e.slicerText.textSize)}}function o(i){var a=jsCommon.TextSizeDefaults.getScale(i.slicerText.textSize),r=n.MinimumSize+n.SizeRange*a,o=r/n.Size,s=e.Double.toIncrement(o,.05);return t.SVGUtil.scale(s)}a.buildCheckboxStyle=r}(o||(o={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.PixelConverter,a=50,r=80,n=.8,o={labelText:{marginRight:2,paddingLeft:8,paddingRight:8}},s=function(){function s(e){this.textProperties={fontFamily:"wf_segoe-ui_normal",fontSize:"14px"},e&&(this.behavior=e.behavior),this.domHelper=e.domHelper,this.dataStartIndex=0}return s.prototype.getDefaultValue=function(){return this.data&&this.data.defaultValue?this.data.defaultValue.value:void 0},s.prototype.getIdentityFields=function(){return t.SlicerUtil.DefaultValueHandler.getIdentityFields(this.dataView)},s.prototype.init=function(e){this.element=e.visualInitOptions.element,this.currentViewport=e.visualInitOptions.viewport;var i=this.hostServices=e.visualInitOptions.host;this.behavior&&(this.interactivityService=t.createInteractivityService(i)),this.loadMoreData=function(){return e.loadMoreData()};var a=document.createElement("div");a.className=l.container["class"];var r=this.container=d3.select(a),n=this.domHelper.createSlicerHeader(this.hostServices);a.appendChild(n),this.header=d3.select(n);var o=this.body=r.append("div").classed(t.SlicerUtil.Selectors.Body["class"]+" "+l.FlexDisplay["class"],!0);return this.leftNavigationArrow=o.append("button").classed(l.NavigationArrow["class"]+" "+l.LeftNavigationArrow["class"],!0),this.itemsContainer=o.append("div").classed(l.ItemsContainer["class"]+" "+l.FlexDisplay["class"],!0),this.rightNavigationArrow=o.append("button").classed(l.NavigationArrow["class"]+" "+l.RightNavigationArrow["class"],!0),this.element.get(0).appendChild(a),this.bindNavigationEvents(),this.interactivityService},s.prototype.render=function(e){var t=e.data,i=e.dataView;if(!i||!t)return void this.itemsContainer.selectAll("*").remove();this.data=t,this.dataView=i;var a=this.currentViewport&&e.viewport&&(this.currentViewport.height!==e.viewport.height||this.currentViewport.width!==e.viewport.width);this.isMaxWidthCalculated()&&a||(this.calculateAndSetMaxItemWidth(),this.calculateAndSetTotalItemWidth()),this.currentViewport=e.viewport,this.updateStyle();var r=this.element.find(l.ItemsContainer.selector).width();this.itemsToDisplay=this.getNumberOfItemsToDisplay(r),0!==this.itemsToDisplay&&this.renderCore()},s.prototype.renderCore=function(){var e=this.data;if(e&&e.slicerDataPoints){this.normalizePosition(e.slicerDataPoints);var t=this.itemsToDisplay,i=this.dataStartIndex;this.container.classed(l.CanScrollRight["class"],i+this.itemsToDisplay<=e.slicerDataPoints.length-1),this.container.classed(l.CanScrollLeft["class"],i>0),this.renderItems(e.slicerSettings),this.bindInteractivityService(),i+t>=e.slicerDataPoints.length*n&&this.loadMoreData()}},s.prototype.updateStyle=function(){var e=this.currentViewport,t=this.data,a=t.slicerSettings,r=this.domHelper;this.container.classed(l.MultiSelectEnabled["class"],!a.selection.singleSelect).style({width:i.toString(e.width),height:i.toString(e.height)}),r.styleSlicerHeader(this.header,a,t.categorySourceName);var n=r.getHeaderTextProperties(a);this.header.attr("title",t.categorySourceName);var o=this.bodyViewport=r.getSlicerBodyViewport(e,a,n);this.body.style({height:i.toString(o.height),width:i.toString(o.width)})},s.prototype.renderItems=function(a){var r=this,n=this.itemsToDisplay,s=this.dataStartIndex,u=this.data.slicerDataPoints.slice(s,s+n),c=this.itemsContainer.selectAll(t.SlicerUtil.Selectors.LabelText.selector).data(u,function(e){return _.indexOf(r.data.slicerDataPoints,e)});c.enter().append("div").classed(t.SlicerUtil.Selectors.LabelText["class"]+" "+l.FlexDisplay["class"],!0),c.order(),c.style({"font-family":this.textProperties.fontFamily,"padding-left":i.toString(o.labelText.paddingLeft),"padding-right":i.toString(o.labelText.paddingRight),"margin-right":function(e,t){return r.isLastRowItem(t,n)?"0px":i.toString(o.labelText.marginRight)}}),this.domHelper.setSlicerTextStyle(c,a),c.exit().remove(),window.setTimeout(function(){c.attr("title",function(e){return e.tooltip}).text(function(e){return e.value});var i=r.element.find(t.SlicerUtil.Selectors.LabelText.selector),a=i.first(),n=a.width(),o=a.height();i.each(function(t,i){e.TextMeasurementService.wordBreakOverflowingText(i,n,o)})})},s.prototype.bindInteractivityService=function(){if(this.interactivityService&&this.body){var e=this.body,i=e.selectAll(l.ItemsContainer.selector),a=e.selectAll(t.SlicerUtil.Selectors.LabelText.selector),r=this.header.select(t.SlicerUtil.Selectors.Clear.selector),n=this.data,o={dataPoints:n.slicerDataPoints,slicerContainer:this.container,itemsContainer:i,itemLabels:a,clear:r,interactivityService:this.interactivityService,settings:n.slicerSettings},s={behaviorOptions:o,orientation:1};this.interactivityService.bind(n.slicerDataPoints,this.behavior,s,{overrideSelectionFromData:!0,hasSelectionOverride:n.hasSelectionOverride}),t.SlicerWebBehavior.styleSlicerItems(this.itemsContainer.selectAll(t.SlicerUtil.Selectors.LabelText.selector),this.interactivityService.hasSelection(),this.interactivityService.isSelectionModeInverted())}else t.SlicerWebBehavior.styleSlicerItems(this.itemsContainer.selectAll(t.SlicerUtil.Selectors.LabelText.selector),!1,!1)},s.prototype.normalizePosition=function(e){var t=this.dataStartIndex;t=Math.min(t,e.length-1),this.dataStartIndex=Math.max(t,0)},s.prototype.bindNavigationEvents=function(){this.registerMouseWheelScrollEvents(),this.registerMouseClickEvents()},s.prototype.registerMouseClickEvents=function(){var e=this,t=this.container.selectAll(l.RightNavigationArrow.selector),i=this.container.selectAll(l.LeftNavigationArrow.selector);t.on("click",function(){e.scrollRight()}),i.on("click",function(){e.scrollLeft()})},s.prototype.registerMouseWheelScrollEvents=function(){var e=this,t=this.body.node();t.addEventListener("mousewheel",function(t){e.onMouseWheel(t.wheelDelta)}),t.addEventListener("DOMMouseScroll",function(t){e.onMouseWheel(t.detail)})},s.prototype.onMouseWheel=function(e){0>e?this.scrollRight():e>0&&this.scrollLeft()},s.prototype.scrollRight=function(){var e=this.itemsToDisplay,t=this.dataStartIndex,i=this.data.slicerDataPoints.length,a=i-1;e+t>a||(t+=1===e?e:e-1,e+t>a&&(t=a-e+1),this.dataStartIndex=t,this.renderCore())},s.prototype.scrollLeft=function(){var e=this.itemsToDisplay,t=this.dataStartIndex,i=0;0!==t&&(1===e&&(t-=e),t=i>t-e?i:t-e+1,this.dataStartIndex=t,this.renderCore())},s.prototype.isLastRowItem=function(e,t){return e===t-1},s.prototype.getScaledTextWidth=function(e){return e/jsCommon.TextSizeDefaults.TextSizeMin*r},s.prototype.isMaxWidthCalculated=function(){return void 0!==this.maxItemWidth},s.prototype.calculateAndSetMaxItemWidth=function(){var t=this.getDataPointsCount(),r=0;if(0===t)return void(this.maxItemWidth=r);var n=this.data,o=n.slicerDataPoints,s=Math.min(t,a),l=jQuery.extend(!0,{},this.textProperties),u=n.slicerSettings.slicerText.textSize;l.fontSize=i.fromPoint(u);for(var c=jsCommon.WordBreaker.getMaxWordWidth,h=0;s>h;h++){var d=o[h].value;l.text=d,r=Math.max(r,c(d,e.TextMeasurementService.measureSvgTextWidth,l))}this.maxItemWidth=Math.min(r,this.getScaledTextWidth(u))},s.prototype.calculateAndSetTotalItemWidth=function(){var e=this.data,t=o.labelText.paddingLeft+o.labelText.paddingRight+o.labelText.marginRight,i=this.domHelper.getRowsOutlineWidth(e.slicerSettings.slicerText.outline,e.slicerSettings.general.outlineWeight);this.totalItemWidth=this.maxItemWidth+t+i},s.prototype.getNumberOfItemsToDisplay=function(e){var t=this.totalItemWidth;if(0===t)return 0;var i=this.getDataPointsCount(),a=Math.min(i,Math.round(e/t));return Math.max(a,1)},s.prototype.getDataPointsCount=function(){return _.size(this.data.slicerDataPoints)},s}();t.HorizontalSlicerRenderer=s;var l;!function(e){var t=jsCommon.CssConstants.createClassAndSelector;e.container=t("horizontalSlicerContainer"),e.ItemsContainer=t("slicerItemsContainer"),e.NavigationArrow=t("navigationArrow"),e.LeftNavigationArrow=t("left"),e.RightNavigationArrow=t("right"),e.MultiSelectEnabled=t("isMultiSelectEnabled"),e.FlexDisplay=t("flexDisplay"),e.CanScrollRight=t("canScrollRight"),e.CanScrollLeft=t("canScrollLeft")}(l||(l={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=t.SlicerUtil.DisplayNameKeys,a=t.SlicerUtil.DOMHelper,r=t.SlicerUtil.SettingsHelper,n=function(){function n(e){e&&(this.behavior=e.behavior),this.domHelper=new a}return n.DefaultStyleProperties=function(){return{general:{outlineColor:"#808080",outlineWeight:1,orientation:0},header:{borderBottomWidth:1,show:!0,outline:"BottomOnly",fontColor:"#000000",textSize:10},slicerText:{color:"#666666",outline:"None",textSize:10},selection:{selectAllCheckboxEnabled:!1,singleSelect:!0}}},n.prototype.init=function(e){this.initOptions=e,this.element=e.element,this.currentViewport=e.viewport,this.hostServices=e.host;var t=this.settings=n.DefaultStyleProperties();this.slicerOrientation=t.general.orientation,this.waitingForData=!1,this.initializeSlicerRenderer(this.slicerOrientation)},n.prototype.onDataChanged=function(t){var i=t.dataViews;if(!_.isEmpty(i)){var a=this.dataView;this.dataView=i[0];var r=t.operationKind!==e.VisualDataChangeOperationKind.Append&&!e.DataViewAnalysis.hasSameCategoryIdentity(a,this.dataView),n=this.dataView.metadata;this.renderAsImage=n&&!_.isEmpty(n.columns)&&n.columns[0].type&&n.columns[0].type.misc&&n.columns[0].type.misc.imageUrl?jsCommon.Utility.isValidUrl:$.noop,this.render(r,!0)}},n.prototype.onResizing=function(e){this.currentViewport=e,this.render(!1)},n.prototype.enumerateObjectInstances=function(e){return o.enumerateObjectInstances(e,this.slicerData,this.settings)},n.prototype.loadMoreData=function(){var e=this.dataView;if(e){var t=e.metadata;!this.waitingForData&&t&&t.segment&&(this.hostServices.loadMoreData(),this.waitingForData=!0)}},n.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},n.prototype.render=function(e,a){var o=this.hostServices.getLocalizedString(i.SelectAll);if(this.slicerData=t.DataConversion.convert(this.dataView,o,this.interactivityService,this.hostServices),this.slicerData){this.slicerData.slicerSettings.general.outlineWeight=Math.max(this.slicerData.slicerSettings.general.outlineWeight,0),this.settings=this.slicerData.slicerSettings;var s=r.areSettingsDefined(this.slicerData)&&this.slicerData.slicerSettings.general&&this.slicerData.slicerSettings.general.orientation?this.slicerData.slicerSettings.general.orientation:n.DefaultStyleProperties().general.orientation,l=this.orientationHasChanged(s);l&&(this.slicerOrientation=s,this.element.empty(),this.initializeSlicerRenderer(s))}this.slicerRenderer.render({dataView:this.dataView,data:this.slicerData,viewport:this.currentViewport,renderAsImage:this.renderAsImage,resetScrollbarPosition:e}),a&&(this.waitingForData=!1)},n.prototype.orientationHasChanged=function(e){return this.slicerOrientation!==e},n.prototype.initializeSlicerRenderer=function(e){switch(e){case 1:this.initializeHorizontalSlicer();break;case 0:this.initializeVerticalSlicer()}},n.prototype.initializeVerticalSlicer=function(){var e=this.slicerRenderer=new t.VerticalSlicerRenderer({domHelper:this.domHelper,behavior:this.behavior}),i=this.createInitOptions();this.interactivityService=e.init(i)},n.prototype.initializeHorizontalSlicer=function(){var e=this.slicerRenderer=new t.HorizontalSlicerRenderer({domHelper:this.domHelper,behavior:this.behavior}),i=this.createInitOptions();this.interactivityService=e.init(i)},n.prototype.createInitOptions=function(){var e=this;return{visualInitOptions:this.initOptions,loadMoreData:function(){return e.loadMoreData()}}},n}();t.Slicer=n;var o;!function(e){function t(e,t,r){if(t)switch(e.objectName){case"items":return n(t,r);case"header":return a(t,r);case"general":return o(t,r);case"selection":return i(t,r)}}function i(e,t){var i=t,a=r.areSettingsDefined(e)&&e.slicerSettings.selection,n=a&&e.slicerSettings.selection.selectAllCheckboxEnabled?e.slicerSettings.selection.selectAllCheckboxEnabled:i.selection.selectAllCheckboxEnabled,o=e&&e.slicerSettings&&e.slicerSettings.selection&&void 0!==e.slicerSettings.selection.singleSelect?e.slicerSettings.selection.singleSelect:i.selection.singleSelect;return[{selector:null,objectName:"selection",properties:{selectAllCheckboxEnabled:n,singleSelect:o}}]}function a(e,t){var i=t,a=r.areSettingsDefined(e)&&e.slicerSettings.header,n=a&&e.slicerSettings.header.fontColor?e.slicerSettings.header.fontColor:i.header.fontColor,o=a&&e.slicerSettings.header.background?e.slicerSettings.header.background:i.header.background;return[{selector:null,objectName:"header",properties:{show:i.header.show,fontColor:n,background:o,outline:i.header.outline,textSize:i.header.textSize}}]}function n(e,t){var i=t,a=r.areSettingsDefined(e)&&e.slicerSettings.slicerText,n=a&&e.slicerSettings.slicerText.color?e.slicerSettings.slicerText.color:i.slicerText.color,o=a&&e.slicerSettings.slicerText.background?e.slicerSettings.slicerText.background:i.slicerText.background;return[{selector:null,objectName:"items",properties:{fontColor:n,background:o,outline:i.slicerText.outline,textSize:i.slicerText.textSize}}]}function o(e,t){var i=t,a=r.areSettingsDefined(e)&&null!=e.slicerSettings.general,n=a&&e.slicerSettings.general.outlineColor?e.slicerSettings.general.outlineColor:i.general.outlineColor,o=a&&e.slicerSettings.general.outlineWeight?e.slicerSettings.general.outlineWeight:i.general.outlineWeight,s=a&&null!=e.slicerSettings.general.orientation?e.slicerSettings.general.orientation:i.general.orientation;return[{selector:null,objectName:"general",properties:{outlineColor:n,outlineWeight:o,orientation:s}}]}e.enumerateObjectInstances=t}(o||(o={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=t.controls.internal.TablixUtils,a=function(){function a(e,t){this.tableDataView=e,this.formatter=t}return a.prototype.getDepth=function(e){return 1},a.prototype.getLeafCount=function(e){return e.length},a.prototype.getLeafAt=function(e,t){return e[t]},a.prototype.getParent=function(e){return null},a.prototype.getIndex=function(e){return e?this.isRow(e)?e.index:this.getColumnIndex(e):-1},a.prototype.isRow=function(e){if(!e)return!1;var t=e;return void 0!==t.index&&void 0!==t.values},a.prototype.getColumnIndex=function(e){return a.getIndex(this.tableDataView.columns,e)},a.prototype.isLeaf=function(e){return!0},a.prototype.isRowHierarchyLeaf=function(e){return!1},a.prototype.isColumnHierarchyLeaf=function(e){return!0},a.prototype.isLastItem=function(e,t){return!1},a.prototype.getChildren=function(e){return null},a.prototype.getCount=function(e){return e.length},a.prototype.getAt=function(e,t){return e[t]},a.prototype.getLevel=function(e){return 0},a.prototype.getIntersection=function(e,r){var n,o=!1,s=!1,l=a.getIndex(this.tableDataView.columns,r),u=0===l?!0:!1,c=e;if(null!=c.totalCells)o=!0,n=c.totalCells[l];else{var h=this.tableDataView.visualRows[this.tableDataView.visualRows.length-1];s=h===e,n=e.values[l]}var d,p,g=this.formatter(n,r,i.TablixFormatStringProp);return i.isValidStatusGraphic(r.kpi,g)?d=i.createKpiDom(r.kpi,g):p=g,{textContent:p,domContent:d,isMeasure:r.isMeasure,isTotal:o,isBottomMost:s,showUrl:t.UrlHelper.isValidUrl(r,g),showImage:t.UrlHelper.isValidImage(r,g),isLeftMost:u}},a.prototype.getCorner=function(e,t){return null},a.prototype.headerItemEquals=function(t,i){if(t===i)return!0;if(t.displayName&&i.displayName){var a=t,r=i;return e.DataViewAnalysis.areMetadataColumnsEquivalent(a,r)}return this.isRow(t)&&this.isRow(i)?t.index===i.index:!1},a.prototype.bodyCellItemEquals=function(e,t){return e===t},a.prototype.cornerCellItemEquals=function(e,t){return!0},a.prototype.update=function(e){this.tableDataView=e},a.getIndex=function(e,t){for(var i=0,a=e.length;a>i;i++){var r=e[i];if(null!=r.index&&null!=t.index&&r.index===t.index)return i;if(t===e[i])return i}return-1},a}();t.TableHierarchyNavigator=a;var r=function(){function e(e){this.options=e}return e.prototype.onDataViewChanged=function(e){this.tableDataView=e,this.formattingProperties=e.formattingProperties},e.prototype.setTablixColumnSeparator=function(e){this.formattingProperties.columns.showSeparators&&e.extension.setColumnSeparator(this.formattingProperties.columns.separatorColor,this.formattingProperties.columns.separatorWeight)},e.prototype.setTablixRegionStyle=function(e,i,a,r,n,o){""!==i&&e.extension.setFontColor(i),a&&e.extension.setBackgroundColor(a);var s=t.VisualBorderUtil.getBorderStyleWithWeight(r,n),l=t.VisualBorderUtil.getBorderWidth(r,n);e.extension.setOutline(s,o,l)},e.prototype.onStartRenderingSession=function(){},e.prototype.onEndRenderingSession=function(){},e.prototype.bindRowHeader=function(e,t){this.ensureHeight(e,t),this.options.onBindRowHeader&&this.options.onBindRowHeader(e)},e.prototype.unbindRowHeader=function(e,t){},e.prototype.bindColumnHeader=function(t,r){var n=this,o=a.getIndex(this.tableDataView.columns,t);if(r.extension.setContainerStyle(e.columnHeaderClassName),r.extension.disableDragResize(),r.extension.setTextAndTooltip(t.displayName),this.sortIconsEnabled()&&i.appendSortImageToColumnHeader(t,r),this.options.onColumnHeaderClick){var s=function(e){var a=i.reverseSort(t.sort);n.options.onColumnHeaderClick(t.queryName?t.queryName:t.displayName,a);
};r.extension.registerClickHandler(s)}this.formattingProperties&&(this.setTablixRegionStyle(r,this.formattingProperties.header.fontColor,this.formattingProperties.header.backgroundColor,this.formattingProperties.header.outline,this.formattingProperties.general.outlineWeight,this.formattingProperties.general.outlineColor),o>0&&this.setTablixColumnSeparator(r))},e.prototype.unbindColumnHeader=function(e,t){t.extension.clearContainerStyle(),t.extension.clearTextAndTooltip(),this.sortIconsEnabled()&&i.removeSortIcons(t),this.options.onColumnHeaderClick&&t.extension.unregisterClickHandler()},e.prototype.bindBodyCell=function(t,a){t.showUrl?i.appendATagToBodyCell(t.textContent,a):t.showImage?i.appendImgTagToBodyCell(t.textContent,a):_.isEmpty(t.domContent)?t.textContent&&a.extension.setTextAndTooltip(t.textContent):$(a.extension.contentHost).append(t.domContent);var r=t.isTotal?e.footerClassName:t.isBottomMost?e.lastRowClassName:e.rowClassName;if(t.isMeasure&&(r+=" "+e.numericCellClassName),a.extension.setContainerStyle(r),this.formattingProperties){var n=t.isTotal?this.formattingProperties.totals.fontColor:this.formattingProperties.rows.fontColor,o=t.isTotal?this.formattingProperties.totals.backgroundColor:this.formattingProperties.rows.backgroundColor,s=t.isTotal?this.formattingProperties.totals.outline:this.formattingProperties.rows.outline;this.setTablixRegionStyle(a,n,o,s,this.formattingProperties.general.outlineWeight,this.formattingProperties.general.outlineColor),this.formattingProperties.rows.showSeparators&&a.extension.setRowSeparator(),t.isLeftMost||this.setTablixColumnSeparator(a)}},e.prototype.unbindBodyCell=function(e,t){t.extension.clearContainerStyle(),t.extension.clearTextAndTooltip()},e.prototype.bindCornerCell=function(e,t){},e.prototype.unbindCornerCell=function(e,t){},e.prototype.bindEmptySpaceHeaderCell=function(e){},e.prototype.unbindEmptySpaceHeaderCell=function(e){},e.prototype.bindEmptySpaceFooterCell=function(e){},e.prototype.unbindEmptySpaceFooterCell=function(e){},e.prototype.getHeaderLabel=function(e){return e.displayName},e.prototype.getCellContent=function(e){return e},e.prototype.hasRowGroups=function(){return!1},e.prototype.ensureHeight=function(t,i){if(t.values){var a=t.values.length;if(0!==a){for(var r=!0,n=0;a>n;n++)if(t.values[n]){r=!1;break}r&&(i.extension.contentHost.innerHTML=e.nonBreakingSpace)}}},e.prototype.sortIconsEnabled=function(){return 0===this.options.layoutKind},e.sortIconContainerClassName="bi-sort-icon-container",e.columnHeaderClassName="bi-table-column-header",e.rowClassName="bi-table-row",e.lastRowClassName="bi-table-last-row",e.footerClassName="bi-table-footer",e.numericCellClassName="bi-table-cell-numeric",e.nonBreakingSpace="&nbsp;",e}();t.TableBinder=r;var n=function(){function n(e){e&&(this.isFormattingPropertiesEnabled=e.isFormattingPropertiesEnabled,this.isTouchEnabled=e.isTouchEnabled)}return n.customizeQuery=function(e){var t=e.dataViewMappings[0];if(t&&t.table&&t.metadata){var a=t.table.rows,r=t.metadata.objects;a["for"]["in"].subtotalType=i.shouldShowTableTotals(r)?1:0}},n.getSortableRoles=function(){return["Values"]},n.prototype.init=function(e){this.element=e.element,this.style=e.style,this.updateViewport(e.viewport),this.formatter=t.valueFormatter.formatValueColumn,this.isInteractive=e.interactivity&&null!=e.interactivity.selection,this.getLocalizedString=e.host.getLocalizedString,this.hostServices=e.host,this.waitingForData=!1,this.lastAllowHeaderResize=!0,this.waitingForSort=!1},n.converter=function(t,a){var r=t.table,n=e.Prototype.inherit(r);n.visualRows=[];for(var o=0;o<r.rows.length;o++){var s={index:o,values:r.rows[o]};n.visualRows.push(s)}return a&&(n.formattingProperties=i.getTableFormattingProperties(t)),n},n.prototype.onResizing=function(e){this.updateViewport(e)},n.prototype.getColumnWidthManager=function(){return this.columnWidthManager},n.prototype.onDataChanged=function(t){if(this.columnWidthManager&&this.columnWidthManager.suppressOnDataChangedNotification)return void(this.columnWidthManager.suppressOnDataChangedNotification=!1);var a=this.dataView,r=t.dataViews;if(r&&r.length>0){this.dataView=r[0];var o=n.converter(this.dataView,this.isFormattingPropertiesEnabled),s=o.formattingProperties?o.formattingProperties.general.textSize:i.getTextSize(this.dataView.metadata.objects);if(t.operationKind===e.VisualDataChangeOperationKind.Append)this.hierarchyNavigator.update(o),this.tablixControl.updateModels(!1,o.visualRows),this.refreshControl(!1);else{this.createOrUpdateHierarchyNavigator(o),this.createColumnWidthManager(),this.createTablixControl(s);var l=this.tablixControl.getBinder();l.onDataViewChanged(o),this.populateColumnWidths(),this.updateInternal(this.dataView,s,a,o)}}this.waitingForData=!1,this.waitingForSort=!1},n.prototype.populateColumnWidths=function(){this.columnWidthManager&&(this.columnWidthManager.deserializeTablixColumnWidths(),this.columnWidthManager.persistColumnWidthsOnHost()&&this.persistColumnWidths(this.columnWidthManager.getVisualObjectInstancesToPersist()))},n.prototype.columnWidthChanged=function(e,t){this.columnWidthManager.columnWidthChanged(e,t),this.persistColumnWidths(this.columnWidthManager.getVisualObjectInstancesToPersist())},n.prototype.persistColumnWidths=function(e){this.hostServices.persistProperties(e)},n.prototype.updateViewport=function(e){this.currentViewport=e,this.tablixControl&&(this.tablixControl.viewport=this.currentViewport,this.verifyHeaderResize(),this.refreshControl(!1))},n.prototype.refreshControl=function(e){(t.visibilityHelper.partiallyVisible(this.element)||1===this.getLayoutKind())&&this.tablixControl.refresh(e)},n.prototype.getLayoutKind=function(){return this.isInteractive?0:1},n.prototype.createOrUpdateHierarchyNavigator=function(e){if(this.tablixControl)this.hierarchyNavigator.update(e);else{var t=new a(e,this.formatter);this.hierarchyNavigator=t}},n.prototype.createTablixControl=function(e){this.tablixControl||(this.tablixControl=this.createControl(this.hierarchyNavigator,e))},n.prototype.createColumnWidthManager=function(){var e=this;this.columnWidthManager?this.columnWidthManager.updateDataView(this.dataView):(this.columnWidthManager=new t.controls.TablixColumnWidthManager(this.dataView,!1),this.columnWidthManager.columnWidthResizeCallback=function(t,i){return e.columnWidthChanged(t,i)})},n.prototype.createControl=function(e,a){var n=this,o=this.getLayoutKind(),s={onBindRowHeader:function(e){return n.onBindRowHeader(e)},onColumnHeaderClick:function(e,t){return n.onColumnHeaderClick(e,t)},layoutKind:o},l=new r(s),u=1===o?t.controls.internal.DashboardTablixLayoutManager.createLayoutManager(l):t.controls.internal.CanvasTablixLayoutManager.createLayoutManager(l,this.columnWidthManager),c=document.createElement("div");this.element.append(c);var h={interactive:this.isInteractive,enableTouchSupport:this.isTouchEnabled,layoutKind:o,fontSize:i.getTextSizeInPx(a)};return new t.controls.TablixControl(e,u,l,c,h)},n.prototype.updateInternal=function(e,a,r,n){var o=this;1===this.getLayoutKind()&&this.tablixControl.layoutManager.adjustContentSize(t.UrlHelper.hasImageColumn(e)),this.tablixControl.fontSize=i.getTextSizeInPx(a),this.verifyHeaderResize(),this.tablixControl.updateModels(!0,n.visualRows,n.columns);var s=this.createTotalsRow(e);this.tablixControl.rowDimension.setFooter(s),this.tablixControl.viewport=this.currentViewport;var l=this.shouldClearControl(r,e);setTimeout(function(){o.refreshControl(l),o.columnWidthManager.persistAllColumnWidths(o.tablixControl.layoutManager.columnWidthsToPersist),o.columnWidthManager.persistColumnWidthsOnHost()&&o.persistColumnWidths(o.columnWidthManager.getVisualObjectInstancesToPersist())},0)},n.prototype.shouldClearControl=function(t,i){return this.waitingForSort&&t&&i?!e.DataViewAnalysis.isMetadataEquivalent(t.metadata,i.metadata):!0},n.prototype.createTotalsRow=function(e){if(!i.shouldShowTableTotals(e.metadata.objects))return null;var t=e.table.totals;if(!t||0===t.length)return null;for(var a=[],r=e.table.columns,n=0,o=r.length;o>n;++n){var s=r[n],l=t[s.index];null!=l?a.push(l):a.push(0===n?this.getLocalizedString("TableTotalLabel"):"")}return{totalCells:a}},n.prototype.onBindRowHeader=function(e){this.needsMoreData(e)&&(this.hostServices.loadMoreData(),this.waitingForData=!0)},n.prototype.onColumnHeaderClick=function(e,t){var i=[{queryName:e,sortDirection:t}],a={sortDescriptors:i};this.waitingForSort=!0,this.hostServices.onCustomSort(a)},n.prototype.needsMoreData=function(e){if(this.waitingForData||!this.dataView.metadata||!this.dataView.metadata.segment)return!1;var t=this.tablixControl.rowDimension.getItemsCount(),i=t*n.preferredLoadMoreThreshold;return this.hierarchyNavigator.getIndex(e)>=i},n.prototype.enumerateObjectInstances=function(e){var a=new t.ObjectEnumerationBuilder;return this.dataView&&i.setEnumeration(e,a,this.dataView,this.isFormattingPropertiesEnabled,t.controls.TablixType.Table),a.complete()},n.prototype.shouldAllowHeaderResize=function(){return 1===this.hostServices.getViewMode()},n.prototype.verifyHeaderResize=function(){var e=this.shouldAllowHeaderResize();e!==this.lastAllowHeaderResize&&(this.lastAllowHeaderResize=e,this.tablixControl.layoutManager.setAllowHeaderResize(e))},n.preferredLoadMoreThreshold=.8,n}();t.Table=n}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){function i(e,t){return new r(e,t)}var a=t.controls.internal.TablixUtils;t.createMatrixHierarchyNavigator=i;var r=function(){function i(e,t){this.matrix=e,this.rowHierarchy=i.wrapMatrixHierarchy(e.rows),this.columnHierarchy=i.wrapMatrixHierarchy(e.columns),this.formatter=t,this.update()}return i.prototype.getDataViewMatrix=function(){return this.matrix},i.prototype.getDepth=function(e){var t=this.getMatrixHierarchy(e);return t?Math.max(t.levels.length,1):0},i.prototype.getLeafCount=function(e){var t=this.getMatrixHierarchy(e);return t?t.leafNodes.length:0},i.prototype.getLeafAt=function(e,t){var i=this.getMatrixHierarchy(e);return i?i.leafNodes[t]:null},i.prototype.getLeafIndex=function(e){return e.leafIndex},i.prototype.getParent=function(e){return 0===e.level?null:e.parent},i.prototype.getIndex=function(e){return e.index},i.prototype.isLeaf=function(e){return!e.children||0===e.children.length},i.prototype.isRowHierarchyLeaf=function(e){return!0},i.prototype.isColumnHierarchyLeaf=function(e){return!1},i.prototype.isLastItem=function(e,t){return t[t.length-1]===e},i.prototype.getChildren=function(e){return e.children},i.prototype.getCount=function(e){return e.length},i.prototype.getAt=function(e,t){return e[t]},i.prototype.getLevel=function(e){return e.level},i.prototype.getIntersection=function(e,t){var i=e.isSubtotal===!0||t.isSubtotal===!0;if(!e.values)return{textContent:"",isSubtotal:i,isLeftMost:0===t.index};var r=e.values[t.leafIndex];if(!r)return{isSubtotal:i,isLeftMost:0===t.index};var n=this.matrix.valueSources[r.valueSourceIndex||0],o=this.formatter(r.value,n,a.TablixFormatStringProp);return a.isValidStatusGraphic(n.kpi,o)?{domContent:a.createKpiDom(n.kpi,r.value),isSubtotal:i,isLeftMost:0===t.index}:{textContent:o,isSubtotal:i,isLeftMost:0===t.index}},i.prototype.getCorner=function(e,t){var i=this.columnHierarchy.levels,a=this.rowHierarchy.levels;if(t===i.length-1||0===i.length){var r=a[e];if(r)return{metadata:r.sources[0],isColumnHeaderLeaf:!0,isRowHeaderLeaf:e===a.length-1}}if(e===a.length-1){var r=i[t];if(r)return{metadata:r.sources[0],isColumnHeaderLeaf:!1,isRowHeaderLeaf:!0}}return{metadata:null,isColumnHeaderLeaf:!1,isRowHeaderLeaf:!1}},i.prototype.headerItemEquals=function(e,t){return e===t},i.prototype.bodyCellItemEquals=function(e,t){return e===t},i.prototype.cornerCellItemEquals=function(e,t){return e===t},i.prototype.getMatrixColumnHierarchy=function(){return this.columnHierarchy},i.prototype.getMatrixRowHierarchy=function(){return this.rowHierarchy},i.prototype.update=function(e,t){void 0===t&&(t=!0),e&&(this.matrix=e,this.rowHierarchy=i.wrapMatrixHierarchy(e.rows),t&&(this.columnHierarchy=i.wrapMatrixHierarchy(e.columns))),this.updateHierarchy(this.rowHierarchy),t&&(this.updateHierarchy(this.columnHierarchy),i.updateStaticColumnHeaders(this.columnHierarchy))},i.wrapMatrixHierarchy=function(t){var i=e.Prototype.inherit(t);return i.leafNodes=[],i},i.prototype.updateHierarchy=function(e){e.leafNodes.length>0&&(e.leafNodes.length=0),e.root.children&&this.updateRecursive(e,e.root.children,null,e.leafNodes)},i.prototype.updateRecursive=function(e,i,r,n){for(var o,s=0,l=i.length;l>s;s++){var u=i[s];if(r&&(u.parent=r),o||(o=e.levels[u.level]),o){var c=o.sources[u.levelSourceIndex?u.levelSourceIndex:0],h=t.valueFormatter.getFormatString(c,a.TablixFormatStringProp);h&&(u.name=this.formatter(u.value,c,a.TablixFormatStringProp)),u.queryName=c.queryName}u.index=s,u.children&&u.children.length>0?this.updateRecursive(e,u.children,u,n):(u.leafIndex=n.length,n.push(u))}},i.updateStaticColumnHeaders=function(e){var t=e.leafNodes;if(t&&t.length>0)for(var i=e.levels[t[0].level].sources,a=0,r=t.length;r>a;a++){var n=t[a];if(!n.identity&&void 0===n.value){var o=i[n.levelSourceIndex?n.levelSourceIndex:0];o&&(n.name=o.displayName)}}},i.prototype.getMatrixHierarchy=function(e){var t=this.rowHierarchy.root.children;if(t&&e===t)return this.rowHierarchy;var i=this.columnHierarchy.root.children;return i&&e===i?this.columnHierarchy:null},i}(),n=function(){function e(e,t){this.hierarchyNavigator=e,this.options=t}return e.prototype.onDataViewChanged=function(e){this.formattingProperties=e},e.prototype.setTablixColumnSeparator=function(e){this.formattingProperties.columns.showSeparators&&e.extension.setColumnSeparator(this.formattingProperties.columns.separatorColor,this.formattingProperties.columns.separatorWeight)},e.prototype.setTablixRegionStyle=function(e,i,a,r,n,o){""!==i&&e.extension.setFontColor(i),a&&e.extension.setBackgroundColor(a);var s=t.VisualBorderUtil.getBorderStyleWithWeight(r,n),l=t.VisualBorderUtil.getBorderWidth(r,n);e.extension.setOutline(s,o,l)},e.prototype.onStartRenderingSession=function(){},e.prototype.onEndRenderingSession=function(){},e.prototype.bindRowHeader=function(t,i){var a,r=this.hierarchyNavigator&&this.hierarchyNavigator.isLeaf(t);if(a=r?t.identity?e.rowHeaderLeafClassName:0===t.level?e.rowHeaderTopLevelStaticLeafClassName:e.rowHeaderStaticLeafClassName:e.headerClassName,t.isSubtotal&&(a+=" "+e.totalClassName),i.extension.setContainerStyle(a),this.bindHeader(t,i,this.getRowHeaderMetadata(t)),this.options.onBindRowHeader&&this.options.onBindRowHeader(t),this.formattingProperties){var n=t.isSubtotal?this.formattingProperties.totals.fontColor:this.formattingProperties.rows.fontColor,o=t.isSubtotal?this.formattingProperties.totals.backgroundColor:this.formattingProperties.rows.backgroundColor,s=t.isSubtotal?this.formattingProperties.totals.outline:this.formattingProperties.rows.outline;this.setTablixRegionStyle(i,n,o,s,this.formattingProperties.general.outlineWeight,this.formattingProperties.general.outlineColor),this.formattingProperties.rows.showSeparators&&i.extension.setRowSeparator(),t.isSubtotal&&i.extension.setLeadingSpace(this.formattingProperties.totals.leadingSpace)}},e.prototype.unbindRowHeader=function(e,i){i.extension.clearContainerStyle(),i.extension.clearTextAndTooltip(),t.controls.HTMLElementUtils.clearChildren(i.extension.contentHost)},e.prototype.bindColumnHeader=function(t,i){var a,r=!1,n=this.hierarchyNavigator&&this.hierarchyNavigator.isLeaf(t);if(n){a=e.columnHeaderLeafClassName;var o=this.getSortableHeaderColumnMetadata(t);o&&this.registerColumnHeaderClickHandler(o,i),t.isSubtotal&&t.parent&&t.parent.children.length>1&&t.parent.children[0].isSubtotal&&(r=!0)}else a=e.headerClassName;t.isSubtotal&&(a+=" "+e.totalClassName),a+=" "+e.numericCellClassName,i.extension.setContainerStyle(a),this.formattingProperties&&(this.setTablixRegionStyle(i,this.formattingProperties.header.fontColor,this.formattingProperties.header.backgroundColor,this.formattingProperties.header.outline,this.formattingProperties.general.outlineWeight,this.formattingProperties.general.outlineColor),this.setTablixColumnSeparator(i)),i.extension.disableDragResize(),this.bindHeader(t,i,this.getColumnHeaderMetadata(t),r)},e.prototype.unbindColumnHeader=function(e,t){t.extension.clearContainerStyle(),t.extension.clearTextAndTooltip();var i=this.getSortableHeaderColumnMetadata(e);i&&this.unregisterColumnHeaderClickHandler(t)},e.prototype.bindBodyCell=function(t,i){var a=e.bodyCellClassName;if(t.isSubtotal&&(a+=" "+e.totalClassName),i.extension.setContainerStyle(a),t.textContent?i.extension.setTextAndTooltip(t.textContent):_.isEmpty(t.domContent)||$(i.extension.contentHost).append(t.domContent),this.formattingProperties){var r=t.isSubtotal?this.formattingProperties.totals.outline:t.isLeftMost?this.formattingProperties.values.outline:"None",n=t.isSubtotal?this.formattingProperties.totals.fontColor:this.formattingProperties.values.fontColor,o=t.isSubtotal?this.formattingProperties.totals.backgroundColor:this.formattingProperties.values.backgroundColor;this.setTablixRegionStyle(i,n,o,r,this.formattingProperties.general.outlineWeight,this.formattingProperties.general.outlineColor),t.isSubtotal&&i.extension.setLeadingSpace(this.formattingProperties.totals.leadingSpace),this.formattingProperties.rows.showSeparators&&i.extension.setRowSeparator(),this.setTablixColumnSeparator(i)}},e.prototype.unbindBodyCell=function(e,t){t.extension.clearContainerStyle(),t.extension.clearTextAndTooltip()},e.prototype.registerColumnHeaderClickHandler=function(e,t){var i=this;if(this.options.onColumnHeaderClick){var a=function(t){i.options.onColumnHeaderClick(e.queryName?e.queryName:e.displayName)};t.extension.registerClickHandler(a)}},e.prototype.unregisterColumnHeaderClickHandler=function(e){this.options.onColumnHeaderClick&&e.extension.unregisterClickHandler()},e.prototype.bindCornerCell=function(t,i){var a;if(t.isColumnHeaderLeaf){a=e.columnHeaderLeafClassName;var r=this.getSortableCornerColumnMetadata(t);r&&this.registerColumnHeaderClickHandler(r,i)}t.isRowHeaderLeaf&&(a?a+=" ":a="",a+=e.rowHeaderLeafClassName),a?i.extension.setContainerStyle(a):i.extension.setContainerStyle(e.headerClassName),i.extension.disableDragResize();var n=t.metadata?t.metadata.displayName:"";i.extension.setTextAndTooltip(n),this.formattingProperties&&this.setTablixRegionStyle(i,this.formattingProperties.header.fontColor,this.formattingProperties.header.backgroundColor,this.formattingProperties.header.outline,this.formattingProperties.general.outlineWeight,this.formattingProperties.general.outlineColor)},e.prototype.unbindCornerCell=function(e,t){t.extension.clearContainerStyle(),t.extension.clearTextAndTooltip(),e.isColumnHeaderLeaf&&this.unregisterColumnHeaderClickHandler(t)},e.prototype.bindEmptySpaceHeaderCell=function(e){},e.prototype.unbindEmptySpaceHeaderCell=function(e){},e.prototype.bindEmptySpaceFooterCell=function(e){},e.prototype.unbindEmptySpaceFooterCell=function(e){},e.prototype.getHeaderLabel=function(t){return e.getNodeLabel(t)},e.prototype.getCellContent=function(e){return e.textContent||""},e.prototype.hasRowGroups=function(){var e=this.hierarchyNavigator.getDataViewMatrix();return e&&e.rows&&e.rows.levels&&0!==e.rows.levels.length?!0:!1},e.getNodeLabel=function(e){return e.name?e.name:null!=e.value?e.value.toString():""},e.prototype.bindHeader=function(i,r,n,o){if(i.isSubtotal&&!o)return void r.extension.setTextAndTooltip(this.options.totalLabel);var s=e.getNodeLabel(i);return s?void(n&&t.UrlHelper.isValidUrl(n,s)?a.appendATagToBodyCell(i.value,r):n&&t.UrlHelper.isValidImage(n,s)?a.appendImgTagToBodyCell(i.value,r):r.extension.setTextAndTooltip(s)):void(r.extension.contentHost.innerHTML=e.nonBreakingSpace)},e.prototype.getSortableCornerColumnMetadata=function(e){return e.isColumnHeaderLeaf?e.metadata:null},e.prototype.getRowHeaderMetadata=function(e){if(this.hierarchyNavigator&&e){var t=this.hierarchyNavigator.getDataViewMatrix();if(t&&t.rows)return this.getHierarchyMetadata(t.rows,e.level)}},e.prototype.getColumnHeaderMetadata=function(e){if(this.hierarchyNavigator&&e){var t=this.hierarchyNavigator.getDataViewMatrix();if(t&&t.columns)return this.getHierarchyMetadata(t.columns,e.level)}},e.prototype.getHierarchyMetadata=function(e,t){if(e&&e.levels&&!(e.levels.length<t)){var i=e.levels[t];if(i&&i.sources&&0!==i.sources.length)return i.sources[0]}},e.prototype.getSortableHeaderColumnMetadata=function(e){var t=this.hierarchyNavigator.getDataViewMatrix();if(!t.rows||!t.rows.levels||0===t.rows.levels.length)return null;var i=t.columns?t.columns.levels.length-1:0,a=-1;if(0===i)a=e.levelSourceIndex;else if(e.isSubtotal){var r=t.valueSources&&t.valueSources.length>1;r?e.parent&&0===e.parent.level&&(a=e.levelSourceIndex):0===e.level&&(a=e.levelSourceIndex)}return-1!==a?(a=a?a:0,t.valueSources[a]):null},e.headerClassName="bi-tablix-header",e.numericCellClassName="bi-table-cell-numeric",e.columnHeaderLeafClassName="bi-tablix-column-header-leaf",e.rowHeaderLeafClassName="bi-tablix-row-header-leaf",e.rowHeaderStaticLeafClassName="bi-tablix-row-header-static-leaf",e.rowHeaderTopLevelStaticLeafClassName="bi-tablix-row-header-toplevel-static-leaf",e.bodyCellClassName="bi-matrix-body-cell",e.totalClassName="total",e.nonBreakingSpace="&nbsp;",e}();t.MatrixBinder=n;var o=function(){function r(e){e&&(this.isFormattingPropertiesEnabled=e.isFormattingPropertiesEnabled,this.isTouchEnabled=e.isTouchEnabled)}return r.customizeQuery=function(e){var t=e.dataViewMappings[0];if(t&&t.matrix&&t.metadata){var i=t.matrix;_.isEmpty(i.columns["for"]["in"].items)||(i.rows.dataReductionAlgorithm.window.count=100);var r=t.metadata.objects;i.rows["for"]["in"].subtotalType=a.shouldShowRowSubtotals(r)?2:0,i.columns["for"]["in"].subtotalType=a.shouldShowColumnSubtotals(r)?2:0}},r.getSortableRoles=function(){return["Rows","Values"]},r.prototype.init=function(e){this.element=e.element,this.style=e.style,this.updateViewport(e.viewport),this.formatter=t.valueFormatter.formatValueColumn,this.isInteractive=e.interactivity&&null!=e.interactivity.selection,this.hostServices=e.host,this.waitingForData=!1,this.lastAllowHeaderResize=!0,this.waitingForSort=!1},r.converter=function(e,t){var i;return t&&(i=a.getMatrixFormattingProperties(e)),i},r.prototype.onResizing=function(e){this.updateViewport(e)},r.prototype.getColumnWidthManager=function(){return this.columnWidthManager},r.prototype.onDataChanged=function(t){if(this.columnWidthManager&&this.columnWidthManager.suppressOnDataChangedNotification)return void(this.columnWidthManager.suppressOnDataChangedNotification=!1);var i=this.dataView;if(t.dataViews&&t.dataViews.length>0){this.dataView=t.dataViews[0];var n=r.converter(this.dataView,this.isFormattingPropertiesEnabled),o=n?n.general.textSize:a.getTextSize(this.dataView.metadata.objects);if(t.operationKind===e.VisualDataChangeOperationKind.Append){var s=i.matrix.rows.root!==this.dataView.matrix.rows.root;this.hierarchyNavigator.update(this.dataView.matrix,s),s&&this.tablixControl.updateModels(!1,this.dataView.matrix.rows.root.children,this.dataView.matrix.columns.root.children),this.refreshControl(!1)}else{this.createOrUpdateHierarchyNavigator(),this.createColumnWidthManager(),this.createTablixControl(o);var l=this.tablixControl.getBinder();l.onDataViewChanged(n),this.populateColumnWidths(),this.updateInternal(this.dataView,o,i)}}this.waitingForData=!1,this.waitingForSort=!1},r.prototype.populateColumnWidths=function(){this.columnWidthManager&&(this.columnWidthManager.deserializeTablixColumnWidths(),this.columnWidthManager.persistColumnWidthsOnHost()&&this.persistColumnWidths(this.columnWidthManager.getVisualObjectInstancesToPersist()))},r.prototype.columnWidthChanged=function(e,t){this.columnWidthManager.columnWidthChanged(e,t),this.persistColumnWidths(this.columnWidthManager.getVisualObjectInstancesToPersist())},r.prototype.persistColumnWidths=function(e){this.hostServices.persistProperties(e)},r.prototype.updateViewport=function(e){this.currentViewport=e,this.tablixControl&&(this.tablixControl.viewport=this.currentViewport,this.verifyHeaderResize(),this.refreshControl(!1))},r.prototype.refreshControl=function(e){(t.visibilityHelper.partiallyVisible(this.element)||1===this.getLayoutKind())&&this.tablixControl.refresh(e)},r.prototype.getLayoutKind=function(){return this.isInteractive?0:1},r.prototype.createOrUpdateHierarchyNavigator=function(){if(this.tablixControl)this.hierarchyNavigator.update(this.dataView.matrix);else{var e=i(this.dataView.matrix,this.formatter);this.hierarchyNavigator=e}},r.prototype.createTablixControl=function(e){this.tablixControl||(this.tablixControl=this.createControl(this.hierarchyNavigator,e))},r.prototype.createColumnWidthManager=function(){var e=this,i=this.hierarchyNavigator.getMatrixColumnHierarchy();this.columnWidthManager?this.columnWidthManager.updateDataView(this.dataView,i.leafNodes):(this.columnWidthManager=new t.controls.TablixColumnWidthManager(this.dataView,!0,i.leafNodes),this.columnWidthManager.columnWidthResizeCallback=function(t,i){return e.columnWidthChanged(t,i)})},r.prototype.createControl=function(e,i){var o=this,s=this.getLayoutKind(),l={onBindRowHeader:function(e){o.onBindRowHeader(e)},totalLabel:this.hostServices.getLocalizedString(r.TotalLabel),onColumnHeaderClick:function(e){return o.onColumnHeaderClick(e)}},u=new n(this.hierarchyNavigator,l),c=1===s?t.controls.internal.DashboardTablixLayoutManager.createLayoutManager(u):t.controls.internal.CanvasTablixLayoutManager.createLayoutManager(u,this.columnWidthManager),h=document.createElement("div");this.element.append(h);var d={interactive:this.isInteractive,enableTouchSupport:this.isTouchEnabled,fontSize:a.getTextSizeInPx(i)};return new t.controls.TablixControl(e,c,u,h,d)},r.prototype.updateInternal=function(e,i,r){var n=this;1===this.getLayoutKind()&&this.tablixControl.layoutManager.adjustContentSize(t.UrlHelper.hasImageColumn(e)),this.tablixControl.fontSize=a.getTextSizeInPx(i),this.verifyHeaderResize(),this.tablixControl.updateModels(!0,e.matrix.rows.root.children,e.matrix.columns.root.children),this.tablixControl.viewport=this.currentViewport;var o=this.shouldClearControl(r,e);setTimeout(function(){n.refreshControl(o),n.columnWidthManager.persistAllColumnWidths(n.tablixControl.layoutManager.columnWidthsToPersist),n.columnWidthManager.persistColumnWidthsOnHost()&&n.persistColumnWidths(n.columnWidthManager.getVisualObjectInstancesToPersist())},0)},r.prototype.shouldClearControl=function(t,i){return this.waitingForSort&&t&&i?!e.DataViewAnalysis.isMetadataEquivalent(t.metadata,i.metadata):!0},r.prototype.onBindRowHeader=function(e){this.needsMoreData(e)&&(this.hostServices.loadMoreData(),this.waitingForData=!0)},r.prototype.onColumnHeaderClick=function(e){var t=[{queryName:e}],i={sortDescriptors:t};this.waitingForSort=!0,this.hostServices.onCustomSort(i)},r.prototype.needsMoreData=function(e){if(this.waitingForData||!this.hierarchyNavigator.isLeaf(e)||!this.dataView.metadata||!this.dataView.metadata.segment)return!1;var t=this.tablixControl.rowDimension.getItemsCount(),i=t*r.preferredLoadMoreThreshold;return this.hierarchyNavigator.getLeafIndex(e)>=i},r.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder;return this.dataView&&a.setEnumeration(e,i,this.dataView,this.isFormattingPropertiesEnabled,t.controls.TablixType.Matrix),i.complete()},r.prototype.shouldAllowHeaderResize=function(){return 1===this.hostServices.getViewMode()},r.prototype.verifyHeaderResize=function(){var e=this.shouldAllowHeaderResize();e!==this.lastAllowHeaderResize&&(this.lastAllowHeaderResize=e,this.tablixControl.layoutManager.setAllowHeaderResize(e))},r.preferredLoadMoreThreshold=.8,r.TotalLabel="TableTotalLabel",r}();t.Matrix=o}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.CssConstants,a=function(){function a(e){this.tooltipsEnabled=e&&e.tooltipsEnabled,e&&e.animator&&(this.animator=e.animator,this.isScrollable=e.isScrollable?e.isScrollable:!1,this.behavior=e.behavior)}return a.getLayout=function(e,i){var r=t.dataLabelUtils.createColumnFormatterCacheManager(),n=e.showCategory,o=e.show||e.showCategory;return{shapeClass:function(e){return a.getNodeClass(e,!1)},shapeLayout:a.createTreemapShapeLayout(!1),highlightShapeClass:function(e){return a.getNodeClass(e,!0)},highlightShapeLayout:a.createTreemapShapeLayout(!0),zeroShapeLayout:a.createTreemapZeroShapeLayout(),majorLabelClass:function(e){return a.MajorLabelClassName},majorLabelLayout:{x:function(e){return e.x+a.TextMargin},y:function(e){return e.y+a.TextMargin+a.MajorLabelTextSize}},majorLabelText:function(t){return a.createMajorLabelText(t,e,i,r)},minorLabelClass:function(e){return a.MinorLabelClassName},minorLabelLayout:{x:function(e){return e.x+a.TextMargin},y:function(e){return e.y+e.dy-a.TextMargin}},minorLabelText:function(t){return a.createMinorLabelText(t,e,i,r)},areMajorLabelsEnabled:function(){return n},areMinorLabelsEnabled:function(){return o}}},a.prototype.init=function(e){this.options=e;var i=e.element;i.empty(),this.svg=d3.select(i.get(0)).append("svg").style("position","absolute").classed(a.ClassName,!0),this.shapeGraphicsContext=this.svg.append("g").classed(a.ShapesClassName,!0),this.labelGraphicsContext=this.svg.append("g").classed(a.LabelsGroupClassName,!0),this.element=i,this.currentViewport={height:e.viewport.height,width:e.viewport.width},this.style=e.style,this.treemap=d3.layout.treemap().sticky(!1).sort(function(e,t){return e.size-t.size}).value(function(e){return e.size}).round(!1),this.behavior&&(this.interactivityService=t.createInteractivityService(e.host)),this.legend=t.createLegend(i,e.interactivity&&e.interactivity.isInteractiveLegend,this.interactivityService,this.isScrollable),this.colors=this.style.colorPalette.dataColors,this.hostService=e.host},a.converter=function(i,r,n,o,s,l){var u,c={key:"root",name:"root",children:[],selected:!1,highlightMultiplier:0,identity:t.SelectionId.createNull(),color:void 0},h=[],d=[],p="",g=new t.ColorHelper(r,t.treemapProps.dataPoint.fill),m=void 0;if(i&&i.metadata&&i.metadata.objects){var f=i.metadata.objects;n.show=e.DataViewObjects.getValue(f,t.treemapProps.labels.show,n.show),n.labelColor=e.DataViewObjects.getFillColor(f,t.treemapProps.labels.color,n.labelColor),n.displayUnits=e.DataViewObjects.getValue(f,t.treemapProps.labels.labelDisplayUnits,n.displayUnits),n.precision=e.DataViewObjects.getValue(f,t.treemapProps.labels.labelPrecision,n.precision),n.showCategory=e.DataViewObjects.getValue(f,t.treemapProps.categoryLabels.show,n.showCategory)}if(i&&i.categorical&&i.categorical.values){var y=i.categorical,v=y.values;u=!!(v.length>0&&v[0].highlights);var b=t.treemapProps.general.formatString,C=a.getValuesFromCategoricalDataView(y,u),S=C.values,x=C.highlights,w=C.totalValue;C.highlightsOverflow&&(u=!1,S=x);var D=a.getCullableValue(w,s),P=v.grouped(),L=P&&P.length>0&&P[0].values&&P[0].values.length>1,N=!!v.source;m=!1;var T=void 0,V=void 0;if(null!=y.categories||_.isEmpty(S)){if(y.categories&&y.categories.length>0){var M=y.categories[0],A=v.length,R=t.valueFormatter.getFormatString(M.source,b);p=M.source?M.source.displayName:"";for(var I=void 0,F=0,O=S.length;O>F;F++){var G=t.SelectionIdBuilder.builder().withCategory(M,F).createSelectionId(),z=JSON.stringify({nodeKey:G.getKey(),depth:1}),f=M.objects&&M.objects[F],H=g.getColorForSeriesValue(f,M.identityFields,M.values[F]),k=t.valueFormatter.format(M.values[F],R),E=S[F][0],W=u&&x?x[F][0]:void 0;I=i.categorical;var B=t.TooltipBuilder.createTooltipInfo(b,I,k,E),U=void 0;void 0!==W&&(U=t.TooltipBuilder.createTooltipInfo(b,I,k,E,null,null,0,F,W));var j={key:z,name:k,color:H,selected:!1,identity:G,tooltipInfo:B,highlightedTooltipInfo:U,labelFormatString:1===A?t.valueFormatter.getFormatString(y.values[0].source,b):R};d.push({label:k,color:H,icon:t.LegendIcon.Box,identity:G,selected:!1});for(var K=0,Y=0,X=1===A&&null==v[0].source.groupName,q=S[F],$=0,Q=q.length;Q>$;$++){
var Z=v[$],J=q[$],ee=void 0;if(T=D>J,a.checkValueForShape(J)&&!T){if(K+=J,u&&(ee=x[F][$],Y+=ee),!X){var te=null;te=L?Z.source.displayName:Z.source.groupName;var ie=I?I.values:null,ae=L?Z.source.queryName:void 0,re=t.SelectionIdBuilder.builder().withCategory(M,F).withSeries(ie,Z).withMeasure(ae).createSelectionId(),ne=JSON.stringify({nodeKey:re.getKey(),depth:2}),oe=u&&0!==ee?ee:void 0;I=i.categorical;var se=t.TooltipBuilder.createTooltipInfo(b,I,k,J,null,null,$,F),le=void 0;void 0!==oe&&(le=t.TooltipBuilder.createTooltipInfo(b,I,k,J,null,null,$,F,oe));var ue={key:ne,name:te,size:J,color:H,selected:!1,identity:re,tooltipInfo:se,highlightedTooltipInfo:le,labelFormatString:t.valueFormatter.getFormatString(Z.source,b)};u&&(ue.highlightMultiplier=J?ee/J:0),null==j.children&&(j.children=[]),j.children.push(ue),h.push(ue)}}else m=m||T}a.checkValueForShape(K)&&(j.size=K,c.children.push(j),h.push(j)),u&&(j.highlightMultiplier=K?Y/K:0)}}}else for(var F=0,O=S[0].length;O>F;F++){var E=S[0][F];if(a.checkValueForShape(E))if(D>E)m=m||T;else{var Z=v[F],ce=t.converterHelper.getFormattedLegendLabel(Z.source,v,b),G=N?t.SelectionId.createWithId(v[F].identity):t.SelectionId.createWithMeasure(v[F].source.queryName),z=G.getKey(),H=N?g.getColorForSeriesValue(P[F]&&P[F].objects,y.values.identityFields,t.converterHelper.getSeriesName(Z.source)):g.getColorForMeasure(Z.source.objects,Z.source.queryName),W=u&&0!==V?V:void 0,I=i.categorical,he=F,B=t.TooltipBuilder.createTooltipInfo(b,I,ce,E,null,null,he,F),U=void 0;void 0!==W&&(U=t.TooltipBuilder.createTooltipInfo(b,I,ce,E,null,null,he,F,W));var j={key:z,name:ce,size:E,color:H,selected:!1,identity:G,tooltipInfo:B,highlightedTooltipInfo:U,labelFormatString:t.valueFormatter.getFormatString(Z.source,b)};u&&x&&(j.highlightMultiplier=E?x[0][F]/E:0),c.children.push(j),h.push(j),d.push({label:ce,color:H,icon:t.LegendIcon.Box,identity:G,selected:!1})}}}return o&&(o.applySelectionStateToData(h),o.applySelectionStateToData(d)),{root:c,hasHighlights:u,legendData:{title:p,dataPoints:d,fontSize:t.SVGLegend.DefaultFontSizeInPt},dataLabelsSettings:n,legendObjectProperties:l,dataWasCulled:m}},a.getValuesFromCategoricalDataView=function(e,t){var i,a=e.values;a&&null==e.categories?i=1:a&&e.categories&&e.categories.length>0&&(i=e.categories[0].values.length);for(var r=[],n=[],o=0,s=0;i>s;s++)r.push([]),t&&n.push([]);for(var l,u=0;u<a.length;u++)for(var c=a[u],s=0;i>s;s++){var h=c.values[s];if(r[s].push(h),o+=isNaN(h)?0:h,t){var d=c.highlights[s];d||(d=0),n[s].push(d),d>h&&(l=!0)}}return{values:r,highlights:t?n:void 0,highlightsOverflow:t?l:void 0,totalValue:o}},a.getCullableValue=function(e,t){var i=t.width*t.height,r=a.CullableArea/i;return r*e},a.prototype.update=function(e){var i=this.dataViews=e.dataViews;this.currentViewport=e.viewport;var r=i&&i.length>0&&i[0].categorical?i[0].categorical:void 0,n=t.dataLabelUtils.getDefaultTreemapLabelSettings(),o=null;if(r){var s,l=i[0],u=l.metadata;u&&(s=u.objects),s&&(o=s.legend),this.data=a.converter(l,this.colors,n,this.interactivityService,this.currentViewport,o)}else{var c={key:"root",name:"root",children:[],selected:!1,highlightMultiplier:0,identity:t.SelectionId.createNull(),color:void 0},h={title:"",dataPoints:[]},d={root:c,hasHighlights:!1,legendData:h,dataLabelsSettings:n,dataWasCulled:!1};this.data=d}if(this.updateInternal(e.suppressAnimations),i){var p=t.getInvalidValueWarnings(i,!1,!1,!1);this.data.dataWasCulled&&p.unshift(new t.GeometryCulledWarning),this.hostService.setWarnings(p)}},a.prototype.onDataChanged=function(e){this.update({suppressAnimations:e.suppressAnimations,dataViews:e.dataViews,viewport:this.currentViewport})},a.prototype.onResizing=function(e){this.update({suppressAnimations:!0,dataViews:this.dataViews,viewport:e})},a.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},a.prototype.enumerateObjectInstances=function(e){var i=this.data;if(i){var a=e.objectName,r=new t.ObjectEnumerationBuilder,n=this.data.dataLabelsSettings?this.data.dataLabelsSettings:t.dataLabelUtils.getDefaultTreemapLabelSettings();switch(a){case"dataPoint":var o=this.dataViews&&this.dataViews.length>0&&this.dataViews[0]&&this.dataViews[0].categorical,s=t.GradientUtils.hasGradientRole(o);s||this.enumerateDataPoints(r,i);break;case"legend":return this.enumerateLegend(i);case"labels":var l={enumeration:r,dataLabelsSettings:n,show:!0,displayUnits:!0,precision:!0};t.dataLabelUtils.enumerateDataLabels(l);break;case"categoryLabels":t.dataLabelUtils.enumerateCategoryLabels(r,n,!1,!0)}return r.complete()}},a.prototype.enumerateDataPoints=function(e,t){var i=t.root.children;if(!_.isEmpty(i))for(var a=0;a<i.length;a++){var r=i[a];e.pushInstance({displayName:r.name,selector:r.identity.getSelector(),properties:{fill:{solid:{color:r.color}}},objectName:"dataPoint"})}},a.prototype.enumerateLegend=function(i){var a={legend:i.legendObjectProperties},r=e.DataViewObjects.getValue(a,t.treemapProps.legend.show,this.legend.isVisible()),n=e.DataViewObjects.getValue(a,t.treemapProps.legend.showTitle,!0),o=e.DataViewObjects.getValue(a,t.treemapProps.legend.titleText,this.data.legendData.title),s=e.DataViewObject.getValue(a,t.legendProps.labelColor,this.data.legendData?this.data.legendData.labelColor:t.LegendData.DefaultLegendLabelFillColor),l=e.DataViewObject.getValue(a,t.legendProps.fontSize,this.data.legendData&&this.data.legendData.fontSize?this.data.legendData.fontSize:t.SVGLegend.DefaultFontSizeInPt);return[{selector:null,objectName:"legend",properties:{show:r,position:t.LegendPosition[this.legend.getOrientation()],showTitle:n,titleText:o,labelColor:s,fontSize:l}}]},a.checkValueForShape=function(e){return e?e>0:!1},a.prototype.calculateTreemapSize=function(){var e=this.legend.getMargins();return{height:this.currentViewport.height-e.height,width:this.currentViewport.width-e.width}},a.prototype.initViewportDependantProperties=function(e){void 0===e&&(e=0);var i=this.calculateTreemapSize();this.svg.attr({width:i.width,height:i.height}),t.Legend.positionChartArea(this.svg,this.legend),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)},a.hasChildrenWithIdentity=function(e){var t=e.children;if(!t)return!1;var i=t.length;if(0===i)return!1;for(var a=i-1;a>=0;a--)if(t[a].identity.hasIdentity())return!0;return!1},a.canDisplayMajorLabel=function(e){if(1!==e.depth)return!1;if(_.isEmpty(e.name))return!1;var t=e.dx-2*a.TextMargin;if(t<a.MinTextWidthForMajorLabel)return!1;var i=a.MajorLabelTextSize+2*a.TextMargin;return e.dy<i?!1:!0},a.canDisplayMinorLabel=function(e,t){if(e.depth<1||e.depth>2)return!1;if(1===e.depth&&(e.children||!t.show))return!1;if(_.isEmpty(e.name))return!1;var i=e.dx-2*a.TextMargin;if(i<a.MinTextWidthForMinorLabel)return!1;var r=a.MinorLabelTextSize+2*a.TextMargin;if(e.dy<r)return!1;if(2===e.depth){var n=e.parent,o=Math.max(n.y+a.MajorLabelTextSize+2*a.TextMargin,e.y);if(e.y+e.dy-o<r)return!1}return!0},a.createMajorLabelText=function(t,i,r,n){var o=t.dx-2*a.TextMargin,s=a.MajorLabelTextProperties,l={text:t.name,fontFamily:s.fontFamily,fontSize:s.fontSize};return e.TextMeasurementService.getTailoredTextOrDefault(l,o)},a.createMinorLabelText=function(e,i,r,n){var o=e.dx-2*a.TextMargin,s=e.name;if(i.show){var l=n.getOrCreate(e.labelFormatString,i,r);s=t.dataLabelUtils.getLabelFormattedText({label:e.value,maxWidth:o,formatter:l}),i.showCategory&&2===e.depth&&(s=t.dataLabelUtils.getLabelFormattedText({label:e.name,maxWidth:o})+" "+s)}return t.dataLabelUtils.getLabelFormattedText({label:s,maxWidth:o,fontSize:i.fontSize})},a.getFill=function(e,t){return e.depth>1&&!e.identity.hasIdentity()&&!t?i.noneValue:a.hasChildrenWithIdentity(e)?i.noneValue:e.color},a.getFillOpacity=function(e,t,i,r){return i?r?null:a.DimmedShapeOpacity.toString():!t||e.selected?null:e.depth>1&&e.parent.selected?null:a.hasChildrenWithIdentity(e)?null:a.DimmedShapeOpacity.toString()},a.prototype.updateInternal=function(e){var i=this.data,r=i&&i.hasHighlights,n=i?i.dataLabelsSettings:null,o=t.AnimatorCommon.GetAnimationDuration(this.animator,e);this.options.interactivity&&this.options.interactivity.isInteractiveLegend||!this.data||this.renderLegend(),this.initViewportDependantProperties(o);var s=this.calculateTreemapSize();this.treemap.size([s.width,s.height]);var l=i&&i.root?this.treemap.nodes(i.root):[],u=l.filter(function(e){return null!=e.highlightMultiplier&&(!e.children||0===e.children.length)}),c=[],h=[],d=null;n.showCategory&&(c=l.filter(function(e){return a.canDisplayMajorLabel(e)})),(n.show||n.showCategory)&&(h=l.filter(function(e){return a.canDisplayMinorLabel(e,n)}),0===n.displayUnits&&(d=d3.max(h,function(e){return Math.abs(e.value)})));var p,g,m,f,y,v=a.getLayout(n,d);if(this.animator&&!e){var b={viewModel:i,nodes:l,highlightNodes:u,majorLabeledNodes:c,minorLabeledNodes:h,shapeGraphicsContext:this.shapeGraphicsContext,labelGraphicsContext:this.labelGraphicsContext,interactivityService:this.interactivityService,layout:v,labelSettings:n};y=this.animator.animate(b),p=y.shapes,g=y.highlightShapes,m=y.majorLabels,f=y.minorLabels}if(!this.animator||e||y.failed){var C=this.interactivityService&&this.interactivityService.hasSelection(),S=this.shapeGraphicsContext;p=a.drawDefaultShapes(S,l,C,r,v),g=a.drawDefaultHighlightShapes(S,u,C,r,v);var x=this.labelGraphicsContext;m=a.drawDefaultMajorLabels(x,c,n,v),f=a.drawDefaultMinorLabels(x,h,n,v)}if(this.interactivityService){var w={shapes:p,highlightShapes:g,majorLabels:m,minorLabels:f,nodes:l,hasHighlights:i.hasHighlights};this.interactivityService.bind(l,this.behavior,w)}this.tooltipsEnabled&&(t.TooltipManager.addTooltip(p,function(e){return e.data.tooltipInfo}),t.TooltipManager.addTooltip(g,function(e){return e.data.highlightedTooltipInfo})),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)},a.prototype.renderLegend=function(){var e=this.data.legendObjectProperties;if(e){var i=this.data.legendData;t.LegendData.update(i,e);var a=e[t.legendProps.position];a&&this.legend.changeOrientation(t.LegendPosition[a]),this.legend.drawLegend(i,this.currentViewport)}else this.legend.changeOrientation(t.LegendPosition.Top),this.legend.drawLegend({dataPoints:[]},this.currentViewport)},a.getNodeClass=function(e,t){var i;switch(e.depth){case 1:i=a.ParentGroupClassName;break;case 2:i=a.NodeGroupClassName;break;case 0:i=a.RootNodeClassName}return i+=" "+(t?a.HighlightNodeClassName:a.TreemapNodeClassName)},a.createTreemapShapeLayout=function(e){return void 0===e&&(e=!1),{x:function(e){return e.x},y:function(t){return t.y+(e?t.dy*(1-t.highlightMultiplier):0)},width:function(e){return Math.max(0,e.dx)},height:function(t){return Math.max(0,t.dy*(e?t.highlightMultiplier:1))}}},a.createTreemapZeroShapeLayout=function(){return{x:function(e){return e.x},y:function(e){return e.y+e.dy},width:function(e){return Math.max(0,e.dx)},height:function(e){return 0}}},a.drawDefaultShapes=function(e,t,i,r,n){var o=!1,s=e.selectAll("."+a.TreemapNodeClassName).data(t,function(e){return e.key});return s.enter().append("rect").attr("class",n.shapeClass),s.style("fill",function(e){return a.getFill(e,o)}).style("fill-opacity",function(e){return a.getFillOpacity(e,i,r,o)}).attr(n.shapeLayout),s.exit().remove(),s},a.drawDefaultHighlightShapes=function(e,t,i,r,n){var o=!0,s=e.selectAll("."+a.HighlightNodeClassName).data(t,function(e){return e.key+"highlight"});return s.enter().append("rect").attr("class",n.highlightShapeClass),s.style("fill",function(e){return a.getFill(e,o)}).style("fill-opacity",function(e){return a.getFillOpacity(e,i,r,o)}).attr(n.highlightShapeLayout),s.exit().remove(),s},a.drawDefaultMajorLabels=function(e,t,i,r){var n=e.selectAll("."+a.MajorLabelClassName).data(t,function(e){return e.key});return n.enter().append("text").attr("class",r.majorLabelClass),n.attr(r.majorLabelLayout).text(r.majorLabelText).style("fill",function(){return i.labelColor}),n.exit().remove(),n},a.drawDefaultMinorLabels=function(e,t,i,r){var n=e.selectAll("."+a.MinorLabelClassName).data(t,function(e){return e.key});return n.enter().append("text").attr("class",r.minorLabelClass),n.attr(r.minorLabelLayout).text(r.minorLabelText).style("fill",function(){return i.labelColor}),n.exit().remove(),n},a.cleanMinorLabels=function(e){var t=[],i=e.selectAll("."+a.LabelsGroupClassName).selectAll("."+a.MinorLabelClassName).data(t);i.exit().remove()},a.DimmedShapeOpacity=.4,a.ClassName="treemap",a.LabelsGroupClassName="labels",a.MajorLabelClassName="majorLabel",a.MinorLabelClassName="minorLabel",a.ShapesClassName="shapes",a.TreemapNodeClassName="treemapNode",a.RootNodeClassName="rootNode",a.ParentGroupClassName="parentGroup",a.NodeGroupClassName="nodeGroup",a.HighlightNodeClassName="treemapNodeHighlight",a.TextMargin=5,a.MinorLabelTextSize=10,a.MinTextWidthForMinorLabel=18,a.MajorLabelTextSize=12,a.MinTextWidthForMajorLabel=22,a.MajorLabelTextProperties={fontFamily:"wf_segoe-ui_normal",fontSize:a.MajorLabelTextSize+"px"},a.CullableArea=9,a}();t.Treemap=a}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=e.visuals.KpiUtil.getKpiImageMetadata,a=jsCommon.CssConstants.createClassAndSelector,r=function(r){function n(t){r.call(this,n.cardClassName),this.isScrollable=!1,this.displayUnitSystemType=e.DisplayUnitSystemType.WholeUnits,t&&(this.isScrollable=!!t.isScrollable,t.animator&&(this.animator=t.animator),null!=t.displayUnitSystemType&&(this.displayUnitSystemType=t.displayUnitSystemType))}return __extends(n,r),n.prototype.init=function(e){this.animationOptions=e.animation;var t=e.element;this.kpiImage=d3.select(t.get(0)).append("div").classed(n.KPIImage["class"],!0);var i=this.svg=d3.select(t.get(0)).append("svg");this.graphicsContext=i.append("g"),this.currentViewport=e.viewport,this.hostServices=e.host,this.style=e.style,this.updateViewportProperties(),this.isScrollable&&(i.attr("class",n.cardClassName),this.labelContext=i.append("g"))},n.prototype.onDataChanged=function(i){var a,r=i.dataViews[0];if(r){this.getMetaDataColumn(r),r.single&&(a=r.single.value),this.cardFormatSetting=this.getDefaultFormatSettings();var n=r.metadata;if(n){var o=n.objects;if(o){var s=this.cardFormatSetting.labelSettings;s.labelColor=e.DataViewObjects.getFillColor(o,t.cardProps.labels.color,s.labelColor),s.precision=e.DataViewObjects.getValue(o,t.cardProps.labels.labelPrecision,s.precision),s.fontSize=e.DataViewObjects.getValue(o,t.cardProps.labels.fontSize,s.fontSize),s.precision!==t.dataLabelUtils.defaultLabelPrecision&&s.precision<0&&(s.precision=0),s.displayUnits=e.DataViewObjects.getValue(o,t.cardProps.labels.labelDisplayUnits,s.displayUnits),s.showCategory=e.DataViewObjects.getValue(o,t.cardProps.categoryLabels.show,s.showCategory),s.categoryLabelColor=e.DataViewObjects.getFillColor(o,t.cardProps.categoryLabels.color,s.categoryLabelColor),this.cardFormatSetting.wordWrap=e.DataViewObjects.getValue(o,t.cardProps.wordWrap.show,this.cardFormatSetting.wordWrap),this.cardFormatSetting.textSize=e.DataViewObjects.getValue(o,t.cardProps.categoryLabels.fontSize,this.cardFormatSetting.textSize)}}}this.updateInternal(a,!0,!0)},n.prototype.onResizing=function(e){this.currentViewport=e,this.updateViewportProperties(),this.updateInternal(this.value,!0,!0)},n.prototype.updateViewportProperties=function(){var e=this.currentViewport;this.svg.attr("width",e.width).attr("height",e.height)},n.prototype.setTextProperties=function(e,t){n.cardTextProperties.fontSize=jsCommon.PixelConverter.fromPoint(t),n.cardTextProperties.text=e},n.prototype.getCardFormatTextSize=function(){return this.cardFormatSetting.textSize},n.prototype.getAdjustedFontHeight=function(e,t,i){var a=r.prototype.getAdjustedFontHeight.call(this,e,t,i);return Math.min(a,n.DefaultStyle.card.maxFontSize)},n.prototype.clear=function(e){void 0===e&&(e=!1),this.svg.select(n.Value.selector).text(""),e||this.svg.select(n.Label.selector).text(""),r.prototype.clear.call(this)},n.prototype.updateInternal=function(a,r,o){void 0===o&&(o=!1);var s=this.value,l=t.AnimatorCommon.GetAnimationDuration(this.animator,r);if(void 0===a)return void(void 0!==s&&this.clear());var u=this.metaDataColumn,c=this.cardFormatSetting.labelSettings,h=0===c.displayUnits,d=this.getFormatString(u),p=t.valueFormatter.create({format:d,value:h?a:c.displayUnits,precision:t.dataLabelUtils.getLabelPrecision(c.precision,d),displayUnitSystemType:h&&c.precision===t.dataLabelUtils.defaultLabelPrecision?this.displayUnitSystemType:e.DisplayUnitSystemType.WholeUnits,formatSingleValues:h?!0:!1,allowFormatBeautification:!0,columnType:u?u.type:void 0}),g=this.cardFormatSetting,m=jsCommon.PixelConverter.fromPointToPixel(c.fontSize),f=n.DefaultStyle.value;this.setTextProperties(a,this.getCardFormatTextSize());var y=e.TextMeasurementService.estimateSvgTextHeight(n.cardTextProperties),v=this.currentViewport.width,b=this.currentViewport.height,C=this.getTranslateX(v),S=(b-y-m)/2,x=i(u,a,1);if(this.isScrollable){if(!o&&s===a)return;s!==a&&(a=p.format(a));var w=u?u.displayName:void 0,D=c.showCategory?[w]:[],P=this.getTranslateY(m+y+S),L=this.labelContext.attr("transform",t.SVGUtil.translate(C,P)).selectAll("text").data(D);L.enter().append("text").attr("class",n.Label["class"]),L.text(function(e){return e}).style({"font-size":jsCommon.PixelConverter.fromPoint(this.getCardFormatTextSize()),fill:c.categoryLabelColor,"text-anchor":this.getTextAnchor()});var _=L.node();if(_&&(g.wordWrap?e.TextMeasurementService.wordBreak(_,v/2,b-P):L.call(t.AxisHelper.LabelLayoutStrategy.clip,v,e.TextMeasurementService.svgEllipsis)),L.append("title").text(function(e){return e}),x)this.graphicsContext.selectAll("text").remove(),this.displayStatusGraphic(x,C,S,f);else{this.kpiImage.selectAll("div").remove();var N=this.graphicsContext.attr("transform",t.SVGUtil.translate(C,this.getTranslateY(m+S))).selectAll("text").data([a]);N.enter().append("text").attr("class",n.Value["class"]),N.text(function(e){return e}).style({"font-size":jsCommon.PixelConverter.fromPoint(c.fontSize),fill:c.labelColor,"font-family":f.fontFamily,"text-anchor":this.getTextAnchor()}),N.call(t.AxisHelper.LabelLayoutStrategy.clip,v,e.TextMeasurementService.svgEllipsis),N.append("title").text(function(e){return e}),N.exit().remove()}}else x?(this.graphicsContext.selectAll("text").remove(),this.displayStatusGraphic(x,C,S,f)):(this.kpiImage.selectAll("div").remove(),this.doValueTransition(s,a,this.displayUnitSystemType,this.animationOptions,l,o,p),this.graphicsContext.call(t.tooltipUtils.tooltipUpdate,[a]));this.value=a},n.prototype.displayStatusGraphic=function(e,i,a,r){this.graphicsContext.selectAll("text").remove();var n=this.kpiImage.select("div");(!n||n.empty())&&(n=this.kpiImage.append("div")),n.attr("class",e["class"]).style("position","absolute");var o=n.node().offsetWidth,s=n.node().offsetHeight;n.style("transform",t.SVGUtil.translateWithPixels(i-o/2,this.getTranslateY(r.textSize+a)-s))},n.prototype.getDefaultFormatSettings=function(){return{labelSettings:t.dataLabelUtils.getDefaultCardLabelSettings(n.DefaultStyle.value.color,n.DefaultStyle.label.color,n.DefaultStyle.value.textSize),wordWrap:!1,textSize:n.DefaultStyle.label.textSize}},n.prototype.enumerateObjectInstances=function(e){this.cardFormatSetting||(this.cardFormatSetting=this.getDefaultFormatSettings());var i=this.cardFormatSetting,a=new t.ObjectEnumerationBuilder;switch(e.objectName){case"categoryLabels":t.dataLabelUtils.enumerateCategoryLabels(a,i.labelSettings,!0,!0,i.textSize);break;case"labels":var r={enumeration:a,dataLabelsSettings:i.labelSettings,show:!0,displayUnits:!0,precision:!0,fontSize:!0};t.dataLabelUtils.enumerateDataLabels(r);break;case"wordWrap":a.pushInstance({objectName:"wordWrap",selector:null,properties:{show:i.wordWrap}})}return a.complete()},n.cardClassName="card",n.Label=a("label"),n.Value=a("value"),n.KPIImage=a("caption"),n.cardTextProperties={fontSize:null,text:null,fontFamily:t.dataLabelUtils.LabelTextProperties.fontFamily},n.DefaultStyle={card:{maxFontSize:200},label:{textSize:12,color:"#a6a6a6"},value:{textSize:27,color:"#333333",fontFamily:"wf_segoe-ui_Semibold"}},n}(t.AnimatedText);t.Card=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i;!function(e){e[e.Sad=0]="Sad",e[e.Meh=1]="Meh",e[e.Happy=2]="Happy"}(i||(i={}));var a=function(){function a(){}return a.converter=function(e){return{}},a.getGaugeData=function(e){var i={max:100,min:0,target:void 0,total:0,tooltipItems:[]};if(e&&e.categorical&&e.categorical.values&&e.metadata&&e.metadata.columns)for(var a=e.categorical.values,r=e.metadata.columns,n=0;n<a.length;n++){var o=r[n],s=a[n].values[0]||0;o&&o.roles&&(o.roles[t.gaugeRoleNames.y]?(i.total=s,s&&i.tooltipItems.push({value:s,metadata:a[n]})):o.roles[t.gaugeRoleNames.minValue]?i.min=s:o.roles[t.gaugeRoleNames.maxValue]?i.max=s:o.roles[t.gaugeRoleNames.targetValue]&&(i.target=s,s&&i.tooltipItems.push({value:s,metadata:a[n]})))}return i},a.prototype.init=function(e){var t=this;this.rootElem=e.element,this.rootElem.addClass("owlGaugeVisual"),this.svgTailElem=$(a.owlTailSvg),this.svgBgElem=$(a.visualBgSvg),this.svgBodyElem=$(a.owlBodySvg),this.rootElem.append(this.svgBgElem).append(this.svgTailElem).append(this.svgBodyElem),a.OwlDemoMode&&window.setInterval(function(){var e=100*Math.random()+1;t.updateGauge(e)},2e3),this.updateViewportSize(e.viewport.width,e.viewport.height)},a.prototype.update=function(e){this.updateViewportSize(e.viewport.width,e.viewport.height);var t=e.dataViews.length>0?e.dataViews[0]:null;if(t){var i=a.getGaugeData(e.dataViews[0]),r=(i.total-i.min)/(i.max-i.min);this.updateGauge(100*r|0)}else this.updateGauge(0)},a.prototype.updateGauge=function(e){if(e>=0&&100>=e){var t=-180+180*e/100;this.svgBgElem.css({transform:"rotate("+t+"deg)"}),e>=66?this.happinessLevel=i.Happy:e>=33?this.happinessLevel=i.Meh:this.happinessLevel=i.Sad}},Object.defineProperty(a.prototype,"happinessLevel",{set:function(e){switch(this.rootElem.removeClass("sad").removeClass("meh").removeClass("happy"),e){case i.Sad:this.rootElem.addClass("sad");break;case i.Meh:this.rootElem.addClass("meh");break;case i.Happy:this.rootElem.addClass("happy")}},enumerable:!0,configurable:!0}),a.prototype.updateViewportSize=function(e,t){var i=this,r=window.setImmediate||window.requestAnimationFrame;r(function(){i.rootElem.css({height:t,width:e}),i.svgBodyElem.height(i.svgBodyElem.width()*a.owlBodyHeightMultiplier),i.svgBgElem.height(i.svgBgElem.width()*a.visualBgHeightMultiplier),i.svgTailElem.height(i.svgTailElem.width()*a.owlTailHeightMultiplier)})},a.owlBodySvg='<svg version="1.1" class="owlGaugeBody" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 267.7 291.2" style="enable-background:new 0 0 267.7 291.2;" xml:space="preserve"> <style type="text/css"> .owlGaugeBody .st0{fill:#A87D50;} .owlGaugeBody .st1{fill:#C2B59B;} .owlGaugeBody .st2{fill:#EB2227;} .owlGaugeBody .st3{fill:#FFFFFF;} .owlGaugeBody .st4{fill:#F9D018;} .owlGaugeBody .st5{fill:none;} .owlGaugeBody .st6{fill:#83381B;} .owlGaugeBody .st7{fill:#231F20;} </style> <g id="XMLID_31_"> <g id="XMLID_34_"> <ellipse id="XMLID_21_" transform="matrix(0.9998 1.947640e-02 -1.947640e-02 0.9998 2.8614 -2.5802)" class="st0" cx="133.9" cy="145.6" rx="133.9" ry="145.6"/> <polygon id="XMLID_20_" class="st0" points="199.2,32.8 184,11.3 209,9.7 "/> <polygon id="XMLID_19_" class="st0" points="73.9,31.2 62.1,7.7 87.1,9.8 "/> <circle id="XMLID_18_" class="st1" cx="134.8" cy="189.2" r="89.8"/> <path id="XMLID_17_" class="st2" d="M140.1,88c-2.7,3.8-7.9,4.7-11.7,2c-2.7-1.9-3.9-5.1-3.4-8.1c0,0,9.6-41.8,9.6-41.8l6.9,40.8 C142,83.2,141.6,85.8,140.1,88z"/> <path id="XMLID_16_" class="st3" d="M164.6,16.2c-14.2,0-26.3,9.2-30.6,21.9c-4.1-13.1-16.3-22.6-30.8-22.6 C85.4,15.6,71,30,71,47.8s14.4,32.3,32.3,32.3c14.2,0,26.3-9.2,30.6-21.9c4.1,13.1,16.3,22.6,30.8,22.6 c17.8,0,32.3-14.4,32.3-32.3S182.4,16.2,164.6,16.2z"/> <path id="XMLID_15_" class="st4" d="M122,58.7l23.3-0.1c0,0-9,14.8-10.2,16.6c-1.2,1.9-2.2,0.1-2.2,0.1L122,58.7z"/> <rect id="XMLID_14_" x="-11.4" y="-68.8" class="st5" width="288.3" height="259.7"/> <g id="XMLID_37_"> <path id="XMLID_13_" class="st6" d="M121.6,125.5c0,3.7-3.5,6.6-7.7,6.6c-4.2,0-7.7-3-7.7-6.6"/> <path id="XMLID_12_" class="st6" d="M160.1,126.5c0,3.7-3.5,6.6-7.7,6.6s-7.7-3-7.7-6.6"/> <path id="XMLID_11_" class="st6" d="M142.4,148.1c0,3.7-3.5,6.6-7.7,6.6c-4.2,0-7.7-3-7.7-6.6"/> <path id="XMLID_10_" class="st6" d="M183.1,148.8c0,3.7-3.5,6.6-7.7,6.6c-4.2,0-7.7-3-7.7-6.6"/> <path id="XMLID_9_" class="st6" d="M160.9,177.4c0,3.7-3.5,6.6-7.7,6.6s-7.7-3-7.7-6.6"/> <path id="XMLID_8_" class="st6" d="M201.6,178c0,3.7-3.5,6.6-7.7,6.6s-7.7-3-7.7-6.6"/> <path id="XMLID_7_" class="st6" d="M76.4,177.4c0,3.7-3.5,6.6-7.7,6.6c-4.2,0-7.7-3-7.7-6.6"/> <path id="XMLID_6_" class="st6" d="M117,178c0,3.7-3.5,6.6-7.7,6.6s-7.7-3-7.7-6.6"/> <path id="XMLID_5_" class="st6" d="M98.6,148.1c0,3.7-3.5,6.6-7.7,6.6c-4.2,0-7.7-3-7.7-6.6"/> </g> <circle id="XMLID_4_" class="st7" cx="164.1" cy="49" r="6.4"/> <circle id="XMLID_3_" class="st7" cx="102.7" cy="47.7" r="6.4"/> </g> <path id="XMLID_2_" class="st0" d="M160.1,140.9c11.1-8.4,55.6-36,55.6-36l4.7,0.8l10.2,38.8c0,0-3,3-9.2,3.1 c-5.1,0.1-45.9-2.6-60.2-3.5C158.1,143.9,157.7,142.7,160.1,140.9z"/> <path id="XMLID_1_" class="st0" d="M110.6,140.8c-11.1-8.4-55.6-36-55.6-36l-4.7,0.8L40,144.4c0,0,3,3,9.2,3.1 c5.1,0.1,45.9-2.6,60.2-3.5C112.5,143.8,113,142.6,110.6,140.8z"/> </g> </svg>',a.owlTailSvg='<svg version="1.1" class="owlGaugeTail" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 587.8 295.5" style="enable-background:new 0 0 587.8 295.5;" xml:space="preserve"> <style type="text/css"> .owlGaugeTail .st0{fill:#3B2416;} .owlGaugeTail .st1{fill:#5B4B43;} .owlGaugeTail .st2{fill:#603A17;} .owlGaugeTail .st3{fill:#726659;} </style> <g id="XMLID_55_"> <path id="XMLID_29_" class="st0" d="M85.2,106.2c-27.1,0-49.2,22-49.2,49.2c0,19.1,10.9,35.7,26.9,43.8c0,0,231.2,95.9,231.2,95.9 l-171-171C114.1,113.2,100.5,106.2,85.2,106.2z"/> <g id="XMLID_56_"> <path id="XMLID_28_" class="st1" d="M482.5,86.4c0-27.1-22-49.2-49.2-49.2c-19.1,0-35.7,10.9-43.8,26.9c0,0-95.9,231.2-95.9,231.2 l171-171C475.5,115.3,482.5,101.7,482.5,86.4z"/> <path id="XMLID_27_" class="st2" d="M573.5,281.3c19.2-19.2,19.2-50.3,0-69.5c-13.5-13.5-33-17.5-50-12c0,0-231.3,95.7-231.3,95.7 l241.8,0C548,296.9,562.6,292.1,573.5,281.3z"/> <path id="XMLID_26_" class="st3" d="M279.9,14.4c-19.2-19.2-50.3-19.2-69.5,0c-13.5,13.5-17.5,33-12,50c0,0,95.7,231.3,95.7,231.3 L294,54C295.4,39.8,290.7,25.2,279.9,14.4z"/> <path id="XMLID_25_" class="st2" d="M105.3,86.4c0-27.1,22-49.2,49.2-49.2c19.1,0,35.7,10.9,43.8,26.9c0,0,95.9,231.2,95.9,231.2 l-171-171C112.3,115.3,105.3,101.7,105.3,86.4z"/> <path id="XMLID_24_" class="st2" d="M14.4,281.4c-19.2-19.2-19.2-50.3,0-69.5c13.5-13.5,33-17.5,50-12c0,0,231.3,95.7,231.3,95.7 l-241.8,0C39.8,297,25.2,292.3,14.4,281.4z"/> <path id="XMLID_23_" class="st2" d="M308.2,14c19.2-19.2,50.3-19.2,69.5,0c13.5,13.5,17.5,33,12,50c0,0-95.7,231.3-95.7,231.3 l0-241.8C292.6,39.4,297.4,24.8,308.2,14z"/> <path id="XMLID_22_" class="st0" d="M503.2,106c27.1,0,49.2,22,49.2,49.2c0,19.1-10.9,35.7-26.9,43.8c0,0-231.2,95.9-231.2,95.9 l171-171C474.2,113,487.8,106,503.2,106z"/> </g> </g> </svg>',a.visualBgSvg='<svg version="1.1" class="owlGaugeBg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="123.8 94.9 349.1 175.3" style="enable-background:new 123.8 94.9 349.1 175.3;" xml:space="preserve"> <style type="text/css"> .owlGaugeBg .st0{fill:#EF4137;} .owlGaugeBg .st1{fill:#FAAF42;} .owlGaugeBg .st2{fill:#F15B2A;} .owlGaugeBg .st3{fill:#F69321;} </style> <g id="XMLID_10_"> <path id="XMLID_8_" class="st0" d="M174.3,158c-16.1,0-29.2,13.1-29.2,29.2c0,11.4,6.5,21.2,16,26.1l137.3,57L196.9,168.7 C191.5,162.2,183.4,158,174.3,158z"/> <g id="XMLID_11_"> <path id="XMLID_7_" class="st1" d="M410.2,146.3c0-16.1-13.1-29.2-29.2-29.2c-11.4,0-21.2,6.5-26,16l-57,137.5L399.5,169 C406.1,163.5,410.2,155.4,410.2,146.3z"/> <path id="XMLID_6_" class="st0" d="M464.3,262.2c11.4-11.4,11.4-29.9,0-41.3c-8-8-19.6-10.4-29.7-7.1l-137.4,56.9h143.6 C449.2,271.4,457.9,268.6,464.3,262.2z"/> <path id="XMLID_5_" class="st2" d="M290,103.5c-11.4-11.4-29.9-11.4-41.3,0c-8,8-10.4,19.6-7.1,29.7l56.8,137.5V127 C299.2,118.6,296.4,109.9,290,103.5z"/> <path id="XMLID_4_" class="st3" d="M186.3,146.3c0-16.1,13.1-29.2,29.2-29.2c11.4,0,21.2,6.5,26,16l57,137.5L197,168.8 C190.5,163.5,186.3,155.4,186.3,146.3z"/> <path id="XMLID_3_" class="st2" d="M132.3,262.2c-11.4-11.4-11.4-29.9,0-41.3c8-8,19.6-10.4,29.7-7.1l137.4,56.9H155.8 C147.4,271.5,138.7,268.7,132.3,262.2z"/> <path id="XMLID_2_" class="st3" d="M306.8,103.2c11.4-11.4,29.9-11.4,41.3,0c8,8,10.4,19.6,7.1,29.7l-56.8,137.5V126.7 C297.5,118.3,300.3,109.7,306.8,103.2z"/> <path id="XMLID_1_" class="st2" d="M422.5,157.9c16.1,0,29.2,13.1,29.2,29.2c0,11.4-6.5,21.2-16,26.1l-137.3,57L400,168.6 C405.3,162.1,413.4,157.9,422.5,157.9z"/> </g> </g> </svg>',a.owlBodyHeightMultiplier=291.2/267.7,a.owlTailHeightMultiplier=295.5/587.8,a.visualBgHeightMultiplier=295.5/587.8,a.OwlDemoMode=!1,a.capabilities={dataRoles:[{name:"Category",kind:e.VisualDataRoleKind.Grouping},{name:"Y",kind:e.VisualDataRoleKind.Measure}],dataViewMappings:[{categories:{"for":{"in":"Category"},dataReductionAlgorithm:{top:{}}},values:{select:[{bind:{to:"Y"}}]}}]},a}();t.OwlGauge=a}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"NoMapLocation"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="NoMapLocationMessage",i="NoMapLocationKey",a="NoMapLocationValue",r={message:e.get(t),title:e.get(i),detail:e.get(a)};return r},e}();e.NoMapLocationWarning=t;var i=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"NoValidGeotaggedCategory"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="NoValidGeotaggedCategoryMessage",i="NoValidGeotaggedCategoryKey",a="NoValidGeotaggedCategoryValue",r={message:e.get(t),title:e.get(i),detail:e.get(a)};return r},e}();e.FilledMapWithoutValidGeotagCategoryWarning=i;var a=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"GeometryCulledWarning"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="GeometryCulledWarningMessage",i="GeometryCulledWarningKey",a="GeometryCulledWarningVal",r={message:e.get(t),title:e.get(i),detail:e.get(a)};return r},e}();e.GeometryCulledWarning=a;var r=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"NegativeValuesNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_NegativeValues",i={message:e.get(t),title:"",detail:""};return i},e}();e.NegativeValuesNotSupportedWarning=r;var n=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"AllNegativeValuesNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_AllNegativeValues",i={message:e.get(t),title:"",detail:""};return i},e}();e.AllNegativeValuesWarning=n;var o=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"NaNNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_NanValues",i={message:e.get(t),title:"",detail:""};return i},e}();e.NaNNotSupportedWarning=o;var s=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"InfinityValuesNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_InfinityValues",i={message:e.get(t),title:"",detail:""};return i},e}();e.InfinityValuesNotSupportedWarning=s;var l=function(){function e(){}return Object.defineProperty(e.prototype,"code",{
get:function(){return"ValuesOutOfRange"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_VisualizationOutOfRange",i={message:e.get(t),title:"",detail:""};return i},e}();e.ValuesOutOfRangeWarning=l;var u=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"ZeroValuesNotSupported"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="VisualWarning_ZeroValues",i={message:e.get(t),title:"",detail:""};return i},e}();e.ZeroValueWarning=u;var c=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"VisualKPIDataMissing"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="Visual_KPI_DataMissing",i={message:e.get(t),title:"",detail:""};return i},e}();e.VisualKPIDataMissingWarning=c;var h=function(){function e(){}return Object.defineProperty(e.prototype,"code",{get:function(){return"ScriptVisualNotRefreshed"},enumerable:!0,configurable:!0}),e.prototype.getMessages=function(e){var t="ScriptVisualRefreshWarningMessage",i="ScriptVisualRefreshWarningValue",a={message:e.get(t),title:e.get(t),detail:e.get(i)};return a},e}();e.ScriptVisualRefreshWarning=h}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.PixelConverter,a=jsCommon.CssConstants.createClassAndSelector,r=function(){function r(e){this.isScrollable=e.isScrollable,this.tooltipsEnabled=e.tooltipsEnabled,this.interactivityService=e.interactivityService}return r.prototype.init=function(e){this.svg=e.svg,this.style=e.style,this.currentViewport=e.viewport,this.hostServices=e.host,this.interactivity=e.interactivity,this.cartesianVisualHost=e.cartesianHost,this.options=e,this.element=e.element,this.colors=this.style.colorPalette.dataColors,this.element.addClass(r.WaterfallClassName),this.mainGraphicsSVG=this.svg.append("svg"),this.mainGraphicsContext=this.mainGraphicsSVG.append("g").classed(r.MainGraphicsContextClassName,!0),this.labelGraphicsContext=this.mainGraphicsSVG.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass["class"],!0)},r.converter=function(e,i,a,n,o,s){var l,u=r.formatStringProp,c=e.categorical.categories||[],h=o.increaseFill.solid.color,d=o.decreaseFill.solid.color,p=o.totalFill.solid.color,g=a.getLocalizedString(r.TotalLabel),m=a.getLocalizedString(r.IncreaseLabel),f=a.getLocalizedString(r.DecreaseLabel),y=[{label:m,color:h,icon:t.LegendIcon.Box,identity:t.SelectionIdBuilder.builder().withMeasure("increase").createSelectionId(),selected:!1},{label:f,color:d,icon:t.LegendIcon.Box,identity:t.SelectionIdBuilder.builder().withMeasure("decrease").createSelectionId(),selected:!1},{label:g,color:p,icon:t.LegendIcon.Box,identity:t.SelectionIdBuilder.builder().withMeasure("total").createSelectionId(),selected:!1}],v=0,b=0,C=0,S=[],x=[],w=e.categorical.values,D=void 0;if(!_.isEmpty(w)){var P=w[0];D=P.source;var L=D.format;if(_.isEmpty(c))v=C=P.values[0],b=0;else{var N=c[0];l=N.source,x=N.values.slice(),x.push(g);for(var T=0,V=P.values.length;V>T;T++){var M=x[T],A=P.values[T]||0,R=t.SelectionIdBuilder.builder().withCategory(N,T).createSelectionId(),I=t.TooltipBuilder.createTooltipInfo(u,e.categorical,M,A),F=A>0?h:d;S.push({value:A,position:v,color:F,categoryValue:M,categoryIndex:T,seriesIndex:0,selected:!1,identity:R,highlight:!1,key:R.getKey(),tooltipInfo:I,labelFill:n.labelColor,labelFormatString:L}),v+=A,v>C&&(C=v),b>v&&(b=v)}}var O=t.SelectionId.createNull();S.push({value:v,position:0,color:p,categoryValue:g,categoryIndex:T,identity:O,seriesIndex:0,selected:!1,highlight:!1,key:O.getKey(),tooltipInfo:t.TooltipBuilder.createTooltipInfo(u,e.categorical,g,v),labelFill:n.labelColor,labelFormatString:L,isTotal:!0})}s&&s.applySelectionStateToData(S);var G=t.CartesianHelper.getCategoryAxisProperties(e.metadata),z=t.CartesianHelper.getValueAxisProperties(e.metadata),H=t.converterHelper.createAxesLabels(G,z,l,[D]);return{series:[{data:S}],categories:x,categoryMetadata:l,valuesMetadata:D,legend:{dataPoints:y},hasHighlights:!1,positionMin:b,positionMax:C,dataLabelsSettings:n,sentimentColors:o,axesLabels:{x:H.xAxisLabel,y:H.yAxisLabel}}},r.prototype.setData=function(e){var i=this.getSentimentColorsFromObjects(null),a=e.length>0?e[0]:void 0;if(this.data={series:[{data:[]}],categories:[],valuesMetadata:null,legend:{dataPoints:[]},hasHighlights:!1,categoryMetadata:null,scalarCategoryAxis:!1,positionMax:0,positionMin:0,dataLabelsSettings:t.dataLabelUtils.getDefaultLabelSettings(!1,void 0),sentimentColors:i,axesLabels:{x:null,y:null}},a){if(a.metadata&&a.metadata.objects){var n=a.metadata.objects,o=n.labels;o&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(o,this.data.dataLabelsSettings),i=this.getSentimentColorsFromObjects(n)}a.categorical&&(this.data=r.converter(a,this.colors,this.hostServices,this.data.dataLabelsSettings,i,this.interactivityService))}},r.prototype.enumerateObjectInstances=function(e,i){switch(i.objectName){case"sentimentColors":this.enumerateSentimentColors(e);break;case"labels":var a={enumeration:e,dataLabelsSettings:this.data.dataLabelsSettings,show:!0,displayUnits:!0,precision:!0,fontSize:!0};t.dataLabelUtils.enumerateDataLabels(a)}},r.prototype.enumerateSentimentColors=function(e){var t=this.data.sentimentColors;e.pushInstance({selector:null,properties:{increaseFill:t.increaseFill,decreaseFill:t.decreaseFill,totalFill:t.totalFill},objectName:"sentimentColors"})},r.prototype.calculateLegend=function(){return this.data.legend},r.prototype.hasLegend=function(){return!0},r.createClippedDataIfOverflowed=function(t,i){var a=t,r=t.series[0].data;return t&&i<r.length&&(a=e.Prototype.inherit(t),a.series=[{data:r.slice(0,i)}],a.categories=t.categories.slice(0,i)),a},r.prototype.calculateAxesProperties=function(e){var i=this;this.currentViewport=e.viewport;var a=this.margin=e.margin,n=this.clippedData=this.data,o=n.categories.length,s=this.getPreferredPlotArea(!1,o,t.CartesianChart.MinOrdinalRectThickness);s.width===this.currentViewport.width&&(s.width-=a.left+a.right),s.height-=a.top+a.bottom;var l=t.CartesianChart.getLayout(null,{availableWidth:s.width,categoryCount:o,domain:null,isScalar:!1,isScrollable:this.isScrollable,trimOrdinalDataOnOverflow:e.trimOrdinalDataOnOverflow});this.isScrollable||(n=this.clippedData=r.createClippedDataIfOverflowed(n,l.categoryCount));var u=r.getXAxisCreationOptions(n,s.width,l,e),c=r.getYAxisCreationOptions(n,s.height,e),h=this.xAxisProperties=t.AxisHelper.createAxis(u),d=this.yAxisProperties=t.AxisHelper.createAxis(c),p=this.xAxisProperties.categoryThickness*(1-t.CartesianChart.InnerPaddingRatio),g=t.dataLabelUtils.createColumnFormatterCacheManager(),m=n.dataLabelsSettings,f=r.getDisplayUnitValueFromAxisFormatter(d,m);return this.layout={categoryCount:l.categoryCount,categoryThickness:l.categoryThickness,isScalar:l.isScalar,outerPaddingRatio:l.outerPaddingRatio,categoryWidth:p,labelText:function(e){var i=g.getOrCreate(e.labelFormatString,m,f);return t.dataLabelUtils.getLabelFormattedText({label:i.format(e.value)})},labelLayout:t.dataLabelUtils.getLabelLayoutXYForWaterfall(h,p,d,c.dataDomain),filter:function(e){return t.dataLabelUtils.doesDataLabelFitInShape(e,d,i.layout)},style:{fill:function(e){return e.isLabelInside?t.dataLabelUtils.defaultInsideLabelColor:e.labelFill}}},this.xAxisProperties.axisLabel=e.showCategoryAxisLabel?n.axesLabels.x:null,this.yAxisProperties.axisLabel=e.showValueAxisLabel?n.axesLabels.y:null,[h,d]},r.getDisplayUnitValueFromAxisFormatter=function(e,t){return e.formatter&&e.formatter.displayUnit&&0===t.displayUnits?e.formatter.displayUnit.value:null},r.lookupXValue=function(e,i,a){var r=e.series[0].data;return i===r.length-1?r[i].categoryValue:t.CartesianHelper.lookupXValue(e,i,a,!1)},r.getXAxisCreationOptions=function(e,i,a,n){var o=t.AxisHelper.getCategoryValueType(e.categoryMetadata),s=t.AxisHelper.createDomain(e.series,o,!1,n.forcedXDomain),l=a.categoryThickness,u=l*a.outerPaddingRatio;return{pixelSpan:i,dataDomain:s,metaDataColumn:e.categoryMetadata,formatString:t.valueFormatter.getFormatString(e.categoryMetadata,r.formatStringProp),isScalar:!1,outerPadding:u,categoryThickness:l,getValueFn:function(t,i){return r.lookupXValue(e,t,i)},forcedTickCount:n.forcedTickCount,isCategoryAxis:!0,axisDisplayUnits:n.categoryAxisDisplayUnits,axisPrecision:n.categoryAxisPrecision}},r.getYAxisCreationOptions=function(e,i,a){var n=t.AxisHelper.combineDomain(a.forcedYDomain,[e.positionMin,e.positionMax]);return{pixelSpan:i,dataDomain:n,isScalar:!0,isVertical:!0,metaDataColumn:e.valuesMetadata,formatString:t.valueFormatter.getFormatString(e.valuesMetadata,r.formatStringProp),outerPadding:0,forcedTickCount:a.forcedTickCount,useTickIntervalForDisplayUnits:!0,isCategoryAxis:!1,axisDisplayUnits:a.valueAxisDisplayUnits,axisPrecision:a.valueAxisPrecision}},r.prototype.getPreferredPlotArea=function(e,i,a){return t.CartesianChart.getPreferredPlotArea(i,a,this.currentViewport,this.isScrollable,e)},r.prototype.getVisualCategoryAxisIsScalar=function(){return!1},r.prototype.overrideXScale=function(e){this.xAxisProperties=e},r.prototype.setFilteredData=function(t,i){var a=this.clippedData=e.Prototype.inherit(this.data);return a.series=[{data:a.series[0].data.slice(t,i)}],a.categories=a.categories.slice(t,i),a},r.prototype.createRects=function(e){var t=this.mainGraphicsContext,i=t.selectAll(r.CategoryValueClasses.selector),a=i.data(e,function(e){return e.key});return a.enter().append("rect").attr("class",function(e){return r.CategoryValueClasses["class"].concat(e.highlight?"highlight":"")}),a.exit().remove(),a},r.prototype.createConnectors=function(e){var t=this.mainGraphicsContext,i=t.selectAll(r.WaterfallConnectorClasses.selector),a=i.data(e.slice(0,e.length-1),function(e){return e.key});return a.enter().append("line").classed(r.WaterfallConnectorClasses["class"],!0),a.exit().remove(),a},r.prototype.render=function(e){var i=this,a=this.clippedData.series[0].data,n=this.createRects(a),o=this.createConnectors(a);this.tooltipsEnabled&&t.TooltipManager.addTooltip(n,function(e){return e.data.tooltipInfo});var s=this.interactivityService&&this.interactivityService.hasSelection(),l=this.xAxisProperties.scale,u=this.yAxisProperties.scale,c=u(0);this.mainGraphicsSVG.attr("height",this.getAvailableHeight()).attr("width",this.getAvailableWidth()),n.style("fill",function(e){return e.color}).style("fill-opacity",function(e){return e.isTotal?t.ColumnUtil.DefaultOpacity:t.ColumnUtil.getFillOpacity(e.selected,e.highlight,s,i.data.hasHighlights)}).attr("width",this.layout.categoryWidth).attr("x",function(e){return l(e.categoryIndex)}).attr("y",function(e){return r.getRectTop(u,e.position,e.value)}).attr("height",function(e){return c-u(Math.abs(e.value))}),o.attr({x1:function(e){return l(e.categoryIndex)},y1:function(e){return u(e.position+e.value)},x2:function(e){return l(e.categoryIndex+1)+i.layout.categoryWidth},y2:function(e){return u(e.position+e.value)}});var h=this.data.dataLabelsSettings,d=[];(h&&h.show||h.showCategory)&&(d=this.createLabelDataPoints());var p=void 0;return this.interactivityService&&(p={bars:n,datapoints:a}),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),{dataPoints:a,behaviorOptions:p,labelDataPoints:d,labelsAreNumeric:!0}},r.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},r.prototype.getSupportedCategoryAxisType=function(){return t.axisType.categorical},r.getRectTop=function(e,t,i){return 0>i?e(t):e(t)-(e(0)-e(i))},r.prototype.getAvailableWidth=function(){return this.currentViewport.width-(this.margin.left+this.margin.right)},r.prototype.getAvailableHeight=function(){return this.currentViewport.height-(this.margin.top+this.margin.bottom)},r.prototype.getSentimentColorsFromObjects=function(i){var a=this.colors.getSentimentColors(),n=e.DataViewObjects.getFillColor(i,t.waterfallChartProps.sentimentColors.increaseFill,a[2].value),o=e.DataViewObjects.getFillColor(i,t.waterfallChartProps.sentimentColors.decreaseFill,a[0].value),s=e.DataViewObjects.getFillColor(i,t.waterfallChartProps.sentimentColors.totalFill,r.defaultTotalColor);return{increaseFill:{solid:{color:n}},decreaseFill:{solid:{color:o}},totalFill:{solid:{color:s}}}},r.prototype.createLabelDataPoints=function(){for(var a=[],n=this.data,o=this.xAxisProperties.scale,s=this.yAxisProperties.scale,l=s(0),u=n.series,c=t.NewDataLabelUtils.createColumnFormatterCacheManager(),h=t.NewDataLabelUtils.getDisplayUnitValueFromAxisFormatter(this.yAxisProperties.formatter,n.dataLabelsSettings),d=this.data.dataLabelsSettings,p=0;p<u.length;p++)for(var g=u[p],m=0,f=g.data;m<f.length;m++){var y=f[m],v={left:o(y.categoryIndex),top:r.getRectTop(s,y.position,y.value),width:this.layout.categoryWidth,height:l-s(Math.abs(y.value))},b=y.labelFormatString,C=c.getOrCreate(b,this.data.dataLabelsSettings,h),S=t.NewDataLabelUtils.getLabelFormattedText(C.format(y.value)),x={text:S,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:i.fromPoint(d.fontSize||t.NewDataLabelUtils.DefaultLabelFontSizeInPt),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight},w=e.TextMeasurementService.measureSvgTextWidth(x),D=e.TextMeasurementService.estimateSvgTextHeight(x,!0);a.push({isPreferred:!0,text:S,textSize:{width:w,height:D},outsideFill:d.labelColor?d.labelColor:t.NewDataLabelUtils.defaultLabelColor,insideFill:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:1,parentShape:{rect:v,orientation:y.value>=0?1:2,validPositions:0===y.value?r.validZeroLabelPosition:r.validLabelPositions},fontSize:d.fontSize,identity:void 0})}return a},r.formatStringProp={objectName:"general",propertyName:"formatString"},r.WaterfallClassName="waterfallChart",r.MainGraphicsContextClassName="mainGraphicsContext",r.IncreaseLabel="Waterfall_IncreaseLabel",r.DecreaseLabel="Waterfall_DecreaseLabel",r.TotalLabel="Waterfall_TotalLabel",r.CategoryValueClasses=a("column"),r.WaterfallConnectorClasses=a("waterfall-connector"),r.defaultTotalColor="#00b8aa",r.validLabelPositions=[16,4],r.validZeroLabelPosition=[16,8],r}();t.WaterfallChart=r}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=e.visuals.controls.TouchUtils,a=jsCommon.CssConstants.createClassAndSelector,r=a("tooltip-container"),n=a("tooltip-content-container"),o=a("arrow"),s=a("tooltip-header"),l=a("tooltip-row"),u=a("tooltip-color-cell"),c=a("tooltip-title-cell"),h=a("tooltip-value-cell"),d=function(){function e(t){this.tooltipOptions=t,this.isTooltipVisible=!1,t||(this.tooltipOptions=e.DefaultTooltipOptions)}return e.prototype.isTooltipComponentVisible=function(){return this.isTooltipVisible},e.prototype.setTestScreenSize=function(e,t){this.customScreenWidth=e,this.customScreenHeight=t},e.prototype.show=function(e,t){this.isTooltipVisible=!0,this.tooltipContainer||(this.tooltipContainer=this.createTooltipContainer()),this.setTooltipContent(e),this.tooltipContainer.style("visibility","visible").transition().duration(0).style("opacity",this.tooltipOptions.opacity),this.setPosition(t)},e.prototype.move=function(e,t){this.isTooltipVisible&&(e&&this.setTooltipContent(e),this.setPosition(t))},e.prototype.hide=function(){this.isTooltipVisible&&(this.isTooltipVisible=!1,this.tooltipContainer.transition().duration(this.tooltipOptions.animationDuration).style("opacity",0).each("end",function(){this.style.visibility="hidden"}))},e.prototype.createTooltipContainer=function(){var t=d3.select(e.parentContainerSelector).append("div").attr("class",r["class"]);return t.append("div").attr("class",o["class"]),t.append("div").attr("class",n["class"]),t},e.prototype.setTooltipContent=function(e){if(!_.isEqual(e,this.currentTooltipData)){this.currentTooltipData=e;var t=l.selector,i=this.tooltipContainer.select(n.selector);if(i.selectAll(s.selector).remove(),i.selectAll(l.selector).remove(),0!==e.length){e[0].header&&i.append("div").attr("class",s["class"]).text(e[0].header);var a=i.selectAll(t).data(e),r=a.enter().append("div").attr("class",l["class"]);if(e[0].color){var o=r.append("div").attr("class",u["class"]);o.append("svg").attr({width:"100%",height:"15px"}).append("circle").attr({cx:"5",cy:"8",r:"5"}).style({fill:function(e){return e.color}})}var d=r.append("div").attr("class",c["class"]),p=r.append("div").attr("class",h["class"]);d.text(function(e){return e.displayName}),p.text(function(e){return e.value})}}},e.prototype.getTooltipPosition=function(e,t){var a=this.tooltipContainer.node().getBoundingClientRect(),r=Math.floor(e.width/2),n=0,o=0,s=new i.Point(e.x+r,e.y+r),l=7;return 0===t?(n+=3*l+r,o-=2*l+r):1===t?(n-=2*l+a.width+r,o-=2*l+r):3===t?(n+=3*l+r,o-=a.height-2*l+r):2===t&&(n-=2*l+a.width+r,o-=a.height-2*l+r),s.offset(n,o),s},e.prototype.setPosition=function(e){var t=this.getClickedScreenArea(e),i=this.getTooltipPosition(e,t);this.tooltipContainer.style({left:i.x+"px",top:i.y+"px"}),this.setArrowPosition(e,t)},e.prototype.setArrowPosition=function(e,t){var i,a=this.getArrowElement();0===t?i="top left":1===t?i="top right":3===t?i="bottom left":2===t&&(i="bottom right"),a.attr("class","arrow").classed(i,!0)},e.prototype.getArrowElement=function(){return this.tooltipContainer.select(o.selector)},e.prototype.getClickedScreenArea=function(e){var t=this.customScreenWidth||window.innerWidth,a=this.customScreenHeight||window.innerHeight,r=e.width/2,n=new i.Point(e.x+r,e.y+r),o=t/2,s=a/2;return n.x<o&&n.y<s?0:n.x>=o&&n.y<s?1:n.x<o&&n.y>=s?3:n.x>=o&&n.y>=s?2:void 0},e.DefaultTooltipOptions={opacity:1,animationDuration:250,offsetX:10,offsetY:10},e.parentContainerSelector="body",e.highlightedValueDisplayNameResorceKey="Tooltip_HighlightedValueDisplayName",e}();t.ToolTipComponent=d;var p;!function(e){function t(t,i,n,o){if(e.ShowTooltips){var f=d3.select(d.parentContainerSelector).node(),b=h(),L=p(),_="pointerdown"===b||"MSPointerDown"===b;t.on("mouseover",function(t,r){if(!P&&c(d3.event)){v=g(f,!0);var n=g(this,!0),o={data:t,index:r,coordinates:v,elementCoordinates:n,context:this,isTouchEvent:!1};u();var s=e.ToolTipInstance.isTooltipComponentVisible()?16:S;y=a(o,i,s)}}),t.on("mouseout",function(e,t){P||(u(),y=r(x)),o&&o()}),t.on("mousemove",function(e,t){if(!P&&c(d3.event)){v=g(f,!0);var a=g(this,!0),r={data:e,index:t,coordinates:v,elementCoordinates:a,context:this,isTouchEvent:!1};s(r,i,n)}}),C||(m(b),C=!0),t.on(b,function(e,t){l();var r=g(f,_),n=g(this,_),o={data:e,index:t,coordinates:r,elementCoordinates:n,context:this,isTouchEvent:!0};u(),y=a(o,i,w)}),t.on(L,function(e,t){u(),P&&clearTimeout(P),P=setTimeout(function(){P=0},D)})}}function a(e,t,i){return setTimeout(function(){return o(e,t)},i)}function r(e){return setTimeout(function(){return l()},e)}function n(e){d.localizationOptions=e}function o(t,i){var a=b||i(t);if(!_.isEmpty(a)){var r=v||t.coordinates,n=f(r[0],r[1],t.isTouchEvent);e.ToolTipInstance.show(a,n)}}function s(t,i,a){b=void 0,a&&(b=i(t));var r=f(t.coordinates[0],t.coordinates[1],t.isTouchEvent);e.ToolTipInstance.move(b,r)}function l(){e.ToolTipInstance.hide()}function u(){y&&clearTimeout(y)}function c(e){var t=!0,i=e;if(void 0!==i.buttons){var a=0!==i.buttons;t=!a}return t}function h(){var e="touchstart";return window.PointerEvent?e="pointerdown":window.MSPointerEvent&&(e="MSPointerDown"),e}function p(){var e="touchend";return window.PointerEvent?e="pointerup":window.MSPointerEvent&&(e="MSPointerUp"),e}function g(e,t){var i;if(t){for(var a,r=d3.event;a=r.sourceEvent;)r=a;var n=e.getBoundingClientRect();i=[r.clientX-n.left-e.clientLeft,r.clientY-n.top-e.clientTop]}else{var o=d3.touches(e);o&&o.length>0&&(i=o[0])}return i}function m(t){d3.select(d.parentContainerSelector).on(t,function(t,i){e.ToolTipInstance.hide()})}function f(e,t,a){var r=0,n=e,o=t;if(a){r=12;var s=r/2;n=Math.max(e-s,0),o=Math.max(t-s,0)}return new i.Rectangle(n,o,r,r)}e.ShowTooltips=!0,e.ToolTipInstance=new d;var y,v,b,C=!1,S=350,x=500,w=350,D=1e3,P=0;e.addTooltip=t,e.showDelayedTooltip=a,e.hideDelayedTooltip=r,e.setLocalizedStrings=n}(p=t.TooltipManager||(t.TooltipManager={}));var g;!function(e){function i(e,i,r,n,o,s,l,u,c){var h,d=[],p=void 0;l=0|l;var g=i?i.categories:o;if(g&&g.length>0&&(h={value:r,metadata:g[0].source}),i&&i.values){if(h&&h.metadata===i.values.source||(p=i.values.source),i.values.length>0){var m=i.values[l],f=!!(m&&m.source&&m.source.isAutoGeneratedColumn);f||d.push({value:n,highlightedValue:c,metadata:m})}var y=t.GradientUtils.getGradientMeasureIndex(i),v=-1===y?null:i.values[y];v&&l!==y&&d.push({value:v.values[u],metadata:{source:v.source,values:[]}})}if(s)for(var b=0,C=s.length;C>b;b++){var S=s[b];h&&h.metadata===S.metadata.source||d.push({value:S.value,metadata:S.metadata})}var x=a(e,h,p,d);return x}function a(e,t,i,a){var n=[];if(t){var o=r(t.metadata,e,t.value);n.push({displayName:t.metadata.displayName,value:o})}if(i){var s;if(a.length>0){var l=a[0].metadata.source;s=r(i,e,l.groupName)}n.push({displayName:i.displayName,value:s})}for(var u=0;u<a.length;u++){var c=a[u];if(c&&c.metadata){var h=c.metadata.source,p=c.value,g=c.highlightedValue;if(p||0===p){var m=r(h,e,p);n.push({displayName:h.displayName,value:m})}if(g||0===g){var f=r(h,e,g),y=d.localizationOptions.highlightedValueDisplayName;n.push({displayName:y,value:f})}}}return n}function r(e,i,a){var r=n(e,i);return t.valueFormatter.format(a,r)}function n(e,i){if(e){var a=t.valueFormatter.getFormatString(e,i,!0);return a||e.format}return null}e.createTooltipInfo=i}(g=t.TooltipBuilder||(t.TooltipBuilder={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){function i(t){return void 0===t&&(t=new e.DataColorPalette),{titleText:{color:{value:"rgba(51,51,51,1)"}},subTitleText:{color:{value:"rgba(145,145,145,1)"}},colorPalette:{dataColors:t},labelText:{color:{value:"rgba(51,51,51,1)"},fontSize:"11px"},isHighContrast:!1}}t.create=i}(t=e.visualStyles||(e.visualStyles={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(t){var i=jsCommon.CssConstants.createClassAndSelector,a=jsCommon.PixelConverter,r=function(){function r(e){e&&(this.sliceWidthRatio=e.sliceWidthRatio,this.animator=e.animator,this.isScrollable=e.isScrollable?e.isScrollable:!1,this.disableGeometricCulling=e.disableGeometricCulling?e.disableGeometricCulling:!1,this.behavior=e.behavior,this.tooltipsEnabled=e.tooltipsEnabled,e.smallViewPortProperties&&(this.maxHeightToScaleDonutLegend=e.smallViewPortProperties.maxHeightToScaleDonutLegend)),null==this.sliceWidthRatio&&(this.sliceWidthRatio=r.defaultSliceWidthRatio)}return r.converter=function(e,t,i,a,o,s){var l=new n.DonutChartConverter(e,t,i);l.convert();var u=d3.layout.pie().sort(null).value(function(e){return e.percentage});s&&(s.applySelectionStateToData(l.dataPoints),s.applySelectionStateToData(l.legendData.dataPoints));var c=!o&&a?r.cullDataByViewport(l.dataPoints,l.maxValue,a):l.dataPoints;return{dataPointsToDeprecate:c,dataPoints:u(c),unCulledDataPoints:l.dataPoints,dataPointsToEnumerate:l.legendData.dataPoints,legendData:l.legendData,hasHighlights:l.hasHighlights,dataLabelsSettings:l.dataLabelsSettings,legendObjectProperties:l.legendObjectProperties,maxValue:l.maxValue,visibleGeometryCulled:l.dataPoints.length!==c.length}},r.prototype.init=function(e){this.options=e;var i=e.element;i.empty(),this.parentViewport=e.viewport,this.currentViewport={height:e.viewport.height,width:e.viewport.width},this.formatter=t.valueFormatter.format,this.data={dataPointsToDeprecate:[],dataPointsToEnumerate:[],dataPoints:[],unCulledDataPoints:[],legendData:{title:"",dataPoints:[],fontSize:t.SVGLegend.DefaultFontSizeInPt},hasHighlights:!1,dataLabelsSettings:t.dataLabelUtils.getDefaultDonutLabelSettings()},this.drilled=!1,this.allowDrilldown=!1,this.style=e.style,this.colors=this.style.colorPalette.dataColors,this.radius=0,this.isInteractive=e.interactivity&&e.interactivity.isInteractiveLegend;var a=this.settings;if(this.behavior&&(this.interactivityService=t.createInteractivityService(e.host)),this.legend=t.createLegend(i,e.interactivity&&e.interactivity.isInteractiveLegend,this.interactivityService,this.isScrollable),this.hostService=e.host,this.isInteractive){this.chartRotationAnimationDuration=a&&a.chartRotationAnimationDuration?a.chartRotationAnimationDuration:0;var n=this.legendContainer=d3.select(i.get(0)).append("div").classed(r.InteractiveLegendClassName,!0);this.interactivityState={interactiveLegend:new o(this,n,this.colors,e,this.settings),valueToAngleFactor:0,sliceAngles:[],currentRotate:0,interactiveChosenSliceFinishedSetting:!1,lastChosenInteractiveSliceIndex:0,totalDragAngleDifference:0,currentIndexDrag:0,previousIndexDrag:0,previousDragAngle:0,donutCenter:{x:0,y:0}}}this.svg=d3.select(i.get(0)).append("svg").style("position","absolute").classed(r.ClassName,!0),this.behavior&&(this.clearCatcher=t.appendClearCatcher(this.svg)),this.mainGraphicsContext=this.svg.append("g"),this.mainGraphicsContext.append("g").classed("slices",!0),this.labelGraphicsContext=this.svg.append("g").classed(t.NewDataLabelUtils.labelGraphicsContextClass["class"],!0),this.pie=d3.layout.pie().sort(null).value(function(e){return e.percentage})},r.prototype.update=function(i){var a=i.viewport;this.parentViewport=a;var n=this.dataViews=i.dataViews;if(n&&n.length>0&&n[0].categorical){var o=n[0].metadata,s=void 0,l=void 0;if(o){var u=o.objects;u&&(s=e.DataViewObjects.getValue(u,t.donutChartProps.dataPoint.showAllDataPoints),l=e.DataViewObjects.getFillColor(u,t.donutChartProps.dataPoint.defaultColor))}this.data=r.converter(n[0],this.colors,l,this.currentViewport,this.disableGeometricCulling,this.interactivityService),this.data.showAllDataPoints=s,this.data.defaultDataPointColor=l,this.options.interactivity&&this.options.interactivity.isInteractiveLegend||this.renderLegend()}else this.data={dataPointsToDeprecate:[],dataPointsToEnumerate:[],dataPoints:[],unCulledDataPoints:[],legendData:{title:"",dataPoints:[]},hasHighlights:!1,dataLabelsSettings:t.dataLabelUtils.getDefaultDonutLabelSettings()};if(this.initViewportDependantProperties(),this.initDonutProperties(),this.updateInternal(this.data,i.suppressAnimations),this.hasSetData=!0,n){var c=t.getInvalidValueWarnings(n,!1,!1,!1);this.data.visibleGeometryCulled&&c.unshift(new t.GeometryCulledWarning),this.hostService.setWarnings(c)}},r.prototype.onDataChanged=function(e){this.update({dataViews:e.dataViews,suppressAnimations:e.suppressAnimations,viewport:this.currentViewport})},r.prototype.onResizing=function(e){this.update({dataViews:this.dataViews,suppressAnimations:!0,viewport:e})},r.prototype.enumerateObjectInstances=function(e){var i=new t.ObjectEnumerationBuilder,a=this.data&&this.data.dataLabelsSettings?this.data.dataLabelsSettings:t.dataLabelUtils.getDefaultDonutLabelSettings();switch(e.objectName){case"legend":this.enumerateLegend(i);break;case"dataPoint":this.enumerateDataPoints(i);break;case"labels":var r={enumeration:i,dataLabelsSettings:a,show:!0,displayUnits:!0,precision:!0,fontSize:!0,labelStyle:!0};t.dataLabelUtils.enumerateDataLabels(r)}return i.complete()},r.prototype.enumerateDataPoints=function(e){var i=this.data;if(i){e.pushInstance({objectName:"dataPoint",selector:null,properties:{defaultColor:{solid:{color:i.defaultDataPointColor||this.colors.getColorByIndex(0).value}}}}).pushInstance({objectName:"dataPoint",selector:null,properties:{showAllDataPoints:!!i.showAllDataPoints}});for(var a=i.dataPointsToEnumerate,r=a.length,n=0;r>n;n++){var o=a[n];e.pushInstance({objectName:"dataPoint",displayName:o.label,selector:t.ColorHelper.normalizeSelector(o.identity.getSelector()),properties:{fill:{solid:{color:o.color}}}})}}},r.prototype.enumerateLegend=function(i){var a=this.data;if(a){var r={legend:a.legendObjectProperties},n=e.DataViewObjects.getValue(r,t.donutChartProps.legend.show,this.legend.isVisible()),o=e.DataViewObjects.getValue(r,t.donutChartProps.legend.showTitle,!0),s=e.DataViewObjects.getValue(r,t.donutChartProps.legend.titleText,this.data.legendData.title),l=e.DataViewObject.getValue(r,t.legendProps.labelColor,this.data.legendData.labelColor),u=e.DataViewObject.getValue(r,t.legendProps.fontSize,this.data.legendData.fontSize);i.pushInstance({selector:null,objectName:"legend",properties:{show:n,position:t.LegendPosition[this.legend.getOrientation()],showTitle:o,titleText:s,labelColor:l,fontSize:u}})}},r.prototype.setInteractiveChosenSlice=function(e){var i=this;if(0!==this.interactivityState.sliceAngles.length){this.interactivityState.lastChosenInteractiveSliceIndex=e,this.interactivityState.interactiveChosenSliceFinishedSetting=!1;var a=this.currentViewport,r=e%this.data.dataPoints.length,n=this.interactivityState.sliceAngles[r];this.svg.select("g").transition().duration(this.chartRotationAnimationDuration).ease("elastic").attr("transform",t.SVGUtil.translateAndRotate(a.width/2,a.height/2,0,0,n)).each("end",function(){i.interactivityState.interactiveChosenSliceFinishedSetting=!0}),this.interactivityState.currentRotate=n,this.interactivityState.interactiveLegend.updateLegend(r),this.svg.selectAll(".slice").attr("opacity",function(e,t){return t===r?1:.6}),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)}},r.prototype.calculateRadius=function(){var e=this.currentViewport;if(!this.isInteractive&&this.data&&this.data.dataLabelsSettings.show){var t=e.height/e.width,i=2+1/(1+Math.exp(-5*(t-1)));return Math.min(e.height,e.width)/i}return Math.min(e.height,e.width)/2},r.prototype.getScaleForLegendArrow=function(){var e=1;return this.maxHeightToScaleDonutLegend&&this.currentViewport.height<this.maxHeightToScaleDonutLegend&&(e=this.currentViewport.height/this.maxHeightToScaleDonutLegend),e},r.prototype.initViewportDependantProperties=function(e){void 0===e&&(e=0),this.currentViewport.height=this.parentViewport.height,this.currentViewport.width=this.parentViewport.width;var i=this.currentViewport;if(this.isInteractive)i.height-=r.InteractiveLegendContainerHeight;else{var a=this.legend.getMargins();i.height-=a.height,i.width-=a.width}this.svg.attr({width:i.width,height:i.height}),this.isInteractive?(this.legendContainer.style({width:"100%",height:r.InteractiveLegendContainerHeight+"px",overflow:"hidden",top:0}),this.svg.style("top",r.InteractiveLegendContainerHeight)):t.Legend.positionChartArea(this.svg,this.legend),this.previousRadius=this.radius;var n=this.radius=this.calculateRadius(),o=i.width/2,s=i.height/2;this.arc=d3.svg.arc(),this.outerArc=d3.svg.arc().innerRadius(n*r.OuterArcRadiusRatio).outerRadius(n*r.OuterArcRadiusRatio),this.isInteractive?(this.mainGraphicsContext.attr("transform",t.SVGUtil.translate(o,s)),this.labelGraphicsContext.attr("transform",t.SVGUtil.translate(o,s))):(this.mainGraphicsContext.transition().duration(e).attr("transform",t.SVGUtil.translate(o,s)),this.labelGraphicsContext.transition().duration(e).attr("transform",t.SVGUtil.translate(o,s))),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)},r.prototype.initDonutProperties=function(){this.donutProperties={viewport:this.currentViewport,radius:this.radius,arc:this.arc.innerRadius(0).outerRadius(this.radius*r.InnerArcRadiusRatio),outerArc:this.outerArc,innerArcRadiusRatio:r.InnerArcRadiusRatio,outerArcRadiusRatio:r.OuterArcRadiusRatio,dataLabelsSettings:this.data.dataLabelsSettings}},r.prototype.mergeDatasets=function(t,i){var a=d3.set();i.forEach(function(e){a.add(e.identity?e.identity.getKey():e.data.identity.getKey())});var r=t.filter(function(e){return!a.has(e.identity?e.identity.getKey():e.data.identity.getKey())}).map(function(t){var i=e.Prototype.inherit(t);return void 0===i.percentage?i.data.percentage=0:i.percentage=0,i});return d3.merge([i,r])},r.prototype.updateInternal=function(e,i,a){void 0===a&&(a=0);var n=this.currentViewport;if(a=a||t.AnimatorCommon.GetAnimationDuration(this.animator,i),this.animator){var o,s,l,u=r.getLayout(this.radius,this.sliceWidthRatio,n,e.dataLabelsSettings),c=e.dataLabelsSettings,h=[];if(c&&c.show&&(h=this.createLabels()),!i){var d={viewModel:e,colors:this.colors,
graphicsContext:this.mainGraphicsContext,labelGraphicsContext:this.labelGraphicsContext,interactivityService:this.interactivityService,layout:u,radius:this.radius,sliceWidthRatio:this.sliceWidthRatio,viewport:n,labels:h,innerArcRadiusRatio:r.InnerArcRadiusRatio};o=this.animator.animate(d),s=o.shapes,l=o.highlightShapes}(i||o.failed)&&(s=r.drawDefaultShapes(this.svg,e,u,this.colors,this.radius,this.interactivityService&&this.interactivityService.hasSelection(),this.sliceWidthRatio,this.data.defaultDataPointColor),l=r.drawDefaultHighlightShapes(this.svg,e,u,this.colors,this.radius,this.sliceWidthRatio),t.NewDataLabelUtils.drawDefaultLabels(this.labelGraphicsContext,h,!1,!0),t.NewDataLabelUtils.drawLabelLeaderLines(this.labelGraphicsContext,h)),this.assignInteractions(s,l,e),this.tooltipsEnabled&&(t.TooltipManager.addTooltip(s,function(e){return e.data.data.tooltipInfo}),t.TooltipManager.addTooltip(l,function(e){return e.data.data.tooltipInfo}))}else this.updateInternalToMove(e,a);t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options)},r.prototype.createLabels=function(){var i=new e.DonutLabelLayout({maximumOffset:t.NewDataLabelUtils.maxLabelOffset,startingOffset:t.NewDataLabelUtils.startingLabelOffset},this.donutProperties),a=this.createLabelDataPoints();return i.layout(a)},r.prototype.createLabelDataPoints=function(){var e=this.data,i=[],a=t.dataLabelUtils.createColumnFormatterCacheManager(),r=null;0===e.dataLabelsSettings.displayUnits&&(r=d3.max(e.dataPoints,function(e){return Math.abs(e.data.measure)}));for(var n=0;n<this.data.dataPoints.length;n++){var o=this.createLabelDataPoint(e.dataPoints[n],r,a);i.push(o)}return i},r.prototype.getTextSize=function(i,r){var n={text:i,fontFamily:t.NewDataLabelUtils.LabelTextProperties.fontFamily,fontSize:a.fromPoint(r),fontWeight:t.NewDataLabelUtils.LabelTextProperties.fontWeight};return{width:e.TextMeasurementService.measureSvgTextWidth(n),height:e.TextMeasurementService.estimateSvgTextHeight(n)}},r.prototype.createLabelDataPoint=function(e,i,a){var r,n,o,s,l,u=this.outerArc.centroid(e),c=t.DonutLabelUtils.getXPositionForDonutLabel(u[0]),h=u[1],d=this.data.dataLabelsSettings,p=a.getOrCreate(e.data.labelFormatString,d,i),g=0>c?4:8,m={point:{x:c,y:h},validPositions:[g],radius:0},f=d.labelColor?d.labelColor:t.NewDataLabelUtils.defaultLabelColor,y=d.labelStyle,v=d.fontSize;switch((y===t.labelStyle.both||y===t.labelStyle.data)&&(r=p.format(e.data.measure),n=this.getTextSize(r,v)),(y===t.labelStyle.both||y===t.labelStyle.category)&&(o=e.data.label,s=this.getTextSize(o,v)),y){case t.labelStyle.both:var b=o+" ("+r+")";l=this.getTextSize(b,v);break;case t.labelStyle.category:l=_.clone(s);break;case t.labelStyle.data:l=_.clone(n)}var C=t.DonutLabelUtils.getLabelLeaderLineForDonutChart(e,this.donutProperties,m.point),S=t.DonutLabelUtils.getLabelLeaderLinesSizeForDonutChart(C);return{isPreferred:!0,text:"",textSize:l,outsideFill:f,fontSize:v,identity:e.data.identity,parentShape:m,insideFill:t.NewDataLabelUtils.defaultInsideLabelColor,parentType:0,alternativeScale:i,donutArcDescriptor:e,angle:(e.startAngle+e.endAngle)/2-Math.PI/2,dataLabel:r,dataLabelSize:n,categoryLabel:o,categoryLabelSize:s,leaderLinePoints:C,linesSize:S}},r.prototype.renderLegend=function(){if(!this.isInteractive){var e=this.data.legendObjectProperties;if(e){var i=this.data.legendData;t.LegendData.update(i,e);var a=e[t.legendProps.position];a&&this.legend.changeOrientation(t.LegendPosition[a]),this.legend.drawLegend(i,this.parentViewport)}else this.legend.changeOrientation(t.LegendPosition.Top),this.legend.drawLegend({dataPoints:[]},this.parentViewport)}},r.prototype.addInteractiveLegendArrow=function(){var e=11,i=16.5;if(!this.interactiveLegendArrow){var a=this.svg.append("g");a.append("path").classed(r.InteractiveLegendArrowClassName,!0).attr("d","M1.5,2.6C0.65,1.15,1.85,0,3,0l27,0c1.65,0,2.35,1.15,1.5,2.6L18,26.45c-0.8,1.45-2.15,1.45-2.95,0L1.95,2.6z"),this.interactiveLegendArrow=a}var n=this.currentViewport,o=this.getScaleForLegendArrow(),s=(n.height-2*this.radius)/2+e*o,l=n.width/2-i*o;this.interactiveLegendArrow.attr("transform",t.SVGUtil.translateAndScale(l,s,o))},r.prototype.calculateSliceAngles=function(){var e=[],t=this.data.dataPoints;if(0===t.length)return this.interactivityState.valueToAngleFactor=0,void(this.interactivityState.sliceAngles=[]);for(var i=0,a=0,r=t.length;r>a;a++)i+=t[a].data.percentage;this.interactivityState.valueToAngleFactor=360/i;for(var n=0,a=0,r=t.length;r>a;a++){var o=t[a].data.percentage*this.interactivityState.valueToAngleFactor;n+=o,e.push(o/2-n)}this.interactivityState.sliceAngles=e},r.prototype.assignInteractions=function(e,t,i){if(this.isInteractive)this.assignInteractiveChartInteractions(e);else if(this.interactivityService){var a=i.dataPoints.map(function(e){return e.data}),r={clearCatcher:this.clearCatcher,slices:e,highlightSlices:t,allowDrilldown:this.allowDrilldown,visual:this,hasHighlights:i.hasHighlights,svg:this.svg};this.interactivityService.bind(a,this.behavior,r)}},r.prototype.setDrilldown=function(e){if(e){var i=d3.layout.pie().sort(null).value(function(e){return e.percentage}),a=[{label:e.label,color:e.color,icon:t.LegendIcon.Box,identity:e.identity,selected:e.selected}],n={title:"",dataPoints:a},o=i(e.internalDataPoints);this.updateInternal({dataPointsToDeprecate:e.internalDataPoints,dataPoints:o,unCulledDataPoints:o.map(function(e){return e.data}),legendData:n,hasHighlights:!1,dataLabelsSettings:this.data.dataLabelsSettings},!1,r.DrillDownAnimationDuration)}else this.updateInternal(this.data,!1,r.DrillDownAnimationDuration)},r.prototype.assignInteractiveChartInteractions=function(e){var t=this,i=this.svg;this.interactivityState.interactiveChosenSliceFinishedSetting=!0;var a=i.node().getBoundingClientRect();this.interactivityState.donutCenter={x:a.left+a.width/2,y:a.top+a.height/2},this.interactivityState.totalDragAngleDifference=0,this.interactivityState.currentRotate=0,this.calculateSliceAngles(),e.on("click",function(e,i){d3.event.defaultPrevented||t.setInteractiveChosenSlice(i)});var r=d3.behavior.drag().origin(Object).on("dragstart",function(){return t.interactiveDragStart()}).on("drag",function(){return t.interactiveDragMove()}).on("dragend",function(){return t.interactiveDragEnd()});i.style("touch-action","none").call(r)},r.prototype.getAngleFromDragEvent=function(){var e,t,i=this.interactivityState,a=d3.event.sourceEvent;if(-1!==a.type.toLowerCase().indexOf("touch")){if(1!==a.touches.length)return null;var r=a.touches[0];e=r.pageX,t=r.pageY}else e=a.pageX,t=a.pageY;var n={x:e-i.donutCenter.x,y:-t+i.donutCenter.y},o=180*Math.atan2(n.y,n.x)/Math.PI;return o},r.prototype.interactiveDragStart=function(){this.interactivityState.totalDragAngleDifference=0,this.interactivityState.previousDragAngle=this.getAngleFromDragEvent()},r.prototype.interactiveDragMove=function(){var e=this.data.dataPoints,i=this.currentViewport,a=this.interactivityState;if(a.interactiveChosenSliceFinishedSetting===!0){var n=this.getAngleFromDragEvent();if(!n)return;var o=a.previousDragAngle-n;a.totalDragAngleDifference+=o,a.previousDragAngle=n,a.currentRotate+=o,this.svg.select("g").attr("transform",t.SVGUtil.translateAndRotate(i.width/2,i.height/2,0,0,this.interactivityState.currentRotate));var s=e[0].data.percentage*a.valueToAngleFactor,l=a.currentRotate<=0?-1*a.currentRotate%360:360-a.currentRotate%360;a.currentIndexDrag=0;for(var u=e.length;a.currentIndexDrag<u&&l>s;)a.currentIndexDrag<u-1&&(s+=e[a.currentIndexDrag+1].data.percentage*a.valueToAngleFactor),a.currentIndexDrag++;a.currentIndexDrag!==a.previousIndexDrag&&(a.interactiveLegend.updateLegend(a.currentIndexDrag),this.svg.selectAll(".slice").attr("opacity",function(e,t){return t===a.currentIndexDrag?r.OpaqueOpacity:r.SemiTransparentOpacity}),a.previousIndexDrag=a.currentIndexDrag)}},r.prototype.interactiveDragEnd=function(){0!==this.interactivityState.totalDragAngleDifference&&(this.setInteractiveChosenSlice(this.interactivityState.currentIndexDrag),d3.event.sourceEvent.stopPropagation())},r.prototype.updateInternalToMove=function(e,i){void 0===i&&(i=0);var a=this.svg,n=this.pie,o=this.key,s=this.arc,l=this.radius,u=this.previousRadius,c=this.sliceWidthRatio,h=this.svg.select(".slices").selectAll("path"+r.sliceClass.selector).data().map(function(e){return e.data});0===h.length&&(h=e.dataPointsToDeprecate);var d=this.mergeDatasets(h,e.dataPointsToDeprecate),p=a.select(".slices").selectAll("path"+r.sliceClass.selector).data(n(e.dataPointsToDeprecate),o);p.enter().insert("path").classed(r.sliceClass["class"],!0).each(function(e){this._current=e}),p=a.select(".slices").selectAll("path"+r.sliceClass.selector).data(n(d),o);var g=l*c;if(r.isSingleColor(e.dataPoints),p.style("fill",function(e){return e.data.color}).style("fill-opacity",function(i){return t.ColumnUtil.getFillOpacity(i.data.selected,!1,!1,e.hasHighlights)}).style("stroke","white").style("stroke-dasharray",function(e){return r.drawStrokeForDonutChart(l,r.InnerArcRadiusRatio,e,c)}).style("stroke-width",function(e){return e.data.strokeWidth}).transition().duration(i).attrTween("d",function(e){var t=d3.interpolate(this._current,e),i=d3.interpolate(u*r.InnerArcRadiusRatio,l*r.InnerArcRadiusRatio);return this._current=t(0),function(e){return s.innerRadius(g).outerRadius(i(e))(t(e))}}),p=a.select(".slices").selectAll("path"+r.sliceClass.selector).data(n(e.dataPointsToDeprecate),o),p.exit().transition().delay(i).duration(0).remove(),!this.isInteractive){var m=e.dataLabelsSettings,f=[];m&&m.show&&(f=this.createLabels()),t.NewDataLabelUtils.drawDefaultLabels(this.labelGraphicsContext,f,!1,!0),t.NewDataLabelUtils.drawLabelLeaderLines(this.labelGraphicsContext,f)}var y=void 0;e.hasHighlights?(y=a.select(".slices").selectAll("path"+r.sliceHighlightClass.selector).data(n(e.dataPointsToDeprecate),o),y.enter().insert("path").classed(r.sliceHighlightClass["class"],!0).each(function(e){this._current=e}),r.isSingleColor(e.dataPoints),y.style("fill",function(e){return e.data.color}).style("fill-opacity",1).style("stroke","white").style("stroke-dasharray",function(e){return r.drawStrokeForDonutChart(l,r.InnerArcRadiusRatio,e,c,e.data.highlightRatio)}).style("stroke-width",function(e){return 0===e.data.highlightRatio?0:e.data.strokeWidth}).transition().duration(i).attrTween("d",function(e){var t=d3.interpolate(this._current,e),i=d3.interpolate(u*r.InnerArcRadiusRatio,r.getHighlightRadius(l,c,e.data.highlightRatio));return this._current=t(0),function(e){return s.innerRadius(g).outerRadius(i(e))(t(e))}}),y.exit().transition().delay(i).duration(0).remove()):a.selectAll("path"+r.sliceHighlightClass.selector).transition().delay(i).duration(0).remove(),this.assignInteractions(p,y,e),this.tooltipsEnabled&&(t.TooltipManager.addTooltip(p,function(e){return e.data.data.tooltipInfo}),e.hasHighlights&&t.TooltipManager.addTooltip(y,function(e){return e.data.data.tooltipInfo})),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.options),this.isInteractive&&(this.addInteractiveLegendArrow(),this.interactivityState.interactiveLegend.drawLegend(this.data.dataPointsToDeprecate),this.setInteractiveChosenSlice(this.interactivityState.lastChosenInteractiveSliceIndex?this.interactivityState.lastChosenInteractiveSliceIndex:0))},r.drawDefaultShapes=function(e,i,a,n,o,s,l,u){var c=e.select(".slices").selectAll("path"+r.sliceClass.selector).data(i.dataPoints,function(e){return e.data.identity.getKey()});return c.enter().insert("path").classed(r.sliceClass["class"],!0),r.isSingleColor(i.dataPoints),c.style("fill",function(e){return e.data.color}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.data.selected,!1,s,i.hasHighlights)}).style("stroke-dasharray",function(e){return r.drawStrokeForDonutChart(o,r.InnerArcRadiusRatio,e,l)}).style("stroke-width",function(e){return e.data.strokeWidth}).attr(a.shapeLayout),c.exit().remove(),c},r.drawDefaultHighlightShapes=function(e,i,a,n,o,s){var l=e.select(".slices").selectAll("path"+r.sliceHighlightClass.selector).data(i.dataPoints.filter(function(e){return null!=e.data.highlightRatio}),function(e){return e.data.identity.getKey()});return l.enter().insert("path").classed(r.sliceHighlightClass["class"],!0).each(function(e){this._current=e}),r.isSingleColor(i.dataPoints),l.style("fill",function(e){return e.data.color}).style("fill-opacity",function(e){return t.ColumnUtil.getFillOpacity(e.data.selected,!0,!1,i.hasHighlights)}).style("stroke","white").style("stroke-dasharray",function(e){return r.drawStrokeForDonutChart(o,r.InnerArcRadiusRatio,e,s,e.data.highlightRatio)}).style("stroke-width",function(e){return 0===e.data.highlightRatio?0:e.data.strokeWidth}).attr(a.highlightShapeLayout),l.exit().remove(),l},r.isSingleColor=function(e){if(e.length>1){var t=e.length-1;e[t].data.isLastInDonut=e[t].data.color===e[0].data.color}},r.drawStrokeForDonutChart=function(e,t,i,a,n){void 0===n&&(n=1);var o,s,l=e*t*n,u=(i.endAngle-i.startAngle)*l;if(a){var c=e*a,h=n*e*(r.InnerArcRadiusRatio-a),d=(i.endAngle-i.startAngle)*c;if(i.data.highlightRatio&&(u=(i.endAngle-i.startAngle)*(h+c)),i.data.isLastInDonut)return"0 "+u+" "+h+" "+d+" "+h;o=u+h+d,s=h}else i.data.isLastInDonut?(o=u,s=2*l):(o=u+l,s=l);return"0 "+o+" "+s},r.prototype.onClearSelection=function(){this.interactivityService&&this.interactivityService.clearSelection()},r.getLayout=function(e,t,i,n){var o=e*t,s=d3.svg.arc().innerRadius(o),l=s.outerRadius(e*r.InnerArcRadiusRatio),u=a.fromPoint(n.fontSize);return{fontSize:u,shapeLayout:{d:function(e){return l(e)}},highlightShapeLayout:{d:function(i){var a=s.outerRadius(r.getHighlightRadius(e,t,i.data.highlightRatio));return a(i)}},zeroShapeLayout:{d:function(e){var t=s.outerRadius(o||r.EffectiveZeroValue);return t(e)}}}},r.getHighlightRadius=function(e,t,i){var a=e*t;return a+i*e*(r.InnerArcRadiusRatio-t)},r.cullDataByViewport=function(e,t,i){for(var a,n=Math.min(i.width,i.height)/2,o=this.invisibleArcLengthInPixels/(n*r.twoPi),s=o*t,l=[],u=0;u<e.length;u++){var c=e[u];c.measure>=s&&(c.strokeWidth=a===c.color?1:0,a=c.color,l.push(c))}return l},r.ClassName="donutChart",r.InteractiveLegendClassName="donutLegend",r.InteractiveLegendArrowClassName="donutLegendArrow",r.DrillDownAnimationDuration=1e3,r.OuterArcRadiusRatio=.9,r.InnerArcRadiusRatio=.8,r.OpaqueOpacity=1,r.SemiTransparentOpacity=.6,r.defaultSliceWidthRatio=.48,r.invisibleArcLengthInPixels=3,r.sliceClass=i("slice"),r.sliceHighlightClass=i("slice-highlight"),r.twoPi=2*Math.PI,r.InteractiveLegendContainerHeight=70,r.EffectiveZeroValue=1e-9,r.PolylineOpacity=.5,r}();t.DonutChart=r;var n,o=function(){function e(e,t,i,a,r){this.legendContainerParent=t,this.colors=i,this.donutChart=e,this.visualInitOptions=a,this.legendItemsPositions=[],this.legendTransitionAnimationDuration=r&&r.legendTransitionAnimationDuration?r.legendTransitionAnimationDuration:0}return e.prototype.drawLegend=function(i){var a=this;this.data=i,this.currentNumberOfLegendItems=i.length,this.currentIndex=0,this.leftMostIndex=0,this.rightMostIndex=i.length-1,this.legendContainerParent.select(e.LegendContainerSelector).empty()&&(this.legendContainer=this.legendContainerParent.append("div").classed(e.LegendContainerClassName,!0));var r=this.legendContainer.selectAll(e.LegendItemSelector).data(i),n=this.legendContainerWidth=this.legendContainer.node().getBoundingClientRect().width,o=n/2-.4*n/2+e.ItemMargin,s=o;this.currentXOffset=o;var l=function(i,r){i.attr("data-legend-index",r.index).css({position:"absolute",left:s});var n=t.valueFormatter.format(r.label),o=t.valueFormatter.format(r.measure,r.measureFormat),l=t.valueFormatter.format(r.percentage,"0.00 %;-0.00 %;0.00 %"),u=r.color,c=e.createBasicLegendItemSpan(e.LegendItemValueClassName,o,11),h=e.createBasicLegendItemSpan(e.LegendItemCategoryClassName,n,11),d=e.createBasicLegendItemSpan(e.LegendItemPercentageClassName,l,20),p=e.spanWidth(c),g=e.spanWidth(h),m=e.spanWidth(d),f=e.legendBoxSize(p,g,m);i.css("width",f);var y=function(e){return f-e>0?(f-e)/2:0},v=y(p),b=y(g),C=y(m);e.createLegendItemSpan(h,b),e.createLegendItemSpan(c,v),e.createLegendItemSpan(d,C).css("color",u),i.append(h),i.append(d),i.append(c),a.legendItemsPositions.push({startX:s,boxWidth:f}),s+=f+e.ItemMargin};r.enter().insert("div").classed(e.LegendItemClassName,!0).each(function(e){l($(this),e)}),r.exit().remove(),this.assignInteractions()},e.prototype.updateLegend=function(e){var i=this;if(!(this.currentNumberOfLegendItems<=1)){var a=this.legendContainerWidth;this.currentIndex=e,this.updateLabelBlocks(e);var r=this.legendTransitionAnimationDuration,n=-1*(this.legendItemsPositions[e].startX+this.legendItemsPositions[e].boxWidth/2-a/2);this.legendContainer.transition().styleTween("-webkit-transform",function(e,a,r){return d3.interpolate(t.SVGUtil.translateWithPixels(i.currentXOffset,0),t.SVGUtil.translateWithPixels(n,0))}).styleTween("transform",function(e,a,r){return d3.interpolate(t.SVGUtil.translateWithPixels(i.currentXOffset,0),t.SVGUtil.translateWithPixels(n,0))}).duration(r).ease("bounce").each("end",function(){i.currentXOffset=n}),t.SVGUtil.flushAllD3TransitionsIfNeeded(this.visualInitOptions)}},e.prototype.assignInteractions=function(){var t=this,i=0,a=!1,r=function(){i=0,a=!1},n=function(){if(i+=d3.event.dx,!(a||Math.abs(i)<e.MinimumSwipeDX)){var r=0>i;t.dragLegend(r),a=!0}},o=d3.behavior.drag().origin(Object).on("drag",n).on("dragstart",r);this.legendContainer.style({"touch-action":"none",cursor:"pointer"}).call(o)},e.prototype.dragLegend=function(t){this.currentNumberOfLegendItems>e.MinimumItemsInLegendForCycled-1?this.currentIndex=this.getCyclingCurrentIndex(t):this.shouldChangeIndexInNonCycling(t)&&(t?this.currentIndex++:this.currentIndex--),this.donutChart.setInteractiveChosenSlice(this.currentIndex)},e.prototype.shouldChangeIndexInNonCycling=function(e){return 0===this.currentIndex&&!e||this.currentIndex===this.currentNumberOfLegendItems-1&&e?!1:!0},e.prototype.getCyclingCurrentIndex=function(e){var t=this.data.length,i=e?1:-1,a=(this.currentIndex+i)%(t||1);return 0>a?a+t:a},e.prototype.updateLegendItemsBlocks=function(t,i){var a=$(this.legendContainer[0]);if(t){var r=a.find("[data-legend-index="+this.leftMostIndex+"]");r.remove().insertAfter(a.find("[data-legend-index="+this.rightMostIndex+"]"));var n=this.legendItemsPositions[this.rightMostIndex].startX+this.legendItemsPositions[this.rightMostIndex].boxWidth+e.ItemMargin;this.legendItemsPositions[this.leftMostIndex].startX=n,r.css("left",n),this.rightMostIndex=this.leftMostIndex,this.leftMostIndex=(this.leftMostIndex+1)%this.data.length}else{var o=a.find("[data-legend-index="+this.rightMostIndex+"]");o.remove().insertBefore(a.find("[data-legend-index="+this.leftMostIndex+"]"));var n=this.legendItemsPositions[this.leftMostIndex].startX-this.legendItemsPositions[this.rightMostIndex].boxWidth-e.ItemMargin;this.legendItemsPositions[this.rightMostIndex].startX=n,o.css("left",n),this.leftMostIndex=this.rightMostIndex,this.rightMostIndex=this.rightMostIndex-1===-1?this.legendItemsPositions.length-1:this.rightMostIndex-1}i-1!==0&&this.updateLegendItemsBlocks(t,i-1)},e.prototype.updateLabelBlocks=function(t){this.currentNumberOfLegendItems>e.MinimumItemsInLegendForCycled?(this.rightMostIndex===t&&this.updateLegendItemsBlocks(!0,2),this.leftMostIndex===t&&this.updateLegendItemsBlocks(!1,2),(this.rightMostIndex===t+1||0===this.rightMostIndex&&t===this.currentNumberOfLegendItems-1)&&this.updateLegendItemsBlocks(!0,1),(this.leftMostIndex===t-1||this.leftMostIndex===this.currentNumberOfLegendItems-1&&0===t)&&this.updateLegendItemsBlocks(!1,1)):this.currentNumberOfLegendItems===e.MinimumItemsInLegendForCycled&&(this.rightMostIndex===t&&this.updateLegendItemsBlocks(!0,1),this.leftMostIndex===t&&this.updateLegendItemsBlocks(!1,1))},e.createBasicLegendItemSpan=function(e,t,i){return $("<span/>").addClass(e).css({"white-space":"nowrap","font-size":i+"px"}).text(t)},e.createLegendItemSpan=function(e,t){return e.css({overflow:"hidden","text-overflow":"ellipsis",display:"inline-block",width:"100%","margin-left":t}),e},e.legendBoxSize=function(t,i,a){var r=t>i?t:i;return r=r>a?r:a,r=r>e.MaxLegendItemBoxSize?e.MaxLegendItemBoxSize:r+2},e.spanWidth=function(e){return this.FakeElementSpan||(this.FakeElementSpan=$("<span>").hide().appendTo(document.body)),this.FakeElementSpan.empty(),this.FakeElementSpan.append(e),this.FakeElementSpan.width()},e.LegendContainerClassName="legend-container",e.LegendContainerSelector=".legend-container",e.LegendItemClassName="legend-item",e.LegendItemSelector=".legend-item",e.LegendItemCategoryClassName="category",e.LegendItemPercentageClassName="percentage",e.LegendItemValueClassName="value",e.MaxLegendItemBoxSize=160,e.ItemMargin=30,e.MinimumSwipeDX=15,e.MinimumItemsInLegendForCycled=3,e}();!function(e){var i=function(){function e(e,i,a){var r=e.categorical;if(this.dataViewCategorical=r,this.dataViewMetadata=e.metadata,this.seriesCount=r.values?r.values.length:0,this.colorHelper=new t.ColorHelper(i,t.donutChartProps.dataPoint.fill,a),this.maxValue=0,r.categories&&r.categories.length>0){var n=r.categories[0];this.categoryIdentities=n.identity,this.categoryValues=n.values,this.allCategoryObjects=n.objects,this.categoryColumnRef=n.identityFields,this.categoryFormatString=t.valueFormatter.getFormatString(n.source,t.donutChartProps.general.formatString)}var o=this.grouped=r&&r.values?r.values.grouped():void 0;this.isMultiMeasure=o&&o.length>0&&o[0].values&&o[0].values.length>1,this.isSingleMeasure=o&&1===o.length&&o[0].values&&1===o[0].values.length,this.isDynamicSeries=!(!r.values||!r.values.source),this.hasHighlights=this.seriesCount>0&&!_.isEmpty(r.values)&&!!r.values[0].highlights,this.highlightsOverflow=!1,this.total=0,this.highlightTotal=0,this.dataPoints=[],this.legendDataPoints=[],this.dataLabelsSettings=null;for(var s=0;s<this.seriesCount;s++)for(var l=r.values[s],u=0;u<l.values.length;u++)this.total+=Math.abs(l.values[u]),this.highlightTotal+=this.hasHighlights?Math.abs(l.highlights[u]):0;this.total=t.AxisHelper.normalizeNonFiniteNumber(this.total),this.highlightTotal=t.AxisHelper.normalizeNonFiniteNumber(this.highlightTotal)}return e.normalizedMeasureAndValue=function(e){var i=$.extend(!0,{},e);return i.measure=t.AxisHelper.normalizeNonFiniteNumber(i.measure),i.value=t.AxisHelper.normalizeNonFiniteNumber(i.value),i},e.prototype.convert=function(){var i;i=0!==this.total?this.categoryValues?this.convertCategoricalWithSlicing():this.isDynamicSeries?this.convertSeries():this.convertMeasures():[];for(var a=!1,n=0,o=i.length;o>n&&!a;n++){var s=i[n];Math.abs(s.highlightMeasureValue.measure)>Math.abs(s.measureValue.measure)&&(a=!0)}this.dataLabelsSettings=this.convertDataLabelSettings();var l=this.dataViewMetadata;if(l){var u=l.objects;u&&(this.legendObjectProperties=u.legend)}this.dataPoints=[];for(var c,h=t.donutChartProps.general.formatString,n=0,o=i.length;o>n;n++){var s=i[n],d=e.normalizedMeasureAndValue(s.highlightMeasureValue),p=e.normalizedMeasureAndValue(s.measureValue),g=p.measure,m=this.total>0?p.value/this.total:0,f=0;p.value>this.maxValue&&(this.maxValue=p.value),d.value>this.maxValue&&(this.maxValue=d.value),this.hasHighlights&&(a?(g=d.measure,m=this.highlightTotal>0?d.value/this.highlightTotal:0,f=1):f=d.value/p.value,f||(f=r.EffectiveZeroValue));var y=s.categoryLabel,v=this.dataViewCategorical,b=v.categories?null:n;b=void 0!==s.seriesIndex?s.seriesIndex:b;var C=v.values[b].source,S=s.measureValue.measure,x=this.hasHighlights&&0!==s.highlightMeasureValue.value?s.highlightMeasureValue.measure:void 0,w=t.TooltipBuilder.createTooltipInfo(h,v,y,S,null,null,b,n,x),D=c===s.color&&S&&S>0?1:0;c=S&&S>0?s.color:c,this.dataPoints.push({identity:s.identity,measure:g,measureFormat:s.measureFormat,percentage:m,index:s.index,label:s.label,highlightRatio:f,selected:!1,tooltipInfo:w,color:s.color,strokeWidth:D,labelFormatString:C.format})}this.legendData=this.convertLegendData()},e.prototype.getLegendTitle=function(){if(0!==this.total){var e=this.dataViewCategorical.values&&this.dataViewCategorical.values.source?this.dataViewCategorical.values.source.displayName:"",t=this.dataViewCategorical.categories&&this.dataViewCategorical.categories.length>0&&this.dataViewCategorical.categories[0].source?this.dataViewCategorical.categories[0].source.displayName:"";return this.categoryValues?t:e}return""},e.prototype.convertCategoricalWithSlicing=function(){for(var e=this.dataViewCategorical,i=t.donutChartProps.general.formatString,a=[],r=0,n=this.categoryValues.length;n>r;r++){for(var o=this.categoryValues[r],s=this.allCategoryObjects?this.allCategoryObjects[r]:void 0,l=t.SelectionId.createWithId(this.categoryIdentities[r]),u=this.colorHelper.getColorForSeriesValue(s,this.categoryColumnRef,o),c=t.valueFormatter.format(o,this.categoryFormatString),h=0;h<this.seriesCount;h++){var d=e.values[h],p=this.isSingleMeasure?c:t.converterHelper.getFormattedLegendLabel(d.source,e.values,i),g=d.values[r]||0,m=this.hasHighlights?d.highlights[r]||0:0,f=void 0,y=void 0;this.isMultiMeasure?f=d.source.queryName:d.identity&&(y=d);var v=t.SelectionIdBuilder.builder().withCategory(e.categories[0],r).withSeries(y,y).withMeasure(f).createSelectionId(),b={identity:v,measureFormat:t.valueFormatter.getFormatString(d.source,i,!0),measureValue:{measure:g,value:Math.abs(g)},highlightMeasureValue:{measure:m,value:Math.abs(m)},index:r*this.seriesCount+h,label:p,categoryLabel:c,color:u,seriesIndex:h};a.push(b)}this.legendDataPoints.push({label:c,color:u,icon:t.LegendIcon.Box,identity:l,selected:!1})}return a},e.prototype.convertMeasures=function(){for(var e=this.dataViewCategorical,i=[],a=t.donutChartProps.general.formatString,r=0;r<this.seriesCount;r++){var n=e.values[r],o=t.valueFormatter.getFormatString(n.source,a,!0),s=n.source.displayName,l=t.SelectionId.createWithMeasure(n.source.queryName),u=n.values[0]||0,c=this.hasHighlights?n.highlights[0]||0:0,h=this.colorHelper.getColorForMeasure(n.source.objects,n.source.queryName),d={identity:l,measureFormat:o,measureValue:{measure:u,value:Math.abs(u)},highlightMeasureValue:{measure:c,value:Math.abs(c)},index:r,label:s,categoryLabel:s,color:h};i.push(d),this.legendDataPoints.push({label:d.label,color:d.color,icon:t.LegendIcon.Box,identity:d.identity,selected:!1})}return i},e.prototype.convertSeries=function(){for(var e=this.dataViewCategorical,i=[],a=t.donutChartProps.general.formatString,r=0;r<this.seriesCount;r++){var n=e.values[r],o=t.valueFormatter.getFormatString(n.source,a,!0),s=t.converterHelper.getFormattedLegendLabel(n.source,e.values,a),l=t.SelectionId.createWithId(n.identity),u=t.converterHelper.getSeriesName(n.source),c=this.grouped&&this.grouped[r]&&this.grouped[r].objects,h=n.values[0]||0,d=this.hasHighlights?n.highlights[0]||0:0,p=this.colorHelper.getColorForSeriesValue(c,e.values.identityFields,u),g={identity:l,measureFormat:o,measureValue:{measure:h,value:Math.abs(h)},highlightMeasureValue:{measure:d,value:Math.abs(d)},index:r,label:s,categoryLabel:s,color:p,seriesIndex:r};i.push(g),this.legendDataPoints.push({label:g.label,color:g.color,icon:t.LegendIcon.Box,identity:g.identity,selected:!1})}return i},e.prototype.convertDataLabelSettings=function(){var e=this.dataViewMetadata,i=t.dataLabelUtils.getDefaultDonutLabelSettings();if(e){var a=e.objects;if(a){var r=a.labels;r&&t.dataLabelUtils.updateLabelSettingsFromLabelsObject(r,i)}}return i},e.prototype.convertLegendData=function(){return{dataPoints:this.legendDataPoints,labelColor:t.LegendData.DefaultLegendLabelFillColor,title:this.getLegendTitle(),fontSize:t.SVGLegend.DefaultFontSizeInPt}},e}();e.DonutChartConverter=i}(n||(n={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t=jsCommon.Utility,i=function(){function i(e){this.canRefresh=e.canRefresh}return i.prototype.init=function(t){this.element=t.element,this.hostServices=t.host,this.canRefresh||this.hostServices.setWarnings([new e.ScriptVisualRefreshWarning])},i.prototype.update=function(e){var i=e.dataViews;if(i&&0!==i.length){var a=i[0];if(a&&a.metadata){var r,n=!0;a.scriptResult&&a.scriptResult.imageBase64?r="data:image/png;base64,"+a.scriptResult.imageBase64:(r=this.getLastSavedImage(a),n=!1);var o=this.imageBackgroundElement;if(o||(o=$("<div class='imageBackground' />"),this.imageBackgroundElement=o,this.imageBackgroundElement.appendTo(this.element)),r&&t.isValidImageDataUrl(r)){var s=e.viewport;o.css({height:s.height,width:s.width,"background-image":"url("+r+")"}),n&&this.updateLastSavedImage(a,r,e.viewport)}else o.css({"background-image":"none"})}}},i.prototype.getLastSavedImage=function(e){var i=null;if(!e||!e.metadata)return i;var a=e.metadata.objects;if(!a||!a.lastSavedImage)return i;var r=a.lastSavedImage.imageUrl;return t.isValidImageDataUrl(r)?r:i},i.prototype.updateLastSavedImage=function(e,i,a){if(t.isValidImageDataUrl(i)&&e&&e.metadata){var r=[{objectName:"lastSavedImage",properties:{imageUrl:i,viewportHeight:a.height,viewportWidth:a.width},selector:null}];this.hostServices.persistProperties(r)}},i}();e.ScriptVisual=i}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(t){t.animatedNumber={name:"animatedNumber",capabilities:e.capabilities.animatedNumber,create:function(){return new e.AnimatedNumber}},t.areaChart={name:"areaChart",watermarkKey:"area",capabilities:e.capabilities.lineChart,create:function(){return new e.CartesianChart({chartType:1})},customizeQuery:e.LineChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.barChart={name:"barChart",watermarkKey:"bar",capabilities:e.capabilities.barChart,create:function(){return new e.CartesianChart({chartType:6})},customizeQuery:e.ColumnChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.basicShape={name:"basicShape",capabilities:e.basicShapeCapabilities,create:function(){return new e.BasicShapeVisual}},t.card={name:"card",watermarkKey:"card",capabilities:e.capabilities.card,create:function(){return new e.Card}},t.multiRowCard={name:"multiRowCard",watermarkKey:"multiRowCard",capabilities:e.capabilities.multiRowCard,create:function(){return new e.MultiRowCard}},t.clusteredBarChart={name:"clusteredBarChart",watermarkKey:"clusteredBar",capabilities:e.capabilities.clusteredBarChart,create:function(){return new e.CartesianChart({chartType:5})},customizeQuery:e.ColumnChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.clusteredColumnChart={name:"clusteredColumnChart",watermarkKey:"clusteredColumn",capabilities:e.capabilities.clusteredColumnChart,create:function(){return new e.CartesianChart({chartType:3})},customizeQuery:e.ColumnChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.columnChart={name:"columnChart",watermarkKey:"column",capabilities:e.capabilities.columnChart,create:function(){return new e.CartesianChart({chartType:4})},customizeQuery:e.ColumnChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.comboChart={name:"comboChart",watermarkKey:"combo",capabilities:e.capabilities.comboChart,customizeQuery:e.ComboChart.customizeQuery,create:function(){return new e.CartesianChart({chartType:10})}},t.dataDotChart={name:"dataDotChart",capabilities:e.capabilities.dataDotChart,create:function(){return new e.CartesianChart({chartType:11})}},t.dataDotClusteredColumnComboChart={name:"dataDotClusteredColumnComboChart",watermarkKey:"combo",capabilities:e.capabilities.dataDotClusteredColumnComboChart,customizeQuery:e.ComboChart.customizeQuery,create:function(){return new e.CartesianChart({chartType:15})}},t.dataDotStackedColumnComboChart={name:"dataDotStackedColumnComboChart",watermarkKey:"combo",capabilities:e.capabilities.dataDotStackedColumnComboChart,customizeQuery:e.ComboChart.customizeQuery,create:function(){return new e.CartesianChart({chartType:16})}},t.donutChart={name:"donutChart",watermarkKey:"donut",capabilities:e.capabilities.donutChart,
create:function(){return new e.DonutChart}},t.funnel={name:"funnel",watermarkKey:"funnel",capabilities:e.capabilities.funnel,create:function(){return new e.FunnelChart}},t.gauge={name:"gauge",watermarkKey:"gauge",capabilities:e.capabilities.gauge,create:function(){return new e.Gauge}},t.hundredPercentStackedBarChart={name:"hundredPercentStackedBarChart",watermarkKey:"100stackedbar",capabilities:e.capabilities.hundredPercentStackedBarChart,create:function(){return new e.CartesianChart({chartType:7})},customizeQuery:e.ColumnChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.hundredPercentStackedColumnChart={name:"hundredPercentStackedColumnChart",watermarkKey:"100stackedcolumn",capabilities:e.capabilities.hundredPercentStackedColumnChart,create:function(){return new e.CartesianChart({chartType:8})},customizeQuery:e.ColumnChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.image={name:"image",capabilities:e.capabilities.image,create:function(){return new e.ImageVisual}},t.lineChart={name:"lineChart",watermarkKey:"line",capabilities:e.capabilities.lineChart,create:function(){return new e.CartesianChart({chartType:0})},customizeQuery:e.LineChart.customizeQuery,getSortableRoles:function(t){return e.LineChart.getSortableRoles(t)}},t.lineStackedColumnComboChart={name:"lineStackedColumnComboChart",watermarkKey:"combo",capabilities:e.capabilities.lineStackedColumnComboChart,customizeQuery:e.ComboChart.customizeQuery,create:function(){return new e.CartesianChart({chartType:14})},getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.lineClusteredColumnComboChart={name:"lineClusteredColumnComboChart",watermarkKey:"combo",capabilities:e.capabilities.lineClusteredColumnComboChart,customizeQuery:e.ComboChart.customizeQuery,create:function(){return new e.CartesianChart({chartType:13})},getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.map={name:"map",watermarkKey:"map",capabilities:e.capabilities.map,create:function(){return new e.Map({filledMap:!1})}},t.filledMap={name:"filledMap",watermarkKey:"filledMap",capabilities:e.capabilities.filledMap,create:function(){return new e.Map({filledMap:!0})}},t.treemap={name:"treemap",watermarkKey:"tree",capabilities:e.capabilities.treemap,create:function(){return new e.Treemap}},t.pieChart={name:"pieChart",watermarkKey:"pie",capabilities:e.capabilities.donutChart,create:function(){return new e.DonutChart({sliceWidthRatio:0})}},t.scatterChart={name:"scatterChart",watermarkKey:"scatterplot",capabilities:e.capabilities.scatterChart,create:function(){return new e.CartesianChart({chartType:9})}},t.stackedAreaChart={name:"stackedAreaChart",watermarkKey:"stackedarea",capabilities:e.capabilities.lineChart,create:function(){return new e.CartesianChart({chartType:2})},customizeQuery:e.LineChart.customizeQuery,getSortableRoles:function(t){return e.ColumnChart.getSortableRoles(t)}},t.table={name:"table",watermarkKey:"table",capabilities:e.capabilities.table,create:function(){return new e.Table},customizeQuery:e.Table.customizeQuery,getSortableRoles:function(t){return e.Table.getSortableRoles()}},t.matrix={name:"matrix",watermarkKey:"matrix",capabilities:e.capabilities.matrix,create:function(){return new e.Matrix},customizeQuery:e.Matrix.customizeQuery,getSortableRoles:function(t){return e.Matrix.getSortableRoles()}},t.slicer={name:"slicer",watermarkKey:"slicer",capabilities:e.capabilities.slicer,create:function(){return new e.Slicer}},t.textbox={name:"textbox",capabilities:e.capabilities.textbox,create:function(){return new e.Textbox}},t.waterfallChart={name:"waterfallChart",watermarkKey:"waterfall",capabilities:e.capabilities.waterfallChart,create:function(){return new e.CartesianChart({chartType:12})}},t.cheerMeter={name:"cheerMeter",capabilities:e.CheerMeter.capabilities,create:function(){return new e.CheerMeter}},t.owlGauge={name:"owlGauge",watermarkKey:"gauge",capabilities:e.OwlGauge.capabilities,create:function(){return new e.OwlGauge}},t.scriptVisual={name:"scriptVisual",watermarkKey:"scriptvisual",capabilities:e.capabilities.scriptVisual,create:function(){return new e.ScriptVisual({canRefresh:!1})}},t.kpi={name:"kpi",watermarkKey:"kpi",capabilities:e.capabilities.kpi,create:function(){return new e.KPIStatusWithHistory}}}(t=e.plugins||(e.plugins={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));var powerbi;!function(e){var t;!function(e){var t;!function(e){function t(){return"#FFFFFF"}function i(){return{color:t()}}e.getDefaultColor=t,e.getDefaultValues=i}(t=e.CanvasBackgroundHelper||(e.CanvasBackgroundHelper={}))}(t=e.visuals||(e.visuals={}))}(powerbi||(powerbi={}));
//# sourceMappingURL=Visuals.min.js.map
